{
    "issue": {
        "title": "[C++] Support Ubuntu 14.04 in .deb packaging automation",
        "body": "***Note**: This issue was originally created as [ARROW-1538](https://issues.apache.org/jira/browse/ARROW-1538). Please see the [migration documentation](https://gist.github.com/toddfarmer/12aa88361532d21902818a6044fda4c3) for further details.*\n\n### Original Issue Description:\n",
        "created_at": "2017-09-14T19:14:13.000Z",
        "updated_at": "2017-10-19T01:33:45.000Z",
        "labels": [
            "Migrated from Jira",
            "Component: C++",
            "Component: Packaging",
            "Type: enhancement"
        ],
        "closed": true,
        "closed_at": "2017-10-19T01:33:45.000Z"
    },
    "comments": [
        {
            "created_at": "2017-09-15T05:41:58.493Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-1538?focusedCommentId=16167366) by Kouhei Sutou (kou):*\n`[~rvernica]` I want to separate debian/ directory like debian.ubuntu-14.04/ for Ubuntu 14.04 because there are many differences with other supported platforms."
        },
        {
            "created_at": "2017-09-19T05:12:33.692Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-1538?focusedCommentId=16171132) by Rares Vernica (rvernica):*\nI'm trying to build Arrow `0.7.0` in Ubuntu `14.04` using the patches from [here](https://issues.apache.org/jira/browse/ARROW-592?focusedCommentId=16143048&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16143048) but I am having some issues with glib:\n\n```Java\n# docker run --rm --tty --volume /arrow/arrow-dist/cpp-linux/apt:/host:rw --env DEBUG=yes apache-arrow-ubuntu-14.04 /host/build.sh\n...\nmake[2]: Entering directory `/build/apache-arrow-0.7.0/c_glib_build'\nmake  all-recursive\nmake[3]: Entering directory `/build/apache-arrow-0.7.0/c_glib_build'\nMaking all in arrow-glib\nmake[4]: Entering directory `/build/apache-arrow-0.7.0/c_glib_build/arrow-glib'\n  GEN      stamp-enums.c\ntouch stamp-enums.c\n  GEN      stamp-enums.h\ntouch stamp-enums.h\nmake  all-am\nmake[5]: Entering directory `/build/apache-arrow-0.7.0/c_glib_build/arrow-glib'\n  CXX      libarrow_glib_la-array.lo\nIn file included from ../../c_glib/arrow-glib/array.h:23:0,\n                 from ../../c_glib/arrow-glib/array.hpp:24,\n                 from ../../c_glib/arrow-glib/array.cpp:24:\n../../c_glib/arrow-glib/compute.h:27:25: error: expected constructor, destructor, or type conversion before '(' token\n G_DECLARE_DERIVABLE_TYPE(GArrowCastOptions,\n                         ^\n../../c_glib/arrow-glib/compute.h:37:1: error: 'GArrowCastOptions' does not name a type\n GArrowCastOptions *garrow_cast_options_new(void);\n ^\nIn file included from ../../c_glib/arrow-glib/array.hpp:24:0,\n                 from ../../c_glib/arrow-glib/array.cpp:24:\n../../c_glib/arrow-glib/array.h:88:42: error: 'GArrowCastOptions' has not been declared\n                                          GArrowCastOptions *options,\n                                          ^\nIn file included from ../../c_glib/arrow-glib/array.cpp:26:0:\n../../c_glib/arrow-glib/compute.hpp:26:1: error: 'GArrowCastOptions' does not name a type\n GArrowCastOptions *garrow_cast_options_new_raw(arrow::compute::CastOptions *arrow_cast_options);\n ^\n../../c_glib/arrow-glib/compute.hpp:27:58: error: 'GArrowCastOptions' was not declared in this scope\n arrow::compute::CastOptions *garrow_cast_options_get_raw(GArrowCastOptions *cast_options);\n                                                          ^\n../../c_glib/arrow-glib/compute.hpp:27:77: error: 'cast_options' was not declared in this scope\n arrow::compute::CastOptions *garrow_cast_options_get_raw(GArrowCastOptions *cast_options);\n                                                                             ^\n../../c_glib/arrow-glib/array.cpp:519:19: error: 'GArrowCastOptions' has not been declared\n                   GArrowCastOptions *options,\n                   ^\n../../c_glib/arrow-glib/array.cpp: In function 'GArrowArray* garrow_array_cast(GArrowArray*, GArrowDataType*, int*, GError**)':\n../../c_glib/arrow-glib/array.cpp:530:61: error: 'garrow_cast_options_get_raw' cannot be used as a function\n     auto arrow_options = garrow_cast_options_get_raw(options);\n                                                             ^\nmake[5]: *** [libarrow_glib_la-array.lo] Error 1\nmake[5]: Leaving directory `/build/apache-arrow-0.7.0/c_glib_build/arrow-glib'\nmake[4]: *** [all] Error 2\nmake[4]: Leaving directory `/build/apache-arrow-0.7.0/c_glib_build/arrow-glib'\nmake[3]: *** [all-recursive] Error 1\nmake[3]: Leaving directory `/build/apache-arrow-0.7.0/c_glib_build'\nmake[2]: *** [all] Error 2\nmake[2]: Leaving directory `/build/apache-arrow-0.7.0/c_glib_build'\ndh_auto_build: make -j1 returned exit code 2\nmake[1]: *** [override_dh_auto_build] Error 2\nmake[1]: Leaving directory `/build/apache-arrow-0.7.0'\nmake: *** [build] Error 2\ndpkg-buildpackage: error: debian/rules build gave error exit status 2\ndebuild: fatal error at line 1364:\ndpkg-buildpackage -rfakeroot -D -us -uc failed\nFailed debuild -us -uc\n```"
        },
        {
            "created_at": "2017-09-19T14:05:49.798Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-1538?focusedCommentId=16171762) by Wes McKinney (wesm):*\nhi `[~rvernica]` you need ARROW-1546 https://github.com/apache/arrow/commit/bfe657909f5e7d96b7b8e5179baa17044b6ea375"
        },
        {
            "created_at": "2017-09-21T05:30:01.057Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-1538?focusedCommentId=16174290) by Rares Vernica (rvernica):*\nThanks for the pointer on glib. I applied the `bfe65790` commit on top of the `0.7.0` tag and I am able to move past that error, but I get some errors related to missing files, even while building for Ubuntu `16.04`:\n```Java\n# docker run --rm --tty --volume /arrow-dist/cpp-linux/apt:/host:rw --env DEBUG=yes apache-arrow-ubuntu-16.04 /host/build.sh\n...\n-- Installing: /build/apache-arrow-0.7.0/debian/tmp/usr/include/arrow/python/type_traits.h\n-- Installing: /build/apache-arrow-0.7.0/debian/tmp/usr/lib/x86_64-linux-gnu/pkgconfig/arrow-python.pc\nmake[2]: Leaving directory '/build/apache-arrow-0.7.0/cpp_build'\ndh_auto_install\t\t\t\t\\\n  --sourcedirectory=c_glib\t\t\\\n  --builddirectory=c_glib_build\nmake[1]: Leaving directory '/build/apache-arrow-0.7.0'\n   dh_install\ndh_install: libarrow-glib0 missing files: usr/lib/*/libarrow-glib.so.*\ndh_install: gir1.2-arrow-1.0 missing files: usr/lib/*/girepository-1.0/\ndh_install: libarrow-glib-dev missing files: usr/include/arrow-glib/\ndh_install: libarrow-glib-dev missing files: usr/lib/*/libarrow-glib.a\ndh_install: libarrow-glib-dev missing files: usr/lib/*/libarrow-glib.so\ndh_install: libarrow-glib-dev missing files: usr/lib/*/pkgconfig/arrow-glib.pc\ndh_install: libarrow-glib-dev missing files: usr/share/gir-1.0/\ndh_install: libarrow-glib-dev missing files: usr/share/arrow-glib/example/\ndh_install: libarrow-glib-doc missing files: usr/share/doc/libarrow-glib-doc/arrow-glib/\ndh_install: missing files, aborting\ndebian/rules:12: recipe for target 'binary' failed\nmake: *** [binary] Error 2\ndpkg-buildpackage: error: fakeroot debian/rules binary gave error exit status 2\ndebuild: fatal error at line 1376:\ndpkg-buildpackage -rfakeroot -D -us -uc failed\nFailed debuild -us -uc\n```\nIt seems like nothing is happening for `c_glib` during `dh_auto_install`."
        },
        {
            "created_at": "2017-09-23T05:10:43.977Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-1538?focusedCommentId=16177570) by Rares Vernica (rvernica):*\nI figured it out. I was applying the patch on the git clone and then doing git archive. The resulting archive did not contain all the necessary Makefiles. Instead, I applied the patch on the distributed archive and it worked."
        },
        {
            "created_at": "2017-09-23T05:48:51.926Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-1538?focusedCommentId=16177585) by Rares Vernica (rvernica):*\nPR: https://github.com/apache/arrow-dist/pull/11"
        }
    ]
}