{
    "issue": {
        "title": "[C++] Undefined reference when building flight code",
        "body": "***Note**: This issue was originally created as [ARROW-9169](https://issues.apache.org/jira/browse/ARROW-9169). Please see the [migration documentation](https://gist.github.com/toddfarmer/12aa88361532d21902818a6044fda4c3) for further details.*\n\n### Original Issue Description:\nWhen linking flight-test-server with CMakeFiles/flight-test-server.dir/link.txt, I get the following error:\r\n\r\n../../../debug/libarrow_flight.so.100.0.0: undefined reference to `absl::StrCat[abi:cxx11](absl::AlphaNum const&, absl::AlphaNum const&, absl::AlphaNum const&)'\r\n../../../debug/libarrow_flight.so.100.0.0: undefined reference to `absl::strings_internal::CatPieces[abi:cxx11](std::initializer_list<absl::string_view>)'\r\n../../../debug/libarrow_flight.so.100.0.0: undefined reference to `absl::numbers_internal::FastIntToBuffer(long, char\\*)'\r\n../../../debug/libarrow_flight.so.100.0.0: undefined reference to `absl::numbers_internal::FastIntToBuffer(unsigned long, char\\*)'\r\n../../../debug/libarrow_flight.so.100.0.0: undefined reference to `absl::str_format_internal::FormatPack[abi:cxx11](absl::str_format_internal::UntypedFormatSpecImpl, absl::Span<absl::str_format_internal::FormatArgImpl const>)'\r\n../../../debug/libarrow_flight.so.100.0.0: undefined reference to `absl::numbers_internal::SixDigitsToBuffer(double, char\\*)'\r\n../../../debug/libarrow_flight.so.100.0.0: undefined reference to `absl::base_internal::ThrowStdOutOfRange(char const\\*)'\r\n../../../debug/libarrow_flight.so.100.0.0: undefined reference to `absl::string_view::find(char, unsigned long) const'\r\n../../../debug/libarrow_flight.so.100.0.0: undefined reference to `absl::StrCat[abi:cxx11](absl::AlphaNum const&, absl::AlphaNum const&, absl::AlphaNum const&, absl::AlphaNum const&)'\r\n../../../debug/libarrow_flight.so.100.0.0: undefined reference to `absl::FormatTime[abi:cxx11](absl::Time)'\r\n../../../debug/libarrow_flight.so.100.0.0: undefined reference to `bool absl::str_format_internal::FormatArgImpl::Dispatch<char const\\*>(absl::str_format_internal::FormatArgImpl::Data, absl::str_format_internal::FormatConversionSpecImpl, void\\*)'\r\n../../../debug/libarrow_flight.so.100.0.0: undefined reference to `bool absl::str_format_internal::FormatArgImpl::Dispatch<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >(absl::str_format_internal::FormatArgImpl::Data, absl::str_format_internal::FormatConversionSpecImpl, void\\*)'\r\n../../../debug/libarrow_flight.so.100.0.0: undefined reference to `absl::numbers_internal::FastIntToBuffer(unsigned int, char\\*)'\r\n../../../debug/libarrow_flight.so.100.0.0: undefined reference to `absl::EqualsIgnoreCase(absl::string_view, absl::string_view)'\r\n../../../debug/libarrow_flight.so.100.0.0: undefined reference to `absl::StrCat[abi:cxx11](absl::AlphaNum const&, absl::AlphaNum const&)'\r\n../../../debug/libarrow_flight.so.100.0.0: undefined reference to `absl::numbers_internal::FastIntToBuffer(int, char\\*)'\r\n../../../debug/libarrow_flight.so.100.0.0: undefined reference to `absl::optional_internal::throw_bad_optional_access()'\r\n../../../debug/libarrow_flight.so.100.0.0: undefined reference to `absl::ByChar::Find(absl::string_view, unsigned long) const'\r\n\r\nit seems absl has been installed successfully by cmake. ",
        "created_at": "2020-06-18T12:15:43.000Z",
        "updated_at": "2022-08-27T14:42:02.000Z",
        "labels": [
            "Migrated from Jira",
            "Component: C++",
            "Type: bug"
        ],
        "closed": true,
        "closed_at": "2020-06-22T02:54:10.000Z"
    },
    "comments": [
        {
            "created_at": "2020-06-19T01:52:59.709Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-9169?focusedCommentId=17140097) by Kouhei Sutou (kou):*\nCould you show your `cmake` command line?"
        },
        {
            "created_at": "2020-06-19T03:30:53.015Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-9169?focusedCommentId=17140167) by Liya Fan (fan_li_ya):*\n`[~kou]` Thanks a lot for your attention.\r\nThis is my cmake command line:\r\n\r\n```\n\r\ncmake \\\r\n  -DCMAKE_BUILD_TYPE=Debug \\\r\n  -DARROW_BUILD_TESTS=ON \\\r\n  -DARROW_BUILD_BENCHMARKS=ON \\\r\n  -DARROW_FLIGHT=ON \\\r\n  -DARROW_DATASET=ON \\\r\n  -DARROW_PARQUET=ON \\\r\n  -DARROW_JNI=ON \\\r\n  -DARROW_BUILD_EXAMPLES=ON \\\r\n  -DBOOST_SOURCE=SYSTEM \\\r\n  -DBoost_INCLUDE_DIR=~/software/boost_1_71_0 \\\r\n  -DCMAKE_CXX_COMPILER=~/software/gcc-7.2.0/bin/c++ \\\r\n  -DCMAKE_C_COMPILER=~/software/gcc-7.2.0/bin/gcc \\\r\n  -DTHRIFT_COMPILER=~/software/thrift-0.12.0/bin/thrift \\\r\n  -DTHRIFT_INCLUDE_DIR=~/software/thrift-0.12.0/include \\\r\n  -DTHRIFT_STATIC_LIB=~/software/thrift-0.12.0/lib/libthrift-0.12.0.so \\\r\n  -DGRPC_ADDRESS_SORTING_LIB=~/software/grpc/lib/libaddress_sorting.a \\\r\n  -DGRPC_CPP_PLUGIN=~/software/grpc/bin/grpc_cpp_plugin \\\r\n  -DGRPC_GPR_LIB=~/software/grpc/lib/libgpr.a \\\r\n  -DGRPC_GRPCPP_LIB=~/software/grpc/lib/libgrpc++.a \\\r\n  -DGRPC_GRPC_LIB=~/software/grpc/lib/libgrpc.a \\\r\n  -DGRPC_INCLUDE_DIR=~/software/grpc/include \\\r\n  -DGRPC_UPB_LIB=~/software/grpc/lib/libupb.a \\\r\n  -DProtobuf_INCLUDE_DIR=~/software/protobuf/include \\\r\n  -DProtobuf_LIBRARY_DEBUG=~/software/protobuf/lib/libprotobuf.a \\\r\n  -DProtobuf_LIBRARY_RELEASE=~/software/protobuf/lib/libprotobuf.a \\\r\n  -DProtobuf_LITE_LIBRARY_DEBUG=~/software/protobuf/lib/libprotobuf-lite.a \\\r\n  -DProtobuf_LITE_LIBRARY_RELEASE=~/software/protobuf/lib/libprotobuf-lite.a \\\r\n  -DProtobuf_PROTOC_EXECUTABLE=~/software/protobuf/bin/protoc \\\r\n  -DProtobuf_PROTOC_LIBRARY_DEBUG=~/software/protobuf/lib/libprotoc.a \\\r\n  -DProtobuf_PROTOC_LIBRARY_RELEASE=~/software/protobuf/lib/libprotoc.a \\\r\n  -Dabsl_DIR=~/src/github/build/arrow-cpp-debug/absl_ep-install \\\r\n  ../../arrow/cpp\r\n```"
        },
        {
            "created_at": "2020-06-19T20:58:11.607Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-9169?focusedCommentId=17140831) by Kouhei Sutou (kou):*\nThanks.\r\n\r\nIt seems that Abseil isn't found by `find_package(absl CONFIG)` in `cpp/cmake_modules/FindRPCAlt.cmake`.\r\n\r\nDoes `~/src/github/build/arrow-cpp-debug/absl_ep-install/lib/cmake/absl/abslConfig.cmake` exist?\r\n\r\nIf it exists, could you try `absl_DIR=~/src/... cmake ...` command line?\r\n`<PackageName>_DIR` is an environment variable not a CMake variable."
        },
        {
            "created_at": "2020-06-22T02:53:42.022Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-9169?focusedCommentId=17141657) by Liya Fan (fan_li_ya):*\n`[~kou]` Thanks a lot for your suggestion.\r\nThe problem was caused by the incorrect value of `absl_DIR`, after changing it to absl_DIR=~/src/... cmake ..., the problem was resolved. "
        },
        {
            "created_at": "2022-08-27T14:42:02.232Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-9169?focusedCommentId=17586002) by @toddfarmer:*\nTransitioning issue from Resolved to Closed to based on resolution field value."
        }
    ]
}