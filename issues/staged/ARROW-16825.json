{
    "issue": {
        "title": "[Java] Inclusion of a git.properties resource in Arrow JARs causes confusion in Spring Boot applications",
        "body": "***Note**: This issue was originally created as [ARROW-16825](https://issues.apache.org/jira/browse/ARROW-16825). Please see the [migration documentation](https://gist.github.com/toddfarmer/12aa88361532d21902818a6044fda4c3) for further details.*\n\n### Original Issue Description:\nBy default Spring Boot reads `classpath:git.properties` to get information about the Git repository of an application. However, Arrow JARs also include a resource called `git.properties`, and this can cause Spring Boot to read the information from one of the Arrow libraries instead of from the application. [This was reported to Spring Boot as an issue](https://github.com/spring-projects/spring-boot/issues/18137), but the Spring Boot developers say that they cannot automatically distinguish the application Git properties from `git.properties` resources from dependencies.\r\n\r\nWould you consider omitting `git.properties` from Arrow JARs in future releases or will Spring Boot users that (directly or indirectly) use Arrow need to work around this by letting `git-commit-id-plugin` generate the application Git properties in an alternative location and configuring Spring Boot to read the information from that alternative location (`spring.info.git.location`)? Of course other libraries could also cause this issue, but Arrow is the first and only library that I've encountered so far that publishes JARs with a `git.properties` resource in them.\r\n\r\nIt seems that the fact that Arrow JARs include `git.properties` resources also caused ARROW-6361.",
        "created_at": "2022-06-13T14:21:42.000Z",
        "updated_at": "2022-07-12T20:03:35.000Z",
        "labels": [
            "Migrated from Jira",
            "Component: Java",
            "Type: bug"
        ],
        "closed": true,
        "closed_at": "2022-07-12T20:03:35.000Z"
    },
    "comments": [
        {
            "created_at": "2022-06-13T20:56:57.726Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-16825?focusedCommentId=17553789) by Kouhei Sutou (kou):*\nI'm not familiar with `.jar`. A `.jar` doesn't include `.git.properties` in general, right? If so, our `.jar` should not include `.git.properties`. "
        },
        {
            "created_at": "2022-06-14T12:27:54.118Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-16825?focusedCommentId=17554078) by Nils Breunese (breun):*\nIn my experience library `.jar` files indeed generally do not contain a resources called `git.properties`, but any `.jar` can contain any resource with any name in general. It's just that an application framework like Spring Boot may look for a resource called `git.properties` to find things like the commit ID and branch name the artifact was built from, assuming it will find the information for the application, but if libraries also include a resource with this name, then the framework might find the information for that library instead of the application.\r\n\r\nFor my own use case I've worked around this by generating the Git properties for my application under a different resource name and pointing Spring Boot at this alternative resource name, but omitting `git.properties` from Arrow library JARs could avoid the necessity for this for other users.\r\n\r\nI don't know if there is a specific reason why the Arrow library JARs currently do include this resource. I guess I would in principle also think that it's nice to able to find Git metadata for an artifact in that resource."
        },
        {
            "created_at": "2022-06-14T19:50:54.357Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-16825?focusedCommentId=17554270) by Kouhei Sutou (kou):*\n`[~sphillips]` Do you remember why our `.jar` provide `git.properties`? It seems that your initial commit https://github.com/apache/arrow/commit/fa5f0299f046c46e1b2f671e5e3b4f1956522711#diff-d8225ebcfc11b480a6e4f54e183b67c3ead51635a167c106d928c2abf1f9ef66R233-R274 / ARROW-1 includes it."
        },
        {
            "created_at": "2022-07-12T02:24:50.362Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-16825?focusedCommentId=17565226) by David Dali Susanibar Arce (dsusanibara):*\nHi `[~kou]` / `[~lidavidm]` /\u00a0 `[~breun]` base on current functionality current git.properties is created at building time and added to the jar artifacts containing commit metadata information.\r\n\r\nA proposal could be rename file that contains metadata about commit: From: git.properties To: gitarrowinfo.properties\r\n\r\nMain reason: git.properties is a generic name that could be use for third party libraries for a different purpose than inspect arrow metadata information (i.e:\u00a0[SpringBoot](https://docs.spring.io/spring-boot/docs/current/reference/html/application-properties.html#application-properties.core.spring.info.git.location)\u00a0git.properties configuration).\r\n\r\nCurrent Arrow Java artifacts are using\u00a0[git-commit-id-maven-plugin](https://github.com/git-commit-id/git-commit-id-maven-plugin)\u00a0to generate a file\u00a0`./git.properties`\u00a0with commit metadata such as:\r\n```java\n\r\n#Generated by Git-Commit-Id-Plugin\r\n#Wed Jun 08 11:43:58 UTC 2022\r\ngit.build.user.email=\r\ngit.build.host=Mac-1654686060479.local\r\ngit.dirty=true\r\ngit.remote.origin.url=https\\://github.com/apache/arrow\r\ngit.closest.tag.name=apache-arrow-8.0.0\r\ngit.commit.id.describe-short=apache-arrow-3.0.0-3327-dirty\r\ngit.commit.user.email=kou@clear-code.com\r\ngit.commit.time=08.06.2022 @ 07\\:51\\:03 UTC\r\ngit.commit.message.full=ARROW-16785\\: [Packaging][Linux] Add FindThrift.cmake (\\#13337)\\n\\nThis is a follow-up of ARROW-16721/\\#13292.\\n\\nAuthored-by\\: Sutou Kouhei <kou@clear-code.com>\\nSigned-off-by\\: KrisztiSz<szucs.krisztian@gmail.com>\r\ngit.build.version=9.0.0.dev191\r\ngit.commit.message.short=ARROW-16785\\: [Packaging][Linux] Add FindThrift.cmake (\\#13337)\r\ngit.commit.id.abbrev=5fe3a60\r\ngit.branch=5fe3a606f16b183cf706ae8d9a4adaff593c18a1\r\ngit.build.user.name=\r\ngit.closest.tag.commit.count=11694\r\ngit.commit.id.describe=apache-arrow-3.0.0-3327-g5fe3a60-dirty\r\ngit.commit.id=5fe3a606f16b183cf706ae8d9a4adaff593c18a1\r\ngit.tags=\r\ngit.build.time=08.06.2022 @ 11\\:43\\:58 UTC\r\ngit.commit.user.name=Sutou Kouhei\n```\r\n\u00a0\r\n\r\nArtifacts affected:\u00a0\r\n```java\n\r\nfind . -name '*.jar' -exec sh -c 'for f; do jar -tf \"$f\" | grep \"gitarrowinfo.properties\" | sed \"s|^|$f,|\"; done' sh {} +\r\n\r\n./plasma/target/arrow-plasma-9.0.0-SNAPSHOT.jar,gitarrowinfo.properties\r\n./tools/target/arrow-tools-9.0.0-SNAPSHOT-jar-with-dependencies.jar,gitarrowinfo.properties\r\n./tools/target/arrow-tools-9.0.0-SNAPSHOT.jar,gitarrowinfo.properties\r\n./memory/memory-unsafe/target/arrow-memory-unsafe-9.0.0-SNAPSHOT.jar,gitarrowinfo.properties\r\n./memory/memory-netty/target/arrow-memory-netty-9.0.0-SNAPSHOT.jar,gitarrowinfo.properties\r\n./memory/memory-core/target/arrow-memory-core-9.0.0-SNAPSHOT.jar,gitarrowinfo.properties\r\n./dataset/target/arrow-dataset-9.0.0-SNAPSHOT.jar,gitarrowinfo.properties\r\n./flight/flight-sql/target/flight-sql-9.0.0-SNAPSHOT.jar,gitarrowinfo.properties\r\n./flight/flight-integration-tests/target/flight-integration-tests-9.0.0-SNAPSHOT-jar-with-dependencies.jar,gitarrowinfo.properties\r\n./flight/flight-integration-tests/target/flight-integration-tests-9.0.0-SNAPSHOT.jar,gitarrowinfo.properties\r\n./flight/flight-grpc/target/flight-grpc-9.0.0-SNAPSHOT.jar,gitarrowinfo.properties\r\n./flight/flight-core/target/flight-core-9.0.0-SNAPSHOT-jar-with-dependencies.jar,gitarrowinfo.properties\r\n./flight/flight-core/target/flight-core-9.0.0-SNAPSHOT-shaded.jar,gitarrowinfo.properties\r\n./flight/flight-core/target/flight-core-9.0.0-SNAPSHOT-shaded-ext.jar,gitarrowinfo.properties\r\n./flight/flight-core/target/flight-core-9.0.0-SNAPSHOT.jar,gitarrowinfo.properties\r\n./adapter/jdbc/target/arrow-jdbc-9.0.0-SNAPSHOT.jar,gitarrowinfo.properties\r\n./adapter/avro/target/arrow-avro-9.0.0-SNAPSHOT.jar,gitarrowinfo.properties\r\n./adapter/orc/target/arrow-orc-9.0.0-SNAPSHOT.jar,gitarrowinfo.properties\r\n./algorithm/target/arrow-algorithm-9.0.0-SNAPSHOT.jar,gitarrowinfo.properties\r\n./compression/target/arrow-compression-9.0.0-SNAPSHOT.jar,gitarrowinfo.properties\r\n./format/target/arrow-format-9.0.0-SNAPSHOT.jar,gitarrowinfo.properties\r\n./gandiva/target/arrow-gandiva-9.0.0-SNAPSHOT.jar,gitarrowinfo.properties\r\n./performance/target/benchmarks.jar,gitarrowinfo.properties\r\n./performance/target/arrow-performance-9.0.0-SNAPSHOT.jar,gitarrowinfo.properties\r\n./vector/target/arrow-vector-9.0.0-SNAPSHOT-shade-format-flatbuffers.jar,gitarrowinfo.properties\r\n./vector/target/arrow-vector-9.0.0-SNAPSHOT.jar,gitarrowinfo.properties\r\n./c/target/arrow-c-data-9.0.0-SNAPSHOT.jar,gitarrowinfo.properties \n```\r\n\u00a0\r\n\r\nPlease let me know if this approach could be possible or not.\r\n\r\n\u00a0"
        },
        {
            "created_at": "2022-07-12T06:16:28.623Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-16825?focusedCommentId=17565288) by Nils Breunese (breun):*\nEither no longer generating or renaming the Git properties resource would solve the issue that I reported in this ticket.\r\n\r\nIf you decide on keeping it, I would suggest adding hyphens or underscores to the file name to make it easier to read, e.g. `arrow-git.properties`."
        },
        {
            "created_at": "2022-07-12T20:03:35.414Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-16825?focusedCommentId=17565994) by David Li (lidavidm):*\nIssue resolved by pull request 13578\n<https://github.com/apache/arrow/pull/13578>"
        }
    ]
}