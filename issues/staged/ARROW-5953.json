{
    "issue": {
        "title": "Thrift download ERRORS with apache-arrow-0.14.0",
        "body": "***Note**: This issue was originally created as [ARROW-5953](https://issues.apache.org/jira/browse/ARROW-5953). Please see the [migration documentation](https://gist.github.com/toddfarmer/12aa88361532d21902818a6044fda4c3) for further details.*\n\n### Original Issue Description:\n<font color=\"#333333\">cmake returns:</font>\r\n\r\nrequests.excetions.SSLError: hostname 'www.apache.org' doesn't match either of '\\*.openoffice.org', 'openoffice.org'/thrift/0.12.0/thrift-0.12.0.tar.gz\r\n\r\n<font color=\"#333333\">during check for thrift download location. \u00a0</font>\r\n\r\n<font color=\"#333333\">This occurs with a freshly inflated arrow source release tree where cmake is running for the first time.\u00a0</font>\r\n\r\n<font color=\"#333333\">Reproducible with\u00a0the release levels of apache-arrow-0.14.0 and\u00a0\u00a00.13.0. \u00a0I tried this 3-5x on 15Jul2019 and see it consistently each time.</font>\r\n\r\n<font color=\"#333333\">Here's the full context from cmake output:\u00a0</font>\r\n> \u2013 Checking for module 'thrift'\n> \n> \u2013\u00a0\u00a0 No package 'thrift' found\n> \n> \u2013 Could NOT find Thrift (missing: THRIFT_STATIC_LIB THRIFT_INCLUDE_DIR THRIFT_COMPILER)\n> \n> Building Apache Thrift from source\n> \n> Downloading Apache Thrift from Traceback (most recent call last):\n> \n> File \"\u2026/apache-arrow-0.14.0/cpp/build-support/get_apache_mirror.py\", line 38, in <module>\n> \n> suggested_mirror = get_url('<https://www.apache.org/dyn/>'\n> \n> File \"\u2026/apache-arrow-0.14.0/cpp/build-support/get_apache_mirror.py\", line 27, in get_url\n> \n> return requests.get(url).content\n> \n> File \"/usr/lib/python2.6/site-packages/requests/api.py\", line 68, in get\n> \n> return request('get', url, \\*\\*kwargs)\n> \n> File \"/usr/lib/python2.6/site-packages/requests/api.py\", line 50, in request\n> \n> response = session.request(method=method, url=url, \\*\\*kwargs)\n> \n> File \"/usr/lib/python2.6/site-packages/requests/sessions.py\", line 464, in request\n> \n> resp = self.send(prep, \\*\\*send_kwargs)\n> \n> File \"/usr/lib/python2.6/site-packages/requests/sessions.py\", line 576, in send\n> \n> r = adapter.send(request, \\*\\*kwargs)\n> \n> File \"/usr/lib/python2.6/site-packages/requests/adapters.py\", line 431, in send\n> \n> raise SSLError(e, request=request)\n> \n> requests.exceptions.SSLError: hostname 'www.apache.org' doesn't match either of '\\*.openoffice.org', 'openoffice.org'/thrift/0.12.0/thrift-0.12.0.tar.gz\r\n\u00a0\r\n\r\n<font color=\"#FF0000\">{color:#333333}Per Wes' suggestion I ran the following directly:</font>{color}\r\n\r\n<font color=\"#FF0000\">{color:#333333}python cpp/build-support/get_apache_mirror.py <https://www-eu.apache.org/dist/>\u00a0<http://us.mirrors.quenda.co/apache/>\r\n</font>{color}\r\n\r\n<font color=\"#FF0000\">{color:#333333}with this output:</font>{color}\r\n\r\n<https://www-eu.apache.org/dist/>\u00a0\u00a0<http://us.mirrors.quenda.co/apache/>\r\n\r\n\u00a0\r\n\r\n\u00a0\r\n\r\n**NOTE:** here are the cmake thrift log lines from a build of\u00a0apache-arrow git clone\u00a0on 06Jul2019 where cmake/make were run fine.pwd\r\n\r\n\u00a0\r\n> \u2013 Checking for module 'thrift'\n> \u2013 No package 'thrift' found\n> \u2013 Could NOT find Thrift (missing: THRIFT_STATIC_LIB) \n> Building Apache Thrift from source\n> Downloading Apache Thrift from http://mirror.metrocast.net/apache//thrift/0.12.0/thrift-0.12.0.tar.gz\r\nCurrently,\u00a0cmake runs successfully on this\u00a0apache-arrow-0.14.0 directory.\r\n\r\n\u00a0",
        "created_at": "2019-07-15T18:49:51.000Z",
        "updated_at": "2019-09-11T11:47:08.000Z",
        "labels": [
            "Migrated from Jira",
            "Component: C++",
            "Type: bug"
        ],
        "closed": true,
        "closed_at": "2019-07-17T17:57:52.000Z"
    },
    "comments": [
        {
            "created_at": "2019-07-15T19:41:28.632Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-5953?focusedCommentId=16885555) by Brian (bbowman60):*\nThis appears to be problem local to two different Linux systems I'm using here at SAS\u00a0to build the arrow source tree. \u00a0I'll so some more sleuthing and report back in case what I find can help others."
        },
        {
            "created_at": "2019-07-17T17:55:54.775Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-5953?focusedCommentId=16887288) by Brian (bbowman60):*\nThis turns out to be a problem with cert validation when cmake sets up to download thrift, due to back-level RHEL 6 and Python 2.6.6 on the internal SAS build node where this fails.\r\nWe need to update to a newer supported version of Python on these machines."
        },
        {
            "created_at": "2019-07-17T17:57:52.924Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-5953?focusedCommentId=16887289) by Brian (bbowman60):*\nThis is a user-specific build environment issue unrelated to the apache-arrow-0.14.0 codebase.\u00a0"
        },
        {
            "created_at": "2019-08-06T09:50:47.293Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-5953?focusedCommentId=16900831) by Marcin Juszkiewicz (hrw):*\nOn Debian 'buster' I have similar failure with Arrow 0.14.1 when tried to rebuild package for arm64 architecture:\r\n\r\n\u00a0\r\n\r\n`\u2013 Checking for module 'thrift'`\r\n`--\u00a0\u00a0 No package 'thrift' found`\r\n`\u2013 Could NOT find Thrift (missing: THRIFT_STATIC_LIB THRIFT_INCLUDE_DIR THRIFT_COMPILER)`\r\n`Building Apache Thrift from source`\r\n`Downloading Apache Thrift from Traceback (most recent call last):`\r\n`\u00a0 File \"/usr/lib/python3.7/urllib/request.py\", line 1317, in do_open`\r\n`\u00a0\u00a0\u00a0 encode_chunked=req.has_header('Transfer-encoding'))`\r\n`\u00a0 File \"/usr/lib/python3.7/http/client.py\", line 1229, in request`\r\n`\u00a0\u00a0\u00a0 self._send_request(method, url, body, headers, encode_chunked)`\r\n`\u00a0 File \"/usr/lib/python3.7/http/client.py\", line 1275, in _send_request`\r\n`\u00a0\u00a0\u00a0 self.endheaders(body, encode_chunked=encode_chunked)`\r\n`\u00a0 File \"/usr/lib/python3.7/http/client.py\", line 1224, in endheaders`\r\n`\u00a0\u00a0\u00a0 self._send_output(message_body, encode_chunked=encode_chunked)`\r\n`\u00a0 File \"/usr/lib/python3.7/http/client.py\", line 1016, in _send_output`\r\n`\u00a0\u00a0\u00a0 self.send(msg)`\r\n`\u00a0 File \"/usr/lib/python3.7/http/client.py\", line 956, in send`\r\n`\u00a0\u00a0\u00a0 self.connect()`\r\n`\u00a0 File \"/usr/lib/python3.7/http/client.py\", line 1392, in connect`\r\n`\u00a0\u00a0\u00a0 server_hostname=server_hostname)`\r\n`\u00a0 File \"/usr/lib/python3.7/ssl.py\", line 412, in wrap_socket`\r\n`\u00a0\u00a0\u00a0 session=session`\r\n`\u00a0 File \"/usr/lib/python3.7/ssl.py\", line 853, in _create`\r\n`\u00a0\u00a0\u00a0 self.do_handshake()`\r\n`\u00a0 File \"/usr/lib/python3.7/ssl.py\", line 1117, in do_handshake`\r\n`\u00a0\u00a0\u00a0 self._sslobj.do_handshake()`\r\n`ssl.SSLCertVerificationError: [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: unable to get local issuer certificate (_ssl.c:1056)`"
        },
        {
            "created_at": "2019-09-11T11:47:08.175Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-5953?focusedCommentId=16927506) by Marcin Juszkiewicz (hrw):*\nProblem was due to lack of 'ca-certificates' in container.\r\n\r\nDid not got it in my recent builds."
        }
    ]
}