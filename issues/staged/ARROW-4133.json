{
    "issue": {
        "title": "[C++/Python] ORC adapter should fail gracefully if /etc/timezone is missing instead of aborting",
        "body": "***Note**: This issue was originally created as [ARROW-4133](https://issues.apache.org/jira/browse/ARROW-4133). Please see the [migration documentation](https://gist.github.com/toddfarmer/12aa88361532d21902818a6044fda4c3) for further details.*\n\n### Original Issue Description:\nThe following core was genereted by nightly build: https://travis-ci.org/kszucs/crossbow/builds/473397855\r\n\r\n```Java\n\r\nCore was generated by `/opt/conda/bin/python /opt/conda/bin/pytest -v --pyargs pyarrow'.\r\nProgram terminated with signal SIGABRT, Aborted.\r\n#0  __GI_raise (sig=sig@entry=6) at ../sysdeps/unix/sysv/linux/raise.c:51\r\n51      ../sysdeps/unix/sysv/linux/raise.c: No such file or directory.\r\n[Current thread is 1 (Thread 0x7fea61f9e740 (LWP 179))]\r\n(gdb) bt\r\n#0  __GI_raise (sig=sig@entry=6) at ../sysdeps/unix/sysv/linux/raise.c:51\r\n#1  0x00007fea608c8801 in __GI_abort () at abort.c:79\r\n#2  0x00007fea4b3483df in __gnu_cxx::__verbose_terminate_handler ()\r\n    at /opt/conda/conda-bld/compilers_linux-64_1534514838838/work/.build/x86_64-conda_cos6-linux-gnu/src/gcc/libstdc++-v3/libsupc++/vterminate.cc:95\r\n#3  0x00007fea4b346b16 in __cxxabiv1::__terminate (handler=<optimized out>)\r\n    at /opt/conda/conda-bld/compilers_linux-64_1534514838838/work/.build/x86_64-conda_cos6-linux-gnu/src/gcc/libstdc++-v3/libsupc++/eh_terminate.cc:47\r\n#4  0x00007fea4b346b4c in std::terminate ()\r\n    at /opt/conda/conda-bld/compilers_linux-64_1534514838838/work/.build/x86_64-conda_cos6-linux-gnu/src/gcc/libstdc++-v3/libsupc++/eh_terminate.cc:57\r\n#5  0x00007fea4b346d28 in __cxxabiv1::__cxa_throw (obj=0x2039220,\r\n    tinfo=0x7fea494803d0 <typeinfo for orc::TimezoneError>,\r\n    dest=0x7fea49087e52 <orc::TimezoneError::~TimezoneError()>)\r\n    at /opt/conda/conda-bld/compilers_linux-64_1534514838838/work/.build/x86_64-conda_cos6-linux-gnu/src/gcc/libstdc++-v3/libsupc++/eh_throw.cc:95\r\n#6  0x00007fea49086824 in orc::getTimezoneByFilename (filename=...)\r\n    at /build/cpp/orc_ep-prefix/src/orc_ep/c++/src/Timezone.cc:704\r\n#7  0x00007fea490868d2 in orc::getLocalTimezone () at /build/cpp/orc_ep-prefix/src/orc_ep/c++/src/Timezone.cc:713                                                                                                                             #8  0x00007fea49063e59 in orc::RowReaderImpl::RowReaderImpl (this=0x204fe30, _contents=..., opts=...)\r\n    at /build/cpp/orc_ep-prefix/src/orc_ep/c++/src/Reader.cc:185\r\n#9  0x00007fea4906651e in orc::ReaderImpl::createRowReader (this=0x1fb41b0, opts=...)\r\n    at /build/cpp/orc_ep-prefix/src/orc_ep/c++/src/Reader.cc:630\r\n#10 0x00007fea48c2d904 in arrow::adapters::orc::ORCFileReader::Impl::ReadSchema (this=0x1270600, opts=...,                                                                                                                                        out=0x7ffe0ccae7b0) at /arrow/cpp/src/arrow/adapters/orc/adapter.cc:264\r\n#11 0x00007fea48c2e18d in arrow::adapters::orc::ORCFileReader::Impl::Read (this=0x1270600, out=0x7ffe0ccaea00)\r\n    at /arrow/cpp/src/arrow/adapters/orc/adapter.cc:302\r\n#12 0x00007fea48c2a8b9 in arrow::adapters::orc::ORCFileReader::Read (this=0x1e14d10, out=0x7ffe0ccaea00)\r\n    at /arrow/cpp/src/arrow/adapters/orc/adapter.cc:697                                                                                                                                                                                       #13 0x00007fea48218c9d in __pyx_pf_7pyarrow_4_orc_9ORCReader_12read (__pyx_v_self=0x7fea43de8688,\r\n    __pyx_v_include_indices=0x7fea61d07b70 <_Py_NoneStruct>) at _orc.cpp:3865\r\n#14 0x00007fea48218b31 in __pyx_pw_7pyarrow_4_orc_9ORCReader_13read (__pyx_v_self=0x7fea43de8688,\r\n    __pyx_args=0x7fea61f5e048, __pyx_kwds=0x7fea444f78b8) at _orc.cpp:3813\r\n#15 0x00007fea61910cbd in _PyCFunction_FastCallDict (func_obj=func_obj@entry=0x7fea444b9558,\r\n    args=args@entry=0x7fea44a40fa8, nargs=nargs@entry=0, kwargs=kwargs@entry=0x7fea444f78b8)\r\n    at Objects/methodobject.c:231\r\n#16 0x00007fea61910f16 in _PyCFunction_FastCallKeywords (func=func@entry=0x7fea444b9558,\r\n    stack=stack@entry=0x7fea44a40fa8, nargs=0, kwnames=kwnames@entry=0x7fea47d81d30) at Objects/methodobject.c:294\r\n#17 0x00007fea619aa0da in call_function (pp_stack=pp_stack@entry=0x7ffe0ccaecf0, oparg=<optimized out>,\r\n    kwnames=kwnames@entry=0x7fea47d81d30) at Python/ceval.c:4837\r\n#18 0x00007fea619abb46 in _PyEval_EvalFrameDefault (f=<optimized out>, throwflag=<optimized out>)\r\n    at Python/ceval.c:3351\r\n#19 0x00007fea619a9cde in _PyEval_EvalCodeWithName (_co=0x7fea47d9f6f0, globals=globals@entry=0x7fea47d9a750,\r\n    locals=locals@entry=0x0, args=<optimized out>, argcount=1, kwnames=0x0, kwargs=0x206b078, kwcount=0,\r\n    kwstep=kwstep@entry=1, defs=0x7fea47d81e98, defcount=defcount@entry=1, kwdefs=kwdefs@entry=0x0, closure=0x0,\r\n    name=name@entry=0x7fea61ee2ce0, qualname=0x7fea47dc9df0) at Python/ceval.c:4166]\r\n```\r\n\r\nOccured after commit https://github.com/apache/arrow/commit/c7cb1cee388bbfa890ce724f6a7a95991bd8eb1f\r\nBecause ORC test was enabled: https://github.com/apache/arrow/commit/c7cb1cee388bbfa890ce724f6a7a95991bd8eb1f#diff-40c8affe619a826a115f8d07bfdcc095R31\r\n\r\nLocally reproduce with :\r\n\r\n```Java\n\r\n$ git checkout c7cb1cee388bbfa890ce724f6a7a95991bd8eb1f\r\n$ docker-compose build cpp\r\n$ docker-compose build python\r\n$ docker-compose run python bash\r\n# arrow/ci/docker_build_cpp.sh\r\n# arrow/ci/docker_build_python.sh\r\n# ulimit -c unlimited\r\n# pytest -v --pyargs pyarrow\r\n# apt-get install -y gdb\r\n# gdb python -c core\r\n# (gdb) bt\r\n```\r\n\r\nSolution is to properly setup timezone:\r\n```Java\n\r\nexport DEBIAN_FRONTEND=noninteractive\r\napt-get install -y tzdata\r\n```\r\n\r\n",
        "created_at": "2018-12-30T11:49:16.000Z",
        "updated_at": "2022-07-12T14:04:55.000Z",
        "labels": [
            "Migrated from Jira",
            "Component: C++",
            "Component: Python",
            "Type: bug"
        ],
        "closed": false
    },
    "comments": [
        {
            "created_at": "2021-02-17T16:41:43.958Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-4133?focusedCommentId=17285963) by Antoine Pitrou (apitrou):*\ncc `[~yingzhou474]`"
        },
        {
            "created_at": "2021-05-02T03:29:25.712Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-4133?focusedCommentId=17337946) by Ian Alexander Joiner (yingzhou474):*\n`[~apitrou]` I will take it."
        },
        {
            "created_at": "2022-07-12T14:04:55.578Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-4133?focusedCommentId=17565848) by @toddfarmer:*\nThis issue was last updated over 90 days ago, which may be an indication it is no longer being actively worked. To better reflect the current state, the issue is being unassigned. Please feel free to re-take assignment of the issue if it is being actively worked, or if you plan to start that work soon."
        }
    ]
}