{
    "issue": {
        "title": "[CI] Nightly test-r-gcc-12 fails to build",
        "body": "***Note**: This issue was originally created as [ARROW-17578](https://issues.apache.org/jira/browse/ARROW-17578). Please see the [migration documentation](https://gist.github.com/toddfarmer/12aa88361532d21902818a6044fda4c3) for further details.*\n\n### Original Issue Description:\n[test-r-gcc-12](https://github.com/ursacomputing/crossbow/runs/8104457062?check_suite_focus=true) has been failing to build since the 18th of August. The current error log is:\r\n```java\n\r\n\u00a0#4 ERROR: executor failed running [/bin/bash -o pipefail -c apt-get update -y && \u00a0 \u00a0 apt-get install -y \u00a0 \u00a0 \u00a0 \u00a0 dirmngr \u00a0 \u00a0 \u00a0 \u00a0 apt-transport-https \u00a0 \u00a0 \u00a0 \u00a0 software-properties-common && \u00a0 \u00a0 wget -qO- https://cloud.r-project.org/bin/linux/ubuntu/marutter_pubkey.asc | \u00a0 \u00a0 \u00a0 \u00a0 tee -a /etc/apt/trusted.gpg.d/cran_ubuntu_key.asc && \u00a0 \u00a0 add-apt-repository 'deb https://cloud.r-project.org/bin/linux/ubuntu '$(lsb_release -cs)'-cran40/' && \u00a0 \u00a0 apt-get install -y \u00a0 \u00a0 \u00a0 \u00a0 r-base=${r}* \u00a0 \u00a0 \u00a0 \u00a0 r-recommended=${r}* \u00a0 \u00a0 \u00a0 \u00a0 libxml2-dev \u00a0 \u00a0 \u00a0 \u00a0 libgit2-dev \u00a0 \u00a0 \u00a0 \u00a0 libssl-dev \u00a0 \u00a0 \u00a0 \u00a0 clang \u00a0 \u00a0 \u00a0 \u00a0 clang-format \u00a0 \u00a0 \u00a0 \u00a0 clang-tidy \u00a0 \u00a0 \u00a0 \u00a0 texlive-latex-base \u00a0 \u00a0 \u00a0 \u00a0 locales \u00a0 \u00a0 \u00a0 \u00a0 python3 \u00a0 \u00a0 \u00a0 \u00a0 python3-pip \u00a0 \u00a0 \u00a0 \u00a0 python3-dev && \u00a0 \u00a0 locale-gen en_US.UTF-8 && \u00a0 \u00a0 apt-get clean && \u00a0 \u00a0 rm -rf /var/lib/apt/lists/*]: exit code: 100\r\n------\r\n\u00a0> [ 2/17] RUN apt-get update -y && \u00a0 \u00a0 apt-get install -y \u00a0 \u00a0 \u00a0 \u00a0 dirmngr \u00a0 \u00a0 \u00a0 \u00a0 apt-transport-https \u00a0 \u00a0 \u00a0 \u00a0 software-properties-common && \u00a0 \u00a0 wget -qO- https://cloud.r-project.org/bin/linux/ubuntu/marutter_pubkey.asc | \u00a0 \u00a0 \u00a0 \u00a0 tee -a /etc/apt/trusted.gpg.d/cran_ubuntu_key.asc && \u00a0 \u00a0 add-apt-repository 'deb https://cloud.r-project.org/bin/linux/ubuntu '$(lsb_release -cs)'-cran40/' && \u00a0 \u00a0 apt-get install -y \u00a0 \u00a0 \u00a0 \u00a0 r-base=4.2* \u00a0 \u00a0 \u00a0 \u00a0 r-recommended=4.2* \u00a0 \u00a0 \u00a0 \u00a0 libxml2-dev \u00a0 \u00a0 \u00a0 \u00a0 libgit2-dev \u00a0 \u00a0 \u00a0 \u00a0 libssl-dev \u00a0 \u00a0 \u00a0 \u00a0 clang \u00a0 \u00a0 \u00a0 \u00a0 clang-format \u00a0 \u00a0 \u00a0 \u00a0 clang-tidy \u00a0 \u00a0 \u00a0 \u00a0 texlive-latex-base \u00a0 \u00a0 \u00a0 \u00a0 locales \u00a0 \u00a0 \u00a0 \u00a0 python3 \u00a0 \u00a0 \u00a0 \u00a0 python3-pip \u00a0 \u00a0 \u00a0 \u00a0 python3-dev && \u00a0 \u00a0 locale-gen en_US.UTF-8 && \u00a0 \u00a0 apt-get clean && \u00a0 \u00a0 rm -rf /var/lib/apt/lists/*:\r\n------\r\nexecutor failed running [/bin/bash -o pipefail -c apt-get update -y && \u00a0 \u00a0 apt-get install -y \u00a0 \u00a0 \u00a0 \u00a0 dirmngr \u00a0 \u00a0 \u00a0 \u00a0 apt-transport-https \u00a0 \u00a0 \u00a0 \u00a0 software-properties-common && \u00a0 \u00a0 wget -qO- https://cloud.r-project.org/bin/linux/ubuntu/marutter_pubkey.asc | \u00a0 \u00a0 \u00a0 \u00a0 tee -a /etc/apt/trusted.gpg.d/cran_ubuntu_key.asc && \u00a0 \u00a0 add-apt-repository 'deb https://cloud.r-project.org/bin/linux/ubuntu '$(lsb_release -cs)'-cran40/' && \u00a0 \u00a0 apt-get install -y \u00a0 \u00a0 \u00a0 \u00a0 r-base=${r}* \u00a0 \u00a0 \u00a0 \u00a0 r-recommended=${r}* \u00a0 \u00a0 \u00a0 \u00a0 libxml2-dev \u00a0 \u00a0 \u00a0 \u00a0 libgit2-dev \u00a0 \u00a0 \u00a0 \u00a0 libssl-dev \u00a0 \u00a0 \u00a0 \u00a0 clang \u00a0 \u00a0 \u00a0 \u00a0 clang-format \u00a0 \u00a0 \u00a0 \u00a0 clang-tidy \u00a0 \u00a0 \u00a0 \u00a0 texlive-latex-base \u00a0 \u00a0 \u00a0 \u00a0 locales \u00a0 \u00a0 \u00a0 \u00a0 python3 \u00a0 \u00a0 \u00a0 \u00a0 python3-pip \u00a0 \u00a0 \u00a0 \u00a0 python3-dev && \u00a0 \u00a0 locale-gen en_US.UTF-8 && \u00a0 \u00a0 apt-get clean && \u00a0 \u00a0 rm -rf /var/lib/apt/lists/*]: exit code: 100\r\nService 'ubuntu-r-only-r' failed to build : Build failed \n```\r\nI can't reproduce locally (I get a different error) but could it be that we are pulling an outdated upstream docker image?\r\n\r\nI don't think the changes introduced on the first build failure are relevant to this failure but here they are:\r\nhttps://github.com/apache/arrow/compare/6e8f0e4d327180375dda53287a5a600ba139ce3d...a1c3d57af514d4a84e753ff51df8e563135ee55e\r\n\r\ncc~ `[~kou]` \u00a0",
        "created_at": "2022-08-31T11:19:26.000Z",
        "updated_at": "2022-09-02T11:52:39.000Z",
        "labels": [
            "Migrated from Jira",
            "Component: Continuous Integration",
            "Type: bug"
        ],
        "closed": true,
        "closed_at": "2022-09-02T00:41:09.000Z"
    },
    "comments": [
        {
            "created_at": "2022-09-01T00:59:41.592Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-17578?focusedCommentId=17598676) by Kouhei Sutou (kou):*\nWe need to focus on the following message:\r\n\r\nhttps://github.com/ursacomputing/crossbow/runs/8104457062?check_suite_focus=true#step:5:1897\r\n\r\n```\n\r\n#4 9.317 The following packages have unmet dependencies:\r\n#4 9.411  python3-dev : Depends: python3-distutils (>= 3.10.6-1~) but 3.10.4-0ubuntu1 is to be installed\r\n#4 9.415 E: Unable to correct problems, you have held broken packages.\r\n```\r\n\r\nThis is caused by `ppa:ubuntu-toolchain-r/volatile` https://github.com/apache/arrow/blob/master/ci/docker/ubuntu-22.04-cpp.dockerfile#L118 . It provides `python3-dev=3.10.6-1~22.04` but doesn't provide `python3-distutils=3.10.6-1~22.04`.\r\n\r\nIt seems that Ubuntu 22.04 provides `gcc-12`: https://packages.ubuntu.com/search?keywords=gcc-12\r\n\r\nHow about using the system `gcc-12` instead of `gcc-12` provided by `ppa:ubuntu-toolchain-r/volatile`?\r\n\r\n```\n\r\ndiff --git a/ci/docker/ubuntu-22.04-cpp.dockerfile b/ci/docker/ubuntu-22.04-cpp.dockerfile\r\nindex 05aca53151..514e314c40 100644\r\n--- a/ci/docker/ubuntu-22.04-cpp.dockerfile\r\n+++ b/ci/docker/ubuntu-22.04-cpp.dockerfile\r\n@@ -112,7 +112,7 @@ RUN if [ \"${gcc_version}\" = \"\" ]; then \\\r\n           g++ \\\r\n           gcc; \\\r\n     else \\\r\n-      if [ \"${gcc_version}\" -gt \"11\" ]; then \\\r\n+      if [ \"${gcc_version}\" -gt \"12\" ]; then \\\r\n           apt-get update -y -q && \\\r\n           apt-get install -y -q --no-install-recommends software-properties-common && \\\r\n           add-apt-repository ppa:ubuntu-toolchain-r/volatile; \\\r\n```"
        },
        {
            "created_at": "2022-09-02T00:41:09.296Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-17578?focusedCommentId=17599208) by Kouhei Sutou (kou):*\nIssue resolved by pull request 14022\n<https://github.com/apache/arrow/pull/14022>"
        }
    ]
}