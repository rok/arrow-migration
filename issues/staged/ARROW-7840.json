{
    "issue": {
        "title": "[Java] [Integration] Java executables fail",
        "body": "***Note**: This issue was originally created as [ARROW-7840](https://issues.apache.org/jira/browse/ARROW-7840). Please see the [migration documentation](https://gist.github.com/toddfarmer/12aa88361532d21902818a6044fda4c3) for further details.*\n\n### Original Issue Description:\nWhen trying to run integration tests using `docker-compose run conda-integration`, I always get failures during the Java tests:\r\n```Java\n\r\nRuntimeError: Command failed: ['java', '-Dio.netty.tryReflectionSetAccessible=true', '-cp', '/arrow/java/tools/target/arrow-tools-1.0.0-SNAPSHOT-jar-with-dependencies.jar', 'org.apache.arrow.tools.StreamToFile', '/tmp/tmpqbkrmpo1/e75ed336_simple.producer_file_as_stream', '/tmp/tmpqbkrmpo1/e75ed336_simple.consumer_stream_as_file']\r\nWith output:\r\n--------------\r\n15:57:01.194 [main] DEBUG io.netty.util.internal.logging.InternalLoggerFactory - Using SLF4J as the default logging framework\r\n15:57:01.196 [main] DEBUG io.netty.util.ResourceLeakDetector - -Dio.netty.leakDetection.level: simple\r\n15:57:01.196 [main] DEBUG io.netty.util.ResourceLeakDetector - -Dio.netty.leakDetection.targetRecords: 4\r\n15:57:01.208 [main] DEBUG io.netty.util.internal.PlatformDependent0 - -Dio.netty.noUnsafe: false\r\n15:57:01.209 [main] DEBUG io.netty.util.internal.PlatformDependent0 - Java version: 8\r\n15:57:01.210 [main] DEBUG io.netty.util.internal.PlatformDependent0 - sun.misc.Unsafe.theUnsafe: available\r\n15:57:01.210 [main] DEBUG io.netty.util.internal.PlatformDependent0 - sun.misc.Unsafe.copyMemory: available\r\n15:57:01.210 [main] DEBUG io.netty.util.internal.PlatformDependent0 - java.nio.Buffer.address: available\r\n15:57:01.210 [main] DEBUG io.netty.util.internal.PlatformDependent0 - direct buffer constructor: available\r\n15:57:01.211 [main] DEBUG io.netty.util.internal.PlatformDependent0 - java.nio.Bits.unaligned: available, true\r\n15:57:01.211 [main] DEBUG io.netty.util.internal.PlatformDependent0 - jdk.internal.misc.Unsafe.allocateUninitializedArray(int): unavailable prior to Java9\r\n15:57:01.211 [main] DEBUG io.netty.util.internal.PlatformDependent0 - java.nio.DirectByteBuffer.<init>(long, int): available\r\n15:57:01.211 [main] DEBUG io.netty.util.internal.PlatformDependent - sun.misc.Unsafe: available\r\n15:57:01.211 [main] DEBUG io.netty.util.internal.PlatformDependent - -Dio.netty.tmpdir: /tmp (java.io.tmpdir)\r\n15:57:01.211 [main] DEBUG io.netty.util.internal.PlatformDependent - -Dio.netty.bitMode: 64 (sun.arch.data.model)\r\n15:57:01.212 [main] DEBUG io.netty.util.internal.PlatformDependent - -Dio.netty.noPreferDirect: false\r\n15:57:01.212 [main] DEBUG io.netty.util.internal.PlatformDependent - -Dio.netty.maxDirectMemory: 11252269056 bytes\r\n15:57:01.212 [main] DEBUG io.netty.util.internal.PlatformDependent - -Dio.netty.uninitializedArrayAllocationThreshold: -1\r\n15:57:01.213 [main] DEBUG io.netty.util.internal.CleanerJava6 - java.nio.ByteBuffer.cleaner(): available\r\n15:57:01.213 [main] DEBUG io.netty.buffer.PooledByteBufAllocator - -Dio.netty.allocator.numHeapArenas: 48\r\n15:57:01.213 [main] DEBUG io.netty.buffer.PooledByteBufAllocator - -Dio.netty.allocator.numDirectArenas: 48\r\n15:57:01.213 [main] DEBUG io.netty.buffer.PooledByteBufAllocator - -Dio.netty.allocator.pageSize: 8192\r\n15:57:01.213 [main] DEBUG io.netty.buffer.PooledByteBufAllocator - -Dio.netty.allocator.maxOrder: 11\r\n15:57:01.213 [main] DEBUG io.netty.buffer.PooledByteBufAllocator - -Dio.netty.allocator.chunkSize: 16777216\r\n15:57:01.213 [main] DEBUG io.netty.buffer.PooledByteBufAllocator - -Dio.netty.allocator.tinyCacheSize: 512\r\n15:57:01.213 [main] DEBUG io.netty.buffer.PooledByteBufAllocator - -Dio.netty.allocator.smallCacheSize: 256\r\n15:57:01.213 [main] DEBUG io.netty.buffer.PooledByteBufAllocator - -Dio.netty.allocator.normalCacheSize: 64\r\n15:57:01.213 [main] DEBUG io.netty.buffer.PooledByteBufAllocator - -Dio.netty.allocator.maxCachedBufferCapacity: 32768\r\n15:57:01.213 [main] DEBUG io.netty.buffer.PooledByteBufAllocator - -Dio.netty.allocator.cacheTrimInterval: 8192\r\n15:57:01.213 [main] DEBUG io.netty.buffer.PooledByteBufAllocator - -Dio.netty.allocator.useCacheForAllThreads: true\r\n15:57:01.216 [main] DEBUG io.netty.util.internal.InternalThreadLocalMap - -Dio.netty.threadLocalMap.stringBuilder.initialSize: 1024\r\n15:57:01.216 [main] DEBUG io.netty.util.internal.InternalThreadLocalMap - -Dio.netty.threadLocalMap.stringBuilder.maxSize: 4096\r\n15:57:01.228 [main] DEBUG io.netty.buffer.AbstractByteBuf - -Dio.netty.buffer.bytebuf.checkAccessible: true\r\n15:57:01.228 [main] DEBUG io.netty.util.ResourceLeakDetectorFactory - Loaded default ResourceLeakDetector: io.netty.util.ResourceLeakDetector@71bc1ae4\r\n15:57:01.242 [main] DEBUG org.apache.arrow.vector.ipc.ReadChannel - Reading buffer with size: 4\r\n15:57:01.242 [main] DEBUG org.apache.arrow.vector.ipc.ReadChannel - Reading buffer with size: 4\r\n15:57:01.242 [main] DEBUG org.apache.arrow.vector.ipc.ReadChannel - Reading buffer with size: 216\r\n15:57:01.497 [main] DEBUG org.apache.arrow.vector.ipc.ReadChannel - Reading buffer with size: 4\r\n15:57:01.497 [main] DEBUG org.apache.arrow.vector.ipc.ReadChannel - Reading buffer with size: 4\r\n15:57:01.497 [main] DEBUG org.apache.arrow.vector.ipc.ReadChannel - Reading buffer with size: 248\r\nException in thread \"main\" java.lang.NoSuchMethodError: org.apache.arrow.vector.ipc.message.MessageSerializer.readMessageBody(Lorg/apache/arrow/vector/ipc/ReadChannel;ILorg/apache/arrow/memory/BufferAllocator;)Lio/netty/buffer/ArrowBuf;\r\n\tat org.apache.arrow.vector.ipc.message.MessageChannelReader.readNext(MessageChannelReader.java:68)\r\n\tat org.apache.arrow.vector.ipc.ArrowStreamReader.loadNextBatch(ArrowStreamReader.java:106)\r\n\tat org.apache.arrow.tools.StreamToFile.convert(StreamToFile.java:47)\r\n\tat org.apache.arrow.tools.StreamToFile.main(StreamToFile.java:73)\r\n\r\n```\r\n",
        "created_at": "2020-02-12T15:59:25.000Z",
        "updated_at": "2020-04-09T22:45:53.000Z",
        "labels": [
            "Migrated from Jira",
            "Component: Integration",
            "Component: Java",
            "Type: bug"
        ],
        "closed": true,
        "closed_at": "2020-04-09T22:45:52.000Z"
    },
    "comments": [
        {
            "created_at": "2020-02-12T16:00:21.921Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-7840?focusedCommentId=17035477) by Antoine Pitrou (apitrou):*\ncc `[~emkornfield]` [~jacques@dremio.com]"
        },
        {
            "created_at": "2020-02-12T16:13:27.643Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-7840?focusedCommentId=17035488) by Jacques Nadeau (jnadeau):*\n`[~ravindra]`, can you have Prudhvi take a look at this?"
        },
        {
            "created_at": "2020-04-09T22:45:44.025Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-7840?focusedCommentId=17080047) by Antoine Pitrou (apitrou):*\nI haven't seen this in a long time. I probably had a stale build directory at some point (docker-compose is a bit finicky)."
        }
    ]
}