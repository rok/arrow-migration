{
    "issue": {
        "title": "[Python][C++] CI Failing for Python 2.7 and 3.6 with valgrind",
        "body": "***Note**: This issue was originally created as [ARROW-4469](https://issues.apache.org/jira/browse/ARROW-4469). Please see the [migration documentation](https://gist.github.com/toddfarmer/12aa88361532d21902818a6044fda4c3) for further details.*\n\n### Original Issue Description:\nhttps://travis-ci.org/apache/arrow/jobs/488317992  \r\n\r\nThe error appears to be some sort of linker or warning as error issue?:\r\n\r\n{{cc1plus: warning: command line option \u2018-Wstrict-prototypes\u2019 is valid for C/ObjC but not for C++\r\ncc1plus: warning: command line option \u2018-Wstrict-prototypes\u2019 is valid for C/ObjC but not for C++\r\nIn file included from /home/travis/build/apache/arrow/python/pyarrow/include/arrow/python/platform.h:26:0,\r\n                 from pyarrow_cython_example.cpp:653:\r\n/home/travis/build/apache/arrow/pyarrow-test-2.7/include/python2.7/datetime.h:188:25: warning: \u2018PyDateTimeAPI\u2019 defined but not used [-Wunused-variable]\r\n static PyDateTime_CAPI \\*PyDateTimeAPI = NULL;\r\n                         ^\r\npyarrow_cython_example.cpp:2828:20: warning: \u2018__pyx_f_7pyarrow_3lib_pyarrow_wrap_array\u2019 defined but not used [-Wunused-variable]\r\n static PyObject \\*(\\*__pyx_f_7pyarrow_3lib_pyarrow_wrap_array)(std::shared_ptr< arrow::Array>  const &); /**proto**/\r\n                    ^\r\npyarrow_cython_example.cpp:2829:20: warning: \u2018__pyx_f_7pyarrow_3lib_pyarrow_wrap_chunked_array\u2019 defined but not used [-Wunused-variable]\r\n static PyObject \\*(\\*__pyx_f_7pyarrow_3lib_pyarrow_wrap_chunked_array)(std::shared_ptr< arrow::ChunkedArray>  const &); /**proto**/\r\n                    ^\r\npyarrow_cython_example.cpp:2830:20: warning: \u2018__pyx_f_7pyarrow_3lib_pyarrow_wrap_batch\u2019 defined but not used [-Wunused-variable]\r\n static PyObject \\*(\\*__pyx_f_7pyarrow_3lib_pyarrow_wrap_batch)(std::shared_ptr< arrow::RecordBatch>  const &); /**proto**/\r\n                    ^\r\npyarrow_cython_example.cpp:2831:20: warning: \u2018__pyx_f_7pyarrow_3lib_pyarrow_wrap_buffer\u2019 defined but not used [-Wunused-variable]\r\n static PyObject \\*(\\*__pyx_f_7pyarrow_3lib_pyarrow_wrap_buffer)(std::shared_ptr< arrow::Buffer>  const &); /**proto**/\r\n                    ^\r\npyarrow_cython_example.cpp:2832:20: warning: \u2018__pyx_f_7pyarrow_3lib_pyarrow_wrap_column\u2019 defined but not used [-Wunused-variable]\r\n static PyObject \\*(\\*__pyx_f_7pyarrow_3lib_pyarrow_wrap_column)(std::shared_ptr< arrow::Column>  const &); /**proto**/\r\n                    ^\r\npyarrow_cython_example.cpp:2833:20: warning: \u2018__pyx_f_7pyarrow_3lib_pyarrow_wrap_data_type\u2019 defined but not used [-Wunused-variable]\r\n static PyObject \\*(\\*__pyx_f_7pyarrow_3lib_pyarrow_wrap_data_type)(std::shared_ptr< arrow::DataType>  const &); /**proto**/\r\n                    ^\r\npyarrow_cython_example.cpp:2834:20: warning: \u2018__pyx_f_7pyarrow_3lib_pyarrow_wrap_field\u2019 defined but not used [-Wunused-variable]\r\n static PyObject \\*(\\*__pyx_f_7pyarrow_3lib_pyarrow_wrap_field)(std::shared_ptr< arrow::Field>  const &); /**proto**/\r\n                    ^\r\npyarrow_cython_example.cpp:2835:20: warning: \u2018__pyx_f_7pyarrow_3lib_pyarrow_wrap_resizable_buffer\u2019 defined but not used [-Wunused-variable]\r\n static PyObject \\*(\\*__pyx_f_7pyarrow_3lib_pyarrow_wrap_resizable_buffer)(std::shared_ptr< arrow::ResizableBuffer>  const &); /**proto**/\r\n                    ^\r\npyarrow_cython_example.cpp:2836:20: warning: \u2018__pyx_f_7pyarrow_3lib_pyarrow_wrap_schema\u2019 defined but not used [-Wunused-variable]\r\n static PyObject \\*(\\*__pyx_f_7pyarrow_3lib_pyarrow_wrap_schema)(std::shared_ptr< arrow::Schema>  const &); /**proto**/\r\n                    ^\r\npyarrow_cython_example.cpp:2837:20: warning: \u2018__pyx_f_7pyarrow_3lib_pyarrow_wrap_table\u2019 defined but not used [-Wunused-variable]\r\n static PyObject \\*(\\*__pyx_f_7pyarrow_3lib_pyarrow_wrap_table)(std::shared_ptr< arrow::Table>  const &); /**proto**/\r\n                    ^\r\npyarrow_cython_example.cpp:2838:20: warning: \u2018__pyx_f_7pyarrow_3lib_pyarrow_wrap_tensor\u2019 defined but not used [-Wunused-variable]\r\n static PyObject \\*(\\*__pyx_f_7pyarrow_3lib_pyarrow_wrap_tensor)(std::shared_ptr< arrow::Tensor>  const &); /**proto**/\r\n                    ^\r\npyarrow_cython_example.cpp:2840:47: warning: \u2018__pyx_f_7pyarrow_3lib_pyarrow_unwrap_batch\u2019 defined but not used [-Wunused-variable]\r\n static std::shared_ptr< arrow::RecordBatch>  (\\*__pyx_f_7pyarrow_3lib_pyarrow_unwrap_batch)(PyObject \\*); /**proto**/\r\n                                               ^\r\npyarrow_cython_example.cpp:2841:42: warning: \u2018__pyx_f_7pyarrow_3lib_pyarrow_unwrap_buffer\u2019 defined but not used [-Wunused-variable]\r\n static std::shared_ptr< arrow::Buffer>  (\\*__pyx_f_7pyarrow_3lib_pyarrow_unwrap_buffer)(PyObject \\*); /**proto**/\r\n                                          ^\r\npyarrow_cython_example.cpp:2842:42: warning: \u2018__pyx_f_7pyarrow_3lib_pyarrow_unwrap_column\u2019 defined but not used [-Wunused-variable]\r\n static std::shared_ptr< arrow::Column>  (\\*__pyx_f_7pyarrow_3lib_pyarrow_unwrap_column)(PyObject \\*); /**proto**/\r\n                                          ^\r\npyarrow_cython_example.cpp:2843:44: warning: \u2018__pyx_f_7pyarrow_3lib_pyarrow_unwrap_data_type\u2019 defined but not used [-Wunused-variable]\r\n static std::shared_ptr< arrow::DataType>  (\\*__pyx_f_7pyarrow_3lib_pyarrow_unwrap_data_type)(PyObject \\*); /**proto**/\r\n                                            ^\r\npyarrow_cython_example.cpp:2844:41: warning: \u2018__pyx_f_7pyarrow_3lib_pyarrow_unwrap_field\u2019 defined but not used [-Wunused-variable]\r\n static std::shared_ptr< arrow::Field>  (\\*__pyx_f_7pyarrow_3lib_pyarrow_unwrap_field)(PyObject \\*); /**proto**/\r\n                                         ^\r\npyarrow_cython_example.cpp:2845:42: warning: \u2018__pyx_f_7pyarrow_3lib_pyarrow_unwrap_schema\u2019 defined but not used [-Wunused-variable]\r\n static std::shared_ptr< arrow::Schema>  (\\*__pyx_f_7pyarrow_3lib_pyarrow_unwrap_schema)(PyObject \\*); /**proto**/\r\n                                          ^\r\npyarrow_cython_example.cpp:2846:41: warning: \u2018__pyx_f_7pyarrow_3lib_pyarrow_unwrap_table\u2019 defined but not used [-Wunused-variable]\r\n static std::shared_ptr< arrow::Table>  (\\*__pyx_f_7pyarrow_3lib_pyarrow_unwrap_table)(PyObject \\*); /**proto**/\r\n                                         ^\r\npyarrow_cython_example.cpp:2847:42: warning: \u2018__pyx_f_7pyarrow_3lib_pyarrow_unwrap_tensor\u2019 defined but not used [-Wunused-variable]\r\n static std::shared_ptr< arrow::Tensor>  (\\*__pyx_f_7pyarrow_3lib_pyarrow_unwrap_tensor)(PyObject \\*); /**proto**/\r\n                                          ^\r\n/home/travis/build/apache/arrow/pyarrow-test-2.7/compiler_compat/ld: build/temp.linux-x86_64-2.7/pyarrow_cython_example.o: unable to initialize decompress status for section .debug_info\r\n/home/travis/build/apache/arrow/pyarrow-test-2.7/compiler_compat/ld: build/temp.linux-x86_64-2.7/pyarrow_cython_example.o: unable to initialize decompress status for section .debug_info\r\n/home/travis/build/apache/arrow/pyarrow-test-2.7/compiler_compat/ld: build/temp.linux-x86_64-2.7/pyarrow_cython_example.o: unable to initialize decompress status for section .debug_info\r\n/home/travis/build/apache/arrow/pyarrow-test-2.7/compiler_compat/ld: build/temp.linux-x86_64-2.7/pyarrow_cython_example.o: unable to initialize decompress status for section .debug_info\r\nbuild/temp.linux-x86_64-2.7/pyarrow_cython_example.o: file not recognized: file format not recognized\r\ncollect2: error: ld returned 1 exit status\r\nerror: command 'g++' failed with exit status 1\r\n\r\n}}",
        "created_at": "2019-02-04T05:10:02.000Z",
        "updated_at": "2019-03-01T23:26:33.000Z",
        "labels": [
            "Migrated from Jira",
            "Component: C++",
            "Component: Continuous Integration",
            "Component: Python",
            "Type: bug"
        ],
        "closed": true,
        "closed_at": "2019-02-04T19:53:57.000Z"
    },
    "comments": [
        {
            "created_at": "2019-02-04T11:22:22.380Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-4469?focusedCommentId=16759777) by Antoine Pitrou (apitrou):*\nI don't think the warnings are related. Looking at the last line (\"\"\"build/temp.linux-x86_64-2.7/pyarrow_cython_example.o: file not recognized: file format not recognized\"\"\"), I'm afraid this might be a compiler toolchain issue. `[~kszucs]` `[~xhochy]`"
        },
        {
            "created_at": "2019-02-04T13:51:28.970Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-4469?focusedCommentId=16759859) by Wes McKinney (wesm):*\nCython also just released on conda-forge 3 days ago, in case it's version-related"
        },
        {
            "created_at": "2019-02-04T19:11:07.983Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-4469?focusedCommentId=16760121) by Wes McKinney (wesm):*\nOof so binutils 2.32 was just released\r\n\r\nhttps://github.com/conda-forge/binutils-feedstock/blob/master/recipe/meta.yaml\r\n\r\nI'd guess that's the problem. I'll see if pinning binutils to 2.31 fixes it in the meantime"
        },
        {
            "created_at": "2019-02-04T19:53:57.479Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-4469?focusedCommentId=16760165) by Wes McKinney (wesm):*\nIssue resolved by pull request 3554\n<https://github.com/apache/arrow/pull/3554>"
        },
        {
            "created_at": "2019-02-04T20:06:04.869Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-4469?focusedCommentId=16760171) by Wes McKinney (wesm):*\nSo it appears that binutils >= 2.32 is no longer fully compatible with the gcc 5.4 in Ubuntu Xenial, see discussion in \r\n\r\nhttps://gitter.im/conda-forge/conda-forge.github.io?at=5c58980a9221b9382d15022a\r\n\r\nI would say this bodes poorly for our continued \"mixed\" use of system compilers and conda-forge packages. If we want to continue using conda-forge packages we probably need to use the same compiler toolchain\r\n\r\nIn principle this is OK with me as long as we run nightlies with \r\n\r\n- gcc 4.8.x\n- gcc 5.4.x\n  \n  etc. It would be a mistake to let these compiler targets bitrot "
        }
    ]
}