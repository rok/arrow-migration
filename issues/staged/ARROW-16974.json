{
    "issue": {
        "title": "[GLib] C99 incompatible",
        "body": "***Note**: This issue was originally created as [ARROW-16974](https://issues.apache.org/jira/browse/ARROW-16974). Please see the [migration documentation](https://gist.github.com/toddfarmer/12aa88361532d21902818a6044fda4c3) for further details.*\n\n### Original Issue Description:\nWe can't use multiple `typedef struct _XXX XXX` in C99.\r\n\r\nhttps://github.com/kou/datafusion-c/runs/7177906562?check_suite_focus=true\r\n\r\n```\n\r\nFAILED: datafusion-glib/libdatafusion-glib.8.dylib.p/meson-generated_.._enums.c.o \r\ncc -Idatafusion-glib/libdatafusion-glib.8.dylib.p -Idatafusion-glib -I../datafusion-glib -I. -I.. -I/usr/local/Cellar/libffi/3.4.2/include -I/usr/local/Cellar/apache-arrow-glib/8.0.0/include -I/usr/local/Cellar/glib/2.72.2/include -I/usr/local/Cellar/glib/2.72.2/include/glib-2.0 -I/usr/local/Cellar/glib/2.72.2/lib/glib-2.0/include -I/usr/local/opt/gettext/include -I/usr/local/Cellar/pcre/8.45/include -I/usr/local/Cellar/apache-arrow/8.0.0_3/include -fcolor-diagnostics -Wall -Winvalid-pch -Werror -std=c99 -O0 -g -MD -MQ datafusion-glib/libdatafusion-glib.8.dylib.p/meson-generated_.._enums.c.o -MF datafusion-glib/libdatafusion-glib.8.dylib.p/meson-generated_.._enums.c.o.d -o datafusion-glib/libdatafusion-glib.8.dylib.p/meson-generated_.._enums.c.o -c datafusion-glib/enums.c\r\nIn file included from datafusion-glib/enums.c:23:\r\nIn file included from ../datafusion-glib/datafusion-glib.h:22:\r\nIn file included from ../datafusion-glib/data-frame.h:22:\r\nIn file included from /usr/local/Cellar/apache-arrow-glib/8.0.0/include/arrow-glib/arrow-glib.h:25:\r\nIn file included from /usr/local/Cellar/apache-arrow-glib/8.0.0/include/arrow-glib/array.h:22:\r\n/usr/local/Cellar/apache-arrow-glib/8.0.0/include/arrow-glib/basic-array.h:48:26: error: redefinition of typedef 'GArrowArray' is a C11 feature [-Werror,-Wtypedef-redefinition]\r\nG_DECLARE_DERIVABLE_TYPE(GArrowArray,\r\n                         ^\r\n/usr/local/Cellar/apache-arrow-glib/8.0.0/include/arrow-glib/basic-data-type.h:622:29: note: previous definition is here\r\ntypedef struct _GArrowArray GArrowArray;\r\n                            ^\r\nIn file included from datafusion-glib/enums.c:23:\r\nIn file included from ../datafusion-glib/datafusion-glib.h:22:\r\nIn file included from ../datafusion-glib/data-frame.h:22:\r\nIn file included from /usr/local/Cellar/apache-arrow-glib/8.0.0/include/arrow-glib/arrow-glib.h:25:\r\nIn file included from /usr/local/Cellar/apache-arrow-glib/8.0.0/include/arrow-glib/array.h:22:\r\n/usr/local/Cellar/apache-arrow-glib/8.0.0/include/arrow-glib/basic-array.h:768:26: error: redefinition of typedef 'GArrowExtensionArray' is a C11 feature [-Werror,-Wtypedef-redefinition]\r\nG_DECLARE_DERIVABLE_TYPE(GArrowExtensionArray,\r\n                         ^\r\n/usr/local/Cellar/apache-arrow-glib/8.0.0/include/arrow-glib/basic-data-type.h:623:38: note: previous definition is here\r\ntypedef struct _GArrowExtensionArray GArrowExtensionArray;\r\n                                     ^\r\nIn file included from datafusion-glib/enums.c:23:\r\nIn file included from ../datafusion-glib/datafusion-glib.h:22:\r\nIn file included from ../datafusion-glib/data-frame.h:22:\r\nIn file included from /usr/local/Cellar/apache-arrow-glib/8.0.0/include/arrow-glib/arrow-glib.h:27:\r\n/usr/local/Cellar/apache-arrow-glib/8.0.0/include/arrow-glib/chunked-array.h:27:26: error: redefinition of typedef 'GArrowChunkedArray' is a C11 feature [-Werror,-Wtypedef-redefinition]\r\nG_DECLARE_DERIVABLE_TYPE(GArrowChunkedArray,\r\n                         ^\r\n/usr/local/Cellar/apache-arrow-glib/8.0.0/include/arrow-glib/basic-data-type.h:630:36: note: previous definition is here\r\ntypedef struct _GArrowChunkedArray GArrowChunkedArray;\r\n                                   ^\r\nIn file included from datafusion-glib/enums.c:23:\r\nIn file included from ../datafusion-glib/datafusion-glib.h:22:\r\nIn file included from ../datafusion-glib/data-frame.h:22:\r\nIn file included from /usr/local/Cellar/apache-arrow-glib/8.0.0/include/arrow-glib/arrow-glib.h:29:\r\n/usr/local/Cellar/apache-arrow-glib/8.0.0/include/arrow-glib/compute.h:370:26: error: redefinition of typedef 'GArrowCastOptions' is a C11 feature [-Werror,-Wtypedef-redefinition]\r\nG_DECLARE_DERIVABLE_TYPE(GArrowCastOptions,\r\n                         ^\r\n/usr/local/Cellar/apache-arrow-glib/8.0.0/include/arrow-glib/scalar.h:26:35: note: previous definition is here\r\ntypedef struct _GArrowCastOptions GArrowCastOptions;\r\n                                  ^\r\n4 errors generated.\r\n```",
        "created_at": "2022-07-04T20:32:38.000Z",
        "updated_at": "2022-07-05T06:22:18.000Z",
        "labels": [
            "Migrated from Jira",
            "Component: GLib",
            "Type: enhancement"
        ],
        "closed": true,
        "closed_at": "2022-07-05T06:22:18.000Z"
    },
    "comments": [
        {
            "created_at": "2022-07-05T06:22:18.476Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-16974?focusedCommentId=17562385) by Kouhei Sutou (kou):*\nIssue resolved by pull request 13512\n<https://github.com/apache/arrow/pull/13512>"
        }
    ]
}