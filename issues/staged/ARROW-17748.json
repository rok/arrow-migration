{
    "issue": {
        "title": "not able to install arrow on alpine 3.16",
        "body": "***Note**: This issue was originally created as [ARROW-17748](https://issues.apache.org/jira/browse/ARROW-17748). Please see the [migration documentation](https://gist.github.com/toddfarmer/12aa88361532d21902818a6044fda4c3) for further details.*\n\n### Original Issue Description:\nHi we're facing an issue with integration on the latest version on alpine, it seems that the root cause is placed on arrow package.\r\n\r\nWe've tested a few of version and we're able to install only arrow in version 3.0.0\u00a0\r\n\r\nIt's seems that this package is not compatible\u00a0\r\n\r\n\u00a0\r\n\r\nthis is a dockerfile which we're using for\r\n\r\n//this image python:3.16-alpine has been created from the scratch\u00a0\r\n\r\n\u00a0\r\n```java\n\r\nFROM python:3.16-alpine\r\n\r\nRUN apk update \\\r\n    && apk upgrade \\\r\n    && apk add --no-cache build-base \\\r\n        autoconf \\\r\n        bash \\\r\n        bison \\\r\n        boost-dev \\\r\n        cmake \\\r\n        flex \\\r\n        libressl-dev \\\r\n        zlib-dev\r\n\r\nRUN pip install --no-cache-dir six pytest numpy cython\r\nRUN pip install --no-cache-dir pandas\r\n\r\nARG ARROW_VERSION=9.0.0\r\nARG ARROW_BUILD_TYPE=release\r\n\r\nENV ARROW_HOME=/usr/local \\\r\n    PARQUET_HOME=/usr/local\r\n\r\n#Download and build apache-arrow\r\nRUN mkdir /arrow \\\r\n    && wget -q https://github.com/apache/arrow/archive/apache-arrow-${ARROW_VERSION}.tar.gz -O /tmp/apache-arrow.tar.gz \\\r\n    && tar -xvf /tmp/apache-arrow.tar.gz -C /arrow --strip-components 1 \\\r\n    && mkdir -p /arrow/cpp/build \\\r\n    && cd /arrow/cpp/build \\\r\n    && cmake -DCMAKE_BUILD_TYPE=$ARROW_BUILD_TYPE \\\r\n        -DOPENSSL_ROOT_DIR=/usr/local/ssl \\\r\n        -DCMAKE_INSTALL_LIBDIR=lib \\\r\n        -DCMAKE_INSTALL_PREFIX=$ARROW_HOME \\\r\n        -DARROW_WITH_BZ2=ON \\\r\n        -DARROW_WITH_ZLIB=ON \\\r\n        -DARROW_WITH_ZSTD=ON \\\r\n        -DARROW_WITH_LZ4=ON \\\r\n        -DARROW_WITH_SNAPPY=ON \\\r\n        -DARROW_PARQUET=ON \\\r\n        -DARROW_PYTHON=ON \\\r\n        -DARROW_PLASMA=ON \\\r\n        -DARROW_BUILD_TESTS=OFF \\\r\n        .. \\\r\n    && make -j$(nproc) \\\r\n    && make install \\\r\n    && cd /arrow/python \\\r\n    && python setup.py build_ext --build-type=$ARROW_BUILD_TYPE --with-parquet \\\r\n    && python setup.py install \\\r\n    && rm -rf /arrow /tmp/apache-arrow.tar.gz \n```\r\nlink to describe a bug\r\n\r\n<https://gist.github.com/bskaggs/fc3c8d0d553be54e2645616236fdc8c6>\r\n\r\n\u00a0\r\n\r\nand the final output of error. Please double check and release the fix.\r\n\r\n\u00a0\r\n```java\n\r\n#12 164.8 -- stderr output is:\r\n#12 164.8 In file included from /arrow/cpp/build/thrift_ep-prefix/src/thrift_ep/lib/cpp/src/thrift/transport/TSocket.cpp:37:\r\n#12 164.8 /usr/include/sys/poll.h:1:2: warning: #warning redirecting incorrect #include <sys/poll.h> to <poll.h> [-Wcpp]\r\n#12 164.8     1 | #warning redirecting incorrect #include <sys/poll.h> to <poll.h>\r\n#12 164.8       |  ^~~~~~~\r\n#12 164.8 In file included from /arrow/cpp/build/thrift_ep-prefix/src/thrift_ep/lib/cpp/src/thrift/transport/TServerSocket.cpp:33:\r\n#12 164.8 /usr/include/sys/poll.h:1:2: warning: #warning redirecting incorrect #include <sys/poll.h> to <poll.h> [-Wcpp]\r\n#12 164.8     1 | #warning redirecting incorrect #include <sys/poll.h> to <poll.h>\r\n#12 164.8       |  ^~~~~~~\r\n#12 164.8 In file included from /arrow/cpp/build/thrift_ep-prefix/src/thrift_ep/lib/cpp/src/thrift/transport/TSSLSocket.cpp:34:\r\n#12 164.8 /usr/include/sys/poll.h:1:2: warning: #warning redirecting incorrect #include <sys/poll.h> to <poll.h> [-Wcpp]\r\n#12 164.8     1 | #warning redirecting incorrect #include <sys/poll.h> to <poll.h>\r\n#12 164.8       |  ^~~~~~~\r\n#12 164.8 /arrow/cpp/build/thrift_ep-prefix/src/thrift_ep/lib/cpp/src/thrift/transport/TSSLSocket.cpp: In function 'void apache::thrift::transport::cleanupOpenSSL()':\r\n#12 164.8 /arrow/cpp/build/thrift_ep-prefix/src/thrift_ep/lib/cpp/src/thrift/transport/TSSLSocket.cpp:157:3: error: 'OPENSSL_thread_stop' was not declared in this scope; did you mean 'OPENSSL_realloc'?\r\n#12 164.8   157 |   OPENSSL_thread_stop();\r\n#12 164.8       |   ^~~~~~~~~~~~~~~~~~~\r\n#12 164.8       |   OPENSSL_realloc\r\n#12 164.8 /arrow/cpp/build/thrift_ep-prefix/src/thrift_ep/lib/cpp/src/thrift/transport/TSSLSocket.cpp: In member function 'virtual void apache::thrift::transport::TSSLSocket::close()':\r\n#12 164.8 /arrow/cpp/build/thrift_ep-prefix/src/thrift_ep/lib/cpp/src/thrift/transport/TSSLSocket.cpp:395:5: error: 'OPENSSL_thread_stop' was not declared in this scope; did you mean 'OPENSSL_realloc'?\r\n#12 164.8   395 |     OPENSSL_thread_stop();\r\n#12 164.8       |     ^~~~~~~~~~~~~~~~~~~\r\n#12 164.8       |     OPENSSL_realloc\r\n#12 164.8 make[5]: *** [lib/cpp/CMakeFiles/thrift.dir/build.make:566: lib/cpp/CMakeFiles/thrift.dir/src/thrift/transport/TSSLSocket.cpp.o] Error 1\r\n#12 164.8 make[5]: *** Waiting for unfinished jobs....\r\n#12 164.8 make[4]: *** [CMakeFiles/Makefile2:125: lib/cpp/CMakeFiles/thrift.dir/all] Error 2\r\n#12 164.8 make[3]: *** [Makefile:156: all] Error 2\r\n#12 164.8\r\n#12 164.8 CMake Error at /arrow/cpp/build/thrift_ep-prefix/src/thrift_ep-stamp/thrift_ep-build-RELEASE.cmake:47 (message):\r\n#12 164.8   Stopping after outputting logs.\r\n#12 164.8\r\n#12 164.8\r\n#12 164.8 make[2]: *** [CMakeFiles/thrift_ep.dir/build.make:86: thrift_ep-prefix/src/thrift_ep-stamp/thrift_ep-build] Error 1\r\n#12 164.8 make[1]: *** [CMakeFiles/Makefile2:940: CMakeFiles/thrift_ep.dir/all] Error 2\r\n#12 164.8 make[1]: *** Waiting for unfinished jobs....\r\n#12 187.8 -- re2_ep build command succeeded.  See also /arrow/cpp/build/re2_ep-prefix/src/re2_ep-stamp/re2_ep-build-*.log\r\n#12 187.8 [ 20%] Performing install step for 're2_ep'\r\n#12 188.7 -- re2_ep install command succeeded.  See also /arrow/cpp/build/re2_ep-prefix/src/re2_ep-stamp/re2_ep-install-*.log\r\n#12 188.7 [ 20%] Completed 're2_ep'\r\n#12 188.7 [ 20%] Built target re2_ep\r\n#12 212.4 -- jemalloc_ep build command succeeded.  See also /arrow/cpp/build/jemalloc_ep-prefix/src/jemalloc_ep-stamp/jemalloc_ep-build-*.log\r\n#12 212.4 [ 20%] Performing install step for 'jemalloc_ep'\r\n#12 212.5 -- jemalloc_ep install command succeeded.  See also /arrow/cpp/build/jemalloc_ep-prefix/src/jemalloc_ep-stamp/jemalloc_ep-install-*.log\r\n#12 212.5 [ 20%] Completed 'jemalloc_ep'\r\n#12 212.5 [ 20%] Built target jemalloc_ep\r\n#12 212.5 make: *** [Makefile:146: all] Error 2\r\n------\r\nexecutor failed running [/bin/sh -c mkdir /arrow     && wget -q https://github.com/apache/arrow/archive/apache-arrow-${ARROW_VERSION}.tar.gz -O /tmp/apache-arrow.tar.gz     && tar -xvf /tmp/apache-arrow.tar.gz -C /arrow --strip-components 1     && mkdir -p /arrow/cpp/build     && cd /arrow/cpp/build     && cmake -DCMAKE_BUILD_TYPE=$ARROW_BUILD_TYPE         -DOPENSSL_ROOT_DIR=/usr/local/ssl         -DCMAKE_INSTALL_LIBDIR=lib         -DCMAKE_INSTALL_PREFIX=$ARROW_HOME         -DARROW_WITH_BZ2=ON         -DARROW_WITH_ZLIB=ON         -DARROW_WITH_ZSTD=ON         -DARROW_WITH_LZ4=ON         -DARROW_WITH_SNAPPY=ON         -DARROW_PARQUET=ON         -DARROW_PYTHON=ON         -DARROW_PLASMA=ON         -DARROW_BUILD_TESTS=OFF         ..     && make -j$(nproc)     && make install     && cd /arrow/python     && python setup.py build_ext --build-type=$ARROW_BUILD_TYPE --with-parquet     && python setup.py install     && rm -rf /arrow /tmp/apache-arrow.tar.gz]: exit code: 2 \n```\r\n\u00a0\r\n\r\n\u00a0",
        "created_at": "2022-09-15T18:35:16.000Z",
        "updated_at": "2022-09-16T18:28:42.000Z",
        "labels": [
            "Migrated from Jira",
            "Component: Integration",
            "Type: bug"
        ],
        "closed": false
    },
    "comments": [
        {
            "created_at": "2022-09-15T20:08:15.196Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-17748?focusedCommentId=17605511) by Kouhei Sutou (kou):*\nCan you try the following patch?\r\n\r\n```\n\r\ndiff --git a/cpp/cmake_modules/ThirdpartyToolchain.cmake b/cpp/cmake_modules/ThirdpartyToolchain.cmake\r\nindex 52847a99f9..1f7a409779 100644\r\n--- a/cpp/cmake_modules/ThirdpartyToolchain.cmake\r\n+++ b/cpp/cmake_modules/ThirdpartyToolchain.cmake\r\n@@ -1452,6 +1452,10 @@ macro(build_thrift)\r\n     list(APPEND THRIFT_CMAKE_ARGS \"-DBoost_NAMESPACE=${Boost_NAMESPACE}\")\r\n   endif()\r\n \r\n+  if(OPENSSL_ROOT_DIR)\r\n+    list(APPEND THRIFT_CMAKE_ARGS \"-DOPENSSL_ROOT_DIR=${OPENSSL_ROOT_DIR}\")\r\n+  endif()\r\n+\r\n   if(MSVC)\r\n     if(ARROW_USE_STATIC_CRT)\r\n       set(THRIFT_LIB_SUFFIX \"mt\")\r\n```"
        },
        {
            "created_at": "2022-09-15T20:31:31.105Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-17748?focusedCommentId=17605521) by Stanislaw (Korzan):*\nHi\r\n\r\nHow should I use it? How Can I install this particular patch?\r\n\r\nCan You explain in the few words?"
        },
        {
            "created_at": "2022-09-15T21:12:48.292Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-17748?focusedCommentId=17605531) by Kouhei Sutou (kou):*\nSaving the patch as `ARROW-17748.patch` and using the following `Dockerfile` may work (I didn't try this. Sorry.):\r\n\r\n```\n\r\nFROM python:3.16-alpine\r\n\r\nRUN apk update \\\r\n    && apk upgrade \\\r\n    && apk add --no-cache build-base \\\r\n        autoconf \\\r\n        bash \\\r\n        bison \\\r\n        boost-dev \\\r\n        cmake \\\r\n        flex \\\r\n        libressl-dev \\\r\n        zlib-dev\r\n\r\nRUN pip install --no-cache-dir six pytest numpy cython\r\nRUN pip install --no-cache-dir pandas\r\n\r\nARG ARROW_VERSION=9.0.0\r\nARG ARROW_BUILD_TYPE=release\r\n\r\nENV ARROW_HOME=/usr/local \\\r\n    PARQUET_HOME=/usr/local\r\n\r\nCOPY ARROW-17748.patch /tmp/\r\n#Download and build apache-arrow\r\nRUN mkdir /arrow \\\r\n    && wget -q https://github.com/apache/arrow/archive/apache-arrow-${ARROW_VERSION}.tar.gz -O /tmp/apache-arrow.tar.gz \\\r\n    && tar -xvf /tmp/apache-arrow.tar.gz -C /arrow --strip-components 1 \\\r\n    && mkdir -p /arrow/cpp/build \\\r\n    && cd /arrow/cpp \\\r\n    && patch -p1 < /tmp/ARROW-17748.patch \\\r\n    && cd /arrow/cpp/build \\\r\n    && cmake -DCMAKE_BUILD_TYPE=$ARROW_BUILD_TYPE \\\r\n        -DOPENSSL_ROOT_DIR=/usr/local/ssl \\\r\n        -DCMAKE_INSTALL_LIBDIR=lib \\\r\n        -DCMAKE_INSTALL_PREFIX=$ARROW_HOME \\\r\n        -DARROW_WITH_BZ2=ON \\\r\n        -DARROW_WITH_ZLIB=ON \\\r\n        -DARROW_WITH_ZSTD=ON \\\r\n        -DARROW_WITH_LZ4=ON \\\r\n        -DARROW_WITH_SNAPPY=ON \\\r\n        -DARROW_PARQUET=ON \\\r\n        -DARROW_PYTHON=ON \\\r\n        -DARROW_PLASMA=ON \\\r\n        -DARROW_BUILD_TESTS=OFF \\\r\n        .. \\\r\n    && make -j$(nproc) \\\r\n    && make install \\\r\n    && cd /arrow/python \\\r\n    && python setup.py build_ext --build-type=$ARROW_BUILD_TYPE --with-parquet \\\r\n    && python setup.py install \\\r\n    && rm -rf /arrow /tmp/apache-arrow.tar.gz\r\n```"
        },
        {
            "created_at": "2022-09-16T06:43:29.218Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-17748?focusedCommentId=17605641) by Stanislaw (Korzan):*\nCan You share the link for this file?"
        },
        {
            "created_at": "2022-09-16T06:50:16.827Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-17748?focusedCommentId=17605649) by Kouhei Sutou (kou):*\nDon't care the auto link.\r\n\r\nYou can save the contents in https://issues.apache.org/jira/browse/ARROW-17748?focusedCommentId=17605511&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17605511 as any name such as `xxx.patch` and use `COPY xxx.patch /tmp/`."
        },
        {
            "created_at": "2022-09-16T07:20:22.638Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-17748?focusedCommentId=17605661) by Stanislaw (Korzan):*\nhmm when I've tried that way it was failed\r\n\r\n\u00a0\r\n```java\n\r\n#9 4.390 arrow-apache-arrow-9.0.0/testing/\r\n#9 4.391 can't find file to patch at input line 5\r\n#9 4.391 Perhaps you used the wrong -p or --strip option?\r\n#9 4.391 The text leading up to this was:\r\n#9 4.391 --------------------------\r\n#9 4.391 |diff --git a/cpp/cmake_modules/ThirdpartyToolchain.cmake b/cpp/cmake_modules/ThirdpartyToolchain.cmake\r\n#9 4.391 |index 52847a99f9..1f7a409779 100644\r\n#9 4.391 |--- a/cpp/cmake_modules/ThirdpartyToolchain.cmake\r\n#9 4.391 |+++ b/cpp/cmake_modules/ThirdpartyToolchain.cmake\r\n#9 4.391 --------------------------\r\n#9 4.391 File to patch:\r\n#9 4.391 Skip this patch? [y]\r\n#9 4.391 Skipping patch.\r\n#9 4.392 1 out of 1 hunk ignored\r\n------\r\nexecutor failed running [/bin/sh -c mkdir /arrow \u00a0 \u00a0 && wget -q https://github.com/apache/arrow/archive/apache-arrow-${ARROW_VERSION}.tar.gz -O /tmp/apache-arrow.tar.gz \u00a0 \u00a0 && tar -xvf /tmp/apache-arrow.tar.gz -C /arrow --strip-components 1 \u00a0 \u00a0 && mkdir -p /arrow/cpp/build \u00a0 \u00a0 && cd /arrow/cpp \u00a0 \u00a0 && patch -p1 < /tmp/arrow-17748.patch \u00a0 \u00a0 && cd /arrow/cpp/build \u00a0 \u00a0 && cmake -DCMAKE_BUILD_TYPE=$ARROW_BUILD_TYPE \u00a0 \u00a0 \u00a0 \u00a0 -DOPENSSL_ROOT_DIR=/usr/local/ssl \u00a0 \u00a0 \u00a0 \u00a0 -DCMAKE_INSTALL_LIBDIR=lib \u00a0 \u00a0 \u00a0 \u00a0 -DCMAKE_INSTALL_PREFIX=$ARROW_HOME \u00a0 \u00a0 \u00a0 \u00a0 -DARROW_WITH_BZ2=ON \u00a0 \u00a0 \u00a0 \u00a0 -DARROW_WITH_ZLIB=ON \u00a0 \u00a0 \u00a0 \u00a0 -DARROW_WITH_ZSTD=ON \u00a0 \u00a0 \u00a0 \u00a0 -DARROW_WITH_LZ4=ON \u00a0 \u00a0 \u00a0 \u00a0 -DARROW_WITH_SNAPPY=ON \u00a0 \u00a0 \u00a0 \u00a0 -DARROW_PARQUET=ON \u00a0 \u00a0 \u00a0 \u00a0 -DARROW_PYTHON=ON \u00a0 \u00a0 \u00a0 \u00a0 -DARROW_PLASMA=ON \u00a0 \u00a0 \u00a0 \u00a0 -DARROW_BUILD_TESTS=OFF \u00a0 \u00a0 \u00a0 \u00a0 .. \u00a0 \u00a0 && make -j$(nproc) \u00a0 \u00a0 && make install \u00a0 \u00a0 && cd /arrow/python \u00a0 \u00a0 && python setup.py build_ext --build-type=$ARROW_BUILD_TYPE --with-parquet \u00a0 \u00a0 && python setup.py install \u00a0 \u00a0 && rm -rf /arrow /tmp/apache-arrow.tar.gz]: exit code: 1 \n```"
        },
        {
            "created_at": "2022-09-16T07:25:24.729Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-17748?focusedCommentId=17605664) by Kouhei Sutou (kou):*\nAh, sorry. Could you change `cd /arrow/cpp` to `cd /arrow` OR `patch -p1 ...` to `patch -p2 ...`?"
        },
        {
            "created_at": "2022-09-16T17:14:43.731Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-17748?focusedCommentId=17605937) by Stanislaw (Korzan):*\nehh, something goes wrong I can't install this patch maybe above syntax is wrong"
        },
        {
            "created_at": "2022-09-16T18:28:42.176Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-17748?focusedCommentId=17605953) by Stanislaw (Korzan):*\nok, I've tried below setting. It was changed dir in \u2014 /cpp/cmake_modules/ThirdpartyToolchain.cmake and +++ /cpp/cmake_modules/ThirdpartyToolchain.cmake\r\n```java\n\r\niff --git a/cpp/cmake_modules/ThirdpartyToolchain.cmake b/cpp/cmake_modules/ThirdpartyToolchain.cmake\r\nindex 52847a99f9..1f7a409779 100644\r\n--- /cpp/cmake_modules/ThirdpartyToolchain.cmake\r\n+++ /cpp/cmake_modules/ThirdpartyToolchain.cmake\r\n@@ -1452,6 +1452,10 @@ macro(build_thrift)\r\n\u00a0 \u00a0 \u00a0list(APPEND THRIFT_CMAKE_ARGS \"-DBoost_NAMESPACE=${Boost_NAMESPACE}\")\r\n\u00a0 \u00a0endif()+ \u00a0if(OPENSSL_ROOT_DIR)\r\n+ \u00a0 \u00a0list(APPEND THRIFT_CMAKE_ARGS \"-DOPENSSL_ROOT_DIR=${OPENSSL_ROOT_DIR}\")\r\n+ \u00a0endif()\r\n+\r\n\u00a0 \u00a0if(MSVC)\r\n\u00a0 \u00a0 \u00a0if(ARROW_USE_STATIC_CRT)\r\n\u00a0 \u00a0 \u00a0 \u00a0set(THRIFT_LIB_SUFFIX \"mt\") \n```\r\n\u00a0\r\n\r\n\u00a0\r\n\r\n\u00a0\r\n```java\n\r\nRUN mkdir /arrow \\\r\n\u00a0 \u00a0 && wget -q https://github.com/apache/arrow/archive/apache-arrow-${ARROW_VERSION}.tar.gz -O /tmp/apache-arrow.tar.gz \\\r\n\u00a0 \u00a0 && tar -xvf /tmp/apache-arrow.tar.gz -C /arrow --strip-components 1 \\\r\n\u00a0 \u00a0 && mkdir -p /arrow/cpp/build \\\r\n\u00a0 \u00a0 && cd /arrow/ \\\r\n\u00a0 \u00a0 && patch -p1 < /tmp/arrow.patch \\\r\n\u00a0 \u00a0 && cd /arrow/cpp/build \\ \n```\r\n\u00a0\r\n\r\n\u00a0\r\n\r\nbut it was also failed, pls double check\u00a0\r\n\r\n\u00a0\r\n```java\n\r\n#10 42.48 -- stderr output is:\r\n#10 42.48 In file included from /arrow/cpp/build/thrift_ep-prefix/src/thrift_ep/lib/cpp/src/thrift/transport/TSocket.cpp:37:\r\n#10 42.48 /usr/include/sys/poll.h:1:2: warning: #warning redirecting incorrect #include <sys/poll.h> to <poll.h> [-Wcpp]\r\n#10 42.48 \u00a0 \u00a0 1 | #warning redirecting incorrect #include <sys/poll.h> to <poll.h>\r\n#10 42.48 \u00a0 \u00a0 \u00a0 | \u00a0^~~~~~~\r\n#10 42.48 In file included from /arrow/cpp/build/thrift_ep-prefix/src/thrift_ep/lib/cpp/src/thrift/transport/TServerSocket.cpp:33:\r\n#10 42.48 /usr/include/sys/poll.h:1:2: warning: #warning redirecting incorrect #include <sys/poll.h> to <poll.h> [-Wcpp]\r\n#10 42.48 \u00a0 \u00a0 1 | #warning redirecting incorrect #include <sys/poll.h> to <poll.h>\r\n#10 42.48 \u00a0 \u00a0 \u00a0 | \u00a0^~~~~~~\r\n#10 42.48 In file included from /arrow/cpp/build/thrift_ep-prefix/src/thrift_ep/lib/cpp/src/thrift/transport/TSSLSocket.cpp:34:\r\n#10 42.48 /usr/include/sys/poll.h:1:2: warning: #warning redirecting incorrect #include <sys/poll.h> to <poll.h> [-Wcpp]\r\n#10 42.48 \u00a0 \u00a0 1 | #warning redirecting incorrect #include <sys/poll.h> to <poll.h>\r\n#10 42.48 \u00a0 \u00a0 \u00a0 | \u00a0^~~~~~~\r\n#10 42.48 /arrow/cpp/build/thrift_ep-prefix/src/thrift_ep/lib/cpp/src/thrift/transport/TSSLSocket.cpp: In function 'void apache::thrift::transport::cleanupOpenSSL()':\r\n#10 42.48 /arrow/cpp/build/thrift_ep-prefix/src/thrift_ep/lib/cpp/src/thrift/transport/TSSLSocket.cpp:157:3: error: 'OPENSSL_thread_stop' was not declared in this scope; did you mean 'OPENSSL_realloc'?\r\n#10 42.48 \u00a0 157 | \u00a0 OPENSSL_thread_stop();\r\n#10 42.48 \u00a0 \u00a0 \u00a0 | \u00a0 ^~~~~~~~~~~~~~~~~~~\r\n#10 42.48 \u00a0 \u00a0 \u00a0 | \u00a0 OPENSSL_realloc\r\n#10 42.48 /arrow/cpp/build/thrift_ep-prefix/src/thrift_ep/lib/cpp/src/thrift/transport/TSSLSocket.cpp: In member function 'virtual void apache::thrift::transport::TSSLSocket::close()':\r\n#10 42.48 /arrow/cpp/build/thrift_ep-prefix/src/thrift_ep/lib/cpp/src/thrift/transport/TSSLSocket.cpp:395:5: error: 'OPENSSL_thread_stop' was not declared in this scope; did you mean 'OPENSSL_realloc'?\r\n#10 42.48 \u00a0 395 | \u00a0 \u00a0 OPENSSL_thread_stop();\r\n#10 42.48 \u00a0 \u00a0 \u00a0 | \u00a0 \u00a0 ^~~~~~~~~~~~~~~~~~~\r\n#10 42.48 \u00a0 \u00a0 \u00a0 | \u00a0 \u00a0 OPENSSL_realloc\r\n#10 42.48 make[5]: *** [lib/cpp/CMakeFiles/thrift.dir/build.make:566: lib/cpp/CMakeFiles/thrift.dir/src/thrift/transport/TSSLSocket.cpp.o] Error 1\r\n#10 42.48 make[5]: *** Waiting for unfinished jobs....\r\n#10 42.48 make[4]: *** [CMakeFiles/Makefile2:125: lib/cpp/CMakeFiles/thrift.dir/all] Error 2\r\n#10 42.48 make[3]: *** [Makefile:156: all] Error 2\r\n#10 42.48\r\n#10 42.48 CMake Error at /arrow/cpp/build/thrift_ep-prefix/src/thrift_ep-stamp/thrift_ep-build-RELEASE.cmake:47 (message):\r\n#10 42.48 \u00a0 Stopping after outputting logs.\r\n#10 42.48\r\n#10 42.48\r\n#10 42.48 make[2]: *** [CMakeFiles/thrift_ep.dir/build.make:86: thrift_ep-prefix/src/thrift_ep-stamp/thrift_ep-build] Error 1\r\n#10 42.48 make[1]: *** [CMakeFiles/Makefile2:940: CMakeFiles/thrift_ep.dir/all] Error 2\r\n#10 42.48 make[1]: *** Waiting for unfinished jobs....\r\n#10 53.59 -- re2_ep build command succeeded. \u00a0See also /arrow/cpp/build/re2_ep-prefix/src/re2_ep-stamp/re2_ep-build-*.log\r\n#10 53.62 [ 20%] Performing install step for 're2_ep'\r\n#10 54.24 -- re2_ep install command succeeded. \u00a0See also /arrow/cpp/build/re2_ep-prefix/src/re2_ep-stamp/re2_ep-install-*.log\r\n#10 54.25 [ 20%] Completed 're2_ep'\r\n#10 54.27 [ 20%] Built target re2_ep\r\n#10 73.23 -- jemalloc_ep build command succeeded. \u00a0See also /arrow/cpp/build/jemalloc_ep-prefix/src/jemalloc_ep-stamp/jemalloc_ep-build-*.log\r\n#10 73.24 [ 20%] Performing install step for 'jemalloc_ep'\r\n#10 73.33 -- jemalloc_ep install command succeeded. \u00a0See also /arrow/cpp/build/jemalloc_ep-prefix/src/jemalloc_ep-stamp/jemalloc_ep-install-*.log\r\n#10 73.34 [ 20%] Completed 'jemalloc_ep'\r\n#10 73.36 [ 20%] Built target jemalloc_ep\r\n#10 73.36 make: *** [Makefile:146: all] Error 2\r\n------\r\nexecutor failed running [/bin/sh -c mkdir /arrow \u00a0 \u00a0 && wget -q https://github.com/apache/arrow/archive/apache-arrow-${ARROW_VERSION}.tar.gz -O /tmp/apache-arrow.tar.gz \u00a0 \u00a0 && tar -xvf /tmp/apache-arrow.tar.gz -C /arrow --strip-components 1 \u00a0 \u00a0 && mkdir -p /arrow/cpp/build \u00a0 \u00a0 && cd /arrow/ \u00a0 \u00a0 && patch -p1 < /tmp/arrow.patch \u00a0 \u00a0 && cd /arrow/cpp/build \u00a0 \u00a0 && cmake -DCMAKE_BUILD_TYPE=$ARROW_BUILD_TYPE \u00a0 \u00a0 \u00a0 \u00a0 -DOPENSSL_ROOT_DIR=/usr/local/ssl \u00a0 \u00a0 \u00a0 \u00a0 -DCMAKE_INSTALL_LIBDIR=lib \u00a0 \u00a0 \u00a0 \u00a0 -DCMAKE_INSTALL_PREFIX=$ARROW_HOME \u00a0 \u00a0 \u00a0 \u00a0 -DARROW_WITH_BZ2=ON \u00a0 \u00a0 \u00a0 \u00a0 -DARROW_WITH_ZLIB=ON \u00a0 \u00a0 \u00a0 \u00a0 -DARROW_WITH_ZSTD=ON \u00a0 \u00a0 \u00a0 \u00a0 -DARROW_WITH_LZ4=ON \u00a0 \u00a0 \u00a0 \u00a0 -DARROW_WITH_SNAPPY=ON \u00a0 \u00a0 \u00a0 \u00a0 -DARROW_PARQUET=ON \u00a0 \u00a0 \u00a0 \u00a0 -DARROW_PYTHON=ON \u00a0 \u00a0 \u00a0 \u00a0 -DARROW_PLASMA=ON \u00a0 \u00a0 \u00a0 \u00a0 -DARROW_BUILD_TESTS=OFF \u00a0 \u00a0 \u00a0 \u00a0 .. \u00a0 \u00a0 && make -j$(nproc) \u00a0 \u00a0 && make install \u00a0 \u00a0 && cd /arrow/python \u00a0 \u00a0 && python setup.py build_ext --build-type=$ARROW_BUILD_TYPE --with-parquet \u00a0 \u00a0 && python setup.py install \u00a0 \u00a0 && rm -rf /arrow /tmp/apache-arrow.tar.gz]: exit code: 2 \n```"
        }
    ]
}