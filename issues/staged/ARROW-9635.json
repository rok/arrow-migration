{
    "issue": {
        "title": "Can't install red-arrow 0.1.7.1 ",
        "body": "***Note**: This issue was originally created as [ARROW-9635](https://issues.apache.org/jira/browse/ARROW-9635). Please see the [migration documentation](https://gist.github.com/toddfarmer/12aa88361532d21902818a6044fda4c3) for further details.*\n\n### Original Issue Description:\nI need some help with this error, this was working ok 3 days ago, now I'm getting this:\r\n\r\nDependencies installed:\u00a0\r\nlibarrow17 libarrow-glib17 gir1.2-arrow-1.0 \\\r\nlibparquet17 libparquet-glib17 gir1.2-parquet-1.0 \\\r\nlibarrow-dev libarrow-glib-dev libparquet-dev libparquet-glib-dev\r\n\u00a0\r\nERROR:  Error installing red-parquet:\tERROR: Failed to build gem native extension.    current directory: /usr/local/bundle/gems/red-arrow-0.17.1/ext/arrow/usr/local/bin/ruby -r ./siteconf20200803-9-v6ubfi.rb extconf.rbchecking --enable-debug-build option... nochecking C++ compiler... g+checking g+ version... 6.3 (gnu++14)mkmf-gnome2 is deprecated. Use mkmf-gnome instead.checking for --enable-debug-build option... nochecking for -Wall option to compiler... yeschecking for -Waggregate-return option to compiler... yeschecking for -Wcast-align option to compiler... yeschecking for -Wextra option to compiler... yeschecking for -Wformat=2 option to compiler... yeschecking for -Winit-self option to compiler... yeschecking for -Wlarger-than-65500 option to compiler... yeschecking for -Wmissing-declarations option to compiler... yeschecking for -Wmissing-format-attribute option to compiler... yeschecking for -Wmissing-include-dirs option to compiler... yeschecking for -Wmissing-noreturn option to compiler... yeschecking for -Wmissing-prototypes option to compiler... yeschecking for -Wnested-externs option to compiler... yeschecking for -Wold-style-definition option to compiler... yeschecking for -Wpacked option to compiler... yeschecking for -Wp,-D_FORTIFY_SOURCE=2 option to compiler... yeschecking for -Wpointer-arith option to compiler... yeschecking for -Wundef option to compiler... yeschecking for -Wout-of-line-declaration option to compiler... nochecking for -Wunsafe-loop-optimizations option to compiler... yeschecking for -Wwrite-strings option to compiler... yeschecking for Homebrew... nochecking for arrow... yeschecking for arrow-glib... yescreating Makefilecurrent directory: /usr/local/bundle/gems/red-arrow-0.17.1/ext/arrowmake \"DESTDIR=\" cleancurrent directory: /usr/local/bundle/gems/red-arrow-0.17.1/ext/arrowmake \"DESTDIR=\"compiling arrow.cppcompiling converters.cppIn file included from converters.cpp:20:0:converters.hpp:258:19: error: \u2018arrow::Status red_arrow::ListArrayValueConverter::Visit(const arrow::UnionArray&)\u2019 marked \u2018override\u2019, but does not override     arrow::Status Visit(const arrow::TYPE ## Array& array) override {   \\                   <sup>converters.hpp:288:5: note: in expansion of macro \u2018VISIT\u2019     VISIT(Union)     ^~~~<sub>converters.hpp:360:19: error: \u2018arrow::Status red_arrow::StructArrayValueConverter::Visit(const arrow::UnionArray&)\u2019 marked \u2018override\u2019, but does not override     arrow::Status Visit(const arrow::TYPE ## Array& array) override {   \\                   ^converters.hpp:391:5: note: in expansion of macro \u2018VISIT\u2019     VISIT(Union)     ^</sub>~~<sub>converters.hpp: In member function \u2018VALUE red_arrow::StructArrayValueConverter::convert(const arrow::StructArray&, int64_t)\u2019:converters.hpp:342:48: warning: \u2018int arrow::DataType::num_children() const\u2019 is deprecated: Use num_fields() [-Wdeprecated-declarations]       const auto n = struct_type->num_children();                                                ^In file included from /usr/include/arrow/array/array_base.h:31:0,                 from /usr/include/arrow/array.h:25,                 from /usr/include/arrow/api.h:22,                 from red-arrow.hpp:22,                 from converters.hpp:20,                 from converters.cpp:20:/usr/include/arrow/type.h:139:7: note: declared here   int num_children() const \\{ return num_fields(); }       ^</sub>~~~~~~~~~<sub>In file included from converters.cpp:20:0:converters.hpp:344:53: warning: \u2018const std::shared_ptr<arrow::Field>& arrow::DataType::child(int) const\u2019 is deprecated: Use field(i) [-Wdeprecated-declarations]         const auto field_type = struct_type->child(i).get();                                                     ^In file included from /usr/include/arrow/array/array_base.h:31:0,                 from /usr/include/arrow/array.h:25,                 from /usr/include/arrow/api.h:22,                 from red-arrow.hpp:22,                 from converters.hpp:20,                 from converters.cpp:20:/usr/include/arrow/type.h:127:33: note: declared here   const std::shared_ptr<Field>& child(int i) const \\{ return field(i); }                                 ^</sub>~~<sub>In file included from converters.cpp:20:0:converters.hpp: At global scope:converters.hpp:451:19: error: \u2018arrow::Status red_arrow::UnionArrayValueConverter::Visit(const arrow::UnionArray&)\u2019 marked \u2018override\u2019, but does not override     arrow::Status Visit(const arrow::TYPE ## Array& array) override {   \\                   ^converters.hpp:482:5: note: in expansion of macro \u2018VISIT\u2019     VISIT(Union)     ^</sub>~~<sub>converters.hpp: In member function \u2018uint8_t red_arrow::UnionArrayValueConverter::compute_child_index(const arrow::UnionArray&, arrow::UnionType\\*, const char\\*)\u2019:converters.hpp:508:39: warning: comparison is always true due to limited range of data type [-Wtype-limits]       if (type_code >= 0 && type_code <= arrow::UnionType::kMaxTypeCode) {                             ~</sub>~~~~~~~~</sup>~~~~~~<sub>converters.hpp: In member function \u2018void red_arrow::UnionArrayValueConverter::convert_sparse(const arrow::UnionArray&)\u2019:converters.hpp:524:55: warning: \u2018const std::shared_ptr<arrow::Field>& arrow::DataType::child(int) const\u2019 is deprecated: Use field(i) [-Wdeprecated-declarations]       const auto child_field = type->child(child_index).get();                                                       ^In file included from /usr/include/arrow/array/array_base.h:31:0,                 from /usr/include/arrow/array.h:25,                 from /usr/include/arrow/api.h:22,                 from red-arrow.hpp:22,                 from converters.hpp:20,                 from converters.cpp:20:/usr/include/arrow/type.h:127:33: note: declared here   const std::shared_ptr<Field>& child(int i) const \\{ return field(i); }                                 ^</sub>~~<sub>In file included from converters.cpp:20:0:converters.hpp:528:55: warning: \u2018std::shared_ptr<arrow::Array> arrow::UnionArray::child(int) const\u2019 is deprecated: Deprecated in 1.0.0. Use field(pos) [-Wdeprecated-declarations]       const auto child_array = array.child(child_index).get();                                                       ^In file included from /usr/include/arrow/array.h:29:0,                 from /usr/include/arrow/api.h:22,                 from red-arrow.hpp:22,                 from converters.hpp:20,                 from converters.cpp:20:/usr/include/arrow/array/array_nested.h:378:26: note: declared here   std::shared_ptr<Array> child(int pos) const;                          ^</sub>~~<sub>In file included from converters.cpp:20:0:converters.hpp: In member function \u2018void red_arrow::UnionArrayValueConverter::convert_dense(const arrow::UnionArray&)\u2019:converters.hpp:538:55: warning: \u2018const std::shared_ptr<arrow::Field>& arrow::DataType::child(int) const\u2019 is deprecated: Use field(i) [-Wdeprecated-declarations]       const auto child_field = type->child(child_index).get();                                                       ^In file included from /usr/include/arrow/array/array_base.h:31:0,                 from /usr/include/arrow/array.h:25,                 from /usr/include/arrow/api.h:22,                 from red-arrow.hpp:22,                 from converters.hpp:20,                 from converters.cpp:20:/usr/include/arrow/type.h:127:33: note: declared here   const std::shared_ptr<Field>& child(int i) const \\{ return field(i); }                                 ^</sub>~~<sub>In file included from converters.cpp:20:0:converters.hpp:542:55: warning: \u2018std::shared_ptr<arrow::Array> arrow::UnionArray::child(int) const\u2019 is deprecated: Deprecated in 1.0.0. Use field(pos) [-Wdeprecated-declarations]       const auto child_array = array.child(child_index);                                                       ^In file included from /usr/include/arrow/array.h:29:0,                 from /usr/include/arrow/api.h:22,                 from red-arrow.hpp:22,                 from converters.hpp:20,                 from converters.cpp:20:/usr/include/arrow/array/array_nested.h:378:26: note: declared here   std::shared_ptr<Array> child(int pos) const;                          ^</sub>~~<sub>In file included from converters.cpp:20:0:converters.hpp:544:22: error: \u2018const class arrow::UnionArray\u2019 has no member named \u2018value_offset\u2019; did you mean \u2018offset\u2019?       index_ = array.value_offset(index_);                      ^</sub>~~~~~~~~~~Makefile:234: recipe for target 'converters.o' failedmake: \\*\\*\\* [converters.o] Error 1make failed, exit code 2Gem files will remain installed in /usr/local/bundle/gems/red-arrow-0.17.1 for inspection.Results logged to /usr/local/bundle/extensions/x86_64-linux/2.5.0/red-arrow-0.17.1/gem_make.out",
        "created_at": "2020-08-03T18:12:09.000Z",
        "updated_at": "2020-08-03T20:13:24.000Z",
        "labels": [
            "Migrated from Jira",
            "Component: Ruby",
            "Type: bug"
        ],
        "closed": true,
        "closed_at": "2020-08-03T20:13:24.000Z"
    },
    "comments": [
        {
            "created_at": "2020-08-03T18:15:52.084Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-9635?focusedCommentId=17170332) by Wes McKinney (wesm):*\nYou're mixing 0.17.x packages with 1.0.0 packages. That won't work, you have to use either all 0.17.1 packages or all 1.0.0, but not a mix of the two. I'm surprised that the dependency resolver allows this"
        },
        {
            "created_at": "2020-08-03T18:46:02.680Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-9635?focusedCommentId=17170348) by Natasha (nmontero):*\nthese dependencies were installed and the gem was installed without fails:\r\n **The following additional packages will be installed:** libarrow-glib100 libarrow100 libbrotli1 libparquet-glib100 libparquet100\r\n libsnappy1v5 libutf8proc2 libzstd1\r\n\r\n**Suggested packages:** libarrow-glib-doc libparquet-glib-doc\r\n\r\n**The following NEW packages will be installed:** gir1.2-arrow-1.0 gir1.2-parquet-1.0 libarrow-dev libarrow-glib-dev\r\n libarrow-glib100 libarrow-glib17 libarrow100 libarrow17 libbrotli1\r\n libparquet-dev libparquet-glib-dev libparquet-glib100 libparquet-glib17\r\n libparquet100 libparquet17 libsnappy1v5 libutf8proc2 libzstd1\r\n\r\n\u00a0\r\n\r\n\u00a0\r\n\r\nNow with the same libraries versions is failling."
        },
        {
            "created_at": "2020-08-03T18:48:15.617Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-9635?focusedCommentId=17170352) by Natasha (nmontero):*\nwhat would be the correct versions for version 0.17.1?"
        },
        {
            "created_at": "2020-08-03T20:13:07.499Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-9635?focusedCommentId=17170404) by Natasha (nmontero):*\nThanks `[~wesm]` \u00a0for the help. This was fixed by removing the installation of dependencies not included in the prev package and upgrading to 1.0.0."
        }
    ]
}