{
    "issue": {
        "title": "[Java] [C++] arrow-dataset-dataset-test fails on Ubuntu",
        "body": "***Note**: This issue was originally created as [ARROW-12999](https://issues.apache.org/jira/browse/ARROW-12999). Please see the [migration documentation](https://gist.github.com/toddfarmer/12aa88361532d21902818a6044fda4c3) for further details.*\n\n### Original Issue Description:\nthe only test that  failed for the nightly build was \"arrow-dataset-dataset-test\" on Ubuntu\r\nhttps://github.com/ursacomputing/crossbow/runs/2756067135#step:6:2888\r\n\r\nthe exact error is\r\n```bash\n\r\n/arrow/cpp/build-support/run-test.sh: line 88: 11425 Segmentation fault\r\n```\r\n\r\nall the tests passed on OS X for the same nightly (java-jars)",
        "created_at": "2021-06-07T19:36:04.000Z",
        "updated_at": "2022-04-21T12:03:20.000Z",
        "labels": [
            "Migrated from Jira",
            "Component: C++",
            "Component: Java",
            "Type: task"
        ],
        "closed": true,
        "closed_at": "2022-04-21T12:03:20.000Z"
    },
    "comments": [
        {
            "created_at": "2021-06-07T19:54:07.748Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-12999?focusedCommentId=17358833) by David Li (lidavidm):*\nHmm, from the logs it seems like all the tests passed then it segfaulted on shutdown/cleanup. I feel like I see this occasionally in various tests.\r\n```\n\r\n32/72 Test #32: arrow-dataset-dataset-test ................***Failed    0.26 sec\r\nRunning arrow-dataset-dataset-test, redirecting output into /build/build/test-logs/arrow-dataset-dataset-test.txt (attempt 1/1)\r\n/arrow/cpp/build-support/run-test.sh: line 88: 11425 Segmentation fault      (core dumped) $TEST_EXECUTABLE \"$@\" > $LOGFILE.raw 2>&1\r\nRunning main() from /opt/vcpkg/buildtrees/gtest/src/ase-1.10.0-9cde347ce0.clean/googletest/src/gtest_main.cc\r\n[==========] Running 18 tests from 7 test suites.\r\n[----------] Global test environment set-up.\r\n[----------] 1 test from TestInMemoryFragment\r\n[ RUN      ] TestInMemoryFragment.Scan\r\n[       OK ] TestInMemoryFragment.Scan (2 ms)\r\n[----------] 1 test from TestInMemoryFragment (2 ms total)[----------] 3 tests from TestInMemoryDataset\r\n[ RUN      ] TestInMemoryDataset.ReplaceSchema\r\n[       OK ] TestInMemoryDataset.ReplaceSchema (0 ms)\r\n[ RUN      ] TestInMemoryDataset.GetFragments\r\n[       OK ] TestInMemoryDataset.GetFragments (1 ms)\r\n[ RUN      ] TestInMemoryDataset.InMemoryFragment\r\n[       OK ] TestInMemoryDataset.InMemoryFragment (0 ms)\r\n[----------] 3 tests from TestInMemoryDataset (1 ms total)[----------] 3 tests from TestUnionDataset\r\n[ RUN      ] TestUnionDataset.ReplaceSchema\r\n[       OK ] TestUnionDataset.ReplaceSchema (0 ms)\r\n[ RUN      ] TestUnionDataset.GetFragments\r\n[       OK ] TestUnionDataset.GetFragments (1 ms)\r\n[ RUN      ] TestUnionDataset.TrivialScan\r\n[       OK ] TestUnionDataset.TrivialScan (1 ms)\r\n[----------] 3 tests from TestUnionDataset (2 ms total)[----------] 1 test from TestProjector\r\n[ RUN      ] TestProjector.CheckProjectable\r\n[       OK ] TestProjector.CheckProjectable (0 ms)\r\n[----------] 1 test from TestProjector (0 ms total)[----------] 1 test from TestEndToEnd\r\n[ RUN      ] TestEndToEnd.EndToEndSingleDataset\r\n[       OK ] TestEndToEnd.EndToEndSingleDataset (1 ms)\r\n[----------] 1 test from TestEndToEnd (1 ms total)[----------] 8 tests from TestSchemaUnification\r\n[ RUN      ] TestSchemaUnification.SelectStar\r\n[       OK ] TestSchemaUnification.SelectStar (1 ms)\r\n[ RUN      ] TestSchemaUnification.SelectPhysicalColumns\r\n[       OK ] TestSchemaUnification.SelectPhysicalColumns (1 ms)\r\n[ RUN      ] TestSchemaUnification.SelectSomeReorderedPhysicalColumns\r\n[       OK ] TestSchemaUnification.SelectSomeReorderedPhysicalColumns (0 ms)\r\n[ RUN      ] TestSchemaUnification.SelectPhysicalColumnsFilterPartitionColumn\r\n[       OK ] TestSchemaUnification.SelectPhysicalColumnsFilterPartitionColumn (1 ms)\r\n[ RUN      ] TestSchemaUnification.SelectSyntheticColumn\r\n[       OK ] TestSchemaUnification.SelectSyntheticColumn (0 ms)\r\n[ RUN      ] TestSchemaUnification.SelectPartitionColumns\r\n[       OK ] TestSchemaUnification.SelectPartitionColumns (1 ms)\r\n[ RUN      ] TestSchemaUnification.SelectPartitionColumnsFilterPhysicalColumn\r\n[       OK ] TestSchemaUnification.SelectPartitionColumnsFilterPhysicalColumn (0 ms)\r\n[ RUN      ] TestSchemaUnification.SelectMixedColumnsAndFilter\r\n[       OK ] TestSchemaUnification.SelectMixedColumnsAndFilter (0 ms)\r\n[----------] 8 tests from TestSchemaUnification (5 ms total)[----------] 1 test from TestDictPartitionColumn\r\n[ RUN      ] TestDictPartitionColumn.SelectPartitionColumnFilterPhysicalColumn\r\n[       OK ] TestDictPartitionColumn.SelectPartitionColumnFilterPhysicalColumn (1 ms)\r\n[----------] 1 test from TestDictPartitionColumn (1 ms total)[----------] Global test environment tear-down\r\n[==========] 18 tests from 7 test suites ran. (12 ms total)\r\n[  PASSED  ] 18 tests.\r\n/build/src/arrow/dataset      Start 33: arrow-dataset-discovery-test \n```"
        },
        {
            "created_at": "2022-04-21T07:16:13.499Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-12999?focusedCommentId=17525464) by Antoine Pitrou (apitrou):*\nDoes this still happen? Otherwise should close."
        },
        {
            "created_at": "2022-04-21T12:03:20.514Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-12999?focusedCommentId=17525658) by David Li (lidavidm):*\nWe can close it, I don't think we've seen this in a while. I believe ARROW-14478 is the last source of flakiness we see in Datasets tests and I think I've still seen that one happen occasionally."
        }
    ]
}