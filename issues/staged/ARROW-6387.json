{
    "issue": {
        "title": "[Archery] Errors with make",
        "body": "***Note**: This issue was originally created as [ARROW-6387](https://issues.apache.org/jira/browse/ARROW-6387). Please see the [migration documentation](https://gist.github.com/toddfarmer/12aa88361532d21902818a6044fda4c3) for further details.*\n\n### Original Issue Description:\n`archery --debug benchmark run` gives error on Debian 10, CMake 3.13.4, GNU make 4.2.1:\r\n```java\n\r\n(.venv)  omer@omer \ue0b0 ~/src/ext/arrow/cpp/build \ue0b0 \ue0a0 master \u25cf \ue0b0 archery --debug benchmark run                                                                                                                    \r\nDEBUG:archery:Running benchmark WORKSPACE                                                                                                                                                                          \r\nDEBUG:archery:Executing `['/usr/bin/cmake', '-GMake', '-DCMAKE_EXPORT_COMPILE_COMMANDS=ON', '-DCMAKE_BUILD_TYPE=release', '-DBUILD_WARNING_LEVEL=production', '-DARROW_BUILD_TESTS=ON', '-DARROW_BUILD_BENCHMARKS=ON', '-DARROW_PYTHON=OFF', '-DARROW_PARQUET=OFF', '-DARROW_GANDIVA=OFF', '-DARROW_PLASMA=OFF', '-DARROW_FLIGHT=OFF', '/home/omer/src/ext/arrow/cpp']`\r\nCMake Error: Could not create named generator Make                                                                      \r\n                                                                                                                      \r\nGenerators                                                                                                           \r\n  Unix Makefiles               = Generates standard UNIX makefiles.                                                                                                                                                \r\n  Ninja                        = Generates build.ninja files.                                                                                                                                                      \r\n  Watcom WMake                 = Generates Watcom WMake makefiles.                                                                                                                                                 \r\n  CodeBlocks - Ninja           = Generates CodeBlocks project files.                                                                                                                                               \r\n  CodeBlocks - Unix Makefiles  = Generates CodeBlocks project files.                                                                                                                   \r\n  CodeLite - Ninja             = Generates CodeLite project files.                                                               \r\n  CodeLite - Unix Makefiles    = Generates CodeLite project files.                                                                 \r\n  Sublime Text 2 - Ninja       = Generates Sublime Text 2 project files.                                      \r\n  Sublime Text 2 - Unix Makefiles                                        \r\n                               = Generates Sublime Text 2 project files.                      \r\n  Kate - Ninja                 = Generates Kate project files.                                                                                             \r\n  Kate - Unix Makefiles        = Generates Kate project files.\r\n  Eclipse CDT4 - Ninja         = Generates Eclipse CDT 4.0 project files.\r\n  Eclipse CDT4 - Unix Makefiles= Generates Eclipse CDT 4.0 project files.\r\nTraceback (most recent call last):\r\n[[[cropped]]]\n```\r\nAfter trivial fix:\r\n```java\n\r\ndiff --git a/dev/archery/archery/utils/cmake.py b/dev/archery/archery/utils/cmake.py\r\nindex 38aedab2d..3150ea9a6 100644\r\n--- a/dev/archery/archery/utils/cmake.py\r\n+++ b/dev/archery/archery/utils/cmake.py\r\n@@ -34,7 +34,7 @@ class CMake(Command):\r\n         in the search path.\r\n         \"\"\"\r\n         found_ninja = which(\"ninja\")\r\n-        return \"Ninja\" if found_ninja else \"Make\"\r\n+        return \"Ninja\" if found_ninja else \"Unix Makefiles\"\n```\r\nI get another error:\r\n```java\n\r\n[[[cropped]]\r\n-- Generating done\r\n-- Build files have been written to: /tmp/arrow-bench-48x_yleb/WORKSPACE/build\r\nDEBUG:archery:Executing `[None]`\r\nTraceback (most recent call last):\r\n  File \"/home/omer/src/ext/arrow/.venv/bin/archery\", line 11, in <module>\r\n    load_entry_point('archery', 'console_scripts', 'archery')()\r\n  File \"/home/omer/src/ext/arrow/.venv/lib/python3.7/site-packages/click/core.py\", line 764, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"/home/omer/src/ext/arrow/.venv/lib/python3.7/site-packages/click/core.py\", line 717, in main\r\n    rv = self.invoke(ctx)\r\n  File \"/home/omer/src/ext/arrow/.venv/lib/python3.7/site-packages/click/core.py\", line 1137, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"/home/omer/src/ext/arrow/.venv/lib/python3.7/site-packages/click/core.py\", line 1137, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"/home/omer/src/ext/arrow/.venv/lib/python3.7/site-packages/click/core.py\", line 956, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"/home/omer/src/ext/arrow/.venv/lib/python3.7/site-packages/click/core.py\", line 555, in invoke\r\n    return callback(*args, **kwargs)\r\n  File \"/home/omer/src/ext/arrow/.venv/lib/python3.7/site-packages/click/decorators.py\", line 17, in new_func\r\n    return f(get_current_context(), *args, **kwargs)\r\n  File \"/home/omer/src/ext/arrow/dev/archery/archery/cli.py\", line 270, in benchmark_run\r\n    json.dump(runner_base, output, cls=JsonEncoder)\r\n  File \"/usr/lib/python3.7/json/__init__.py\", line 179, in dump\r\n    for chunk in iterable:\r\n  File \"/usr/lib/python3.7/json/encoder.py\", line 438, in _iterencode\r\n    o = _default(o)\r\n  File \"/home/omer/src/ext/arrow/dev/archery/archery/utils/codec.py\", line 35, in default\r\n    return BenchmarkRunnerCodec.encode(o)\r\n  File \"/home/omer/src/ext/arrow/dev/archery/archery/utils/codec.py\", line 76, in encode\r\n    return {\"suites\": [BenchmarkSuiteCodec.encode(s) for s in br.suites]}\r\n  File \"/home/omer/src/ext/arrow/dev/archery/archery/utils/codec.py\", line 76, in <listcomp>\r\n    return {\"suites\": [BenchmarkSuiteCodec.encode(s) for s in br.suites]}\r\n  File \"/home/omer/src/ext/arrow/dev/archery/archery/benchmark/runner.py\", line 170, in suites\r\n    suite_and_binaries = self.suites_binaries\r\n  File \"/home/omer/src/ext/arrow/dev/archery/archery/benchmark/runner.py\", line 140, in suites_binaries\r\n    self.build()\r\n  File \"/home/omer/src/ext/arrow/dev/archery/archery/utils/command.py\", line 71, in __call__\r\n    self.run(*argv, **kwargs)\r\n  File \"/home/omer/src/ext/arrow/dev/archery/archery/utils/cmake.py\", line 154, in run\r\n    super().run(*extra, *argv, **kwargs, cwd=self.build_dir)\r\n  File \"/home/omer/src/ext/arrow/dev/archery/archery/utils/command.py\", line 68, in run\r\n    return subprocess.run(invocation, **kwargs)\r\n  File \"/usr/lib/python3.7/subprocess.py\", line 472, in run\r\n    with Popen(*popenargs, **kwargs) as process:\r\n  File \"/usr/lib/python3.7/subprocess.py\", line 775, in __init__\r\n    restore_signals, start_new_session)\r\n  File \"/usr/lib/python3.7/subprocess.py\", line 1436, in _execute_child\r\n    executable = os.fsencode(executable)\r\n  File \"/home/omer/src/ext/arrow/.venv/lib/python3.7/os.py\", line 809, in fsencode\r\n    filename = fspath(filename)  # Does type-checking of `filename`.\r\nTypeError: expected str, bytes or os.PathLike object, not NoneType \n```\r\nEverything ran smoothly after I installed ninja.",
        "created_at": "2019-08-29T15:31:41.000Z",
        "updated_at": "2019-08-30T13:38:21.000Z",
        "labels": [
            "Migrated from Jira",
            "Component: Archery",
            "Type: bug"
        ],
        "closed": true,
        "closed_at": "2019-08-30T13:38:21.000Z"
    },
    "comments": [
        {
            "created_at": "2019-08-29T15:50:46.325Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-6387?focusedCommentId=16918726) by Francois Saint-Jacques (fsaintjacques):*\nTo complete the loop, you need to fix the [binary name\\|[https://github.com/apache/arrow/blob/master/dev/archery/archery/utils/cmake.py#L110]]. I guess introducing a bin() method that switch on the generator string.\u00a0"
        },
        {
            "created_at": "2019-08-29T17:09:12.634Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-6387?focusedCommentId=16918784) by Omer Ozarslan (ozars):*\nThanks. How about calling cmake --build instead of the build program itself?"
        },
        {
            "created_at": "2019-08-29T17:15:42.402Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-6387?focusedCommentId=16918791) by Francois Saint-Jacques (fsaintjacques):*\nEven better, I didn't know about `cmake --build`."
        },
        {
            "created_at": "2019-08-29T17:24:01.208Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-6387?focusedCommentId=16918795) by Omer Ozarslan (ozars):*\nOkay, submitting a PR soon."
        },
        {
            "created_at": "2019-08-30T13:38:21.381Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-6387?focusedCommentId=16919554) by Francois Saint-Jacques (fsaintjacques):*\nIssue resolved by pull request 5234\n<https://github.com/apache/arrow/pull/5234>"
        }
    ]
}