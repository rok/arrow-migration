{
    "issue": {
        "title": "[Go] Resize does not correctly update the length",
        "body": "***Note**: This issue was originally created as [ARROW-3613](https://issues.apache.org/jira/browse/ARROW-3613). Please see the [migration documentation](https://gist.github.com/toddfarmer/12aa88361532d21902818a6044fda4c3) for further details.*\n\n### Original Issue Description:\nIf you have the following code:\r\n```java\n\r\npackage main\r\n\r\nimport (\r\n    \"fmt\"\r\n\r\n    \"github.com/apache/arrow/go/arrow/array\"\r\n    \"github.com/apache/arrow/go/arrow/memory\"\r\n)\r\n\r\nfunc main() {\r\n    builder := array.NewFloat64Builder(memory.DefaultAllocator)\r\n    fmt.Println(builder.Len(), builder.Cap())\r\n    builder.Reserve(44)\r\n    fmt.Println(builder.Len(), builder.Cap())\r\n    builder.Resize(5)\r\n    fmt.Println(builder.Len(), builder.Cap())\r\n    builder.Reserve(44)\r\n    for i := 0; i < 44; i++ {\r\n        builder.Append(0)\r\n    }\r\n    fmt.Println(builder.Len(), builder.Cap())\r\n    builder.Resize(5)\r\n    fmt.Println(builder.Len(), builder.Cap())\r\n}\r\n```\r\nIt gives the following output:\r\n```java\n\r\n0 0\r\n0 64\r\n0 32\r\n44 64\r\n44 32\r\n```\r\nFor whatever reason, the length is not recorded as 5. I understand why the capacity might not be 5, but it does seem like the length should be set to 5 if the array is resized to a length smaller than its current capacity.",
        "created_at": "2018-10-25T21:45:40.000Z",
        "updated_at": "2018-11-29T02:39:11.000Z",
        "labels": [
            "Migrated from Jira",
            "Component: Go",
            "Type: bug"
        ],
        "closed": true,
        "closed_at": "2018-11-29T02:39:04.000Z"
    },
    "comments": [
        {
            "created_at": "2018-11-08T21:04:33.481Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-3613?focusedCommentId=16680379) by Alexandre Crayssac (alexandreyc):*\nHello,\r\n\r\nAfter digging into the code I confirm that the field `length` of `Float64Builder.builder` is not updated when calls to `Float64Builder.Resize` are made.\r\n\r\nNote that it is also the case with all the numeric types since they are all generated by a common template and they all use the `builder` field to retrieve the length. By the way, should not we use the field `data` to retrieve the lenght?\r\n\r\nIt looks like the problem is rooted in the function `resize` of the `builder` field which does not update its `length` field. Note that the `capacity` field is updated so I think we might end up with `length > capacity`. (Note that the length of `data` is correctly updated.)\r\n\r\nCan someone confirm that's a bug?\r\n\r\nDisclaimer: I don't have tons of experience with Go and Arrow.\r\n\r\nAlexandre"
        },
        {
            "created_at": "2018-11-08T21:19:52.429Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-3613?focusedCommentId=16680398) by Wes McKinney (wesm):*\nLooks like a bug to me"
        },
        {
            "created_at": "2018-11-09T10:34:10.099Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-3613?focusedCommentId=16681230) by Alexandre Crayssac (alexandreyc):*\nOk, still investigating on it since it looks like the bug has others ramifications."
        },
        {
            "created_at": "2018-11-09T13:01:27.812Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-3613?focusedCommentId=16681405) by Alexandre Crayssac (alexandreyc):*\nJust submitted a PR : <https://github.com/apache/arrow/pull/2927>\r\n\r\nNeed review though."
        },
        {
            "created_at": "2018-11-09T23:21:03.004Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-3613?focusedCommentId=16682061) by Wes McKinney (wesm):*\nIssue resolved by pull request 2927\n<https://github.com/apache/arrow/pull/2927>"
        },
        {
            "created_at": "2018-11-28T20:29:12.261Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-3613?focusedCommentId=16702356) by Francois Saint-Jacques (fsaintjacques):*\nSeems like this issue is not fully\u00a0solved as null counts is not properly updated."
        },
        {
            "created_at": "2018-11-28T21:19:49.114Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-3613?focusedCommentId=16702391) by Wes McKinney (wesm):*\nReopen?"
        },
        {
            "created_at": "2018-11-28T21:24:51.091Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-3613?focusedCommentId=16702393) by Francois Saint-Jacques (fsaintjacques):*\nNull count is not properly\u00a0maintained on shrink."
        },
        {
            "created_at": "2018-11-28T21:59:37.908Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-3613?focusedCommentId=16702418) by Alexandre Crayssac (alexandreyc):*\nGood catch!\r\n\r\nI wiil look at it but currently I don't have a \"simple\" solution."
        },
        {
            "created_at": "2018-11-28T22:48:32.237Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-3613?focusedCommentId=16702469) by Francois Saint-Jacques (fsaintjacques):*\n`[~alexandreyc]` see\u00a0https://github.com/apache/arrow/pull/3048"
        },
        {
            "created_at": "2018-11-29T02:39:04.501Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-3613?focusedCommentId=16702650) by Wes McKinney (wesm):*\nIssue resolved by pull request 3048\n<https://github.com/apache/arrow/pull/3048>"
        }
    ]
}