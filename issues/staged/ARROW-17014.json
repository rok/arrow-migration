{
    "issue": {
        "title": "[Python][C++] Appveyor cython tests are failing",
        "body": "***Note**: This issue was originally created as [ARROW-17014](https://issues.apache.org/jira/browse/ARROW-17014). Please see the [migration documentation](https://gist.github.com/toddfarmer/12aa88361532d21902818a6044fda4c3) for further details.*\n\n### Original Issue Description:\nTwo cython tests are failing on Appveyor builds (<https://ci.appveyor.com/project/ApacheSoftwareFoundation/arrow/builds/44114739/job/rresg43jos1wpbtv):>\r\n```java\n\r\n_______________________________ test_cython_api _______________________________\r\ntmpdir = local('C:\\\\Users\\\\appveyor\\\\AppData\\\\Local\\\\Temp\\\\1\\\\pytest-of-appveyor\\\\pytest-0\\\\test_cython_api0')\r\n\u00a0 \u00a0 @pytest.mark.cython\r\n\u00a0 \u00a0 def test_cython_api(tmpdir):\r\n\u00a0 \u00a0 \u00a0 \u00a0 \"\"\"\r\n\u00a0 \u00a0 \u00a0 \u00a0 Basic test for the Cython API.\r\n\u00a0 \u00a0 \u00a0 \u00a0 \"\"\"\r\n# Fail early if cython is not found\r\n\u00a0 \u00a0 \u00a0 \u00a0 import cython \u00a0# noqa\r\n\u00a0 \u00a0\u00a0\r\n\u00a0 \u00a0 \u00a0 \u00a0 with tmpdir.as_cwd():\r\n# Set up temporary workspace\r\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 pyx_file = 'pyarrow_cython_example.pyx'\r\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 shutil.copyfile(os.path.join(here, pyx_file),\r\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 os.path.join(str(tmpdir), pyx_file))\r\n# Create setup.py file\r\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 setup_code = setup_template.format(pyx_file=pyx_file,\r\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0compiler_opts=compiler_opts,\r\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0test_ld_path=test_ld_path)\r\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 with open('setup.py', 'w') as f:\r\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 f.write(setup_code)\r\n\u00a0 \u00a0\u00a0\r\n# ARROW-2263: Make environment with this pyarrow/ package first on the\r\n# PYTHONPATH, for local dev environments\r\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 subprocess_env = test_util.get_modified_env_with_pythonpath()\r\n\u00a0 \u00a0\u00a0\r\n# Compile extension module\r\n> \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 subprocess.check_call([sys.executable, 'setup.py',\r\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0'build_ext', '--inplace'],\r\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 env=subprocess_env)\r\npyarrow\\tests\\test_cython.py:107:\u00a0\r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\r\npopenargs = (['C:\\\\Miniconda37-x64\\\\envs\\\\arrow\\\\python.exe', 'setup.py', 'build_ext', '--inplace'],)\r\nkwargs = {'env': {'7ZIP': '\"C:\\\\Program Files\\\\7-Zip\\\\7z.exe\"', 'ALLUSERSPROFILE': 'C:\\\\ProgramData', 'APPDATA': 'C:\\\\Users\\\\appveyor\\\\AppData\\\\Roaming', 'APPVEYOR': 'True', ...}}\r\nretcode = 1\r\ncmd = ['C:\\\\Miniconda37-x64\\\\envs\\\\arrow\\\\python.exe', 'setup.py', 'build_ext', '--inplace']\r\n\u00a0 \u00a0 def check_call(*popenargs, **kwargs):\r\n\u00a0 \u00a0 \u00a0 \u00a0 \"\"\"Run command with arguments. \u00a0Wait for command to complete. \u00a0If\r\n\u00a0 \u00a0 \u00a0 \u00a0 the exit code was zero then return, otherwise raise\r\n\u00a0 \u00a0 \u00a0 \u00a0 CalledProcessError. \u00a0The CalledProcessError object will have the\r\n\u00a0 \u00a0 \u00a0 \u00a0 return code in the returncode attribute.\r\n\u00a0 \u00a0\u00a0\r\n\u00a0 \u00a0 \u00a0 \u00a0 The arguments are the same as for the call function. \u00a0Example:\r\n\u00a0 \u00a0\u00a0\r\n\u00a0 \u00a0 \u00a0 \u00a0 check_call([\"ls\", \"-l\"])\r\n\u00a0 \u00a0 \u00a0 \u00a0 \"\"\"\r\n\u00a0 \u00a0 \u00a0 \u00a0 retcode = call(*popenargs, **kwargs)\r\n\u00a0 \u00a0 \u00a0 \u00a0 if retcode:\r\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 cmd = kwargs.get(\"args\")\r\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 if cmd is None:\r\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 cmd = popenargs[0]\r\n> \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 raise CalledProcessError(retcode, cmd)\r\nE \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 subprocess.CalledProcessError: Command '['C:\\\\Miniconda37-x64\\\\envs\\\\arrow\\\\python.exe', 'setup.py', 'build_ext', '--inplace']' returned non-zero exit status 1.\r\nC:\\Miniconda37-x64\\envs\\arrow\\lib\\subprocess.py:364: CalledProcessError\r\n---------------------------- Captured stdout call -----------------------------\r\nCompiling pyarrow_cython_example.pyx because it changed.\r\n[1/1] Cythonizing pyarrow_cython_example.pyx\r\nExtension module: <setuptools.extension.Extension('pyarrow_cython_example') at 0x2804221ae10> ['C:\\\\Miniconda37-x64\\\\envs\\\\arrow\\\\lib\\\\site-packages\\\\numpy\\\\core\\\\include', 'c:\\\\projects\\\\arrow\\\\python\\\\pyarrow\\\\include'] ['arrow', 'arrow_python'] ['c:\\\\projects\\\\arrow\\\\python\\\\pyarrow', 'C:/Miniconda37-x64/envs/arrow/Library/lib', 'C:\\\\Miniconda37-x64\\\\envs\\\\arrow\\\\Library\\\\lib']\r\nrunning build_ext\r\nbuilding 'pyarrow_cython_example' extension\r\ncreating build\r\ncreating build\\temp.win-amd64-cpython-38\r\ncreating build\\temp.win-amd64-cpython-38\\Release\r\n\"C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC\\Tools\\MSVC\\14.16.27023\\bin\\HostX86\\x64\\cl.exe\" /c /nologo /O2 /W3 /GL /DNDEBUG /MD -IC:\\Miniconda37-x64\\envs\\arrow\\lib\\site-packages\\numpy\\core\\include -Ic:\\projects\\arrow\\python\\pyarrow\\include -IC:\\Miniconda37-x64\\envs\\arrow\\include -IC:\\Miniconda37-x64\\envs\\arrow\\Include \"-IC:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC\\Tools\\MSVC\\14.16.27023\\ATLMFC\\include\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC\\Tools\\MSVC\\14.16.27023\\include\" \"-IC:\\Program Files (x86)\\Windows Kits\\NETFXSDK\\4.6.1\\include\\um\" \"-IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.18362.0\\ucrt\" \"-IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.18362.0\\shared\" \"-IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.18362.0\\um\" \"-IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.18362.0\\winrt\" \"-IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.18362.0\\cppwinrt\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC\\Tools\\MSVC\\14.16.27023\\ATLMFC\\include\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC\\Tools\\MSVC\\14.16.27023\\include\" \"-IC:\\Program Files (x86)\\Windows Kits\\NETFXSDK\\4.6.1\\include\\um\" \"-IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.18362.0\\ucrt\" \"-IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.18362.0\\shared\" \"-IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.18362.0\\um\" \"-IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.18362.0\\winrt\" \"-IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.18362.0\\cppwinrt\" /EHsc /Tppyarrow_cython_example.cpp /Fobuild\\temp.win-amd64-cpython-38\\Release\\pyarrow_cython_example.obj\r\npyarrow_cython_example.cpp\r\nC:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC\\Tools\\MSVC\\14.16.27023\\include\\type_traits(1271): error C2338: You've instantiated std::aligned_storage<Len, Align> with an extended alignment (in other words, Align > alignof(max_align_t)). Before VS 2017 15.8, the member type would non-conformingly have an alignment of only alignof(max_align_t). VS 2017 15.8 was fixed to handle this correctly, but the fix inherently changes layout and breaks binary compatibility (*only* for uses of aligned_storage with extended alignments). Please define either (1) _ENABLE_EXTENDED_ALIGNED_STORAGE to acknowledge that you understand this message and that you actually want a type with an extended alignment, or (2) _DISABLE_EXTENDED_ALIGNED_STORAGE to silence this message and get the old non-conformant behavior.\r\nC:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC\\Tools\\MSVC\\14.16.27023\\include\\type_traits(1291): note: see reference to class template instantiation 'std::_Aligned<192,64,double,false>' being compiled\r\nC:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC\\Tools\\MSVC\\14.16.27023\\include\\type_traits(1298): note: see reference to class template instantiation 'std::_Aligned<192,64,int,false>' being compiled\r\nC:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC\\Tools\\MSVC\\14.16.27023\\include\\type_traits(1305): note: see reference to class template instantiation 'std::_Aligned<192,64,short,false>' being compiled\r\nC:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC\\Tools\\MSVC\\14.16.27023\\include\\type_traits(1312): note: see reference to class template instantiation 'std::_Aligned<192,64,char,false>' being compiled\r\nC:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC\\Tools\\MSVC\\14.16.27023\\include\\type_traits(1320): note: see reference to class template instantiation 'std::aligned_storage<192,64>' being compiled\r\nC:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC\\Tools\\MSVC\\14.16.27023\\include\\type_traits(1352): note: see reference to alias template instantiation 'std::aligned_storage_t<192,64>' being compiled\r\nc:\\projects\\arrow\\python\\pyarrow\\include\\arrow/util/variant.h(132): note: see reference to class template instantiation 'std::aligned_union<0,arrow::ArraySpan,std::shared_ptr<arrow::ArrayData>>' being compiled\r\nc:\\projects\\arrow\\python\\pyarrow\\include\\arrow/util/variant.h(140): note: see reference to class template instantiation 'arrow::util::detail::VariantStorage<arrow::ArraySpan,std::shared_ptr<arrow::ArrayData>>' being compiled\r\nc:\\projects\\arrow\\python\\pyarrow\\include\\arrow/util/variant.h(157): note: see reference to class template instantiation 'arrow::util::detail::VariantImpl<arrow::util::Variant<arrow::ArraySpan,std::shared_ptr<arrow::ArrayData>>>' being compiled\r\nc:\\projects\\arrow\\python\\pyarrow\\include\\arrow/util/variant.h(157): note: see reference to class template instantiation 'arrow::util::detail::VariantImpl<arrow::util::Variant<arrow::ArraySpan,std::shared_ptr<arrow::ArrayData>>,std::shared_ptr<arrow::ArrayData>>' being compiled\r\nc:\\projects\\arrow\\python\\pyarrow\\include\\arrow/util/variant.h(245): note: see reference to class template instantiation 'arrow::util::detail::VariantImpl<arrow::util::Variant<arrow::ArraySpan,std::shared_ptr<arrow::ArrayData>>,arrow::ArraySpan,std::shared_ptr<arrow::ArrayData>>' being compiled\r\nc:\\projects\\arrow\\python\\pyarrow\\include\\arrow/compute/exec.h(313): note: see reference to class template instantiation 'arrow::util::Variant<arrow::ArraySpan,std::shared_ptr<arrow::ArrayData>>' being compiled\r\nc:\\projects\\arrow\\python\\pyarrow\\include\\arrow/vendored/datetime/date.h(182): note: see reference to class template instantiation 'std::chrono::duration<int,std::ratio<86400,1>>' being compiled\r\n---------------------------- Captured stderr call -----------------------------\r\nerror: command 'C:\\\\Program Files (x86)\\\\Microsoft Visual Studio\\\\2017\\\\Community\\\\VC\\\\Tools\\\\MSVC\\\\14.16.27023\\\\bin\\\\HostX86\\\\x64\\\\cl.exe' failed with exit code 2\r\n_____________________________ test_visit_strings ______________________________\r\ntmpdir = local('C:\\\\Users\\\\appveyor\\\\AppData\\\\Local\\\\Temp\\\\1\\\\pytest-of-appveyor\\\\pytest-0\\\\test_visit_strings0')\r\n\u00a0 \u00a0 @pytest.mark.cython\r\n\u00a0 \u00a0 def test_visit_strings(tmpdir):\r\n\u00a0 \u00a0 \u00a0 \u00a0 with tmpdir.as_cwd():\r\n# Set up temporary workspace\r\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 pyx_file = 'bound_function_visit_strings.pyx'\r\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 shutil.copyfile(os.path.join(here, pyx_file),\r\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 os.path.join(str(tmpdir), pyx_file))\r\n# Create setup.py file\r\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 setup_code = setup_template.format(pyx_file=pyx_file,\r\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0compiler_opts=compiler_opts,\r\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0test_ld_path=test_ld_path)\r\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 with open('setup.py', 'w') as f:\r\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 f.write(setup_code)\r\n\u00a0 \u00a0\u00a0\r\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 subprocess_env = test_util.get_modified_env_with_pythonpath()\r\n\u00a0 \u00a0\u00a0\r\n# Compile extension module\r\n> \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 subprocess.check_call([sys.executable, 'setup.py',\r\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0'build_ext', '--inplace'],\r\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 env=subprocess_env)\r\npyarrow\\tests\\test_cython.py:162:\u00a0\r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\r\npopenargs = (['C:\\\\Miniconda37-x64\\\\envs\\\\arrow\\\\python.exe', 'setup.py', 'build_ext', '--inplace'],)\r\nkwargs = {'env': {'7ZIP': '\"C:\\\\Program Files\\\\7-Zip\\\\7z.exe\"', 'ALLUSERSPROFILE': 'C:\\\\ProgramData', 'APPDATA': 'C:\\\\Users\\\\appveyor\\\\AppData\\\\Roaming', 'APPVEYOR': 'True', ...}}\r\nretcode = 1\r\ncmd = ['C:\\\\Miniconda37-x64\\\\envs\\\\arrow\\\\python.exe', 'setup.py', 'build_ext', '--inplace']\r\n\u00a0 \u00a0 def check_call(*popenargs, **kwargs):\r\n\u00a0 \u00a0 \u00a0 \u00a0 \"\"\"Run command with arguments. \u00a0Wait for command to complete. \u00a0If\r\n\u00a0 \u00a0 \u00a0 \u00a0 the exit code was zero then return, otherwise raise\r\n\u00a0 \u00a0 \u00a0 \u00a0 CalledProcessError. \u00a0The CalledProcessError object will have the\r\n\u00a0 \u00a0 \u00a0 \u00a0 return code in the returncode attribute.\r\n\u00a0 \u00a0\u00a0\r\n\u00a0 \u00a0 \u00a0 \u00a0 The arguments are the same as for the call function. \u00a0Example:\r\n\u00a0 \u00a0\u00a0\r\n\u00a0 \u00a0 \u00a0 \u00a0 check_call([\"ls\", \"-l\"])\r\n\u00a0 \u00a0 \u00a0 \u00a0 \"\"\"\r\n\u00a0 \u00a0 \u00a0 \u00a0 retcode = call(*popenargs, **kwargs)\r\n\u00a0 \u00a0 \u00a0 \u00a0 if retcode:\r\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 cmd = kwargs.get(\"args\")\r\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 if cmd is None:\r\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 cmd = popenargs[0]\r\n> \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 raise CalledProcessError(retcode, cmd)\r\nE \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 subprocess.CalledProcessError: Command '['C:\\\\Miniconda37-x64\\\\envs\\\\arrow\\\\python.exe', 'setup.py', 'build_ext', '--inplace']' returned non-zero exit status 1.\r\nC:\\Miniconda37-x64\\envs\\arrow\\lib\\subprocess.py:364: CalledProcessError\r\n---------------------------- Captured stdout call -----------------------------\r\nCompiling bound_function_visit_strings.pyx because it changed.\r\n[1/1] Cythonizing bound_function_visit_strings.pyx\r\nExtension module: <setuptools.extension.Extension('bound_function_visit_strings') at 0x28ba9d0df00> ['C:\\\\Miniconda37-x64\\\\envs\\\\arrow\\\\lib\\\\site-packages\\\\numpy\\\\core\\\\include', 'c:\\\\projects\\\\arrow\\\\python\\\\pyarrow\\\\include'] ['arrow', 'arrow_python'] ['c:\\\\projects\\\\arrow\\\\python\\\\pyarrow', 'C:/Miniconda37-x64/envs/arrow/Library/lib', 'C:\\\\Miniconda37-x64\\\\envs\\\\arrow\\\\Library\\\\lib']\r\nrunning build_ext\r\nbuilding 'bound_function_visit_strings' extension\r\ncreating build\r\ncreating build\\temp.win-amd64-cpython-38\r\ncreating build\\temp.win-amd64-cpython-38\\Release\r\n\"C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC\\Tools\\MSVC\\14.16.27023\\bin\\HostX86\\x64\\cl.exe\" /c /nologo /O2 /W3 /GL /DNDEBUG /MD -IC:\\Miniconda37-x64\\envs\\arrow\\lib\\site-packages\\numpy\\core\\include -Ic:\\projects\\arrow\\python\\pyarrow\\include -IC:\\Miniconda37-x64\\envs\\arrow\\include -IC:\\Miniconda37-x64\\envs\\arrow\\Include \"-IC:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC\\Tools\\MSVC\\14.16.27023\\ATLMFC\\include\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC\\Tools\\MSVC\\14.16.27023\\include\" \"-IC:\\Program Files (x86)\\Windows Kits\\NETFXSDK\\4.6.1\\include\\um\" \"-IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.18362.0\\ucrt\" \"-IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.18362.0\\shared\" \"-IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.18362.0\\um\" \"-IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.18362.0\\winrt\" \"-IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.18362.0\\cppwinrt\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC\\Tools\\MSVC\\14.16.27023\\ATLMFC\\include\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC\\Tools\\MSVC\\14.16.27023\\include\" \"-IC:\\Program Files (x86)\\Windows Kits\\NETFXSDK\\4.6.1\\include\\um\" \"-IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.18362.0\\ucrt\" \"-IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.18362.0\\shared\" \"-IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.18362.0\\um\" \"-IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.18362.0\\winrt\" \"-IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.18362.0\\cppwinrt\" /EHsc /Tpbound_function_visit_strings.cpp /Fobuild\\temp.win-amd64-cpython-38\\Release\\bound_function_visit_strings.obj\r\nbound_function_visit_strings.cpp\r\nC:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC\\Tools\\MSVC\\14.16.27023\\include\\type_traits(1271): error C2338: You've instantiated std::aligned_storage<Len, Align> with an extended alignment (in other words, Align > alignof(max_align_t)). Before VS 2017 15.8, the member type would non-conformingly have an alignment of only alignof(max_align_t). VS 2017 15.8 was fixed to handle this correctly, but the fix inherently changes layout and breaks binary compatibility (*only* for uses of aligned_storage with extended alignments). Please define either (1) _ENABLE_EXTENDED_ALIGNED_STORAGE to acknowledge that you understand this message and that you actually want a type with an extended alignment, or (2) _DISABLE_EXTENDED_ALIGNED_STORAGE to silence this message and get the old non-conformant behavior.\r\nC:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC\\Tools\\MSVC\\14.16.27023\\include\\type_traits(1291): note: see reference to class template instantiation 'std::_Aligned<192,64,double,false>' being compiled\r\nC:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC\\Tools\\MSVC\\14.16.27023\\include\\type_traits(1298): note: see reference to class template instantiation 'std::_Aligned<192,64,int,false>' being compiled\r\nC:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC\\Tools\\MSVC\\14.16.27023\\include\\type_traits(1305): note: see reference to class template instantiation 'std::_Aligned<192,64,short,false>' being compiled\r\nC:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC\\Tools\\MSVC\\14.16.27023\\include\\type_traits(1312): note: see reference to class template instantiation 'std::_Aligned<192,64,char,false>' being compiled\r\nC:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC\\Tools\\MSVC\\14.16.27023\\include\\type_traits(1320): note: see reference to class template instantiation 'std::aligned_storage<192,64>' being compiled\r\nC:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC\\Tools\\MSVC\\14.16.27023\\include\\type_traits(1352): note: see reference to alias template instantiation 'std::aligned_storage_t<192,64>' being compiled\r\nc:\\projects\\arrow\\python\\pyarrow\\include\\arrow/util/variant.h(132): note: see reference to class template instantiation 'std::aligned_union<0,arrow::ArraySpan,std::shared_ptr<arrow::ArrayData>>' being compiled\r\nc:\\projects\\arrow\\python\\pyarrow\\include\\arrow/util/variant.h(140): note: see reference to class template instantiation 'arrow::util::detail::VariantStorage<arrow::ArraySpan,std::shared_ptr<arrow::ArrayData>>' being compiled\r\nc:\\projects\\arrow\\python\\pyarrow\\include\\arrow/util/variant.h(157): note: see reference to class template instantiation 'arrow::util::detail::VariantImpl<arrow::util::Variant<arrow::ArraySpan,std::shared_ptr<arrow::ArrayData>>>' being compiled\r\nc:\\projects\\arrow\\python\\pyarrow\\include\\arrow/util/variant.h(157): note: see reference to class template instantiation 'arrow::util::detail::VariantImpl<arrow::util::Variant<arrow::ArraySpan,std::shared_ptr<arrow::ArrayData>>,std::shared_ptr<arrow::ArrayData>>' being compiled\r\nc:\\projects\\arrow\\python\\pyarrow\\include\\arrow/util/variant.h(245): note: see reference to class template instantiation 'arrow::util::detail::VariantImpl<arrow::util::Variant<arrow::ArraySpan,std::shared_ptr<arrow::ArrayData>>,arrow::ArraySpan,std::shared_ptr<arrow::ArrayData>>' being compiled\r\nc:\\projects\\arrow\\python\\pyarrow\\include\\arrow/compute/exec.h(313): note: see reference to class template instantiation 'arrow::util::Variant<arrow::ArraySpan,std::shared_ptr<arrow::ArrayData>>' being compiled\r\nc:\\projects\\arrow\\python\\pyarrow\\include\\arrow/vendored/datetime/date.h(182): note: see reference to class template instantiation 'std::chrono::duration<int,std::ratio<86400,1>>' being compiled\r\n---------------------------- Captured stderr call -----------------------------\r\nerror: command 'C:\\\\Program Files (x86)\\\\Microsoft Visual Studio\\\\2017\\\\Community\\\\VC\\\\Tools\\\\MSVC\\\\14.16.27023\n```\r\nIt seems to have been failing on master since this was merged <https://github.com/apache/arrow/commit/6cc37cf2d1ba72c46b64fbc7ac499bd0d7296d20>",
        "created_at": "2022-07-08T09:56:45.000Z",
        "updated_at": "2022-07-08T19:25:28.000Z",
        "labels": [
            "Migrated from Jira",
            "Component: Continuous Integration",
            "Component: Python",
            "Type: bug"
        ],
        "closed": true,
        "closed_at": "2022-07-08T19:25:28.000Z"
    },
    "comments": [
        {
            "created_at": "2022-07-08T19:25:28.430Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-17014?focusedCommentId=17564438) by David Li (lidavidm):*\nIssue resolved by pull request 13549\n<https://github.com/apache/arrow/pull/13549>"
        }
    ]
}