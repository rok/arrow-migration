{
    "issue": {
        "title": "[R] bindings for lubridate's year, isoyear, quarter, month, day, wday, yday, isoweek, hour, minute, and second functions",
        "body": "***Note**: This issue was originally created as [ARROW-13022](https://issues.apache.org/jira/browse/ARROW-13022). Please see the [migration documentation](https://gist.github.com/toddfarmer/12aa88361532d21902818a6044fda4c3) for further details.*\n\n### Original Issue Description:\n",
        "created_at": "2021-06-09T14:02:35.000Z",
        "updated_at": "2021-11-24T11:56:20.000Z",
        "labels": [
            "Migrated from Jira",
            "Component: R",
            "Type: task"
        ],
        "closed": true,
        "closed_at": "2021-06-24T15:16:48.000Z"
    },
    "comments": [
        {
            "created_at": "2021-06-24T15:16:48.536Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-13022?focusedCommentId=17368925) by Neal Richardson (npr):*\nIssue resolved by pull request 10507\n<https://github.com/apache/arrow/pull/10507>"
        },
        {
            "created_at": "2021-10-05T15:51:49.723Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-13022?focusedCommentId=17424542) by Jameel Alsalam (jalsalam):*\nIs it expected behavior that the lubridate functions like year() are implemented for datetimes but not dates? (or perhaps this is a windows-specific issue I'm having, though I don't think it would be related to timezones)\r\n\r\n``` r\r\nlibrary(arrow)\r\n#> \r\n#> Attaching package: 'arrow'\r\n#> The following object is masked from 'package:utils':\r\n#> \r\n#> timestamp\r\nsuppressPackageStartupMessages(library(dplyr))\r\nsuppressPackageStartupMessages(library(tibble))\r\nlibrary(lubridate, warn.conflicts = FALSE)\r\n\r\ntest_date <- as.POSIXct(\"2017-01-01 00:00:12.3456789\", tz = \"\")\r\n\r\ntest_df <- tibble::tibble(\r\n datetime = c(test_date, NA),\r\n date = c(as.Date(\"2017-01-01\"), NA)\r\n)\r\n\r\nar <- Table$create(test_df)\r\n\r\nar %>%\r\n mutate(yr_dt = year(datetime)) %>%\r\n pull(yr_dt)\r\n#> [1] 2017 NA\r\nar %>%\r\n mutate(yr_d = year(date)) %>%\r\n pull(yr_d)\r\n#> Error: NotImplemented: Function year has no kernel matching input types (array[date32[day]])\r\nar %>%\r\n mutate(mo_dt = month(datetime)) %>%\r\n pull(mo_dt)\r\n#> [1] 1 NA\r\nar %>%\r\n mutate(mo_d = month(date)) %>%\r\n pull(mo_d)\r\n#> Error: NotImplemented: Function month has no kernel matching input types (array[date32[day]])\r\n```\r\n\r\n<sup>Created on 2021-10-05 by the [reprex package](https://reprex.tidyverse.org) (v2.0.1)</sup>\r\n\r\n<details style=\"margin-bottom:10px;\">\r\n<summary>\r\nSession info\r\n</summary>\r\n\r\n``` r\r\nsessioninfo::session_info()\r\n#> - Session info ---------------------------------------------------------------\r\n#> setting value \r\n#> version R version 4.0.5 (2021-03-31)\r\n#> os Windows 10 x64 \r\n#> system x86_64, mingw32 \r\n#> ui RTerm \r\n#> language (EN) \r\n#> collate English_United States.1252 \r\n#> ctype English_United States.1252 \r\n#> tz America/New_York \r\n#> date 2021-10-05 \r\n#> \r\n#> - Packages -------------------------------------------------------------------\r\n#> package \\* version date lib source \r\n#> arrow \\* 5.0.0.2 2021-09-05 [1] CRAN (R 4.0.5)\r\n#> assertthat 0.2.1 2019-03-21 [1] CRAN (R 4.0.5)\r\n#> bit 4.0.4 2020-08-04 [1] CRAN (R 4.0.5)\r\n#> bit64 4.0.5 2020-08-30 [1] CRAN (R 4.0.5)\r\n#> cli 3.0.1 2021-07-17 [1] CRAN (R 4.0.5)\r\n#> crayon 1.4.1 2021-02-08 [1] CRAN (R 4.0.5)\r\n#> DBI 1.1.1 2021-01-15 [1] CRAN (R 4.0.5)\r\n#> digest 0.6.27 2020-10-24 [1] CRAN (R 4.0.5)\r\n#> dplyr \\* 1.0.7 2021-06-18 [1] CRAN (R 4.0.5)\r\n#> ellipsis 0.3.2 2021-04-29 [1] CRAN (R 4.0.5)\r\n#> evaluate 0.14 2019-05-28 [1] CRAN (R 4.0.5)\r\n#> fansi 0.5.0 2021-05-25 [1] CRAN (R 4.0.5)\r\n#> fastmap 1.1.0 2021-01-25 [1] CRAN (R 4.0.5)\r\n#> fs 1.5.0 2020-07-31 [1] CRAN (R 4.0.5)\r\n#> generics 0.1.0 2020-10-31 [1] CRAN (R 4.0.5)\r\n#> glue 1.4.2 2020-08-27 [1] CRAN (R 4.0.5)\r\n#> highr 0.9 2021-04-16 [1] CRAN (R 4.0.5)\r\n#> htmltools 0.5.2 2021-08-25 [1] CRAN (R 4.0.5)\r\n#> knitr 1.34 2021-09-09 [1] CRAN (R 4.0.5)\r\n#> lifecycle 1.0.0 2021-02-15 [1] CRAN (R 4.0.5)\r\n#> lubridate \\* 1.7.10 2021-02-26 [1] CRAN (R 4.0.5)\r\n#> magrittr 2.0.1 2020-11-17 [1] CRAN (R 4.0.5)\r\n#> pillar 1.6.2 2021-07-29 [1] CRAN (R 4.0.5)\r\n#> pkgconfig 2.0.3 2019-09-22 [1] CRAN (R 4.0.5)\r\n#> purrr 0.3.4 2020-04-17 [1] CRAN (R 4.0.5)\r\n#> R6 2.5.1 2021-08-19 [1] CRAN (R 4.0.5)\r\n#> Rcpp 1.0.7 2021-07-07 [1] CRAN (R 4.0.5)\r\n#> reprex 2.0.1 2021-08-05 [1] CRAN (R 4.0.5)\r\n#> rlang 0.4.11 2021-04-30 [1] CRAN (R 4.0.5)\r\n#> rmarkdown 2.11 2021-09-14 [1] CRAN (R 4.0.5)\r\n#> rstudioapi 0.13 2020-11-12 [1] CRAN (R 4.0.5)\r\n#> sessioninfo 1.1.1 2018-11-05 [1] CRAN (R 4.0.5)\r\n#> stringi 1.7.4 2021-08-25 [1] CRAN (R 4.0.5)\r\n#> stringr 1.4.0 2019-02-10 [1] CRAN (R 4.0.5)\r\n#> tibble \\* 3.1.4 2021-08-25 [1] CRAN (R 4.0.5)\r\n#> tidyselect 1.1.1 2021-04-30 [1] CRAN (R 4.0.5)\r\n#> utf8 1.2.2 2021-07-24 [1] CRAN (R 4.0.5)\r\n#> vctrs 0.3.8 2021-04-29 [1] CRAN (R 4.0.5)\r\n#> withr 2.4.2 2021-04-18 [1] CRAN (R 4.0.5)\r\n#> xfun 0.26 2021-09-14 [1] CRAN (R 4.0.5)\r\n#> yaml 2.2.1 2020-02-01 [1] CRAN (R 4.0.5)\r\n#> \r\n#> [1] C:/Users/jalsal02/R/win-library/4.0\r\n#> [2] C:/Program Files/R/R-4.0.5/library\r\n```\r\n\r\n</details>"
        },
        {
            "created_at": "2021-10-05T16:11:20.966Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-13022?focusedCommentId=17424553) by Neal Richardson (npr):*\n`[~jalsalam]` I believe we added date support after 5.0.0, can you try installing a nightly version of the R package and see if it works for you?"
        },
        {
            "created_at": "2021-10-05T16:21:33.559Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-13022?focusedCommentId=17424557) by Rok Mihevc (rokm):*\nI believe this was done with ARROW-13138\u00a0and would indeed not be available in 5.0.0.\r\n\r\nYour issue would not be related to timezones since date doesn't have them."
        },
        {
            "created_at": "2021-10-05T16:30:17.544Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-13022?focusedCommentId=17424564) by Jameel Alsalam (jalsalam):*\n`[~npr]` \u00a0For me with nightly installed I am seeing the same behavior (nightly showing for me as R package version 5.0.0.2). Also tested here via call_function.\r\n\r\n\u00a0\r\n\r\n``` r\r\n1. install.packages(\"arrow\", repos = \"https://arrow-r-nightly.s3.amazonaws.com\")\n   packageVersion(\"arrow\")\n#> [1] '5.0.0.2'\r\n\r\nlibrary(arrow)\r\n#> \r\n#> Attaching package: 'arrow'\r\n#> The following object is masked from 'package:utils':\r\n#> \r\n#> timestamp\r\nsuppressPackageStartupMessages(library(dplyr))\r\nsuppressPackageStartupMessages(library(lubridate))\r\n\r\ntest_date <- as.POSIXct(\"2017-01-01 00:00:12.3456789\", tz = \"\")\r\n\r\ntest_df <- tibble::tibble(\r\n datetime = c(test_date, NA),\r\n date = c(as.Date(\"2017-01-01\"), NA)\r\n)\r\n\r\nar <- Table$create(test_df)\r\n\r\nar %>% mutate(yr_d = year(date))\r\n#> Error: NotImplemented: Function year has no kernel matching input types (array[date32[day]])\r\nar %>% mutate(mo_d = month(date))\r\n#> Error: NotImplemented: Function month has no kernel matching input types (array[date32[day]])\r\n\r\nar_date <- Array$create(as.Date(\"2017-01-01\"))\r\n\r\ncall_function(\"year\", ar_date)\r\n#> Error: NotImplemented: Function year has no kernel matching input types (array[date32[day]])\r\ncall_function(\"month\", ar_date)\r\n#> Error: NotImplemented: Function month has no kernel matching input types (array[date32[day]])\r\n```\r\n\r\n<sup>Created on 2021-10-05 by the [reprex package](https://reprex.tidyverse.org) (v2.0.1)</sup>\r\n\r\n<details style=\"margin-bottom:10px;\">\r\n<summary>\r\nSession info\r\n</summary>\r\n\r\n``` r\r\nsessionInfo()\r\n#> R version 4.0.5 (2021-03-31)\r\n#> Platform: x86_64-w64-mingw32/x64 (64-bit)\r\n#> Running under: Windows 10 x64 (build 18363)\r\n#> \r\n#> Matrix products: default\r\n#> \r\n#> locale:\r\n#> [1] LC_COLLATE=English_United States.1252 \r\n#> [2] LC_CTYPE=English_United States.1252 \r\n#> [3] LC_MONETARY=English_United States.1252\r\n#> [4] LC_NUMERIC=C \r\n#> [5] LC_TIME=English_United States.1252 \r\n#> \r\n#> attached base packages:\r\n#> [1] stats graphics grDevices utils datasets methods base \r\n#> \r\n#> other attached packages:\r\n#> [1] lubridate_1.7.10 dplyr_1.0.7 arrow_5.0.0.2 \r\n#> \r\n#> loaded via a namespace (and not attached):\r\n#> [1] Rcpp_1.0.7 compiler_4.0.5 pillar_1.6.3 highr_0.9 \r\n#> [5] tools_4.0.5 digest_0.6.28 bit_4.0.4 evaluate_0.14 \r\n#> [9] lifecycle_1.0.1 tibble_3.1.5 pkgconfig_2.0.3 rlang_0.4.11 \r\n#> [13] reprex_2.0.1 cli_3.0.1 DBI_1.1.1 rstudioapi_0.13 \r\n#> [17] yaml_2.2.1 xfun_0.26 fastmap_1.1.0 withr_2.4.2 \r\n#> [21] stringr_1.4.0 knitr_1.36 generics_0.1.0 fs_1.5.0 \r\n#> [25] vctrs_0.3.8 bit64_4.0.5 tidyselect_1.1.1 glue_1.4.2 \r\n#> [29] R6_2.5.1 fansi_0.5.0 rmarkdown_2.11 purrr_0.3.4 \r\n#> [33] magrittr_2.0.1 htmltools_0.5.2 ellipsis_0.3.2 assertthat_0.2.1\r\n#> [37] utf8_1.2.2 stringi_1.7.4 crayon_1.4.1\r\n```\r\n\r\n</details>"
        },
        {
            "created_at": "2021-10-05T16:35:34.643Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-13022?focusedCommentId=17424568) by Rok Mihevc (rokm):*\nI\u00a0 am not really familiar with R nightly builds, but you will need a 6.0.0 release to get component extraction on date."
        },
        {
            "created_at": "2021-10-05T16:43:48.487Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-13022?focusedCommentId=17424575) by Jameel Alsalam (jalsalam):*\nOkay, sounds like it has to do with my version! Thanks."
        },
        {
            "created_at": "2021-10-05T18:13:00.000Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-13022?focusedCommentId=17424638) by Neal Richardson (npr):*\n`packageVersion(\"arrow\")` says you're still on 5.0.0.2. Anyway I just confirmed that this is resolved in master so will be released in 6.0.0 in the next couple of weeks. "
        },
        {
            "created_at": "2021-10-05T18:24:11.791Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-13022?focusedCommentId=17424641) by Jameel Alsalam (jalsalam):*\n`[~npr]` \u00a0Yes, I apologize\u00a0\u2013 I thought I had successfully installed nightly, but I had not. I have now done so and verified that the date component functions are working as expected.\u00a0"
        }
    ]
}