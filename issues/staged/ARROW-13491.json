{
    "issue": {
        "title": "R/arrow compilation error for r_to_arrow",
        "body": "***Note**: This issue was originally created as [ARROW-13491](https://issues.apache.org/jira/browse/ARROW-13491). Please see the [migration documentation](https://gist.github.com/toddfarmer/12aa88361532d21902818a6044fda4c3) for further details.*\n\n### Original Issue Description:\nI successfully installed the C++ and Glib packages on my CentOS 7 server according to <https://arrow.apache.org/install/>\r\n\r\n\u00a0\r\n\r\n\u00a0\r\n```java\n\r\n> install.packages(\"arrow\")\r\n\r\nInstalling package into \u2018/opt/appdisk/lib/R/x86_64-pc-linux-gnu-library/4.0\u2019\r\n (as \u2018lib\u2019 is unspecified)trying URL 'https://cran.rstudio.com/src/contrib/arrow_5.0.0.tar.gz'Content type 'application/x-gzip' length 463913 bytes (453 KB)==================================================downloaded 453 KB* installing source package \u2018arrow\u2019 ...** package \u2018arrow\u2019 successfully unpacked and MD5 sums checked\r\n\r\nusing staged installation*** Arrow C++ libraries found via pkg-config at\r\n PKG_CFLAGS= -DARROW_R_WITH_ARROW\r\n PKG_LIBS= -larrow -fno-lto** libsg++ -std=gnu++11 -I\"/opt/R/4.0.1/lib/R/include\" -DNDEBUG -DARROW_R_WITH_ARROW -I'/opt/appdisk/lib/R/x86_64-pc-linux-gnu-library/4.0/cpp11/include' -I/usr/local/include -fpic -g -O2 -c RTasks.cpp -o RTasks.o\r\n g++ -std=gnu++11 -I\"/opt/R/4.0.1/lib/R/include\" -DNDEBUG -DARROW_R_WITH_ARROW -I'/opt/appdisk/lib/R/x86_64-pc-linux-gnu-library/4.0/cpp11/include' -I/usr/local/include -fpic -g -O2 -c altrep.cpp -o altrep.o\r\n g++ -std=gnu++11 -I\"/opt/R/4.0.1/lib/R/include\" -DNDEBUG -DARROW_R_WITH_ARROW -I'/opt/appdisk/lib/R/x86_64-pc-linux-gnu-library/4.0/cpp11/include' -I/usr/local/include -fpic -g -O2 -c array.cpp -o array.o\r\n g++ -std=gnu++11 -I\"/opt/R/4.0.1/lib/R/include\" -DNDEBUG -DARROW_R_WITH_ARROW -I'/opt/appdisk/lib/R/x86_64-pc-linux-gnu-library/4.0/cpp11/include' -I/usr/local/include -fpic -g -O2 -c array_to_vector.cpp -o array_to_vector.o\r\n g++ -std=gnu++11 -I\"/opt/R/4.0.1/lib/R/include\" -DNDEBUG -DARROW_R_WITH_ARROW -I'/opt/appdisk/lib/R/x86_64-pc-linux-gnu-library/4.0/cpp11/include' -I/usr/local/include -fpic -g -O2 -c arraydata.cpp -o arraydata.o\r\n g++ -std=gnu++11 -I\"/opt/R/4.0.1/lib/R/include\" -DNDEBUG -DARROW_R_WITH_ARROW -I'/opt/appdisk/lib/R/x86_64-pc-linux-gnu-library/4.0/cpp11/include' -I/usr/local/include -fpic -g -O2 -c arrowExports.cpp -o arrowExports.o\r\n g++ -std=gnu++11 -I\"/opt/R/4.0.1/lib/R/include\" -DNDEBUG -DARROW_R_WITH_ARROW -I'/opt/appdisk/lib/R/x86_64-pc-linux-gnu-library/4.0/cpp11/include' -I/usr/local/include -fpic -g -O2 -c buffer.cpp -o buffer.o\r\n g++ -std=gnu++11 -I\"/opt/R/4.0.1/lib/R/include\" -DNDEBUG -DARROW_R_WITH_ARROW -I'/opt/appdisk/lib/R/x86_64-pc-linux-gnu-library/4.0/cpp11/include' -I/usr/local/include -fpic -g -O2 -c chunkedarray.cpp -o chunkedarray.o\r\n g++ -std=gnu++11 -I\"/opt/R/4.0.1/lib/R/include\" -DNDEBUG -DARROW_R_WITH_ARROW -I'/opt/appdisk/lib/R/x86_64-pc-linux-gnu-library/4.0/cpp11/include' -I/usr/local/include -fpic -g -O2 -c compression.cpp -o compression.o\r\n g++ -std=gnu++11 -I\"/opt/R/4.0.1/lib/R/include\" -DNDEBUG -DARROW_R_WITH_ARROW -I'/opt/appdisk/lib/R/x86_64-pc-linux-gnu-library/4.0/cpp11/include' -I/usr/local/include -fpic -g -O2 -c compute.cpp -o compute.o\r\n g++ -std=gnu++11 -I\"/opt/R/4.0.1/lib/R/include\" -DNDEBUG -DARROW_R_WITH_ARROW -I'/opt/appdisk/lib/R/x86_64-pc-linux-gnu-library/4.0/cpp11/include' -I/usr/local/include -fpic -g -O2 -c config.cpp -o config.o\r\n g++ -std=gnu++11 -I\"/opt/R/4.0.1/lib/R/include\" -DNDEBUG -DARROW_R_WITH_ARROW -I'/opt/appdisk/lib/R/x86_64-pc-linux-gnu-library/4.0/cpp11/include' -I/usr/local/include -fpic -g -O2 -c csv.cpp -o csv.o\r\n g++ -std=gnu++11 -I\"/opt/R/4.0.1/lib/R/include\" -DNDEBUG -DARROW_R_WITH_ARROW -I'/opt/appdisk/lib/R/x86_64-pc-linux-gnu-library/4.0/cpp11/include' -I/usr/local/include -fpic -g -O2 -c dataset.cpp -o dataset.o\r\n g++ -std=gnu++11 -I\"/opt/R/4.0.1/lib/R/include\" -DNDEBUG -DARROW_R_WITH_ARROW -I'/opt/appdisk/lib/R/x86_64-pc-linux-gnu-library/4.0/cpp11/include' -I/usr/local/include -fpic -g -O2 -c datatype.cpp -o datatype.o\r\n g++ -std=gnu++11 -I\"/opt/R/4.0.1/lib/R/include\" -DNDEBUG -DARROW_R_WITH_ARROW -I'/opt/appdisk/lib/R/x86_64-pc-linux-gnu-library/4.0/cpp11/include' -I/usr/local/include -fpic -g -O2 -c expression.cpp -o expression.o\r\n g++ -std=gnu++11 -I\"/opt/R/4.0.1/lib/R/include\" -DNDEBUG -DARROW_R_WITH_ARROW -I'/opt/appdisk/lib/R/x86_64-pc-linux-gnu-library/4.0/cpp11/include' -I/usr/local/include -fpic -g -O2 -c feather.cpp -o feather.o\r\n g++ -std=gnu++11 -I\"/opt/R/4.0.1/lib/R/include\" -DNDEBUG -DARROW_R_WITH_ARROW -I'/opt/appdisk/lib/R/x86_64-pc-linux-gnu-library/4.0/cpp11/include' -I/usr/local/include -fpic -g -O2 -c field.cpp -o field.o\r\n g++ -std=gnu++11 -I\"/opt/R/4.0.1/lib/R/include\" -DNDEBUG -DARROW_R_WITH_ARROW -I'/opt/appdisk/lib/R/x86_64-pc-linux-gnu-library/4.0/cpp11/include' -I/usr/local/include -fpic -g -O2 -c filesystem.cpp -o filesystem.o\r\n g++ -std=gnu++11 -I\"/opt/R/4.0.1/lib/R/include\" -DNDEBUG -DARROW_R_WITH_ARROW -I'/opt/appdisk/lib/R/x86_64-pc-linux-gnu-library/4.0/cpp11/include' -I/usr/local/include -fpic -g -O2 -c imports.cpp -o imports.o\r\n g++ -std=gnu++11 -I\"/opt/R/4.0.1/lib/R/include\" -DNDEBUG -DARROW_R_WITH_ARROW -I'/opt/appdisk/lib/R/x86_64-pc-linux-gnu-library/4.0/cpp11/include' -I/usr/local/include -fpic -g -O2 -c io.cpp -o io.o\r\n g++ -std=gnu++11 -I\"/opt/R/4.0.1/lib/R/include\" -DNDEBUG -DARROW_R_WITH_ARROW -I'/opt/appdisk/lib/R/x86_64-pc-linux-gnu-library/4.0/cpp11/include' -I/usr/local/include -fpic -g -O2 -c json.cpp -o json.o\r\n g++ -std=gnu++11 -I\"/opt/R/4.0.1/lib/R/include\" -DNDEBUG -DARROW_R_WITH_ARROW -I'/opt/appdisk/lib/R/x86_64-pc-linux-gnu-library/4.0/cpp11/include' -I/usr/local/include -fpic -g -O2 -c memorypool.cpp -o memorypool.o\r\n g++ -std=gnu++11 -I\"/opt/R/4.0.1/lib/R/include\" -DNDEBUG -DARROW_R_WITH_ARROW -I'/opt/appdisk/lib/R/x86_64-pc-linux-gnu-library/4.0/cpp11/include' -I/usr/local/include -fpic -g -O2 -c message.cpp -o message.o\r\n g++ -std=gnu++11 -I\"/opt/R/4.0.1/lib/R/include\" -DNDEBUG -DARROW_R_WITH_ARROW -I'/opt/appdisk/lib/R/x86_64-pc-linux-gnu-library/4.0/cpp11/include' -I/usr/local/include -fpic -g -O2 -c parquet.cpp -o parquet.o\r\n g++ -std=gnu++11 -I\"/opt/R/4.0.1/lib/R/include\" -DNDEBUG -DARROW_R_WITH_ARROW -I'/opt/appdisk/lib/R/x86_64-pc-linux-gnu-library/4.0/cpp11/include' -I/usr/local/include -fpic -g -O2 -c py-to-r.cpp -o py-to-r.o\r\n g++ -std=gnu++11 -I\"/opt/R/4.0.1/lib/R/include\" -DNDEBUG -DARROW_R_WITH_ARROW -I'/opt/appdisk/lib/R/x86_64-pc-linux-gnu-library/4.0/cpp11/include' -I/usr/local/include -fpic -g -O2 -c r_to_arrow.cpp -o r_to_arrow.or_to_arrow.cpp: In instantiation of \u2018const T arrow::r::RVectorIterator_ALTREP<T>::operator*() const [with T = double]\u2019:\r\n r_to_arrow.cpp:229:18: required from \u2018arrow::Status arrow::r::VisitVector(Iterator, int64_t, AppendNull&&, AppendValue&&) [with Iterator = arrow::r::RVectorIterator_ALTREP<double>; AppendNull = arrow::r::RPrimitiveConverter<T, typename std::enable_if<std::is_base_of<arrow::TimeType, T>::value, void>::type>::Extend(SEXP, int64_t, int64_t) [with T = arrow::Time64Type; typename std::enable_if<std::is_base_of<arrow::TimeType, T>::value, void>::type = void; SEXP = SEXPREC*; int64_t = long int]::_lambda74&; AppendValue = arrow::r::RPrimitiveConverter<T, typename std::enable_if<std::is_base_of<arrow::TimeType, T>::value, void>::type>::Extend(SEXP, int64_t, int64_t) [with T = arrow::Time64Type; typename std::enable_if<std::is_base_of<arrow::TimeType, T>::value, void>::type = void; SEXP = SEXPREC*; int64_t = long int]::_lambda75&; int64_t = long int]\u2019\r\n r_to_arrow.cpp:621:38: required from \u2018arrow::Status arrow::r::RPrimitiveConverter<T, typename std::enable_if<std::is_base_of<arrow::TimeType, T>::value, void>::type>::Extend(SEXP, int64_t, int64_t) [with T = arrow::Time64Type; typename std::enable_if<std::is_base_of<arrow::TimeType, T>::value, void>::type = void; SEXP = SEXPREC*; int64_t = long int]\u2019\r\n r_to_arrow.cpp:1458:1: required from here\r\n r_to_arrow.cpp:209:47: error: passing \u2018const r_vector_iterator {aka const cpp11::r_vector<double>::const_iterator}\u2019 as \u2018this\u2019 argument of \u2018T cpp11::r_vector<T>::const_iterator::operator*() [with T = double]\u2019 discards qualifiers [-fpermissive]\r\n const T operator*() const { return GetValue(*it_); }\r\n ^r_to_arrow.cpp: In instantiation of \u2018const T arrow::r::RVectorIterator_ALTREP<T>::operator*() const [with T = cpp11::r_bool]\u2019:\r\n r_to_arrow.cpp:229:18: required from \u2018arrow::Status arrow::r::VisitVector(Iterator, int64_t, AppendNull&&, AppendValue&&) [with Iterator = arrow::r::RVectorIterator_ALTREP<cpp11::r_bool>; AppendNull = arrow::r::RPrimitiveConverter<T, typename std::enable_if<std::is_same<arrow::BooleanType, T>::value, void>::type>::Extend_impl(Iterator, int64_t) [with Iterator = arrow::r::RVectorIterator_ALTREP<cpp11::r_bool>; T = arrow::BooleanType; typename std::enable_if<std::is_same<arrow::BooleanType, T>::value, void>::type = void; int64_t = long int]::_lambda67&; AppendValue = arrow::r::RPrimitiveConverter<T, typename std::enable_if<std::is_same<arrow::BooleanType, T>::value, void>::type>::Extend_impl(Iterator, int64_t) [with Iterator = arrow::r::RVectorIterator_ALTREP<cpp11::r_bool>; T = arrow::BooleanType; typename std::enable_if<std::is_same<arrow::BooleanType, T>::value, void>::type = void; int64_t = long int]::_lambda68&; int64_t = long int]\u2019\r\n r_to_arrow.cpp:464:59: required from \u2018arrow::Status arrow::r::RPrimitiveConverter<T, typename std::enable_if<std::is_same<arrow::BooleanType, T>::value, void>::type>::Extend_impl(Iterator, int64_t) [with Iterator = arrow::r::RVectorIterator_ALTREP<cpp11::r_bool>; T = arrow::BooleanType; typename std::enable_if<std::is_same<arrow::BooleanType, T>::value, void>::type = void; int64_t = long int]\u2019\r\n r_to_arrow.cpp:440:80: required from \u2018arrow::Status arrow::r::RPrimitiveConverter<T, typename std::enable_if<std::is_same<arrow::BooleanType, T>::value, void>::type>::Extend(SEXP, int64_t, int64_t) [with T = arrow::BooleanType; typename std::enable_if<std::is_same<arrow::BooleanType, T>::value, void>::type = void; SEXP = SEXPREC*; int64_t = long int]\u2019\r\n r_to_arrow.cpp:1458:1: required from here\r\n r_to_arrow.cpp:209:47: error: passing \u2018const r_vector_iterator {aka const cpp11::r_vector<cpp11::r_bool>::const_iterator}\u2019 as \u2018this\u2019 argument of \u2018T cpp11::r_vector<T>::const_iterator::operator*() [with T = cpp11::r_bool]\u2019 discards qualifiers [-fpermissive]r_to_arrow.cpp: In instantiation of \u2018const T arrow::r::RVectorIterator_ALTREP<T>::operator*() const [with T = int]\u2019:\r\n r_to_arrow.cpp:229:18: required from \u2018arrow::Status arrow::r::VisitVector(Iterator, int64_t, AppendNull&&, AppendValue&&) [with Iterator = arrow::r::RVectorIterator_ALTREP<int>; AppendNull = arrow::r::RPrimitiveConverter<T, typename std::enable_if<std::is_base_of<arrow::DateType, T>::value, void>::type>::AppendRange_Date(Iterator, int64_t) [with Iterator = arrow::r::RVectorIterator_ALTREP<int>; T = arrow::Date64Type; typename std::enable_if<std::is_base_of<arrow::DateType, T>::value, void>::type = void; int64_t = long int]::_lambda70&; AppendValue = arrow::r::RPrimitiveConverter<T, typename std::enable_if<std::is_base_of<arrow::DateType, T>::value, void>::type>::AppendRange_Date(Iterator, int64_t) [with Iterator = arrow::r::RVectorIterator_ALTREP<int>; T = arrow::Date64Type; typename std::enable_if<std::is_base_of<arrow::DateType, T>::value, void>::type = void; int64_t = long int]::_lambda71&; int64_t = long int]\u2019\r\n r_to_arrow.cpp:519:59: required from \u2018arrow::Status arrow::r::RPrimitiveConverter<T, typename std::enable_if<std::is_base_of<arrow::DateType, T>::value, void>::type>::AppendRange_Date(Iterator, int64_t) [with Iterator = arrow::r::RVectorIterator_ALTREP<int>; T = arrow::Date64Type; typename std::enable_if<std::is_base_of<arrow::DateType, T>::value, void>::type = void; int64_t = long int]\u2019\r\n r_to_arrow.cpp:500:44: required from \u2018arrow::Status arrow::r::RPrimitiveConverter<T, typename std::enable_if<std::is_base_of<arrow::DateType, T>::value, void>::type>::AppendRange_Date_dispatch(SEXP, int64_t, int64_t) [with r_value_type = int; T = arrow::Date64Type; typename std::enable_if<std::is_base_of<arrow::DateType, T>::value, void>::type = void; SEXP = SEXPREC*; int64_t = long int]\u2019\r\n r_to_arrow.cpp:475:41: required from \u2018arrow::Status arrow::r::RPrimitiveConverter<T, typename std::enable_if<std::is_base_of<arrow::DateType, T>::value, void>::type>::Extend(SEXP, int64_t, int64_t) [with T = arrow::Date64Type; typename std::enable_if<std::is_base_of<arrow::DateType, T>::value, void>::type = void; SEXP = SEXPREC*; int64_t = long int]\u2019\r\n r_to_arrow.cpp:1458:1: required from here\r\n r_to_arrow.cpp:209:47: error: passing \u2018const r_vector_iterator {aka const cpp11::r_vector<int>::const_iterator}\u2019 as \u2018this\u2019 argument of \u2018T cpp11::r_vector<T>::const_iterator::operator*() [with T = int]\u2019 discards qualifiers [-fpermissive]r_to_arrow.cpp: In instantiation of \u2018const T arrow::r::RVectorIterator_ALTREP<T>::operator*() const [with T = unsigned char]\u2019:\r\n r_to_arrow.cpp:229:18: required from \u2018arrow::Status arrow::r::VisitVector(Iterator, int64_t, AppendNull&&, AppendValue&&) [with Iterator = arrow::r::RVectorIterator_ALTREP<unsigned char>; AppendNull = arrow::r::RPrimitiveConverter<T, typename std::enable_if<(std::is_base_of<arrow::IntegerType, T>::value || std::is_base_of<arrow::FloatingPointType, T>::value), void>::type>::Extend_impl(Iterator, int64_t) [with Iterator = arrow::r::RVectorIterator_ALTREP<unsigned char>; T = arrow::DoubleType; typename std::enable_if<(std::is_base_of<arrow::IntegerType, T>::value || std::is_base_of<arrow::FloatingPointType, T>::value), void>::type = void; int64_t = long int]::_lambda63&; AppendValue = arrow::r::RPrimitiveConverter<T, typename std::enable_if<(std::is_base_of<arrow::IntegerType, T>::value || std::is_base_of<arrow::FloatingPointType, T>::value), void>::type>::Extend_impl(Iterator, int64_t) [with Iterator = arrow::r::RVectorIterator_ALTREP<unsigned char>; T = arrow::DoubleType; typename std::enable_if<(std::is_base_of<arrow::IntegerType, T>::value || std::is_base_of<arrow::FloatingPointType, T>::value), void>::type = void; int64_t = long int]::_lambda64&; int64_t = long int]\u2019\r\n r_to_arrow.cpp:416:61: required from \u2018arrow::Status arrow::r::RPrimitiveConverter<T, typename std::enable_if<(std::is_base_of<arrow::IntegerType, T>::value || std::is_base_of<arrow::FloatingPointType, T>::value), void>::type>::Extend_impl(Iterator, int64_t) [with Iterator = arrow::r::RVectorIterator_ALTREP<unsigned char>; T = arrow::DoubleType; typename std::enable_if<(std::is_base_of<arrow::IntegerType, T>::value || std::is_base_of<arrow::FloatingPointType, T>::value), void>::type = void; int64_t = long int]\u2019\r\n r_to_arrow.cpp:394:79: required from \u2018arrow::Status arrow::r::RPrimitiveConverter<T, typename std::enable_if<(std::is_base_of<arrow::IntegerType, T>::value || std::is_base_of<arrow::FloatingPointType, T>::value), void>::type>::ExtendDispatch(SEXP, int64_t, int64_t) [with r_value_type = unsigned char; T = arrow::DoubleType; typename std::enable_if<(std::is_base_of<arrow::IntegerType, T>::value || std::is_base_of<arrow::FloatingPointType, T>::value), void>::type = void; SEXP = SEXPREC*; int64_t = long int]\u2019\r\n r_to_arrow.cpp:368:30: required from \u2018arrow::Status arrow::r::RPrimitiveConverter<T, typename std::enable_if<(std::is_base_of<arrow::IntegerType, T>::value || std::is_base_of<arrow::FloatingPointType, T>::value), void>::type>::Extend(SEXP, int64_t, int64_t) [with T = arrow::DoubleType; typename std::enable_if<(std::is_base_of<arrow::IntegerType, T>::value || std::is_base_of<arrow::FloatingPointType, T>::value), void>::type = void; SEXP = SEXPREC*; int64_t = long int]\u2019\r\n r_to_arrow.cpp:1458:1: required from here\r\n r_to_arrow.cpp:209:47: error: passing \u2018const r_vector_iterator {aka const cpp11::r_vector<unsigned char>::const_iterator}\u2019 as \u2018this\u2019 argument of \u2018T cpp11::r_vector<T>::const_iterator::operator*() [with T = unsigned char]\u2019 discards qualifiers [-fpermissive]r_to_arrow.cpp: In instantiation of \u2018const T arrow::r::RVectorIterator_ALTREP<T>::operator*() const [with T = long int]\u2019:\r\n r_to_arrow.cpp:229:18: required from \u2018arrow::Status arrow::r::VisitVector(Iterator, int64_t, AppendNull&&, AppendValue&&) [with Iterator = arrow::r::RVectorIterator_ALTREP<long int>; AppendNull = arrow::r::RPrimitiveConverter<T, typename std::enable_if<(std::is_base_of<arrow::IntegerType, T>::value || std::is_base_of<arrow::FloatingPointType, T>::value), void>::type>::Extend_impl(Iterator, int64_t) [with Iterator = arrow::r::RVectorIterator_ALTREP<long int>; T = arrow::DoubleType; typename std::enable_if<(std::is_base_of<arrow::IntegerType, T>::value || std::is_base_of<arrow::FloatingPointType, T>::value), void>::type = void; int64_t = long int]::_lambda63&; AppendValue = arrow::r::RPrimitiveConverter<T, typename std::enable_if<(std::is_base_of<arrow::IntegerType, T>::value || std::is_base_of<arrow::FloatingPointType, T>::value), void>::type>::Extend_impl(Iterator, int64_t) [with Iterator = arrow::r::RVectorIterator_ALTREP<long int>; T = arrow::DoubleType; typename std::enable_if<(std::is_base_of<arrow::IntegerType, T>::value || std::is_base_of<arrow::FloatingPointType, T>::value), void>::type = void; int64_t = long int]::_lambda64&; int64_t = long int]\u2019\r\n r_to_arrow.cpp:416:61: required from \u2018arrow::Status arrow::r::RPrimitiveConverter<T, typename std::enable_if<(std::is_base_of<arrow::IntegerType, T>::value || std::is_base_of<arrow::FloatingPointType, T>::value), void>::type>::Extend_impl(Iterator, int64_t) [with Iterator = arrow::r::RVectorIterator_ALTREP<long int>; T = arrow::DoubleType; typename std::enable_if<(std::is_base_of<arrow::IntegerType, T>::value || std::is_base_of<arrow::FloatingPointType, T>::value), void>::type = void; int64_t = long int]\u2019\r\n r_to_arrow.cpp:394:79: required from \u2018arrow::Status arrow::r::RPrimitiveConverter<T, typename std::enable_if<(std::is_base_of<arrow::IntegerType, T>::value || std::is_base_of<arrow::FloatingPointType, T>::value), void>::type>::ExtendDispatch(SEXP, int64_t, int64_t) [with r_value_type = long int; T = arrow::DoubleType; typename std::enable_if<(std::is_base_of<arrow::IntegerType, T>::value || std::is_base_of<arrow::FloatingPointType, T>::value), void>::type = void; SEXP = SEXPREC*; int64_t = long int]\u2019\r\n r_to_arrow.cpp:374:30: required from \u2018arrow::Status arrow::r::RPrimitiveConverter<T, typename std::enable_if<(std::is_base_of<arrow::IntegerType, T>::value || std::is_base_of<arrow::FloatingPointType, T>::value), void>::type>::Extend(SEXP, int64_t, int64_t) [with T = arrow::DoubleType; typename std::enable_if<(std::is_base_of<arrow::IntegerType, T>::value || std::is_base_of<arrow::FloatingPointType, T>::value), void>::type = void; SEXP = SEXPREC*; int64_t = long int]\u2019\r\n r_to_arrow.cpp:1458:1: required from here\r\n r_to_arrow.cpp:209:47: error: passing \u2018const r_vector_iterator {aka const cpp11::r_vector<double>::const_iterator}\u2019 as \u2018this\u2019 argument of \u2018T cpp11::r_vector<T>::const_iterator::operator*() [with T = double]\u2019 discards qualifiers [-fpermissive]make: *** [r_to_arrow.o] Error 1ERROR: compilation failed for package \u2018arrow\u2019   removing \u2018/opt/appdisk/lib/R/x86_64-pc-linux-gnu-library/4.0/arrow\u2019Warning in install.packages :\r\n installation of package \u2018arrow\u2019 had non-zero exit statusThe downloaded source packages are in\r\n \u2018/opt/appdisk/tmp/RtmpJx1S8X/downloaded_packages\u2019 \n```\r\n\u00a0\r\n\r\n**Session info**\r\n```java\n\r\n> sessionInfo()R version 4.0.1 (2020-06-06)\r\n Platform: x86_64-pc-linux-gnu (64-bit)\r\n Running under: CentOS Linux 7 (Core)\r\nMatrix products: default\r\n BLAS/LAPACK: /usr/lib64/libopenblasp-r0.3.3.so\r\nlocale:\r\n [1] LC_CTYPE=en_US.UTF-8 LC_NUMERIC=C LC_TIME=en_US.UTF-8 LC_COLLATE=en_US.UTF-8 LC_MONETARY=en_US.UTF-8 LC_MESSAGES=en_US.UTF-8 LC_PAPER=en_US.UTF-8 LC_NAME=C LC_ADDRESS=C \r\n [10] LC_TELEPHONE=C LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C\r\nattached base packages:\r\n [1] stats graphics grDevices utils datasets methods base\r\nloaded via a namespace (and not attached):\r\n [1] bit_4.0.4 compiler_4.0.1 DBI_1.1.0 tools_4.0.1 rstudioapi_0.13 memoise_1.1.0 Rcpp_1.0.5 bit64_4.0.5 vctrs_0.3.4 RSQLite_2.2.1 blob_1.2.1 digest_0.6.27 rlang_0.4.11\r\n```\r\n\u00a0",
        "created_at": "2021-07-29T14:24:43.000Z",
        "updated_at": "2021-07-30T14:22:41.000Z",
        "labels": [
            "Migrated from Jira",
            "Type: bug"
        ],
        "closed": true,
        "closed_at": "2021-07-30T14:22:41.000Z"
    },
    "comments": [
        {
            "created_at": "2021-07-29T14:51:34.875Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-13491?focusedCommentId=17389953) by Neal Richardson (npr):*\nPerhaps this is not relevant, but it looks like you haven't installed arrow-dataset-devel and parquet-devel, which you probably want. Try that?"
        },
        {
            "created_at": "2021-07-29T15:14:29.908Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-13491?focusedCommentId=17389961) by Matthias M (matmu):*\n`[~npr]` Both packages are already installed and on the latest version:\r\n\r\n\u00a0\r\n\r\nPackage arrow-dataset-devel-5.0.0-1.el7.x86_64 already installed and latest version\r\n\r\nPackage parquet-devel-5.0.0-1.el7.x86_64 already installed and latest version"
        },
        {
            "created_at": "2021-07-29T15:21:16.651Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-13491?focusedCommentId=17389965) by Neal Richardson (npr):*\nOdd, pkg-config doesn't appear to be finding them, they're not listed in PKG_LIBS. Though this shouldn't be related to the compilation issue you're experiencing, we test that the R library builds even if not all arrow C++ features are built."
        },
        {
            "created_at": "2021-07-30T14:22:29.310Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-13491?focusedCommentId=17390615) by Matthias M (matmu):*\n`[~npr]` \u00a0it worked after\u00a0setting the environment variable\u00a0`ARROW_USE_PKG_CONFIG=FALSE`"
        }
    ]
}