{
    "issue": {
        "title": "[Release] JS package failing test prior to publish",
        "body": "***Note**: This issue was originally created as [ARROW-13046](https://issues.apache.org/jira/browse/ARROW-13046). Please see the [migration documentation](https://gist.github.com/toddfarmer/12aa88361532d21902818a6044fda4c3) for further details.*\n\n### Original Issue Description:\nWhile trying to publish the JS, I am getting an error when running the tests (on mac).\r\n\r\nTo reproduce, run `dev/release/post-05-js.sh 4.0.1` on branch `release-arrow-4.0.1`:\r\n\r\n```java\n\r\n~/projects/arrow/apache-arrow-4.0.1/js ~/projects/arrow\r\nyarn install v1.22.1\r\n[1/5] \ud83d\udd0d  Validating package.json...\r\n[2/5] \ud83d\udd0d  Resolving packages...\r\n[3/5] \ud83d\ude9a  Fetching packages...\r\ninfo google-closure-compiler-linux@20210406.0.0: The platform \"darwin\" is incompatible with this module.\r\ninfo \"google-closure-compiler-linux@20210406.0.0\" is an optional dependency and failed compatibility check. Excluding it from installation.\r\ninfo google-closure-compiler-windows@20210406.0.0: The platform \"darwin\" is incompatible with this module.\r\ninfo \"google-closure-compiler-windows@20210406.0.0\" is an optional dependency and failed compatibility check. Excluding it from installation.\r\n[4/5] \ud83d\udd17  Linking dependencies...\r\nwarning \"lerna > @lerna/version > @lerna/github-client > @octokit/rest > @octokit/plugin-request-log@1.0.3\" has unmet peer dependency \"@octokit/core@>=3\".\r\n[5/5] \ud83d\udd28  Building fresh packages...\r\nwarning Your current version of Yarn is out of date. The latest version is \"1.22.5\", while you're on \"1.22.1\".\r\ninfo To upgrade, run the following command:\r\n$ brew upgrade yarn\r\n\u2728  Done in 121.72s.\r\nyarn run v1.22.1\r\n$ /Users/jorgecarleitao/projects/arrow/apache-arrow-4.0.1/js/node_modules/.bin/gulp\r\n[05:39:21] Using gulpfile ~/projects/arrow/apache-arrow-4.0.1/js/gulpfile.js\r\n[05:39:21] Starting 'default'...\r\n[05:39:21] Starting 'clean'...\r\n[05:39:21] Starting 'clean:ts'...\r\n[05:39:21] Starting 'clean:apache-arrow'...\r\n[05:39:21] Starting 'clean:es5:cjs'...\r\n[05:39:21] Starting 'clean:es2015:cjs'...\r\n[05:39:21] Starting 'clean:esnext:cjs'...\r\n[05:39:21] Starting 'clean:es5:esm'...\r\n[05:39:21] Starting 'clean:es2015:esm'...\r\n[05:39:21] Starting 'clean:esnext:esm'...\r\n[05:39:21] Starting 'clean:es5:cls'...\r\n[05:39:21] Starting 'clean:es2015:cls'...\r\n[05:39:21] Starting 'clean:esnext:cls'...\r\n[05:39:21] Starting 'clean:es5:umd'...\r\n[05:39:21] Starting 'clean:es2015:umd'...\r\n[05:39:21] Starting 'clean:esnext:umd'...\r\n[05:39:21] Finished 'clean:ts' after 211 ms\r\n[05:39:21] Finished 'clean:apache-arrow' after 199 ms\r\n[05:39:21] Finished 'clean:es5:cjs' after 195 ms\r\n[05:39:21] Finished 'clean:es2015:cjs' after 196 ms\r\n[05:39:21] Finished 'clean:esnext:cjs' after 190 ms\r\n[05:39:21] Finished 'clean:es5:esm' after 180 ms\r\n[05:39:21] Finished 'clean:es2015:esm' after 172 ms\r\n[05:39:21] Finished 'clean:esnext:esm' after 169 ms\r\n[05:39:21] Finished 'clean:es5:cls' after 151 ms\r\n[05:39:21] Finished 'clean:es2015:cls' after 146 ms\r\n[05:39:22] Finished 'clean:esnext:cls' after 163 ms\r\n[05:39:22] Finished 'clean:es5:umd' after 149 ms\r\n[05:39:22] Finished 'clean:es2015:umd' after 146 ms\r\n[05:39:22] Finished 'clean:esnext:umd' after 142 ms\r\n[05:39:22] Finished 'clean' after 293 ms\r\n[05:39:22] Starting 'build'...\r\n[05:39:22] Starting 'build:ts'...\r\n[05:39:22] Starting 'build:apache-arrow'...\r\n[05:39:22] Starting 'build:es5:cjs'...\r\n[05:39:22] Starting 'clean:ts'...\r\n[05:39:22] Starting 'clean:es5:cjs'...\r\n[05:39:22] Finished 'clean:ts' after 728 \u03bcs\r\n[05:39:22] Starting 'compile:ts'...\r\n[05:39:22] Starting 'build:es2015:umd'...\r\n[05:39:22] Starting 'build:esnext:cjs'...\r\n[05:39:22] Starting 'build:esnext:esm'...\r\n[05:39:22] Starting 'build:esnext:umd'...\r\n[05:39:22] Finished 'clean:es5:cjs' after 11 ms\r\n[05:39:22] Starting 'compile:es5:cjs'...\r\n[05:39:22] Starting 'build:es2015:cls'...\r\n[05:39:22] Starting 'clean:esnext:cjs'...\r\n[05:39:22] Starting 'clean:esnext:esm'...\r\n[05:39:22] Starting 'build:esnext:cls'...\r\n[05:39:22] Starting 'clean:es2015:cls'...\r\n[05:39:22] Finished 'clean:esnext:cjs' after 30 ms\r\n[05:39:22] Starting 'compile:esnext:cjs'...\r\n[05:39:22] Finished 'clean:esnext:esm' after 28 ms\r\n[05:39:22] Starting 'compile:esnext:esm'...\r\n[05:39:22] Starting 'clean:esnext:cls'...\r\n[05:39:22] Finished 'clean:es2015:cls' after 53 ms\r\n[05:39:22] Starting 'compile:es2015:cls'...\r\n[05:39:22] Finished 'clean:esnext:cls' after 43 ms\r\n[05:39:22] Starting 'compile:esnext:cls'...\r\n[05:39:23] Finished 'compile:ts' after 1.37 s\r\n[05:39:23] Starting 'package:ts'...\r\n[05:39:23] Finished 'package:ts' after 56 ms\r\n[05:39:23] Finished 'build:ts' after 1.45 s\r\n[05:39:23] Starting 'build:es2015:cjs'...\r\n[05:39:23] Starting 'clean:es2015:cjs'...\r\n[05:39:23] Finished 'clean:es2015:cjs' after 12 ms\r\n[05:39:23] Starting 'compile:es2015:cjs'...\r\n[05:43:17] Finished 'compile:esnext:cls' after 3.9 min\r\n[05:43:17] Starting 'package:esnext:cls'...\r\n[05:43:17] Finished 'package:esnext:cls' after 114 ms\r\n[05:43:17] Finished 'build:esnext:cls' after 3.92 min\r\n[05:43:17] Starting 'clean:esnext:umd'...\r\n[05:43:17] Finished 'clean:esnext:umd' after 5.44 ms\r\n[05:43:17] Starting 'compile:esnext:umd'...\r\n[05:43:20] Finished 'compile:es2015:cls' after 3.97 min\r\n[05:43:20] Starting 'package:es2015:cls'...\r\n[05:43:20] Finished 'package:es2015:cls' after 49 ms\r\n[05:43:20] Finished 'build:es2015:cls' after 3.97 min\r\n[05:43:20] Starting 'clean:es2015:umd'...\r\n[05:43:20] Finished 'clean:es2015:umd' after 24 ms\r\n[05:43:20] Starting 'compile:es2015:umd'...\r\n[05:43:37] Finished 'compile:esnext:cjs' after 4.25 min\r\n[05:43:37] Starting 'package:esnext:cjs'...\r\n[05:43:37] Finished 'package:esnext:cjs' after 26 ms\r\n[05:43:37] Finished 'build:esnext:cjs' after 4.25 min\r\n[05:43:47] Finished 'compile:es2015:cjs' after 4.38 min\r\n[05:43:47] Starting 'package:es2015:cjs'...\r\n[05:43:47] Finished 'package:es2015:cjs' after 26 ms\r\n[05:43:47] Finished 'build:es2015:cjs' after 4.38 min\r\n[05:43:47] Starting 'build:esnext:cjs'...\r\n[05:43:47] Starting 'clean:esnext:cjs'...\r\n[05:43:47] Finished 'clean:esnext:cjs' after 247 \u03bcs\r\n[05:43:47] Starting 'compile:esnext:cjs'...\r\n[05:43:47] Finished 'compile:esnext:cjs' after 1.31 ms\r\n[05:43:47] Starting 'package:esnext:cjs'...\r\n[05:43:47] Finished 'package:esnext:cjs' after 548 \u03bcs\r\n[05:43:47] Finished 'build:esnext:cjs' after 3.06 ms\r\n[05:43:47] Starting 'build:es5:esm'...\r\n[05:43:47] Starting 'clean:es5:esm'...\r\n[05:43:47] Finished 'clean:es5:esm' after 270 \u03bcs\r\n[05:43:47] Starting 'compile:es5:esm'...\r\n[05:43:53] Finished 'compile:es5:cjs' after 4.52 min\r\n[05:43:53] Starting 'package:es5:cjs'...\r\n[05:43:53] Finished 'package:es5:cjs' after 26 ms\r\n[05:43:53] Finished 'build:es5:cjs' after 4.52 min\r\n[05:43:53] Starting 'build:es2015:esm'...\r\n[05:43:53] Starting 'clean:es2015:esm'...\r\n[05:43:53] Finished 'clean:es2015:esm' after 5.11 ms\r\n[05:43:53] Starting 'compile:es2015:esm'...\r\n[05:44:06] Finished 'compile:esnext:esm' after 4.73 min\r\n[05:44:06] Starting 'package:esnext:esm'...\r\n[05:44:07] Finished 'package:esnext:esm' after 28 ms\r\n[05:44:07] Finished 'build:esnext:esm' after 4.73 min\r\n[05:45:28] Finished 'compile:esnext:umd' after 2.18 min\r\n[05:45:28] Starting 'package:esnext:umd'...\r\n[05:45:28] Finished 'package:esnext:umd' after 26 ms\r\n[05:45:28] Starting 'remove_closure_tmp_files'...\r\n[05:45:28] Finished 'remove_closure_tmp_files' after 92 ms\r\n[05:45:28] Finished 'build:esnext:umd' after 6.1 min\r\n[05:45:31] Finished 'compile:es2015:umd' after 2.18 min\r\n[05:45:31] Starting 'package:es2015:umd'...\r\n[05:45:31] Finished 'package:es2015:umd' after 20 ms\r\n[05:45:31] Starting 'remove_closure_tmp_files'...\r\n[05:45:32] Finished 'remove_closure_tmp_files' after 169 ms\r\n[05:45:32] Finished 'build:es2015:umd' after 6.17 min\r\n[05:45:32] Starting 'clean:apache-arrow'...\r\n[05:45:32] Finished 'clean:apache-arrow' after 16 ms\r\n[05:45:32] Starting 'compile:apache-arrow'...\r\n[05:45:34] Finished 'compile:apache-arrow' after 1.91 s\r\n[05:45:34] Starting 'package:apache-arrow'...\r\n[05:45:34] Finished 'package:apache-arrow' after 190 ms\r\n[05:45:34] Finished 'build:apache-arrow' after 6.2 min\r\n[05:45:34] Starting 'build:esnext:esm'...\r\n[05:45:34] Starting 'clean:esnext:esm'...\r\n[05:45:34] Finished 'clean:esnext:esm' after 3.45 ms\r\n[05:45:34] Starting 'compile:esnext:esm'...\r\n[05:45:34] Finished 'compile:esnext:esm' after 10 ms\r\n[05:45:34] Starting 'package:esnext:esm'...\r\n[05:45:34] Finished 'package:esnext:esm' after 5.95 ms\r\n[05:45:34] Finished 'build:esnext:esm' after 38 ms\r\n[05:45:34] Starting 'build:es5:cls'...\r\n[05:45:34] Starting 'clean:es5:cls'...\r\n[05:45:34] Finished 'clean:es5:cls' after 13 ms\r\n[05:45:34] Starting 'compile:es5:cls'...\r\n[05:46:36] Finished 'compile:es2015:esm' after 2.72 min\r\n[05:46:36] Starting 'package:es2015:esm'...\r\n[05:46:36] Finished 'package:es2015:esm' after 35 ms\r\n[05:46:36] Finished 'build:es2015:esm' after 2.72 min\r\n[05:46:36] Starting 'build:es2015:cls'...\r\n[05:46:36] Starting 'clean:es2015:cls'...\r\n[05:46:36] Finished 'clean:es2015:cls' after 7.41 ms\r\n[05:46:36] Starting 'compile:es2015:cls'...\r\n[05:46:36] Finished 'compile:es2015:cls' after 3.22 ms\r\n[05:46:36] Starting 'package:es2015:cls'...\r\n[05:46:36] Finished 'package:es2015:cls' after 4.4 ms\r\n[05:46:36] Finished 'build:es2015:cls' after 22 ms\r\n[05:46:36] Starting 'build:esnext:cls'...\r\n[05:46:36] Starting 'clean:esnext:cls'...\r\n[05:46:36] Finished 'clean:esnext:cls' after 2.01 ms\r\n[05:46:36] Starting 'compile:esnext:cls'...\r\n[05:46:36] Finished 'compile:esnext:cls' after 3.38 ms\r\n[05:46:36] Starting 'package:esnext:cls'...\r\n[05:46:36] Finished 'package:esnext:cls' after 4.54 ms\r\n[05:46:36] Finished 'build:esnext:cls' after 29 ms\r\n[05:46:36] Starting 'build:es5:umd'...\r\n[05:46:36] Starting 'build:es5:cls'...\r\n[05:46:36] Starting 'clean:es5:cls'...\r\n[05:46:36] Finished 'clean:es5:cls' after 2.11 ms\r\n[05:46:36] Starting 'compile:es5:cls'...\r\n[05:46:40] Finished 'compile:es5:esm' after 2.88 min\r\n[05:46:40] Starting 'package:es5:esm'...\r\n[05:46:40] Finished 'package:es5:esm' after 13 ms\r\n[05:46:40] Finished 'build:es5:esm' after 2.88 min\r\n[05:46:40] Starting 'build:es2015:umd'...\r\n[05:46:40] Starting 'build:es2015:cls'...\r\n[05:46:40] Starting 'clean:es2015:cls'...\r\n[05:46:40] Finished 'clean:es2015:cls' after 146 \u03bcs\r\n[05:46:40] Starting 'compile:es2015:cls'...\r\n[05:46:40] Finished 'compile:es2015:cls' after 162 \u03bcs\r\n[05:46:40] Starting 'package:es2015:cls'...\r\n[05:46:40] Finished 'package:es2015:cls' after 290 \u03bcs\r\n[05:46:40] Finished 'build:es2015:cls' after 1.01 ms\r\n[05:46:40] Starting 'clean:es2015:umd'...\r\n[05:46:40] Finished 'clean:es2015:umd' after 157 \u03bcs\r\n[05:46:40] Starting 'compile:es2015:umd'...\r\n[05:46:40] Finished 'compile:es2015:umd' after 683 \u03bcs\r\n[05:46:40] Starting 'package:es2015:umd'...\r\n[05:46:40] Finished 'package:es2015:umd' after 590 \u03bcs\r\n[05:46:40] Starting 'remove_closure_tmp_files'...\r\n[05:46:40] Finished 'remove_closure_tmp_files' after 6.01 ms\r\n[05:46:40] Finished 'build:es2015:umd' after 9.39 ms\r\n[05:46:40] Starting 'build:esnext:umd'...\r\n[05:46:40] Starting 'build:esnext:cls'...\r\n[05:46:40] Starting 'clean:esnext:cls'...\r\n[05:46:40] Finished 'clean:esnext:cls' after 158 \u03bcs\r\n[05:46:40] Starting 'compile:esnext:cls'...\r\n[05:46:40] Finished 'compile:esnext:cls' after 142 \u03bcs\r\n[05:46:40] Starting 'package:esnext:cls'...\r\n[05:46:40] Finished 'package:esnext:cls' after 279 \u03bcs\r\n[05:46:40] Finished 'build:esnext:cls' after 979 \u03bcs\r\n[05:46:40] Starting 'clean:esnext:umd'...\r\n[05:46:40] Finished 'clean:esnext:umd' after 175 \u03bcs\r\n[05:46:40] Starting 'compile:esnext:umd'...\r\n[05:46:40] Finished 'compile:esnext:umd' after 134 \u03bcs\r\n[05:46:40] Starting 'package:esnext:umd'...\r\n[05:46:40] Finished 'package:esnext:umd' after 256 \u03bcs\r\n[05:46:40] Starting 'remove_closure_tmp_files'...\r\n[05:46:40] Finished 'remove_closure_tmp_files' after 3.67 ms\r\n[05:46:40] Finished 'build:esnext:umd' after 5.89 ms\r\n[05:46:58] Finished 'compile:es5:cls' after 1.38 min\r\n[05:46:58] Starting 'package:es5:cls'...\r\n[05:46:58] Finished 'compile:es5:cls' after 21 s\r\n[05:46:58] Starting 'package:es5:cls'...\r\n[05:46:58] Finished 'package:es5:cls' after 27 ms\r\n[05:46:58] Finished 'build:es5:cls' after 1.38 min\r\n[05:46:58] Finished 'package:es5:cls' after 27 ms\r\n[05:46:58] Finished 'build:es5:cls' after 22 s\r\n[05:46:58] Starting 'clean:es5:umd'...\r\n[05:46:58] Finished 'clean:es5:umd' after 318 \u03bcs\r\n[05:46:58] Starting 'compile:es5:umd'...\r\n[05:47:37] Finished 'compile:es5:umd' after 39 s\r\n[05:47:37] Starting 'package:es5:umd'...\r\n[05:47:37] Finished 'package:es5:umd' after 74 ms\r\n[05:47:37] Starting 'remove_closure_tmp_files'...\r\n[05:47:37] Finished 'remove_closure_tmp_files' after 176 ms\r\n[05:47:37] Finished 'build:es5:umd' after 1 min\r\n[05:47:37] Finished 'build' after 8.25 min\r\n[05:47:37] Starting 'test'...\r\n[05:47:37] Starting 'test:ts'...\r\n[05:47:37] Starting 'test:src'...\r\n[05:47:37] Starting 'test:apache-arrow'...\r\nts-jest[config] (WARN) The option `tsConfig` is deprecated and will be removed in ts-jest 27, use `tsconfig` instead\r\nts-jest[config] (WARN) The option `tsConfig` is deprecated and will be removed in ts-jest 27, use `tsconfig` instead\r\nts-jest[config] (WARN) The option `tsConfig` is deprecated and will be removed in ts-jest 27, use `tsconfig` instead\r\nts-jest[config] (WARN) There is a mismatch between your NodeJs version v12.14.0 and your TypeScript target esnext. This might lead to some unexpected errors when running tests with `ts-jest`. To fix this, you can check https://github.com/microsoft/TypeScript/wiki/Node-Target-Mapping\r\nts-jest[config] (WARN) There is a mismatch between your NodeJs version v12.14.0 and your TypeScript target esnext. This might lead to some unexpected errors when running tests with `ts-jest`. To fix this, you can check https://github.com/microsoft/TypeScript/wiki/Node-Target-Mapping\r\nts-jest[config] (WARN) There is a mismatch between your NodeJs version v12.14.0 and your TypeScript target esnext. This might lead to some unexpected errors when running tests with `ts-jest`. To fix this, you can check https://github.com/microsoft/TypeScript/wiki/Node-Target-Mapping\r\nts-jest[ts-compiler] (WARN) test/jest-extensions.ts:34:5 - error TS2322: Type '<TActual extends AbstractVector<any> | [AbstractVector<any> | null, (string | undefined)?, (string | undefined)?], TExpected extends AbstractVector<any> | [AbstractVector<any> | null, (string | undefined)?]>(this: MatcherUtils, actual: TActual, expected: TExpected) => { pass: boolean; message: string; } | { pass: boolean; message: () => string; }' is not assignable to type 'CustomMatcher'.\r\n  Type '{ pass: boolean; message: string; } | { pass: boolean; message: () => string; }' is not assignable to type 'CustomMatcherResult | Promise<CustomMatcherResult>'.\r\n    Type '{ pass: boolean; message: string; }' is not assignable to type 'CustomMatcherResult | Promise<CustomMatcherResult>'.\r\n      Type '{ pass: boolean; message: string; }' is not assignable to type 'CustomMatcherResult'.\r\n        Types of property 'message' are incompatible.\r\n          Type 'string' is not assignable to type '() => string'.\r\n\r\n34     toEqualVector,\r\n       ~~~~~~~~~~~~~\r\n\r\n  node_modules/@types/jest/index.d.ts:538:9\r\n    538         [key: string]: CustomMatcher;\r\n                ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n    The expected type comes from this index signature.\r\n\r\n  \u25cf should close the underlying NodeJS ReadableStream when reading multiple tables and we break early\r\n\r\n    expect(received).toBe(expected) // Object.is equality\r\n\r\n    Expected: false\r\n    Received: true\r\n\r\n      215 | function validateStreamState(reader: RecordBatchReader, stream: NodeJS.ReadableStream, closed: boolean, readable = !closed) {\r\n      216 |     expect(reader.closed).toBe(closed);\r\n    > 217 |     expect(Boolean(stream.readable)).toBe(readable);\r\n          |                                      ^\r\n      218 |     expect(Boolean((stream as any).destroyed)).toBe(closed);\r\n      219 |     expect(Boolean((stream as any).readableFlowing)).toBe(false);\r\n      220 | }\r\n\r\n      at validateStreamState (test/unit/ipc/reader/streams-node-tests.ts:217:38)\r\n      at Object.<anonymous> (test/unit/ipc/reader/streams-node-tests.ts:210:9)\r\n          at runMicrotasks (<anonymous>)\r\n\r\n\r\n  \u25cf should close the underlying NodeJS ReadableStream when reading multiple tables and we break early\r\n\r\n    expect(received).toBe(expected) // Object.is equality\r\n\r\n    Expected: false\r\n    Received: true\r\n\r\n      215 | function validateStreamState(reader: RecordBatchReader, stream: NodeJS.ReadableStream, closed: boolean, readable = !closed) {\r\n      216 |     expect(reader.closed).toBe(closed);\r\n    > 217 |     expect(Boolean(stream.readable)).toBe(readable);\r\n          |                                      ^\r\n      218 |     expect(Boolean((stream as any).destroyed)).toBe(closed);\r\n      219 |     expect(Boolean((stream as any).readableFlowing)).toBe(false);\r\n      220 | }\r\n\r\n      at validateStreamState (test/unit/ipc/reader/streams-node-tests.ts:217:38)\r\n      at Object.<anonymous> (test/unit/ipc/reader/streams-node-tests.ts:210:9)\r\n          at runMicrotasks (<anonymous>)\r\n\r\n\r\n  \u25cf should close the underlying NodeJS ReadableStream when reading multiple tables and we break early\r\n\r\n    expect(received).toBe(expected) // Object.is equality\r\n\r\n    Expected: false\r\n    Received: true\r\n\r\n      215 | function validateStreamState(reader: RecordBatchReader, stream: NodeJS.ReadableStream, closed: boolean, readable = !closed) {\r\n      216 |     expect(reader.closed).toBe(closed);\r\n    > 217 |     expect(Boolean(stream.readable)).toBe(readable);\r\n          |                                      ^\r\n      218 |     expect(Boolean((stream as any).destroyed)).toBe(closed);\r\n      219 |     expect(Boolean((stream as any).readableFlowing)).toBe(false);\r\n      220 | }\r\n\r\n      at validateStreamState (test/unit/ipc/reader/streams-node-tests.ts:217:38)\r\n      at Object.<anonymous> (test/unit/ipc/reader/streams-node-tests.ts:210:9)\r\n          at runMicrotasks (<anonymous>)\r\n\r\n[05:51:42] 'test:apache-arrow' errored after 4.07 min\r\n[05:51:42] Error: exited with error code: 1\r\n    at ChildProcess.onexit (/Users/jorgecarleitao/projects/arrow/apache-arrow-4.0.1/js/node_modules/end-of-stream/index.js:40:36)\r\n    at ChildProcess.emit (events.js:210:5)\r\n    at ChildProcess.EventEmitter.emit (domain.js:498:23)\r\n    at Process.ChildProcess._handle.onexit (internal/child_process.js:272:12)\r\n[05:51:42] 'test' errored after 4.07 min\r\n[05:51:42] 'default' errored after 12 min\r\nerror Command failed with exit code 1.\r\ninfo Visit https://yarnpkg.com/en/docs/cli/run for documentation about this command.\r\n```\r\n",
        "created_at": "2021-06-11T04:14:16.000Z",
        "updated_at": "2021-06-18T06:03:19.000Z",
        "labels": [
            "Migrated from Jira",
            "Component: JavaScript",
            "Type: bug"
        ],
        "closed": true,
        "closed_at": "2021-06-18T06:03:19.000Z"
    },
    "comments": [
        {
            "created_at": "2021-06-15T06:54:56.268Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-13046?focusedCommentId=17363421) by Jorge Leit\u00e3o (jorgecarleitao):*\n`[~domoritz]`, could you guide me here?\r\n\r\nEven if I ignore the tests and proceed, I am getting \r\n\r\n\r\n```java\n\r\nyarn run v1.22.1\r\nwarning From Yarn 1.0 onwards, scripts don't require \"--\" for options to be forwarded. In a future version, any explicit \"--\" will be forwarded as-is to the scripts.\r\n$ lerna exec npm publish\r\nlerna notice cli v3.22.1\r\nlerna ERR! ENOLERNA `lerna.json` does not exist, have you run `lerna init`?\r\nerror Command failed with exit code 1.\r\ninfo Visit https://yarnpkg.com/en/docs/cli/run for documentation about this command.\r\n```\r\n\r\nIt seems that lerna requires a version in lerna.json? Can I just write 0.0.0? I tried using `\"version\": \"4.0.0\"`, but I am getting that \r\n\r\n```Java\n\r\nnpm notice === Tarball Contents === \r\nnpm ERR! code E404\r\nnpm ERR! 404 Not Found - PUT https://registry.yarnpkg.com/@apache-arrow%2fes2015-umd - Not found\r\nnpm ERR! 404 \r\nnpm ERR! 404  '@apache-arrow/es2015-umd@4.0.0' is not in the npm registry.\r\nnpm ERR! 404 You should bug the author to publish it (or use the name yourself!)\r\nnpm ERR! 404 \r\nnpm ERR! 404 Note that you can also install from a\r\nnpm ERR! 404 tarball, folder, http url, or git url.\r\n```\r\n\r\n(even after `npm login`).\r\n\r\nI am a collaborator of apache-arrow in npm, so I should have permissions to do this."
        },
        {
            "created_at": "2021-06-15T16:17:44.330Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-13046?focusedCommentId=17363745) by Dominik Moritz (domoritz):*\nCould you try adding this commit: https://github.com/apache/arrow/commit/3a6f6053c74eb698208395091009ac50be9dc29e (with an updated version to 4.0.1)?The lerna.json file should exist in the js directory. Make sure that you are in the directory. "
        },
        {
            "created_at": "2021-06-16T05:36:16.368Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-13046?focusedCommentId=17364070) by Jorge Leit\u00e3o (jorgecarleitao):*\nThanks `[~domoritz]` and [~paul.e.taylor], I cherry-picked that commit on top of the release/4.0.1, but the same problem remains.\r\n\r\nNote that I am already using \r\n\r\ncd js && ./npm-release.sh\r\n\r\ndirectly, so that we build from the current checked out code (as opposed to dev/release/post-05-js.sh that checkouts a clean version from github).\r\n"
        },
        {
            "created_at": "2021-06-18T06:00:01.395Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-13046?focusedCommentId=17365257) by Kouhei Sutou (kou):*\nPublished.\r\n\r\nI needed to be logged in to `registry.yarnpkg.com` not `registry.npmjs.org`: `npm login --registry=https://registry.yarnpkg.com/`"
        },
        {
            "created_at": "2021-06-18T06:03:19.759Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-13046?focusedCommentId=17365258) by Kouhei Sutou (kou):*\nI've updated https://cwiki.apache.org/confluence/display/ARROW/Release+Management+Guide ."
        }
    ]
}