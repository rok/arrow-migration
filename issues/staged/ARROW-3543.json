{
    "issue": {
        "title": "[R] Better support for timestamp format and time zones in R",
        "body": "***Note**: This issue was originally created as [ARROW-3543](https://issues.apache.org/jira/browse/ARROW-3543). Please see the [migration documentation](https://gist.github.com/toddfarmer/12aa88361532d21902818a6044fda4c3) for further details.*\n\n### Original Issue Description:\nSee below for original description and reports. In sum, there is a mismatch between how the C++ library and R interpret data without a timezone, and it turns out that we're not passing the timezone to R if it is set in Arrow C++ anyway. \r\n\r\nThe [C++ library docs](http://arrow.apache.org/docs/cpp/api/datatype.html#_CPPv4N5arrow13TimestampTypeE) say \"If a timezone-aware field contains a recognized timezone, its values may be localized to that locale upon display; the values of timezone-naive fields must always be displayed \u201cas is\u201d, with no localization performed on them.\" But R's print default, as well as the parsing default, is the current time zone: https://stat.ethz.ch/R-manual/R-devel/library/base/html/strptime.html\r\n\r\nThe C++ library seems to parse timestamp strings that don't have timezone information as if they are UTC, so when you read timezone-naive timestamps from Arrow and print them in R, they are shifted to be localized to the current timezone. If you print timestamp data from Arrow with `print(timestamp_var, tz=\"GMT\")` it would look as you expect.\r\n\r\nOn further inspection, the [arrow-to-vector code for timestamp](https://github.com/apache/arrow/blob/master/r/src/array_to_vector.cpp#L504-L514) doesn't seem to consider time zone information even if it does exist. So we don't have the means currently in R to display timestamp data faithfully, whether or not it is timezone-aware.\r\n\r\nAmong the tasks here:\r\n\r\n- Include the timezone attribute in the POSIXct R vector that gets created from a timestamp Arrow array\n- Ensure that timezone-naive data from Arrow is printed in R \"as is\" with no localization \n  \n-----\r\nOriginal description:\r\n\r\nHello the dream team,\r\n\r\nPasting from\u00a0<https://github.com/wesm/feather/issues/351>\r\n\r\nThanks for this wonderful package. I was playing with feather and some timestamps and I noticed some dangerous behavior. Maybe it is a bug.\r\n\r\nConsider this\r\n\r\n\u00a0\r\n```java\n\r\nimport pandas as pd\r\nimport feather\r\nimport numpy as np\r\ndf = pd.DataFrame(\r\n{'string_time_utc' : [pd.to_datetime('2018-02-01 14:00:00.531'), pd.to_datetime('2018-02-01 14:01:00.456'), pd.to_datetime('2018-03-05 14:01:02.200')]}\r\n)\r\ndf['timestamp_est'] = pd.to_datetime(df.string_time_utc).dt.tz_localize('UTC').dt.tz_convert('US/Eastern').dt.tz_localize(None)\r\ndf\r\n Out[17]: \r\n string_time_utc timestamp_est\r\n 0 2018-02-01 14:00:00.531 2018-02-01 09:00:00.531\r\n 1 2018-02-01 14:01:00.456 2018-02-01 09:01:00.456\r\n 2 2018-03-05 14:01:02.200 2018-03-05 09:01:02.200\r\n```\r\nHere I create the corresponding `EST` timestamp of my original timestamps (in `UTC` time).\r\n\r\nNow saving the dataframe to `csv` or to `feather` will generate two completely different results.\r\n\r\n\u00a0\r\n```java\n\r\ndf.to_csv('P://testing.csv')\r\ndf.to_feather('P://testing.feather')\r\n```\r\nSwitching to R.\r\n\r\nUsing the good old `csv` gives me something a bit annoying, but expected. R thinks my timezone is `UTC` by default, and wrongly attached this timezone to `timestamp_est`. No big deal, I can always use `with_tz` or even better: import as character and process as timestamp while in R.\r\n\r\n\u00a0\r\n```java\n\r\n> dataframe <- read_csv('P://testing.csv')\r\n Parsed with column specification:\r\n cols(\r\n X1 = col_integer(),\r\n string_time_utc = col_datetime(format = \"\"),\r\n timestamp_est = col_datetime(format = \"\")\r\n )\r\n Warning message:\r\n Missing column names filled in: 'X1' [1] \r\n > \r\n > dataframe %>% mutate(mytimezone = tz(timestamp_est))\r\n\r\nA tibble: 3 x 4\r\n X1 string_time_utc timestamp_est \r\n <int> <dttm> <dttm> \r\n 1 0 2018-02-01 14:00:00.530 2018-02-01 09:00:00.530\r\n 2 1 2018-02-01 14:01:00.456 2018-02-01 09:01:00.456\r\n 3 2 2018-03-05 14:01:02.200 2018-03-05 09:01:02.200\r\n mytimezone\r\n <chr> \r\n 1 UTC \r\n 2 UTC \r\n 3 UTC  \n```\r\n```java\n\r\n#Now look at what happens with feather:\r\n\u00a0\r\n > dataframe <- read_feather('P://testing.feather')\r\n > \r\n > dataframe %>% mutate(mytimezone = tz(timestamp_est))\r\n\r\nA tibble: 3 x 3\r\n string_time_utc timestamp_est mytimezone\r\n <dttm> <dttm> <chr> \r\n 1 2018-02-01 09:00:00.531 2018-02-01 04:00:00.531 \"\" \r\n 2 2018-02-01 09:01:00.456 2018-02-01 04:01:00.456 \"\" \r\n 3 2018-03-05 09:01:02.200 2018-03-05 04:01:02.200 \"\" \n```\r\nMy timestamps have been converted!!! pure insanity. \r\n Am I missing something here?\r\n\r\nThanks!!",
        "created_at": "2018-10-17T15:22:43.000Z",
        "updated_at": "2020-02-28T16:00:58.000Z",
        "labels": [
            "Migrated from Jira",
            "Component: R",
            "Type: bug"
        ],
        "closed": true,
        "closed_at": "2020-02-28T16:00:34.000Z"
    },
    "comments": [
        {
            "created_at": "2018-12-05T04:22:52.310Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-3543?focusedCommentId=16709587) by Wes McKinney (wesm):*\n`[~romainfrancois]` can you have a look and see if this bug is still present?"
        },
        {
            "created_at": "2018-12-12T21:58:48.354Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-3543?focusedCommentId=16719488) by Tanya Schlusser (tanya):*\nI can confirm this bug is still present. Most recent commit in my pull is\r\n\r\nc0ac97f126c98fb29e81d6544adfea9d4ab74aff\r\n\r\n\u00a0\r\n\r\nFor others, the R libraries needed to re-run Olaf's code (in addition to arrow) are readr, dplyr, and lubridate.\r\n\r\nI will mess around but won't be hurt if a stronger R coder takes this before I finish.\r\n\r\n\u00a0\r\n\r\n\u00a0"
        },
        {
            "created_at": "2018-12-19T04:36:56.734Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-3543?focusedCommentId=16724688) by Wes McKinney (wesm):*\nI'm moving to 0.13. If someone gets to this in time for 0.12, that's great, but since 0.12 isn't likely to make it to CRAN yet this isn't as urgent"
        },
        {
            "created_at": "2019-02-07T16:05:58.535Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-3543?focusedCommentId=16762806) by Wes McKinney (wesm):*\n`[~romainfrancois]` any chance you could look at what's going on with this?"
        },
        {
            "created_at": "2019-03-06T04:22:10.564Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-3543?focusedCommentId=16785210) by Olaf (Olafsson):*\nHello there! any updates on this? I mean, this is a very serious bug and right now I had to simply stop using `feather` at all because I use timestamps all the time... Cant wait for this to be fixed... what do you think? thanks!!!"
        },
        {
            "created_at": "2019-03-06T11:29:27.366Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-3543?focusedCommentId=16785529) by Tanya Schlusser (tanya):*\nHi `[~Olafsson]` I am still looking at this. My mom passed away last week and I have been listless and distracted since then. I am sorry for your inconvenience."
        },
        {
            "created_at": "2019-03-06T17:52:43.757Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-3543?focusedCommentId=16785947) by Olaf (Olafsson):*\nHi Tanya really sorry to hear that! my sincere condolences!"
        },
        {
            "created_at": "2019-03-06T18:00:36.980Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-3543?focusedCommentId=16785957) by Tanya Schlusser (tanya):*\n<3 Thank you Olaf!"
        },
        {
            "created_at": "2019-04-06T12:50:24.696Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-3543?focusedCommentId=16811573) by Olaf (Olafsson):*\nhello there! do you think someone can help Tanya here? I mean this bug is killing the package entirely. My team stopped using it completely because with our high frequency data we work with timestamps all the time. I am happy to help testing if I can! thanks and keep up the good work"
        },
        {
            "created_at": "2019-04-07T09:12:36.752Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-3543?focusedCommentId=16811810) by Uwe Korn (uwe):*\n`[~Olafsson]` For now, I think your best approach is to have a look and try to fix it by yourself. Feel free to reach out on the mailing lists when you have questions on debugging the issue."
        },
        {
            "created_at": "2019-04-08T15:15:26.270Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-3543?focusedCommentId=16812496) by Olaf (Olafsson):*\nha! perhaps a workaround would be to ask read_feather to import the timestamps as strings (and not timestamps). However, I do not see a col_type argument in read_feather. what do you think? Thanks!!"
        },
        {
            "created_at": "2019-05-31T01:27:23.010Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-3543?focusedCommentId=16852543) by Wes McKinney (wesm):*\ncc `[~npr]`"
        },
        {
            "created_at": "2019-06-11T20:12:09.681Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-3543?focusedCommentId=16861446) by Wes McKinney (wesm):*\nDo we know what is the problem here? Seems like this could pose a correctness issue for Feather users"
        },
        {
            "created_at": "2019-06-11T20:39:32.618Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-3543?focusedCommentId=16861480) by Neal Richardson (npr):*\nHard to tell if it's pandas <\u2013> arrow, a mismatch between arrow and the lighter feather library, or arrow/feather --> R. Possibly related, I see a few open issues about pandas/pyarrow and timestamps.\u00a0\r\n\r\nI'd be curious to see the test the other way (write from R and read in pandas), or even just reading the feather file back into pandas. It would also be interesting to see if there is the same issue reading/writing feather files with the full arrow library and not wesm/feather.\u00a0"
        },
        {
            "created_at": "2019-06-17T13:43:35.310Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-3543?focusedCommentId=16865609) by Wes McKinney (wesm):*\nIt would be nice if this could be assessed against the current Feather-in-Arrow implementation"
        },
        {
            "created_at": "2019-09-13T18:49:07.217Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-3543?focusedCommentId=16929452) by Shannon C Lewis (shannon.lewis):*\nI ran a simple test trying to read delimited file in R, and i'm seeing issue with timestamps changing:\r\n\r\nsystem: Red Hat Enterprise Linux Server release 7.6 (Maipo)\r\n$ rpm -qa |grep arrow\r\narrow-glib-libs-0.14.1-1.el7.x86_64\r\narrow-glib-devel-0.14.1-1.el7.x86_64\r\narrow-devel-0.14.1-1.el7.x86_64\r\narrow-libs-0.14.1-1.el7.x86_64\r\n$ rpm -qa |grep parq\r\nparquet-glib-libs-0.14.1-1.el7.x86_64\r\nparquet-devel-0.14.1-1.el7.x86_64\r\nparquet-libs-0.14.1-1.el7.x86_64\r\nparquet-glib-devel-0.14.1-1.el7.x86_64\r\n\r\n\r\n\r\n> packageVersion(\"arrow\")> packageVersion(\"arrow\")[1] \u20180.14.1.1\u2019\r\n\n|> library(arrow)> Sys.timezone()[1] \"America/Los_Angeles\"> readLines(\"test.log\") [1] \"DateTime\\|LogLevel\\|Type\\|FunctionName\\|Message\\|UserName\"                                                             \r<br> [2] \"2019-09-11 21:36:22\\|[INFO]\\|CentralLogger\\|\\|CentralLogger Initialized\\|shannon.lewis\"                               \r<br> [3] \"2019-09-11 21:36:22\\|[INFO]\\|Controller\\|\\|Controller.R Initialized\\|shannon.lewis\"                                   \r<br> [4] \"2019-09-11 22:43:58\\|[INFO]\\|studyId1\\|archiveStudy\\|Start of archiveStudy : Intialized\\|shannon.lewis\"                \r<br> [5] \"2019-09-11 22:43:58\\|[INFO]\\|studyId1\\|archiveStudy\\|archiveStudy All done, quitting.\\|shannon.lewis\"                  \r<br> [6] \"2019-09-11 23:11:39\\|[INFO]\\|central\\|consolidateStudyLogs\\|Start of consolidateStudyLogs : Initialized\\|shannon.lewis\"\r<br> [7] \"2019-09-12 00:36:22\\|[INFO]\\|CentralLogger\\|\\|CentralLogger Initialized\\|shannon.lewis\"                               \r<br> [8] \"2019-09-12 00:36:22\\|[INFO]\\|Controller\\|\\|Controller.R Initialized\\|shannon.lewis\"                                   \r<br> [9] \"2019-09-12 00:43:58\\|[INFO]\\|studyId1\\|archiveStudy\\|Start of archiveStudy : Intialized\\|shannon.lewis\"                \r<br>[10] \"2019-09-12 00:43:58\\|[INFO]\\|studyId1\\|archiveStudy\\|archiveStudy All done, quitting.\\|shannon.lewis\"                  \r<br>[11] \"2019-09-12 01:11:39\\|[INFO]\\|central\\|consolidateStudyLogs\\|Start of consolidateStudyLogs : Initialized\\|shannon.lewis\"Warning message:In readLines(\"test.log\") : incomplete final line found on 'test.log'> arrow_log <-read_delim_arrow(\"test.log\",delim = \"\\|\")> str(arrow_log)Classes \u2018tbl_df\u2019, \u2018tbl\u2019 and 'data.frame':\t10 obs. of  6 variables:\r<br> $ DateTime    : POSIXct, format: \"2019-09-11 14:36:22\" \"2019-09-11 14:36:22\" \"2019-09-11 15:43:58\" \"2019-09-11 15:43:58\" ...\r<br> $ LogLevel    : chr  \"[INFO]\" \"[INFO]\" \"[INFO]\" \"[INFO]\" ...\r<br> $ Type        : chr  \"CentralLogger\" \"Controller\" \"studyId1\" \"studyId1\" ...\r<br> $ FunctionName: chr  \" \" \" \" \"archiveStudy\" \"archiveStudy\" ...\r<br> $ Message     : chr  \"CentralLogger Initialized\" \"Controller.R Initialized\" \"Start of archiveStudy : Intialized\" \"archiveStudy All done, quitting.\" ...\r<br> $ UserName    : chr  \"shannon.lewis\" \"shannon.lewis\" \"shannon.lewis\" \"shannon.lewis\" ...> arrow_log# A tibble: 10 x 6   DateTime            LogLevel Type          FunctionName         Message                                     UserName        <dttm>              <chr>    <chr>         <chr>                <chr>                                       <chr> 1 2019-09-11 14:36:22 [INFO]   CentralLogger \" \"                  CentralLogger Initialized                   shannon.lewis 2 2019-09-11 14:36:22 [INFO]   Controller    \" \"                  Controller.R Initialized                    shannon.lewis 3 2019-09-11 15:43:58 [INFO]   studyId1      archiveStudy         Start of archiveStudy : Intialized          shannon.lewis 4 2019-09-11 15:43:58 [INFO]   studyId1      archiveStudy         archiveStudy All done, quitting.            shannon.lewis 5 2019-09-11 16:11:39 [INFO]   central       consolidateStudyLogs Start of consolidateStudyLogs : Initialized shannon.lewis 6 2019-09-11 17:36:22 [INFO]   CentralLogger \" \"                  CentralLogger Initialized                   shannon.lewis 7 2019-09-11 17:36:22 [INFO]   Controller    \" \"                  Controller.R Initialized                    shannon.lewis 8 2019-09-11 17:43:58 [INFO]   studyId1      archiveStudy         Start of archiveStudy : Intialized          shannon.lewis 9 2019-09-11 17:43:58 [INFO]   studyId1      archiveStudy         archiveStudy All done, quitting.            shannon.lewis10 2019-09-11 18:11:39 [INFO]   central       consolidateStudyLogs Start of consolidateStudyLogs : Initialized shannon.lewis> base_log <-read.delim(\"test.log\",sep = \"\\|\")> str(base_log)'data.frame':\t10 obs. of  6 variables:\r<br> $ DateTime    : Factor w/ 6 levels \"2019-09-11 21:36:22\",..: 1 1 2 2 3 4 4 5 5 6\r<br> $ LogLevel    : Factor w/ 1 level \"[INFO]\": 1 1 1 1 1 1 1 1 1 1\r<br> $ Type        : Factor w/ 4 levels \"central\",\"CentralLogger\",..: 2 3 4 4 1 2 3 4 4 1\r<br> $ FunctionName: Factor w/ 3 levels \" \",\"archiveStudy\",..: 1 1 2 2 3 1 1 2 2 3\r<br> $ Message     : Factor w/ 5 levels \"archiveStudy All done, quitting.\",..: 2 3 4 1 5 2 3 4 1 5\r<br> $ UserName    : Factor w/ 1 level \"shannon.lewis\": 1 1 1 1 1 1 1 1 1 1> base_log              DateTime LogLevel          Type         FunctionName                                     Message      UserName\r<br>1  2019-09-11 21:36:22   [INFO] CentralLogger                                        CentralLogger Initialized shannon.lewis\r<br>2  2019-09-11 21:36:22   [INFO]    Controller                                         Controller.R Initialized shannon.lewis\r<br>3  2019-09-11 22:43:58   [INFO]      studyId1         archiveStudy          Start of archiveStudy : Intialized shannon.lewis\r<br>4  2019-09-11 22:43:58   [INFO]      studyId1         archiveStudy            archiveStudy All done, quitting. shannon.lewis\r<br>5  2019-09-11 23:11:39   [INFO]       central consolidateStudyLogs Start of consolidateStudyLogs : Initialized shannon.lewis\r<br>6  2019-09-12 00:36:22   [INFO] CentralLogger                                        CentralLogger Initialized shannon.lewis\r<br>7  2019-09-12 00:36:22   [INFO]    Controller                                         Controller.R Initialized shannon.lewis\r<br>8  2019-09-12 00:43:58   [INFO]      studyId1         archiveStudy          Start of archiveStudy : Intialized shannon.lewis\r<br>9  2019-09-12 00:43:58   [INFO]      studyId1         archiveStudy            archiveStudy All done, quitting. shannon.lewis\r<br>10 2019-09-12 01:11:39   [INFO]       central consolidateStudyLogs Start of consolidateStudyLogs : Initialized shannon.lewis|\r|\n|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|\n|\u00a0|\r|\n|\r|\n|\u00a0|\r|\n"
        },
        {
            "created_at": "2019-09-13T19:32:24.707Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-3543?focusedCommentId=16929476) by Neal Richardson (npr):*\nHi [~shannon.lewis], that output is a little hard to read, what are you seeing that's a problem? AFAICT the only difference I'm seeing is that `arrow::read_delim_arrow()` detects that the first column is a timestamp, while `read.delim()` doesn't parse it and keeps it a `factor`. "
        },
        {
            "created_at": "2019-09-13T22:17:39.689Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-3543?focusedCommentId=16929565) by Shannon C Lewis (shannon.lewis):*\nHi Neal,\u00a0\r\n\r\nSorry for the formatting....yes it seems that read_delim_arrow detects it is a\u00a0POSIXct, format....\r\n I tried another test and split the datetime field into date and time fields.\r\n\r\nNow the date field is a\u00a0POSIXct, format, and the time is a character.\r\n\r\nBut the date field is one day before and at time of 17:00:00:\r\n Classes \u2018tbl_df\u2019, \u2018tbl\u2019 and 'data.frame': 10 obs. of 7 variables:\r\n $ Date : POSIXct, format: \"2019-09-10 17:00:00\" \"2019-09-10 17:00:00\" \"2019-09-10 17:00:00\" \"2019-09-10 17:00:00\" ...\r\n $ Time : chr \"21:36:22\" \"21:36:22\" \"22:43:58\" \"22:43:58\" ...\r\n $ LogLevel : chr \"[INFO]\" \"[INFO]\" \"[INFO]\" \"[INFO]\" ...\r\n\r\ntbl_df:\r\n\r\nDate Time LogLevel Type FunctionName Message UserName\r\n 1 **<font color=\"#ff0000\">2019-09-10 17:00:00</font>** 21:36:22 [INFO] CentralLogger CentralLogger Initialized shannon.lewis\r\n 2 2019-09-10 17:00:00 21:36:22 [INFO] Controller Controller.R Initialized shannon.lewis\r\n\r\nLogfile:\r\n Date|Time|LogLevel|Type|FunctionName|Message|UserName\r\n **<font color=\"#00875a\">2019-09-11</font>**|21:36:22|[INFO]|CentralLogger| |CentralLogger Initialized|shannon.lewis\r\n 2019-09-11|21:36:22|[INFO]|Controller| |Controller.R Initialized|shannon.lewis\r\n\r\n\r\nUpdate:\r\n\r\nI also read the same log file with readr (read_delim) it detects as POSIXct and date times are correct (both as datetime field and date field and time field split):\r\n\r\n$ DateTime : POSIXct, format: \"2019-09-11 21:36:22\" \"2019-09-11 21:36:22\"\r\n1. A tibble: 10 x 7\n    Date Time LogLevel Type FunctionName Message UserName \n    <date> <time> <chr> <chr> <chr> <chr> <chr> \n    1 2019-09-11 21:36:22 [INFO] CentralLogger NA CentralLogger Initialized shannon.lewis\n    2 2019-09-11 21:36:22 [INFO] Controller NA Controller.R Initialized shannon.lewis\n   \n   \u00a0\n   \n   \u00a0\n   \n   Shannon"
        },
        {
            "created_at": "2019-09-13T23:06:06.187Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-3543?focusedCommentId=16929592) by Neal Richardson (npr):*\nI can't quite put my finger on it but I think there's some mismatch on how the C++ library and R interpret data without a timezone. The [C++ library docs](http://arrow.apache.org/docs/cpp/api/datatype.html#_CPPv4N5arrow13TimestampTypeE) say \"If a timezone-aware field contains a recognized timezone, its values may be localized to that locale upon display; the values of timezone-naive fields must always be displayed \u201cas is\u201d, with no localization performed on them.\" \r\n\r\nBut R's print default is the current time zone: https://stat.ethz.ch/R-manual/R-devel/library/base/html/strptime.html\r\n\r\nMy guess is that readr::read_delim interprets timestamps without a timezone to be the current time zone, but arrow C++ interprets that as UTC, which becomes a problem when R tries to print the timestamp. \r\n\r\nI'm guessing that if you did `print(df$Date, tz=\"GMT\")` it would look as you expect. \r\n\r\nIt's reasonable to believe that if this is the issue for you, it's also the cause for the original report, which was about Feather and the `feather` R package, not read_delim_arrow. \r\n\r\nOther fun fact I saw while digging in: the arrow-to-vector code for timestamp doesn't seem to consider time zone information if it does exist, so we should handle that too. https://github.com/apache/arrow/blob/master/r/src/array_to_vector.cpp#L504-L514\r\n\r\n"
        },
        {
            "created_at": "2019-09-13T23:18:14.281Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-3543?focusedCommentId=16929603) by Neal Richardson (npr):*\nI think a solution would be to have `Converter_Timestamp` attach a \"tzone\" attribute if the timestamp type has a timezone set. (There may have to be a translation between what Arrow C++ understands as a timezone string and what R understands.) If no \"tzone\" is set, then the \"class\" attribute should have a \"naivePOSIXct\" subclass appended. And then we define\r\n\r\n```r\n\r\nformat.naivePOSIXct <- function(x, format = \"\", tz = \"GMT\", usetz = FALSE, ...) {\r\n  format.POSIXct(x, format, tz, usetz, ...)\r\n}\r\n```\r\n\r\nnoting that the default for \"tz\" is now \"GMT\" instead of \"\", the default for `format.POSIXct` which means to use the current locale. So when this timestamp column prints in R, it will appear to be timezoneless and faithfully represent the number of seconds in the epoch."
        },
        {
            "created_at": "2019-09-14T15:39:11.004Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-3543?focusedCommentId=16929781) by Shannon C Lewis (shannon.lewis):*\nHey Neal,\r\n\r\nyep, when I run print(arrow_log$datetime, tz=\"GMT\") i'm getting the correct datetime:\r\n> print(arrow_log$DateTime,tz=\"GMT\")\r\n [1] \"2019-09-11 21:36:22 GMT\" \"2019-09-11 21:36:22 GMT\" \"2019-09-11 22:43:58 GMT\" \"2019-09-11 22:43:58 GMT\" \"2019-09-11 23:11:39 GMT\" \"2019-09-12 00:36:22 GMT\"\r\n [7] \"2019-09-12 00:36:22 GMT\" \"2019-09-12 00:43:58 GMT\" \"2019-09-12 00:43:58 GMT\" \"2019-09-12 01:11:39 GMT\r\n\r\nI also tested this with saving with python to feather and reading with both feather and arrow:\r\n> print(py_feather$DateTime,tz=\"GMT\")\r\n [1] \"2019-09-11 21:36:22 GMT\" \"2019-09-11 21:36:22 GMT\" \"2019-09-11 22:43:58 GMT\" \"2019-09-11 22:43:58 GMT\" \"2019-09-11 23:11:39 GMT\" \"2019-09-12 00:36:22 GMT\"\r\n [7] \"2019-09-12 00:36:22 GMT\" \"2019-09-12 00:43:58 GMT\" \"2019-09-12 00:43:58 GMT\" \"2019-09-12 01:11:39 GMT\"\r\n\r\nSo it seem like you have identified the issue :)\r\n"
        },
        {
            "created_at": "2019-09-15T00:32:51.144Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-3543?focusedCommentId=16929846) by Olaf (Olafsson):*\nOP here. so we finally close to have this fixed? amazing!"
        },
        {
            "created_at": "2019-09-15T15:12:35.251Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-3543?focusedCommentId=16929982) by Wes McKinney (wesm):*\nA PR seems to still be needed"
        },
        {
            "created_at": "2019-10-07T19:27:25.670Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-3543?focusedCommentId=16946162) by Shannon C Lewis (shannon.lewis):*\nAny updates on this?"
        },
        {
            "created_at": "2019-10-23T13:55:40.742Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-3543?focusedCommentId=16957884) by Shannon C Lewis (shannon.lewis):*\nJust checking in any updates on this?"
        },
        {
            "created_at": "2019-10-23T14:04:26.368Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-3543?focusedCommentId=16957889) by Wes McKinney (wesm):*\nThere will be an update on JIRA when there is activity. "
        },
        {
            "created_at": "2020-02-28T16:00:34.692Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-3543?focusedCommentId=17047759) by Neal Richardson (npr):*\nIssue resolved by pull request 6488\n<https://github.com/apache/arrow/pull/6488>"
        }
    ]
}