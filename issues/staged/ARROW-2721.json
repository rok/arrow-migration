{
    "issue": {
        "title": "[C++] Link error with Arrow C++ build with -DARROW_ORC=ON on CentOS 7",
        "body": "***Note**: This issue was originally created as [ARROW-2721](https://issues.apache.org/jira/browse/ARROW-2721). Please see the [migration documentation](https://gist.github.com/toddfarmer/12aa88361532d21902818a6044fda4c3) for further details.*\n\n### Original Issue Description:\nBuild master with -DARROW_ORC=ON:\r\n\r\n```shell\n\r\nsudo yum install -y epel-release\r\nsudo yum groupinstall -y \"Development Tools\"\r\nsudo yum install -y \\\r\n  autoconf-archive \\\r\n  boost-devel \\\r\n  cmake3 \\\r\n  git \\\r\n  gobject-introspection-devel \\\r\n  gtk-doc \\\r\n  jemalloc-devel \\\r\n  pkg-config \\\r\n  tar\r\ngit clone https://github.com/apache/arrow.git\r\nmkdir -p arrow/cpp/build\r\ncd arrow/cpp/build\r\nLANG=C cmake3 .. -DCMAKE_BUILD_TYPE=release -DARROW_ORC=ON\r\nmake -j4\r\nsudo make install\r\n```\r\n\r\nSample program:\r\n\r\n```cpp\n\r\n#include <arrow/api.h>\r\n\r\nint main(void) {\r\n  return 0;\r\n}\r\n```\r\n\r\nBuild the sample program:\r\n\r\n```\n\r\n% g++ -std=c++11 -o sample $(PKG_CONFIG_PATH=/usr/local/lib64/pkgconfig pkg-config --cflags --libs arrow) sample.cpp\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::internal::WireFormat::SerializeUnknownFields(google::protobuf::UnknownFieldSet const&, google::protobuf::io::CodedOutputStream*)'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::Message::SpaceUsed() const'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::DescriptorPool::FindFileByName(std::string const&) const'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::internal::WireFormatLite::WriteDouble(int, double, google::protobuf::io::CodedOutputStream*)'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::io::CodedInputStream::BytesUntilTotalBytesLimit() const'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::DescriptorPool::InternalAddGeneratedFile(void const*, int)'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::internal::StringTypeHandlerBase::New()'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::io::ZeroCopyOutputStream::~ZeroCopyOutputStream()'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::Message::CheckTypeAndMergeFrom(google::protobuf::MessageLite const&)'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::MessageLite::ParseFromZeroCopyStream(google::protobuf::io::ZeroCopyInputStream*)'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::io::CodedInputStream::ReadRaw(void*, int)'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::MessageFactory::InternalRegisterGeneratedFile(char const*, void (*)(std::string const&))'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::io::CodedOutputStream::VarintSize32Fallback(unsigned int)'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::internal::LogMessage::LogMessage(google::protobuf::LogLevel, char const*, int)'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::internal::empty_string_'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::internal::StringTypeHandlerBase::Delete(std::string*)'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::io::CodedOutputStream::WriteVarint64(unsigned long)'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::DescriptorPool::generated_pool()'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::internal::WireFormatLite::WriteEnum(int, int, google::protobuf::io::CodedOutputStream*)'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::internal::WireFormatLite::WriteString(int, std::string const&, google::protobuf::io::CodedOutputStream*)'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::internal::WireFormat::SerializeUnknownFieldsToArray(google::protobuf::UnknownFieldSet const&, unsigned char*)'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::io::CodedInputStream::ReadTagFallback()'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::internal::OnShutdown(void (*)())'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::internal::RepeatedPtrFieldBase::Swap(google::protobuf::internal::RepeatedPtrFieldBase*)'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::MessageFactory::generated_factory()'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::UnknownFieldSet::AddVarint(int, unsigned long)'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::io::CodedInputStream::Skip(int)'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::internal::WireFormat::ComputeUnknownFieldsSize(google::protobuf::UnknownFieldSet const&)'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::io::CodedOutputStream::VarintSize64(unsigned long)'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::io::CodedInputStream::ReadVarint32Fallback(unsigned int*)'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::internal::WireFormatLite::WriteSInt64(int, long, google::protobuf::io::CodedOutputStream*)'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::internal::WireFormatLite::ReadString(google::protobuf::io::CodedInputStream*, std::string*)'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::io::CodedInputStream::BytesUntilLimit() const'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::MessageLite::SerializeToString(std::string*) const'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::internal::WireFormatLite::WriteFixed64(int, unsigned long, google::protobuf::io::CodedOutputStream*)'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::internal::LogMessage::~LogMessage()'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::internal::WireFormatLite::WriteUInt32(int, unsigned int, google::protobuf::io::CodedOutputStream*)'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::internal::LogFinisher::operator=(google::protobuf::internal::LogMessage&)'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::internal::InitEmptyString()'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::internal::WireFormatLite::WriteSInt32(int, int, google::protobuf::io::CodedOutputStream*)'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::UnknownFieldSet::MergeFrom(google::protobuf::UnknownFieldSet const&)'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::internal::WireFormat::SkipField(google::protobuf::io::CodedInputStream*, unsigned int, google::protobuf::UnknownFieldSet*)'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::internal::RepeatedPtrFieldBase::Reserve(int)'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::io::CodedOutputStream::WriteStringWithSizeToArray(std::string const&, unsigned char*)'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::internal::WireFormatLite::WriteStringMaybeAliased(int, std::string const&, google::protobuf::io::CodedOutputStream*)'\r\n/usr/local/lib64/libarrow.so: undefined reference to `typeinfo for google::protobuf::io::ZeroCopyOutputStream'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::MessageLite::ParseFromString(std::string const&)'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::Message::GetTypeName() const'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::internal::LogMessage::operator<<(char const*)'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::internal::WireFormatLite::ReadBytes(google::protobuf::io::CodedInputStream*, std::string*)'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::UnknownFieldSet::~UnknownFieldSet()'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::internal::WireFormatLite::WriteUInt64(int, unsigned long, google::protobuf::io::CodedOutputStream*)'\r\n/usr/local/lib64/libarrow.so: undefined reference to `typeinfo for google::protobuf::Message'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::internal::ReflectionOps::Merge(google::protobuf::Message const&, google::protobuf::Message*)'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::Message::~Message()'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::MessageLite::ParseFromArray(void const*, int)'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::Message::DiscardUnknownFields()'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::MessageFactory::InternalRegisterGeneratedMessage(google::protobuf::Descriptor const*, google::protobuf::Message const*)'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::io::CodedOutputStream::WriteVarint32(unsigned int)'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::GoogleOnceInitImpl(long*, google::protobuf::Closure*)'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::UnknownFieldSet::ClearFallback()'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::io::CodedOutputStream::WriteVarint32FallbackToArray(unsigned int, unsigned char*)'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::UnknownFieldSet::UnknownFieldSet()'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::internal::WireFormatLite::WriteMessageMaybeToArray(int, google::protobuf::MessageLite const&, google::protobuf::io::CodedOutputStream*)'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::io::CodedOutputStream::WriteVarint64ToArray(unsigned long, unsigned char*)'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::io::CodedInputStream::ReadLittleEndian64Fallback(unsigned long*)'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::internal::FunctionClosure0::~FunctionClosure0()'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::internal::WireFormatLite::WriteBytesMaybeAliased(int, std::string const&, google::protobuf::io::CodedOutputStream*)'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::Message::InitializationErrorString() const'\r\n/usr/local/lib64/libarrow.so: undefined reference to `typeinfo for google::protobuf::io::ZeroCopyInputStream'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::internal::empty_string_once_init_'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::internal::VerifyVersion(int, int, char const*)'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::io::ZeroCopyInputStream::~ZeroCopyInputStream()'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::io::CodedInputStream::PushLimit(int)'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::io::CodedInputStream::PopLimit(int)'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::internal::GeneratedMessageReflection::GeneratedMessageReflection(google::protobuf::Descriptor const*, google::protobuf::Message const*, int const*, int, int, int, google::protobuf::DescriptorPool const*, google::protobuf::MessageFactory*, int)'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::io::CodedInputStream::ReadVarint64Fallback(unsigned long*)'\r\n/usr/local/lib64/libarrow.so: undefined reference to `vtable for google::protobuf::internal::FunctionClosure0'\r\n/usr/local/lib64/libarrow.so: undefined reference to `google::protobuf::internal::WireFormatLite::WriteBool(int, bool, google::protobuf::io::CodedOutputStream*)'\r\ncollect2: error: ld returned 1 exit status\r\n```\r\n",
        "created_at": "2018-06-19T07:05:22.000Z",
        "updated_at": "2018-06-21T12:57:08.000Z",
        "labels": [
            "Migrated from Jira",
            "Component: C++",
            "Type: bug"
        ],
        "closed": true,
        "closed_at": "2018-06-19T08:39:57.000Z"
    },
    "comments": [
        {
            "created_at": "2018-06-19T08:39:57.052Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-2721?focusedCommentId=16516805) by Uwe Korn (uwe):*\nIssue resolved by pull request 2146\n<https://github.com/apache/arrow/pull/2146>"
        }
    ]
}