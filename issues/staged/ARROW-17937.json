{
    "issue": {
        "title": "[C++] Building of Arrow C++ (dataset) errors on Windows",
        "body": "***Note**: This issue was originally created as [ARROW-17937](https://issues.apache.org/jira/browse/ARROW-17937). Please see the [migration documentation](https://gist.github.com/toddfarmer/12aa88361532d21902818a6044fda4c3) for further details.*\n\n### Original Issue Description:\nBuilding of Arrow C++ fails for me on Windows if I keep static build on by default and works with ARROW_STATIC=OFF:\r\n```java\n\r\n(pyarrow-dev310) C:\\Users\\Alenka\\repos\\arrow\\cpp\\build>cmake --build . --target install --config Release[482/590] Building CXX object src\\arrow\\dataset\\CMakeFiles\\arrow_dataset_static.dir\\discovery.cc.objFAILED: src/arrow/dataset/CMakeFiles/arrow_dataset_static.dir/discovery.cc.objC:\\PROGRA~2\\MIB055~1\\2017\\COMMUN~1\\VC\\Tools\\MSVC\\1416~1.270\\bin\\Hostx64\\x64\\cl.exe  /nologo /TP -DARROW_DS_EXPORTING -DARROW_FLIGHT_SQL_STATIC -DARROW_FLIGHT_STATIC -DARROW_HAVE_RUNTIME_AVX2 -DARROW_HAVE_RUNTIME_AVX512 -DARROW_HAVE_RUNTIME_BMI2 -DARROW_HAVE_RUNTIME_SSE4_2 -DARROW_HAVE_SSE4_2 -DARROW_HDFS -DARROW_STATIC -DARROW_WITH_LZ4 -DARROW_WITH_RE2 -DARROW_WITH_SNAPPY -DARROW_WITH_TIMING_TESTS -DARROW_WITH_UTF8PROC -DARROW_WITH_ZLIB -DARROW_WITH_ZSTD -DBOOST_ALL_DYN_LINK -DBOOST_ALL_NO_LIB -DPARQUET_STATIC -DURI_STATIC_BUILD -D_CRT_SECURE_NO_WARNINGS -D_ENABLE_EXTENDED_ALIGNED_STORAGE -IC:\\Users\\Alenka\\repos\\arrow\\cpp\\build\\src -IC:\\Users\\Alenka\\repos\\arrow\\cpp\\src -IC:\\Users\\Alenka\\repos\\arrow\\cpp\\src\\generated -IC:\\Users\\Alenka\\repos\\arrow\\cpp\\src\\parquet -IC:\\Users\\Alenka\\repos\\arrow\\cpp\\thirdparty\\flatbuffers\\include -IC:\\Users\\Alenka\\repos\\arrow\\cpp\\thirdparty\\hadoop\\include -IC:\\Users\\Alenka\\anaconda3\\envs\\pyarrow-dev310\\Library\\include /DWIN32 /D_WINDOWS  /GR /EHsc /D_SILENCE_TR1_NAMESPACE_DEPRECATION_WARNING   /EHsc /wd5105 /bigobj /utf-8 /W3 /wd4800 /wd4996 /wd4065  /WX /MP /MD /O2 /Ob2 /DNDEBUG /showIncludes /Fosrc\\arrow\\dataset\\CMakeFiles\\arrow_dataset_static.dir\\discovery.cc.obj /Fdsrc\\arrow\\dataset\\CMakeFiles\\arrow_dataset_static.dir\\arrow_dataset_static.pdb /FS -c C:\\Users\\Alenka\\repos\\arrow\\cpp\\src\\arrow\\dataset\\discovery.ccC:\\Users\\Alenka\\repos\\arrow\\cpp\\src\\arrow/dataset/scanner.h(427): error C2220: warning treated as error - no 'object' file generatedC:\\Users\\Alenka\\repos\\arrow\\cpp\\src\\arrow/dataset/scanner.h(427): warning C4275: non dll-interface class 'arrow::compute::ExecNodeOptions' used as base for dll-interface class 'arrow::dataset::ScanNodeOptions'C:\\Users\\Alenka\\repos\\arrow\\cpp\\src\\arrow/compute/exec/options.h(42): note: see declaration of 'arrow::compute::ExecNodeOptions'C:\\Users\\Alenka\\repos\\arrow\\cpp\\src\\arrow/dataset/scanner.h(427): note: see declaration of 'arrow::dataset::ScanNodeOptions'C:\\Users\\Alenka\\repos\\arrow\\cpp\\src\\arrow/dataset/file_base.h(422): warning C4275: non dll-interface class 'arrow::compute::ExecNodeOptions' used as base for dll-interface class 'arrow::dataset::WriteNodeOptions'C:\\Users\\Alenka\\repos\\arrow\\cpp\\src\\arrow/compute/exec/options.h(42): note: see declaration of 'arrow::compute::ExecNodeOptions'C:\\Users\\Alenka\\repos\\arrow\\cpp\\src\\arrow/dataset/file_base.h(422): note: see declaration of 'arrow::dataset::WriteNodeOptions'[483/590] Building CXX object src\\arrow\\dataset\\CMakeFiles\\arrow_dataset_static.dir\\dataset_writer.cc.objFAILED: src/arrow/dataset/CMakeFiles/arrow_dataset_static.dir/dataset_writer.cc.objC:\\PROGRA~2\\MIB055~1\\2017\\COMMUN~1\\VC\\Tools\\MSVC\\1416~1.270\\bin\\Hostx64\\x64\\cl.exe  /nologo /TP -DARROW_DS_EXPORTING -DARROW_FLIGHT_SQL_STATIC -DARROW_FLIGHT_STATIC -DARROW_HAVE_RUNTIME_AVX2 -DARROW_HAVE_RUNTIME_AVX512 -DARROW_HAVE_RUNTIME_BMI2 -DARROW_HAVE_RUNTIME_SSE4_2 -DARROW_HAVE_SSE4_2 -DARROW_HDFS -DARROW_STATIC -DARROW_WITH_LZ4 -DARROW_WITH_RE2 -DARROW_WITH_SNAPPY -DARROW_WITH_TIMING_TESTS -DARROW_WITH_UTF8PROC -DARROW_WITH_ZLIB -DARROW_WITH_ZSTD -DBOOST_ALL_DYN_LINK -DBOOST_ALL_NO_LIB -DPARQUET_STATIC -DURI_STATIC_BUILD -D_CRT_SECURE_NO_WARNINGS -D_ENABLE_EXTENDED_ALIGNED_STORAGE -IC:\\Users\\Alenka\\repos\\arrow\\cpp\\build\\src -IC:\\Users\\Alenka\\repos\\arrow\\cpp\\src -IC:\\Users\\Alenka\\repos\\arrow\\cpp\\src\\generated -IC:\\Users\\Alenka\\repos\\arrow\\cpp\\src\\parquet -IC:\\Users\\Alenka\\repos\\arrow\\cpp\\thirdparty\\flatbuffers\\include -IC:\\Users\\Alenka\\repos\\arrow\\cpp\\thirdparty\\hadoop\\include -IC:\\Users\\Alenka\\anaconda3\\envs\\pyarrow-dev310\\Library\\include /DWIN32 /D_WINDOWS  /GR /EHsc /D_SILENCE_TR1_NAMESPACE_DEPRECATION_WARNING   /EHsc /wd5105 /bigobj /utf-8 /W3 /wd4800 /wd4996 /wd4065  /WX /MP /MD /O2 /Ob2 /DNDEBUG /showIncludes /Fosrc\\arrow\\dataset\\CMakeFiles\\arrow_dataset_static.dir\\dataset_writer.cc.obj /Fdsrc\\arrow\\dataset\\CMakeFiles\\arrow_dataset_static.dir\\arrow_dataset_static.pdb /FS -c C:\\Users\\Alenka\\repos\\arrow\\cpp\\src\\arrow\\dataset\\dataset_writer.ccC:\\Users\\Alenka\\repos\\arrow\\cpp\\src\\arrow/dataset/scanner.h(427): error C2220: warning treated as error - no 'object' file generatedC:\\Users\\Alenka\\repos\\arrow\\cpp\\src\\arrow/dataset/scanner.h(427): warning C4275: non dll-interface class 'arrow::compute::ExecNodeOptions' used as base for dll-interface class 'arrow::dataset::ScanNodeOptions'C:\\Users\\Alenka\\repos\\arrow\\cpp\\src\\arrow/compute/exec/options.h(42): note: see declaration of 'arrow::compute::ExecNodeOptions'C:\\Users\\Alenka\\repos\\arrow\\cpp\\src\\arrow/dataset/scanner.h(427): note: see declaration of 'arrow::dataset::ScanNodeOptions'C:\\Users\\Alenka\\repos\\arrow\\cpp\\src\\arrow/dataset/file_base.h(422): warning C4275: non dll-interface class 'arrow::compute::ExecNodeOptions' used as base for dll-interface class 'arrow::dataset::WriteNodeOptions'C:\\Users\\Alenka\\repos\\arrow\\cpp\\src\\arrow/compute/exec/options.h(42): note: see declaration of 'arrow::compute::ExecNodeOptions'C:\\Users\\Alenka\\repos\\arrow\\cpp\\src\\arrow/dataset/file_base.h(422): note: see declaration of 'arrow::dataset::WriteNodeOptions'[484/590] Building CXX object src\\arrow\\dataset\\CMakeFiles\\arrow_dataset_static.dir\\dataset.cc.objFAILED: src/arrow/dataset/CMakeFiles/arrow_dataset_static.dir/dataset.cc.objC:\\PROGRA~2\\MIB055~1\\2017\\COMMUN~1\\VC\\Tools\\MSVC\\1416~1.270\\bin\\Hostx64\\x64\\cl.exe  /nologo /TP -DARROW_DS_EXPORTING -DARROW_FLIGHT_SQL_STATIC -DARROW_FLIGHT_STATIC -DARROW_HAVE_RUNTIME_AVX2 -DARROW_HAVE_RUNTIME_AVX512 -DARROW_HAVE_RUNTIME_BMI2 -DARROW_HAVE_RUNTIME_SSE4_2 -DARROW_HAVE_SSE4_2 -DARROW_HDFS -DARROW_STATIC -DARROW_WITH_LZ4 -DARROW_WITH_RE2 -DARROW_WITH_SNAPPY -DARROW_WITH_TIMING_TESTS -DARROW_WITH_UTF8PROC -DARROW_WITH_ZLIB -DARROW_WITH_ZSTD -DBOOST_ALL_DYN_LINK -DBOOST_ALL_NO_LIB -DPARQUET_STATIC -DURI_STATIC_BUILD -D_CRT_SECURE_NO_WARNINGS -D_ENABLE_EXTENDED_ALIGNED_STORAGE -IC:\\Users\\Alenka\\repos\\arrow\\cpp\\build\\src -IC:\\Users\\Alenka\\repos\\arrow\\cpp\\src -IC:\\Users\\Alenka\\repos\\arrow\\cpp\\src\\generated -IC:\\Users\\Alenka\\repos\\arrow\\cpp\\src\\parquet -IC:\\Users\\Alenka\\repos\\arrow\\cpp\\thirdparty\\flatbuffers\\include -IC:\\Users\\Alenka\\repos\\arrow\\cpp\\thirdparty\\hadoop\\include -IC:\\Users\\Alenka\\anaconda3\\envs\\pyarrow-dev310\\Library\\include /DWIN32 /D_WINDOWS  /GR /EHsc /D_SILENCE_TR1_NAMESPACE_DEPRECATION_WARNING   /EHsc /wd5105 /bigobj /utf-8 /W3 /wd4800 /wd4996 /wd4065  /WX /MP /MD /O2 /Ob2 /DNDEBUG /showIncludes /Fosrc\\arrow\\dataset\\CMakeFiles\\arrow_dataset_static.dir\\dataset.cc.obj /Fdsrc\\arrow\\dataset\\CMakeFiles\\arrow_dataset_static.dir\\arrow_dataset_static.pdb /FS -c C:\\Users\\Alenka\\repos\\arrow\\cpp\\src\\arrow\\dataset\\dataset.ccC:\\Users\\Alenka\\repos\\arrow\\cpp\\src\\arrow/dataset/scanner.h(427): error C2220: warning treated as error - no 'object' file generatedC:\\Users\\Alenka\\repos\\arrow\\cpp\\src\\arrow/dataset/scanner.h(427): warning C4275: non dll-interface class 'arrow::compute::ExecNodeOptions' used as base for dll-interface class 'arrow::dataset::ScanNodeOptions'C:\\Users\\Alenka\\repos\\arrow\\cpp\\src\\arrow/compute/exec/options.h(42): note: see declaration of 'arrow::compute::ExecNodeOptions'C:\\Users\\Alenka\\repos\\arrow\\cpp\\src\\arrow/dataset/scanner.h(427): note: see declaration of 'arrow::dataset::ScanNodeOptions'C:\\Users\\Alenka\\repos\\arrow\\cpp\\src\\arrow/dataset/file_base.h(422): warning C4275: non dll-interface class 'arrow::compute::ExecNodeOptions' used as base for dll-interface class 'arrow::dataset::WriteNodeOptions'C:\\Users\\Alenka\\repos\\arrow\\cpp\\src\\arrow/compute/exec/options.h(42): note: see declaration of 'arrow::compute::ExecNodeOptions'C:\\Users\\Alenka\\repos\\arrow\\cpp\\src\\arrow/dataset/file_base.h(422): note: see declaration of 'arrow::dataset::WriteNodeOptions'[486/590] Linking CXX static library release\\arrow_static.libencode_internal_avx2.cc.obj : warning LNK4221: This object file does not define any previously undefined public symbols, so it will not be used by any link operation that consumes this librarycompare_internal_avx2.cc.obj : warning LNK4221: This object file does not define any previously undefined public symbols, so it will not be used by any link operation that consumes this libraryutil_avx2.cc.obj : warning LNK4221: This object file does not define any previously undefined public symbols, so it will not be used by any link operation that consumes this libraryswiss_join_avx2.cc.obj : warning LNK4221: This object file does not define any previously undefined public symbols, so it will not be used by any link operation that consumes this librarykey_map_avx2.cc.obj : warning LNK4221: This object file does not define any previously undefined public symbols, so it will not be used by any link operation that consumes this librarykey_hash_avx2.cc.obj : warning LNK4221: This object file does not define any previously undefined public symbols, so it will not be used by any link operation that consumes this librarybloom_filter_avx2.cc.obj : warning LNK4221: This object file does not define any previously undefined public symbols, so it will not be used by any link operation that consumes this library[487/590] Building CXX object src\\arrow\\dataset\\CMakeFiles\\arrow_dataset_static.dir\\file_ipc.cc.objFAILED: src/arrow/dataset/CMakeFiles/arrow_dataset_static.dir/file_ipc.cc.objC:\\PROGRA~2\\MIB055~1\\2017\\COMMUN~1\\VC\\Tools\\MSVC\\1416~1.270\\bin\\Hostx64\\x64\\cl.exe  /nologo /TP -DARROW_DS_EXPORTING -DARROW_FLIGHT_SQL_STATIC -DARROW_FLIGHT_STATIC -DARROW_HAVE_RUNTIME_AVX2 -DARROW_HAVE_RUNTIME_AVX512 -DARROW_HAVE_RUNTIME_BMI2 -DARROW_HAVE_RUNTIME_SSE4_2 -DARROW_HAVE_SSE4_2 -DARROW_HDFS -DARROW_STATIC -DARROW_WITH_LZ4 -DARROW_WITH_RE2 -DARROW_WITH_SNAPPY -DARROW_WITH_TIMING_TESTS -DARROW_WITH_UTF8PROC -DARROW_WITH_ZLIB -DARROW_WITH_ZSTD -DBOOST_ALL_DYN_LINK -DBOOST_ALL_NO_LIB -DPARQUET_STATIC -DURI_STATIC_BUILD -D_CRT_SECURE_NO_WARNINGS -D_ENABLE_EXTENDED_ALIGNED_STORAGE -IC:\\Users\\Alenka\\repos\\arrow\\cpp\\build\\src -IC:\\Users\\Alenka\\repos\\arrow\\cpp\\src -IC:\\Users\\Alenka\\repos\\arrow\\cpp\\src\\generated -IC:\\Users\\Alenka\\repos\\arrow\\cpp\\src\\parquet -IC:\\Users\\Alenka\\repos\\arrow\\cpp\\thirdparty\\flatbuffers\\include -IC:\\Users\\Alenka\\repos\\arrow\\cpp\\thirdparty\\hadoop\\include -IC:\\Users\\Alenka\\anaconda3\\envs\\pyarrow-dev310\\Library\\include /DWIN32 /D_WINDOWS  /GR /EHsc /D_SILENCE_TR1_NAMESPACE_DEPRECATION_WARNING   /EHsc /wd5105 /bigobj /utf-8 /W3 /wd4800 /wd4996 /wd4065  /WX /MP /MD /O2 /Ob2 /DNDEBUG /showIncludes /Fosrc\\arrow\\dataset\\CMakeFiles\\arrow_dataset_static.dir\\file_ipc.cc.obj /Fdsrc\\arrow\\dataset\\CMakeFiles\\arrow_dataset_static.dir\\arrow_dataset_static.pdb /FS -c C:\\Users\\Alenka\\repos\\arrow\\cpp\\src\\arrow\\dataset\\file_ipc.ccC:\\Users\\Alenka\\repos\\arrow\\cpp\\src\\arrow/dataset/scanner.h(427): error C2220: warning treated as error - no 'object' file generatedC:\\Users\\Alenka\\repos\\arrow\\cpp\\src\\arrow/dataset/scanner.h(427): warning C4275: non dll-interface class 'arrow::compute::ExecNodeOptions' used as base for dll-interface class 'arrow::dataset::ScanNodeOptions'C:\\Users\\Alenka\\repos\\arrow\\cpp\\src\\arrow/compute/exec/options.h(42): note: see declaration of 'arrow::compute::ExecNodeOptions'C:\\Users\\Alenka\\repos\\arrow\\cpp\\src\\arrow/dataset/scanner.h(427): note: see declaration of 'arrow::dataset::ScanNodeOptions'C:\\Users\\Alenka\\repos\\arrow\\cpp\\src\\arrow/dataset/file_base.h(422): warning C4275: non dll-interface class 'arrow::compute::ExecNodeOptions' used as base for dll-interface class 'arrow::dataset::WriteNodeOptions'C:\\Users\\Alenka\\repos\\arrow\\cpp\\src\\arrow/compute/exec/options.h(42): note: see declaration of 'arrow::compute::ExecNodeOptions'C:\\Users\\Alenka\\repos\\arrow\\cpp\\src\\arrow/dataset/file_base.h(422): note: see declaration of 'arrow::dataset::WriteNodeOptions'[488/590] Building CXX object src\\arrow\\dataset\\CMakeFiles\\arrow_dataset_static.dir\\file_base.cc.objFAILED: src/arrow/dataset/CMakeFiles/arrow_dataset_static.dir/file_base.cc.objC:\\PROGRA~2\\MIB055~1\\2017\\COMMUN~1\\VC\\Tools\\MSVC\\1416~1.270\\bin\\Hostx64\\x64\\cl.exe  /nologo /TP -DARROW_DS_EXPORTING -DARROW_FLIGHT_SQL_STATIC -DARROW_FLIGHT_STATIC -DARROW_HAVE_RUNTIME_AVX2 -DARROW_HAVE_RUNTIME_AVX512 -DARROW_HAVE_RUNTIME_BMI2 -DARROW_HAVE_RUNTIME_SSE4_2 -DARROW_HAVE_SSE4_2 -DARROW_HDFS -DARROW_STATIC -DARROW_WITH_LZ4 -DARROW_WITH_RE2 -DARROW_WITH_SNAPPY -DARROW_WITH_TIMING_TESTS -DARROW_WITH_UTF8PROC -DARROW_WITH_ZLIB -DARROW_WITH_ZSTD -DBOOST_ALL_DYN_LINK -DBOOST_ALL_NO_LIB -DPARQUET_STATIC -DURI_STATIC_BUILD -D_CRT_SECURE_NO_WARNINGS -D_ENABLE_EXTENDED_ALIGNED_STORAGE -IC:\\Users\\Alenka\\repos\\arrow\\cpp\\build\\src -IC:\\Users\\Alenka\\repos\\arrow\\cpp\\src -IC:\\Users\\Alenka\\repos\\arrow\\cpp\\src\\generated -IC:\\Users\\Alenka\\repos\\arrow\\cpp\\src\\parquet -IC:\\Users\\Alenka\\repos\\arrow\\cpp\\thirdparty\\flatbuffers\\include -IC:\\Users\\Alenka\\repos\\arrow\\cpp\\thirdparty\\hadoop\\include -IC:\\Users\\Alenka\\anaconda3\\envs\\pyarrow-dev310\\Library\\include /DWIN32 /D_WINDOWS  /GR /EHsc /D_SILENCE_TR1_NAMESPACE_DEPRECATION_WARNING   /EHsc /wd5105 /bigobj /utf-8 /W3 /wd4800 /wd4996 /wd4065  /WX /MP /MD /O2 /Ob2 /DNDEBUG /showIncludes /Fosrc\\arrow\\dataset\\CMakeFiles\\arrow_dataset_static.dir\\file_base.cc.obj /Fdsrc\\arrow\\dataset\\CMakeFiles\\arrow_dataset_static.dir\\arrow_dataset_static.pdb /FS -c C:\\Users\\Alenka\\repos\\arrow\\cpp\\src\\arrow\\dataset\\file_base.ccC:\\Users\\Alenka\\repos\\arrow\\cpp\\src\\arrow/dataset/scanner.h(427): error C2220: warning treated as error - no 'object' file generatedC:\\Users\\Alenka\\repos\\arrow\\cpp\\src\\arrow/dataset/scanner.h(427): warning C4275: non dll-interface class 'arrow::compute::ExecNodeOptions' used as base for dll-interface class 'arrow::dataset::ScanNodeOptions'C:\\Users\\Alenka\\repos\\arrow\\cpp\\src\\arrow/compute/exec/options.h(42): note: see declaration of 'arrow::compute::ExecNodeOptions'C:\\Users\\Alenka\\repos\\arrow\\cpp\\src\\arrow/dataset/scanner.h(427): note: see declaration of 'arrow::dataset::ScanNodeOptions'C:\\Users\\Alenka\\repos\\arrow\\cpp\\src\\arrow/dataset/file_base.h(422): warning C4275: non dll-interface class 'arrow::compute::ExecNodeOptions' used as base for dll-interface class 'arrow::dataset::WriteNodeOptions'C:\\Users\\Alenka\\repos\\arrow\\cpp\\src\\arrow/compute/exec/options.h(42): note: see declaration of 'arrow::compute::ExecNodeOptions'C:\\Users\\Alenka\\repos\\arrow\\cpp\\src\\arrow/dataset/file_base.h(422): note: see declaration of 'arrow::dataset::WriteNodeOptions'[491/590] Building CXX object src\\arrow\\dataset\\CMakeFiles\\arrow_dataset_static.dir\\partition.cc.objFAILED: src/arrow/dataset/CMakeFiles/arrow_dataset_static.dir/partition.cc.objC:\\PROGRA~2\\MIB055~1\\2017\\COMMUN~1\\VC\\Tools\\MSVC\\1416~1.270\\bin\\Hostx64\\x64\\cl.exe  /nologo /TP -DARROW_DS_EXPORTING -DARROW_FLIGHT_SQL_STATIC -DARROW_FLIGHT_STATIC -DARROW_HAVE_RUNTIME_AVX2 -DARROW_HAVE_RUNTIME_AVX512 -DARROW_HAVE_RUNTIME_BMI2 -DARROW_HAVE_RUNTIME_SSE4_2 -DARROW_HAVE_SSE4_2 -DARROW_HDFS -DARROW_STATIC -DARROW_WITH_LZ4 -DARROW_WITH_RE2 -DARROW_WITH_SNAPPY -DARROW_WITH_TIMING_TESTS -DARROW_WITH_UTF8PROC -DARROW_WITH_ZLIB -DARROW_WITH_ZSTD -DBOOST_ALL_DYN_LINK -DBOOST_ALL_NO_LIB -DPARQUET_STATIC -DURI_STATIC_BUILD -D_CRT_SECURE_NO_WARNINGS -D_ENABLE_EXTENDED_ALIGNED_STORAGE -IC:\\Users\\Alenka\\repos\\arrow\\cpp\\build\\src -IC:\\Users\\Alenka\\repos\\arrow\\cpp\\src -IC:\\Users\\Alenka\\repos\\arrow\\cpp\\src\\generated -IC:\\Users\\Alenka\\repos\\arrow\\cpp\\src\\parquet -IC:\\Users\\Alenka\\repos\\arrow\\cpp\\thirdparty\\flatbuffers\\include -IC:\\Users\\Alenka\\repos\\arrow\\cpp\\thirdparty\\hadoop\\include -IC:\\Users\\Alenka\\anaconda3\\envs\\pyarrow-dev310\\Library\\include /DWIN32 /D_WINDOWS  /GR /EHsc /D_SILENCE_TR1_NAMESPACE_DEPRECATION_WARNING   /EHsc /wd5105 /bigobj /utf-8 /W3 /wd4800 /wd4996 /wd4065  /WX /MP /MD /O2 /Ob2 /DNDEBUG /showIncludes /Fosrc\\arrow\\dataset\\CMakeFiles\\arrow_dataset_static.dir\\partition.cc.obj /Fdsrc\\arrow\\dataset\\CMakeFiles\\arrow_dataset_static.dir\\arrow_dataset_static.pdb /FS -c C:\\Users\\Alenka\\repos\\arrow\\cpp\\src\\arrow\\dataset\\partition.ccC:\\Users\\Alenka\\repos\\arrow\\cpp\\src\\arrow/dataset/scanner.h(427): error C2220: warning treated as error - no 'object' file generatedC:\\Users\\Alenka\\repos\\arrow\\cpp\\src\\arrow/dataset/scanner.h(427): warning C4275: non dll-interface class 'arrow::compute::ExecNodeOptions' used as base for dll-interface class 'arrow::dataset::ScanNodeOptions'C:\\Users\\Alenka\\repos\\arrow\\cpp\\src\\arrow/compute/exec/options.h(42): note: see declaration of 'arrow::compute::ExecNodeOptions'C:\\Users\\Alenka\\repos\\arrow\\cpp\\src\\arrow/dataset/scanner.h(427): note: see declaration of 'arrow::dataset::ScanNodeOptions'C:\\Users\\Alenka\\repos\\arrow\\cpp\\src\\arrow/dataset/file_base.h(422): warning C4275: non dll-interface class 'arrow::compute::ExecNodeOptions' used as base for dll-interface class 'arrow::dataset::WriteNodeOptions'C:\\Users\\Alenka\\repos\\arrow\\cpp\\src\\arrow/compute/exec/options.h(42): note: see declaration of 'arrow::compute::ExecNodeOptions'C:\\Users\\Alenka\\repos\\arrow\\cpp\\src\\arrow/dataset/file_base.h(422): note: see declaration of 'arrow::dataset::WriteNodeOptions'ninja: build stopped: subcommand failed. \n```\r\nSee steps used to build:\r\n\r\nhttps://gist.github.com/AlenkaF/862074bc603c380c08af4950959f4248",
        "created_at": "2022-10-05T08:01:21.000Z",
        "updated_at": "2022-10-14T04:25:15.000Z",
        "labels": [
            "Migrated from Jira",
            "Component: C++",
            "Type: bug"
        ],
        "closed": false
    },
    "comments": [
        {
            "created_at": "2022-10-05T08:06:12.879Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-17937?focusedCommentId=17612885) by Antoine Pitrou (apitrou):*\n`[~westonpace]` Can someone take a look here?\r\n\r\nIdeally `ScanV2Options` should not use inheritance for this. You can use composition internally but keep `ScanV2Options` a standalone struct."
        },
        {
            "created_at": "2022-10-05T08:22:21.162Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-17937?focusedCommentId=17612891) by Antoine Pitrou (apitrou):*\nAlso `[~benpharkins]` this may be approachable for you."
        },
        {
            "created_at": "2022-10-05T21:30:12.275Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-17937?focusedCommentId=17613229) by Weston Pace (westonpace):*\nThis isn't new exactly.  `WriteNodeOptions` and `ScanNodeOptions` have the same problem and have been around for a while.\r\n\r\nThat being said, `ExecNodeOptions` is a rather useless base class.  It is really just a marker interface.  In Acero we need to be able to define a generic node declaration as \"name + some kind of options thing\".  I suspect it has only been kept around due to FUD around `void*` (or, more accurately, it would probably be `shared_ptr<void>`).  I'd be fine with getting rid of it."
        },
        {
            "created_at": "2022-10-06T06:43:00.484Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-17937?focusedCommentId=17613321) by Antoine Pitrou (apitrou):*\nI would say a marker interface can be useful for documentation at least.\r\nI would also be surprised if it didn't have at least a `ToString()` virtual method, since you generally want that for nice diagnostics/debug printing.\r\n"
        },
        {
            "created_at": "2022-10-14T04:15:40.841Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-17937?focusedCommentId=17617452) by Ben Harkins (benpharkins):*\nUnfortunately, I haven't been able to reproduce this, but FWIW, It looks like `-DARROW_DS_STATIC` isn't being forwarded to the compiler for some reason. Normally, there wouldn't be a linkage discrepancy. See: ([1](https://github.com/apache/arrow/blob/master/cpp/src/arrow/dataset/visibility.h#L30))\r\n\r\nFor reference, my output looks like this:\r\n```java\n\r\nC:\\PROGRA~1\\MICROS~2\\2022\\COMMUN~1\\VC\\Tools\\MSVC\\1433~1.316\\bin\\Hostx64\\x64\\cl.exe \u00a0/nologo /TP -DARROW_DS_EXPORTING -DARROW_DS_STATIC -DARROW_FLIGHT_SQL_STATIC -DARROW_FLIGHT_STATIC -DARROW_HAVE_RUNTIME_AVX2 -DARROW_HAVE_RUNTIME_AVX512 -DARROW_HAVE_RUNTIME_BMI2 -DARROW_HAVE_RUNTIME_SSE4_2 -DARROW_HAVE_SSE4_2 -DARROW_HDFS -DARROW_STATIC -DARROW_WITH_LZ4 -DARROW_WITH_RE2 -DARROW_WITH_SNAPPY -DARROW_WITH_TIMING_TESTS -DARROW_WITH_UTF8PROC -DARROW_WITH_ZLIB -DARROW_WITH_ZSTD -DBOOST_ALL_DYN_LINK -DBOOST_ALL_NO_LIB -DPARQUET_STATIC -DURI_STATIC_BUILD -D_CRT_SECURE_NO_WARNINGS -D_ENABLE_EXTENDED_ALIGNED_STORAGE -IC:\\Users\\Ben\\Dev\\arrow\\cpp\\build\\src -IC:\\Users\\Ben\\Dev\\arrow\\cpp\\src -IC:\\Users\\Ben\\Dev\\arrow\\cpp\\src\\generated -IC:\\Users\\Ben\\Dev\\arrow\\cpp\\src\\parquet -external:IC:\\Users\\Ben\\Dev\\arrow\\cpp\\thirdparty\\flatbuffers\\include -external:IC:\\Users\\Ben\\Dev\\arrow\\cpp\\thirdparty\\hadoop\\include -external:IC:\\Users\\Ben\\miniconda3\\envs\\pyarrow-dev\\Library\\include -external:W0 /DWIN32 /D_WINDOWS \u00a0/GR /EHsc /D_SILENCE_TR1_NAMESPACE_DEPRECATION_WARNING \u00a0 /EHsc /wd5105 /bigobj /utf-8 /W3 /wd4800 /wd4996 /wd4065 \u00a0/WX /MP /MD /O2 /Ob2 /DNDEBUG -std:c++17 /showIncludes /Fosrc\\arrow\\dataset\\CMakeFiles\\arrow_dataset_static.dir\\discovery.cc.obj\n```"
        }
    ]
}