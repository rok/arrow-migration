{
    "issue": {
        "title": "[R] Failed to install Arrow 0.14.1",
        "body": "***Note**: This issue was originally created as [ARROW-9857](https://issues.apache.org/jira/browse/ARROW-9857). Please see the [migration documentation](https://gist.github.com/toddfarmer/12aa88361532d21902818a6044fda4c3) for further details.*\n\n### Original Issue Description:\nWe are seeing issue to install arrow R package on RHEL machines. Using below command to install arrow.\r\n**R -e \"install.packages(\\\"remotes\\\",repos = \\\"http://cran.r-project.org\\\");remotes::install_github(\\\"apache/arrow\\\", subdir = \\\"r\\\", ref = \\\"apache-arrow-0.14.1\\\")\"**\r\n\r\n\r\n**Error logs :**\r\n\r\nThe downloaded source packages are in\r\n\t'/tmp/Rtmpycmy4e/downloaded_packages'\r\n\u001b[0m\u001b[91mUpdating HTML index of packages in '.Library'\r\n\u001b[0m\u001b[91mMaking 'packages.html' ...\u001b[0m\u001b[91m done\r\n\u001b[0m\u001b[91mRunning `R CMD build`...\r\n\u001b[0m\\* checking for file '/tmp/Rtmpycmy4e/remotesa23015b2/apache-arrow-8d09de2/r/DESCRIPTION' ... OK\r\n- preparing 'arrow':\n- checking DESCRIPTION meta-information ... OK\n- cleaning src\n- running 'cleanup'\n- checking for LF line-endings in source and make files and shell scripts\n- checking for empty or unneeded directories\n- building 'arrow_0.14.1.tar.gz'\n  \u001b[91m\\* installing **source** package 'arrow' ...\n  \u001b[0m\u001b[91m\\*\\* using staged installation\n  \u001b[0m$ pkg-config --cflags --silence-errors arrow parquet\n  PKGCONFIG_CFLAGS = \"-DNDEBUG  \"\n  $ pkg-config --libs arrow parquet\n  PKGCONFIG_LIBS = \"-lparquet -larrow  \"\n  \n  Found pkg-config cflags and libs!\n  PKG_CFLAGS=-DNDEBUG   -DARROW_R_WITH_ARROW\n  PKG_LIBS=-lparquet -larrow  \n  \u001b[91m\\*\\* libs\n  \u001b[0mg++ -std=gnu++11 -I\"/opt/ibm/conda/R/lib64/R/include\" -DNDEBUG -DNDEBUG   -DARROW_R_WITH_ARROW -I\"/opt/ibm/conda/R/lib64/R/library/Rcpp/include\" -I/usr/local/include -fvisibility=hidden -fpic  -g -O2  -c array.cpp -o array.o\n  \u001b[91mIn file included from /opt/ibm/conda/R/lib64/R/library/Rcpp/include/Rcpp/macros/macros.h:134:0,\n                   from /opt/ibm/conda/R/lib64/R/library/Rcpp/include/Rcpp/r/headers.h:69,\n                   from /opt/ibm/conda/R/lib64/R/library/Rcpp/include/RcppCommon.h:29,\n                   from ./arrow_types.h:24,\n                   from array.cpp:18:\n  ./arrow_types.h:188:26: error: 'Type' is not a member of 'arrow::ipc::Message'\n   RCPP_EXPOSED_ENUM_NODECL(arrow::ipc::Message::Type)\n                            ^\n  /opt/ibm/conda/R/lib64/R/library/Rcpp/include/Rcpp/macros/module.h:76:106: note: in definition of macro 'RCPP_EXPOSED_ENUM_AS'\n   #define RCPP_EXPOSED_ENUM_AS(CLASS)   namespace Rcpp{ namespace traits{ template<> struct r_type_traits< CLASS >{ typedef r_type_enum_tag r_category ; } ; }}\n                                                                                                            ^\n  ./arrow_types.h:188:1: note: in expansion of macro 'RCPP_EXPOSED_ENUM_NODECL'\n   RCPP_EXPOSED_ENUM_NODECL(arrow::ipc::Message::Type)\n   ^\n  ./arrow_types.h:188:26: error: 'Type' is not a member of 'arrow::ipc::Message'\n   RCPP_EXPOSED_ENUM_NODECL(arrow::ipc::Message::Type)\n                            ^\n  /opt/ibm/conda/R/lib64/R/library/Rcpp/include/Rcpp/macros/module.h:76:106: note: in definition of macro 'RCPP_EXPOSED_ENUM_AS'\n   #define RCPP_EXPOSED_ENUM_AS(CLASS)   namespace Rcpp{ namespace traits{ template<> struct r_type_traits< CLASS >{ typedef r_type_enum_tag r_category ; } ; }}\n                                                                                                            ^\n  ./arrow_types.h:188:1: note: in expansion of macro 'RCPP_EXPOSED_ENUM_NODECL'\n   RCPP_EXPOSED_ENUM_NODECL(arrow::ipc::Message::Type)\n   ^\n  \u001b[0m\u001b[91m/opt/ibm/conda/R/lib64/R/library/Rcpp/include/Rcpp/macros/module.h:76:112: error: template argument 1 is invalid\n   #define RCPP_EXPOSED_ENUM_AS(CLASS)   namespace Rcpp{ namespace traits{ template<> struct r_type_traits< CLASS >{ typedef r_type_enum_tag r_category ; } ; }}\n                                                                                                                  ^\n  /opt/ibm/conda/R/lib64/R/library/Rcpp/include/Rcpp/macros/module.h:80:3: note: in expansion of macro 'RCPP_EXPOSED_ENUM_AS'\n     RCPP_EXPOSED_ENUM_AS(CLASS)          \\\n     ^\n  ./arrow_types.h:188:1: note: in expansion of macro 'RCPP_EXPOSED_ENUM_NODECL'\n   RCPP_EXPOSED_ENUM_NODECL(arrow::ipc::Message::Type)\n   ^\n  \u001b[0m\u001b[91m./arrow_types.h:188:26: error: 'Type' is not a member of 'arrow::ipc::Message'\n   RCPP_EXPOSED_ENUM_NODECL(arrow::ipc::Message::Type)\n                            ^\n  /opt/ibm/conda/R/lib64/R/library/Rcpp/include/Rcpp/macros/module.h:77:109: note: in definition of macro 'RCPP_EXPOSED_ENUM_WRAP'\n   #define RCPP_EXPOSED_ENUM_WRAP(CLASS) namespace Rcpp{ namespace traits{ template<> struct wrap_type_traits< CLASS >{typedef wrap_type_enum_tag wrap_category ; } ; }}\n                                                                                                               ^\n  ./arrow_types.h:188:1: note: in expansion of macro 'RCPP_EXPOSED_ENUM_NODECL'\n   RCPP_EXPOSED_ENUM_NODECL(arrow::ipc::Message::Type)\n   ^\n  \u001b[0m\u001b[91m./arrow_types.h:188:26: error: 'Type' is not a member of 'arrow::ipc::Message'\n   RCPP_EXPOSED_ENUM_NODECL(arrow::ipc::Message::Type)\n                            ^\n  /opt/ibm/conda/R/lib64/R/library/Rcpp/include/Rcpp/macros/module.h:77:109: note: in definition of macro 'RCPP_EXPOSED_ENUM_WRAP'\n   #define RCPP_EXPOSED_ENUM_WRAP(CLASS) namespace Rcpp{ namespace traits{ template<> struct wrap_type_traits< CLASS >{typedef wrap_type_enum_tag wrap_category ; } ; }}\n                                                                                                               ^\n  ./arrow_types.h:188:1: note: in expansion of macro 'RCPP_EXPOSED_ENUM_NODECL'\n   RCPP_EXPOSED_ENUM_NODECL(arrow::ipc::Message::Type)\n   ^\n  \u001b[0m\u001b[91m/opt/ibm/conda/R/lib64/R/library/Rcpp/include/Rcpp/macros/module.h:77:115: error: template argument 1 is invalid\n   #define RCPP_EXPOSED_ENUM_WRAP(CLASS) namespace Rcpp{ namespace traits{ template<> struct wrap_type_traits< CLASS >{typedef wrap_type_enum_tag wrap_category ; } ; }}\n                                                                                                                     ^\n  /opt/ibm/conda/R/lib64/R/library/Rcpp/include/Rcpp/macros/module.h:81:3: note: in expansion of macro 'RCPP_EXPOSED_ENUM_WRAP'\n     RCPP_EXPOSED_ENUM_WRAP(CLASS)\n     ^\n  ./arrow_types.h:188:1: note: in expansion of macro 'RCPP_EXPOSED_ENUM_NODECL'\n   RCPP_EXPOSED_ENUM_NODECL(arrow::ipc::Message::Type)\n   ^\n  \u001b[0m\u001b[91mIn file included from array.cpp:18:0:\n  array.cpp: In function 'arrow::ArrayVector StructArray__Flatten(const std::shared_ptr<arrow::StructArray>&)':\n  array.cpp:139:67: error: no matching function for call to 'arrow::StructArray::Flatten(arrow::MemoryPool\\*, arrow::ArrayVector\\*)'\n     STOP_IF_NOT_OK(array->Flatten(arrow::default_memory_pool(), &out));\n                                                                     ^\n  ./arrow_types.h:41:11: note: in definition of macro 'STOP_IF_NOT'\n       if (!(TEST)) Rcpp::stop(MSG); \\\n             ^\n  array.cpp:139:3: note: in expansion of macro 'STOP_IF_NOT_OK'\n     STOP_IF_NOT_OK(array->Flatten(arrow::default_memory_pool(), &out));\n     ^\n  \u001b[0m\u001b[91marray.cpp:139:67: note: candidate is:\n     STOP_IF_NOT_OK(array->Flatten(arrow::default_memory_pool(), &out));\n                                                                     ^\n  ./arrow_types.h:41:11: note: in definition of macro 'STOP_IF_NOT'\n       if (!(TEST)) Rcpp::stop(MSG); \\\n             ^\n  array.cpp:139:3: note: in expansion of macro 'STOP_IF_NOT_OK'\n     STOP_IF_NOT_OK(array->Flatten(arrow::default_memory_pool(), &out));\n     ^\n  In file included from /usr/include/arrow/array.h:29:0,\n                   from /usr/include/arrow/api.h:22,\n                   from ./arrow_types.h:167,\n                   from array.cpp:18:\n  /usr/include/arrow/array/array_nested.h:362:23: note: arrow::Result<std::vector<std::shared_ptr<arrow::Array> > > arrow::StructArray::Flatten(arrow::MemoryPool\\*) const\n     Result<ArrayVector> Flatten(MemoryPool\\* pool = default_memory_pool()) const;\n                         ^\n  /usr/include/arrow/array/array_nested.h:362:23: note:   candidate expects 1 argument, 2 provided\n  \u001b[0m\u001b[91mIn file included from array.cpp:18:0:\n  array.cpp:139:67: error: no matching function for call to 'arrow::StructArray::Flatten(arrow::MemoryPool\\*, arrow::ArrayVector\\*)'\n     STOP_IF_NOT_OK(array->Flatten(arrow::default_memory_pool(), &out));\n                                                                     ^\n  ./arrow_types.h:41:29: note: in definition of macro 'STOP_IF_NOT'\n       if (!(TEST)) Rcpp::stop(MSG); \\\n                               ^\n  array.cpp:139:3: note: in expansion of macro 'STOP_IF_NOT_OK'\n     STOP_IF_NOT_OK(array->Flatten(arrow::default_memory_pool(), &out));\n     ^\n  \u001b[0m\u001b[91marray.cpp:139:67: note: candidate is:\n     STOP_IF_NOT_OK(array->Flatten(arrow::default_memory_pool(), &out));\n                                                                     ^\n  ./arrow_types.h:41:29: note: in definition of macro 'STOP_IF_NOT'\n       if (!(TEST)) Rcpp::stop(MSG); \\\n                               ^\n  array.cpp:139:3: note: in expansion of macro 'STOP_IF_NOT_OK'\n     STOP_IF_NOT_OK(array->Flatten(arrow::default_memory_pool(), &out));\n     ^\n  \u001b[0m\u001b[91mIn file included from /usr/include/arrow/array.h:29:0,\n                   from /usr/include/arrow/api.h:22,\n                   from ./arrow_types.h:167,\n                   from array.cpp:18:\n  /usr/include/arrow/array/array_nested.h:362:23: note: arrow::Result<std::vector<std::shared_ptr<arrow::Array> > > arrow::StructArray::Flatten(arrow::MemoryPool\\*) const\n     Result<ArrayVector> Flatten(MemoryPool\\* pool = default_memory_pool()) const;\n                         ^\n  /usr/include/arrow/array/array_nested.h:362:23: note:   candidate expects 1 argument, 2 provided\n  \u001b[0m\u001b[91mmake: \\*\\*\\* [array.o] Error 1\r\n\u001b[0m\u001b[91mERROR: compilation failed for package 'arrow'\r\n\u001b[0m\u001b[91m\\* removing '/opt/ibm/conda/R/lib64/R/library/arrow'\r\n\u001b[0m\u001b[91mError: Failed to install 'arrow' from GitHub:\r\n  (converted from warning) installation of package '/tmp/Rtmpycmy4e/filea4b08588a/arrow_0.14.1.tar.gz' had non-zero exit status\r\nExecution halted\r\n",
        "created_at": "2020-08-25T19:48:54.000Z",
        "updated_at": "2022-08-27T14:41:53.000Z",
        "labels": [
            "Migrated from Jira",
            "Component: R",
            "Type: bug"
        ],
        "closed": true,
        "closed_at": "2020-08-26T14:58:58.000Z"
    },
    "comments": [
        {
            "created_at": "2020-08-26T10:42:08.614Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-9857?focusedCommentId=17185093) by Uwe Korn (uwe):*\nIt seems like you have installed Arrow C++ already in your system. Thus please answer the following questions:\r\n\r\n\u00a0\r\n \\* Which version of Arrow C++ is installed on your system?\r\n \\* Why are you trying to install 0.14.1 and not a later release?"
        },
        {
            "created_at": "2020-08-26T13:26:11.259Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-9857?focusedCommentId=17185187) by SHOBHIT SHUKLA (sshukla05):*\n`[~uwe]` Our consumer is still using 0.14.1 in old release of our product so we can not upgrade to latest one in old release.\r\n\r\n**Below version of C++ we are using :**\r\n\r\n-~~> Running transaction check\r\n-~~-> Package arrow-devel.x86_64 0:1.0.1-1.el7 will be installed\r\n--> Processing Dependency: arrow-libs = 1.0.1-1.el7 for package: arrow-devel-1.0.1-1.el7.x86_64\r\n--> Processing Dependency: libarrow.so.100()(64bit) for package: arrow-devel-1.0.1-1.el7.x86_64\r\n---> Package arrow-glib-devel.x86_64 0:1.0.1-1.el7 will be installed\r\n--> Processing Dependency: gobject-introspection-devel for package: arrow-glib-devel-1.0.1-1.el7.x86_64\r\n--> Processing Dependency: libarrow-glib.so.100()(64bit) for package: arrow-glib-devel-1.0.1-1.el7.x86_64\r\n---> Package parquet-devel.x86_64 0:1.0.1-1.el7 will be installed\r\n--> Processing Dependency: parquet-libs = 1.0.1-1.el7 for package: parquet-devel-1.0.1-1.el7.x86_64\r\n--> Processing Dependency: libparquet.so.100()(64bit) for package: parquet-devel-1.0.1-1.el7.x86_64\r\n---> Package parquet-glib-devel.x86_64 0:1.0.1-1.el7 will be installed\r\n--> Processing Dependency: libparquet-glib.so.100()(64bit) for package: parquet-glib-devel-1.0.1-1.el7.x86_64\r\n-~~> Running transaction check\r\n-~~-> Package arrow-glib-libs.x86_64 0:1.0.1-1.el7 will be installed\r\n---> Package arrow-libs.x86_64 0:1.0.1-1.el7 will be installed\r\n"
        },
        {
            "created_at": "2020-08-26T14:58:42.311Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-9857?focusedCommentId=17185249) by Neal Richardson (npr):*\nYou'll need to either install the arrow-devel system packages at the same 0.14.1 version; or checkout apache/arrow at apache-arrow-0.14.1, build the C++ library from source (following the documentation included at that tag), then install the R package from that checkout.\r\n\r\nThere is much better support for installing the R package on Linux in more recent `arrow` releases, but unfortunately that can't be easily backported to 0.14.1."
        },
        {
            "created_at": "2022-08-27T14:41:53.935Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-9857?focusedCommentId=17585912) by @toddfarmer:*\nTransitioning issue from Resolved to Closed to based on resolution field value."
        }
    ]
}