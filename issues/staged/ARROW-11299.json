{
    "issue": {
        "title": "[Python] build warning in python",
        "body": "***Note**: This issue was originally created as [ARROW-11299](https://issues.apache.org/jira/browse/ARROW-11299). Please see the [migration documentation](https://gist.github.com/toddfarmer/12aa88361532d21902818a6044fda4c3) for further details.*\n\n### Original Issue Description:\nMany warnings about compute kernel options when building Arrow python.\r\nRemoving below line suppresses the warnings.\r\nhttps://github.com/apache/arrow/blob/140135908c5d131ceac31a0e529f9b9b763b1106/cpp/src/arrow/compute/function.h#L45\r\nI think the reason is virtual destructor makes the structure non C compatible and cannot use offsetof macro safely.\r\nAs function options are straightforward, looks destructor is not necessary.\r\n`[~bkietz]`\r\n\r\n**Steps to reproduce**\r\nbuild arrow cpp\r\n```bash\n\r\n ~/arrow/cpp/release $ cmake -GNinja -DCMAKE_BUILD_TYPE=Release -DARROW_COMPUTE=ON -DARROW_BUILD_TESTS=ON -DCMAKE_INSTALL_PREFIX=$(pwd)/_install -DCMAKE_INSTALL_LIBDIR=lib -DARROW_PYTHON=ON -DCMAKE_CXX_COMPILER=/usr/bin/clang++-9 -DCMAKE_C_COMPILER=/usr/bin/clang-9 ..\r\n\r\n~/arrow/cpp/release $ ninja install\r\n```\r\n\r\nbuild arrow python\r\n```bash\n\r\n ~/arrow/python $ python --version\r\n Python 3.6.9\r\n\r\n~/arrow/python $ python setup.py build_ext --inplace\r\n ......\r\n [ 93%] Building CXX object CMakeFiles/_compute.dir/_compute.cpp.o [27/1691]\r\n In file included from /usr/include/x86_64-linux-gnu/bits/types/stack_t.h:23:0, \r\n from /usr/include/signal.h:303,\r\n from /home/cyb/archery/lib/python3.6/site-packages/numpy/core/include/numpy/npy_interrupt.h:84,\r\n from /home/cyb/archery/lib/python3.6/site-packages/numpy/core/include/numpy/arrayobject.h:5,\r\n from /home/cyb/arrow/cpp/release/_install/include/arrow/python/numpy_interop.h:41,\r\n from /home/cyb/arrow/cpp/release/_install/include/arrow/python/helpers.h:27,\r\n from /home/cyb/arrow/cpp/release/_install/include/arrow/python/api.h:24,\r\n from /home/cyb/arrow/python/build/temp.linux-x86_64-3.6/_compute.cpp:696:\r\n /home/cyb/arrow/python/build/temp.linux-x86_64-3.6/_compute.cpp: In function \u2018int __Pyx_modinit_type_init_code()\u2019:\r\n /home/cyb/arrow/python/build/temp.linux-x86_64-3.6/_compute.cpp:26034:146: warning: offsetof within non-standard-layout type \u2018__pyx_obj_7pyarrow_8_compute__CastOptions\u2019 is undefined [-Winvalid-offsetof]\r\n x_type_7pyarrow_8_compute__CastOptions.tp_weaklistoffset = offsetof(struct __pyx_obj_7pyarrow_8_compute__CastOptions, __pyx_base.__pyx_base.__weakref__);\r\n ^\r\n /home/cyb/arrow/python/build/temp.linux-x86_64-3.6/_compute.cpp:26066:150: warning: offsetof within non-standard-layout type \u2018__pyx_obj_7pyarrow_8_compute__FilterOptions\u2019 is undefined [-Winvalid-offsetof]\r\n type_7pyarrow_8_compute__FilterOptions.tp_weaklistoffset = offsetof(struct __pyx_obj_7pyarrow_8_compute__FilterOptions, __pyx_base.__pyx_base.__weakref__);\r\n ^\r\n /home/cyb/arrow/python/build/temp.linux-x86_64-3.6/_compute.cpp:26082:146: warning: offsetof within non-standard-layout type \u2018__pyx_obj_7pyarrow_8_compute__TakeOptions\u2019 is undefined [-Winvalid-offsetof]\r\n x_type_7pyarrow_8_compute__TakeOptions.tp_weaklistoffset = offsetof(struct __pyx_obj_7pyarrow_8_compute__TakeOptions, __pyx_base.__pyx_base.__weakref__);\r\n ^\r\n /home/cyb/arrow/python/build/temp.linux-x86_64-3.6/_compute.cpp:26130:150: warning: offsetof within non-standard-layout type \u2018__pyx_obj_7pyarrow_8_compute__MinMaxOptions\u2019 is undefined [-Winvalid-offsetof]\r\n type_7pyarrow_8_compute__MinMaxOptions.tp_weaklistoffset = offsetof(struct __pyx_obj_7pyarrow_8_compute__MinMaxOptions, __pyx_base.__pyx_base.__weakref__);\r\n ^\r\n /home/cyb/arrow/python/build/temp.linux-x86_64-3.6/_compute.cpp:26146:148: warning: offsetof within non-standard-layout type \u2018__pyx_obj_7pyarrow_8_compute__CountOptions\u2019 is undefined [-Winvalid-offsetof]\r\n _type_7pyarrow_8_compute__CountOptions.tp_weaklistoffset = offsetof(struct __pyx_obj_7pyarrow_8_compute__CountOptions, __pyx_base.__pyx_base.__weakref__);\r\n ^ \r\n /home/cyb/arrow/python/build/temp.linux-x86_64-3.6/_compute.cpp:26162:146: warning: offsetof within non-standard-layout type \u2018__pyx_obj_7pyarrow_8_compute__ModeOptions\u2019 is undefined [-Winvalid-offsetof]\r\n x_type_7pyarrow_8_compute__ModeOptions.tp_weaklistoffset = offsetof(struct __pyx_obj_7pyarrow_8_compute__ModeOptions, __pyx_base.__pyx_base.__weakref__);\r\n ^\r\n /home/cyb/arrow/python/build/temp.linux-x86_64-3.6/_compute.cpp:26210:154: warning: offsetof within non-standard-layout type \u2018__pyx_obj_7pyarrow_8_compute__VarianceOptions\u2019 is undefined [-Winvalid-offsetof]\r\n pe_7pyarrow_8_compute__VarianceOptions.tp_weaklistoffset = offsetof(struct __pyx_obj_7pyarrow_8_compute__VarianceOptions, __pyx_base.__pyx_base.__weakref__);\r\n ^\r\n /home/cyb/arrow/python/build/temp.linux-x86_64-3.6/_compute.cpp:26258:156: warning: offsetof within non-standard-layout type \u2018__pyx_obj_7pyarrow_8_compute__ArraySortOptions\u2019 is undefined [-Winvalid-offsetof]\r\n e_7pyarrow_8_compute__ArraySortOptions.tp_weaklistoffset = offsetof(struct __pyx_obj_7pyarrow_8_compute__ArraySortOptions, __pyx_base.__pyx_base.__weakref__);\r\n ^\r\n /home/cyb/arrow/python/build/temp.linux-x86_64-3.6/_compute.cpp:26274:146: warning: offsetof within non-standard-layout type \u2018__pyx_obj_7pyarrow_8_compute__SortOptions\u2019 is undefined [-Winvalid-offsetof]\r\n x_type_7pyarrow_8_compute__SortOptions.tp_weaklistoffset = offsetof(struct __pyx_obj_7pyarrow_8_compute__SortOptions, __pyx_base.__pyx_base.__weakref__);\r\n ......\r\n \n```",
        "created_at": "2021-01-18T08:16:27.000Z",
        "updated_at": "2021-04-18T15:59:21.000Z",
        "labels": [
            "Migrated from Jira",
            "Component: C++",
            "Component: Python",
            "Type: bug"
        ],
        "closed": true,
        "closed_at": "2021-01-22T18:20:54.000Z"
    },
    "comments": [
        {
            "created_at": "2021-01-22T18:20:54.815Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-11299?focusedCommentId=17270340) by Ben Kietzman (bkietz):*\nIssue resolved by pull request 9274\n<https://github.com/apache/arrow/pull/9274>"
        }
    ]
}