{
    "issue": {
        "title": "[C++] Flight builds complain of -Wstrict-aliasing ",
        "body": "***Note**: This issue was originally created as [ARROW-4641](https://issues.apache.org/jira/browse/ARROW-4641). Please see the [migration documentation](https://gist.github.com/toddfarmer/12aa88361532d21902818a6044fda4c3) for further details.*\n\n### Original Issue Description:\nThe compiler is rightly trying to protect us from doing a \"bad thing\", but I think this warning simply needs to be disabled in these compilation units\r\n\r\n```Java\n\r\n/usr/bin/ccache /home/wesm/miniconda/envs/arrow-3.7/bin/x86_64-conda_cos6-linux-gnu-c++  -DARROW_EXTRA_ERROR_CONTEXT -DARROW_JEMALLOC -DARROW_JEMALLOC_INCLUDE_DIR=/home/wesm/code/arrow/cpp/build/jemalloc_ep-prefix/src/jemalloc_ep/dist//include -DARROW_NO_DEPRECATED_API -DARROW_USE_GLOG -DARROW_USE_SIMD -DARROW_WITH_BROTLI -DARROW_WITH_BZ2 -DARROW_WITH_LZ4 -DARROW_WITH_SNAPPY -DARROW_WITH_ZLIB -DARROW_WITH_ZSTD -Isrc -I../src -isystem /home/wesm/cpp-toolchain/include -isystem /home/wesm/miniconda/envs/arrow-3.7/include -isystem gbenchmark_ep/src/gbenchmark_ep-install/include -isystem jemalloc_ep-prefix/src -isystem /usr/local/hadoop/include -isystem /home/wesm/cpp-toolchain/include/thrift -Wno-noexcept-type -fvisibility-inlines-hidden -std=c++17 -fmessage-length=0 -march=nocona -mtune=haswell -ftree-vectorize -fPIC -fstack-protector-strong -fno-plt -O2 -pipe -O3 -DNDEBUG  -Wall -Wconversion -Wno-sign-conversion -Werror -msse4.2 -fno-omit-frame-pointer -O3 -DNDEBUG -fPIC   -std=gnu++11 -MD -MT src/arrow/flight/CMakeFiles/arrow_flight_objlib.dir/server.cc.o -MF src/arrow/flight/CMakeFiles/arrow_flight_objlib.dir/server.cc.o.d -o src/arrow/flight/CMakeFiles/arrow_flight_objlib.dir/server.cc.o -c ../src/arrow/flight/server.cc\r\n../src/arrow/flight/server.cc: In member function 'virtual grpc::Status arrow::flight::FlightServiceImpl::DoGet(ServerContext*, const arrow::flight::protocol::Ticket*, ServerWriter<arrow::flight::protocol::FlightData>*)':\r\n../src/arrow/flight/server.cc:192:75: error: dereferencing type-punned pointer will break strict-aliasing rules [-Werror=strict-aliasing]\r\n     writer->Write(*reinterpret_cast<const pb::FlightData*>(&schema_payload),\r\n                                                                           ^\r\n../src/arrow/flight/server.cc:199:75: error: dereferencing type-punned pointer will break strict-aliasing rules [-Werror=strict-aliasing]\r\n           !writer->Write(*reinterpret_cast<const pb::FlightData*>(&payload),\r\n                                                                           ^\r\ncc1plus: all warnings being treated as errors\r\n[11/113] Building CXX object src/arrow/flight/CMakeFiles/arrow_flight_objlib.dir/client.cc.o\r\nFAILED: src/arrow/flight/CMakeFiles/arrow_flight_objlib.dir/client.cc.o \r\n/usr/bin/ccache /home/wesm/miniconda/envs/arrow-3.7/bin/x86_64-conda_cos6-linux-gnu-c++  -DARROW_EXTRA_ERROR_CONTEXT -DARROW_JEMALLOC -DARROW_JEMALLOC_INCLUDE_DIR=/home/wesm/code/arrow/cpp/build/jemalloc_ep-prefix/src/jemalloc_ep/dist//include -DARROW_NO_DEPRECATED_API -DARROW_USE_GLOG -DARROW_USE_SIMD -DARROW_WITH_BROTLI -DARROW_WITH_BZ2 -DARROW_WITH_LZ4 -DARROW_WITH_SNAPPY -DARROW_WITH_ZLIB -DARROW_WITH_ZSTD -Isrc -I../src -isystem /home/wesm/cpp-toolchain/include -isystem /home/wesm/miniconda/envs/arrow-3.7/include -isystem gbenchmark_ep/src/gbenchmark_ep-install/include -isystem jemalloc_ep-prefix/src -isystem /usr/local/hadoop/include -isystem /home/wesm/cpp-toolchain/include/thrift -Wno-noexcept-type -fvisibility-inlines-hidden -std=c++17 -fmessage-length=0 -march=nocona -mtune=haswell -ftree-vectorize -fPIC -fstack-protector-strong -fno-plt -O2 -pipe -O3 -DNDEBUG  -Wall -Wconversion -Wno-sign-conversion -Werror -msse4.2 -fno-omit-frame-pointer -O3 -DNDEBUG -fPIC   -std=gnu++11 -MD -MT src/arrow/flight/CMakeFiles/arrow_flight_objlib.dir/client.cc.o -MF src/arrow/flight/CMakeFiles/arrow_flight_objlib.dir/client.cc.o.d -o src/arrow/flight/CMakeFiles/arrow_flight_objlib.dir/client.cc.o -c ../src/arrow/flight/client.cc\r\n../src/arrow/flight/client.cc: In member function 'virtual arrow::Status arrow::flight::FlightPutWriter::FlightPutWriterImpl::WriteRecordBatch(const arrow::RecordBatch&, bool)':\r\n../src/arrow/flight/client.cc:126:74: error: dereferencing type-punned pointer will break strict-aliasing rules [-Werror=strict-aliasing]\r\n     if (!writer_->Write(*reinterpret_cast<const pb::FlightData*>(&payload),\r\n                                                                          ^\r\n../src/arrow/flight/client.cc: In member function 'arrow::Status arrow::flight::FlightClient::FlightClientImpl::DoPut(const arrow::flight::FlightDescriptor&, const std::shared_ptr<arrow::Schema>&, std::unique_ptr<arrow::ipc::RecordBatchWriter>*)':\r\n../src/arrow/flight/client.cc:310:79: error: dereferencing type-punned pointer will break strict-aliasing rules [-Werror=strict-aliasing]\r\n     if (!write_stream->Write(*reinterpret_cast<const pb::FlightData*>(&payload),\r\n                                                                               ^\r\ncc1plus: all warnings being treated as errors\r\n[12/113] Performing configure step for 'jemalloc_ep'\r\n-- jemalloc_ep configure command succeeded.  See also /home/wesm/code/arrow/cpp/build/jemalloc_ep-prefix/src/jemalloc_ep-stamp/jemalloc_ep-configure-*.log\r\n[13/113] Building CXX object src/arrow/flight/CMakeFiles/arrow_flight_objlib.dir/protocol-internal.cc.o\r\n```",
        "created_at": "2019-02-20T15:49:56.000Z",
        "updated_at": "2019-02-26T06:29:26.000Z",
        "labels": [
            "Migrated from Jira",
            "Component: C++",
            "Type: bug"
        ],
        "closed": true,
        "closed_at": "2019-02-26T06:29:14.000Z"
    },
    "comments": [
        {
            "created_at": "2019-02-20T15:53:26.681Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-4641?focusedCommentId=16773128) by Antoine Pitrou (apitrou):*\nI think we should just disable it around the offending lines."
        },
        {
            "created_at": "2019-02-20T18:54:12.137Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-4641?focusedCommentId=16773277) by Wes McKinney (wesm):*\nOK, I can add pragmas at the call sites"
        },
        {
            "created_at": "2019-02-26T06:29:14.738Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-4641?focusedCommentId=16777633) by Wes McKinney (wesm):*\nIssue resolved by pull request 3719\n<https://github.com/apache/arrow/pull/3719>"
        }
    ]
}