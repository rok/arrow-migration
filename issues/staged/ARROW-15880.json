{
    "issue": {
        "title": "[C++] Can't open partitioned dataset if the root directory has \"=\" in its name",
        "body": "***Note**: This issue was originally created as [ARROW-15880](https://issues.apache.org/jira/browse/ARROW-15880). Please see the [migration documentation](https://gist.github.com/toddfarmer/12aa88361532d21902818a6044fda4c3) for further details.*\n\n### Original Issue Description:\nNot sure if this is a bug or \"just how Hive style partitioning works\" but if I try to open a dataset where the root directory has an \"=\" in it, I have to specify that directory in my partitioning to be able to successfully open it.\r\n\r\nThis has caused users to trip up when they've saved one directory from a partitioned dataset somewhere and tried to then open this directory as a dataset.\r\n\r\n```r\n\r\nlibrary(arrow)\r\ntd <- tempfile()\r\ndir.create(td)\r\n# directory with equals sign in name\r\nsubdir <- file.path(td, \"foo=bar\")\r\ndir.create(subdir)\r\nwrite_dataset(mtcars, subdir, partitioning = \"am\")\r\nlist.files(td, recursive = TRUE)\r\n#> [1] \"foo=bar/am=0/part-0.parquet\" \"foo=bar/am=1/part-0.parquet\"\r\n# doesn't work\r\nopen_dataset(subdir, partitioning = \"am\")\r\n#> Error:\r\n#> ! \"partitioning\" does not match the detected Hive-style partitions: c(\"foo\", \"am\")\r\n#> \u2139 Omit \"partitioning\" to use the Hive partitions\r\n#> \u2139 Set `hive_style = FALSE` to override what was detected\r\n#> \u2139 Or, to rename partition columns, call `select()` or `rename()` after opening the dataset\r\n# works\r\nopen_dataset(subdir, partitioning = c(\"foo\", \"am\"))\r\n#> FileSystemDataset with 2 Parquet files\r\n#> mpg: double\r\n#> cyl: double\r\n#> disp: double\r\n#> hp: double\r\n#> drat: double\r\n#> wt: double\r\n#> qsec: double\r\n#> vs: double\r\n#> gear: double\r\n#> carb: double\r\n#> foo: string\r\n#> am: int32\r\n#> \r\n#> See $metadata for additional Schema metadata\r\n```\r\n\r\nCompare this with the same example but the folder is just called \"foobar\" instead of \"foo=bar\".\r\n\r\n```r\n\r\ntd <- tempfile()\r\ndir.create(td)\r\nsubdir <- file.path(td, \"foobar\")\r\ndir.create(subdir)\r\nwrite_dataset(mtcars, subdir, partitioning = \"am\")\r\nlist.files(td, recursive = TRUE)\r\n#> [1] \"foobar/am=0/part-0.parquet\" \"foobar/am=1/part-0.parquet\"\r\n# works\r\nopen_dataset(subdir, partitioning = \"am\")\r\n#> FileSystemDataset with 2 Parquet files\r\n#> mpg: double\r\n#> cyl: double\r\n#> disp: double\r\n#> hp: double\r\n#> drat: double\r\n#> wt: double\r\n#> qsec: double\r\n#> vs: double\r\n#> gear: double\r\n#> carb: double\r\n#> am: int32\r\n#> \r\n#> See $metadata for additional Schema metadata\r\n```\r\n",
        "created_at": "2022-03-09T09:48:09.000Z",
        "updated_at": "2022-03-09T09:48:09.000Z",
        "labels": [
            "Migrated from Jira",
            "Component: C++",
            "Type: bug"
        ],
        "closed": false
    },
    "comments": []
}