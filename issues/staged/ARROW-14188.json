{
    "issue": {
        "title": "link error on ubuntu",
        "body": "***Note**: This issue was originally created as [ARROW-14188](https://issues.apache.org/jira/browse/ARROW-14188). Please see the [migration documentation](https://gist.github.com/toddfarmer/12aa88361532d21902818a6044fda4c3) for further details.*\n\n### Original Issue Description:\nI used vcpkg to install arrow versions 4 and 5, trying to build my code that uses parquet fails by giving link errors of undefined reference.\r\n\r\nThe same code works on OSX but fails on ubuntu.\r\n\r\nMy cmake snippet is as follows:\r\n\r\n\u00a0\r\n```java\n\r\nfind_package(Arrow CONFIG REQUIRED)\r\nget_filename_component(MY_SEARCH_DIR ${Arrow_CONFIG} DIRECTORY)\r\nfind_package(Parquet CONFIG REQUIRED PATHS ${MY_SEARCH_DIR})\r\nfind_package(Thrift CONFIG REQUIRED)\r\n```\r\nand the linking:\u00a0\r\n\r\n\u00a0\r\n```java\n\r\ntarget_link_libraries(vision_obj PUBLIC .... thrift::thrift re2::re2 arrow_static parquet_static )\r\n```\r\n\u00a0\r\n\r\n\u00a0I get a lot of errors\r\n\r\n\u00a0",
        "created_at": "2021-09-30T22:21:09.000Z",
        "updated_at": "2021-10-30T00:13:03.000Z",
        "labels": [
            "Migrated from Jira",
            "Component: C++",
            "Type: bug"
        ],
        "closed": false
    },
    "comments": [
        {
            "created_at": "2021-09-30T23:56:36.077Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-14188?focusedCommentId=17423056) by Kouhei Sutou (kou):*\nCould you show the error message?"
        },
        {
            "created_at": "2021-10-01T07:08:57.494Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-14188?focusedCommentId=17423140) by Amir Ghamarian (ghamarian):*\nThanks `[~kou]` I attached the errors in a file."
        },
        {
            "created_at": "2021-10-02T05:05:32.527Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-14188?focusedCommentId=17423464) by Kouhei Sutou (kou):*\nThanks but could you show all log?"
        },
        {
            "created_at": "2021-10-02T12:02:21.156Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-14188?focusedCommentId=17423512) by Amir Ghamarian (ghamarian):*\nI added another log. Thanks `[~kou]`."
        },
        {
            "created_at": "2021-10-02T20:40:09.013Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-14188?focusedCommentId=17423599) by Kouhei Sutou (kou):*\nThanks.\r\n\r\nCould you swap `arrow_static parquet_static` order in `target_link_libraries(vision_obj)`?\r\n`target_link_libraries(vision_obj PUBLIC .... thrift::thrift re2::re2 parquet_static arrow_static)`"
        },
        {
            "created_at": "2021-10-03T08:41:29.092Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-14188?focusedCommentId=17423649) by Amir Ghamarian (ghamarian):*\nThanks, same error. It works fine on OSX.\r\n```java\n\r\n../../vcpkg_installed/x64-linux/debug/lib/libarrow.a(compression_brotli.cc.o): In function `arrow::util::internal::(anonymous namespace)::BrotliDecompressor::~BrotliDecompressor()': /projects/vcpkg/buildtrees/arrow/src/rrow-5.0.0-fc32d5e3bc.clean/cpp/src/arrow/util/compression_brotli.cc:43: undefined reference to `BrotliDecoderDestroyInstance' ../../vcpkg_installed/x64-linux/debug/lib/libarrow.a(compression_brotli.cc.o): In function `arrow::util::internal::(anonymous namespace)::BrotliDecompressor::Init()': /projects/vcpkg/buildtrees/arrow/src/rrow-5.0.0-fc32d5e3bc.clean/cpp/src/arrow/util/compression_brotli.cc:48: undefined reference to `BrotliDecoderCreateInstance' ../../vcpkg_installed/x64-linux/debug/lib/libarrow.a(compression_brotli.cc.o): In function `arrow::util::internal::(anonymous namespace)::BrotliDecompressor::Reset()': /projects/vcpkg/buildtrees/arrow/src/rrow-5.0.0-fc32d5e3bc.clean/cpp/src/arrow/util/compression_brotli.cc:57: undefined reference to `BrotliDecoderDestroyInstance' ../../vcpkg_installed/x64-linux/debug/lib/libarrow.a(compression_brotli.cc.o): In function `arrow::util::internal::(anonymous namespace)::BrotliDecompressor::Decompress(long, unsigned char const*, long, unsigned char*)': /projects/vcpkg/buildtrees/arrow/src/rrow-5.0.0-fc32d5e3bc.clean/cpp/src/arrow/util/compression_brotli.cc:68: undefined reference to `BrotliDecoderDecompressStream' /projects/vcpkg/buildtrees/arrow/src/rrow-5.0.0-fc32d5e3bc.clean/cpp/src/arrow/util/compression_brotli.cc:71: undefined reference to `BrotliDecoderGetErrorCode' ../../vcpkg_installed/x64-linux/debug/lib/libarrow.a(compression_brotli.cc.o): In function `arrow::util::internal::(anonymous namespace)::BrotliDecompressor::IsFinished()': /projects/vcpkg/buildtrees/arrow/src/rrow-5.0.0-fc32d5e3bc.clean/cpp/src/arrow/util/compression_brotli.cc:78: undefined reference to `BrotliDecoderIsFinished' ../../vcpkg_installed/x64-linux/debug/lib/libarrow.a(compression_brotli.cc.o): In function `arrow::util::internal::(anonymous namespace)::BrotliDecompressor::BrotliError(BrotliDecoderErrorCode, char const*)': /projects/vcpkg/buildtrees/arrow/src/rrow-5.0.0-fc32d5e3bc.clean/cpp/src/arrow/util/compression_brotli.cc:84: undefined reference to `BrotliDecoderErrorString' ../../vcpkg_installed/x64-linux/debug/lib/libarrow.a(compression_brotli.cc.o): In function `arrow::util::internal::(anonymous namespace)::BrotliCompressor::~BrotliCompressor()': /projects/vcpkg/buildtrees/arrow/src/rrow-5.0.0-fc32d5e3bc.clean/cpp/src/arrow/util/compression_brotli.cc:100: undefined reference to `BrotliEncoderDestroyInstance' ../../vcpkg_installed/x64-linux/debug/lib/libarrow.a(compression_brotli.cc.o): In function `arrow::util::internal::(anonymous namespace)::BrotliCompressor::Init()': /projects/vcpkg/buildtrees/arrow/src/rrow-5.0.0-fc32d5e3bc.clean/cpp/src/arrow/util/compression_brotli.cc:105: undefined reference to `BrotliEncoderCreateInstance' /projects/vcpkg/buildtrees/arrow/src/rrow-5.0.0-fc32d5e3bc.clean/cpp/src/arrow/util/compression_brotli.cc:109: undefined reference to `BrotliEncoderSetParameter' ../../vcpkg_installed/x64-linux/debug/lib/libarrow.a(compression_brotli.cc.o): In function `arrow::util::internal::(anonymous namespace)::BrotliCompressor::Compress(long, unsigned char const*, long, unsigned char*)': /projects/vcpkg/buildtrees/arrow/src/rrow-5.0.0-fc32d5e3bc.clean/cpp/src/arrow/util/compression_brotli.cc:121: undefined reference to `BrotliEncoderCompressStream' ../../vcpkg_installed/x64-linux/debug/lib/libarrow.a(compression_brotli.cc.o): In function `arrow::util::internal::(anonymous namespace)::BrotliCompressor::Flush(long, unsigned char*)': /projects/vcpkg/buildtrees/arrow/src/rrow-5.0.0-fc32d5e3bc.clean/cpp/src/arrow/util/compression_brotli.cc:136: undefined reference to `BrotliEncoderCompressStream' /projects/vcpkg/buildtrees/arrow/src/rrow-5.0.0-fc32d5e3bc.clean/cpp/src/arrow/util/compression_brotli.cc:142: undefined reference to `BrotliEncoderHasMoreOutput' ../../vcpkg_installed/x64-linux/debug/lib/libarrow.a(compression_brotli.cc.o): In function `arrow::util::internal::(anonymous namespace)::BrotliCompressor::End(long, unsigned char*)': /projects/vcpkg/buildtrees/arrow/src/rrow-5.0.0-fc32d5e3bc.clean/cpp/src/arrow/util/compression_brotli.cc:152: undefined reference to `BrotliEncoderCompressStream' /projects/vcpkg/buildtrees/arrow/src/rrow-5.0.0-fc32d5e3bc.clean/cpp/src/arrow/util/compression_brotli.cc:157: undefined reference to `BrotliEncoderHasMoreOutput' /projects/vcpkg/buildtrees/arrow/src/rrow-5.0.0-fc32d5e3bc.clean/cpp/src/arrow/util/compression_brotli.cc:158: undefined reference to `BrotliEncoderIsFinished' ../../vcpkg_installed/x64-linux/debug/lib/libarrow.a(compression_brotli.cc.o): In function `arrow::util::internal::(anonymous namespace)::BrotliCodec::Decompress(long, unsigned char const*, long, unsigned char*)': /projects/vcpkg/buildtrees/arrow/src/rrow-5.0.0-fc32d5e3bc.clean/cpp/src/arrow/util/compression_brotli.cc:186: undefined reference to `BrotliDecoderDecompress' ../../vcpkg_installed/x64-linux/debug/lib/libarrow.a(compression_brotli.cc.o): In function `arrow::util::internal::(anonymous namespace)::BrotliCodec::MaxCompressedLen(long, unsigned char const*)': /projects/vcpkg/buildtrees/arrow/src/rrow-5.0.0-fc32d5e3bc.clean/cpp/src/arrow/util/compression_brotli.cc:196: undefined reference to `BrotliEncoderMaxCompressedSize' ../../vcpkg_installed/x64-linux/debug/lib/libarrow.a(compression_brotli.cc.o): In function `arrow::util::internal::(anonymous namespace)::BrotliCodec::Compress(long, unsigned char const*, long, unsigned char*)': /projects/vcpkg/buildtrees/arrow/src/rrow-5.0.0-fc32d5e3bc.clean/cpp/src/arrow/util/compression_brotli.cc:204: undefined reference to `BrotliEncoderCompress' ../../vcpkg_installed/x64-linux/debug/lib/libarrow.a(compression_lz4.cc.o): In function `arrow::util::(anonymous namespace)::LZ4Error(unsigned long, char const*)': /projects/vcpkg/buildtrees/arrow/src/rrow-5.0.0-fc32d5e3bc.clean/cpp/src/arrow/util/compression_lz4.cc:45: undefined reference to `LZ4F_getErrorName' ../../vcpkg_installed/x64-linux/debug/lib/libarrow.a(compression_lz4.cc.o): In function `arrow::util::(anonymous namespace)::LZ4Decompressor::~LZ4Decompressor()': /projects/vcpkg/buildtrees/arrow/src/rrow-5.0.0-fc32d5e3bc.clean/cpp/src/arrow/util/compression_lz4.cc:63: undefined reference to `LZ4F_freeDecompressionContext' ../../vcpkg_installed/x64-linux/debug/lib/libarrow.a(compression_lz4.cc.o): In function `arrow::util::(anonymous namespace)::LZ4Decompressor::Init()': /projects/vcpkg/buildtrees/arrow/src/rrow-5.0.0-fc32d5e3bc.clean/cpp/src/arrow/util/compression_lz4.cc:71: undefined reference to `LZ4F_createDecompressionContext' /projects/vcpkg/buildtrees/arrow/src/rrow-5.0.0-fc32d5e3bc.clean/cpp/src/arrow/util/compression_lz4.cc:72: undefined reference to `LZ4F_isError' ../../vcpkg_installed/x64-linux/debug/lib/libarrow.a(compression_lz4.cc.o): In function `arrow::util::(anonymous namespace)::LZ4Decompressor::Reset()': /projects/vcpkg/buildtrees/arrow/src/rrow-5.0.0-fc32d5e3bc.clean/cpp/src/arrow/util/compression_lz4.cc:83: undefined reference to `LZ4F_resetDecompressionContext' ../../vcpkg_installed/x64-linux/debug/lib/libarrow.a(compression_lz4.cc.o): In function `arrow::util::(anonymous namespace)::LZ4Decompressor::Decompress(long, unsigned char const*, long, unsigned char*)': /projects/vcpkg/buildtrees/arrow/src/rrow-5.0.0-fc32d5e3bc.clean/cpp/src/arrow/util/compression_lz4.cc:103: undefined reference to `LZ4F_decompress' /projects/vcpkg/buildtrees/arrow/src/rrow-5.0.0-fc32d5e3bc.clean/cpp/src/arrow/util/compression_lz4.cc:104: undefined reference to `LZ4F_isError' ../../vcpkg_installed/x64-linux/debug/lib/libarrow.a(compression_lz4.cc.o): In function `arrow::util::(anonymous namespace)::LZ4Compressor::~LZ4Compressor()': /projects/vcpkg/buildtrees/arrow/src/rrow-5.0.0-fc32d5e3bc.clean/cpp/src/arrow/util/compression_lz4.cc:129: undefined reference to `LZ4F_freeCompressionContext' ../../vcpkg_installed/x64-linux/debug/lib/libarrow.a(compression_lz4.cc.o): In function `arrow::util::(anonymous namespace)::LZ4Compressor::Init()': /projects/vcpkg/buildtrees/arrow/src/rrow-5.0.0-fc32d5e3bc.clean/cpp/src/arrow/util/compression_lz4.cc:138: undefined reference to `LZ4F_createCompressionContext' /projects/vcpkg/buildtrees/arrow/src/rrow-5.0.0-fc32d5e3bc.clean/cpp/src/arrow/util/compression_lz4.cc:139: undefined reference to `LZ4F_isError' ../../vcpkg_installed/x64-linux/debug/lib/libarrow.a(compression_lz4.cc.o): In function `arrow::util::(anonymous namespace)::LZ4Compressor::Compress(long, unsigned char const*, long, unsigned char*)': /projects/vcpkg/buildtrees/arrow/src/rrow-5.0.0-fc32d5e3bc.clean/cpp/src/arrow/util/compression_lz4.cc:171: undefined reference to `LZ4F_compressBegin' /projects/vcpkg/buildtrees/arrow/src/rrow-5.0.0-fc32d5e3bc.clean/cpp/src/arrow/util/compression_lz4.cc:171: undefined reference to `LZ4F_isError' /projects/vcpkg/buildtrees/arrow/src/rrow-5.0.0-fc32d5e3bc.clean/cpp/src/arrow/util/compression_lz4.cc:173: undefined reference to `LZ4F_compressBound' /projects/vcpkg/buildtrees/arrow/src/rrow-5.0.0-fc32d5e3bc.clean/cpp/src/arrow/util/compression_lz4.cc:177: undefined reference to `LZ4F_compressUpdate' /projects/vcpkg/buildtrees/arrow/src/rrow-5.0.0-fc32d5e3bc.clean/cpp/src/arrow/util/compression_lz4.cc:179: undefined reference to `LZ4F_isError' ../../vcpkg_installed/x64-linux/debug/lib/libarrow.a(compression_lz4.cc.o): In function `arrow::util::(anonymous namespace)::LZ4Compressor::Flush(long, unsigned char*)': /projects/vcpkg/buildtrees/arrow/src/rrow-5.0.0-fc32d5e3bc.clean/cpp/src/arrow/util/compression_lz4.cc:193: undefined reference to `LZ4F_compressBegin' /projects/vcpkg/buildtrees/arrow/src/rrow-5.0.0-fc32d5e3bc.clean/cpp/src/arrow/util/compression_lz4.cc:193: undefined reference to `LZ4F_isError' /projects/vcpkg/buildtrees/arrow/src/rrow-5.0.0-fc32d5e3bc.clean/cpp/src/arrow/util/compression_lz4.cc:195: undefined reference to `LZ4F_compressBound' /projects/vcpkg/buildtrees/arrow/src/rrow-5.0.0-fc32d5e3bc.clean/cpp/src/arrow/util/compression_lz4.cc:200: undefined reference to `LZ4F_flush' /projects/vcpkg/buildtrees/arrow/src/rrow-5.0.0-fc32d5e3bc.clean/cpp/src/arrow/util/compression_lz4.cc:201: undefined reference to `LZ4F_isError' ../../vcpkg_installed/x64-linux/debug/lib/libarrow.a(compression_lz4.cc.o): In function `arrow::util::(anonymous namespace)::LZ4Compressor::End(long, unsigned char*)': /projects/vcpkg/buildtrees/arrow/src/rrow-5.0.0-fc32d5e3bc.clean/cpp/src/arrow/util/compression_lz4.cc:215: undefined reference to `LZ4F_compressBegin' /projects/vcpkg/buildtrees/arrow/src/rrow-5.0.0-fc32d5e3bc.clean/cpp/src/arrow/util/compression_lz4.cc:215: undefined reference to `LZ4F_isError' /projects/vcpkg/buildtrees/arrow/src/rrow-5.0.0-fc32d5e3bc.clean/cpp/src/arrow/util/compression_lz4.cc:217: undefined reference to `LZ4F_compressBound' /projects/vcpkg/buildtrees/arrow/src/rrow-5.0.0-fc32d5e3bc.clean/cpp/src/arrow/util/compression_lz4.cc:222: undefined reference to `LZ4F_compressEnd' /projects/vcpkg/buildtrees/arrow/src/rrow-5.0.0-fc32d5e3bc.clean/cpp/src/arrow/util/compression_lz4.cc:223: undefined reference to `LZ4F_isError' ../../vcpkg_installed/x64-linux/debug/lib/libarrow.a(compression_lz4.cc.o): In function `arrow::util::(anonymous namespace)::Lz4FrameCodec::MaxCompressedLen(long, unsigned char const*)': /projects/vcpkg/buildtrees/arrow/src/rrow-5.0.0-fc32d5e3bc.clean/cpp/src/arrow/util/compression_lz4.cc:249: undefined reference to `LZ4F_compressFrameBound' ../../vcpkg_installed/x64-linux/debug/lib/libarrow.a(compression_lz4.cc.o): In function `arrow::util::(anonymous namespace)::Lz4FrameCodec::Compress(long, unsigned char const*, long, unsigned char*)': /projects/vcpkg/buildtrees/arrow/src/rrow-5.0.0-fc32d5e3bc.clean/cpp/src/arrow/util/compression_lz4.cc:255: undefined reference to `LZ4F_compressFrame' /projects/vcpkg/buildtrees/arrow/src/rrow-5.0.0-fc32d5e3bc.clean/cpp/src/arrow/util/compression_lz4.cc:257: undefined reference to `LZ4F_isError' ../../vcpkg_installed/x64-linux/debug/lib/libarrow.a(compression_lz4.cc.o): In function `arrow::util::(anonymous namespace)::Lz4Codec::Decompress(long, unsigned char const*, long, unsigned char*)': /projects/vcpkg/buildtrees/arrow/src/rrow-5.0.0-fc32d5e3bc.clean/cpp/src/arrow/util/compression_lz4.cc:318: undefined reference to `LZ4_decompress_safe' ../../vcpkg_installed/x64-linux/debug/lib/libarrow.a(compression_lz4.cc.o): In function `arrow::util::(anonymous namespace)::Lz4Codec::MaxCompressedLen(long, unsigned char const*)': /projects/vcpkg/buildtrees/arrow/src/rrow-5.0.0-fc32d5e3bc.clean/cpp/src/arrow/util/compression_lz4.cc:329: undefined reference to `LZ4_compressBound' ../../vcpkg_installed/x64-linux/debug/lib/libarrow.a(compression_lz4.cc.o): In function `arrow::util::(anonymous namespace)::Lz4Codec::Compress(long, unsigned char const*, long, unsigned char*)': /projects/vcpkg/buildtrees/arrow/src/rrow-5.0.0-fc32d5e3bc.clean/cpp/src/arrow/util/compression_lz4.cc:334: undefined reference to `LZ4_compress_default' ../../vcpkg_installed/x64-linux/debug/lib/libarrow.a(scalar_string.cc.o): In function `arrow::compute::internal::(anonymous namespace)::EnsureLookupTablesFilled()::{lambda()#1}::operator()() const': /projects/vcpkg/buildtrees/arrow/src/rrow-5.0.0-fc32d5e3bc.clean/cpp/src/arrow/compute/kernels/scalar_string.cc:120: undefined reference to `utf8proc_toupper' /projects/vcpkg/buildtrees/arrow/src/rrow-5.0.0-fc32d5e3bc.clean/cpp/src/arrow/compute/kernels/scalar_string.cc:121: undefined reference to `utf8proc_tolower' /projects/vcpkg/buildtrees/arrow/src/rrow-5.0.0-fc32d5e3bc.clean/cpp/src/arrow/compute/kernels/scalar_string.cc:122: undefined reference to `utf8proc_category' ../../vcpkg_installed/x64-linux/debug/lib/libarrow.a(scalar_string.cc.o): In function `arrow::compute::internal::(anonymous namespace)::UTF8UpperTransform::TransformCodepoint(unsigned int)': /projects/vcpkg/buildtrees/arrow/src/rrow-5.0.0-fc32d5e3bc.clean/cpp/src/arrow/compute/kernels/scalar_string.cc:304: undefined reference to `utf8proc_toupper' ../../vcpkg_installed/x64-linux/debug/lib/libarrow.a(scalar_string.cc.o): In function `arrow::compute::internal::(anonymous namespace)::UTF8LowerTransform::TransformCodepoint(unsigned int)': /projects/vcpkg/buildtrees/arrow/src/rrow-5.0.0-fc32d5e3bc.clean/cpp/src/arrow/compute/kernels/scalar_string.cc:314: undefined reference to `utf8proc_tolower' ../../vcpkg_installed/x64-linux/debug/lib/libarrow.a(scalar_string.cc.o): In function `arrow::compute::internal::(anonymous namespace)::HasAnyUnicodeGeneralCategory(unsigned int, unsigned int)': /projects/vcpkg/buildtrees/arrow/src/rrow-5.0.0-fc32d5e3bc.clean/cpp/src/arrow/compute/kernels/scalar_string.cc:1361: undefined reference to `utf8proc_category' ../../vcpkg_installed/x64-linux/debug/lib/libarrow.a(scalar_string.cc.o): In function `arrow::compute::internal::(anonymous namespace)::IsCasedCharacterUnicode(unsigned int)': /projects/vcpkg/buildtrees/arrow/src/rrow-5.0.0-fc32d5e3bc.clean/cpp/src/arrow/compute/kernels/scalar_string.cc:1387: undefined reference to `utf8proc_toupper' /projects/vcpkg/buildtrees/arrow/src/rrow-5.0.0-fc32d5e3bc.clean/cpp/src/arrow/compute/kernels/scalar_string.cc:1388: undefined reference to `utf8proc_tolower' ../../vcpkg_installed/x64-linux/debug/lib/libarrow.a(scalar_string.cc.o): In function `arrow::compute::internal::(anonymous namespace)::IsLowerCaseCharacterUnicode(unsigned int)': /projects/vcpkg/buildtrees/arrow/src/rrow-5.0.0-fc32d5e3bc.clean/cpp/src/arrow/compute/kernels/scalar_string.cc:1396: undefined reference to `utf8proc_toupper' /projects/vcpkg/buildtrees/arrow/src/rrow-5.0.0-fc32d5e3bc.clean/cpp/src/arrow/compute/kernels/scalar_string.cc:1397: undefined reference to `utf8proc_tolower' ../../vcpkg_installed/x64-linux/debug/lib/libarrow.a(scalar_string.cc.o): In function `arrow::compute::internal::(anonymous namespace)::IsUpperCaseCharacterUnicode(unsigned int)': /projects/vcpkg/buildtrees/arrow/src/rrow-5.0.0-fc32d5e3bc.clean/cpp/src/arrow/compute/kernels/scalar_string.cc:1405: undefined reference to `utf8proc_toupper' /projects/vcpkg/buildtrees/arrow/src/rrow-5.0.0-fc32d5e3bc.clean/cpp/src/arrow/compute/kernels/scalar_string.cc:1406: undefined reference to `utf8proc_tolower' ../../vcpkg_installed/x64-linux/debug/lib/libarrow.a(scalar_string.cc.o): In function `arrow::compute::internal::(anonymous namespace)::IsSpaceCharacterUnicode(unsigned int)': /projects/vcpkg/buildtrees/arrow/src/rrow-5.0.0-fc32d5e3bc.clean/cpp/src/arrow/compute/kernels/scalar_string.cc:1443: undefined reference to `utf8proc_get_property' ../../vcpkg_installed/x64-linux/debug/lib/libarrow.a(scalar_string.cc.o): In function `arrow::compute::internal::(anonymous namespace)::IsPrintableCharacterUnicode(unsigned int)': /projects/vcpkg/buildtrees/arrow/src/rrow-5.0.0-fc32d5e3bc.clean/cpp/src/arrow/compute/kernels/scalar_string.cc:1451: undefined reference to `utf8proc_category' collect2: error: ld returned 1 exit status library/CMakeFiles/imageset-source-test.dir/build.make:245: recipe for target 'library/imageset-source-test' failed make[2]: *** [library/imageset-source-test] Error 1 CMakeFiles/Makefile2:218: recipe for target 'library/CMakeFiles/imageset-source-test.dir/all' failed make[1]: *** [library/CMakeFiles/imageset-source-test.dir/all] Error 2 Makefile:100: recipe for target 'all' failed make: *** [all] Error 2\r\n```"
        },
        {
            "created_at": "2021-10-03T20:54:24.052Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-14188?focusedCommentId=17423725) by Kouhei Sutou (kou):*\n`[~icook]` Could you confirm this vcpkg related problem? It seems that `libarrow_bundled_dependencies.a` isn't linked automatically."
        },
        {
            "created_at": "2021-10-30T00:13:03.022Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-14188?focusedCommentId=17436213) by Ian Cook (icook):*\nYes this looks like a vcpkg-related problem.\r\n\r\nHere's a self-contained repro of the problem, using the [minimal C++ build example](https://github.com/apache/arrow/tree/master/cpp/examples/minimal_build):\r\n```java\n\r\ndocker pull ubuntu:18.04\r\ndocker run -it ubuntu:18.04 bash\n```\r\nThen in the container:\r\n```java\n\r\napt update\r\napt install -y build-essential software-properties-common tar curl zip unzip git wget\r\napt purge --auto-remove cmake\r\nwget -O - https://apt.kitware.com/keys/kitware-archive-latest.asc 2>/dev/null | gpg --dearmor - | tee /etc/apt/trusted.gpg.d/kitware.gpg >/dev/null\r\napt-add-repository 'deb https://apt.kitware.com/ubuntu/ bionic main'\r\napt install -y cmake ninja-build pkg-config flex bison\r\n\r\ngit clone https://github.com/microsoft/vcpkg\r\n./vcpkg/bootstrap-vcpkg.sh -useSystemBinaries\r\n./vcpkg/vcpkg integrate install\r\n./vcpkg/vcpkg install arrow\r\n\r\nwget https://github.com/apache/arrow/raw/master/cpp/examples/minimal_build/CMakeLists.txt\r\nwget https://github.com/apache/arrow/raw/master/cpp/examples/minimal_build/example.cc\r\nmkdir build && cd build\r\ncmake -DCMAKE_TOOLCHAIN_FILE=/vcpkg/scripts/buildsystems/vcpkg.cmake -DVCPKG_TARGET_TRIPLET=x64-linux -DARROW_LINK_SHARED=OFF ..\r\ncmake --build .\n```"
        }
    ]
}