{
    "issue": {
        "title": "[C++] Add support for sorting to the Substrait consumer",
        "body": "***Note**: This issue was originally created as [ARROW-16649](https://issues.apache.org/jira/browse/ARROW-16649). Please see the [migration documentation](https://gist.github.com/toddfarmer/12aa88361532d21902818a6044fda4c3) for further details.*\n\n### Original Issue Description:\nThe streaming execution engine supports sorting (I believe, as a sink node option?), but the Substrait consumer does not currently consume sort relations.\u00a0 Please can we have support for this?\r\n\r\nHere's the example code/plan I tested with (in R, using the in-development [substrait](https://github.com/voltrondata/substrait-r) package):\r\n\r\n\u00a0\r\n```java\n\r\nlibrary(dplyr)\r\nlibrary(substrait)\r\n\r\n# create a basic table and order it\r\nout <- tibble::tibble(a = 1, b = 2) %>%\r\n\u00a0 arrow_substrait_compiler() %>%\r\n\u00a0 arrange(a)\r\n\r\n# take a look at the plan created\r\nout$plan()\r\n#> message of type 'substrait.Plan' with 2 fields set\r\n#> extension_uris {\r\n#> \u00a0 extension_uri_anchor: 1\r\n#> }\r\n#> relations {\r\n#> \u00a0 root {\r\n#> \u00a0 \u00a0 input {\r\n#> \u00a0 \u00a0 \u00a0 sort {\r\n#> \u00a0 \u00a0 \u00a0 \u00a0 input {\r\n#> \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 read {\r\n#> \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 base_schema {\r\n#> \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 names: \"a\"\r\n#> \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 names: \"b\"\r\n#> \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 struct_ {\r\n#> \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 types {\r\n#> \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 fp64 {\r\n#> \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 }\r\n#> \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 }\r\n#> \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 types {\r\n#> \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 fp64 {\r\n#> \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 }\r\n#> \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 }\r\n#> \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 }\r\n#> \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 }\r\n#> \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 named_table {\r\n#> \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 names: \"named_table_1\"\r\n#> \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 }\r\n#> \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 }\r\n#> \u00a0 \u00a0 \u00a0 \u00a0 }\r\n#> \u00a0 \u00a0 \u00a0 \u00a0 sorts {\r\n#> \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 expr {\r\n#> \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 selection {\r\n#> \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 direct_reference {\r\n#> \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 struct_field {\r\n#> \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 }\r\n#> \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 }\r\n#> \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 }\r\n#> \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 }\r\n#> \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 direction: SORT_DIRECTION_ASC_NULLS_LAST\r\n#> \u00a0 \u00a0 \u00a0 \u00a0 }\r\n#> \u00a0 \u00a0 \u00a0 }\r\n#> \u00a0 \u00a0 }\r\n#> \u00a0 \u00a0 names: \"a\"\r\n#> \u00a0 \u00a0 names: \"b\"\r\n#> \u00a0 }\r\n#> }\r\n\r\n# try to run the plan\r\ncollect(out)\r\n#> Error: NotImplemented: conversion to arrow::compute::Declaration from Substrait relation sort {\r\n...\r\n#> /home/nic2/arrow/cpp/src/arrow/engine/substrait/serde.cc:73 \u00a0FromProto(plan_rel.rel(), ext_set)\r\n```",
        "created_at": "2022-05-25T08:23:10.000Z",
        "updated_at": "2022-08-26T12:52:38.000Z",
        "labels": [
            "Migrated from Jira",
            "Component: C++",
            "Type: enhancement"
        ],
        "closed": false
    },
    "comments": [
        {
            "created_at": "2022-08-26T09:15:30.687Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-16649?focusedCommentId=17585264) by Vibhatha Lakmal Abeykoon (vibhatha):*\n`[~thisisnic]` \u00a0we are working on `Fetch` and `Sort` feature for this. The PR is up here: <https://github.com/apache/arrow/pull/13700>\u00a0and also there is a discussion going on to include this functionality for the consumer[1]. This would cover the question asked here for an extent. We are still working out the logistics.\u00a0\r\n\r\n[1]. https://issues.apache.org/jira/browse/ARROW-17503"
        },
        {
            "created_at": "2022-08-26T12:52:38.978Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-16649?focusedCommentId=17585356) by Nicola Crane (thisisnic):*\nAwesome, thanks for the update!"
        }
    ]
}