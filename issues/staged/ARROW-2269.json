{
    "issue": {
        "title": "[Python] Cannot build bdist_wheel for Python",
        "body": "***Note**: This issue was originally created as [ARROW-2269](https://issues.apache.org/jira/browse/ARROW-2269). Please see the [migration documentation](https://gist.github.com/toddfarmer/12aa88361532d21902818a6044fda4c3) for further details.*\n\n### Original Issue Description:\nI am trying current master.\r\n\r\nI ran:\r\n\r\n{{{{\r\npython setup.py build_ext --build-type=$ARROW_BUILD_TYPE --with-parquet --with-plasma --bundle-arrow-cpp bdist_wheel\r\n}}}}\r\n\r\nOutput:\r\n\r\n{{{{\r\nrunning build_ext\r\ncreating build\r\ncreating build/temp.linux-x86_64-3.6\r\n\u2013 Runnning cmake for pyarrow\r\ncmake ~~DPYTHON_EXECUTABLE=.../Temp/arrow/pyarrow/bin/python  -DPYARROW_BUILD_PARQUET=on -DPYARROW_BOOST_USE_SHARED=on -DPYARROW_BUILD_PLASMA=on -DPYARROW_BUNDLE_ARROW_CPP=ON -DCMAKE_BUILD_TYPE=release .../Temp/arrow/arrow/python\r\n-~~ The C compiler identification is GNU 7.2.0\r\n\u2013 The CXX compiler identification is GNU 7.2.0\r\n\u2013 Check for working C compiler: /usr/bin/cc\r\n\u2013 Check for working C compiler: /usr/bin/cc \u2013 works\r\n\u2013 Detecting C compiler ABI info\r\n\u2013 Detecting C compiler ABI info - done\r\n\u2013 Detecting C compile features\r\n\u2013 Detecting C compile features - done\r\n\u2013 Check for working CXX compiler: /usr/bin/c++\r\n\u2013 Check for working CXX compiler: /usr/bin/c++ \u2013 works\r\n\u2013 Detecting CXX compiler ABI info\r\n\u2013 Detecting CXX compiler ABI info - done\r\n\u2013 Detecting CXX compile features\r\n\u2013 Detecting CXX compile features - done\r\nINFOCompiler command: /usr/bin/c++\r\nINFOCompiler version: Using built-in specs.\r\nCOLLECT_GCC=/usr/bin/c++\r\nCOLLECT_LTO_WRAPPER=/usr/lib/gcc/x86_64-linux-gnu/7/lto-wrapper\r\nOFFLOAD_TARGET_NAMES=nvptx-none\r\nOFFLOAD_TARGET_DEFAULT=1\r\nTarget: x86_64-linux-gnu\r\nConfigured with: ../src/configure -v --with-pkgversion='Ubuntu 7.2.0-8ubuntu3.2' --with-bugurl=file:///usr/share/doc/gcc-7/README.Bugs --enable-languages=c,ada,c+,go,brig,d,fortran,objc,obj-c+ --prefix=/usr --with-gcc-major-version-only --program-suffix=-7 --program-prefix=x86_64-linux-gnu- --enable-shared --enable-linker-build-id --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --libdir=/usr/lib --enable-nls --with-sysroot=/ --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --with-default-libstdcxx-abi=new --enable-gnu-unique-object --disable-vtable-verify --enable-libmpx --enable-plugin --enable-default-pie --with-system-zlib --with-target-system-zlib --enable-objc-gc=auto --enable-multiarch --disable-werror --with-arch-32=i686 --with-abi=m64 --with-multilib-list=m32,m64,mx32 --enable-multilib --with-tune=generic --enable-offload-targets=nvptx-none --without-cuda-driver --enable-checking=release --build=x86_64-linux-gnu --host=x86_64-linux-gnu --target=x86_64-linux-gnu\r\nThread model: posix\r\ngcc version 7.2.0 (Ubuntu 7.2.0-8ubuntu3.2) \r\n\r\nINFOCompiler id: GNU\r\nSelected compiler gcc 7.2.0\r\n\u2013 Performing Test CXX_SUPPORTS_SSE3\r\n\u2013 Performing Test CXX_SUPPORTS_SSE3 - Success\r\n\u2013 Performing Test CXX_SUPPORTS_ALTIVEC\r\n\u2013 Performing Test CXX_SUPPORTS_ALTIVEC - Failed\r\nConfigured for RELEASE build (set with cmake ~~DCMAKE_BUILD_TYPE={release,debug,...})\r\n-~~ Build Type: RELEASE\r\n\u2013 Build output directory: .../Temp/arrow/arrow/python/build/temp.linux-x86_64-3.6/release/\r\n\u2013 Found PythonInterp: .../Temp/arrow/pyarrow/bin/python (found version \"3.6.3\") \r\n\u2013 Searching for Python libs in .../Temp/arrow/pyarrow/lib64;.../Temp/arrow/pyarrow/lib;/usr/lib/python3.6/config-3.6m-x86_64-linux-gnu\r\n\u2013 Looking for python3.6m\r\n\u2013 Found Python lib /usr/lib/python3.6/config-3.6m-x86_64-linux-gnu/libpython3.6m.so\r\n\u2013 Found PythonLibs: /usr/lib/python3.6/config-3.6m-x86_64-linux-gnu/libpython3.6m.so\r\n\u2013 Found NumPy: version \"1.14.1\" .../Temp/arrow/pyarrow/lib/python3.6/site-packages/numpy/core/include\r\n\u2013 Searching for Python libs in .../Temp/arrow/pyarrow/lib64;.../Temp/arrow/pyarrow/lib;/usr/lib/python3.6/config-3.6m-x86_64-linux-gnu\r\n\u2013 Looking for python3.6m\r\n\u2013 Found Python lib /usr/lib/python3.6/config-3.6m-x86_64-linux-gnu/libpython3.6m.so\r\n\u2013 Found PkgConfig: /usr/bin/pkg-config (found version \"0.29.1\") \r\n\u2013 Checking for module 'arrow'\r\n\u2013   Found arrow, version 0.9.0-SNAPSHOT\r\n\u2013 Arrow ABI version: 0.0.0\r\n\u2013 Arrow SO version: 0\r\n\u2013 Found the Arrow core library: .../Temp/arrow/dist/lib/libarrow.so\r\n\u2013 Found the Arrow Python library: .../Temp/arrow/dist/lib/libarrow_python.so\r\n\u2013 Boost version: 1.63.0\r\n\u2013 Found the following Boost libraries:\r\n\u2013   system\r\n\u2013   filesystem\r\n\u2013   regex\r\nAdded shared library dependency arrow: .../Temp/arrow/dist/lib/libarrow.so\r\nAdded shared library dependency arrow_python: .../Temp/arrow/dist/lib/libarrow_python.so\r\n\u2013 Found the Parquet library: .../Temp/arrow/dist/lib/libparquet.so\r\nAdded shared library dependency parquet: .../Temp/arrow/dist/lib/libparquet.so\r\n\u2013 Checking for module 'plasma'\r\n\u2013   Found plasma, version \r\n\u2013 Plasma ABI version: 0.0.0\r\n\u2013 Plasma SO version: 0\r\n\u2013 Found the Plasma core library: .../Temp/arrow/dist/lib/libplasma.so\r\n\u2013 Found Plasma executable: .../Temp/arrow/dist/bin/plasma_store\r\nAdded shared library dependency libplasma: .../Temp/arrow/dist/lib/libplasma.so\r\n\u2013 Configuring done\r\n\u2013 Generating done\r\n\u2013 Build files have been written to: .../Temp/arrow/arrow/python/build/temp.linux-x86_64-3.6\r\n\u2013 Finished cmake for pyarrow\r\n\u2013 Running cmake --build for pyarrow\r\nmake\r\nScanning dependencies of target lib_pyx\r\n[ 11%] Compiling Cython CXX source for lib...\r\n[ 11%] Built target lib_pyx\r\nScanning dependencies of target lib\r\n[ 22%] Building CXX object CMakeFiles/lib.dir/lib.cxx.o\r\n[ 33%] Linking CXX shared module release/lib.cpython-36m-x86_64-linux-gnu.so\r\n[ 33%] Built target lib\r\nScanning dependencies of target _parquet_pyx\r\n[ 44%] Compiling Cython CXX source for _parquet...\r\n[ 44%] Built target _parquet_pyx\r\nScanning dependencies of target _parquet\r\n[ 55%] Building CXX object CMakeFiles/_parquet.dir/_parquet.cxx.o\r\n[ 66%] Linking CXX shared module release/_parquet.cpython-36m-x86_64-linux-gnu.so\r\n[ 66%] Built target _parquet\r\nScanning dependencies of target plasma_pyx\r\n[ 77%] Compiling Cython CXX source for plasma...\r\n[ 77%] Built target plasma_pyx\r\nScanning dependencies of target plasma\r\n[ 88%] Building CXX object CMakeFiles/plasma.dir/plasma.cxx.o\r\n[100%] Linking CXX shared module release/plasma.cpython-36m-x86_64-linux-gnu.so\r\n[100%] Built target plasma\r\n\u2013 Finished cmake --build for pyarrow\r\n.../Temp/arrow/arrow/python/build/lib.linux-x86_64-3.6/pyarrow\r\n['release/libarrow.so.0.0.0', 'release/libarrow.so.0', 'release/libarrow.so']\r\nrelease/libarrow.so.0.0.0\r\n['release/libarrow_python.so.0.0.0', 'release/libarrow_python.so.0', 'release/libarrow_python.so']\r\nrelease/libarrow_python.so.0.0.0\r\n['release/libplasma.so.0.0.0', 'release/libplasma.so.0', 'release/libplasma.so']\r\nrelease/libplasma.so.0.0.0\r\n['release/libparquet.so.1.3.2', 'release/libparquet.so.1', 'release/libparquet.so']\r\nrelease/libparquet.so.1.3.2\r\n}}}}\r\n\r\nAnd after that it crashes because it cannot find `arrow_boost_filesystem` in `build_prefix` in `_move_shared_libs_unix` call which makes `libs` variable there empty.\r\n\r\nIf I do:\r\n\r\n{{{{\r\n$ find . -name \\*.so\r\n./build/lib.linux-x86_64-3.6/pyarrow/libparquet.so\r\n./build/lib.linux-x86_64-3.6/pyarrow/libplasma.so\r\n./build/lib.linux-x86_64-3.6/pyarrow/libarrow.so\r\n./build/lib.linux-x86_64-3.6/pyarrow/libarrow_python.so\r\n./build/temp.linux-x86_64-3.6/release/_parquet.cpython-36m-x86_64-linux-gnu.so\r\n./build/temp.linux-x86_64-3.6/release/libparquet.so\r\n./build/temp.linux-x86_64-3.6/release/libboost_filesystem.so\r\n./build/temp.linux-x86_64-3.6/release/libplasma.so\r\n./build/temp.linux-x86_64-3.6/release/libarrow.so\r\n./build/temp.linux-x86_64-3.6/release/libboost_system.so\r\n./build/temp.linux-x86_64-3.6/release/lib.cpython-36m-x86_64-linux-gnu.so\r\n./build/temp.linux-x86_64-3.6/release/libboost_regex.so\r\n./build/temp.linux-x86_64-3.6/release/libarrow_python.so\r\n./build/temp.linux-x86_64-3.6/release/plasma.cpython-36m-x86_64-linux-gnu.so\r\n./pyarrow/_parquet.cpython-36m-x86_64-linux-gnu.so\r\n./pyarrow/lib.cpython-36m-x86_64-linux-gnu.so\r\n./pyarrow/plasma.cpython-36m-x86_64-linux-gnu.so\r\n}}}}\r\n\r\nSo it seems the issue is that the filename is `libboost_filesystem.so`, but it is trying to move `libarrow_boost_filesystem.so`?\r\n\r\nChanging lines in `setup.py` to:\r\n\r\n{{{{\r\n                    move_shared_libs(build_prefix, build_lib, \"boost_filesystem\")\r\n                    move_shared_libs(build_prefix, build_lib, \"boost_system\")\r\n                    move_shared_libs(build_prefix, build_lib, \"boost_regex\")\r\n}}}}\r\n\r\nseems to make it build.",
        "created_at": "2018-03-06T10:02:27.000Z",
        "updated_at": "2018-08-01T16:21:37.000Z",
        "labels": [
            "Migrated from Jira",
            "Component: Packaging",
            "Component: Python",
            "Type: bug"
        ],
        "closed": true,
        "closed_at": "2018-03-09T15:29:48.000Z"
    },
    "comments": [
        {
            "created_at": "2018-03-06T10:13:14.500Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-2269?focusedCommentId=16387565) by Mitar (mitar):*\nI opened a pull request making it easier to debug this: https://github.com/apache/arrow/pull/1712"
        },
        {
            "created_at": "2018-03-09T15:29:48.076Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-2269?focusedCommentId=16393003) by Wes McKinney (wesm):*\nIssue resolved by pull request 1718\n<https://github.com/apache/arrow/pull/1718>"
        }
    ]
}