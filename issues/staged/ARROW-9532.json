{
    "issue": {
        "title": "[Python] Building pyarrow for MacPorts on macOS",
        "body": "***Note**: This issue was originally created as [ARROW-9532](https://issues.apache.org/jira/browse/ARROW-9532). Please see the [migration documentation](https://gist.github.com/toddfarmer/12aa88361532d21902818a6044fda4c3) for further details.*\n\n### Original Issue Description:\nI'm writing a MacPorts port of Apache Arrow, but am unable to build pyarrow after a successful apache-arrow build and install.\r\n\r\nWhen I run `python setup.py build_ext --inplace`, cmake finds the installed libarrow.dylib and headers, but still fails with this error.\r\n\r\nPortfile: <https://github.com/macports/macports-ports/blob/409619435485a6ce4620a0fa3063fe33ba5f9319/devel/apache-arrow/Portfile>\r\n\r\nCommand: sudo port -vst install py38-pyarrow\r\n\r\n\u00a0Azure log:\u00a0<https://paste.z0k.xyz/a953d943d11c.txt>\r\n\r\n```\n\r\n-- Running cmake for pyarrow\r\ncmake -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=/opt/local -DCMAKE_INSTALL_NAME_DIR=/opt/local/lib -DCMAKE_SYSTEM_PREFIX_PATH=/opt/local;/usr -DCMAKE_C_COMPILER=/usr/bin/clang -DCMAKE_CXX_COMPILER=/usr/bin/clang++ -DCMAKE_POLICY_DEFAULT_CMP0025=NEW -DCMAKE_POLICY_DEFAULT_CMP0060=NEW -DCMAKE_VERBOSE_MAKEFILE=ON -DCMAKE_COLOR_MAKEFILE=ON -DCMAKE_FIND_FRAMEWORK=LAST -DCMAKE_EXPORT_COMPILE_COMMANDS=ON -DCMAKE_MAKE_PROGRAM=/usr/bin/make -DCMAKE_MODULE_PATH=/opt/local/share/cmake/Modules -DCMAKE_PREFIX_PATH=/opt/local/share/cmake/Modules -DCMAKE_BUILD_WITH_INSTALL_RPATH:BOOL=ON -DCMAKE_INSTALL_RPATH=/opt/local/lib -Wno-dev -DARROW_FLIGHT=ON -DARROW_JEMALLOC=OFF -DARROW_ORC=ON -DARROW_PARQUET=ON -DARROW_PLASMA=ON -DARROW_PROTOBUF_USE_SHARED=ON -DARROW_PYTHON=ON -DARROW_WITH_BZ2=ON -DARROW_WITH_ZLIB=ON -DARROW_WITH_ZSTD=ON -DARROW_WITH_LZ4=ON -DARROW_WITH_SNAPPY=ON -DARROW_WITH_BROTLI=ON -DARROW_INSTALL_NAME_RPATH=OFF -DPYTHON_EXECUTABLE=/opt/local/Library/Frameworks/Python.framework/Versions/3.8/bin/python3.8  -DPYARROW_BUILD_CUDA=off -DPYARROW_BUILD_FLIGHT=off -DPYARROW_BUILD_GANDIVA=off -DPYARROW_BUILD_DATASET=off -DPYARROW_BUILD_ORC=off -DPYARROW_BUILD_PARQUET=on -DPYARROW_BUILD_PLASMA=off -DPYARROW_BUILD_S3=off -DPYARROW_BUILD_HDFS=off -DPYARROW_USE_TENSORFLOW=off -DPYARROW_BUNDLE_ARROW_CPP=off -DPYARROW_BUNDLE_BOOST=off -DPYARROW_GENERATE_COVERAGE=off -DPYARROW_BOOST_USE_SHARED=on -DPYARROW_PARQUET_USE_SHARED=on -DCMAKE_BUILD_TYPE=release /opt/local/var/macports/build/_Users_runner_work_1_s_devel_apache-arrow/py38-pyarrow/work/arrow-0.17.1/python\r\n...\r\n-- Found Arrow: /opt/local/include (found version \"0.17.1\")\r\n-- Arrow version: 0.17.1 (CMake package configuration: Arrow)\r\n-- Arrow SO and ABI version: 17\r\n-- Arrow full SO version: 17.1.0\r\n-- Found the Arrow core shared library: /opt/local/lib/libarrow.17.1.0.dylib\r\n-- Found the Arrow core import library:\r\n-- Found the Arrow core static library: /opt/local/lib/libarrow.a\r\n-- Could NOT find ArrowPython (missing: ArrowPython_DIR)\r\nCMake Error at /opt/local/share/cmake-3.17/Modules/FindPackageHandleStandardArgs.cmake:164 (message):\r\n  Could NOT find ArrowPython (missing: ARROW_PYTHON_INCLUDE_DIR\r\n  ARROW_PYTHON_LIB_DIR) (found version \"0.17.1\")\r\nCall Stack (most recent call first):\r\n  /opt/local/share/cmake-3.17/Modules/FindPackageHandleStandardArgs.cmake:445 (_FPHSA_FAILURE_MESSAGE)\r\n  cmake_modules/FindArrowPython.cmake:76 (find_package_handle_standard_args)\r\n  CMakeLists.txt:210 (find_package)\r\n```\r\n\r\nHere's the installed files from the Apache Arrow install:\r\n\r\nPort apache-arrow contains:\r\n\r\n```\n\r\n/opt/local/bin/plasma-store-server\r\n/opt/local/include/arrow/adapters/orc/adapter.h\r\n/opt/local/include/arrow/api.h\r\n/opt/local/include/arrow/array.h\r\n/opt/local/include/arrow/array/builder_adaptive.h\r\n/opt/local/include/arrow/array/builder_base.h\r\n/opt/local/include/arrow/array/builder_binary.h\r\n/opt/local/include/arrow/array/builder_decimal.h\r\n/opt/local/include/arrow/array/builder_dict.h\r\n/opt/local/include/arrow/array/builder_nested.h\r\n/opt/local/include/arrow/array/builder_primitive.h\r\n/opt/local/include/arrow/array/builder_time.h\r\n/opt/local/include/arrow/array/builder_union.h\r\n/opt/local/include/arrow/array/concatenate.h\r\n/opt/local/include/arrow/array/diff.h\r\n/opt/local/include/arrow/array/validate.h\r\n/opt/local/include/arrow/buffer.h\r\n/opt/local/include/arrow/buffer_builder.h\r\n/opt/local/include/arrow/builder.h\r\n/opt/local/include/arrow/c/abi.h\r\n/opt/local/include/arrow/c/bridge.h\r\n/opt/local/include/arrow/c/helpers.h\r\n/opt/local/include/arrow/compare.h\r\n/opt/local/include/arrow/compute/api.h\r\n/opt/local/include/arrow/compute/benchmark_util.h\r\n/opt/local/include/arrow/compute/context.h\r\n/opt/local/include/arrow/compute/expression.h\r\n/opt/local/include/arrow/compute/kernel.h\r\n/opt/local/include/arrow/compute/kernels/add.h\r\n/opt/local/include/arrow/compute/kernels/aggregate.h\r\n/opt/local/include/arrow/compute/kernels/boolean.h\r\n/opt/local/include/arrow/compute/kernels/cast.h\r\n/opt/local/include/arrow/compute/kernels/compare.h\r\n/opt/local/include/arrow/compute/kernels/count.h\r\n/opt/local/include/arrow/compute/kernels/filter.h\r\n/opt/local/include/arrow/compute/kernels/hash.h\r\n/opt/local/include/arrow/compute/kernels/isin.h\r\n/opt/local/include/arrow/compute/kernels/match.h\r\n/opt/local/include/arrow/compute/kernels/mean.h\r\n/opt/local/include/arrow/compute/kernels/minmax.h\r\n/opt/local/include/arrow/compute/kernels/nth_to_indices.h\r\n/opt/local/include/arrow/compute/kernels/sort_to_indices.h\r\n/opt/local/include/arrow/compute/kernels/sum.h\r\n/opt/local/include/arrow/compute/kernels/take.h\r\n/opt/local/include/arrow/compute/logical_type.h\r\n/opt/local/include/arrow/compute/operation.h\r\n/opt/local/include/arrow/compute/test_util.h\r\n/opt/local/include/arrow/compute/type_fwd.h\r\n/opt/local/include/arrow/csv/api.h\r\n/opt/local/include/arrow/csv/chunker.h\r\n/opt/local/include/arrow/csv/column_builder.h\r\n/opt/local/include/arrow/csv/column_decoder.h\r\n/opt/local/include/arrow/csv/converter.h\r\n/opt/local/include/arrow/csv/options.h\r\n/opt/local/include/arrow/csv/parser.h\r\n/opt/local/include/arrow/csv/reader.h\r\n/opt/local/include/arrow/csv/test_common.h\r\n/opt/local/include/arrow/dataset/api.h\r\n/opt/local/include/arrow/dataset/dataset.h\r\n/opt/local/include/arrow/dataset/discovery.h\r\n/opt/local/include/arrow/dataset/file_base.h\r\n/opt/local/include/arrow/dataset/file_ipc.h\r\n/opt/local/include/arrow/dataset/file_parquet.h\r\n/opt/local/include/arrow/dataset/filter.h\r\n/opt/local/include/arrow/dataset/partition.h\r\n/opt/local/include/arrow/dataset/pch.h\r\n/opt/local/include/arrow/dataset/projector.h\r\n/opt/local/include/arrow/dataset/scanner.h\r\n/opt/local/include/arrow/dataset/test_util.h\r\n/opt/local/include/arrow/dataset/type_fwd.h\r\n/opt/local/include/arrow/dataset/visibility.h\r\n/opt/local/include/arrow/device.h\r\n/opt/local/include/arrow/extension_type.h\r\n/opt/local/include/arrow/filesystem/api.h\r\n/opt/local/include/arrow/filesystem/filesystem.h\r\n/opt/local/include/arrow/filesystem/hdfs.h\r\n/opt/local/include/arrow/filesystem/localfs.h\r\n/opt/local/include/arrow/filesystem/mockfs.h\r\n/opt/local/include/arrow/filesystem/path_forest.h\r\n/opt/local/include/arrow/filesystem/path_util.h\r\n/opt/local/include/arrow/filesystem/s3_test_util.h\r\n/opt/local/include/arrow/filesystem/s3fs.h\r\n/opt/local/include/arrow/filesystem/test_util.h\r\n/opt/local/include/arrow/flight/api.h\r\n/opt/local/include/arrow/flight/client.h\r\n/opt/local/include/arrow/flight/client_auth.h\r\n/opt/local/include/arrow/flight/client_middleware.h\r\n/opt/local/include/arrow/flight/customize_protobuf.h\r\n/opt/local/include/arrow/flight/middleware.h\r\n/opt/local/include/arrow/flight/pch.h\r\n/opt/local/include/arrow/flight/platform.h\r\n/opt/local/include/arrow/flight/server.h\r\n/opt/local/include/arrow/flight/server_auth.h\r\n/opt/local/include/arrow/flight/server_middleware.h\r\n/opt/local/include/arrow/flight/test_util.h\r\n/opt/local/include/arrow/flight/types.h\r\n/opt/local/include/arrow/flight/visibility.h\r\n/opt/local/include/arrow/io/api.h\r\n/opt/local/include/arrow/io/buffered.h\r\n/opt/local/include/arrow/io/caching.h\r\n/opt/local/include/arrow/io/compressed.h\r\n/opt/local/include/arrow/io/concurrency.h\r\n/opt/local/include/arrow/io/file.h\r\n/opt/local/include/arrow/io/hdfs.h\r\n/opt/local/include/arrow/io/interfaces.h\r\n/opt/local/include/arrow/io/memory.h\r\n/opt/local/include/arrow/io/mman.h\r\n/opt/local/include/arrow/io/slow.h\r\n/opt/local/include/arrow/io/test_common.h\r\n/opt/local/include/arrow/io/type_fwd.h\r\n/opt/local/include/arrow/ipc/api.h\r\n/opt/local/include/arrow/ipc/dictionary.h\r\n/opt/local/include/arrow/ipc/feather.h\r\n/opt/local/include/arrow/ipc/json_integration.h\r\n/opt/local/include/arrow/ipc/json_simple.h\r\n/opt/local/include/arrow/ipc/message.h\r\n/opt/local/include/arrow/ipc/options.h\r\n/opt/local/include/arrow/ipc/reader.h\r\n/opt/local/include/arrow/ipc/test_common.h\r\n/opt/local/include/arrow/ipc/util.h\r\n/opt/local/include/arrow/ipc/writer.h\r\n/opt/local/include/arrow/json/api.h\r\n/opt/local/include/arrow/json/chunked_builder.h\r\n/opt/local/include/arrow/json/chunker.h\r\n/opt/local/include/arrow/json/converter.h\r\n/opt/local/include/arrow/json/options.h\r\n/opt/local/include/arrow/json/parser.h\r\n/opt/local/include/arrow/json/rapidjson_defs.h\r\n/opt/local/include/arrow/json/reader.h\r\n/opt/local/include/arrow/json/test_common.h\r\n/opt/local/include/arrow/memory_pool.h\r\n/opt/local/include/arrow/memory_pool_test.h\r\n/opt/local/include/arrow/pch.h\r\n/opt/local/include/arrow/pretty_print.h\r\n/opt/local/include/arrow/python/api.h\r\n/opt/local/include/arrow/python/arrow_to_pandas.h\r\n/opt/local/include/arrow/python/benchmark.h\r\n/opt/local/include/arrow/python/common.h\r\n/opt/local/include/arrow/python/config.h\r\n/opt/local/include/arrow/python/datetime.h\r\n/opt/local/include/arrow/python/decimal.h\r\n/opt/local/include/arrow/python/deserialize.h\r\n/opt/local/include/arrow/python/extension_type.h\r\n/opt/local/include/arrow/python/flight.h\r\n/opt/local/include/arrow/python/helpers.h\r\n/opt/local/include/arrow/python/inference.h\r\n/opt/local/include/arrow/python/init.h\r\n/opt/local/include/arrow/python/io.h\r\n/opt/local/include/arrow/python/iterators.h\r\n/opt/local/include/arrow/python/numpy_convert.h\r\n/opt/local/include/arrow/python/numpy_interop.h\r\n/opt/local/include/arrow/python/numpy_to_arrow.h\r\n/opt/local/include/arrow/python/pch.h\r\n/opt/local/include/arrow/python/platform.h\r\n/opt/local/include/arrow/python/pyarrow.h\r\n/opt/local/include/arrow/python/pyarrow_api.h\r\n/opt/local/include/arrow/python/pyarrow_lib.h\r\n/opt/local/include/arrow/python/python_to_arrow.h\r\n/opt/local/include/arrow/python/serialize.h\r\n/opt/local/include/arrow/python/type_traits.h\r\n/opt/local/include/arrow/python/visibility.h\r\n/opt/local/include/arrow/record_batch.h\r\n/opt/local/include/arrow/result.h\r\n/opt/local/include/arrow/scalar.h\r\n/opt/local/include/arrow/sparse_tensor.h\r\n/opt/local/include/arrow/status.h\r\n/opt/local/include/arrow/stl.h\r\n/opt/local/include/arrow/stl_allocator.h\r\n/opt/local/include/arrow/table.h\r\n/opt/local/include/arrow/table_builder.h\r\n/opt/local/include/arrow/tensor.h\r\n/opt/local/include/arrow/testing/extension_type.h\r\n/opt/local/include/arrow/testing/generator.h\r\n/opt/local/include/arrow/testing/gtest_common.h\r\n/opt/local/include/arrow/testing/gtest_compat.h\r\n/opt/local/include/arrow/testing/gtest_util.h\r\n/opt/local/include/arrow/testing/pch.h\r\n/opt/local/include/arrow/testing/random.h\r\n/opt/local/include/arrow/testing/util.h\r\n/opt/local/include/arrow/type.h\r\n/opt/local/include/arrow/type_fwd.h\r\n/opt/local/include/arrow/type_traits.h\r\n/opt/local/include/arrow/util/align_util.h\r\n/opt/local/include/arrow/util/atomic_shared_ptr.h\r\n/opt/local/include/arrow/util/base64.h\r\n/opt/local/include/arrow/util/basic_decimal.h\r\n/opt/local/include/arrow/util/bit_stream_utils.h\r\n/opt/local/include/arrow/util/bit_util.h\r\n/opt/local/include/arrow/util/bpacking.h\r\n/opt/local/include/arrow/util/bpacking_avx512_generated.h\r\n/opt/local/include/arrow/util/bpacking_default.h\r\n/opt/local/include/arrow/util/byte_stream_split.h\r\n/opt/local/include/arrow/util/checked_cast.h\r\n/opt/local/include/arrow/util/compare.h\r\n/opt/local/include/arrow/util/compiler_util.h\r\n/opt/local/include/arrow/util/compression.h\r\n/opt/local/include/arrow/util/config.h\r\n/opt/local/include/arrow/util/cpu_info.h\r\n/opt/local/include/arrow/util/decimal.h\r\n/opt/local/include/arrow/util/delimiting.h\r\n/opt/local/include/arrow/util/double_conversion.h\r\n/opt/local/include/arrow/util/formatting.h\r\n/opt/local/include/arrow/util/functional.h\r\n/opt/local/include/arrow/util/future.h\r\n/opt/local/include/arrow/util/future_iterator.h\r\n/opt/local/include/arrow/util/hash_util.h\r\n/opt/local/include/arrow/util/hashing.h\r\n/opt/local/include/arrow/util/int_util.h\r\n/opt/local/include/arrow/util/io_util.h\r\n/opt/local/include/arrow/util/iterator.h\r\n/opt/local/include/arrow/util/key_value_metadata.h\r\n/opt/local/include/arrow/util/logging.h\r\n/opt/local/include/arrow/util/macros.h\r\n/opt/local/include/arrow/util/make_unique.h\r\n/opt/local/include/arrow/util/memory.h\r\n/opt/local/include/arrow/util/neon_util.h\r\n/opt/local/include/arrow/util/optional.h\r\n/opt/local/include/arrow/util/parallel.h\r\n/opt/local/include/arrow/util/parsing.h\r\n/opt/local/include/arrow/util/print.h\r\n/opt/local/include/arrow/util/range.h\r\n/opt/local/include/arrow/util/rle_encoding.h\r\n/opt/local/include/arrow/util/sort.h\r\n/opt/local/include/arrow/util/sse_util.h\r\n/opt/local/include/arrow/util/stopwatch.h\r\n/opt/local/include/arrow/util/string.h\r\n/opt/local/include/arrow/util/string_builder.h\r\n/opt/local/include/arrow/util/string_view.h\r\n/opt/local/include/arrow/util/task_group.h\r\n/opt/local/include/arrow/util/thread_pool.h\r\n/opt/local/include/arrow/util/time.h\r\n/opt/local/include/arrow/util/trie.h\r\n/opt/local/include/arrow/util/type_traits.h\r\n/opt/local/include/arrow/util/ubsan.h\r\n/opt/local/include/arrow/util/uri.h\r\n/opt/local/include/arrow/util/utf8.h\r\n/opt/local/include/arrow/util/variant.h\r\n/opt/local/include/arrow/util/vector.h\r\n/opt/local/include/arrow/util/visibility.h\r\n/opt/local/include/arrow/util/windows_compatibility.h\r\n/opt/local/include/arrow/util/windows_fixup.h\r\n/opt/local/include/arrow/vendored/datetime.h\r\n/opt/local/include/arrow/vendored/datetime/date.h\r\n/opt/local/include/arrow/vendored/datetime/ios.h\r\n/opt/local/include/arrow/vendored/datetime/tz.h\r\n/opt/local/include/arrow/vendored/datetime/tz_private.h\r\n/opt/local/include/arrow/vendored/datetime/visibility.h\r\n/opt/local/include/arrow/vendored/double-conversion/bignum-dtoa.h\r\n/opt/local/include/arrow/vendored/double-conversion/bignum.h\r\n/opt/local/include/arrow/vendored/double-conversion/cached-powers.h\r\n/opt/local/include/arrow/vendored/double-conversion/diy-fp.h\r\n/opt/local/include/arrow/vendored/double-conversion/double-conversion.h\r\n/opt/local/include/arrow/vendored/double-conversion/fast-dtoa.h\r\n/opt/local/include/arrow/vendored/double-conversion/fixed-dtoa.h\r\n/opt/local/include/arrow/vendored/double-conversion/ieee.h\r\n/opt/local/include/arrow/vendored/double-conversion/strtod.h\r\n/opt/local/include/arrow/vendored/double-conversion/utils.h\r\n/opt/local/include/arrow/vendored/optional.hpp\r\n/opt/local/include/arrow/vendored/string_view.hpp\r\n/opt/local/include/arrow/vendored/variant.hpp\r\n/opt/local/include/arrow/vendored/xxhash.h\r\n/opt/local/include/arrow/visitor.h\r\n/opt/local/include/arrow/visitor_inline.h\r\n/opt/local/include/parquet/api/io.h\r\n/opt/local/include/parquet/api/reader.h\r\n/opt/local/include/parquet/api/schema.h\r\n/opt/local/include/parquet/api/writer.h\r\n/opt/local/include/parquet/arrow/reader.h\r\n/opt/local/include/parquet/arrow/schema.h\r\n/opt/local/include/parquet/arrow/test_util.h\r\n/opt/local/include/parquet/arrow/writer.h\r\n/opt/local/include/parquet/bloom_filter.h\r\n/opt/local/include/parquet/column_page.h\r\n/opt/local/include/parquet/column_reader.h\r\n/opt/local/include/parquet/column_scanner.h\r\n/opt/local/include/parquet/column_writer.h\r\n/opt/local/include/parquet/deprecated_io.h\r\n/opt/local/include/parquet/encoding.h\r\n/opt/local/include/parquet/encryption.h\r\n/opt/local/include/parquet/exception.h\r\n/opt/local/include/parquet/file_reader.h\r\n/opt/local/include/parquet/file_writer.h\r\n/opt/local/include/parquet/hasher.h\r\n/opt/local/include/parquet/metadata.h\r\n/opt/local/include/parquet/murmur3.h\r\n/opt/local/include/parquet/parquet_version.h\r\n/opt/local/include/parquet/pch.h\r\n/opt/local/include/parquet/platform.h\r\n/opt/local/include/parquet/printer.h\r\n/opt/local/include/parquet/properties.h\r\n/opt/local/include/parquet/schema.h\r\n/opt/local/include/parquet/statistics.h\r\n/opt/local/include/parquet/stream_reader.h\r\n/opt/local/include/parquet/stream_writer.h\r\n/opt/local/include/parquet/test_encryption_util.h\r\n/opt/local/include/parquet/test_util.h\r\n/opt/local/include/parquet/types.h\r\n/opt/local/include/parquet/windows_compatibility.h\r\n/opt/local/include/plasma/client.h\r\n/opt/local/include/plasma/common.h\r\n/opt/local/include/plasma/compat.h\r\n/opt/local/include/plasma/events.h\r\n/opt/local/include/plasma/test_util.h\r\n/opt/local/lib/cmake/arrow/ArrowConfig.cmake\r\n/opt/local/lib/cmake/arrow/ArrowConfigVersion.cmake\r\n/opt/local/lib/cmake/arrow/ArrowDatasetConfig.cmake\r\n/opt/local/lib/cmake/arrow/ArrowDatasetConfigVersion.cmake\r\n/opt/local/lib/cmake/arrow/ArrowDatasetTargets-release.cmake\r\n/opt/local/lib/cmake/arrow/ArrowDatasetTargets.cmake\r\n/opt/local/lib/cmake/arrow/ArrowFlightConfig.cmake\r\n/opt/local/lib/cmake/arrow/ArrowFlightConfigVersion.cmake\r\n/opt/local/lib/cmake/arrow/ArrowFlightTargets-release.cmake\r\n/opt/local/lib/cmake/arrow/ArrowFlightTargets.cmake\r\n/opt/local/lib/cmake/arrow/ArrowOptions.cmake\r\n/opt/local/lib/cmake/arrow/ArrowPythonConfig.cmake\r\n/opt/local/lib/cmake/arrow/ArrowPythonConfigVersion.cmake\r\n/opt/local/lib/cmake/arrow/ArrowPythonFlightConfig.cmake\r\n/opt/local/lib/cmake/arrow/ArrowPythonFlightConfigVersion.cmake\r\n/opt/local/lib/cmake/arrow/ArrowPythonFlightTargets-release.cmake\r\n/opt/local/lib/cmake/arrow/ArrowPythonFlightTargets.cmake\r\n/opt/local/lib/cmake/arrow/ArrowPythonTargets-release.cmake\r\n/opt/local/lib/cmake/arrow/ArrowPythonTargets.cmake\r\n/opt/local/lib/cmake/arrow/ArrowTargets-release.cmake\r\n/opt/local/lib/cmake/arrow/ArrowTargets.cmake\r\n/opt/local/lib/cmake/arrow/FindArrow.cmake\r\n/opt/local/lib/cmake/arrow/FindArrowDataset.cmake\r\n/opt/local/lib/cmake/arrow/FindArrowFlight.cmake\r\n/opt/local/lib/cmake/arrow/FindArrowPython.cmake\r\n/opt/local/lib/cmake/arrow/FindArrowPythonFlight.cmake\r\n/opt/local/lib/cmake/arrow/FindParquet.cmake\r\n/opt/local/lib/cmake/arrow/FindPlasma.cmake\r\n/opt/local/lib/cmake/arrow/ParquetConfig.cmake\r\n/opt/local/lib/cmake/arrow/ParquetConfigVersion.cmake\r\n/opt/local/lib/cmake/arrow/ParquetTargets-release.cmake\r\n/opt/local/lib/cmake/arrow/ParquetTargets.cmake\r\n/opt/local/lib/cmake/arrow/PlasmaConfig.cmake\r\n/opt/local/lib/cmake/arrow/PlasmaConfigVersion.cmake\r\n/opt/local/lib/cmake/arrow/PlasmaTargets-release.cmake\r\n/opt/local/lib/cmake/arrow/PlasmaTargets.cmake\r\n/opt/local/lib/cmake/arrow/arrow-config.cmake\r\n/opt/local/lib/libarrow.17.1.0.dylib\r\n/opt/local/lib/libarrow.17.dylib\r\n/opt/local/lib/libarrow.a\r\n/opt/local/lib/libarrow.dylib\r\n/opt/local/lib/libarrow_dataset.17.1.0.dylib\r\n/opt/local/lib/libarrow_dataset.17.dylib\r\n/opt/local/lib/libarrow_dataset.a\r\n/opt/local/lib/libarrow_dataset.dylib\r\n/opt/local/lib/libarrow_flight.17.1.0.dylib\r\n/opt/local/lib/libarrow_flight.17.dylib\r\n/opt/local/lib/libarrow_flight.a\r\n/opt/local/lib/libarrow_flight.dylib\r\n/opt/local/lib/libarrow_python.17.1.0.dylib\r\n/opt/local/lib/libarrow_python.17.dylib\r\n/opt/local/lib/libarrow_python.a\r\n/opt/local/lib/libarrow_python.dylib\r\n/opt/local/lib/libarrow_python_flight.17.1.0.dylib\r\n/opt/local/lib/libarrow_python_flight.17.dylib\r\n/opt/local/lib/libarrow_python_flight.a\r\n/opt/local/lib/libarrow_python_flight.dylib\r\n/opt/local/lib/libparquet.17.1.0.dylib\r\n/opt/local/lib/libparquet.17.dylib\r\n/opt/local/lib/libparquet.a\r\n/opt/local/lib/libparquet.dylib\r\n/opt/local/lib/libplasma.17.1.0.dylib\r\n/opt/local/lib/libplasma.17.dylib\r\n/opt/local/lib/libplasma.a\r\n/opt/local/lib/libplasma.dylib\r\n/opt/local/lib/pkgconfig/arrow-compute.pc\r\n/opt/local/lib/pkgconfig/arrow-csv.pc\r\n/opt/local/lib/pkgconfig/arrow-dataset.pc\r\n/opt/local/lib/pkgconfig/arrow-filesystem.pc\r\n/opt/local/lib/pkgconfig/arrow-flight.pc\r\n/opt/local/lib/pkgconfig/arrow-json.pc\r\n/opt/local/lib/pkgconfig/arrow-orc.pc\r\n/opt/local/lib/pkgconfig/arrow-python-flight.pc\r\n/opt/local/lib/pkgconfig/arrow-python.pc\r\n/opt/local/lib/pkgconfig/arrow.pc\r\n/opt/local/lib/pkgconfig/parquet.pc\r\n/opt/local/lib/pkgconfig/plasma.pc\r\n/opt/local/share/doc/arrow/LICENSE.txt\r\n/opt/local/share/doc/arrow/NOTICE.txt\r\n/opt/local/share/doc/arrow/README.md\r\n```\r\n",
        "created_at": "2020-07-20T16:12:25.000Z",
        "updated_at": "2020-08-20T07:08:34.000Z",
        "labels": [
            "Migrated from Jira",
            "Component: Python",
            "Type: bug"
        ],
        "closed": true,
        "closed_at": "2020-08-20T07:07:58.000Z"
    },
    "comments": [
        {
            "created_at": "2020-07-20T20:47:58.565Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-9532?focusedCommentId=17161525) by Steven Smith (s.t.smith):*\nAlso, see this PR for full details:\u00a0https://github.com/macports/macports-ports/pull/7791\r\n\r\nThe build results are very inconsistent for the same Portfile.\r\n \\* Successful build of `py37-pyarrow`: <https://paste.z0k.xyz/d01a4e4e9854.txt>\r\n \\* Unsuccessful build of `py38-pyarrow`: <https://paste.z0k.xyz/0d4396087cd0.txt>\r\n\r\n\u00a0"
        },
        {
            "created_at": "2020-07-21T01:56:29.122Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-9532?focusedCommentId=17161656) by Steven Smith (s.t.smith):*\nAdditionally, the Apache Arrow cmake system fails if there is more than one python3 version installed and uses the wrong version; the cmake configuration does not appear to use environment variables like PYTHON_EXECUTABLE, PYTHON3_EXECUTABLE, and so forth. The error is:\r\n```java\n\r\nCMake Error at /opt/local/share/cmake-3.17/Modules/FindPackageHandleStandardArgs.cmake:164 (message):\r\n  Could NOT find Python3 (missing: Python3_EXECUTABLE\r\n  Python3_NumPy_INCLUDE_DIRS Interpreter NumPy) (found version \"3.7.8\")\n```\r\nThat is the reason this Portfile modifies PATH to make sure it finds the one you want with a bunch of lines like this:\r\n\r\n<https://github.com/macports/macports-ports/blob/409619435485a6ce4620a0fa3063fe33ba5f9319/devel/apache-arrow/Portfile#L84>\r\n\r\nI\u2019m don\u2019t know if the issues are related, but mention it here because they may be."
        },
        {
            "created_at": "2020-07-21T21:09:55.255Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-9532?focusedCommentId=17162344) by Kouhei Sutou (kou):*\nFor Python executable detection, you must use CMake variable not environment variable. See also: https://github.com/Homebrew/homebrew-core/blob/master/Formula/apache-arrow.rb#L50"
        },
        {
            "created_at": "2020-07-21T21:13:16.561Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-9532?focusedCommentId=17162347) by Kouhei Sutou (kou):*\nCould you add `-DCMAKE_FIND_DEBUG_MODE=ON` to `PYARROW_CMAKE_OPTIONS` and provided build log?\r\nIt will show more debug log."
        },
        {
            "created_at": "2020-07-23T14:42:54.978Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-9532?focusedCommentId=17163644) by Steven Smith (s.t.smith):*\nI had some help nailing down missing dependencies and now have a working build. Please see <https://github.com/macports/macports-ports/pull/7791>\r\n\r\n\u00a0\r\n\r\nI still believe that there's an issue finding the correct python binary."
        },
        {
            "created_at": "2020-07-23T14:45:08.837Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-9532?focusedCommentId=17163646) by Steven Smith (s.t.smith):*\nP.S. I did specify -DPYTHON_EXECUTABLE, but in the presence of multiple python's. This is less of an issue on a virtual build bot."
        },
        {
            "created_at": "2020-07-23T21:18:31.293Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-9532?focusedCommentId=17163962) by Kouhei Sutou (kou):*\nCan we close this?\r\n\r\n(`-DPYTHON_EXECUTABLE` works well on Homebrew. I think that it's not a cause of the original problem.)"
        },
        {
            "created_at": "2020-07-28T17:15:59.364Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-9532?focusedCommentId=17166568) by Steven Smith (s.t.smith):*\nThanks. Have it working now. I must've fumbled the earlier attempt."
        },
        {
            "created_at": "2020-07-29T09:00:46.707Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-9532?focusedCommentId=17167071) by Steven Smith (s.t.smith):*\npy37-pyarrow fails to build without modifying path, in spite of specifying -DPYTHON_EXECUTABLE=\u2026 in both the cmake arguments and PYARROW_CMAKE_OPTIONS.\r\n\r\nI continue to believe that this is an issue with the cmake configuration.\r\n\r\nHere are the error logs for the failed py37-pyarrow build: <https://paste.z0k.xyz/b822c7df5064>\r\n```java\n\r\n---> Building py37-pyarrow\r\nDEBUG: Executing proc-pre-org.macports.build-build-0\r\nDEBUG: Executing org.macports.build (py37-pyarrow)\r\nDEBUG: Environment: \r\nCC='/usr/bin/clang'\r\nCC_PRINT_OPTIONS='YES'\r\nCC_PRINT_OPTIONS_FILE='/opt/local/var/macports/build/_Users_runner_work_1_s_devel_apache-arrow/py37-pyarrow/work/.CC_PRINT_OPTIONS'\r\nCFLAGS='-arch x86_64 -isysroot/Library/Developer/CommandLineTools/SDKs/MacOSX10.14.sdk'\r\nCPATH='/opt/local/include'\r\nCXX='/usr/bin/clang++'\r\nCXXFLAGS='-arch x86_64 -stdlib=libc++ -isysroot/Library/Developer/CommandLineTools/SDKs/MacOSX10.14.sdk'\r\nDEVELOPER_DIR='/Library/Developer/CommandLineTools'\r\nF90FLAGS='-m64'\r\nFCFLAGS='-m64'\r\nFFLAGS='-m64'\r\nLDFLAGS='-arch x86_64'\r\nLIBRARY_PATH='/opt/local/lib'\r\nMACOSX_DEPLOYMENT_TARGET='10.14'\r\nOBJC='/usr/bin/clang'\r\nOBJCFLAGS='-arch x86_64 -isysroot/Library/Developer/CommandLineTools/SDKs/MacOSX10.14.sdk'\r\nPATH='/opt/local/var/macports/build/_Users_runner_work_1_s_devel_apache-arrow/py37-pyarrow/work/bin:/opt/local/bin:/opt/local/sbin:/bin:/sbin:/usr/bin:/usr/sbin'\r\nPYARROW_CMAKE_OPTIONS='-DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=\"/opt/local\" -DCMAKE_INSTALL_NAME_DIR=\"/opt/local/lib\" -DCMAKE_SYSTEM_PREFIX_PATH=\"/opt/local;/usr\" -DCMAKE_C_COMPILER=/usr/bin/clang -DCMAKE_CXX_COMPILER=/usr/bin/clang++ -DCMAKE_POLICY_DEFAULT_CMP0025=NEW -DCMAKE_POLICY_DEFAULT_CMP0060=NEW -DCMAKE_VERBOSE_MAKEFILE=ON -DCMAKE_COLOR_MAKEFILE=ON -DCMAKE_FIND_FRAMEWORK=LAST -DCMAKE_EXPORT_COMPILE_COMMANDS=ON -DCMAKE_MAKE_PROGRAM=/usr/bin/make -DCMAKE_MODULE_PATH=\"/opt/local/share/cmake/Modules;/opt/local/libexec/llvm-10/lib/cmake/llvm\" -DCMAKE_PREFIX_PATH=\"/opt/local/share/cmake/Modules;/opt/local/libexec/llvm-10/lib/cmake/llvm\" -DCMAKE_BUILD_WITH_INSTALL_RPATH:BOOL=ON -DCMAKE_INSTALL_RPATH=\"/opt/local/lib\" -Wno-dev -DARROW_FLIGHT=ON -DARROW_JEMALLOC=OFF -DARROW_ORC=ON -DARROW_PARQUET=ON -DARROW_PLASMA=ON -DARROW_PROTOBUF_USE_SHARED=ON -DARROW_PYTHON=ON -DARROW_USE_CCACHE=OFF -DARROW_WITH_BZ2=ON -DARROW_WITH_ZLIB=ON -DARROW_WITH_ZSTD=ON -DARROW_WITH_LZ4=ON -DARROW_WITH_SNAPPY=ON -DARROW_WITH_BROTLI=ON -DARROW_INSTALL_NAME_RPATH=OFF -DCARES_PREFIX=/opt/local -DgRPC_INSTALL=OFF -DgRPC_BUILD_TESTS=OFF -DgRPC_CARES_PROVIDER=package -DgRPC_ABSL_PROVIDER=package -DgRPC_PROTOBUF_PROVIDER=package -DgRPC_RE2_PROVIDER=package -DgRPC_SSL_PROVIDER=package -DgRPC_ZLIB_PROVIDER=package -DLLVM_ROOT=/opt/local/libexec/llvm-10 -DPYTHON_EXECUTABLE=/opt/local/Library/Frameworks/Python.framework/Versions/3.7/bin/python3.7'\r\nPYARROW_WITH_PARQUET='1'\r\nSDKROOT='/Library/Developer/CommandLineTools/SDKs/MacOSX10.14.sdk'\r\nExecuting: cd \"/opt/local/var/macports/build/_Users_runner_work_1_s_devel_apache-arrow/py37-pyarrow/work/arrow-0.17.1/python\" && /opt/local/Library/Frameworks/Python.framework/Versions/3.7/bin/python3.7 setup.py --no-user-cfg build_ext --inplace \r\nDEBUG: system: cd \"/opt/local/var/macports/build/_Users_runner_work_1_s_devel_apache-arrow/py37-pyarrow/work/arrow-0.17.1/python\" && /opt/local/Library/Frameworks/Python.framework/Versions/3.7/bin/python3.7 setup.py --no-user-cfg build_ext --inplace \r\nrunning build_ext\r\ncreating /opt/local/var/macports/build/_Users_runner_work_1_s_devel_apache-arrow/py37-pyarrow/work/arrow-0.17.1/python/build\r\ncreating /opt/local/var/macports/build/_Users_runner_work_1_s_devel_apache-arrow/py37-pyarrow/work/arrow-0.17.1/python/build/temp.macosx-10.14-x86_64-3.7\r\n-- Running cmake for pyarrow\r\ncmake -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=/opt/local -DCMAKE_INSTALL_NAME_DIR=/opt/local/lib -DCMAKE_SYSTEM_PREFIX_PATH=/opt/local;/usr -DCMAKE_C_COMPILER=/usr/bin/clang -DCMAKE_CXX_COMPILER=/usr/bin/clang++ -DCMAKE_POLICY_DEFAULT_CMP0025=NEW -DCMAKE_POLICY_DEFAULT_CMP0060=NEW -DCMAKE_VERBOSE_MAKEFILE=ON -DCMAKE_COLOR_MAKEFILE=ON -DCMAKE_FIND_FRAMEWORK=LAST -DCMAKE_EXPORT_COMPILE_COMMANDS=ON -DCMAKE_MAKE_PROGRAM=/usr/bin/make -DCMAKE_MODULE_PATH=/opt/local/share/cmake/Modules;/opt/local/libexec/llvm-10/lib/cmake/llvm -DCMAKE_PREFIX_PATH=/opt/local/share/cmake/Modules;/opt/local/libexec/llvm-10/lib/cmake/llvm -DCMAKE_BUILD_WITH_INSTALL_RPATH:BOOL=ON -DCMAKE_INSTALL_RPATH=/opt/local/lib -Wno-dev -DARROW_FLIGHT=ON -DARROW_JEMALLOC=OFF -DARROW_ORC=ON -DARROW_PARQUET=ON -DARROW_PLASMA=ON -DARROW_PROTOBUF_USE_SHARED=ON -DARROW_PYTHON=ON -DARROW_USE_CCACHE=OFF -DARROW_WITH_BZ2=ON -DARROW_WITH_ZLIB=ON -DARROW_WITH_ZSTD=ON -DARROW_WITH_LZ4=ON -DARROW_WITH_SNAPPY=ON -DARROW_WITH_BROTLI=ON -DARROW_INSTALL_NAME_RPATH=OFF -DCARES_PREFIX=/opt/local -DgRPC_INSTALL=OFF -DgRPC_BUILD_TESTS=OFF -DgRPC_CARES_PROVIDER=package -DgRPC_ABSL_PROVIDER=package -DgRPC_PROTOBUF_PROVIDER=package -DgRPC_RE2_PROVIDER=package -DgRPC_SSL_PROVIDER=package -DgRPC_ZLIB_PROVIDER=package -DLLVM_ROOT=/opt/local/libexec/llvm-10 -DPYTHON_EXECUTABLE=/opt/local/Library/Frameworks/Python.framework/Versions/3.7/bin/python3.7 -DPYTHON_EXECUTABLE=/opt/local/Library/Frameworks/Python.framework/Versions/3.7/bin/python3.7 -DPYARROW_BUILD_CUDA=off -DPYARROW_BUILD_FLIGHT=off -DPYARROW_BUILD_GANDIVA=off -DPYARROW_BUILD_DATASET=off -DPYARROW_BUILD_ORC=off -DPYARROW_BUILD_PARQUET=on -DPYARROW_BUILD_PLASMA=off -DPYARROW_BUILD_S3=off -DPYARROW_BUILD_HDFS=off -DPYARROW_USE_TENSORFLOW=off -DPYARROW_BUNDLE_ARROW_CPP=off -DPYARROW_BUNDLE_BOOST=off -DPYARROW_GENERATE_COVERAGE=off -DPYARROW_BOOST_USE_SHARED=on -DPYARROW_PARQUET_USE_SHARED=on -DCMAKE_BUILD_TYPE=release /opt/local/var/macports/build/_Users_runner_work_1_s_devel_apache-arrow/py37-pyarrow/work/arrow-0.17.1/python\r\n-- The C compiler identification is AppleClang 10.0.1.10010046\r\n-- The CXX compiler identification is AppleClang 10.0.1.10010046\r\n-- Detecting C compiler ABI info\r\n-- Detecting C compiler ABI info - done\r\n-- Check for working C compiler: /usr/bin/clang - skipped\r\n-- Detecting C compile features\r\n-- Detecting C compile features - done\r\n-- Detecting CXX compiler ABI info\r\n-- Detecting CXX compiler ABI info - done\r\n-- Check for working CXX compiler: /usr/bin/clang++ - skipped\r\n-- Detecting CXX compile features\r\n-- Detecting CXX compile features - done\r\n-- System processor: x86_64\r\n-- Performing Test CXX_SUPPORTS_SSE4_2\r\n-- Performing Test CXX_SUPPORTS_SSE4_2 - Success\r\n-- Performing Test CXX_SUPPORTS_AVX2\r\n-- Performing Test CXX_SUPPORTS_AVX2 - Success\r\n-- Performing Test CXX_SUPPORTS_AVX512\r\n-- Performing Test CXX_SUPPORTS_AVX512 - Success\r\n-- Arrow build warning level: PRODUCTION\r\nConfigured for RELEASE build (set with cmake -DCMAKE_BUILD_TYPE={release,debug,...})\r\n-- Build Type: RELEASE\r\n-- Build output directory: /opt/local/var/macports/build/_Users_runner_work_1_s_devel_apache-arrow/py37-pyarrow/work/arrow-0.17.1/python/build/temp.macosx-10.14-x86_64-3.7/release\r\nCMake Error at /opt/local/share/cmake-3.18/Modules/FindPackageHandleStandardArgs.cmake:165 (message):\r\n Could NOT find Python3 (missing: Python3_NumPy_INCLUDE_DIRS NumPy) (found\r\n version \"3.8.5\")\r\nCall Stack (most recent call first):\r\n /opt/local/share/cmake-3.18/Modules/FindPackageHandleStandardArgs.cmake:458 (_FPHSA_FAILURE_MESSAGE)\r\n /opt/local/share/cmake-3.18/Modules/FindPython/Support.cmake:2971 (find_package_handle_standard_args)\r\n /opt/local/share/cmake-3.18/Modules/FindPython3.cmake:389 (include)\r\n cmake_modules/FindPython3Alt.cmake:46 (find_package)\r\n CMakeLists.txt:196 (find_package)\r\n\r\n-- Configuring incomplete, errors occurred!\r\n```\r\n\u00a0\r\n\r\nHere are the logs for a successful build of py38-pyarrow: <https://paste.z0k.xyz/036eb427e525>"
        },
        {
            "created_at": "2020-07-29T20:39:50.953Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-9532?focusedCommentId=17167498) by Kouhei Sutou (kou):*\nAh, sorry. We need to use `-DPython3_EXECUTABLE` instead of `-DPYTHON_EXECUTABLE` with new CMake.\r\nWe use our `FindPythonLibsNew.cmake` that uses `PYTHON_EXECUTABLE` with old CMake and the official `FindPython3.cmake` that uses `Python3_EXECUTABLE` with new CMake.\r\nCMake on MacPorts uses new CMake. So we need to use `Python3_EXECUTABLE`: https://cmake.org/cmake/help/latest/module/FindPython3.html#artifacts-specification\r\n\r\nCould you try `Python3_EXECUTABLE`?"
        },
        {
            "created_at": "2020-07-30T01:14:02.008Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-9532?focusedCommentId=17167582) by Steven Smith (s.t.smith):*\nThat worked, thank you!"
        },
        {
            "created_at": "2020-07-30T01:15:10.672Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-9532?focusedCommentId=17167583) by Steven Smith (s.t.smith):*\nWorks with -DPython3_EXECUTABLE"
        },
        {
            "created_at": "2020-08-19T05:50:43.067Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-9532?focusedCommentId=17180266) by Andrew Wieteska (arw2019):*\nI came across this problem while building pyarrow on Ubuntu 20.04. I think it warrants a brief note in\u00a0the python build doc"
        },
        {
            "created_at": "2020-08-20T07:07:58.686Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-9532?focusedCommentId=17180991) by Kouhei Sutou (kou):*\nIssue resolved by pull request 8002\n<https://github.com/apache/arrow/pull/8002>"
        }
    ]
}