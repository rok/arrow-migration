{
    "issue": {
        "title": "[R] write_* functions should invisibly return their inputs",
        "body": "***Note**: This issue was originally created as [ARROW-7796](https://issues.apache.org/jira/browse/ARROW-7796). Please see the [migration documentation](https://gist.github.com/toddfarmer/12aa88361532d21902818a6044fda4c3) for further details.*\n\n### Original Issue Description:\n\u00a0\r\n\r\nI am wondering if you'd consider a slight change to what is returned by the write_\\* functions. In \\{readr} the write functions return its input which is very useful for saving intermediate objects within a pipeline. I'd be happy to take this on and submit as a pull request. A quick illustration:\r\n```java\n\r\n library(arrow)\r\n #> \r\n #> Attaching package: 'arrow'\r\n #> The following object is masked from 'package:utils':\r\n #> \r\n #> timestamp\r\n library(readr)\r\n #> \r\n #> Attaching package: 'readr'\r\n #> The following object is masked from 'package:arrow':\r\n #> \r\n #> read_table\r\niris_arrow <- write_parquet(iris, \"iris.parquet\")\r\n iris_arrow\r\n #> NULL\r\niris_readr <- write_csv(iris, \"iris.csv\")\r\nhead(iris_readr)\r\n #> Sepal.Length Sepal.Width Petal.Length Petal.Width Species\r\n #> 1 5.1 3.5 1.4 0.2 setosa\r\n #> 2 4.9 3.0 1.4 0.2 setosa\r\n #> 3 4.7 3.2 1.3 0.2 setosa\r\n #> 4 4.6 3.1 1.5 0.2 setosa\r\n #> 5 5.0 3.6 1.4 0.2 setosa\r\n #> 6 5.4 3.9 1.7 0.4 setosa\r\ndevtools::session_info()\r\n #> - Session info ---------------------------------------------------------------\r\n #> setting value \r\n #> version R version 3.6.2 (2019-12-12)\r\n #> os Windows 10 x64 \r\n #> system x86_64, mingw32 \r\n #> ui RTerm \r\n #> language (EN) \r\n #> collate English_Canada.1252 \r\n #> ctype English_Canada.1252 \r\n #> tz America/Los_Angeles \r\n #> date 2020-02-07 \r\n #> \r\n #> - Packages -------------------------------------------------------------------\r\n #> package * version date lib source \r\n #> arrow * 0.15.1.20200207 2020-02-07 [1] local \r\n #> assertthat 0.2.1 2019-03-21 [1] CRAN (R 3.6.0) \r\n #> backports 1.1.5 2019-10-02 [1] CRAN (R 3.6.1) \r\n #> bit 1.1-15.1 2020-01-14 [1] CRAN (R 3.6.2) \r\n #> bit64 0.9-7 2017-05-08 [1] CRAN (R 3.6.0) \r\n #> callr 3.4.1 2020-01-24 [1] CRAN (R 3.6.2) \r\n #> cli 2.0.1 2020-01-08 [1] CRAN (R 3.6.2) \r\n #> crayon 1.3.4 2017-09-16 [1] CRAN (R 3.6.0) \r\n #> desc 1.2.0 2018-05-01 [1] CRAN (R 3.6.0) \r\n #> devtools 2.2.1 2019-09-24 [1] CRAN (R 3.6.2) \r\n #> digest 0.6.23 2019-11-23 [1] CRAN (R 3.6.1) \r\n #> ellipsis 0.3.0 2019-09-20 [1] CRAN (R 3.6.1) \r\n #> evaluate 0.14 2019-05-28 [1] CRAN (R 3.6.0) \r\n #> fansi 0.4.1 2020-01-08 [1] CRAN (R 3.6.2) \r\n #> fs 1.3.1 2019-05-06 [1] CRAN (R 3.6.0) \r\n #> glue 1.3.1 2019-03-12 [1] CRAN (R 3.6.0) \r\n #> highr 0.8 2019-03-20 [1] CRAN (R 3.6.0) \r\n #> hms 0.5.3 2020-01-08 [1] CRAN (R 3.6.2) \r\n #> htmltools 0.4.0 2019-10-04 [1] CRAN (R 3.6.1) \r\n #> knitr 1.27 2020-01-16 [1] CRAN (R 3.6.2) \r\n #> magrittr 1.5 2014-11-22 [1] CRAN (R 3.6.0) \r\n #> memoise 1.1.0 2017-04-21 [1] CRAN (R 3.6.0) \r\n #> pillar 1.4.3 2019-12-20 [1] CRAN (R 3.6.2) \r\n #> pkgbuild 1.0.6 2019-10-09 [1] CRAN (R 3.6.1) \r\n #> pkgconfig 2.0.3 2019-09-22 [1] CRAN (R 3.6.1) \r\n #> pkgload 1.0.2 2018-10-29 [1] CRAN (R 3.6.0) \r\n #> prettyunits 1.1.1 2020-01-24 [1] CRAN (R 3.6.2) \r\n #> processx 3.4.1 2019-07-18 [1] CRAN (R 3.6.1) \r\n #> ps 1.3.0 2018-12-21 [1] CRAN (R 3.6.0) \r\n #> purrr 0.3.3 2019-10-18 [1] CRAN (R 3.6.1) \r\n #> R6 2.4.1 2019-11-12 [1] CRAN (R 3.6.1) \r\n #> Rcpp 1.0.3 2019-11-08 [1] CRAN (R 3.6.1) \r\n #> readr * 1.3.1 2018-12-21 [1] CRAN (R 3.6.1) \r\n #> remotes 2.1.0 2019-06-24 [1] CRAN (R 3.6.1) \r\n #> rlang 0.4.3 2020-01-24 [1] CRAN (R 3.6.2) \r\n #> rmarkdown 2.1 2020-01-20 [1] CRAN (R 3.6.2) \r\n #> rprojroot 1.3-2 2018-01-03 [1] CRAN (R 3.6.0) \r\n #> sessioninfo 1.1.1 2018-11-05 [1] CRAN (R 3.6.0) \r\n #> stringi 1.4.4 2020-01-09 [1] CRAN (R 3.6.2) \r\n #> stringr 1.4.0 2019-02-10 [1] CRAN (R 3.6.2) \r\n #> testthat 2.3.1 2019-12-01 [1] CRAN (R 3.6.1) \r\n #> tibble 2.1.3 2019-06-06 [1] CRAN (R 3.6.2) \r\n #> tidyselect 0.2.5 2018-10-11 [1] CRAN (R 3.6.2) \r\n #> usethis 1.5.1.9000 2020-01-31 [1] Github (r-lib/usethis@c31336d)\r\n #> vctrs 0.2.2 2020-01-24 [1] CRAN (R 3.6.2) \r\n #> withr 2.1.2 2018-03-15 [1] CRAN (R 3.6.0) \r\n #> xfun 0.12 2020-01-13 [1] CRAN (R 3.6.2) \r\n #> yaml 2.2.0 2018-07-25 [1] CRAN (R 3.6.2) \r\n #> \r\n #> [1] C:/Users/salbers/R/win-library/3.6\r\n #> [2] C:/Program Files/R/R-3.6.2/library\r\n```\r\n\u00a0",
        "created_at": "2020-02-07T17:30:25.000Z",
        "updated_at": "2020-02-07T23:36:43.000Z",
        "labels": [
            "Migrated from Jira",
            "Component: R",
            "Type: enhancement"
        ],
        "closed": true,
        "closed_at": "2020-02-07T23:34:28.000Z"
    },
    "comments": [
        {
            "created_at": "2020-02-07T17:44:37.913Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-7796?focusedCommentId=17032549) by Neal Richardson (npr):*\nSounds reasonable to me. Happy to review a PR. Thanks!"
        },
        {
            "created_at": "2020-02-07T18:04:26.585Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-7796?focusedCommentId=17032562) by Sam Albers (boshek):*\nGreat! Any tips on building from source on windows? Here is what I get when I try to install from source:\r\n```java\n\r\n\u221a checking for file 'C:\\_dev\\GitHub_repos\\arrow\\r/DESCRIPTION' (552ms)\r\n- preparing 'arrow': (1.9s)\r\n\u221a checking DESCRIPTION meta-information ... \r\n- cleaning src\r\n- checking for LF line-endings in source and make files and shell scripts (1.1s)\r\n- checking for empty or unneeded directories (798ms)\r\n- building 'arrow_0.16.0.9000.tar.gz'\r\n Warning: file 'arrow/cleanup' did not have execute permissions: corrected\r\n Warning: file 'arrow/configure' did not have execute permissions: corrected\r\n \r\nRunning \"C:/PROGRA~1/R/R-36~1.2/bin/x64/Rcmd.exe\" INSTALL \"C:\\Users\\salbers\\AppData\\Local\\Temp\\Rtmp6PBFzK/arrow_0.16.0.9000.tar.gz\" \\\r\n --install-tests \r\n* installing to library 'C:/Users/salbers/R/win-library/3.6'\r\n* installing *source* package 'arrow' ...\r\n** using staged installation\r\nDownloading https://github.com/rwinlib/arrow/archive/v0.16.0.zip\r\nError in download.file(sprintf(\"https://github.com/rwinlib/arrow/archive/v%s.zip\", : \r\n cannot open URL 'https://github.com/rwinlib/arrow/archive/v0.16.0.zip'\r\nIn addition: Warning messages:\r\n1: In download.file(sprintf(\"https://github.com/rwinlib/arrow/archive/v%s.zip\", :\r\n cannot open URL 'https://github.com/rwinlib/arrow/archive/v0.16.0.9000.zip': HTTP status was '404 Not Found'\r\n2: In download.file(sprintf(\"https://github.com/rwinlib/arrow/archive/v%s.zip\", :\r\n cannot open URL 'https://github.com/rwinlib/arrow/archive/v0.16.0.zip': HTTP status was '404 Not Found'\r\n3: In download.file(sprintf(\"https://github.com/rwinlib/arrow/archive/v%s.zip\", :\r\n cannot open URL 'https://github.com/rwinlib/arrow/archive/v0.16.0.zip': HTTP status was '404 Not Found'\r\nExecution halted\r\nArrow C++ library was not found\r\n: cannot access 'windows/': No such file or directory\r\n*** Writing Makevars.win\r\n** libs\r\n-\r\n*** arch - i386\r\nc:/Rtools/mingw_32/bin/g++ -std=gnu++11 -I\"C:/PROGRA~1/R/R-36~1.2/include\" -DNDEBUG -I../windows//include -DARROW_STATIC -DPARQUET_STATIC -DARROW_DS_STATIC -DARROW_R_WITH_ARROW -I\"C:/Users/salbers/R/win-library/3.6/Rcpp/include\" -O2 -Wall -mtune=generic -c array.cpp -o array.o\r\nIn file included from array.cpp:18:0:\r\n./arrow_types.h:198:23: fatal error: arrow/api.h: No such file or directory\r\n #include <arrow/api.h>\r\n ^\r\ncompilation terminated.\r\nmake: *** [C:/PROGRA~1/R/R-36~1.2/etc/i386/Makeconf:215: array.o] Error 1\r\nERROR: compilation failed for package 'arrow'\r\n* removing 'C:/Users/salbers/R/win-library/3.6/arrow'\r\n* restoring previous 'C:/Users/salbers/R/win-library/3.6/arrow'\r\nError in (function (command = NULL, args = character(), error_on_status = TRUE, : \r\n System command error\n```"
        },
        {
            "created_at": "2020-02-07T18:20:55.457Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-7796?focusedCommentId=17032571) by Neal Richardson (npr):*\nMy advice for a dev setup on Windows is (1) don't ;) or (2) since you're just making R changes, you could try to download a binary C++ library as described here: https://github.com/apache/arrow/blob/master/r/README.md#developing; or (3) make the changes, push the branch, and let GitHub Actions/Appveyor run the tests. Or, if you have access to Docker, you can use our docker-compose setup. \r\n\r\n(Aside: I hope to make this \"set up my dev environment for the R package\" easier in the next release.)"
        },
        {
            "created_at": "2020-02-07T23:34:28.856Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-7796?focusedCommentId=17032742) by Neal Richardson (npr):*\nIssue resolved by pull request 6387\n<https://github.com/apache/arrow/pull/6387>"
        }
    ]
}