{
    "issue": {
        "title": "[R] Arrow 1.0.1 R package fails to install on R3.4 over linux",
        "body": "***Note**: This issue was originally created as [ARROW-9932](https://issues.apache.org/jira/browse/ARROW-9932). Please see the [migration documentation](https://gist.github.com/toddfarmer/12aa88361532d21902818a6044fda4c3) for further details.*\n\n### Original Issue Description:\n1. From R (3.4) prompt, we run\r\n\r\n`> install.packages(\"arrow\")`\r\n\r\nand it seems to succeed.\r\n\r\n2. Next we run:\r\n\r\n`> arrow::install_arrow()`\r\n\r\nThis is the full output:\r\n\r\n`Installing package into '/opt/R-3.4.0.mkl/library'`\r\n `(as 'lib' is unspecified)`\r\n `trying URL 'https://cloud.r-project.org/src/contrib/arrow_1.0.1.tar.gz'`\r\n `Content type 'application/x-gzip' length 274865 bytes (268 KB)`\r\n `==================================================`\r\n `downloaded 268 KB`\r\n\r\n`installing *source* package 'arrow' ...`\r\n `** package 'arrow' successfully unpacked and MD5 sums checked`\r\n `*** No C++ binaries found for ubuntu-14.04`\r\n `*** Successfully retrieved C++ source`\r\n `*** Building C++ libraries`\r\n `**** cmake`\r\n <font color=\"#ff0000\">**`Error in dQuote(env_var_list, FALSE) : unused argument (FALSE)`**</font>\r\n <font color=\"#ff0000\"> **`Calls: build_libarrow -> paste`**</font>\r\n <font color=\"#ff0000\"> **`Execution halted`**</font>\r\n `------------------------- NOTE ---------------------------`\r\n `After installation, please run arrow::install_arrow()`\r\n `for help installing required runtime libraries`\r\n `---------------------------------------------------------`\r\n `** libs`\r\n `g++ -std=gnu++0x -I/opt/R-3.4.0.mkl/lib64/R/include -DNDEBUG -I\"/opt/R-3.4.0.mkl/library/Rcpp/include\" -I/usr/local/include -fpic -march=x86-64 -O3 -c array.cpp -o array.o`\r\n `g++ -std=gnu++0x -I/opt/R-3.4.0.mkl/lib64/R/include -DNDEBUG -I\"/opt/R-3.4.0.mkl/library/Rcpp/include\" -I/usr/local/include -fpic -march=x86-64 -O3 -c array_from_vector.cpp -o array_from_vector.o`\r\n `g++ -std=gnu++0x -I/opt/R-3.4.0.mkl/lib64/R/include -DNDEBUG -I\"/opt/R-3.4.0.mkl/library/Rcpp/include\" -I/usr/local/include -fpic -march=x86-64 -O3 -c array_to_vector.cpp -o array_to_vector.o`\r\n `g++ -std=gnu++0x -I/opt/R-3.4.0.mkl/lib64/R/include -DNDEBUG -I\"/opt/R-3.4.0.mkl/library/Rcpp/include\" -I/usr/local/include -fpic -march=x86-64 -O3 -c arraydata.cpp -o arraydata.o`\r\n `g++ -std=gnu++0x -I/opt/R-3.4.0.mkl/lib64/R/include -DNDEBUG -I\"/opt/R-3.4.0.mkl/library/Rcpp/include\" -I/usr/local/include -fpic -march=x86-64 -O3 -c arrowExports.cpp -o arrowExports.o`\r\n `g++ -std=gnu++0x -I/opt/R-3.4.0.mkl/lib64/R/include -DNDEBUG -I\"/opt/R-3.4.0.mkl/library/Rcpp/include\" -I/usr/local/include -fpic -march=x86-64 -O3 -c buffer.cpp -o buffer.o`\r\n `g++ -std=gnu++0x -I/opt/R-3.4.0.mkl/lib64/R/include -DNDEBUG -I\"/opt/R-3.4.0.mkl/library/Rcpp/include\" -I/usr/local/include -fpic -march=x86-64 -O3 -c chunkedarray.cpp -o chunkedarray.o`\r\n `g++ -std=gnu++0x -I/opt/R-3.4.0.mkl/lib64/R/include -DNDEBUG -I\"/opt/R-3.4.0.mkl/library/Rcpp/include\" -I/usr/local/include -fpic -march=x86-64 -O3 -c compression.cpp -o compression.o`\r\n `g++ -std=gnu++0x -I/opt/R-3.4.0.mkl/lib64/R/include -DNDEBUG -I\"/opt/R-3.4.0.mkl/library/Rcpp/include\" -I/usr/local/include -fpic -march=x86-64 -O3 -c compute.cpp -o compute.o`\r\n `g++ -std=gnu++0x -I/opt/R-3.4.0.mkl/lib64/R/include -DNDEBUG -I\"/opt/R-3.4.0.mkl/library/Rcpp/include\" -I/usr/local/include -fpic -march=x86-64 -O3 -c csv.cpp -o csv.o+``g+ -std=gnu++0x -I/opt/R-3.4.0.mkl/lib64/R/include -DNDEBUG -I\"/opt/R-3.4.0.mkl/library/Rcpp/include\" -I/usr/local/include -fpic -march=x86-64 -O3 -c dataset.cpp -o dataset.o`\r\n `g++ -std=gnu++0x -I/opt/R-3.4.0.mkl/lib64/R/include -DNDEBUG -I\"/opt/R-3.4.0.mkl/library/Rcpp/include\" -I/usr/local/include -fpic -march=x86-64 -O3 -c datatype.cpp -o datatype.o`\r\n `g++ -std=gnu++0x -I/opt/R-3.4.0.mkl/lib64/R/include -DNDEBUG -I\"/opt/R-3.4.0.mkl/library/Rcpp/include\" -I/usr/local/include -fpic -march=x86-64 -O3 -c expression.cpp -o expression.o`\r\n `g++ -std=gnu++0x -I/opt/R-3.4.0.mkl/lib64/R/include -DNDEBUG -I\"/opt/R-3.4.0.mkl/library/Rcpp/include\" -I/usr/local/include -fpic -march=x86-64 -O3 -c feather.cpp -o feather.o`\r\n `g++ -std=gnu++0x -I/opt/R-3.4.0.mkl/lib64/R/include -DNDEBUG -I\"/opt/R-3.4.0.mkl/library/Rcpp/include\" -I/usr/local/include -fpic -march=x86-64 -O3 -c field.cpp -o field.o`\r\n `g++ -std=gnu++0x -I/opt/R-3.4.0.mkl/lib64/R/include -DNDEBUG -I\"/opt/R-3.4.0.mkl/library/Rcpp/include\" -I/usr/local/include -fpic -march=x86-64 -O3 -c filesystem.cpp -o filesystem.o`\r\n `g++ -std=gnu++0x -I/opt/R-3.4.0.mkl/lib64/R/include -DNDEBUG -I\"/opt/R-3.4.0.mkl/library/Rcpp/include\" -I/usr/local/include -fpic -march=x86-64 -O3 -c imports.cpp -o imports.o`\r\n `g++ -std=gnu++0x -I/opt/R-3.4.0.mkl/lib64/R/include -DNDEBUG -I\"/opt/R-3.4.0.mkl/library/Rcpp/include\" -I/usr/local/include -fpic -march=x86-64 -O3 -c io.cpp -o io.o`\r\n `g++ -std=gnu++0x -I/opt/R-3.4.0.mkl/lib64/R/include -DNDEBUG -I\"/opt/R-3.4.0.mkl/library/Rcpp/include\" -I/usr/local/include -fpic -march=x86-64 -O3 -c json.cpp -o json.o+``g+ -std=gnu++0x -I/opt/R-3.4.0.mkl/lib64/R/include -DNDEBUG -I\"/opt/R-3.4.0.mkl/library/Rcpp/include\" -I/usr/local/include -fpic -march=x86-64 -O3 -c memorypool.cpp -o memorypool.o`\r\n `g++ -std=gnu++0x -I/opt/R-3.4.0.mkl/lib64/R/include -DNDEBUG -I\"/opt/R-3.4.0.mkl/library/Rcpp/include\" -I/usr/local/include -fpic -march=x86-64 -O3 -c message.cpp -o message.o`\r\n `g++ -std=gnu++0x -I/opt/R-3.4.0.mkl/lib64/R/include -DNDEBUG -I\"/opt/R-3.4.0.mkl/library/Rcpp/include\" -I/usr/local/include -fpic -march=x86-64 -O3 -c parquet.cpp -o parquet.o`\r\n `g++ -std=gnu++0x -I/opt/R-3.4.0.mkl/lib64/R/include -DNDEBUG -I\"/opt/R-3.4.0.mkl/library/Rcpp/include\" -I/usr/local/include -fpic -march=x86-64 -O3 -c py-to-r.cpp -o py-to-r.o`\r\n `g++ -std=gnu++0x -I/opt/R-3.4.0.mkl/lib64/R/include -DNDEBUG -I\"/opt/R-3.4.0.mkl/library/Rcpp/include\" -I/usr/local/include -fpic -march=x86-64 -O3 -c recordbatch.cpp -o recordbatch.o`\r\n `g++ -std=gnu++0x -I/opt/R-3.4.0.mkl/lib64/R/include -DNDEBUG -I\"/opt/R-3.4.0.mkl/library/Rcpp/include\" -I/usr/local/include -fpic -march=x86-64 -O3 -c recordbatchreader.cpp -o recordbatchreader.o`\r\n `g++ -std=gnu++0x -I/opt/R-3.4.0.mkl/lib64/R/include -DNDEBUG -I\"/opt/R-3.4.0.mkl/library/Rcpp/include\" -I/usr/local/include -fpic -march=x86-64 -O3 -c recordbatchwriter.cpp -o recordbatchwriter.o`\r\n `g++ -std=gnu++0x -I/opt/R-3.4.0.mkl/lib64/R/include -DNDEBUG -I\"/opt/R-3.4.0.mkl/library/Rcpp/include\" -I/usr/local/include -fpic -march=x86-64 -O3 -c scalar.cpp -o scalar.o`\r\n `g++ -std=gnu++0x -I/opt/R-3.4.0.mkl/lib64/R/include -DNDEBUG -I\"/opt/R-3.4.0.mkl/library/Rcpp/include\" -I/usr/local/include -fpic -march=x86-64 -O3 -c schema.cpp -o schema.o`\r\n `g++ -std=gnu++0x -I/opt/R-3.4.0.mkl/lib64/R/include -DNDEBUG -I\"/opt/R-3.4.0.mkl/library/Rcpp/include\" -I/usr/local/include -fpic -march=x86-64 -O3 -c symbols.cpp -o symbols.o`\r\n `g++ -std=gnu++0x -I/opt/R-3.4.0.mkl/lib64/R/include -DNDEBUG -I\"/opt/R-3.4.0.mkl/library/Rcpp/include\" -I/usr/local/include -fpic -march=x86-64 -O3 -c table.cpp -o table.o+``g+ -std=gnu++0x -I/opt/R-3.4.0.mkl/lib64/R/include -DNDEBUG -I\"/opt/R-3.4.0.mkl/library/Rcpp/include\" -I/usr/local/include -fpic -march=x86-64 -O3 -c threadpool.cpp -o threadpool.o+``g+ -std=gnu++0x -shared -L/opt/R-3.4.0.mkl/lib64/R/lib -L/usr/local/lib64 -o arrow.so array.o array_from_vector.o array_to_vector.o arraydata.o arrowExports.o buffer.o chunkedarray.o compression.o compute.o csv.o dataset.o datatype.o expression.o feather.o field.o filesystem.o imports.o io.o json.o memorypool.o message.o parquet.o py-to-r.o recordbatch.o recordbatchreader.o recordbatchwriter.o scalar.o schema.o symbols.o table.o threadpool.o -L/opt/R-3.4.0.mkl/lib64/R/lib -lR`\r\n `installing to /opt/R-3.4.0.mkl/library/arrow/libs``** R`\r\n `** inst`\r\n `** preparing package for lazy loading`\r\n `** help`\r\n `*** installing help indices`\r\n `** building package indices`\r\n `** installing vignettes``** testing if installed package can be loaded`\r\n `* DONE (arrow)``The downloaded source packages are inThe downloaded source packages are in '/tmp/RtmppBCBzR/downloaded_packages'``Please restart R to use the 'arrow' package.`\r\n\r\n3. We restart R, and run -\r\n\r\n`> arrow::arrow_available()`\r\n <font color=\"#ff0000\">`*[1] FALSE*`</font>\r\n\r\n\u00a0\r\n\r\nAnd indeed all arrow functionality fails:\r\n\r\n`> x <- arrow::Table$create(data.frame(a=1:2)) `\r\n\r\n`{color:#FF0000}Error in Table__from_dots(dots, schema) :{color`}\r\n`{color:#ff0000}Cannot call Table__from_dots(). Please use arrow::install_arrow() to install required runtime libraries.{color`}}}",
        "created_at": "2020-09-07T14:27:28.000Z",
        "updated_at": "2022-08-27T14:42:07.000Z",
        "labels": [
            "Migrated from Jira",
            "Component: R",
            "Type: bug"
        ],
        "closed": true,
        "closed_at": "2020-09-08T15:17:02.000Z"
    },
    "comments": [
        {
            "created_at": "2020-09-07T15:23:47.689Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-9932?focusedCommentId=17191757) by Ofek Shilon (ofek):*\nIt currently seems it was a clash of some functions in ./r/tools/linuxlibs.R with an in-house implementation of 'untar'.\u00a0 \u00a0 Sorry for the hassle."
        },
        {
            "created_at": "2020-09-08T13:54:28.252Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-9932?focusedCommentId=17192227) by Ofek Shilon (ofek):*\nThe previous suspicion is **not** the root cause of the installation failure.\r\n\r\n\u00a0\r\n\r\nThe signature of dQuote changed in R3.6. It [accepted a single argument before\\|[https://www.rdocumentation.org/packages/base/versions/3.5.3/topics/sQuote]]\u00a0 but [accepts a second argument since 3.6.](https://www.rdocumentation.org/packages/base/versions/3.6.0/topics/sQuote)\u00a0 \u00a0The arrow 1.0.1 R package is marked as dependent on R>=3.1, but the installation error message above seems to indicate that the installation script uses R3.6 syntax.\u00a0\r\n\r\nThis usage is (at least) at /r/tools/linuxlibs.R :\r\n\r\nenv_vars <- paste(\r\n names(env_var_list), **dQuote(env_var_list, FALSE)**,\r\n sep = \"=\", collapse = \" \"\r\n )"
        },
        {
            "created_at": "2020-09-08T15:17:02.563Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-9932?focusedCommentId=17192270) by Neal Richardson (npr):*\nThanks for the report. This was recently fixed (though after 1.0.1 was released). "
        },
        {
            "created_at": "2020-10-22T08:38:55.121Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-9932?focusedCommentId=17218870) by Ofek Shilon (ofek):*\n`[~npr]` Can you say when a version with the fix would be released?"
        },
        {
            "created_at": "2020-10-22T14:54:00.164Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-9932?focusedCommentId=17219073) by Neal Richardson (npr):*\nAbout 2 days ago :) Release announcement coming shortly, just waiting for CRAN to build binaries."
        },
        {
            "created_at": "2022-08-27T14:42:07.272Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-9932?focusedCommentId=17586051) by @toddfarmer:*\nTransitioning issue from Resolved to Closed to based on resolution field value."
        }
    ]
}