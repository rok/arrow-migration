{
    "issue": {
        "title": "[R] Set minimum cpp11 version",
        "body": "***Note**: This issue was originally created as [ARROW-10774](https://issues.apache.org/jira/browse/ARROW-10774). Please see the [migration documentation](https://gist.github.com/toddfarmer/12aa88361532d21902818a6044fda4c3) for further details.*\n\n### Original Issue Description:\nHere's the log for ubuntu:\r\n\r\n`install.packages(\"arrow\")`\r\n`Installing package into '/home/tching/R/x86_64-pc-linux-gnu-library/4.0'`\r\n`(as 'lib' is unspecified)`\r\n`trying URL 'https://cloud.r-project.org/src/contrib/arrow_2.0.0.tar.gz'`\r\n`Content type 'application/x-gzip' length 322592 bytes (315 KB)`\r\n`==================================================`\r\n`downloaded 315 KB`\r\n\r\n`* installing *source* package 'arrow' ...`\r\n`** package 'arrow' successfully unpacked and MD5 sums checked`\r\n`** using staged installation`\r\n`*** Arrow C++ libraries found via pkg-config`\r\n`PKG_CFLAGS= -DARROW_R_WITH_ARROW`\r\n`PKG_LIBS=-larrow_dataset -lparquet -larrow`\r\n`** libs`\r\n`g++ -std=gnu++11 -I\"/usr/share/R/include\" -DNDEBUG -DARROW_R_WITH_ARROW -I'/home/tching/R/x86_64-pc-linux-gnu-library/4.0/cpp11/include' -fpic -g -O2 -fdebug-prefix-map=/build/r-base-7BvS0x/r-base-4.0.3=. -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2 -g -c array.cpp -o array.o`\r\n`In file included from ./arrow_types.h:22:0,`\r\n` from array.cpp:18:`\r\n`././arrow_cpp11.h: In function 'SEXPREC* arrow::r::utf8_strings(SEXP)':`\r\n`././arrow_cpp11.h:117:4: error: void value not ignored as it ought to be`\r\n` });`\r\n` ^`\r\n`././arrow_cpp11.h: In function 'Pointer arrow::r::r6_to_pointer(SEXP)':`\r\n`././arrow_cpp11.h:164:16: error: 'decay_t' is not a member of 'cpp11'`\r\n` cpp11::decay_t<typename std::remove_pointer<Pointer>::type>>();`\r\n` ^~~~~~~`\r\n`././arrow_cpp11.h:164:16: error: 'decay_t' is not a member of 'cpp11'`\r\n`././arrow_cpp11.h:163:42: error: parse error in template argument list`\r\n` std::string type_name = arrow::util::nameof<`\r\n` ^~~~~~~`\r\n` cpp11::decay_t<typename std::remove_pointer<Pointer>::type>>();`\r\n` ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~`\r\n`././arrow_cpp11.h:164:70: error: expected primary-expression before ')' token`\r\n` cpp11::decay_t<typename std::remove_pointer<Pointer>::type>>();`\r\n` ^`\r\n`././arrow_cpp11.h: At global scope:`\r\n`././arrow_cpp11.h:322:1: error: 'enable_if_enum' does not name a type; did you mean 'enable_if_shared_ptr'?`\r\n` enable_if_enum<E, SEXP> as_sexp(E e) {`\r\n` ^~~~~~~~~~~~~~`\r\n` enable_if_shared_ptr`\r\n`/usr/lib/R/etc/Makeconf:181: recipe for target 'array.o' failed`\r\n`make: *** [array.o] Error 1`\r\n`ERROR: compilation failed for package 'arrow'`\r\n`* removing '/home/tching/R/x86_64-pc-linux-gnu-library/4.0/arrow'`\r\n\r\n`The downloaded source packages are in`\r\n` '/tmp/RtmpwBcRFV/downloaded_packages'`\r\n`Warning message:`\r\n`In install.packages(\"arrow\") :`\r\n` installation of package 'arrow' had non-zero exit status`\r\n\r\n\u00a0\r\n\r\nOn mac:\r\n\r\n`...`\r\n\r\n`clang++ -std=gnu++11 -I\"/Library/Frameworks/R.framework/Resources/include\" -DNDEBUG -I/private/var/folders/w9/n1w04yfs0j3fj5ftrq9vxn5nj6m7h0/T/RtmpcVzz9H/R.INSTALL3d32a98f8cd/.autobrew/build-apache-arrow/include -DARROW_R_WITH_S3 -DARROW_R_WITH_ARROW -DARROW_R_WITH_S3 -I\"/Users/tching/Library/R/3.5/library/cpp11/include\" -I/usr/local/include -fPIC -O3 -c array.cpp -o array.o`\r\n`In file included from array.cpp:18:`\r\n`In file included from ././arrow_types.h:22:`\r\n`In file included from ././arrow_cpp11.h:39:`\r\n`In file included from /Users/tching/Library/R/3.5/library/cpp11/include/cpp11.hpp:5:`\r\n`In file included from /Users/tching/Library/R/3.5/library/cpp11/include/cpp11/as.hpp:9:`\r\n`/Users/tching/Library/R/3.5/library/cpp11/include/cpp11/protect.hpp:236:10: error: definition with same mangled name as another definition`\r\n` auto operator()(A&&... a) const`\r\n` ^`\r\n`/Users/tching/Library/R/3.5/library/cpp11/include/cpp11/protect.hpp:236:10: note: previous definition is here`\r\n`1 error generated.`\r\n`make: *** [array.o] Error 1`\r\n`ERROR: compilation failed for package 'arrow'`\r\n`* removing '/Users/tching/Library/R/3.5/library/arrow'`\r\n`* restoring previous '/Users/tching/Library/R/3.5/library/arrow'`\r\n`Warning in install.packages :`\r\n` installation of package 'arrow' had non-zero exit status`",
        "created_at": "2020-11-30T09:07:54.000Z",
        "updated_at": "2020-12-01T18:51:37.000Z",
        "labels": [
            "Migrated from Jira",
            "Component: R",
            "Type: bug"
        ],
        "closed": true,
        "closed_at": "2020-12-01T18:50:24.000Z"
    },
    "comments": [
        {
            "created_at": "2020-11-30T09:12:30.132Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-10774?focusedCommentId=17240584) by Travers Ching (traversc):*\nI just realized this is due to an earlier version of cpp11 I had. In which case, it would help to set a minimum version requirement on that package.\u00a0"
        },
        {
            "created_at": "2020-11-30T16:03:47.822Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-10774?focusedCommentId=17240840) by Neal Richardson (npr):*\nGood call. Would you like to submit a PR that sets a version requirement?"
        },
        {
            "created_at": "2020-12-01T18:50:24.562Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-10774?focusedCommentId=17241784) by Neal Richardson (npr):*\nIssue resolved by pull request 8808\n<https://github.com/apache/arrow/pull/8808>"
        }
    ]
}