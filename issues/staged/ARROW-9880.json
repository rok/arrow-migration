{
    "issue": {
        "title": "[Python] Lose access to indices & dictionary roundtripping DictionaryArray to parquet file",
        "body": "***Note**: This issue was originally created as [ARROW-9880](https://issues.apache.org/jira/browse/ARROW-9880). Please see the [migration documentation](https://gist.github.com/toddfarmer/12aa88361532d21902818a6044fda4c3) for further details.*\n\n### Original Issue Description:\nI am in the process of adding support for reading/writing Parquet to a data analysis tool (Mir\u00f3: <https://stochasticsolutions.com/miro/).>\u00a0The tool has a string column type that is extremely close to PyArrow's DictionaryArray, so it was natural to add support for that, but round-tripping doesn't seem to work, as this example shows:\r\n\r\nThe code creates writes a table with single column, a dictionary array, and writes it as a parquet file using `write_table`. On reading it back in, the column's `.type` indicates that it's a DictionaryArray, but Python reports its type as a `ChunkedArray`. Either way, it doesn't seem to have `indices` or `dictionary` properties. `to_pylist` works, so I can get the data in, but almost all the benefit of writing as a dictionary array is lost if I need to convert it to a Python list to access its values.\r\n\r\nI presume it isn't supposed to be like this.\r\n\r\n\u00a0\r\n```python\n\r\n$ python3\r\nPython 3.7.6 (v3.7.6:43364a7ae0, Dec 18 2019, 14:18:50)\u00a0\r\n[Clang 6.0 (clang-600.0.57)] on darwin\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> import pyarrow as pa\r\n>>> import pyarrow.parquet as pq\r\n>>> print('PyArrow version:', pa.__version__)\r\nPyArrow version: 1.0.1\r\n>>>\u00a0\r\n>>>\u00a0\r\n>>> dictionary = ['zero', 'one', 'two']\r\n>>> indices = [None, 0, 1, 2, 0, 1, 0]\r\n>>>\u00a0\r\n>>> col = pa.DictionaryArray.from_arrays(indices, dictionary)\r\n>>> print('col:', col)\r\ncol:\u00a0\r\n-- dictionary:\r\n\u00a0 [\r\n\u00a0 \u00a0 \"zero\",\r\n\u00a0 \u00a0 \"one\",\r\n\u00a0 \u00a0 \"two\"\r\n\u00a0 ]\r\n-- indices:\r\n\u00a0 [\r\n\u00a0 \u00a0 null,\r\n\u00a0 \u00a0 0,\r\n\u00a0 \u00a0 1,\r\n\u00a0 \u00a0 2,\r\n\u00a0 \u00a0 0,\r\n\u00a0 \u00a0 1,\r\n\u00a0 \u00a0 0\r\n\u00a0 ]\r\n>>> print('col.to_pylist():', col.to_pylist())\r\ncol.to_pylist(): [None, 'zero', 'one', 'two', 'zero', 'one', 'zero']\r\n>>> print('col.type:', col.type)\r\ncol.type: dictionary<values=string, indices=int64, ordered=0>\r\n>>> print('type(col):', type(col))\r\ntype(col): <class 'pyarrow.lib.DictionaryArray'>\r\n>>> print('col.indices:', col.indices)\r\ncol.indices: [\r\n\u00a0 null,\r\n\u00a0 0,\r\n\u00a0 1,\r\n\u00a0 2,\r\n\u00a0 0,\r\n\u00a0 1,\r\n\u00a0 0\r\n]\r\n>>> print('col.dictionary:', col.dictionary)\r\ncol.dictionary: [\r\n\u00a0 \"zero\",\r\n\u00a0 \"one\",\r\n\u00a0 \"two\"\r\n]\r\n>>>\u00a0\r\n>>> path = '/tmp/zot.parquet'\r\n>>> pq.write_table(pa.lib.Table.from_pydict({'zot': col}), path)\r\n>>> table = pq.read_table(path)\r\n>>>\u00a0\r\n>>> zot = table['zot']\r\n>>> print('zot:', zot)\r\nzot: [\r\n\r\n\r\n\u00a0 -- dictionary:\r\n\u00a0 \u00a0 [\r\n\u00a0 \u00a0 \u00a0 \"zero\",\r\n\u00a0 \u00a0 \u00a0 \"one\",\r\n\u00a0 \u00a0 \u00a0 \"two\"\r\n\u00a0 \u00a0 ]\r\n\u00a0 -- indices:\r\n\u00a0 \u00a0 [\r\n\u00a0 \u00a0 \u00a0 null,\r\n\u00a0 \u00a0 \u00a0 0,\r\n\u00a0 \u00a0 \u00a0 1,\r\n\u00a0 \u00a0 \u00a0 2,\r\n\u00a0 \u00a0 \u00a0 0,\r\n\u00a0 \u00a0 \u00a0 1,\r\n\u00a0 \u00a0 \u00a0 0\r\n\u00a0 \u00a0 ]\r\n]\r\n>>> print('zot.to_pylist():', zot.to_pylist())\r\nzot.to_pylist(): [None, 'zero', 'one', 'two', 'zero', 'one', 'zero']\r\n>>> print('zot.type:', zot.type)\r\nzot.type: dictionary<values=string, indices=int32, ordered=0>\r\n>>> print('type(zot):', type(zot))\r\ntype(zot): <class 'pyarrow.lib.ChunkedArray'>\r\n>>> print('zot.indices:', zot.indices)\r\nTraceback (most recent call last):\r\n\u00a0 File \"<stdin>\", line 1, in <module>\r\nAttributeError: 'pyarrow.lib.ChunkedArray' object has no attribute 'indices'\r\n>>> print('zot.dictionary:', zot.dictionary)\r\nTraceback (most recent call last):\r\n\u00a0 File \"<stdin>\", line 1, in <module>\r\nAttributeError: 'pyarrow.lib.ChunkedArray' object has no attribute 'dictionary'\r\n>>> ^D\r\n\r\n```",
        "created_at": "2020-08-28T09:55:11.000Z",
        "updated_at": "2021-06-09T13:22:01.000Z",
        "labels": [
            "Migrated from Jira",
            "Component: Python",
            "Type: bug"
        ],
        "closed": false
    },
    "comments": []
}