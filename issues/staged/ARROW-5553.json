{
    "issue": {
        "title": "[Ruby] red-arrow gem does not compile on ruby:2.5 docker image",
        "body": "***Note**: This issue was originally created as [ARROW-5553](https://issues.apache.org/jira/browse/ARROW-5553). Please see the [migration documentation](https://gist.github.com/toddfarmer/12aa88361532d21902818a6044fda4c3) for further details.*\n\n### Original Issue Description:\nI'm attempting to install the red-arrow gem in a docker container based on the ruby:2.5 image on docker hub.\u00a0\u00a0 I followed the debian instructions on <https://github.com/red-data-tools/packages.red-data-tools.org> to install libarrow-dev.\r\n\r\n\u00a0\r\n\r\nI then ran 'gem install red-arrow'\r\n\r\nThe output is as follows:\r\n\r\nBuilding native extensions. This could take a while...\r\nERROR:  Error installing red-arrow:\r\n\tERROR: Failed to build gem native extension.\r\n\r\n    current directory: /usr/local/bundle/gems/red-arrow-0.13.0/ext/arrow\r\n/usr/local/bin/ruby -I /usr/local/lib/ruby/site_ruby/2.5.0 -r ./siteconf20190611-1782-1gg8bpn.rb extconf.rb\r\nchecking --enable-debug-build option... no\r\nchecking C++ compiler... g++\r\nchecking g++ version... 6.3 (gnu++14)\r\nchecking for --enable-debug-build option... no\r\nchecking for -Wall option to compiler... yes\r\nchecking for -Waggregate-return option to compiler... yes\r\nchecking for -Wcast-align option to compiler... yes\r\nchecking for -Wextra option to compiler... yes\r\nchecking for -Wformat=2 option to compiler... yes\r\nchecking for -Winit-self option to compiler... yes\r\nchecking for -Wlarger-than-65500 option to compiler... yes\r\nchecking for -Wmissing-declarations option to compiler... yes\r\nchecking for -Wmissing-format-attribute option to compiler... yes\r\nchecking for -Wmissing-include-dirs option to compiler... yes\r\nchecking for -Wmissing-noreturn option to compiler... yes\r\nchecking for -Wmissing-prototypes option to compiler... yes\r\nchecking for -Wnested-externs option to compiler... yes\r\nchecking for -Wold-style-definition option to compiler... yes\r\nchecking for -Wpacked option to compiler... yes\r\nchecking for -Wp,-D_FORTIFY_SOURCE=2 option to compiler... yes\r\nchecking for -Wpointer-arith option to compiler... yes\r\nchecking for -Wswitch-default option to compiler... yes\r\nchecking for -Wswitch-enum option to compiler... yes\r\nchecking for -Wundef option to compiler... yes\r\nchecking for -Wout-of-line-declaration option to compiler... no\r\nchecking for -Wunsafe-loop-optimizations option to compiler... yes\r\nchecking for -Wwrite-strings option to compiler... yes\r\nchecking for Homebrew... no\r\nchecking for arrow... yes\r\nchecking for arrow-glib... yes\r\ncreating Makefile\r\n\r\ncurrent directory: /usr/local/bundle/gems/red-arrow-0.13.0/ext/arrow\r\nmake \"DESTDIR=\" clean\r\n\r\ncurrent directory: /usr/local/bundle/gems/red-arrow-0.13.0/ext/arrow\r\nmake \"DESTDIR=\"\r\ncompiling arrow.cpp\r\ncompiling record-batch.cpp\r\nrecord-batch.cpp: In member function 'VALUE red_arrow::{anonymous}::StructArrayValueConverter::convert(const arrow::StructArray&, int64_t)':\r\nrecord-batch.cpp:344:40: error: 'const class arrow::StructArray' has no member named 'struct_type'\r\n         const auto struct_type = array.struct_type();\r\n                                        ^~~~~~~~~~~\r\nIn file included from /usr/local/include/ruby-2.5.0/ruby/ruby.h:29:0,\r\n                 from /usr/local/include/ruby-2.5.0/ruby.h:33,\r\n                 from /usr/local/bundle/gems/glib2-3.3.6/ext/glib2/rbgobject.h:26,\r\n                 from red-arrow.hpp:33,\r\n                 from record-batch.cpp:20:\r\n/usr/local/include/ruby-2.5.0/ruby/defines.h:105:57: error: void value not ignored as it ought to be\r\n #define RB_GNUC_EXTENSION_BLOCK(x) __extension__ ({ x; })\r\n                                                         ^\r\n/usr/local/include/ruby-2.5.0/ruby/intern.h:788:35: note: in expansion of macro 'RB_GNUC_EXTENSION_BLOCK'\r\n #define rb_utf8_str_new(str, len) RB_GNUC_EXTENSION_BLOCK( \\\r\n                                   ^~~~~~~~~~~~~~~~~~~~~~~\r\nrecord-batch.cpp:350:18: note: in expansion of macro 'rb_utf8_str_new'\r\n           key_ = rb_utf8_str_new(field_name.data(), field_name.length());\r\n                  ^~~~~~~~~~~~~~~\r\nrecord-batch.cpp: In member function 'uint8_t red_arrow::{anonymous}::UnionArrayValueConverter::compute_child_index(const arrow::UnionArray&, arrow::UnionType\\*, const char\\*)':\r\nrecord-batch.cpp:516:66: error: no matching function for call to 'arrow::Status::Invalid(const char [18], const unsigned char&)'\r\n         check_status(Status::Invalid(\"Unknown type ID: \", type_id),\r\n                                                                  ^\r\nIn file included from /usr/include/arrow/buffer.h:30:0,\r\n                 from /usr/include/arrow/array.h:28,\r\n                 from /usr/include/arrow/api.h:23,\r\n                 from red-arrow.hpp:22,\r\n                 from record-batch.cpp:20:\r\n/usr/include/arrow/status.h:150:17: note: candidate: static arrow::Status arrow::Status::Invalid(const string&)\r\n   static Status Invalid(const std::string& msg) {\r\n                 ^~~~~~~\r\n/usr/include/arrow/status.h:150:17: note:   candidate expects 1 argument, 2 provided\r\nMakefile:234: recipe for target 'record-batch.o' failed\r\nmake: \\*\\*\\* [record-batch.o] Error 1\r\n\r\nmake failed, exit code 2\r\n\r\nGem files will remain installed in /usr/local/bundle/gems/red-arrow-0.13.0 for inspection.\r\nResults logged to /usr/local/bundle/extensions/x86_64-linux/2.5.0/red-arrow-0.13.0/gem_make.out\r\n\r\n\r\n\u00a0\r\n\r\n\u00a0",
        "created_at": "2019-06-11T14:49:17.000Z",
        "updated_at": "2019-06-12T12:01:09.000Z",
        "labels": [
            "Migrated from Jira",
            "Component: Ruby",
            "Type: bug"
        ],
        "closed": true,
        "closed_at": "2019-06-12T12:01:06.000Z"
    },
    "comments": [
        {
            "created_at": "2019-06-12T02:42:09.160Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-5553?focusedCommentId=16861695) by Kouhei Sutou (kou):*\nAh, the document is old.\r\nWe have the official packages now. packages.red-data-tools.org is deprecated.\r\nSee https://arrow.apache.org/install/ for details."
        },
        {
            "created_at": "2019-06-12T12:01:06.814Z",
            "body": "***Note**: [Comment](https://issues.apache.org/jira/browse/ARROW-5553?focusedCommentId=16862047) by Yosuke Shiro (shiro615):*\nIssue resolved by pull request 4526\n<https://github.com/apache/arrow/pull/4526>"
        }
    ]
}