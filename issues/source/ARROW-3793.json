{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13198461",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13198461",
    "key": "ARROW-3793",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12343858",
                "id": "12343858",
                "description": "",
                "name": "0.12.0",
                "archived": false,
                "released": true,
                "releaseDate": "2019-01-20"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/4",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
            "name": "Minor",
            "id": "4"
        },
        "labels": [
            "newbie",
            "pull-request-available",
            "test"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12343858",
                "id": "12343858",
                "description": "",
                "name": "0.12.0",
                "archived": false,
                "released": true,
                "releaseDate": "2019-01-20"
            }
        ],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=bkietz",
            "name": "bkietz",
            "key": "bkietz",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=bkietz&avatarId=37277",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bkietz&avatarId=37277",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bkietz&avatarId=37277",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bkietz&avatarId=37277"
            },
            "displayName": "Ben Kietzman",
            "active": true,
            "timeZone": "America/New_York"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12328935",
                "id": "12328935",
                "name": "C++"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=bkietz",
            "name": "bkietz",
            "key": "bkietz",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=bkietz&avatarId=37277",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bkietz&avatarId=37277",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bkietz&avatarId=37277",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bkietz&avatarId=37277"
            },
            "displayName": "Ben Kietzman",
            "active": true,
            "timeZone": "America/New_York"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=bkietz",
            "name": "bkietz",
            "key": "bkietz",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=bkietz&avatarId=37277",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bkietz&avatarId=37277",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bkietz&avatarId=37277",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bkietz&avatarId=37277"
            },
            "displayName": "Ben Kietzman",
            "active": true,
            "timeZone": "America/New_York"
        },
        "aggregateprogress": {
            "progress": 10800,
            "total": 10800,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 10800,
            "total": 10800,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-3793/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 19,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13198461/worklog/166542",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "bkietz opened a new pull request #2977:  ARROW-3793: [C++] TestScalarAppendUnsafe is not testing unsafe appends\nURL: https://github.com/apache/arrow/pull/2977\n \n \n   Perform enough repetitions that even the bitmask's Buffer will be more than the minimum allocation size (64 bytes) and reserve enough space for all repetitions. Also use UnsafeAppendNull rather than AppendNull\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-11-15T17:44:35.579+0000",
                    "updated": "2018-11-15T17:44:35.579+0000",
                    "started": "2018-11-15T17:44:35.578+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "166542",
                    "issueId": "13198461"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13198461/worklog/166634",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on issue #2977:  ARROW-3793: [C++] TestScalarAppendUnsafe is not testing unsafe appends\nURL: https://github.com/apache/arrow/pull/2977#issuecomment-439175940\n \n \n   We have a bunch of warnings enabled in Travis CI, can be done with `-DBUILD_WARNING_LEVEL=CHECKIN`\r\n   \r\n   ```\r\n   /home/travis/build/apache/arrow/cpp/src/arrow/array-test.cc:1504:41: error: conversion to \u2018int\u2019 from \u2018std::basic_string<char>::size_type {aka long unsigned int}\u2019 may alter its value [-Werror=conversion]\r\n      for (auto&& s : strings) total_length += s.size();\r\n   ```\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-11-15T20:17:13.071+0000",
                    "updated": "2018-11-15T20:17:13.071+0000",
                    "started": "2018-11-15T20:17:13.070+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "166634",
                    "issueId": "13198461"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13198461/worklog/166674",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "bkietz commented on issue #2977:  ARROW-3793: [C++] TestScalarAppendUnsafe is not testing unsafe appends\nURL: https://github.com/apache/arrow/pull/2977#issuecomment-439219267\n \n \n   That gave me an error in [util/compression.cc](https://github.com/apache/arrow/blob/master/cpp/src/arrow/util/compression.cc#L104)\r\n   \r\n   `error: 'break' will never be executed [-Werror,-Wunreachable-code-break]`\r\n   \r\n   Not sure why this hasn't been seen before, but in any case shouldn't the break statements follow [the call to `reset()`](https://github.com/apache/arrow/blob/master/cpp/src/arrow/util/compression.cc#L100)?\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-11-15T22:51:09.739+0000",
                    "updated": "2018-11-15T22:51:09.739+0000",
                    "started": "2018-11-15T22:51:09.738+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "166674",
                    "issueId": "13198461"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13198461/worklog/166702",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on issue #2977:  ARROW-3793: [C++] TestScalarAppendUnsafe is not testing unsafe appends\nURL: https://github.com/apache/arrow/pull/2977#issuecomment-439234680\n \n \n   Ah, the breaks should be put in the else part of the ifdef \n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-11-16T00:02:25.153+0000",
                    "updated": "2018-11-16T00:02:25.153+0000",
                    "started": "2018-11-16T00:02:25.152+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "166702",
                    "issueId": "13198461"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13198461/worklog/166703",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "bkietz commented on issue #2977:  ARROW-3793: [C++] TestScalarAppendUnsafe is not testing unsafe appends\nURL: https://github.com/apache/arrow/pull/2977#issuecomment-439235131\n \n \n   I could add that to this PR\n   \n   On Thu, Nov 15, 2018, 19:02 Wes McKinney <notifications@github.com> wrote:\n   \n   > Ah, the breaks should be put in the else part of the ifdef\n   >\n   > \u2014\n   > You are receiving this because you authored the thread.\n   > Reply to this email directly, view it on GitHub\n   > <https://github.com/apache/arrow/pull/2977#issuecomment-439234680>, or mute\n   > the thread\n   > <https://github.com/notifications/unsubscribe-auth/ABPVwJJamgKfpuZs2FzTz1f_pc1kGuzyks5uvgCRgaJpZM4YhBry>\n   > .\n   >\n   \n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-11-16T00:04:55.420+0000",
                    "updated": "2018-11-16T00:04:55.420+0000",
                    "started": "2018-11-16T00:04:55.419+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "166703",
                    "issueId": "13198461"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13198461/worklog/166749",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on issue #2977:  ARROW-3793: [C++] TestScalarAppendUnsafe is not testing unsafe appends\nURL: https://github.com/apache/arrow/pull/2977#issuecomment-439260221\n \n \n   It's OK to fix that here (if it's causing a problem for you) or in a separate patch. What environment is producing that error? A lot of us aren't developing with new gcc, or we're building with bz2 and so haven't triggered that code path\r\n   \r\n   The unit test is failing with\r\n   \r\n   ```\r\n   [ RUN      ] TestBinaryBuilder.TestScalarAppendUnsafe\r\n   /home/travis/build/apache/arrow/cpp/src/arrow/array-test.cc:1529: Failure\r\n   Expected equality of these values:\r\n     static_cast<int>(strings[i % N].size())\r\n       Which is: 3\r\n     length\r\n       Which is: 0\r\n   ```\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-11-16T02:25:25.859+0000",
                    "updated": "2018-11-16T02:25:25.859+0000",
                    "started": "2018-11-16T02:25:25.859+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "166749",
                    "issueId": "13198461"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13198461/worklog/166932",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "bkietz commented on issue #2977:  ARROW-3793: [C++] TestScalarAppendUnsafe is not testing unsafe appends\nURL: https://github.com/apache/arrow/pull/2977#issuecomment-439444842\n \n \n   I'm on a fresh Ubuntu 18.04 VM, compiling with clang-6.0. I used conda to get my dependencies:\r\n   \r\n   <details>\r\n   <pre>\r\n   # packages in environment at /home/bkietz/miniconda3/envs/arrow-dev:\r\n   #\r\n   # Name                    Version                   Build  Channel\r\n   boost-cpp                 1.68.0               h3a22d5f_0    conda-forge\r\n   brotli                    1.0.7                hfc679d8_0    conda-forge\r\n   bzip2                     1.0.6                h470a237_2    conda-forge\r\n   ca-certificates           2018.10.15           ha4d7672_0    conda-forge\r\n   certifi                   2018.10.15            py37_1000    conda-forge\r\n   cmake                     3.12.4               h011004d_0    conda-forge\r\n   curl                      7.62.0               h74213dd_0    conda-forge\r\n   expat                     2.2.5                hfc679d8_2    conda-forge\r\n   flatbuffers               1.10.0               hfc679d8_0    conda-forge\r\n   gettext                   0.19.8.1             h5e8e0c9_1    conda-forge\r\n   gflags                    2.2.2                hfc679d8_0    conda-forge\r\n   git                       2.19.1          pl526hbb17d3c_1    conda-forge\r\n   icu                       58.2                 hfc679d8_0    conda-forge\r\n   krb5                      1.16.2               hbb41f41_0    conda-forge\r\n   libcurl                   7.62.0               hbdb9355_0    conda-forge\r\n   libedit                   3.1.20170329         haf1bffa_1    conda-forge\r\n   libffi                    3.2.1                hfc679d8_5    conda-forge\r\n   libgcc-ng                 8.2.0                hdf63c60_1  \r\n   libiconv                  1.15                 h470a237_3    conda-forge\r\n   libssh2                   1.8.0                h5b517e9_2    conda-forge\r\n   libstdcxx-ng              7.2.0                hdf63c60_3    conda-forge\r\n   libuv                     1.24.0               h470a237_0    conda-forge\r\n   lz4                       2.1.2            py37h7b6447c_0  \r\n   lz4-c                     1.8.3                hfc679d8_0    conda-forge\r\n   make                      4.2.1             h470a237_1002    conda-forge\r\n   ncurses                   6.1                  hfc679d8_1    conda-forge\r\n   ninja                     1.8.2                h2d50403_1    conda-forge\r\n   openssl                   1.0.2p               h470a237_1    conda-forge\r\n   perl                      5.26.2               h470a237_0    conda-forge\r\n   pip                       18.1                  py37_1000    conda-forge\r\n   python                    3.7.1                h5001a0f_0    conda-forge\r\n   rapidjson                 1.1.0                         0    conda-forge\r\n   readline                  7.0                  haf1bffa_1    conda-forge\r\n   rhash                     1.3.6                h470a237_1    conda-forge\r\n   setuptools                40.6.2                   py37_0    conda-forge\r\n   snappy                    1.1.7                hfc679d8_2    conda-forge\r\n   sqlite                    3.25.3               hb1c47c0_0    conda-forge\r\n   thrift-cpp                0.11.0               he11dc3d_3    conda-forge\r\n   tk                        8.6.8                ha92aebf_0    conda-forge\r\n   wheel                     0.32.2                   py37_0    conda-forge\r\n   xz                        5.2.4                h470a237_1    conda-forge\r\n   zlib                      1.2.11               h470a237_3    conda-forge\r\n   zstd                      1.3.7                h502d103_0    conda-forge\r\n   </pre>\r\n   </details>\r\n   \r\n   I hit this because I didn't set `ARROW_BUILD_BZ2` when building.\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-11-16T16:17:44.542+0000",
                    "updated": "2018-11-16T16:17:44.542+0000",
                    "started": "2018-11-16T16:17:44.541+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "166932",
                    "issueId": "13198461"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13198461/worklog/166987",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "bkietz commented on issue #2977:  ARROW-3793: [C++] TestScalarAppendUnsafe is not testing unsafe appends\nURL: https://github.com/apache/arrow/pull/2977#issuecomment-439480296\n \n \n   The test is failing because `UnsafeAppendToBitmap()` only modifies length and null count, but `BinaryBuilder` needs that to append 0 to its offsets buffer. Could fix this for example by making `UnsafeAppendToBitmap()` virtual and overriding it in `BinaryBuilder`, what do you think @wesm ?\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-11-16T18:16:20.691+0000",
                    "updated": "2018-11-16T18:16:20.691+0000",
                    "started": "2018-11-16T18:16:20.690+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "166987",
                    "issueId": "13198461"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13198461/worklog/166988",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "bkietz edited a comment on issue #2977:  ARROW-3793: [C++] TestScalarAppendUnsafe is not testing unsafe appends\nURL: https://github.com/apache/arrow/pull/2977#issuecomment-439480296\n \n \n   The test is failing because `UnsafeAppendToBitmap()` only modifies length and null count, but `BinaryBuilder` needs that to append something to its offsets buffer. Could fix this for example by making `UnsafeAppendToBitmap()` virtual and overriding it in `BinaryBuilder`, what do you think @wesm ?\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-11-16T18:16:39.471+0000",
                    "updated": "2018-11-16T18:16:39.471+0000",
                    "started": "2018-11-16T18:16:39.470+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "166988",
                    "issueId": "13198461"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13198461/worklog/167011",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on issue #2977:  ARROW-3793: [C++] TestScalarAppendUnsafe is not testing unsafe appends\nURL: https://github.com/apache/arrow/pull/2977#issuecomment-439493476\n \n \n   How about adding an UnsafeAppendNull method? These methods are performance sensitive and so it probably wouldn't make sense to make virtual \n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-11-16T19:01:50.960+0000",
                    "updated": "2018-11-16T19:01:50.960+0000",
                    "started": "2018-11-16T19:01:50.959+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "167011",
                    "issueId": "13198461"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13198461/worklog/167012",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "bkietz commented on issue #2977:  ARROW-3793: [C++] TestScalarAppendUnsafe is not testing unsafe appends\nURL: https://github.com/apache/arrow/pull/2977#issuecomment-439496461\n \n \n   If we add UnsafeAppendNull to BinaryBuilder then that won't fix this bug when the dynamic type is BinaryBuilder but we are referencing it through a pointer to ArrayBuilder:\r\n   \r\n   ```\r\n   BinaryBuilder *bb = get();\r\n   ArrayBuilder *ab = bb;\r\n   ab->UnsafeAppendNull(); // doesn't modify offsets\r\n   ```\r\n   \r\n   I assumed this is a case we need to worry about because ArrayBuilder has a virtual destructor. If not then I suggest we add a warning to the doccomment that builders need to be referenced through maximally downcast pointers.\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-11-16T19:12:45.443+0000",
                    "updated": "2018-11-16T19:12:45.443+0000",
                    "started": "2018-11-16T19:12:45.442+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "167012",
                    "issueId": "13198461"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13198461/worklog/167014",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on issue #2977:  ARROW-3793: [C++] TestScalarAppendUnsafe is not testing unsafe appends\nURL: https://github.com/apache/arrow/pull/2977#issuecomment-439501852\n \n \n   Using a pointer to base isn't really a supported API at the moment so it's fine to presume that people will be using a pointer to the actual builder type \n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-11-16T19:31:31.874+0000",
                    "updated": "2018-11-16T19:31:31.874+0000",
                    "started": "2018-11-16T19:31:31.873+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "167014",
                    "issueId": "13198461"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13198461/worklog/167015",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "bkietz commented on issue #2977:  ARROW-3793: [C++] TestScalarAppendUnsafe is not testing unsafe appends\nURL: https://github.com/apache/arrow/pull/2977#issuecomment-439503707\n \n \n   Is that pattern documented? I feel like users could easily be surprised by this and we should be as explicit as possible.\r\n   \r\n   Alternatively, if we made `ArrayBuilder::UnsafeAppendNull` protected, then subclasses could either `using` them up to public or implement their own versions.\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-11-16T19:37:44.813+0000",
                    "updated": "2018-11-16T19:37:44.813+0000",
                    "started": "2018-11-16T19:37:44.813+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "167015",
                    "issueId": "13198461"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13198461/worklog/167020",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on issue #2977:  ARROW-3793: [C++] TestScalarAppendUnsafe is not testing unsafe appends\nURL: https://github.com/apache/arrow/pull/2977#issuecomment-439508078\n \n \n   You bring up a good point, which is that more methods of `ArrayBuilder` should be protected. \r\n   \r\n   This includes\r\n   \r\n   * UnsafeAppendNull\r\n   * UnsafeAppendToBitmap\r\n   * AppendToBitmap\r\n   * SetNotNull\r\n   \r\n   The issue here is that some internal details of the subclass builders, such as `NumericBuilder<T>`, used to be exposed publicly for modification by users at their own risk, and so we exposed methods to modify the bitmap. Now this is a bit out of date and so I would be fine making the above methods protected in `ArrayBuilder` and documenting in the top comment for ArrayBuilder that users are expected to cast `ArrayBuilder*` to a concrete type. \n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-11-16T19:53:39.923+0000",
                    "updated": "2018-11-16T19:53:39.923+0000",
                    "started": "2018-11-16T19:53:39.922+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "167020",
                    "issueId": "13198461"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13198461/worklog/167024",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on issue #2977:  ARROW-3793: [C++] TestScalarAppendUnsafe is not testing unsafe appends\nURL: https://github.com/apache/arrow/pull/2977#issuecomment-439509165\n \n \n   If you make this change you'll have to add `UnsafeAppendNull()` at least for `NumericBuilder<T>` also because it's used in `arrow::csv` https://github.com/apache/arrow/blob/df54da211448b5202aa08ed2b245eb78cfd1e50c/cpp/src/arrow/csv/converter.cc#L297\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-11-16T19:57:25.904+0000",
                    "updated": "2018-11-16T19:57:25.904+0000",
                    "started": "2018-11-16T19:57:25.903+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "167024",
                    "issueId": "13198461"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13198461/worklog/167119",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on a change in pull request #2977:  ARROW-3793: [C++] TestScalarAppendUnsafe is not testing unsafe appends\nURL: https://github.com/apache/arrow/pull/2977#discussion_r234370748\n \n \n\n ##########\n File path: cpp/src/arrow/builder.h\n ##########\n @@ -859,6 +867,8 @@ class ARROW_EXPORT BinaryBuilder : public ArrayBuilder {\n \n   Status AppendNull();\n \n+  void UnsafeAppendNull();\n \n Review comment:\n   Maybe put the implementation in the header (so it's inlined)?\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-11-16T22:50:06.350+0000",
                    "updated": "2018-11-16T22:50:06.350+0000",
                    "started": "2018-11-16T22:50:06.349+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "167119",
                    "issueId": "13198461"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13198461/worklog/167120",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on a change in pull request #2977:  ARROW-3793: [C++] TestScalarAppendUnsafe is not testing unsafe appends\nURL: https://github.com/apache/arrow/pull/2977#discussion_r234370314\n \n \n\n ##########\n File path: cpp/src/arrow/builder.h\n ##########\n @@ -370,6 +372,11 @@ class ARROW_EXPORT NumericBuilder : public PrimitiveBuilder<T> {\n           ARROW_MEMORY_POOL_DEFAULT)\n       : PrimitiveBuilder<T1>(TypeTraits<T1>::type_singleton(), pool) {}\n \n+  using ArrayBuilder::AppendToBitmap;\n+  using ArrayBuilder::SetNotNull;\n+  using ArrayBuilder::UnsafeAppendNull;\n+  using ArrayBuilder::UnsafeAppendToBitmap;\n \n Review comment:\n   Can you make only UnsafeAppendNull public? It looks like there's one place where `UnsafeAppendToBitmap(false)` will have to be replaced with `UnsafeAppendNull`\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-11-16T22:50:06.360+0000",
                    "updated": "2018-11-16T22:50:06.360+0000",
                    "started": "2018-11-16T22:50:06.360+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "167120",
                    "issueId": "13198461"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13198461/worklog/167121",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on issue #2977:  ARROW-3793: [C++] TestScalarAppendUnsafe is not testing unsafe appends\nURL: https://github.com/apache/arrow/pull/2977#issuecomment-439553174\n \n \n   The appveyor failure looks spurious to me\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-11-16T22:50:58.984+0000",
                    "updated": "2018-11-16T22:50:58.984+0000",
                    "started": "2018-11-16T22:50:58.983+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "167121",
                    "issueId": "13198461"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13198461/worklog/167246",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm closed pull request #2977: ARROW-3793: [C++] TestScalarAppendUnsafe is not testing unsafe appends\nURL: https://github.com/apache/arrow/pull/2977\n \n \n   \n\nThis is a PR merged from a forked repository.\nAs GitHub hides the original diff on merge, it is displayed below for\nthe sake of provenance:\n\nAs this is a foreign pull request (from a fork), the diff is supplied\nbelow (as it won't show otherwise due to GitHub magic):\n\ndiff --git a/cpp/src/arrow/array-test.cc b/cpp/src/arrow/array-test.cc\nindex 78ff4bc4c6..befedd95de 100644\n--- a/cpp/src/arrow/array-test.cc\n+++ b/cpp/src/arrow/array-test.cc\n@@ -1499,25 +1499,28 @@ TEST_F(TestBinaryBuilder, TestScalarAppendUnsafe) {\n   vector<uint8_t> is_null = {0, 0, 0, 1, 0};\n \n   int N = static_cast<int>(strings.size());\n-  int reps = 10;\n+  int reps = 13;\n+  int total_length = 0;\n+  for (auto&& s : strings) total_length += static_cast<int>(s.size());\n \n-  ASSERT_OK(builder_->Reserve(5));\n-  ASSERT_OK(builder_->ReserveData(6));\n+  ASSERT_OK(builder_->Reserve(N * reps));\n+  ASSERT_OK(builder_->ReserveData(total_length * reps));\n \n   for (int j = 0; j < reps; ++j) {\n     for (int i = 0; i < N; ++i) {\n       if (is_null[i]) {\n-        ASSERT_OK(builder_->AppendNull());\n+        builder_->UnsafeAppendNull();\n       } else {\n         builder_->UnsafeAppend(strings[i]);\n       }\n     }\n   }\n+  ASSERT_EQ(builder_->value_data_length(), total_length * reps);\n   Done();\n   ASSERT_OK(ValidateArray(*result_));\n   ASSERT_EQ(reps * N, result_->length());\n   ASSERT_EQ(reps, result_->null_count());\n-  ASSERT_EQ(reps * 6, result_->value_data()->size());\n+  ASSERT_EQ(reps * total_length, result_->value_data()->size());\n \n   int32_t length;\n   for (int i = 0; i < N * reps; ++i) {\ndiff --git a/cpp/src/arrow/builder.h b/cpp/src/arrow/builder.h\nindex fa9776f1c7..eea0abd008 100644\n--- a/cpp/src/arrow/builder.h\n+++ b/cpp/src/arrow/builder.h\n@@ -52,10 +52,13 @@ constexpr int64_t kListMaximumElements = std::numeric_limits<int32_t>::max() - 1\n constexpr int64_t kMinBuilderCapacity = 1 << 5;\n \n /// Base class for all data array builders.\n-//\n+///\n /// This class provides a facilities for incrementally building the null bitmap\n /// (see Append methods) and as a side effect the current number of slots and\n /// the null count.\n+///\n+/// \\note Users are expected to use builders as one of the concrete types below.\n+/// For example, ArrayBuilder* pointing to BinaryBuilder should be downcast before use.\n class ARROW_EXPORT ArrayBuilder {\n  public:\n   explicit ArrayBuilder(const std::shared_ptr<DataType>& type, MemoryPool* pool)\n@@ -79,16 +82,6 @@ class ARROW_EXPORT ArrayBuilder {\n   int64_t null_count() const { return null_count_; }\n   int64_t capacity() const { return capacity_; }\n \n-  /// Append to null bitmap\n-  Status AppendToBitmap(bool is_valid);\n-\n-  /// Vector append. Treat each zero byte as a null.   If valid_bytes is null\n-  /// assume all of length bits are valid.\n-  Status AppendToBitmap(const uint8_t* valid_bytes, int64_t length);\n-\n-  /// Set the next length bits to not null (i.e. valid).\n-  Status SetNotNull(int64_t length);\n-\n   /// \\brief Ensure that enough memory has been allocated to fit the indicated\n   /// number of total elements in the builder, including any that have already\n   /// been appended. Does not account for reallocations that may be due to\n@@ -130,8 +123,23 @@ class ARROW_EXPORT ArrayBuilder {\n \n   std::shared_ptr<DataType> type() const { return type_; }\n \n+ protected:\n+  ArrayBuilder() {}\n+\n+  /// Append to null bitmap\n+  Status AppendToBitmap(bool is_valid);\n+\n+  /// Vector append. Treat each zero byte as a null.   If valid_bytes is null\n+  /// assume all of length bits are valid.\n+  Status AppendToBitmap(const uint8_t* valid_bytes, int64_t length);\n+\n+  /// Set the next length bits to not null (i.e. valid).\n+  Status SetNotNull(int64_t length);\n+\n   // Unsafe operations (don't check capacity/don't resize)\n \n+  void UnsafeAppendNull() { UnsafeAppendToBitmap(false); }\n+\n   // Append to null bitmap, update the length\n   void UnsafeAppendToBitmap(bool is_valid) {\n     if (is_valid) {\n@@ -174,10 +182,14 @@ class ARROW_EXPORT ArrayBuilder {\n     length_ += std::distance(begin, end);\n   }\n \n-  void UnsafeAppendNull() { UnsafeAppendToBitmap(false); }\n+  // Vector append. Treat each zero byte as a nullzero. If valid_bytes is null\n+  // assume all of length bits are valid.\n+  void UnsafeAppendToBitmap(const uint8_t* valid_bytes, int64_t length);\n \n- protected:\n-  ArrayBuilder() {}\n+  void UnsafeAppendToBitmap(const std::vector<bool>& is_valid);\n+\n+  // Set the next length bits to not null (i.e. valid).\n+  void UnsafeSetNotNull(int64_t length);\n \n   std::shared_ptr<DataType> type_;\n   MemoryPool* pool_;\n@@ -194,15 +206,6 @@ class ARROW_EXPORT ArrayBuilder {\n   // Child value array builders. These are owned by this class\n   std::vector<std::unique_ptr<ArrayBuilder>> children_;\n \n-  // Vector append. Treat each zero byte as a nullzero. If valid_bytes is null\n-  // assume all of length bits are valid.\n-  void UnsafeAppendToBitmap(const uint8_t* valid_bytes, int64_t length);\n-\n-  void UnsafeAppendToBitmap(const std::vector<bool>& is_valid);\n-\n-  // Set the next length bits to not null (i.e. valid).\n-  void UnsafeSetNotNull(int64_t length);\n-\n  private:\n   ARROW_DISALLOW_COPY_AND_ASSIGN(ArrayBuilder);\n };\n@@ -370,6 +373,7 @@ class ARROW_EXPORT NumericBuilder : public PrimitiveBuilder<T> {\n           ARROW_MEMORY_POOL_DEFAULT)\n       : PrimitiveBuilder<T1>(TypeTraits<T1>::type_singleton(), pool) {}\n \n+  using ArrayBuilder::UnsafeAppendNull;\n   using PrimitiveBuilder<T>::AppendValues;\n   using PrimitiveBuilder<T>::Resize;\n   using PrimitiveBuilder<T>::Reserve;\n@@ -626,6 +630,7 @@ class ARROW_EXPORT BooleanBuilder : public ArrayBuilder {\n   explicit BooleanBuilder(const std::shared_ptr<DataType>& type, MemoryPool* pool);\n \n   using ArrayBuilder::Advance;\n+  using ArrayBuilder::UnsafeAppendNull;\n \n   /// Write nulls as uint8_t* (0 value indicates null) into pre-allocated memory\n   Status AppendNulls(const uint8_t* valid_bytes, int64_t length) {\n@@ -877,6 +882,12 @@ class ARROW_EXPORT BinaryBuilder : public ArrayBuilder {\n     UnsafeAppend(value.c_str(), static_cast<int32_t>(value.size()));\n   }\n \n+  void UnsafeAppendNull() {\n+    const int64_t num_bytes = value_data_builder_.length();\n+    offsets_builder_.UnsafeAppend(static_cast<int32_t>(num_bytes));\n+    UnsafeAppendToBitmap(false);\n+  }\n+\n   void Reset() override;\n   Status Resize(int64_t capacity) override;\n \ndiff --git a/cpp/src/arrow/compute/kernels/hash.cc b/cpp/src/arrow/compute/kernels/hash.cc\nindex fc95a3729b..c004429f86 100644\n--- a/cpp/src/arrow/compute/kernels/hash.cc\n+++ b/cpp/src/arrow/compute/kernels/hash.cc\n@@ -749,7 +749,7 @@ class DictEncodeImpl : public HashTableKernel<Type, DictEncodeImpl<Type>> {\n \n   Status Reserve(const int64_t length) { return indices_builder_.Reserve(length); }\n \n-  void ObserveNull() { indices_builder_.UnsafeAppendToBitmap(false); }\n+  void ObserveNull() { indices_builder_.UnsafeAppendNull(); }\n \n   void ObserveFound(const hash_slot_t slot) { indices_builder_.UnsafeAppend(slot); }\n \ndiff --git a/cpp/src/arrow/util/compression.cc b/cpp/src/arrow/util/compression.cc\nindex 7b13adecaf..4924c14c59 100644\n--- a/cpp/src/arrow/util/compression.cc\n+++ b/cpp/src/arrow/util/compression.cc\n@@ -61,47 +61,47 @@ Status Codec::Create(Compression::type codec_type, std::unique_ptr<Codec>* resul\n     case Compression::SNAPPY:\n #ifdef ARROW_WITH_SNAPPY\n       result->reset(new SnappyCodec());\n+      break;\n #else\n       return Status::NotImplemented(\"Snappy codec support not built\");\n #endif\n-      break;\n     case Compression::GZIP:\n #ifdef ARROW_WITH_ZLIB\n       result->reset(new GZipCodec());\n+      break;\n #else\n       return Status::NotImplemented(\"Gzip codec support not built\");\n #endif\n-      break;\n     case Compression::LZO:\n       return Status::NotImplemented(\"LZO codec not implemented\");\n     case Compression::BROTLI:\n #ifdef ARROW_WITH_BROTLI\n       result->reset(new BrotliCodec());\n+      break;\n #else\n       return Status::NotImplemented(\"Brotli codec support not built\");\n #endif\n-      break;\n     case Compression::LZ4:\n #ifdef ARROW_WITH_LZ4\n       result->reset(new Lz4Codec());\n+      break;\n #else\n       return Status::NotImplemented(\"LZ4 codec support not built\");\n #endif\n-      break;\n     case Compression::ZSTD:\n #ifdef ARROW_WITH_ZSTD\n       result->reset(new ZSTDCodec());\n+      break;\n #else\n       return Status::NotImplemented(\"ZSTD codec support not built\");\n #endif\n-      break;\n     case Compression::BZ2:\n #ifdef ARROW_WITH_BZ2\n       result->reset(new BZ2Codec());\n+      break;\n #else\n       return Status::NotImplemented(\"BZ2 codec support not built\");\n #endif\n-      break;\n     default:\n       return Status::Invalid(\"Unrecognized codec\");\n   }\n\n\n \n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-11-18T16:31:53.737+0000",
                    "updated": "2018-11-18T16:31:53.737+0000",
                    "started": "2018-11-18T16:31:53.736+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "167246",
                    "issueId": "13198461"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
            "id": "1",
            "description": "A problem which impairs or prevents the functions of the product.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
            "name": "Bug",
            "subtask": false,
            "avatarId": 21133
        },
        "timespent": 10800,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@5a89c063[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@2c956b6d[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@4f0973b4[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@48c0a73b[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@471a4cd0[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@25bc421c[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@21ac11cc[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@6c9893bd[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@79713e32[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@3e9a3fa2[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@7ff96bcc[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@57d41af5[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 10800,
        "customfield_12312520": null,
        "customfield_12312521": "Sun Nov 18 16:31:44 UTC 2018",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2018-11-18T16:31:44.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-3793/watchers",
            "watchCount": 1,
            "isWatching": false
        },
        "created": "2018-11-14T21:44:20.000+0000",
        "updated": "2018-11-18T16:31:57.000+0000",
        "timeoriginalestimate": null,
        "description": "In [TestScalarAppendUnsafe|https://github.com/apache/arrow/blob/56e72ba09c3d886c6a5aeb11fb1642af13819f93/cpp/src/arrow/array-test.cc#L1497],\u00a0AppendNull is called to modify the bitmask which is not unsafe- it reserves at least one more element. UnsafeAppendNull should be used instead.\r\n\r\nSince PoolBuffers round their capacities up to multiples of 64 bytes, no buffer is ever in danger of overflowing in this test anyway. More repetitions should be used so that the test will fail if insufficient storage is allocated. More storage should be allocated in the test, too- currently only a single iteration's worth is allocated.",
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "3h",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 10800
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[C++] TestScalarAppendUnsafe is not testing unsafe appends",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13198461/comment/16690953",
                    "id": "16690953",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "Issue resolved by pull request 2977\n[https://github.com/apache/arrow/pull/2977]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2018-11-18T16:31:44.709+0000",
                    "updated": "2018-11-18T16:31:44.709+0000"
                }
            ],
            "maxResults": 1,
            "total": 1,
            "startAt": 0
        },
        "customfield_12311820": "0|s00i68:",
        "customfield_12314139": null
    }
}