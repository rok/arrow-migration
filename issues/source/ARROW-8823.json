{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13305394",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13305394",
    "key": "ARROW-8823",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12350591",
                "id": "12350591",
                "description": "",
                "name": "7.0.0",
                "archived": false,
                "released": true,
                "releaseDate": "2022-02-03"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "name": "Major",
            "id": "3"
        },
        "labels": [
            "good-first-issue",
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=ahmetuyar",
            "name": "ahmetuyar",
            "key": "JIRAUSER280949",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34044",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34044",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34044",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34044"
            },
            "displayName": "Ahmet Uyar",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12328935",
                "id": "12328935",
                "name": "C++"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
            "name": "wesm",
            "key": "wesmckinn",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
            },
            "displayName": "Wes McKinney",
            "active": true,
            "timeZone": "America/New_York"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
            "name": "wesm",
            "key": "wesmckinn",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
            },
            "displayName": "Wes McKinney",
            "active": true,
            "timeZone": "America/New_York"
        },
        "aggregateprogress": {
            "progress": 13200,
            "total": 13200,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 13200,
            "total": 13200,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-8823/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 22,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13305394/worklog/691192",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "github-actions[bot] commented on pull request #11872:\nURL: https://github.com/apache/arrow/pull/11872#issuecomment-986944065\n\n\n   https://issues.apache.org/jira/browse/ARROW-8823\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-06T16:34:10.202+0000",
                    "updated": "2021-12-06T16:34:10.202+0000",
                    "started": "2021-12-06T16:34:10.202+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "691192",
                    "issueId": "13305394"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13305394/worklog/691193",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "github-actions[bot] commented on pull request #11872:\nURL: https://github.com/apache/arrow/pull/11872#issuecomment-986944092\n\n\n   :warning: Ticket **has not been started in JIRA**, please click 'Start Progress'.\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-06T16:34:33.469+0000",
                    "updated": "2021-12-06T16:34:33.469+0000",
                    "started": "2021-12-06T16:34:33.469+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "691193",
                    "issueId": "13305394"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13305394/worklog/691198",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ahmet-uyar commented on a change in pull request #11872:\nURL: https://github.com/apache/arrow/pull/11872#discussion_r763176858\n\n\n\n##########\nFile path: cpp/src/arrow/ipc/writer.h\n##########\n@@ -75,6 +76,19 @@ struct WriteStats {\n   /// Number of replaced dictionaries (i.e. where a dictionary batch replaces\n   /// an existing dictionary with an unrelated new dictionary).\n   int64_t num_replaced_dictionaries = 0;\n+\n+  /// initial and serialized (may be compressed) body lengths for record batches\n+  /// these values show the total sizes of all record batch body lengths\n+  int64_t raw_body_length = 0;\n+  int64_t serialized_body_length = 0;\n\nReview comment:\n       Sometimes it is not compressed, only serialized. Should we name it as total_serialized_body_size?\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-06T16:38:20.694+0000",
                    "updated": "2021-12-06T16:38:20.694+0000",
                    "started": "2021-12-06T16:38:20.694+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "691198",
                    "issueId": "13305394"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13305394/worklog/691203",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on a change in pull request #11872:\nURL: https://github.com/apache/arrow/pull/11872#discussion_r763180315\n\n\n\n##########\nFile path: cpp/src/arrow/ipc/writer.h\n##########\n@@ -75,6 +76,19 @@ struct WriteStats {\n   /// Number of replaced dictionaries (i.e. where a dictionary batch replaces\n   /// an existing dictionary with an unrelated new dictionary).\n   int64_t num_replaced_dictionaries = 0;\n+\n+  /// initial and serialized (may be compressed) body lengths for record batches\n+  /// these values show the total sizes of all record batch body lengths\n+  int64_t raw_body_length = 0;\n+  int64_t serialized_body_length = 0;\n\nReview comment:\n       Yes, why not.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-06T16:42:28.471+0000",
                    "updated": "2021-12-06T16:42:28.471+0000",
                    "started": "2021-12-06T16:42:28.471+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "691203",
                    "issueId": "13305394"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13305394/worklog/691226",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ahmet-uyar commented on a change in pull request #11872:\nURL: https://github.com/apache/arrow/pull/11872#discussion_r763209776\n\n\n\n##########\nFile path: cpp/src/arrow/ipc/writer.h\n##########\n@@ -75,6 +76,19 @@ struct WriteStats {\n   /// Number of replaced dictionaries (i.e. where a dictionary batch replaces\n   /// an existing dictionary with an unrelated new dictionary).\n   int64_t num_replaced_dictionaries = 0;\n+\n+  /// initial and serialized (may be compressed) body lengths for record batches\n+  /// these values show the total sizes of all record batch body lengths\n\nReview comment:\n       yes\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-06T17:16:50.159+0000",
                    "updated": "2021-12-06T17:16:50.159+0000",
                    "started": "2021-12-06T17:16:50.159+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "691226",
                    "issueId": "13305394"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13305394/worklog/691238",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ahmet-uyar commented on a change in pull request #11872:\nURL: https://github.com/apache/arrow/pull/11872#discussion_r763221776\n\n\n\n##########\nFile path: cpp/src/arrow/ipc/writer.h\n##########\n@@ -75,6 +76,19 @@ struct WriteStats {\n   /// Number of replaced dictionaries (i.e. where a dictionary batch replaces\n   /// an existing dictionary with an unrelated new dictionary).\n   int64_t num_replaced_dictionaries = 0;\n+\n+  /// initial and serialized (may be compressed) body lengths for record batches\n+  /// these values show the total sizes of all record batch body lengths\n+  int64_t raw_body_length = 0;\n+  int64_t serialized_body_length = 0;\n+\n+  /// compression ratio for the body of all record batches serialized\n+  /// this is equivalent to:\n+  ///    serialized_body_length / raw_body_length\n\nReview comment:\n       removed compression ratio from WriteStats. \n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-06T17:31:50.932+0000",
                    "updated": "2021-12-06T17:31:50.932+0000",
                    "started": "2021-12-06T17:31:50.932+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "691238",
                    "issueId": "13305394"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13305394/worklog/691239",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ahmet-uyar commented on a change in pull request #11872:\nURL: https://github.com/apache/arrow/pull/11872#discussion_r763222328\n\n\n\n##########\nFile path: cpp/src/arrow/ipc/read_write_test.cc\n##########\n@@ -1727,6 +1727,52 @@ TEST(TestIpcFileFormat, FooterMetaData) {\n   ASSERT_TRUE(out_metadata->Equals(*metadata));\n }\n \n+TEST_F(TestWriteRecordBatch, CompressionRatio) {\n+  // ARROW-8823: Calculating the compression ratio\n+  FileWriterHelper helper;\n+  IpcWriteOptions write_options1 = IpcWriteOptions::Defaults();\n+  IpcWriteOptions write_options2 = IpcWriteOptions::Defaults();\n+  ASSERT_OK_AND_ASSIGN(write_options2.codec, util::Codec::Create(Compression::LZ4_FRAME));\n+\n+  // pre-computed compression ratios for record batches with Compression::LZ4_FRAME\n+  std::vector<float> comp_ratios{1.0f, 0.64f, 0.79924363f};\n\nReview comment:\n       added raw record batch sizes instead. \n\n##########\nFile path: cpp/src/arrow/ipc/read_write_test.cc\n##########\n@@ -1727,6 +1727,52 @@ TEST(TestIpcFileFormat, FooterMetaData) {\n   ASSERT_TRUE(out_metadata->Equals(*metadata));\n }\n \n+TEST_F(TestWriteRecordBatch, CompressionRatio) {\n+  // ARROW-8823: Calculating the compression ratio\n+  FileWriterHelper helper;\n+  IpcWriteOptions write_options1 = IpcWriteOptions::Defaults();\n+  IpcWriteOptions write_options2 = IpcWriteOptions::Defaults();\n\nReview comment:\n       done.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-06T17:32:47.539+0000",
                    "updated": "2021-12-06T17:32:47.539+0000",
                    "started": "2021-12-06T17:32:47.539+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "691239",
                    "issueId": "13305394"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13305394/worklog/691242",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ahmet-uyar commented on a change in pull request #11872:\nURL: https://github.com/apache/arrow/pull/11872#discussion_r763225907\n\n\n\n##########\nFile path: cpp/src/arrow/ipc/read_write_test.cc\n##########\n@@ -1727,6 +1727,52 @@ TEST(TestIpcFileFormat, FooterMetaData) {\n   ASSERT_TRUE(out_metadata->Equals(*metadata));\n }\n \n+TEST_F(TestWriteRecordBatch, CompressionRatio) {\n+  // ARROW-8823: Calculating the compression ratio\n+  FileWriterHelper helper;\n+  IpcWriteOptions write_options1 = IpcWriteOptions::Defaults();\n+  IpcWriteOptions write_options2 = IpcWriteOptions::Defaults();\n+  ASSERT_OK_AND_ASSIGN(write_options2.codec, util::Codec::Create(Compression::LZ4_FRAME));\n+\n+  // pre-computed compression ratios for record batches with Compression::LZ4_FRAME\n+  std::vector<float> comp_ratios{1.0f, 0.64f, 0.79924363f};\n+\n+  std::vector<std::shared_ptr<RecordBatch>> batches(3);\n+  // empty record batch\n+  ASSERT_OK(MakeIntBatchSized(0, &batches[0]));\n+  // record batch with int values\n+  ASSERT_OK(MakeIntBatchSized(2000, &batches[1], 100));\n+\n+  // record batch with DictionaryArray\n+  random::RandomArrayGenerator rg(/*seed=*/0);\n+  int64_t length = 500;\n+  int dict_size = 50;\n+  std::shared_ptr<Array> dict = rg.String(dict_size, /*min_length=*/5, /*max_length=*/5, /*null_probability=*/0);\n+  std::shared_ptr<Array> indices = rg.Int32(length, /*min=*/0, /*max=*/dict_size - 1, /*null_probability=*/0.1);\n+  auto dict_type = dictionary(int32(), utf8());\n+  auto dict_field = field(\"f1\", dict_type);\n+  ASSERT_OK_AND_ASSIGN(auto dict_array,\n+                       DictionaryArray::FromArrays(dict_type, indices, dict));\n+\n+  auto schema = ::arrow::schema({field(\"f0\", utf8()), dict_field});\n+  batches[2] =\n+    RecordBatch::Make(schema, length, {rg.String(500, 0, 10, 0.1), dict_array});\n+\n+  for(size_t i = 0; i < batches.size(); ++i) {\n\nReview comment:\n       Done as suggested. \r\n   But there is a slight difference. When a record-batch is serialized, buffer-sizes complemented to the multiple of 8. So when there is no compression, serialized record batch sizes can be slightly larger. In that case, raw-sizes are less than or equal to the serialized size. \r\n   \r\n   In addition, when compression is used, if there is very little data (a few hundred bytes maybe), compressed size can actually be larger than the raw size. But I have not put this case in to the test case. So this is not a problem. \r\n   \n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-06T17:37:21.129+0000",
                    "updated": "2021-12-06T17:37:21.129+0000",
                    "started": "2021-12-06T17:37:21.129+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "691242",
                    "issueId": "13305394"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13305394/worklog/691251",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on a change in pull request #11872:\nURL: https://github.com/apache/arrow/pull/11872#discussion_r763242124\n\n\n\n##########\nFile path: cpp/src/arrow/ipc/read_write_test.cc\n##########\n@@ -1727,6 +1727,52 @@ TEST(TestIpcFileFormat, FooterMetaData) {\n   ASSERT_TRUE(out_metadata->Equals(*metadata));\n }\n \n+TEST_F(TestWriteRecordBatch, CompressionRatio) {\n+  // ARROW-8823: Calculating the compression ratio\n+  FileWriterHelper helper;\n+  IpcWriteOptions write_options1 = IpcWriteOptions::Defaults();\n+  IpcWriteOptions write_options2 = IpcWriteOptions::Defaults();\n+  ASSERT_OK_AND_ASSIGN(write_options2.codec, util::Codec::Create(Compression::LZ4_FRAME));\n+\n+  // pre-computed compression ratios for record batches with Compression::LZ4_FRAME\n+  std::vector<float> comp_ratios{1.0f, 0.64f, 0.79924363f};\n+\n+  std::vector<std::shared_ptr<RecordBatch>> batches(3);\n+  // empty record batch\n+  ASSERT_OK(MakeIntBatchSized(0, &batches[0]));\n+  // record batch with int values\n+  ASSERT_OK(MakeIntBatchSized(2000, &batches[1], 100));\n+\n+  // record batch with DictionaryArray\n+  random::RandomArrayGenerator rg(/*seed=*/0);\n+  int64_t length = 500;\n+  int dict_size = 50;\n+  std::shared_ptr<Array> dict = rg.String(dict_size, /*min_length=*/5, /*max_length=*/5, /*null_probability=*/0);\n+  std::shared_ptr<Array> indices = rg.Int32(length, /*min=*/0, /*max=*/dict_size - 1, /*null_probability=*/0.1);\n+  auto dict_type = dictionary(int32(), utf8());\n+  auto dict_field = field(\"f1\", dict_type);\n+  ASSERT_OK_AND_ASSIGN(auto dict_array,\n+                       DictionaryArray::FromArrays(dict_type, indices, dict));\n+\n+  auto schema = ::arrow::schema({field(\"f0\", utf8()), dict_field});\n+  batches[2] =\n+    RecordBatch::Make(schema, length, {rg.String(500, 0, 10, 0.1), dict_array});\n+\n+  for(size_t i = 0; i < batches.size(); ++i) {\n\nReview comment:\n       Ah, you're right, the padding can make the size slightly larger. Can you add a comment explaining this?\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-06T17:58:21.217+0000",
                    "updated": "2021-12-06T17:58:21.217+0000",
                    "started": "2021-12-06T17:58:21.217+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "691251",
                    "issueId": "13305394"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13305394/worklog/691285",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ahmet-uyar commented on a change in pull request #11872:\nURL: https://github.com/apache/arrow/pull/11872#discussion_r763271175\n\n\n\n##########\nFile path: cpp/src/arrow/ipc/read_write_test.cc\n##########\n@@ -1727,6 +1727,52 @@ TEST(TestIpcFileFormat, FooterMetaData) {\n   ASSERT_TRUE(out_metadata->Equals(*metadata));\n }\n \n+TEST_F(TestWriteRecordBatch, CompressionRatio) {\n+  // ARROW-8823: Calculating the compression ratio\n+  FileWriterHelper helper;\n+  IpcWriteOptions write_options1 = IpcWriteOptions::Defaults();\n+  IpcWriteOptions write_options2 = IpcWriteOptions::Defaults();\n+  ASSERT_OK_AND_ASSIGN(write_options2.codec, util::Codec::Create(Compression::LZ4_FRAME));\n+\n+  // pre-computed compression ratios for record batches with Compression::LZ4_FRAME\n+  std::vector<float> comp_ratios{1.0f, 0.64f, 0.79924363f};\n+\n+  std::vector<std::shared_ptr<RecordBatch>> batches(3);\n+  // empty record batch\n+  ASSERT_OK(MakeIntBatchSized(0, &batches[0]));\n+  // record batch with int values\n+  ASSERT_OK(MakeIntBatchSized(2000, &batches[1], 100));\n+\n+  // record batch with DictionaryArray\n+  random::RandomArrayGenerator rg(/*seed=*/0);\n+  int64_t length = 500;\n+  int dict_size = 50;\n+  std::shared_ptr<Array> dict = rg.String(dict_size, /*min_length=*/5, /*max_length=*/5, /*null_probability=*/0);\n+  std::shared_ptr<Array> indices = rg.Int32(length, /*min=*/0, /*max=*/dict_size - 1, /*null_probability=*/0.1);\n+  auto dict_type = dictionary(int32(), utf8());\n+  auto dict_field = field(\"f1\", dict_type);\n+  ASSERT_OK_AND_ASSIGN(auto dict_array,\n+                       DictionaryArray::FromArrays(dict_type, indices, dict));\n+\n+  auto schema = ::arrow::schema({field(\"f0\", utf8()), dict_field});\n+  batches[2] =\n+    RecordBatch::Make(schema, length, {rg.String(500, 0, 10, 0.1), dict_array});\n+\n+  for(size_t i = 0; i < batches.size(); ++i) {\n\nReview comment:\n       Done.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-06T18:36:51.515+0000",
                    "updated": "2021-12-06T18:36:51.515+0000",
                    "started": "2021-12-06T18:36:51.514+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "691285",
                    "issueId": "13305394"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13305394/worklog/691734",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on a change in pull request #11872:\nURL: https://github.com/apache/arrow/pull/11872#discussion_r763975968\n\n\n\n##########\nFile path: cpp/src/arrow/ipc/read_write_test.cc\n##########\n@@ -1727,6 +1727,61 @@ TEST(TestIpcFileFormat, FooterMetaData) {\n   ASSERT_TRUE(out_metadata->Equals(*metadata));\n }\n \n+TEST_F(TestWriteRecordBatch, CompressionRatio) {\n+  // ARROW-8823: Calculating the compression ratio\n+  FileWriterHelper helper;\n+  IpcWriteOptions options_uncompressed = IpcWriteOptions::Defaults();\n+\n+  std::vector<std::shared_ptr<RecordBatch>> batches(3);\n+  // empty record batch\n+  ASSERT_OK(MakeIntBatchSized(0, &batches[0]));\n+  // record batch with int values\n+  ASSERT_OK(MakeIntBatchSized(2000, &batches[1], 100));\n+\n+  // record batch with DictionaryArray\n+  random::RandomArrayGenerator rg(/*seed=*/0);\n+  int64_t length = 500;\n+  int dict_size = 50;\n+  std::shared_ptr<Array> dict =\n+      rg.String(dict_size, /*min_length=*/5, /*max_length=*/5, /*null_probability=*/0);\n+  std::shared_ptr<Array> indices =\n+      rg.Int32(length, /*min=*/0, /*max=*/dict_size - 1, /*null_probability=*/0.1);\n+  auto dict_type = dictionary(int32(), utf8());\n+  auto dict_field = field(\"f1\", dict_type);\n+  ASSERT_OK_AND_ASSIGN(auto dict_array,\n+                       DictionaryArray::FromArrays(dict_type, indices, dict));\n+\n+  auto schema = ::arrow::schema({field(\"f0\", utf8()), dict_field});\n+  batches[2] =\n+      RecordBatch::Make(schema, length, {rg.String(500, 0, 10, 0.1), dict_array});\n+\n+  for (size_t i = 0; i < batches.size(); ++i) {\n+    // without compression\n+    ASSERT_OK(helper.Init(batches[i]->schema(), options_uncompressed));\n+    ASSERT_OK(helper.WriteBatch(batches[i]));\n+    ASSERT_OK(helper.Finish());\n+    // padding can make serialized data slightly larger than the raw data size\n+    // when no compression is used\n+    ASSERT_LE(helper.writer_->stats().total_raw_body_size,\n+              helper.writer_->stats().total_serialized_body_size);\n+\n+    if (!util::Codec::IsAvailable(Compression::LZ4_FRAME)) {\n+      continue;\n+    }\n+\n+    IpcWriteOptions options_compressed = IpcWriteOptions::Defaults();\n+    ASSERT_OK_AND_ASSIGN(options_compressed.codec,\n+                         util::Codec::Create(Compression::LZ4_FRAME));\n+\n+    // with compression\n+    ASSERT_OK(helper.Init(batches[i]->schema(), options_compressed));\n+    ASSERT_OK(helper.WriteBatch(batches[i]));\n+    ASSERT_OK(helper.Finish());\n+    ASSERT_GE(helper.writer_->stats().total_raw_body_size,\n+              helper.writer_->stats().total_serialized_body_size);\n\nReview comment:\n       Can this be `ASSERT_GT` instead or will it fail the test?\n\n##########\nFile path: cpp/src/arrow/ipc/read_write_test.cc\n##########\n@@ -1727,6 +1727,61 @@ TEST(TestIpcFileFormat, FooterMetaData) {\n   ASSERT_TRUE(out_metadata->Equals(*metadata));\n }\n \n+TEST_F(TestWriteRecordBatch, CompressionRatio) {\n+  // ARROW-8823: Calculating the compression ratio\n\nReview comment:\n       Nit: rename this test and update the comment now that we don't compute a ratio anymore?\n\n##########\nFile path: cpp/src/arrow/ipc/writer.h\n##########\n@@ -57,7 +57,8 @@ struct IpcPayload {\n   MessageType type = MessageType::NONE;\n   std::shared_ptr<Buffer> metadata;\n   std::vector<std::shared_ptr<Buffer>> body_buffers;\n-  int64_t body_length = 0;\n+  int64_t body_length = 0;      // serialized body length (maybe compressed)\n+  int64_t raw_body_length = 0;  // initial uncompressed body_length\n\nReview comment:\n       ```suggestion\r\n     int64_t body_length = 0;      // serialized body length (padded, maybe compressed)\r\n     int64_t raw_body_length = 0;  // initial uncompressed body length\r\n   ```\n\n##########\nFile path: cpp/src/arrow/ipc/writer.h\n##########\n@@ -75,6 +76,11 @@ struct WriteStats {\n   /// Number of replaced dictionaries (i.e. where a dictionary batch replaces\n   /// an existing dictionary with an unrelated new dictionary).\n   int64_t num_replaced_dictionaries = 0;\n+\n+  /// initial and serialized (may be compressed) body sizes in bytes for record batches\n+  /// these values show the total sizes of all record batch body lengths\n\nReview comment:\n       ```suggestion\r\n     /// Total size in bytes of record batches emitted.\r\n     /// The \"raw\" size counts the original buffer sizes, while the \"serialized\" size\r\n     /// includes padding and (optionally) compression.\r\n   ```\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-07T13:14:31.385+0000",
                    "updated": "2021-12-07T13:14:31.385+0000",
                    "started": "2021-12-07T13:14:31.385+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "691734",
                    "issueId": "13305394"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13305394/worklog/691799",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ahmet-uyar commented on a change in pull request #11872:\nURL: https://github.com/apache/arrow/pull/11872#discussion_r764079908\n\n\n\n##########\nFile path: cpp/src/arrow/ipc/read_write_test.cc\n##########\n@@ -1727,6 +1727,61 @@ TEST(TestIpcFileFormat, FooterMetaData) {\n   ASSERT_TRUE(out_metadata->Equals(*metadata));\n }\n \n+TEST_F(TestWriteRecordBatch, CompressionRatio) {\n+  // ARROW-8823: Calculating the compression ratio\n+  FileWriterHelper helper;\n+  IpcWriteOptions options_uncompressed = IpcWriteOptions::Defaults();\n+\n+  std::vector<std::shared_ptr<RecordBatch>> batches(3);\n+  // empty record batch\n+  ASSERT_OK(MakeIntBatchSized(0, &batches[0]));\n+  // record batch with int values\n+  ASSERT_OK(MakeIntBatchSized(2000, &batches[1], 100));\n+\n+  // record batch with DictionaryArray\n+  random::RandomArrayGenerator rg(/*seed=*/0);\n+  int64_t length = 500;\n+  int dict_size = 50;\n+  std::shared_ptr<Array> dict =\n+      rg.String(dict_size, /*min_length=*/5, /*max_length=*/5, /*null_probability=*/0);\n+  std::shared_ptr<Array> indices =\n+      rg.Int32(length, /*min=*/0, /*max=*/dict_size - 1, /*null_probability=*/0.1);\n+  auto dict_type = dictionary(int32(), utf8());\n+  auto dict_field = field(\"f1\", dict_type);\n+  ASSERT_OK_AND_ASSIGN(auto dict_array,\n+                       DictionaryArray::FromArrays(dict_type, indices, dict));\n+\n+  auto schema = ::arrow::schema({field(\"f0\", utf8()), dict_field});\n+  batches[2] =\n+      RecordBatch::Make(schema, length, {rg.String(500, 0, 10, 0.1), dict_array});\n+\n+  for (size_t i = 0; i < batches.size(); ++i) {\n+    // without compression\n+    ASSERT_OK(helper.Init(batches[i]->schema(), options_uncompressed));\n+    ASSERT_OK(helper.WriteBatch(batches[i]));\n+    ASSERT_OK(helper.Finish());\n+    // padding can make serialized data slightly larger than the raw data size\n+    // when no compression is used\n+    ASSERT_LE(helper.writer_->stats().total_raw_body_size,\n+              helper.writer_->stats().total_serialized_body_size);\n+\n+    if (!util::Codec::IsAvailable(Compression::LZ4_FRAME)) {\n+      continue;\n+    }\n+\n+    IpcWriteOptions options_compressed = IpcWriteOptions::Defaults();\n+    ASSERT_OK_AND_ASSIGN(options_compressed.codec,\n+                         util::Codec::Create(Compression::LZ4_FRAME));\n+\n+    // with compression\n+    ASSERT_OK(helper.Init(batches[i]->schema(), options_compressed));\n+    ASSERT_OK(helper.WriteBatch(batches[i]));\n+    ASSERT_OK(helper.Finish());\n+    ASSERT_GE(helper.writer_->stats().total_raw_body_size,\n+              helper.writer_->stats().total_serialized_body_size);\n\nReview comment:\n       equality is needed, because one of the record batches has zero rows and both total_raw_body_size and total_serialized_body_size are zero. \n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-07T15:01:05.264+0000",
                    "updated": "2021-12-07T15:01:05.264+0000",
                    "started": "2021-12-07T15:01:05.264+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "691799",
                    "issueId": "13305394"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13305394/worklog/691800",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ahmet-uyar commented on a change in pull request #11872:\nURL: https://github.com/apache/arrow/pull/11872#discussion_r764080561\n\n\n\n##########\nFile path: cpp/src/arrow/ipc/read_write_test.cc\n##########\n@@ -1727,6 +1727,61 @@ TEST(TestIpcFileFormat, FooterMetaData) {\n   ASSERT_TRUE(out_metadata->Equals(*metadata));\n }\n \n+TEST_F(TestWriteRecordBatch, CompressionRatio) {\n+  // ARROW-8823: Calculating the compression ratio\n+  FileWriterHelper helper;\n+  IpcWriteOptions options_uncompressed = IpcWriteOptions::Defaults();\n+\n+  std::vector<std::shared_ptr<RecordBatch>> batches(3);\n+  // empty record batch\n+  ASSERT_OK(MakeIntBatchSized(0, &batches[0]));\n+  // record batch with int values\n+  ASSERT_OK(MakeIntBatchSized(2000, &batches[1], 100));\n+\n+  // record batch with DictionaryArray\n+  random::RandomArrayGenerator rg(/*seed=*/0);\n+  int64_t length = 500;\n+  int dict_size = 50;\n+  std::shared_ptr<Array> dict =\n+      rg.String(dict_size, /*min_length=*/5, /*max_length=*/5, /*null_probability=*/0);\n+  std::shared_ptr<Array> indices =\n+      rg.Int32(length, /*min=*/0, /*max=*/dict_size - 1, /*null_probability=*/0.1);\n+  auto dict_type = dictionary(int32(), utf8());\n+  auto dict_field = field(\"f1\", dict_type);\n+  ASSERT_OK_AND_ASSIGN(auto dict_array,\n+                       DictionaryArray::FromArrays(dict_type, indices, dict));\n+\n+  auto schema = ::arrow::schema({field(\"f0\", utf8()), dict_field});\n+  batches[2] =\n+      RecordBatch::Make(schema, length, {rg.String(500, 0, 10, 0.1), dict_array});\n+\n+  for (size_t i = 0; i < batches.size(); ++i) {\n+    // without compression\n+    ASSERT_OK(helper.Init(batches[i]->schema(), options_uncompressed));\n+    ASSERT_OK(helper.WriteBatch(batches[i]));\n+    ASSERT_OK(helper.Finish());\n+    // padding can make serialized data slightly larger than the raw data size\n+    // when no compression is used\n+    ASSERT_LE(helper.writer_->stats().total_raw_body_size,\n+              helper.writer_->stats().total_serialized_body_size);\n+\n+    if (!util::Codec::IsAvailable(Compression::LZ4_FRAME)) {\n+      continue;\n+    }\n+\n+    IpcWriteOptions options_compressed = IpcWriteOptions::Defaults();\n+    ASSERT_OK_AND_ASSIGN(options_compressed.codec,\n+                         util::Codec::Create(Compression::LZ4_FRAME));\n+\n+    // with compression\n+    ASSERT_OK(helper.Init(batches[i]->schema(), options_compressed));\n+    ASSERT_OK(helper.WriteBatch(batches[i]));\n+    ASSERT_OK(helper.Finish());\n+    ASSERT_GE(helper.writer_->stats().total_raw_body_size,\n+              helper.writer_->stats().total_serialized_body_size);\n\nReview comment:\n       equality is needed, because one of the record batches has zero rows and both total_raw_body_size and total_serialized_body_size are zero. \n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-07T15:01:38.299+0000",
                    "updated": "2021-12-07T15:01:38.299+0000",
                    "started": "2021-12-07T15:01:38.299+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "691800",
                    "issueId": "13305394"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13305394/worklog/691829",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ahmet-uyar commented on a change in pull request #11872:\nURL: https://github.com/apache/arrow/pull/11872#discussion_r764080561\n\n\n\n##########\nFile path: cpp/src/arrow/ipc/read_write_test.cc\n##########\n@@ -1727,6 +1727,61 @@ TEST(TestIpcFileFormat, FooterMetaData) {\n   ASSERT_TRUE(out_metadata->Equals(*metadata));\n }\n \n+TEST_F(TestWriteRecordBatch, CompressionRatio) {\n+  // ARROW-8823: Calculating the compression ratio\n+  FileWriterHelper helper;\n+  IpcWriteOptions options_uncompressed = IpcWriteOptions::Defaults();\n+\n+  std::vector<std::shared_ptr<RecordBatch>> batches(3);\n+  // empty record batch\n+  ASSERT_OK(MakeIntBatchSized(0, &batches[0]));\n+  // record batch with int values\n+  ASSERT_OK(MakeIntBatchSized(2000, &batches[1], 100));\n+\n+  // record batch with DictionaryArray\n+  random::RandomArrayGenerator rg(/*seed=*/0);\n+  int64_t length = 500;\n+  int dict_size = 50;\n+  std::shared_ptr<Array> dict =\n+      rg.String(dict_size, /*min_length=*/5, /*max_length=*/5, /*null_probability=*/0);\n+  std::shared_ptr<Array> indices =\n+      rg.Int32(length, /*min=*/0, /*max=*/dict_size - 1, /*null_probability=*/0.1);\n+  auto dict_type = dictionary(int32(), utf8());\n+  auto dict_field = field(\"f1\", dict_type);\n+  ASSERT_OK_AND_ASSIGN(auto dict_array,\n+                       DictionaryArray::FromArrays(dict_type, indices, dict));\n+\n+  auto schema = ::arrow::schema({field(\"f0\", utf8()), dict_field});\n+  batches[2] =\n+      RecordBatch::Make(schema, length, {rg.String(500, 0, 10, 0.1), dict_array});\n+\n+  for (size_t i = 0; i < batches.size(); ++i) {\n+    // without compression\n+    ASSERT_OK(helper.Init(batches[i]->schema(), options_uncompressed));\n+    ASSERT_OK(helper.WriteBatch(batches[i]));\n+    ASSERT_OK(helper.Finish());\n+    // padding can make serialized data slightly larger than the raw data size\n+    // when no compression is used\n+    ASSERT_LE(helper.writer_->stats().total_raw_body_size,\n+              helper.writer_->stats().total_serialized_body_size);\n+\n+    if (!util::Codec::IsAvailable(Compression::LZ4_FRAME)) {\n+      continue;\n+    }\n+\n+    IpcWriteOptions options_compressed = IpcWriteOptions::Defaults();\n+    ASSERT_OK_AND_ASSIGN(options_compressed.codec,\n+                         util::Codec::Create(Compression::LZ4_FRAME));\n+\n+    // with compression\n+    ASSERT_OK(helper.Init(batches[i]->schema(), options_compressed));\n+    ASSERT_OK(helper.WriteBatch(batches[i]));\n+    ASSERT_OK(helper.Finish());\n+    ASSERT_GE(helper.writer_->stats().total_raw_body_size,\n+              helper.writer_->stats().total_serialized_body_size);\n\nReview comment:\n       equality is needed, because one of the record batches has zero rows and both total_raw_body_size and total_serialized_body_size are zero. \n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-07T15:36:22.354+0000",
                    "updated": "2021-12-07T15:36:22.354+0000",
                    "started": "2021-12-07T15:36:22.353+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "691829",
                    "issueId": "13305394"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13305394/worklog/691863",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ahmet-uyar commented on a change in pull request #11872:\nURL: https://github.com/apache/arrow/pull/11872#discussion_r764186800\n\n\n\n##########\nFile path: cpp/src/arrow/ipc/read_write_test.cc\n##########\n@@ -1727,6 +1727,61 @@ TEST(TestIpcFileFormat, FooterMetaData) {\n   ASSERT_TRUE(out_metadata->Equals(*metadata));\n }\n \n+TEST_F(TestWriteRecordBatch, CompressionRatio) {\n+  // ARROW-8823: Calculating the compression ratio\n\nReview comment:\n       Done.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-07T16:53:35.704+0000",
                    "updated": "2021-12-07T16:53:35.704+0000",
                    "started": "2021-12-07T16:53:35.703+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "691863",
                    "issueId": "13305394"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13305394/worklog/692004",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou closed pull request #11872:\nURL: https://github.com/apache/arrow/pull/11872\n\n\n   \n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-07T19:47:04.294+0000",
                    "updated": "2021-12-07T19:47:04.294+0000",
                    "started": "2021-12-07T19:47:04.294+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "692004",
                    "issueId": "13305394"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13305394/worklog/692009",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ursabot commented on pull request #11872:\nURL: https://github.com/apache/arrow/pull/11872#issuecomment-988219779\n\n\n   Benchmark runs are scheduled for baseline = 9cf4275a19c994879172e5d3b03ade9a96a10721 and contender = 77722d990c28e22a56847b0dc49a79b83a6c1a45. 77722d990c28e22a56847b0dc49a79b83a6c1a45 is a master commit associated with this PR. Results will be available as each benchmark for each run completes.\n   Conbench compare runs links:\n   [Scheduled] [ec2-t3-xlarge-us-east-2](https://conbench.ursa.dev/compare/runs/9b40d0890b27427383b416d8e62d5dbe...9f33767f1d224b4f9e4fa66f997217e2/)\n   [Scheduled] [ursa-i9-9960x](https://conbench.ursa.dev/compare/runs/ec45e9e0b35445539b2cfc59d56ce805...9bc1f30b5c56435e8bcae394642af765/)\n   [Scheduled] [ursa-thinkcentre-m75q](https://conbench.ursa.dev/compare/runs/84909d0fddc64ab7b28a6f223c05c6c4...c57b1b3dc71d4109903ce7a87c31ae3f/)\n   Supported benchmarks:\n   ec2-t3-xlarge-us-east-2: Supported benchmark langs: Python. Runs only benchmarks with cloud = True\n   ursa-i9-9960x: Supported benchmark langs: Python, R, JavaScript\n   ursa-thinkcentre-m75q: Supported benchmark langs: C++, Java\n   \n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-07T19:51:19.408+0000",
                    "updated": "2021-12-07T19:51:19.408+0000",
                    "started": "2021-12-07T19:51:19.408+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "692009",
                    "issueId": "13305394"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13305394/worklog/692063",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ursabot edited a comment on pull request #11872:\nURL: https://github.com/apache/arrow/pull/11872#issuecomment-988219779\n\n\n   Benchmark runs are scheduled for baseline = 9cf4275a19c994879172e5d3b03ade9a96a10721 and contender = 77722d990c28e22a56847b0dc49a79b83a6c1a45. 77722d990c28e22a56847b0dc49a79b83a6c1a45 is a master commit associated with this PR. Results will be available as each benchmark for each run completes.\n   Conbench compare runs links:\n   [Finished :arrow_down:0.0% :arrow_up:0.0%] [ec2-t3-xlarge-us-east-2](https://conbench.ursa.dev/compare/runs/9b40d0890b27427383b416d8e62d5dbe...9f33767f1d224b4f9e4fa66f997217e2/)\n   [Scheduled] [ursa-i9-9960x](https://conbench.ursa.dev/compare/runs/ec45e9e0b35445539b2cfc59d56ce805...9bc1f30b5c56435e8bcae394642af765/)\n   [Scheduled] [ursa-thinkcentre-m75q](https://conbench.ursa.dev/compare/runs/84909d0fddc64ab7b28a6f223c05c6c4...c57b1b3dc71d4109903ce7a87c31ae3f/)\n   Supported benchmarks:\n   ec2-t3-xlarge-us-east-2: Supported benchmark langs: Python. Runs only benchmarks with cloud = True\n   ursa-i9-9960x: Supported benchmark langs: Python, R, JavaScript\n   ursa-thinkcentre-m75q: Supported benchmark langs: C++, Java\n   \n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-07T21:01:18.086+0000",
                    "updated": "2021-12-07T21:01:18.086+0000",
                    "started": "2021-12-07T21:01:18.085+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "692063",
                    "issueId": "13305394"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13305394/worklog/692222",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ursabot commented on pull request #11872:\nURL: https://github.com/apache/arrow/pull/11872#issuecomment-988479588\n\n\n   Benchmark runs are scheduled for baseline = 9cf4275a19c994879172e5d3b03ade9a96a10721 and contender = 77722d990c28e22a56847b0dc49a79b83a6c1a45. 77722d990c28e22a56847b0dc49a79b83a6c1a45 is a master commit associated with this PR. Results will be available as each benchmark for each run completes.\n   Conbench compare runs links:\n   [Scheduled] [ec2-t3-xlarge-us-east-2](https://conbench.ursa.dev/compare/runs/26a4f85ef5a547079d922da56e969418...91874ad70cba40c88dd7f4b28d3655da/)\n   [Scheduled] [ursa-i9-9960x](https://conbench.ursa.dev/compare/runs/f4dce272e63a4badb48789db2008ef61...f1c8031c505b4f9ab42760f956e7c437/)\n   [Scheduled] [ursa-thinkcentre-m75q](https://conbench.ursa.dev/compare/runs/f6f8d19d14aa4337a2095a1988acf496...1a5fd3d0d015446796c3b9cd6fa1d86b/)\n   Supported benchmarks:\n   ec2-t3-xlarge-us-east-2: Supported benchmark langs: Python. Runs only benchmarks with cloud = True\n   ursa-i9-9960x: Supported benchmark langs: Python, R, JavaScript\n   ursa-thinkcentre-m75q: Supported benchmark langs: C++, Java\n   \n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-08T04:06:07.440+0000",
                    "updated": "2021-12-08T04:06:07.440+0000",
                    "started": "2021-12-08T04:06:07.440+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "692222",
                    "issueId": "13305394"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13305394/worklog/692236",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ursabot edited a comment on pull request #11872:\nURL: https://github.com/apache/arrow/pull/11872#issuecomment-988479588\n\n\n   Benchmark runs are scheduled for baseline = 9cf4275a19c994879172e5d3b03ade9a96a10721 and contender = 77722d990c28e22a56847b0dc49a79b83a6c1a45. 77722d990c28e22a56847b0dc49a79b83a6c1a45 is a master commit associated with this PR. Results will be available as each benchmark for each run completes.\n   Conbench compare runs links:\n   [Finished :arrow_down:0.0% :arrow_up:0.0%] [ec2-t3-xlarge-us-east-2](https://conbench.ursa.dev/compare/runs/26a4f85ef5a547079d922da56e969418...91874ad70cba40c88dd7f4b28d3655da/)\n   [Scheduled] [ursa-i9-9960x](https://conbench.ursa.dev/compare/runs/f4dce272e63a4badb48789db2008ef61...f1c8031c505b4f9ab42760f956e7c437/)\n   [Scheduled] [ursa-thinkcentre-m75q](https://conbench.ursa.dev/compare/runs/f6f8d19d14aa4337a2095a1988acf496...1a5fd3d0d015446796c3b9cd6fa1d86b/)\n   Supported benchmarks:\n   ec2-t3-xlarge-us-east-2: Supported benchmark langs: Python. Runs only benchmarks with cloud = True\n   ursa-i9-9960x: Supported benchmark langs: Python, R, JavaScript\n   ursa-thinkcentre-m75q: Supported benchmark langs: C++, Java\n   \n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-08T05:21:35.632+0000",
                    "updated": "2021-12-08T05:21:35.632+0000",
                    "started": "2021-12-08T05:21:35.632+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "692236",
                    "issueId": "13305394"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
            "id": "4",
            "description": "An improvement or enhancement to an existing feature or task.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
            "name": "Improvement",
            "subtask": false,
            "avatarId": 21140
        },
        "timespent": 13200,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@35f1f6dd[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@6182d566[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@25b7cd10[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@52e91525[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@3a0d245b[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@713507e7[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@6af18b9c[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@702bebda[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@23573678[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@7a0407ca[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@1ccfce7d[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@33958305[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 13200,
        "customfield_12312520": null,
        "customfield_12312521": "Tue Dec 07 19:46:56 UTC 2021",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2021-12-07T19:46:56.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-8823/watchers",
            "watchCount": 2,
            "isWatching": false
        },
        "created": "2020-05-16T15:33:09.000+0000",
        "updated": "2021-12-08T15:11:08.000+0000",
        "timeoriginalestimate": null,
        "description": "It would be beneficial to know the exact bytes-on-wire savings once the message has been produced. Since this computation would be relatively trivial it would not add overhead to the IPC write hot path. ",
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "3h 40m",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 13200
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[C++] Compute aggregate compression ratio when producing compressed IPC body messages",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13305394/comment/17448141",
                    "id": "17448141",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "body": "This could be added to the existing {{WriteStats}} structure.",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "created": "2021-11-23T17:32:50.672+0000",
                    "updated": "2021-11-23T17:32:50.672+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13305394/comment/17454817",
                    "id": "17454817",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "body": "Issue resolved by pull request 11872\n[https://github.com/apache/arrow/pull/11872]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "created": "2021-12-07T19:46:56.806+0000",
                    "updated": "2021-12-07T19:46:56.806+0000"
                }
            ],
            "maxResults": 2,
            "total": 2,
            "startAt": 0
        },
        "customfield_12311820": "0|z0etew:",
        "customfield_12314139": null
    }
}