{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13369415",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13369415",
    "key": "ARROW-12190",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12349493",
                "id": "12349493",
                "description": "",
                "name": "4.0.0",
                "archived": false,
                "released": true,
                "releaseDate": "2021-04-26"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "name": "Major",
            "id": "3"
        },
        "labels": [
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=Dandandan",
            "name": "Dandandan",
            "key": "dandandan",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
            },
            "displayName": "Dani\u00ebl Heres",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12335005",
                "id": "12335005",
                "name": "Rust - DataFusion"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=Dandandan",
            "name": "Dandandan",
            "key": "dandandan",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
            },
            "displayName": "Dani\u00ebl Heres",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=Dandandan",
            "name": "Dandandan",
            "key": "dandandan",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
            },
            "displayName": "Dani\u00ebl Heres",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "aggregateprogress": {
            "progress": 20400,
            "total": 20400,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 20400,
            "total": 20400,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-12190/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 34,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13369415/worklog/576440",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "Dandandan opened a new pull request #9882:\nURL: https://github.com/apache/arrow/pull/9882\n\n\n   This implements a first version of parallel / partitioned hash join / grace join and uses it by default in the planner.\r\n   \r\n   Master\r\n   ```\r\n   Query 5 avg time: 141.29 ms\r\n   ```\r\n   PR\r\n   ```\r\n   Query 5 avg time: 91.60 ms\r\n   ```\r\n   \r\n   FYI @andygrove \n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-04-03T16:06:31.892+0000",
                    "updated": "2021-04-03T16:06:31.892+0000",
                    "started": "2021-04-03T16:06:31.892+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "576440",
                    "issueId": "13369415"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13369415/worklog/576441",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "github-actions[bot] commented on pull request #9882:\nURL: https://github.com/apache/arrow/pull/9882#issuecomment-812885941\n\n\n   https://issues.apache.org/jira/browse/ARROW-12190\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-04-03T16:06:45.225+0000",
                    "updated": "2021-04-03T16:06:45.225+0000",
                    "started": "2021-04-03T16:06:45.225+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "576441",
                    "issueId": "13369415"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13369415/worklog/576442",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "Dandandan commented on a change in pull request #9882:\nURL: https://github.com/apache/arrow/pull/9882#discussion_r606680978\n\n\n\n##########\nFile path: rust/datafusion/src/physical_plan/hash_join.rs\n##########\n@@ -223,18 +237,76 @@ impl ExecutionPlan for HashJoinExec {\n \n     async fn execute(&self, partition: usize) -> Result<SendableRecordBatchStream> {\n         let on_left = self.on.iter().map(|on| on.0.clone()).collect::<Vec<_>>();\n-\n-        // we only want to compute the build side once\n+        // we only want to compute the build side once for PartitionMode::MergeLeft\n         let left_data = {\n-            let mut build_side = self.build_side.lock().await;\n-            match build_side.as_ref() {\n-                Some(stream) => stream.clone(),\n-                None => {\n+            match self.mode {\n+                PartitionMode::MergeLeft => {\n+                    let mut build_side = self.build_side.lock().await;\n+\n+                    match build_side.as_ref() {\n+                        Some(stream) => stream.clone(),\n+                        None => {\n+                            let start = Instant::now();\n+\n+                            // merge all left parts into a single stream\n+                            let merge = MergeExec::new(self.left.clone());\n+                            let stream = merge.execute(0).await?;\n+\n+                            // This operation performs 2 steps at once:\n+                            // 1. creates a [JoinHashMap] of all batches from the stream\n+                            // 2. stores the batches in a vector.\n+                            let initial = (\n+                                JoinHashMap::with_hasher(IdHashBuilder {}),\n+                                Vec::new(),\n+                                0,\n+                                Vec::new(),\n+                            );\n+                            let (hashmap, batches, num_rows, _) = stream\n\nReview comment:\n       This code is the \"old\" version, diff shows it in a wrong way.\r\n   The code is a duplicated a bit, couldn't yet manage to extract it to a function without running into a compile error.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-04-03T16:08:58.359+0000",
                    "updated": "2021-04-03T16:08:58.359+0000",
                    "started": "2021-04-03T16:08:58.359+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "576442",
                    "issueId": "13369415"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13369415/worklog/576443",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "Dandandan commented on a change in pull request #9882:\nURL: https://github.com/apache/arrow/pull/9882#discussion_r606680992\n\n\n\n##########\nFile path: rust/datafusion/src/physical_plan/hash_join.rs\n##########\n@@ -223,18 +237,76 @@ impl ExecutionPlan for HashJoinExec {\n \n     async fn execute(&self, partition: usize) -> Result<SendableRecordBatchStream> {\n         let on_left = self.on.iter().map(|on| on.0.clone()).collect::<Vec<_>>();\n-\n-        // we only want to compute the build side once\n+        // we only want to compute the build side once for PartitionMode::MergeLeft\n         let left_data = {\n-            let mut build_side = self.build_side.lock().await;\n-            match build_side.as_ref() {\n-                Some(stream) => stream.clone(),\n-                None => {\n+            match self.mode {\n+                PartitionMode::MergeLeft => {\n+                    let mut build_side = self.build_side.lock().await;\n+\n+                    match build_side.as_ref() {\n+                        Some(stream) => stream.clone(),\n+                        None => {\n+                            let start = Instant::now();\n+\n+                            // merge all left parts into a single stream\n+                            let merge = MergeExec::new(self.left.clone());\n+                            let stream = merge.execute(0).await?;\n+\n+                            // This operation performs 2 steps at once:\n+                            // 1. creates a [JoinHashMap] of all batches from the stream\n+                            // 2. stores the batches in a vector.\n+                            let initial = (\n+                                JoinHashMap::with_hasher(IdHashBuilder {}),\n+                                Vec::new(),\n+                                0,\n+                                Vec::new(),\n+                            );\n+                            let (hashmap, batches, num_rows, _) = stream\n+                                .try_fold(initial, |mut acc, batch| async {\n+                                    let hash = &mut acc.0;\n+                                    let values = &mut acc.1;\n+                                    let offset = acc.2;\n+                                    acc.3.clear();\n+                                    acc.3.resize(batch.num_rows(), 0);\n+                                    update_hash(\n+                                        &on_left,\n+                                        &batch,\n+                                        hash,\n+                                        offset,\n+                                        &self.random_state,\n+                                        &mut acc.3,\n+                                    )\n+                                    .unwrap();\n+                                    acc.2 += batch.num_rows();\n+                                    values.push(batch);\n+                                    Ok(acc)\n+                                })\n+                                .await?;\n+\n+                            // Merge all batches into a single batch, so we\n+                            // can directly index into the arrays\n+                            let single_batch =\n+                                concat_batches(&self.left.schema(), &batches, num_rows)?;\n+\n+                            let left_side = Arc::new((hashmap, single_batch));\n+\n+                            *build_side = Some(left_side.clone());\n+\n+                            debug!(\n+                            \"Built build-side of hash join containing {} rows in {} ms\",\n+                            num_rows,\n+                            start.elapsed().as_millis()\n+                        );\n+\n+                            left_side\n+                        }\n+                    }\n+                }\n+                PartitionMode::Partitioned => {\n                     let start = Instant::now();\n \n-                    // merge all left parts into a single stream\n-                    let merge = MergeExec::new(self.left.clone());\n-                    let stream = merge.execute(0).await?;\n+                    // Load 1 partition of left side in memory\n+                    let stream = self.left.execute(partition).await?;\n\nReview comment:\n       Here is the main difference\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-04-03T16:09:21.291+0000",
                    "updated": "2021-04-03T16:09:21.291+0000",
                    "started": "2021-04-03T16:09:21.291+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "576443",
                    "issueId": "13369415"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13369415/worklog/576446",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "codecov-io commented on pull request #9882:\nURL: https://github.com/apache/arrow/pull/9882#issuecomment-812888086\n\n\n   # [Codecov](https://codecov.io/gh/apache/arrow/pull/9882?src=pr&el=h1) Report\n   > Merging [#9882](https://codecov.io/gh/apache/arrow/pull/9882?src=pr&el=desc) (5942020) into [master](https://codecov.io/gh/apache/arrow/commit/5bfae36954f7fe1573ec24166ba7d57f2a73b614?el=desc) (5bfae36) will **increase** coverage by `0.08%`.\n   > The diff coverage is `88.72%`.\n   \n   [![Impacted file tree graph](https://codecov.io/gh/apache/arrow/pull/9882/graphs/tree.svg?width=650&height=150&src=pr&token=LpTCFbqVT1)](https://codecov.io/gh/apache/arrow/pull/9882?src=pr&el=tree)\n   \n   ```diff\n   @@            Coverage Diff             @@\n   ##           master    #9882      +/-   ##\n   ==========================================\n   + Coverage   82.60%   82.68%   +0.08%     \n   ==========================================\n     Files         255      256       +1     \n     Lines       59674    60144     +470     \n   ==========================================\n   + Hits        49295    49732     +437     \n   - Misses      10379    10412      +33     \n   ```\n   \n   \n   | [Impacted Files](https://codecov.io/gh/apache/arrow/pull/9882?src=pr&el=tree) | Coverage \u0394 | |\n   |---|---|---|\n   | [rust/arrow-pyarrow-integration-testing/src/lib.rs](https://codecov.io/gh/apache/arrow/pull/9882/diff?src=pr&el=tree#diff-cnVzdC9hcnJvdy1weWFycm93LWludGVncmF0aW9uLXRlc3Rpbmcvc3JjL2xpYi5ycw==) | `0.00% <\u00f8> (\u00f8)` | |\n   | [rust/arrow/src/datatypes/field.rs](https://codecov.io/gh/apache/arrow/pull/9882/diff?src=pr&el=tree#diff-cnVzdC9hcnJvdy9zcmMvZGF0YXR5cGVzL2ZpZWxkLnJz) | `55.47% <0.00%> (\u00f8)` | |\n   | [rust/arrow/src/error.rs](https://codecov.io/gh/apache/arrow/pull/9882/diff?src=pr&el=tree#diff-cnVzdC9hcnJvdy9zcmMvZXJyb3IucnM=) | `11.11% <0.00%> (-0.52%)` | :arrow_down: |\n   | [rust/arrow/src/ipc/writer.rs](https://codecov.io/gh/apache/arrow/pull/9882/diff?src=pr&el=tree#diff-cnVzdC9hcnJvdy9zcmMvaXBjL3dyaXRlci5ycw==) | `86.70% <0.00%> (-0.74%)` | :arrow_down: |\n   | [rust/benchmarks/src/bin/tpch.rs](https://codecov.io/gh/apache/arrow/pull/9882/diff?src=pr&el=tree#diff-cnVzdC9iZW5jaG1hcmtzL3NyYy9iaW4vdHBjaC5ycw==) | `38.42% <0.00%> (+0.09%)` | :arrow_up: |\n   | [rust/datafusion/src/logical\\_plan/expr.rs](https://codecov.io/gh/apache/arrow/pull/9882/diff?src=pr&el=tree#diff-cnVzdC9kYXRhZnVzaW9uL3NyYy9sb2dpY2FsX3BsYW4vZXhwci5ycw==) | `83.39% <\u00f8> (\u00f8)` | |\n   | [rust/datafusion/tests/dataframe.rs](https://codecov.io/gh/apache/arrow/pull/9882/diff?src=pr&el=tree#diff-cnVzdC9kYXRhZnVzaW9uL3Rlc3RzL2RhdGFmcmFtZS5ycw==) | `100.00% <\u00f8> (\u00f8)` | |\n   | [rust/parquet/benches/arrow\\_writer.rs](https://codecov.io/gh/apache/arrow/pull/9882/diff?src=pr&el=tree#diff-cnVzdC9wYXJxdWV0L2JlbmNoZXMvYXJyb3dfd3JpdGVyLnJz) | `0.00% <0.00%> (\u00f8)` | |\n   | [rust/datafusion/src/scalar.rs](https://codecov.io/gh/apache/arrow/pull/9882/diff?src=pr&el=tree#diff-cnVzdC9kYXRhZnVzaW9uL3NyYy9zY2FsYXIucnM=) | `51.22% <33.33%> (-0.15%)` | :arrow_down: |\n   | [.../datafusion/src/physical\\_plan/regex\\_expressions.rs](https://codecov.io/gh/apache/arrow/pull/9882/diff?src=pr&el=tree#diff-cnVzdC9kYXRhZnVzaW9uL3NyYy9waHlzaWNhbF9wbGFuL3JlZ2V4X2V4cHJlc3Npb25zLnJz) | `86.15% <60.00%> (-2.18%)` | :arrow_down: |\n   | ... and [20 more](https://codecov.io/gh/apache/arrow/pull/9882/diff?src=pr&el=tree-more) | |\n   \n   ------\n   \n   [Continue to review full report at Codecov](https://codecov.io/gh/apache/arrow/pull/9882?src=pr&el=continue).\n   > **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n   > `\u0394 = absolute <relative> (impact)`, `\u00f8 = not affected`, `? = missing data`\n   > Powered by [Codecov](https://codecov.io/gh/apache/arrow/pull/9882?src=pr&el=footer). Last update [3d87a0e...5942020](https://codecov.io/gh/apache/arrow/pull/9882?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n   \n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-04-03T16:21:18.422+0000",
                    "updated": "2021-04-03T16:21:18.422+0000",
                    "started": "2021-04-03T16:21:18.421+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "576446",
                    "issueId": "13369415"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13369415/worklog/576473",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "codecov-io edited a comment on pull request #9882:\nURL: https://github.com/apache/arrow/pull/9882#issuecomment-812888086\n\n\n   # [Codecov](https://codecov.io/gh/apache/arrow/pull/9882?src=pr&el=h1) Report\n   > Merging [#9882](https://codecov.io/gh/apache/arrow/pull/9882?src=pr&el=desc) (f287c10) into [master](https://codecov.io/gh/apache/arrow/commit/5bfae36954f7fe1573ec24166ba7d57f2a73b614?el=desc) (5bfae36) will **increase** coverage by `0.08%`.\n   > The diff coverage is `88.72%`.\n   \n   [![Impacted file tree graph](https://codecov.io/gh/apache/arrow/pull/9882/graphs/tree.svg?width=650&height=150&src=pr&token=LpTCFbqVT1)](https://codecov.io/gh/apache/arrow/pull/9882?src=pr&el=tree)\n   \n   ```diff\n   @@            Coverage Diff             @@\n   ##           master    #9882      +/-   ##\n   ==========================================\n   + Coverage   82.60%   82.68%   +0.08%     \n   ==========================================\n     Files         255      256       +1     \n     Lines       59674    60144     +470     \n   ==========================================\n   + Hits        49295    49733     +438     \n   - Misses      10379    10411      +32     \n   ```\n   \n   \n   | [Impacted Files](https://codecov.io/gh/apache/arrow/pull/9882?src=pr&el=tree) | Coverage \u0394 | |\n   |---|---|---|\n   | [rust/arrow-pyarrow-integration-testing/src/lib.rs](https://codecov.io/gh/apache/arrow/pull/9882/diff?src=pr&el=tree#diff-cnVzdC9hcnJvdy1weWFycm93LWludGVncmF0aW9uLXRlc3Rpbmcvc3JjL2xpYi5ycw==) | `0.00% <\u00f8> (\u00f8)` | |\n   | [rust/arrow/src/datatypes/field.rs](https://codecov.io/gh/apache/arrow/pull/9882/diff?src=pr&el=tree#diff-cnVzdC9hcnJvdy9zcmMvZGF0YXR5cGVzL2ZpZWxkLnJz) | `55.47% <0.00%> (\u00f8)` | |\n   | [rust/arrow/src/error.rs](https://codecov.io/gh/apache/arrow/pull/9882/diff?src=pr&el=tree#diff-cnVzdC9hcnJvdy9zcmMvZXJyb3IucnM=) | `11.11% <0.00%> (-0.52%)` | :arrow_down: |\n   | [rust/arrow/src/ipc/writer.rs](https://codecov.io/gh/apache/arrow/pull/9882/diff?src=pr&el=tree#diff-cnVzdC9hcnJvdy9zcmMvaXBjL3dyaXRlci5ycw==) | `86.70% <0.00%> (-0.74%)` | :arrow_down: |\n   | [rust/benchmarks/src/bin/tpch.rs](https://codecov.io/gh/apache/arrow/pull/9882/diff?src=pr&el=tree#diff-cnVzdC9iZW5jaG1hcmtzL3NyYy9iaW4vdHBjaC5ycw==) | `38.42% <0.00%> (+0.09%)` | :arrow_up: |\n   | [rust/datafusion/src/logical\\_plan/expr.rs](https://codecov.io/gh/apache/arrow/pull/9882/diff?src=pr&el=tree#diff-cnVzdC9kYXRhZnVzaW9uL3NyYy9sb2dpY2FsX3BsYW4vZXhwci5ycw==) | `83.39% <\u00f8> (\u00f8)` | |\n   | [rust/datafusion/tests/dataframe.rs](https://codecov.io/gh/apache/arrow/pull/9882/diff?src=pr&el=tree#diff-cnVzdC9kYXRhZnVzaW9uL3Rlc3RzL2RhdGFmcmFtZS5ycw==) | `100.00% <\u00f8> (\u00f8)` | |\n   | [rust/parquet/benches/arrow\\_writer.rs](https://codecov.io/gh/apache/arrow/pull/9882/diff?src=pr&el=tree#diff-cnVzdC9wYXJxdWV0L2JlbmNoZXMvYXJyb3dfd3JpdGVyLnJz) | `0.00% <0.00%> (\u00f8)` | |\n   | [rust/datafusion/src/scalar.rs](https://codecov.io/gh/apache/arrow/pull/9882/diff?src=pr&el=tree#diff-cnVzdC9kYXRhZnVzaW9uL3NyYy9zY2FsYXIucnM=) | `51.22% <33.33%> (-0.15%)` | :arrow_down: |\n   | [.../datafusion/src/physical\\_plan/regex\\_expressions.rs](https://codecov.io/gh/apache/arrow/pull/9882/diff?src=pr&el=tree#diff-cnVzdC9kYXRhZnVzaW9uL3NyYy9waHlzaWNhbF9wbGFuL3JlZ2V4X2V4cHJlc3Npb25zLnJz) | `86.15% <60.00%> (-2.18%)` | :arrow_down: |\n   | ... and [19 more](https://codecov.io/gh/apache/arrow/pull/9882/diff?src=pr&el=tree-more) | |\n   \n   ------\n   \n   [Continue to review full report at Codecov](https://codecov.io/gh/apache/arrow/pull/9882?src=pr&el=continue).\n   > **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n   > `\u0394 = absolute <relative> (impact)`, `\u00f8 = not affected`, `? = missing data`\n   > Powered by [Codecov](https://codecov.io/gh/apache/arrow/pull/9882?src=pr&el=footer). Last update [3d87a0e...f287c10](https://codecov.io/gh/apache/arrow/pull/9882?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n   \n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-04-03T18:22:49.385+0000",
                    "updated": "2021-04-03T18:22:49.385+0000",
                    "started": "2021-04-03T18:22:49.385+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "576473",
                    "issueId": "13369415"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13369415/worklog/576565",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "Dandandan commented on pull request #9882:\nURL: https://github.com/apache/arrow/pull/9882#issuecomment-813021037\n\n\n   @jorgecarleitao I am wondering if you have found a more performant implementation or ideas for the `concat` kernel in your `arrow2` branch?\r\n   In this case (even though the extra parallelism has better performance and better scalability), through CoalesceBatches it is adding significant overhead, but looking at the implementation think there are probably quite some opportunities to improve performance there - especially for the concat case there seems too much work currently done in the `MutableArrayData` and creating intermediate `Vec`s. etc.\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-04-04T12:00:12.027+0000",
                    "updated": "2021-04-04T12:00:12.027+0000",
                    "started": "2021-04-04T12:00:12.027+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "576565",
                    "issueId": "13369415"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13369415/worklog/576567",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "codecov-io edited a comment on pull request #9882:\nURL: https://github.com/apache/arrow/pull/9882#issuecomment-812888086\n\n\n   # [Codecov](https://codecov.io/gh/apache/arrow/pull/9882?src=pr&el=h1) Report\n   > Merging [#9882](https://codecov.io/gh/apache/arrow/pull/9882?src=pr&el=desc) (407ffba) into [master](https://codecov.io/gh/apache/arrow/commit/beb1c1b35be162ed52159aae12f1b44e37934c4d?el=desc) (beb1c1b) will **decrease** coverage by `0.06%`.\n   > The diff coverage is `64.10%`.\n   \n   [![Impacted file tree graph](https://codecov.io/gh/apache/arrow/pull/9882/graphs/tree.svg?width=650&height=150&src=pr&token=LpTCFbqVT1)](https://codecov.io/gh/apache/arrow/pull/9882?src=pr&el=tree)\n   \n   ```diff\n   @@            Coverage Diff             @@\n   ##           master    #9882      +/-   ##\n   ==========================================\n   - Coverage   82.68%   82.62%   -0.07%     \n   ==========================================\n     Files         256      256              \n     Lines       60105    60151      +46     \n   ==========================================\n   + Hits        49698    49699       +1     \n   - Misses      10407    10452      +45     \n   ```\n   \n   \n   | [Impacted Files](https://codecov.io/gh/apache/arrow/pull/9882?src=pr&el=tree) | Coverage \u0394 | |\n   |---|---|---|\n   | [rust/benchmarks/src/bin/tpch.rs](https://codecov.io/gh/apache/arrow/pull/9882/diff?src=pr&el=tree#diff-cnVzdC9iZW5jaG1hcmtzL3NyYy9iaW4vdHBjaC5ycw==) | `38.42% <0.00%> (+0.09%)` | :arrow_up: |\n   | [rust/datafusion/src/physical\\_plan/planner.rs](https://codecov.io/gh/apache/arrow/pull/9882/diff?src=pr&el=tree#diff-cnVzdC9kYXRhZnVzaW9uL3NyYy9waHlzaWNhbF9wbGFuL3BsYW5uZXIucnM=) | `78.11% <31.57%> (-1.66%)` | :arrow_down: |\n   | [rust/datafusion/src/physical\\_plan/hash\\_join.rs](https://codecov.io/gh/apache/arrow/pull/9882/diff?src=pr&el=tree#diff-cnVzdC9kYXRhZnVzaW9uL3NyYy9waHlzaWNhbF9wbGFuL2hhc2hfam9pbi5ycw==) | `78.40% <72.91%> (-6.20%)` | :arrow_down: |\n   | [rust/datafusion/src/execution/dataframe\\_impl.rs](https://codecov.io/gh/apache/arrow/pull/9882/diff?src=pr&el=tree#diff-cnVzdC9kYXRhZnVzaW9uL3NyYy9leGVjdXRpb24vZGF0YWZyYW1lX2ltcGwucnM=) | `88.88% <100.00%> (-0.22%)` | :arrow_down: |\n   | [rust/datafusion/src/logical\\_plan/builder.rs](https://codecov.io/gh/apache/arrow/pull/9882/diff?src=pr&el=tree#diff-cnVzdC9kYXRhZnVzaW9uL3NyYy9sb2dpY2FsX3BsYW4vYnVpbGRlci5ycw==) | `88.88% <100.00%> (+0.70%)` | :arrow_up: |\n   | [rust/datafusion/src/physical\\_plan/repartition.rs](https://codecov.io/gh/apache/arrow/pull/9882/diff?src=pr&el=tree#diff-cnVzdC9kYXRhZnVzaW9uL3NyYy9waHlzaWNhbF9wbGFuL3JlcGFydGl0aW9uLnJz) | `81.40% <100.00%> (+0.18%)` | :arrow_up: |\n   | [rust/datafusion/tests/dataframe.rs](https://codecov.io/gh/apache/arrow/pull/9882/diff?src=pr&el=tree#diff-cnVzdC9kYXRhZnVzaW9uL3Rlc3RzL2RhdGFmcmFtZS5ycw==) | `100.00% <100.00%> (\u00f8)` | |\n   | [rust/parquet/src/encodings/encoding.rs](https://codecov.io/gh/apache/arrow/pull/9882/diff?src=pr&el=tree#diff-cnVzdC9wYXJxdWV0L3NyYy9lbmNvZGluZ3MvZW5jb2RpbmcucnM=) | `95.05% <0.00%> (+0.19%)` | :arrow_up: |\n   \n   ------\n   \n   [Continue to review full report at Codecov](https://codecov.io/gh/apache/arrow/pull/9882?src=pr&el=continue).\n   > **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n   > `\u0394 = absolute <relative> (impact)`, `\u00f8 = not affected`, `? = missing data`\n   > Powered by [Codecov](https://codecov.io/gh/apache/arrow/pull/9882?src=pr&el=footer). Last update [beb1c1b...407ffba](https://codecov.io/gh/apache/arrow/pull/9882?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n   \n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-04-04T12:28:30.304+0000",
                    "updated": "2021-04-04T12:28:30.304+0000",
                    "started": "2021-04-04T12:28:30.304+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "576567",
                    "issueId": "13369415"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13369415/worklog/576583",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jorgecarleitao commented on a change in pull request #9882:\nURL: https://github.com/apache/arrow/pull/9882#discussion_r606818340\n\n\n\n##########\nFile path: rust/benchmarks/src/bin/tpch.rs\n##########\n@@ -1677,7 +1677,6 @@ mod tests {\n             let actual_vec = result_vec(&actual);\n \n             // basic result comparison\n-            assert_eq!(expected_vec.len(), actual_vec.len());\n\nReview comment:\n       Just curious: Is there a reason to remove this? The next `for` loop does not check the results' lens (i.e. if `actual_vec.len() < expected_vec.len()` and has equal rows, then the check passes).\r\n   \r\n   \n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-04-04T15:40:06.966+0000",
                    "updated": "2021-04-04T15:40:06.966+0000",
                    "started": "2021-04-04T15:40:06.965+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "576583",
                    "issueId": "13369415"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13369415/worklog/576623",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "andygrove commented on pull request #9882:\nURL: https://github.com/apache/arrow/pull/9882#issuecomment-813065109\n\n\n   This is looking really good. I agree with your suggestion about buffering data and only emitting batches when they reach a target size.\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-04-04T16:59:39.897+0000",
                    "updated": "2021-04-04T16:59:39.897+0000",
                    "started": "2021-04-04T16:59:39.897+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "576623",
                    "issueId": "13369415"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13369415/worklog/576625",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "Dandandan commented on a change in pull request #9882:\nURL: https://github.com/apache/arrow/pull/9882#discussion_r606827736\n\n\n\n##########\nFile path: rust/benchmarks/src/bin/tpch.rs\n##########\n@@ -1677,7 +1677,6 @@ mod tests {\n             let actual_vec = result_vec(&actual);\n \n             // basic result comparison\n-            assert_eq!(expected_vec.len(), actual_vec.len());\n\nReview comment:\n       Will have a look later at this. I thought it was failing as it returns a vec of batches(?) but not sure now.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-04-04T17:02:06.797+0000",
                    "updated": "2021-04-04T17:02:06.797+0000",
                    "started": "2021-04-04T17:02:06.797+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "576625",
                    "issueId": "13369415"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13369415/worklog/576626",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "Dandandan commented on a change in pull request #9882:\nURL: https://github.com/apache/arrow/pull/9882#discussion_r606827814\n\n\n\n##########\nFile path: rust/benchmarks/src/bin/tpch.rs\n##########\n@@ -1677,7 +1677,6 @@ mod tests {\n             let actual_vec = result_vec(&actual);\n \n             // basic result comparison\n-            assert_eq!(expected_vec.len(), actual_vec.len());\n\nReview comment:\n       Probably have to flatten the `Vec`  to make the test pass.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-04-04T17:02:59.968+0000",
                    "updated": "2021-04-04T17:02:59.968+0000",
                    "started": "2021-04-04T17:02:59.968+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "576626",
                    "issueId": "13369415"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13369415/worklog/576627",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "Dandandan commented on a change in pull request #9882:\nURL: https://github.com/apache/arrow/pull/9882#discussion_r606827814\n\n\n\n##########\nFile path: rust/benchmarks/src/bin/tpch.rs\n##########\n@@ -1677,7 +1677,6 @@ mod tests {\n             let actual_vec = result_vec(&actual);\n \n             // basic result comparison\n-            assert_eq!(expected_vec.len(), actual_vec.len());\n\nReview comment:\n       Probably have to flatten the `Vec`  to make the test pass (or mostly pass as the test currently fail because of rounding errors).\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-04-04T17:03:55.199+0000",
                    "updated": "2021-04-04T17:03:55.199+0000",
                    "started": "2021-04-04T17:03:55.199+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "576627",
                    "issueId": "13369415"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13369415/worklog/576638",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jorgecarleitao commented on pull request #9882:\nURL: https://github.com/apache/arrow/pull/9882#issuecomment-813078083\n\n\n   > @jorgecarleitao I am wondering if you have found a more performant implementation or ideas for the `concat` kernel in your `arrow2` branch?\r\n   \r\n   The concat before the `transform` module was 6x slower ^_^. `arrow2` is a bit faster than `arrow`. However, the bottleneck in both implementations is concatenating validities. While buffers are a simple memcopy, bits require more due to the bit offsets. E.g. concatenating an array to an `array1` where `array1.len() % 8 != 0` requires shifting the whole bitmap of array2. This causes concatenating with validities to be ~2x more expensive than without validities, in both implementations. https://github.com/jorgecarleitao/arrow2/issues/12 tracks this on the arrow2 side of things.\r\n   \r\n   The other potential improvement is to downcast instead of using vtables, since downcasting allows the compiler to inline some operations.\r\n   \n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-04-04T18:24:09.471+0000",
                    "updated": "2021-04-04T18:24:09.471+0000",
                    "started": "2021-04-04T18:24:09.471+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "576638",
                    "issueId": "13369415"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13369415/worklog/576749",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "Dandandan commented on a change in pull request #9882:\nURL: https://github.com/apache/arrow/pull/9882#discussion_r606990935\n\n\n\n##########\nFile path: rust/benchmarks/src/bin/tpch.rs\n##########\n@@ -1677,7 +1677,6 @@ mod tests {\n             let actual_vec = result_vec(&actual);\n \n             // basic result comparison\n-            assert_eq!(expected_vec.len(), actual_vec.len());\n\nReview comment:\n       I reverted this change -> found out the test was actually wrong..\r\n   \r\n   Also interesting, I thought one of the tests was giving a wrong example (besides some rounding errors because we don't use decimals in the benchmark), but it seems currently wrong on master too:\r\n   \r\n   ```\r\n   Query 6 iteration 0 took 6137.1 ms\r\n   Query 6 avg time: 6137.09 ms\r\n   thread 'tests::q6' panicked at 'assertion failed: `(left == right)`\r\n     left: `[\"123141078.23\"]`,\r\n    right: `[\"75207768.18550001\"]`', benchmarks/src/bin/tpch.rs:1684:17\r\n   ```\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-04-05T08:55:19.795+0000",
                    "updated": "2021-04-05T08:55:19.795+0000",
                    "started": "2021-04-05T08:55:19.795+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "576749",
                    "issueId": "13369415"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13369415/worklog/576750",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "Dandandan commented on a change in pull request #9882:\nURL: https://github.com/apache/arrow/pull/9882#discussion_r606990935\n\n\n\n##########\nFile path: rust/benchmarks/src/bin/tpch.rs\n##########\n@@ -1677,7 +1677,6 @@ mod tests {\n             let actual_vec = result_vec(&actual);\n \n             // basic result comparison\n-            assert_eq!(expected_vec.len(), actual_vec.len());\n\nReview comment:\n       I reverted this change -> found out the test was actually failing for good reason..\r\n   \r\n   it seems currently giving wrong results on master too:\r\n   \r\n   ```\r\n   Query 6 iteration 0 took 6137.1 ms\r\n   Query 6 avg time: 6137.09 ms\r\n   thread 'tests::q6' panicked at 'assertion failed: `(left == right)`\r\n     left: `[\"123141078.23\"]`,\r\n    right: `[\"75207768.18550001\"]`', benchmarks/src/bin/tpch.rs:1684:17\r\n   ```\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-04-05T08:56:12.976+0000",
                    "updated": "2021-04-05T08:56:12.976+0000",
                    "started": "2021-04-05T08:56:12.976+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "576750",
                    "issueId": "13369415"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13369415/worklog/576752",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "Dandandan commented on a change in pull request #9882:\nURL: https://github.com/apache/arrow/pull/9882#discussion_r606990935\n\n\n\n##########\nFile path: rust/benchmarks/src/bin/tpch.rs\n##########\n@@ -1677,7 +1677,6 @@ mod tests {\n             let actual_vec = result_vec(&actual);\n \n             // basic result comparison\n-            assert_eq!(expected_vec.len(), actual_vec.len());\n\nReview comment:\n       I reverted this change -> found out the test was actually failing for good reason..\r\n   \r\n   it seems currently giving wrong results on master too:\r\n   \r\n   ```\r\n   Query 6 iteration 0 took 6137.1 ms\r\n   Query 6 avg time: 6137.09 ms\r\n   thread 'tests::q6' panicked at 'assertion failed: `(left == right)`\r\n     left: `[\"123141078.23\"]`,\r\n    right: `[\"75207768.18550001\"]`', benchmarks/src/bin/tpch.rs:1684:17\r\n   ```\r\n   \r\n   and \r\n   \r\n   ```\r\n   Query 10 iteration 0 took 6366.8 ms\r\n   Query 10 avg time: 6366.78 ms\r\n   thread 'tests::q10' panicked at 'assertion failed: `(left == right)`\r\n     left: `20`,\r\n    right: `37967`', benchmarks/src/bin/tpch.rs:1680:13\r\n   ```\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-04-05T09:00:01.586+0000",
                    "updated": "2021-04-05T09:00:01.586+0000",
                    "started": "2021-04-05T09:00:01.586+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "576752",
                    "issueId": "13369415"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13369415/worklog/576797",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "alamb commented on pull request #9882:\nURL: https://github.com/apache/arrow/pull/9882#issuecomment-813332496\n\n\n   Thanks @Dandandan  -- I plan to review this carefully later today\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-04-05T10:43:53.948+0000",
                    "updated": "2021-04-05T10:43:53.948+0000",
                    "started": "2021-04-05T10:43:53.948+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "576797",
                    "issueId": "13369415"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13369415/worklog/577108",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "alamb commented on a change in pull request #9882:\nURL: https://github.com/apache/arrow/pull/9882#discussion_r607332073\n\n\n\n##########\nFile path: rust/datafusion/src/physical_plan/hash_join.rs\n##########\n@@ -86,6 +86,17 @@ pub struct HashJoinExec {\n     build_side: Arc<Mutex<Option<JoinLeftData>>>,\n     /// Shares the `RandomState` for the hashing algorithm\n     random_state: RandomState,\n+    /// Partitioning mode to use\n+    mode: PartitionMode,\n+}\n+\n+#[derive(Clone, Copy, Debug, PartialEq)]\n+/// Partitioning mode to use for hash join\n+pub enum PartitionMode {\n+    /// Left/right children are partitioned using the left and right keys\n+    Partitioned,\n+    /// Left side will be merged and collected into one partition\n+    MergeLeft,\n\nReview comment:\n       maybe `CollectLeft` ? Every time I hear \"Merge\" I always think of \"merging sorted streams\" (e.g. the DataFusion `MergeExec` operator still confused me each time I see its name)\n\n##########\nFile path: rust/benchmarks/src/bin/tpch.rs\n##########\n@@ -1537,7 +1537,7 @@ mod tests {\n                 Field::new(\"c_name\", DataType::Utf8, true),\n                 Field::new(\"c_custkey\", DataType::Int32, true),\n                 Field::new(\"o_orderkey\", DataType::Int32, true),\n-                Field::new(\"o_orderdat\", DataType::Date32, true),\n\nReview comment:\n       \ud83d\udc4d  nice\n\n##########\nFile path: rust/datafusion/src/physical_plan/planner.rs\n##########\n@@ -344,13 +345,33 @@ impl DefaultPhysicalPlanner {\n                     JoinType::Left => hash_utils::JoinType::Left,\n                     JoinType::Right => hash_utils::JoinType::Right,\n                 };\n-\n-                Ok(Arc::new(HashJoinExec::try_new(\n-                    left,\n-                    right,\n-                    &keys,\n-                    &physical_join_type,\n-                )?))\n+                if ctx_state.config.concurrency > 1 {\n+                    let left_expr = keys.iter().map(|x| col(&x.0)).collect();\n+                    let right_expr = keys.iter().map(|x| col(&x.1)).collect();\n+\n+                    // Use hash partition by defualt to parallelize hash joins\n+                    Ok(Arc::new(HashJoinExec::try_new(\n+                        Arc::new(RepartitionExec::try_new(\n\nReview comment:\n       One thing I worry about is that `RepartitionExec` has the potential to (effectively) buffer up the entire result set of the producer makes data faster than the consumer can read it -- e.g. https://github.com/apache/arrow/blob/8e43f23dcc6a9e630516228f110c48b64d13cec6/rust/datafusion/src/physical_plan/repartition.rs#L121-L126 it uses unbounded streams.\r\n   \r\n   Thus this particular structure might end up having a tradeoff of memory usage for keeping more cores busy -- which might or might not be the right trade off depending on the system). \r\n   \r\n   I wonder if you would be amenable to adding a new setting to `ExecutionConfig` that controlled this optimization? \r\n   \r\n   So like \r\n   ```\r\n                   if ctx_state.config.concurrency > 1 && config_ctx.config.repartition_joins {\r\n   ```\n\n##########\nFile path: rust/datafusion/tests/dataframe.rs\n##########\n@@ -71,8 +71,7 @@ async fn join() -> Result<()> {\n \n     let a = df1.join(df2, JoinType::Inner, &[\"a\"], &[\"a\"])?;\n \n-    let batches = a.collect().await?;\n-    assert_eq!(batches.len(), 1);\n+    let _ = a.collect().await?;\n\nReview comment:\n       maybe we could change the test to assert on the total number of rows in the result set rather than the number of batches?\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-04-05T21:11:16.095+0000",
                    "updated": "2021-04-05T21:11:16.095+0000",
                    "started": "2021-04-05T21:11:16.095+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "577108",
                    "issueId": "13369415"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13369415/worklog/577109",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "alamb commented on a change in pull request #9882:\nURL: https://github.com/apache/arrow/pull/9882#discussion_r607337193\n\n\n\n##########\nFile path: rust/benchmarks/src/bin/tpch.rs\n##########\n@@ -1677,7 +1677,6 @@ mod tests {\n             let actual_vec = result_vec(&actual);\n \n             // basic result comparison\n-            assert_eq!(expected_vec.len(), actual_vec.len());\n\nReview comment:\n       is there a JIRA ticket tracking this? I would perhaps be interested in looking at it\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-04-05T21:11:59.267+0000",
                    "updated": "2021-04-05T21:11:59.267+0000",
                    "started": "2021-04-05T21:11:59.267+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "577109",
                    "issueId": "13369415"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
            "id": "4",
            "description": "An improvement or enhancement to an existing feature or task.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
            "name": "Improvement",
            "subtask": false,
            "avatarId": 21140
        },
        "timespent": 20400,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@16f8f3c8[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@1e8adb3b[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@7980e002[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@319baf0a[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@7815c906[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@69b02a33[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@17ce57f7[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@7b4159fb[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@2dcae26c[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@45c3b454[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@205732f4[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@51283984[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 20400,
        "customfield_12312520": null,
        "customfield_12312521": "Wed Apr 07 16:44:24 UTC 2021",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2021-04-07T16:44:24.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-12190/watchers",
            "watchCount": 1,
            "isWatching": false
        },
        "created": "2021-04-03T15:44:18.000+0000",
        "updated": "2021-04-07T17:10:32.000+0000",
        "timeoriginalestimate": null,
        "description": null,
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "5h 40m",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 20400
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[Rust][DataFusion] Implement partitioned hash join",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13369415/comment/17316482",
                    "id": "17316482",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=alamb",
                        "name": "alamb",
                        "key": "alamb",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=alamb&avatarId=43364",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=alamb&avatarId=43364",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=alamb&avatarId=43364",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=alamb&avatarId=43364"
                        },
                        "displayName": "Andrew Lamb",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "Issue resolved by pull request 9882\n[https://github.com/apache/arrow/pull/9882]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=alamb",
                        "name": "alamb",
                        "key": "alamb",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=alamb&avatarId=43364",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=alamb&avatarId=43364",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=alamb&avatarId=43364",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=alamb&avatarId=43364"
                        },
                        "displayName": "Andrew Lamb",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2021-04-07T16:44:24.669+0000",
                    "updated": "2021-04-07T16:44:24.669+0000"
                }
            ],
            "maxResults": 1,
            "total": 1,
            "startAt": 0
        },
        "customfield_12311820": "0|z0pi68:",
        "customfield_12314139": null
    }
}