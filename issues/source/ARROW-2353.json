{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13147967",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13147967",
    "key": "ARROW-2353",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12342562",
                "id": "12342562",
                "description": "",
                "name": "0.10.0",
                "archived": false,
                "released": true,
                "releaseDate": "2018-08-06"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "name": "Major",
            "id": "3"
        },
        "labels": [
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": null,
        "customfield_12312330": null,
        "versions": [],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
            "name": "apitrou",
            "key": "pitrou",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
            },
            "displayName": "Antoine Pitrou",
            "active": true,
            "timeZone": "Europe/Paris"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12333244",
                "id": "12333244",
                "name": "Continuous Integration"
            },
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12328936",
                "id": "12328936",
                "name": "Python"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": null,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
            "name": "apitrou",
            "key": "pitrou",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
            },
            "displayName": "Antoine Pitrou",
            "active": true,
            "timeZone": "Europe/Paris"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
            "name": "apitrou",
            "key": "pitrou",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
            },
            "displayName": "Antoine Pitrou",
            "active": true,
            "timeZone": "Europe/Paris"
        },
        "aggregateprogress": {
            "progress": 0,
            "total": 0
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 0,
            "total": 0
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-2353/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 0,
            "worklogs": []
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
            "id": "3",
            "description": "A task that needs to be done.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
            "name": "Task",
            "subtask": false,
            "avatarId": 21148
        },
        "timespent": null,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@28a33c5c[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@320d8849[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@10411950[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@4ed094d1[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@7a8293fc[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@57198a6a[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@4f8a9240[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@5b6f17c[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@6b459f45[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@7094129d[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@6b97965d[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@5918b742[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": null,
        "customfield_12312520": null,
        "customfield_12312521": "Mon Apr 09 08:59:53 UTC 2018",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2018-04-09T08:59:53.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-2353/watchers",
            "watchCount": 2,
            "isWatching": false
        },
        "created": "2018-03-26T16:24:16.000+0000",
        "updated": "2018-06-29T14:46:05.000+0000",
        "timeoriginalestimate": null,
        "description": null,
        "customfield_10010": null,
        "timetracking": {},
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "Test correctness of built wheel on AppVeyor",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13147967/comment/16414088",
                    "id": "16414088",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "pitrou opened a new pull request #1793: ARROW-2353: [CI] Check correctness of built wheel on AppVeyor\nURL: https://github.com/apache/arrow/pull/1793\n \n \n   And assorted fixes on Windows.\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2018-03-26T16:26:02.221+0000",
                    "updated": "2018-03-26T16:26:02.221+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13147967/comment/16414090",
                    "id": "16414090",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "pitrou commented on a change in pull request #1793: ARROW-2353: [CI] Check correctness of built wheel on AppVeyor\nURL: https://github.com/apache/arrow/pull/1793#discussion_r177153858\n \n \n\n ##########\n File path: ci/msvc-build.bat\n ##########\n @@ -103,12 +103,12 @@ cmake -G \"%GENERATOR%\" ^\n cmake --build . --target install --config %CONFIGURATION%  || exit /B\n \n @rem Needed so python-test.exe works\n-set OLD_PYTHONPATH=%PYTHONPATH%\n-set PYTHONPATH=%CONDA_PREFIX%\\Lib;%CONDA_PREFIX%\\Lib\\site-packages;%CONDA_PREFIX%\\python35.zip;%CONDA_PREFIX%\\DLLs;%CONDA_PREFIX%;%PYTHONPATH%\n+set OLD_PYTHONHOME=%PYTHONHOME%\n+set PYTHONHOME=%CONDA_PREFIX%\n \n Review comment:\n   @wesm This can also be done in `python-test.exe` instead. Which one do you prefer?\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2018-03-26T16:26:40.136+0000",
                    "updated": "2018-03-26T16:26:40.136+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13147967/comment/16427625",
                    "id": "16427625",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "pitrou commented on issue #1793: ARROW-2353: [CI] Check correctness of built wheel on AppVeyor\nURL: https://github.com/apache/arrow/pull/1793#issuecomment-379080571\n \n \n   @MaxRis how do you feel about this?\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2018-04-05T21:20:52.941+0000",
                    "updated": "2018-04-05T21:20:52.941+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13147967/comment/16430283",
                    "id": "16430283",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "pitrou closed pull request #1793: ARROW-2353: [CI] Check correctness of built wheel on AppVeyor\nURL: https://github.com/apache/arrow/pull/1793\n \n \n   \n\nThis is a PR merged from a forked repository.\nAs GitHub hides the original diff on merge, it is displayed below for\nthe sake of provenance:\n\nAs this is a foreign pull request (from a fork), the diff is supplied\nbelow (as it won't show otherwise due to GitHub magic):\n\ndiff --git a/ci/msvc-build.bat b/ci/msvc-build.bat\nindex cec14297e..678e29d58 100644\n--- a/ci/msvc-build.bat\n+++ b/ci/msvc-build.bat\n@@ -104,12 +104,12 @@ cmake -G \"%GENERATOR%\" ^\n cmake --build . --target install --config %CONFIGURATION%  || exit /B\n \n @rem Needed so python-test.exe works\n-set OLD_PYTHONPATH=%PYTHONPATH%\n-set PYTHONPATH=%CONDA_PREFIX%\\Lib;%CONDA_PREFIX%\\Lib\\site-packages;%CONDA_PREFIX%\\python35.zip;%CONDA_PREFIX%\\DLLs;%CONDA_PREFIX%;%PYTHONPATH%\n+set OLD_PYTHONHOME=%PYTHONHOME%\n+set PYTHONHOME=%CONDA_PREFIX%\n \n ctest -VV  || exit /B\n \n-set PYTHONPATH=%OLD_PYTHONPATH%\n+set PYTHONHOME=%OLD_PYTHONHOME%\n popd\n \n @rem Build parquet-cpp\n@@ -124,7 +124,8 @@ cmake -G \"%GENERATOR%\" ^\n      -DCMAKE_INSTALL_PREFIX=%PARQUET_HOME% ^\n      -DCMAKE_BUILD_TYPE=%CONFIGURATION% ^\n      -DPARQUET_BOOST_USE_SHARED=OFF ^\n-     -DPARQUET_BUILD_TESTS=off .. || exit /B\n+     -DPARQUET_BUILD_TESTS=OFF ^\n+     .. || exit /B\n cmake --build . --target install --config %CONFIGURATION% || exit /B\n popd\n \n@@ -135,13 +136,39 @@ popd\n pushd python\n \n set PYARROW_CXXFLAGS=/WX\n-python setup.py build_ext --with-parquet --bundle-arrow-cpp --with-static-boost ^\n+set PYARROW_CMAKE_GENERATOR=%GENERATOR%\n+set PYARROW_BUNDLE_ARROW_CPP=ON\n+set PYARROW_BUNDLE_BOOST=OFF\n+set PYARROW_WITH_STATIC_BOOST=ON\n+set PYARROW_WITH_PARQUET=ON\n+\n+python setup.py build_ext ^\n     install -q --single-version-externally-managed --record=record.text ^\n-    bdist_wheel || exit /B\n+    bdist_wheel -q || exit /B\n+\n+for /F %%i in ('dir /B /S dist\\*.whl') do set WHEEL_PATH=%%i\n \n @rem Test directly from installed location\n \n+@rem Needed for test_cython\n SET PYARROW_PATH=%CONDA_PREFIX%\\Lib\\site-packages\\pyarrow\n py.test -r sxX --durations=15 -v %PYARROW_PATH% --parquet || exit /B\n \n popd\n+\n+@rem Test pyarrow wheel from pristine environment\n+\n+call deactivate\n+\n+conda create -n wheel_test -q -y python=%PYTHON%\n+\n+call activate wheel_test\n+\n+pip install %WHEEL_PATH% || exit /B\n+\n+python -c \"import pyarrow\" || exit /B\n+python -c \"import pyarrow.parquet\" || exit /B\n+\n+pip install pandas pytest pytest-faulthandler\n+\n+py.test -r sxX --durations=15 --pyargs pyarrow.tests || exit /B\ndiff --git a/python/CMakeLists.txt b/python/CMakeLists.txt\nindex cb3cd7023..fcc1d3cdc 100644\n--- a/python/CMakeLists.txt\n+++ b/python/CMakeLists.txt\n@@ -141,13 +141,18 @@ endif()\n # For any C code, use the same flags.\n set(CMAKE_C_FLAGS \"${CMAKE_CXX_FLAGS}\")\n \n-# set compile output directory\n-string (TOLOWER ${CMAKE_BUILD_TYPE} BUILD_SUBDIR_NAME)\n+if (MSVC)\n+  # MSVC makes its own output directories based on the build configuration\n+  set(BUILD_SUBDIR_NAME \"\")\n+else()\n+  # Set compile output directory\n+  string (TOLOWER ${CMAKE_BUILD_TYPE} BUILD_SUBDIR_NAME)\n+endif()\n \n # If build in-source, create the latest symlink. If build out-of-source, which is\n # preferred, simply output the binaries in the build folder\n if (${CMAKE_SOURCE_DIR} STREQUAL ${CMAKE_CURRENT_BINARY_DIR})\n-  set(BUILD_OUTPUT_ROOT_DIRECTORY \"${CMAKE_CURRENT_BINARY_DIR}/build/${BUILD_SUBDIR_NAME}/\")\n+  set(BUILD_OUTPUT_ROOT_DIRECTORY \"${CMAKE_CURRENT_BINARY_DIR}/build/${BUILD_SUBDIR_NAME}\")\n   # Link build/latest to the current build directory, to avoid developers\n   # accidentally running the latest debug build when in fact they're building\n   # release builds.\n@@ -155,15 +160,10 @@ if (${CMAKE_SOURCE_DIR} STREQUAL ${CMAKE_CURRENT_BINARY_DIR})\n   if (NOT APPLE)\n     set(MORE_ARGS \"-T\")\n   endif()\n-EXECUTE_PROCESS(COMMAND ln ${MORE_ARGS} -sf ${BUILD_OUTPUT_ROOT_DIRECTORY}\n-  ${CMAKE_CURRENT_BINARY_DIR}/build/latest)\n+  EXECUTE_PROCESS(COMMAND ln ${MORE_ARGS} -sf ${BUILD_OUTPUT_ROOT_DIRECTORY}\n+    ${CMAKE_CURRENT_BINARY_DIR}/build/latest)\n else()\n-  if (MSVC)\n-    # MSVC makes its own output directories based on the build configuration\n-    set(BUILD_OUTPUT_ROOT_DIRECTORY \"${CMAKE_CURRENT_BINARY_DIR}/\")\n-  else()\n-    set(BUILD_OUTPUT_ROOT_DIRECTORY \"${CMAKE_CURRENT_BINARY_DIR}/${BUILD_SUBDIR_NAME}/\")\n-  endif()\n+  set(BUILD_OUTPUT_ROOT_DIRECTORY \"${CMAKE_CURRENT_BINARY_DIR}/${BUILD_SUBDIR_NAME}\")\n endif()\n \n message(STATUS \"Build output directory: ${BUILD_OUTPUT_ROOT_DIRECTORY}\")\ndiff --git a/python/pyarrow/tests/test_feather.py b/python/pyarrow/tests/test_feather.py\nindex a14673f9f..171f28dfa 100644\n--- a/python/pyarrow/tests/test_feather.py\n+++ b/python/pyarrow/tests/test_feather.py\n@@ -17,6 +17,7 @@\n \n import os\n import sys\n+import tempfile\n import unittest\n import pytest\n \n@@ -27,14 +28,13 @@\n import pandas as pd\n \n import pyarrow as pa\n-from pyarrow.compat import guid\n from pyarrow.feather import (read_feather, write_feather,\n                              FeatherReader)\n from pyarrow.lib import FeatherWriter\n \n \n-def random_path():\n-    return 'feather_{}'.format(guid())\n+def random_path(prefix='feather_'):\n+    return tempfile.mktemp(prefix=prefix)\n \n \n class TestFeatherReader(unittest.TestCase):\n@@ -400,7 +400,7 @@ def test_unicode_filename(self):\n         # GH #209\n         name = (b'Besa_Kavaj\\xc3\\xab.feather').decode('utf-8')\n         df = pd.DataFrame({'foo': [1, 2, 3, 4]})\n-        self._check_pandas_roundtrip(df, path=name)\n+        self._check_pandas_roundtrip(df, path=random_path(prefix=name))\n \n     def test_read_columns(self):\n         data = {'foo': [1, 2, 3, 4],\ndiff --git a/python/setup.py b/python/setup.py\nindex 61c9a75a6..7b0f17544 100644\n--- a/python/setup.py\n+++ b/python/setup.py\n@@ -92,7 +92,8 @@ def run(self):\n     # github.com/libdynd/dynd-python\n \n     description = \"Build the C-extensions for arrow\"\n-    user_options = ([('extra-cmake-args=', None, 'extra arguments for CMake'),\n+    user_options = ([('cmake-generator=', None, 'CMake generator'),\n+                     ('extra-cmake-args=', None, 'extra arguments for CMake'),\n                      ('build-type=', None, 'build type (debug or release)'),\n                      ('boost-namespace=', None,\n                       'namespace of boost (default: boost)'),\n@@ -109,6 +110,9 @@ def run(self):\n \n     def initialize_options(self):\n         _build_ext.initialize_options(self)\n+        self.cmake_generator = os.environ.get('PYARROW_CMAKE_GENERATOR')\n+        if not self.cmake_generator and sys.platform == 'win32':\n+            self.cmake_generator = 'Visual Studio 14 2015 Win64'\n         self.extra_cmake_args = os.environ.get('PYARROW_CMAKE_OPTIONS', '')\n         self.build_type = os.environ.get('PYARROW_BUILD_TYPE', 'debug').lower()\n         self.boost_namespace = os.environ.get('PYARROW_BOOST_NAMESPACE', 'boost')\n@@ -133,8 +137,6 @@ def initialize_options(self):\n             os.environ.get('PYARROW_WITH_ORC', '0'))\n         self.bundle_arrow_cpp = strtobool(\n             os.environ.get('PYARROW_BUNDLE_ARROW_CPP', '0'))\n-        # Default is True but this only is actually bundled when\n-        # we also bundle arrow-cpp.\n         self.bundle_boost = strtobool(\n             os.environ.get('PYARROW_BUNDLE_BOOST', '0'))\n \n@@ -174,6 +176,8 @@ def _run_cmake(self):\n                 static_lib_option,\n             ]\n \n+            if self.cmake_generator:\n+                cmake_options += ['-G', self.cmake_generator]\n             if self.with_parquet:\n                 cmake_options.append('-DPYARROW_BUILD_PARQUET=on')\n             if self.with_static_parquet:\n@@ -230,16 +234,12 @@ def _run_cmake(self):\n                 self.spawn(args)\n                 print(\"-- Finished cmake --build for pyarrow\")\n             else:\n-                cmake_generator = 'Visual Studio 14 2015 Win64'\n                 if not is_64_bit:\n                     raise RuntimeError('Not supported on 32-bit Windows')\n \n                 # Generate the build files\n                 cmake_command = (['cmake'] + extra_cmake_args +\n-                                 cmake_options +\n-                                 [source, '-G', cmake_generator])\n-                if \"-G\" in self.extra_cmake_args:\n-                    cmake_command = cmake_command[:-2]\n+                                 cmake_options + [source])\n \n                 print(\"-- Runnning cmake for pyarrow\")\n                 self.spawn(cmake_command)\n@@ -359,7 +359,12 @@ def get_ext_built(self, name):\n         if sys.platform == 'win32':\n             head, tail = os.path.split(name)\n             suffix = sysconfig.get_config_var('SO')\n-            return pjoin(head, self.build_type, tail + suffix)\n+            # Visual Studio seems to differ from other generators in\n+            # where it places output files.\n+            if self.cmake_generator.startswith('Visual Studio'):\n+                return pjoin(head, self.build_type, tail + suffix)\n+            else:\n+                return pjoin(head, tail + suffix)\n         else:\n             suffix = sysconfig.get_config_var('SO')\n             return pjoin(self.build_type, name + suffix)\n\n\n \n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2018-04-09T08:59:42.407+0000",
                    "updated": "2018-04-09T08:59:42.407+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13147967/comment/16430284",
                    "id": "16430284",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "body": "Issue resolved by pull request 1793\n[https://github.com/apache/arrow/pull/1793]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "created": "2018-04-09T08:59:53.820+0000",
                    "updated": "2018-04-09T08:59:53.820+0000"
                }
            ],
            "maxResults": 5,
            "total": 5,
            "startAt": 0
        },
        "customfield_12311820": "0|i3rsdz:",
        "customfield_12314139": null
    }
}