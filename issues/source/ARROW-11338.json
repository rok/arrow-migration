{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13353830",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13353830",
    "key": "ARROW-11338",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12349493",
                "id": "12349493",
                "description": "",
                "name": "4.0.0",
                "archived": false,
                "released": true,
                "releaseDate": "2021-04-26"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "name": "Major",
            "id": "3"
        },
        "labels": [
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [
            {
                "id": "12612004",
                "self": "https://issues.apache.org/jira/rest/api/2/issueLink/12612004",
                "type": {
                    "id": "10001",
                    "name": "dependent",
                    "inward": "is depended upon by",
                    "outward": "depends upon",
                    "self": "https://issues.apache.org/jira/rest/api/2/issueLinkType/10001"
                },
                "outwardIssue": {
                    "id": "13344488",
                    "key": "ARROW-10831",
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13344488",
                    "fields": {
                        "summary": "[C++][Compute] Implemement quantile kernel",
                        "status": {
                            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
                            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
                            "name": "Resolved",
                            "id": "5",
                            "statusCategory": {
                                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                                "id": 3,
                                "key": "done",
                                "colorName": "green",
                                "name": "Done"
                            }
                        },
                        "priority": {
                            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
                            "name": "Major",
                            "id": "3"
                        },
                        "issuetype": {
                            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/2",
                            "id": "2",
                            "description": "A new feature of the product, which has yet to be developed.",
                            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21141&avatarType=issuetype",
                            "name": "New Feature",
                            "subtask": false,
                            "avatarId": 21141
                        }
                    }
                }
            }
        ],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=icook",
            "name": "icook",
            "key": "icook",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=icook&avatarId=29388",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=icook&avatarId=29388",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=icook&avatarId=29388",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=icook&avatarId=29388"
            },
            "displayName": "Ian Cook",
            "active": true,
            "timeZone": "America/New_York"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12333008",
                "id": "12333008",
                "name": "R"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=npr",
            "name": "npr",
            "key": "npr",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
            },
            "displayName": "Neal Richardson",
            "active": true,
            "timeZone": "America/Los_Angeles"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=npr",
            "name": "npr",
            "key": "npr",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
            },
            "displayName": "Neal Richardson",
            "active": true,
            "timeZone": "America/Los_Angeles"
        },
        "aggregateprogress": {
            "progress": 15000,
            "total": 15000,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 15000,
            "total": 15000,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-11338/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 25,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13353830/worklog/575906",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ianmcook opened a new pull request #9875:\nURL: https://github.com/apache/arrow/pull/9875\n\n\n   This adds `quantile()` and `median()` methods for `ArrowTabular` objects\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-04-02T04:37:20.910+0000",
                    "updated": "2021-04-02T04:37:20.910+0000",
                    "started": "2021-04-02T04:37:20.910+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "575906",
                    "issueId": "13353830"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13353830/worklog/575907",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ianmcook commented on a change in pull request #9875:\nURL: https://github.com/apache/arrow/pull/9875#discussion_r606068417\n\n\n\n##########\nFile path: r/R/compute.R\n##########\n@@ -80,6 +80,36 @@ collect_arrays_from_dots <- function(dots) {\n   ChunkedArray$create(!!!arrays)\n }\n \n+#' @export\n+quantile.ArrowDatum <- function(x,\n+                                probs = seq(0, 1, 0.25),\n+                                na.rm = FALSE,\n+                                interpolation = c(\"linear\", \"lower\", \"higher\", \"nearest\", \"midpoint\"),\n+                                ...) {\n\nReview comment:\n       Should I add a docs entry? It doesn't seem necessary except for the interpolation options.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-04-02T04:41:28.481+0000",
                    "updated": "2021-04-02T04:41:28.481+0000",
                    "started": "2021-04-02T04:41:28.481+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "575907",
                    "issueId": "13353830"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13353830/worklog/575909",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ianmcook commented on a change in pull request #9875:\nURL: https://github.com/apache/arrow/pull/9875#discussion_r606068417\n\n\n\n##########\nFile path: r/R/compute.R\n##########\n@@ -80,6 +80,36 @@ collect_arrays_from_dots <- function(dots) {\n   ChunkedArray$create(!!!arrays)\n }\n \n+#' @export\n+quantile.ArrowDatum <- function(x,\n+                                probs = seq(0, 1, 0.25),\n+                                na.rm = FALSE,\n+                                interpolation = c(\"linear\", \"lower\", \"higher\", \"nearest\", \"midpoint\"),\n+                                ...) {\n\nReview comment:\n       Should I add a docs entry for `quantile()`? It doesn't seem necessary except for the interpolation options.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-04-02T04:44:26.444+0000",
                    "updated": "2021-04-02T04:44:26.444+0000",
                    "started": "2021-04-02T04:44:26.444+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "575909",
                    "issueId": "13353830"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13353830/worklog/575912",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "github-actions[bot] commented on pull request #9875:\nURL: https://github.com/apache/arrow/pull/9875#issuecomment-812314963\n\n\n   https://issues.apache.org/jira/browse/ARROW-11338\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-04-02T04:47:39.881+0000",
                    "updated": "2021-04-02T04:47:39.881+0000",
                    "started": "2021-04-02T04:47:39.881+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "575912",
                    "issueId": "13353830"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13353830/worklog/576219",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nealrichardson commented on a change in pull request #9875:\nURL: https://github.com/apache/arrow/pull/9875#discussion_r606352305\n\n\n\n##########\nFile path: r/NAMESPACE\n##########\n@@ -308,6 +311,8 @@ importFrom(rlang,seq2)\n importFrom(rlang,set_names)\n importFrom(rlang,syms)\n importFrom(rlang,warn)\n+importFrom(stats,median)\n+importFrom(stats,quantile)\n\nReview comment:\n       Does this require that we add `stats` to `Imports:` in DESCRIPTION? \n\n##########\nFile path: r/R/compute.R\n##########\n@@ -80,6 +80,36 @@ collect_arrays_from_dots <- function(dots) {\n   ChunkedArray$create(!!!arrays)\n }\n \n+#' @export\n+quantile.ArrowDatum <- function(x,\n+                                probs = seq(0, 1, 0.25),\n+                                na.rm = FALSE,\n+                                interpolation = c(\"linear\", \"lower\", \"higher\", \"nearest\", \"midpoint\"),\n+                                ...) {\n+  if (inherits(x, \"Scalar\")) x <- Array$create(x)\n+  assert_is(probs, c(\"numeric\", \"integer\"))\n+  assert_that(length(probs) > 0)\n+  assert_that(all(probs >= 0 & probs <= 1))\n+  if (!na.rm && TRUE %in% as.vector(unique(is.na(x)))) {\n+    stop(\"Missing values not allowed if 'na.rm' is FALSE\", call. = FALSE)\n\nReview comment:\n       Why doesn't this just return an Array of NA, like `median` does?\r\n   \r\n   Is this a missing feature on the C++ side (needing a JIRA)? \n\n##########\nFile path: r/R/compute.R\n##########\n@@ -80,6 +80,36 @@ collect_arrays_from_dots <- function(dots) {\n   ChunkedArray$create(!!!arrays)\n }\n \n+#' @export\n+quantile.ArrowDatum <- function(x,\n+                                probs = seq(0, 1, 0.25),\n+                                na.rm = FALSE,\n+                                interpolation = c(\"linear\", \"lower\", \"higher\", \"nearest\", \"midpoint\"),\n+                                ...) {\n+  if (inherits(x, \"Scalar\")) x <- Array$create(x)\n+  assert_is(probs, c(\"numeric\", \"integer\"))\n+  assert_that(length(probs) > 0)\n+  assert_that(all(probs >= 0 & probs <= 1))\n+  if (!na.rm && TRUE %in% as.vector(unique(is.na(x)))) {\n\nReview comment:\n       Compare to `scalar_aggregate()` above in this file:\r\n   \r\n   ```suggestion\r\n     if (!na.rm && x$null_count > 0) {\r\n   ```\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-04-02T18:09:10.919+0000",
                    "updated": "2021-04-02T18:09:10.919+0000",
                    "started": "2021-04-02T18:09:10.918+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "576219",
                    "issueId": "13353830"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13353830/worklog/576238",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ianmcook commented on a change in pull request #9875:\nURL: https://github.com/apache/arrow/pull/9875#discussion_r606363910\n\n\n\n##########\nFile path: r/NAMESPACE\n##########\n@@ -308,6 +311,8 @@ importFrom(rlang,seq2)\n importFrom(rlang,set_names)\n importFrom(rlang,syms)\n importFrom(rlang,warn)\n+importFrom(stats,median)\n+importFrom(stats,quantile)\n\nReview comment:\n       Good catch, I think yes.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-04-02T18:35:08.287+0000",
                    "updated": "2021-04-02T18:35:08.287+0000",
                    "started": "2021-04-02T18:35:08.287+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "576238",
                    "issueId": "13353830"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13353830/worklog/576239",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ianmcook commented on a change in pull request #9875:\nURL: https://github.com/apache/arrow/pull/9875#discussion_r606365095\n\n\n\n##########\nFile path: r/R/compute.R\n##########\n@@ -80,6 +80,36 @@ collect_arrays_from_dots <- function(dots) {\n   ChunkedArray$create(!!!arrays)\n }\n \n+#' @export\n+quantile.ArrowDatum <- function(x,\n+                                probs = seq(0, 1, 0.25),\n+                                na.rm = FALSE,\n+                                interpolation = c(\"linear\", \"lower\", \"higher\", \"nearest\", \"midpoint\"),\n+                                ...) {\n+  if (inherits(x, \"Scalar\")) x <- Array$create(x)\n+  assert_is(probs, c(\"numeric\", \"integer\"))\n+  assert_that(length(probs) > 0)\n+  assert_that(all(probs >= 0 & probs <= 1))\n+  if (!na.rm && TRUE %in% as.vector(unique(is.na(x)))) {\n+    stop(\"Missing values not allowed if 'na.rm' is FALSE\", call. = FALSE)\n\nReview comment:\n       That's what `median` does. This is what `quantile` does when `na.rm = FALSE`.\r\n   \r\n   `median` wraps this but handles the `na.rm = FALSE` case separately so this `stop()` will never run when `median` is called.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-04-02T18:38:11.509+0000",
                    "updated": "2021-04-02T18:38:11.509+0000",
                    "started": "2021-04-02T18:38:11.509+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "576239",
                    "issueId": "13353830"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13353830/worklog/576242",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ianmcook commented on a change in pull request #9875:\nURL: https://github.com/apache/arrow/pull/9875#discussion_r606365682\n\n\n\n##########\nFile path: r/R/compute.R\n##########\n@@ -80,6 +80,36 @@ collect_arrays_from_dots <- function(dots) {\n   ChunkedArray$create(!!!arrays)\n }\n \n+#' @export\n+quantile.ArrowDatum <- function(x,\n+                                probs = seq(0, 1, 0.25),\n+                                na.rm = FALSE,\n+                                interpolation = c(\"linear\", \"lower\", \"higher\", \"nearest\", \"midpoint\"),\n+                                ...) {\n+  if (inherits(x, \"Scalar\")) x <- Array$create(x)\n+  assert_is(probs, c(\"numeric\", \"integer\"))\n+  assert_that(length(probs) > 0)\n+  assert_that(all(probs >= 0 & probs <= 1))\n+  if (!na.rm && TRUE %in% as.vector(unique(is.na(x)))) {\n+    stop(\"Missing values not allowed if 'na.rm' is FALSE\", call. = FALSE)\n+  }\n+  interpolation <- QuantileInterpolation[[toupper(match.arg(interpolation))]]\n+  out <- call_function(\"quantile\", x, options = list(q = probs, interpolation = interpolation))\n+  if (length(out) == 0) {\n+    out <- Array$create(rep(NA_real_, length(probs)))\n+  }\n+  out\n+}\n+\n+#' @export\n+median.ArrowDatum <- function(x, na.rm = FALSE, ...) {\n+  if (!na.rm && TRUE %in% as.vector(unique(is.na(x)))) {\n\nReview comment:\n       ```suggestion\r\n     if (!na.rm && x$null_count > 0) {\r\n   ```\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-04-02T18:40:00.689+0000",
                    "updated": "2021-04-02T18:40:00.689+0000",
                    "started": "2021-04-02T18:40:00.688+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "576242",
                    "issueId": "13353830"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13353830/worklog/576244",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ianmcook commented on a change in pull request #9875:\nURL: https://github.com/apache/arrow/pull/9875#discussion_r606367784\n\n\n\n##########\nFile path: r/NAMESPACE\n##########\n@@ -308,6 +311,8 @@ importFrom(rlang,seq2)\n importFrom(rlang,set_names)\n importFrom(rlang,syms)\n importFrom(rlang,warn)\n+importFrom(stats,median)\n+importFrom(stats,quantile)\n\nReview comment:\n       Added in d697d7c9f947dcf856430d7b78accfbe81149790\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-04-02T18:43:50.521+0000",
                    "updated": "2021-04-02T18:43:50.521+0000",
                    "started": "2021-04-02T18:43:50.521+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "576244",
                    "issueId": "13353830"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13353830/worklog/576259",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nealrichardson commented on a change in pull request #9875:\nURL: https://github.com/apache/arrow/pull/9875#discussion_r606378175\n\n\n\n##########\nFile path: r/R/compute.R\n##########\n@@ -80,6 +80,36 @@ collect_arrays_from_dots <- function(dots) {\n   ChunkedArray$create(!!!arrays)\n }\n \n+#' @export\n+quantile.ArrowDatum <- function(x,\n+                                probs = seq(0, 1, 0.25),\n+                                na.rm = FALSE,\n+                                interpolation = c(\"linear\", \"lower\", \"higher\", \"nearest\", \"midpoint\"),\n+                                ...) {\n+  if (inherits(x, \"Scalar\")) x <- Array$create(x)\n+  assert_is(probs, c(\"numeric\", \"integer\"))\n+  assert_that(length(probs) > 0)\n+  assert_that(all(probs >= 0 & probs <= 1))\n+  if (!na.rm && TRUE %in% as.vector(unique(is.na(x)))) {\n+    stop(\"Missing values not allowed if 'na.rm' is FALSE\", call. = FALSE)\n\nReview comment:\n       Ah, gotcha, this is what R does. Gotta love the inconsistency.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-04-02T19:07:55.691+0000",
                    "updated": "2021-04-02T19:07:55.691+0000",
                    "started": "2021-04-02T19:07:55.691+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "576259",
                    "issueId": "13353830"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13353830/worklog/576264",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nealrichardson commented on a change in pull request #9875:\nURL: https://github.com/apache/arrow/pull/9875#discussion_r606379630\n\n\n\n##########\nFile path: r/R/compute.R\n##########\n@@ -80,6 +80,36 @@ collect_arrays_from_dots <- function(dots) {\n   ChunkedArray$create(!!!arrays)\n }\n \n+#' @export\n+quantile.ArrowDatum <- function(x,\n+                                probs = seq(0, 1, 0.25),\n+                                na.rm = FALSE,\n+                                interpolation = c(\"linear\", \"lower\", \"higher\", \"nearest\", \"midpoint\"),\n+                                ...) {\n\nReview comment:\n       can/should you accept the `type` parameter that `quantile` takes and map to the interpolation methods where appropriate?\r\n   \r\n   We don't have docs for the other compute function methods, but they also don't take additional Arrow arguments IIRC. I don't think docs would help here (if you type `?quantile` you'd have to choose which help page to load, which usually is confusing IME), I'd just make sure that we link to the appropriate C++ docs somewhere (do we need another compute-specific vignette, or save this for when dplyr supports aggregation?)\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-04-02T19:12:03.212+0000",
                    "updated": "2021-04-02T19:12:03.212+0000",
                    "started": "2021-04-02T19:12:03.212+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "576264",
                    "issueId": "13353830"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13353830/worklog/576282",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ianmcook commented on a change in pull request #9875:\nURL: https://github.com/apache/arrow/pull/9875#discussion_r606390946\n\n\n\n##########\nFile path: r/R/compute.R\n##########\n@@ -80,6 +80,36 @@ collect_arrays_from_dots <- function(dots) {\n   ChunkedArray$create(!!!arrays)\n }\n \n+#' @export\n+quantile.ArrowDatum <- function(x,\n+                                probs = seq(0, 1, 0.25),\n+                                na.rm = FALSE,\n+                                interpolation = c(\"linear\", \"lower\", \"higher\", \"nearest\", \"midpoint\"),\n+                                ...) {\n\nReview comment:\n       >can/should you accept the type parameter that quantile takes and map to the interpolation methods where appropriate?\r\n   I was afraid you would ask that \ud83d\ude02\n\n##########\nFile path: r/R/compute.R\n##########\n@@ -80,6 +80,36 @@ collect_arrays_from_dots <- function(dots) {\n   ChunkedArray$create(!!!arrays)\n }\n \n+#' @export\n+quantile.ArrowDatum <- function(x,\n+                                probs = seq(0, 1, 0.25),\n+                                na.rm = FALSE,\n+                                interpolation = c(\"linear\", \"lower\", \"higher\", \"nearest\", \"midpoint\"),\n+                                ...) {\n\nReview comment:\n       >can/should you accept the type parameter that quantile takes and map to the interpolation methods where appropriate?\r\n   \r\n   I was afraid you would ask that \ud83d\ude02\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-04-02T19:44:24.770+0000",
                    "updated": "2021-04-02T19:44:24.770+0000",
                    "started": "2021-04-02T19:44:24.769+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "576282",
                    "issueId": "13353830"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13353830/worklog/576286",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nealrichardson commented on a change in pull request #9875:\nURL: https://github.com/apache/arrow/pull/9875#discussion_r606393391\n\n\n\n##########\nFile path: r/R/compute.R\n##########\n@@ -80,6 +80,36 @@ collect_arrays_from_dots <- function(dots) {\n   ChunkedArray$create(!!!arrays)\n }\n \n+#' @export\n+quantile.ArrowDatum <- function(x,\n+                                probs = seq(0, 1, 0.25),\n+                                na.rm = FALSE,\n+                                interpolation = c(\"linear\", \"lower\", \"higher\", \"nearest\", \"midpoint\"),\n+                                ...) {\n\nReview comment:\n       Ok to defer to a followup, though if you do, it would be good in this PR if our default was the same as the R default (whichever it is) and we errored if the user specifies a non-default value for `type`\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-04-02T19:51:14.706+0000",
                    "updated": "2021-04-02T19:51:14.706+0000",
                    "started": "2021-04-02T19:51:14.705+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "576286",
                    "issueId": "13353830"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13353830/worklog/577120",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ianmcook commented on a change in pull request #9875:\nURL: https://github.com/apache/arrow/pull/9875#discussion_r607349708\n\n\n\n##########\nFile path: r/R/compute.R\n##########\n@@ -80,6 +80,36 @@ collect_arrays_from_dots <- function(dots) {\n   ChunkedArray$create(!!!arrays)\n }\n \n+#' @export\n+quantile.ArrowDatum <- function(x,\n+                                probs = seq(0, 1, 0.25),\n+                                na.rm = FALSE,\n+                                interpolation = c(\"linear\", \"lower\", \"higher\", \"nearest\", \"midpoint\"),\n+                                ...) {\n\nReview comment:\n       In 188ceea3fbc037c3944ac936e9492f9f388f3c95, I added an error if the user specifies a non-default value for `type`\r\n   \r\n   I read through the `quantile` docs and the associated Rob Hyndman paper, but most of the sample quantile types described there are quite different from any of the options implemented in Arrow, so that did not help much. Doing quantitative comparisons was more fruitful. Here's what I found:\r\n   \r\n   - The R default `type = 7` corresponds most closely to the Arrow default `interpolation = \"linear\"` (which is very good)\r\n   - R's `type = 7` seems to correspond closely to Arrow's `interpolation = \"lower\"`\r\n   - None of the other R `type` options and Arrow `interpolation` options exhibit any close correspondence\r\n   \r\n   Based on these findings, and considering how few users will likely attempt to compute quantiles with Arrow using anything but the default type, I don't think there's any immediate action to take here, and I don't really think any follow-up is needed. It seems like a long shot that we would ever implement any of these other quantile algorithms \n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-04-05T21:38:09.472+0000",
                    "updated": "2021-04-05T21:38:09.472+0000",
                    "started": "2021-04-05T21:38:09.471+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "577120",
                    "issueId": "13353830"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13353830/worklog/577121",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ianmcook commented on a change in pull request #9875:\nURL: https://github.com/apache/arrow/pull/9875#discussion_r607349708\n\n\n\n##########\nFile path: r/R/compute.R\n##########\n@@ -80,6 +80,36 @@ collect_arrays_from_dots <- function(dots) {\n   ChunkedArray$create(!!!arrays)\n }\n \n+#' @export\n+quantile.ArrowDatum <- function(x,\n+                                probs = seq(0, 1, 0.25),\n+                                na.rm = FALSE,\n+                                interpolation = c(\"linear\", \"lower\", \"higher\", \"nearest\", \"midpoint\"),\n+                                ...) {\n\nReview comment:\n       In 188ceea3fbc037c3944ac936e9492f9f388f3c95, I added an error if the user specifies a non-default value for `type`\r\n   \r\n   I read through the `quantile` docs and the associated Rob Hyndman paper, but most of the sample quantile types described there are quite different from any of the options implemented in Arrow, so that did not help much. Doing quantitative comparisons was more fruitful. Here's what I found:\r\n   \r\n   - The R default `type = 7` corresponds most closely to the Arrow default `interpolation = \"linear\"` (which is very good)\r\n   - R's `type = 7` seems to correspond closely to Arrow's `interpolation = \"lower\"`\r\n   - None of the other R `type` options and Arrow `interpolation` options exhibit any close correspondence\r\n   \r\n   Based on these findings, and considering how few users will likely attempt to compute quantiles with Arrow using anything but the default type, I don't think there's any immediate action to take here, and I don't really think any follow-up is needed. It seems like a long shot that we would ever implement any of these other quantile algorithms in the C++ library, but I'll open a Jira for that if you think it's worth it.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-04-05T21:38:32.385+0000",
                    "updated": "2021-04-05T21:38:32.385+0000",
                    "started": "2021-04-05T21:38:32.385+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "577121",
                    "issueId": "13353830"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13353830/worklog/577170",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nealrichardson commented on a change in pull request #9875:\nURL: https://github.com/apache/arrow/pull/9875#discussion_r607381273\n\n\n\n##########\nFile path: r/R/compute.R\n##########\n@@ -80,6 +80,46 @@ collect_arrays_from_dots <- function(dots) {\n   ChunkedArray$create(!!!arrays)\n }\n \n+#' @export\n+quantile.ArrowDatum <- function(x,\n+                                probs = seq(0, 1, 0.25),\n+                                na.rm = FALSE,\n+                                type = 7,\n+                                interpolation = c(\"linear\", \"lower\", \"higher\", \"nearest\", \"midpoint\"),\n+                                ...) {\n+  if (inherits(x, \"Scalar\")) x <- Array$create(x)\n+  assert_is(probs, c(\"numeric\", \"integer\"))\n+  assert_that(length(probs) > 0)\n+  assert_that(all(probs >= 0 & probs <= 1))\n+  if (!na.rm && x$null_count > 0) {\n+    stop(\"Missing values not allowed if 'na.rm' is FALSE\", call. = FALSE)\n+  }\n+  if (type != 7) {\n+    stop(\n+      \"Argument `type` not supported in Arrow. To control the quantile \",\n+      \"interpolation algorithm, set argument `interpolation` to one of: \",\n+      \"\\\"linear\\\" (the default), \\\"lower\\\", \\\"higher\\\", \\\"nearest\\\", or \",\n+      \"\\\"midpoint\\\".\",\n+      call. = FALSE\n+    )\n+  }\n+  interpolation <- QuantileInterpolation[[toupper(match.arg(interpolation))]]\n+  out <- call_function(\"quantile\", x, options = list(q = probs, interpolation = interpolation))\n+  if (length(out) == 0) {\n\nReview comment:\n       Why would `out` be length 0?\n\n##########\nFile path: r/tests/testthat/test-compute-aggregate.R\n##########\n@@ -199,6 +199,114 @@ test_that(\"Edge cases\", {\n   }\n })\n \n+test_that(\"quantile.Array and quantile.ChunkedArray\", {\n+  a <- Array$create(c(0, 1, 2, 3))\n+  ca <- ChunkedArray$create(c(0, 1), c(2, 3))\n+  probs <- c(0.49, 0.51)\n+  for(ad in list(a, ca)) {\n+    for (type in c(int32(), uint64(), float64())) {\n+      expect_equal(\n+        quantile(ad$cast(type), probs = probs, interpolation = \"linear\"),\n+        Array$create(c(1.47, 1.53))\n+      )\n+      expect_equal(\n+        quantile(ad$cast(type), probs = probs, interpolation = \"lower\"),\n+        Array$create(c(1, 1))$cast(type)\n+      )\n+      expect_equal(\n+        quantile(ad$cast(type), probs = probs, interpolation = \"higher\"),\n+        Array$create(c(2, 2))$cast(type)\n+      )\n+      expect_equal(\n+        quantile(ad$cast(type), probs = probs, interpolation = \"nearest\"),\n+        Array$create(c(1, 2))$cast(type)\n+      )\n+      expect_equal(\n+        quantile(ad$cast(type), probs = probs, interpolation = \"midpoint\"),\n+        Array$create(c(1.5, 1.5))\n+      )\n+    }\n+  }\n+})\n+\n+test_that(\"quantile and median NAs, edge cases, and exceptions\", {\n+  expect_equal(\n+    quantile(Array$create(c(1, 2)), probs = c(0, 1)),\n+    Array$create(c(1, 2))\n+  )\n+  expect_error(\n+    quantile(Array$create(c(1, 2, NA))),\n+    \"Missing values not allowed if 'na.rm' is FALSE\"\n+  )\n+  expect_equal(\n+    quantile(Array$create(numeric(0))),\n+    Array$create(rep(NA_real_, 5))\n+  )\n+  expect_equal(\n+    quantile(Array$create(rep(NA_integer_, 3)), na.rm = TRUE),\n+    Array$create(rep(NA_real_, 5))\n+  )\n+  expect_error(\n+    median(Array$create(c(1, 2)), probs = c(.25, .75)),\n+    \"formal argument \\\"probs\\\" matched by multiple actual arguments\"\n\nReview comment:\n       This sounds like a base R error message; is it important that we assert it?\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-04-05T23:01:17.708+0000",
                    "updated": "2021-04-05T23:01:17.708+0000",
                    "started": "2021-04-05T23:01:17.707+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "577170",
                    "issueId": "13353830"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13353830/worklog/577232",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ianmcook commented on a change in pull request #9875:\nURL: https://github.com/apache/arrow/pull/9875#discussion_r607417614\n\n\n\n##########\nFile path: r/tests/testthat/test-compute-aggregate.R\n##########\n@@ -199,6 +199,114 @@ test_that(\"Edge cases\", {\n   }\n })\n \n+test_that(\"quantile.Array and quantile.ChunkedArray\", {\n+  a <- Array$create(c(0, 1, 2, 3))\n+  ca <- ChunkedArray$create(c(0, 1), c(2, 3))\n+  probs <- c(0.49, 0.51)\n+  for(ad in list(a, ca)) {\n+    for (type in c(int32(), uint64(), float64())) {\n+      expect_equal(\n+        quantile(ad$cast(type), probs = probs, interpolation = \"linear\"),\n+        Array$create(c(1.47, 1.53))\n+      )\n+      expect_equal(\n+        quantile(ad$cast(type), probs = probs, interpolation = \"lower\"),\n+        Array$create(c(1, 1))$cast(type)\n+      )\n+      expect_equal(\n+        quantile(ad$cast(type), probs = probs, interpolation = \"higher\"),\n+        Array$create(c(2, 2))$cast(type)\n+      )\n+      expect_equal(\n+        quantile(ad$cast(type), probs = probs, interpolation = \"nearest\"),\n+        Array$create(c(1, 2))$cast(type)\n+      )\n+      expect_equal(\n+        quantile(ad$cast(type), probs = probs, interpolation = \"midpoint\"),\n+        Array$create(c(1.5, 1.5))\n+      )\n+    }\n+  }\n+})\n+\n+test_that(\"quantile and median NAs, edge cases, and exceptions\", {\n+  expect_equal(\n+    quantile(Array$create(c(1, 2)), probs = c(0, 1)),\n+    Array$create(c(1, 2))\n+  )\n+  expect_error(\n+    quantile(Array$create(c(1, 2, NA))),\n+    \"Missing values not allowed if 'na.rm' is FALSE\"\n+  )\n+  expect_equal(\n+    quantile(Array$create(numeric(0))),\n+    Array$create(rep(NA_real_, 5))\n+  )\n+  expect_equal(\n+    quantile(Array$create(rep(NA_integer_, 3)), na.rm = TRUE),\n+    Array$create(rep(NA_real_, 5))\n+  )\n+  expect_error(\n+    median(Array$create(c(1, 2)), probs = c(.25, .75)),\n+    \"formal argument \\\"probs\\\" matched by multiple actual arguments\"\n\nReview comment:\n       Correct. No, I can remove it\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-04-06T00:56:40.463+0000",
                    "updated": "2021-04-06T00:56:40.463+0000",
                    "started": "2021-04-06T00:56:40.463+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "577232",
                    "issueId": "13353830"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13353830/worklog/577234",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ianmcook commented on a change in pull request #9875:\nURL: https://github.com/apache/arrow/pull/9875#discussion_r607418316\n\n\n\n##########\nFile path: r/R/compute.R\n##########\n@@ -80,6 +80,46 @@ collect_arrays_from_dots <- function(dots) {\n   ChunkedArray$create(!!!arrays)\n }\n \n+#' @export\n+quantile.ArrowDatum <- function(x,\n+                                probs = seq(0, 1, 0.25),\n+                                na.rm = FALSE,\n+                                type = 7,\n+                                interpolation = c(\"linear\", \"lower\", \"higher\", \"nearest\", \"midpoint\"),\n+                                ...) {\n+  if (inherits(x, \"Scalar\")) x <- Array$create(x)\n+  assert_is(probs, c(\"numeric\", \"integer\"))\n+  assert_that(length(probs) > 0)\n+  assert_that(all(probs >= 0 & probs <= 1))\n+  if (!na.rm && x$null_count > 0) {\n+    stop(\"Missing values not allowed if 'na.rm' is FALSE\", call. = FALSE)\n+  }\n+  if (type != 7) {\n+    stop(\n+      \"Argument `type` not supported in Arrow. To control the quantile \",\n+      \"interpolation algorithm, set argument `interpolation` to one of: \",\n+      \"\\\"linear\\\" (the default), \\\"lower\\\", \\\"higher\\\", \\\"nearest\\\", or \",\n+      \"\\\"midpoint\\\".\",\n+      call. = FALSE\n+    )\n+  }\n+  interpolation <- QuantileInterpolation[[toupper(match.arg(interpolation))]]\n+  out <- call_function(\"quantile\", x, options = list(q = probs, interpolation = interpolation))\n+  if (length(out) == 0) {\n\nReview comment:\n       When there are zero non-null values in the data, the Arrow `quantile` function Arrow returns an empty Array, whereas R's `quantile` returns a vector of `NA`s.\n\n##########\nFile path: r/R/compute.R\n##########\n@@ -80,6 +80,46 @@ collect_arrays_from_dots <- function(dots) {\n   ChunkedArray$create(!!!arrays)\n }\n \n+#' @export\n+quantile.ArrowDatum <- function(x,\n+                                probs = seq(0, 1, 0.25),\n+                                na.rm = FALSE,\n+                                type = 7,\n+                                interpolation = c(\"linear\", \"lower\", \"higher\", \"nearest\", \"midpoint\"),\n+                                ...) {\n+  if (inherits(x, \"Scalar\")) x <- Array$create(x)\n+  assert_is(probs, c(\"numeric\", \"integer\"))\n+  assert_that(length(probs) > 0)\n+  assert_that(all(probs >= 0 & probs <= 1))\n+  if (!na.rm && x$null_count > 0) {\n+    stop(\"Missing values not allowed if 'na.rm' is FALSE\", call. = FALSE)\n+  }\n+  if (type != 7) {\n+    stop(\n+      \"Argument `type` not supported in Arrow. To control the quantile \",\n+      \"interpolation algorithm, set argument `interpolation` to one of: \",\n+      \"\\\"linear\\\" (the default), \\\"lower\\\", \\\"higher\\\", \\\"nearest\\\", or \",\n+      \"\\\"midpoint\\\".\",\n+      call. = FALSE\n+    )\n+  }\n+  interpolation <- QuantileInterpolation[[toupper(match.arg(interpolation))]]\n+  out <- call_function(\"quantile\", x, options = list(q = probs, interpolation = interpolation))\n+  if (length(out) == 0) {\n\nReview comment:\n       When there are no non-null values in the data, the Arrow `quantile` function Arrow returns an empty Array, whereas R's `quantile` returns a vector of `NA`s.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-04-06T00:59:08.722+0000",
                    "updated": "2021-04-06T00:59:08.722+0000",
                    "started": "2021-04-06T00:59:08.722+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "577234",
                    "issueId": "13353830"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13353830/worklog/577235",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ianmcook commented on a change in pull request #9875:\nURL: https://github.com/apache/arrow/pull/9875#discussion_r607418316\n\n\n\n##########\nFile path: r/R/compute.R\n##########\n@@ -80,6 +80,46 @@ collect_arrays_from_dots <- function(dots) {\n   ChunkedArray$create(!!!arrays)\n }\n \n+#' @export\n+quantile.ArrowDatum <- function(x,\n+                                probs = seq(0, 1, 0.25),\n+                                na.rm = FALSE,\n+                                type = 7,\n+                                interpolation = c(\"linear\", \"lower\", \"higher\", \"nearest\", \"midpoint\"),\n+                                ...) {\n+  if (inherits(x, \"Scalar\")) x <- Array$create(x)\n+  assert_is(probs, c(\"numeric\", \"integer\"))\n+  assert_that(length(probs) > 0)\n+  assert_that(all(probs >= 0 & probs <= 1))\n+  if (!na.rm && x$null_count > 0) {\n+    stop(\"Missing values not allowed if 'na.rm' is FALSE\", call. = FALSE)\n+  }\n+  if (type != 7) {\n+    stop(\n+      \"Argument `type` not supported in Arrow. To control the quantile \",\n+      \"interpolation algorithm, set argument `interpolation` to one of: \",\n+      \"\\\"linear\\\" (the default), \\\"lower\\\", \\\"higher\\\", \\\"nearest\\\", or \",\n+      \"\\\"midpoint\\\".\",\n+      call. = FALSE\n+    )\n+  }\n+  interpolation <- QuantileInterpolation[[toupper(match.arg(interpolation))]]\n+  out <- call_function(\"quantile\", x, options = list(q = probs, interpolation = interpolation))\n+  if (length(out) == 0) {\n\nReview comment:\n       When there are no non-null values in the data, the Arrow `quantile` function returns an empty Array, whereas R's `quantile` returns a vector of `NA`s.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-04-06T00:59:21.638+0000",
                    "updated": "2021-04-06T00:59:21.638+0000",
                    "started": "2021-04-06T00:59:21.638+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "577235",
                    "issueId": "13353830"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13353830/worklog/577238",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ianmcook commented on a change in pull request #9875:\nURL: https://github.com/apache/arrow/pull/9875#discussion_r607421980\n\n\n\n##########\nFile path: r/R/compute.R\n##########\n@@ -80,6 +80,46 @@ collect_arrays_from_dots <- function(dots) {\n   ChunkedArray$create(!!!arrays)\n }\n \n+#' @export\n+quantile.ArrowDatum <- function(x,\n+                                probs = seq(0, 1, 0.25),\n+                                na.rm = FALSE,\n+                                type = 7,\n+                                interpolation = c(\"linear\", \"lower\", \"higher\", \"nearest\", \"midpoint\"),\n+                                ...) {\n+  if (inherits(x, \"Scalar\")) x <- Array$create(x)\n+  assert_is(probs, c(\"numeric\", \"integer\"))\n+  assert_that(length(probs) > 0)\n+  assert_that(all(probs >= 0 & probs <= 1))\n+  if (!na.rm && x$null_count > 0) {\n+    stop(\"Missing values not allowed if 'na.rm' is FALSE\", call. = FALSE)\n+  }\n+  if (type != 7) {\n+    stop(\n+      \"Argument `type` not supported in Arrow. To control the quantile \",\n+      \"interpolation algorithm, set argument `interpolation` to one of: \",\n+      \"\\\"linear\\\" (the default), \\\"lower\\\", \\\"higher\\\", \\\"nearest\\\", or \",\n+      \"\\\"midpoint\\\".\",\n+      call. = FALSE\n+    )\n+  }\n+  interpolation <- QuantileInterpolation[[toupper(match.arg(interpolation))]]\n+  out <- call_function(\"quantile\", x, options = list(q = probs, interpolation = interpolation))\n+  if (length(out) == 0) {\n\nReview comment:\n       ```r\r\n   arrow:::call_function(\"quantile\", Array$create(c(NA_real_, NA_real_)), options = list(q = c(0.25, 0.5, 0.75)))\r\n   #> Array\r\n   #> <double>\r\n   #> []\r\n   \r\n   quantile(c(NA_real_, NA_real_), probs = c(0.25, 0.5, 0.75), na.rm = TRUE)\r\n   #> 25% 50% 75% \r\n    #> NA  NA  NA \r\n   ```\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-04-06T01:11:30.994+0000",
                    "updated": "2021-04-06T01:11:30.994+0000",
                    "started": "2021-04-06T01:11:30.994+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "577238",
                    "issueId": "13353830"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/2",
            "id": "2",
            "description": "A new feature of the product, which has yet to be developed.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21141&avatarType=issuetype",
            "name": "New Feature",
            "subtask": false,
            "avatarId": 21141
        },
        "timespent": 15000,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@5f2bebdf[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@3ff52a50[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@4db8989d[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@5b098cd0[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@77198740[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@5549dcec[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@5c3ccaa8[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@4bc4b2f3[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@705c1f4c[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@6b691317[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@513afd58[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@3f078ea6[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 15000,
        "customfield_12312520": null,
        "customfield_12312521": "Tue Apr 06 04:22:50 UTC 2021",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2021-04-06T04:22:50.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-11338/watchers",
            "watchCount": 2,
            "isWatching": false
        },
        "created": "2021-01-21T19:34:56.000+0000",
        "updated": "2021-04-06T04:23:01.000+0000",
        "timeoriginalestimate": null,
        "description": "Following ARROW-10831",
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "4h 10m",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 15000
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[R] Bindings for quantile and median ",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13353830/comment/17315225",
                    "id": "17315225",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=npr",
                        "name": "npr",
                        "key": "npr",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
                        },
                        "displayName": "Neal Richardson",
                        "active": true,
                        "timeZone": "America/Los_Angeles"
                    },
                    "body": "Issue resolved by pull request 9875\n[https://github.com/apache/arrow/pull/9875]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=npr",
                        "name": "npr",
                        "key": "npr",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
                        },
                        "displayName": "Neal Richardson",
                        "active": true,
                        "timeZone": "America/Los_Angeles"
                    },
                    "created": "2021-04-06T04:22:50.498+0000",
                    "updated": "2021-04-06T04:22:50.498+0000"
                }
            ],
            "maxResults": 1,
            "total": 1,
            "startAt": 0
        },
        "customfield_12311820": "0|z0muuw:",
        "customfield_12314139": null
    }
}