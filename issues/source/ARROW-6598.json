{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13257373",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13257373",
    "key": "ARROW-6598",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12340948",
                "id": "12340948",
                "description": "",
                "name": "0.16.0",
                "archived": false,
                "released": true,
                "releaseDate": "2020-02-07"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/4",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
            "name": "Minor",
            "id": "4"
        },
        "labels": [
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=fan_li_ya",
            "name": "fan_li_ya",
            "key": "fan_li_ya",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
            },
            "displayName": "Liya Fan",
            "active": true,
            "timeZone": "Asia/Shanghai"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12328933",
                "id": "12328933",
                "name": "Java"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=fan_li_ya",
            "name": "fan_li_ya",
            "key": "fan_li_ya",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
            },
            "displayName": "Liya Fan",
            "active": true,
            "timeZone": "Asia/Shanghai"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=fan_li_ya",
            "name": "fan_li_ya",
            "key": "fan_li_ya",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
            },
            "displayName": "Liya Fan",
            "active": true,
            "timeZone": "Asia/Shanghai"
        },
        "aggregateprogress": {
            "progress": 9000,
            "total": 9000,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 9000,
            "total": 9000,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-6598/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 15,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13257373/worklog/314292",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "liyafan82 commented on pull request #5418: [ARROW-6598][Java] Sort the code for ApproxEqualsVisitor\nURL: https://github.com/apache/arrow/pull/5418\n \n \n   As a follow up issue of ARROW-6458, we finalize the code for ApproxEqualsVisitor.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-09-18T13:05:38.628+0000",
                    "updated": "2019-09-18T13:05:38.628+0000",
                    "started": "2019-09-18T13:05:38.627+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "314292",
                    "issueId": "13257373"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13257373/worklog/314297",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "liyafan82 commented on issue #5418: [ARROW-6598][Java] Sort the code for ApproxEqualsVisitor\nURL: https://github.com/apache/arrow/pull/5418#issuecomment-532677770\n \n \n   @emkornfield \r\n   Please let me share some performance stats.\r\n   Recall that in the previous PR we have \r\n   \r\n   Before:\r\n   FloatingPointBenchmarks.approxEqualsBenchmark avgt 5 14.480 \u00b1 0.023 us/op\r\n   \r\n   After:\r\n   FloatingPointBenchmarks.approxEqualsBenchmark avgt 5 13.517 \u00b1 0.041 us/op\r\n   \r\n   In this PR, I first tried to consolidate the code for float4 and float8, using single members for FloatingPointVector. \r\n   This makes the code much simpler, however, it led to performance degradation (as you have expected), due to virtual method calls & extra data conversion (float4 to float8):\r\n   \r\n   FloatingPointBenchmarks.approxEqualsBenchmark  avgt    5  16.111 \u00b1 0.070  us/op\r\n   \r\n   So I think we had better preserve both members for float4 and float 4, and the performance results returned to the previous level:\r\n   \r\n   FloatingPointBenchmarks.approxEqualsBenchmark  avgt    5  13.408 \u00b1 0.073  us/op\r\n   \r\n   What do you think?\r\n   \r\n   In this PR, we also give an interface for the customizing the equality semantics (as discussed in https://docs.google.com/document/d/17nqHWS7gs0vARfeDAcUEbhKMOYHnCtA46TOY_Nls69s/), and some utilities. Please take a look.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-09-18T13:12:35.913+0000",
                    "updated": "2019-09-18T13:12:35.913+0000",
                    "started": "2019-09-18T13:12:35.913+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "314297",
                    "issueId": "13257373"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13257373/worklog/314476",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "codecov-io commented on issue #5418: [ARROW-6598][Java] Sort the code for ApproxEqualsVisitor\nURL: https://github.com/apache/arrow/pull/5418#issuecomment-532773888\n \n \n   # [Codecov](https://codecov.io/gh/apache/arrow/pull/5418?src=pr&el=h1) Report\n   > :exclamation: No coverage uploaded for pull request base (`master@3c13d22`). [Click here to learn what that means](https://docs.codecov.io/docs/error-reference#section-missing-base-commit).\n   > The diff coverage is `n/a`.\n   \n   [![Impacted file tree graph](https://codecov.io/gh/apache/arrow/pull/5418/graphs/tree.svg?width=650&token=LpTCFbqVT1&height=150&src=pr)](https://codecov.io/gh/apache/arrow/pull/5418?src=pr&el=tree)\n   \n   ```diff\n   @@            Coverage Diff            @@\n   ##             master    #5418   +/-   ##\n   =========================================\n     Coverage          ?   89.54%           \n   =========================================\n     Files             ?      707           \n     Lines             ?   107694           \n     Branches          ?        0           \n   =========================================\n     Hits              ?    96433           \n     Misses            ?    11261           \n     Partials          ?        0\n   ```\n   \n   \n   \n   ------\n   \n   [Continue to review full report at Codecov](https://codecov.io/gh/apache/arrow/pull/5418?src=pr&el=continue).\n   > **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n   > `\u0394 = absolute <relative> (impact)`, `\u00f8 = not affected`, `? = missing data`\n   > Powered by [Codecov](https://codecov.io/gh/apache/arrow/pull/5418?src=pr&el=footer). Last update [3c13d22...e27f8b7](https://codecov.io/gh/apache/arrow/pull/5418?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n   \n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-09-18T16:58:11.233+0000",
                    "updated": "2019-09-18T16:58:11.233+0000",
                    "started": "2019-09-18T16:58:11.232+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "314476",
                    "issueId": "13257373"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13257373/worklog/322961",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on issue #5418: [ARROW-6598][Java] Sort the code for ApproxEqualsVisitor\nURL: https://github.com/apache/arrow/pull/5418#issuecomment-538124138\n \n \n   @emkornfield @jacques-n @pravindra feedback on this one?\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-10-03T20:53:53.819+0000",
                    "updated": "2019-10-03T20:53:53.819+0000",
                    "started": "2019-10-03T20:53:53.818+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "322961",
                    "issueId": "13257373"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13257373/worklog/323730",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "emkornfield commented on issue #5418: [ARROW-6598][Java] Sort the code for ApproxEqualsVisitor\nURL: https://github.com/apache/arrow/pull/5418#issuecomment-538556556\n \n \n   @liyafan82 I'm not sure the title/description still make sense.  Could you update with a current description of code changes?\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-10-04T20:55:04.535+0000",
                    "updated": "2019-10-04T20:55:04.535+0000",
                    "started": "2019-10-04T20:55:04.535+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "323730",
                    "issueId": "13257373"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13257373/worklog/323887",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "liyafan82 commented on issue #5418: ARROW-6598: [Java] Sort the code for ApproxEqualsVisitor and provide an interface for custom vector equality\nURL: https://github.com/apache/arrow/pull/5418#issuecomment-538624913\n \n \n   > @liyafan82 I'm not sure the title/description still make sense. Could you update with a current description of code changes?\r\n   \r\n   @emkornfield I have reread the description. I think it still makes sense: previously, we intended to consolidate code in this PR. However, in this PR, we found it is inefficient to consolidate the members for float4 and float8. \r\n   \r\n   Therefore, this PR essentially provides an interface for determining customized vector equality, and make ApproxEqualsVisitor use that interface. I have updated the title accordingly.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-10-05T07:15:11.049+0000",
                    "updated": "2019-10-05T07:15:11.049+0000",
                    "started": "2019-10-05T07:15:11.049+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "323887",
                    "issueId": "13257373"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13257373/worklog/324005",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "codecov-io commented on issue #5418: ARROW-6598: [Java] Sort the code for ApproxEqualsVisitor and provide an interface for custom vector equality\nURL: https://github.com/apache/arrow/pull/5418#issuecomment-532773888\n \n \n   # [Codecov](https://codecov.io/gh/apache/arrow/pull/5418?src=pr&el=h1) Report\n   > Merging [#5418](https://codecov.io/gh/apache/arrow/pull/5418?src=pr&el=desc) into [master](https://codecov.io/gh/apache/arrow/commit/af097e67ac1f06aa8c9ed3f5d60d21816e820fc0?src=pr&el=desc) will **increase** coverage by `1.01%`.\n   > The diff coverage is `n/a`.\n   \n   [![Impacted file tree graph](https://codecov.io/gh/apache/arrow/pull/5418/graphs/tree.svg?width=650&token=LpTCFbqVT1&height=150&src=pr)](https://codecov.io/gh/apache/arrow/pull/5418?src=pr&el=tree)\n   \n   ```diff\n   @@            Coverage Diff             @@\n   ##           master    #5418      +/-   ##\n   ==========================================\n   + Coverage   88.79%    89.8%   +1.01%     \n   ==========================================\n     Files         983      732     -251     \n     Lines      132170   112106   -20064     \n     Branches     1501        0    -1501     \n   ==========================================\n   - Hits       117362   100682   -16680     \n   + Misses      14443    11424    -3019     \n   + Partials      365        0     -365\n   ```\n   \n   \n   | [Impacted Files](https://codecov.io/gh/apache/arrow/pull/5418?src=pr&el=tree) | Coverage \u0394 | |\n   |---|---|---|\n   | [cpp/src/arrow/filesystem/s3\\_internal.h](https://codecov.io/gh/apache/arrow/pull/5418/diff?src=pr&el=tree#diff-Y3BwL3NyYy9hcnJvdy9maWxlc3lzdGVtL3MzX2ludGVybmFsLmg=) | `90.74% <0%> (-3.71%)` | :arrow_down: |\n   | [python/pyarrow/plasma.py](https://codecov.io/gh/apache/arrow/pull/5418/diff?src=pr&el=tree#diff-cHl0aG9uL3B5YXJyb3cvcGxhc21hLnB5) | `58.9% <0%> (-1.37%)` | :arrow_down: |\n   | [r/src/recordbatch.cpp](https://codecov.io/gh/apache/arrow/pull/5418/diff?src=pr&el=tree#diff-ci9zcmMvcmVjb3JkYmF0Y2guY3Bw) | | |\n   | [go/arrow/math/uint64\\_amd64.go](https://codecov.io/gh/apache/arrow/pull/5418/diff?src=pr&el=tree#diff-Z28vYXJyb3cvbWF0aC91aW50NjRfYW1kNjQuZ28=) | | |\n   | [r/R/filesystem.R](https://codecov.io/gh/apache/arrow/pull/5418/diff?src=pr&el=tree#diff-ci9SL2ZpbGVzeXN0ZW0uUg==) | | |\n   | [r/R/list.R](https://codecov.io/gh/apache/arrow/pull/5418/diff?src=pr&el=tree#diff-ci9SL2xpc3QuUg==) | | |\n   | [r/src/symbols.cpp](https://codecov.io/gh/apache/arrow/pull/5418/diff?src=pr&el=tree#diff-ci9zcmMvc3ltYm9scy5jcHA=) | | |\n   | [r/src/array\\_to\\_vector.cpp](https://codecov.io/gh/apache/arrow/pull/5418/diff?src=pr&el=tree#diff-ci9zcmMvYXJyYXlfdG9fdmVjdG9yLmNwcA==) | | |\n   | [go/arrow/ipc/file\\_reader.go](https://codecov.io/gh/apache/arrow/pull/5418/diff?src=pr&el=tree#diff-Z28vYXJyb3cvaXBjL2ZpbGVfcmVhZGVyLmdv) | | |\n   | [js/src/builder/index.ts](https://codecov.io/gh/apache/arrow/pull/5418/diff?src=pr&el=tree#diff-anMvc3JjL2J1aWxkZXIvaW5kZXgudHM=) | | |\n   | ... and [246 more](https://codecov.io/gh/apache/arrow/pull/5418/diff?src=pr&el=tree-more) | |\n   \n   ------\n   \n   [Continue to review full report at Codecov](https://codecov.io/gh/apache/arrow/pull/5418?src=pr&el=continue).\n   > **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n   > `\u0394 = absolute <relative> (impact)`, `\u00f8 = not affected`, `? = missing data`\n   > Powered by [Codecov](https://codecov.io/gh/apache/arrow/pull/5418?src=pr&el=footer). Last update [af097e6...e1006ae](https://codecov.io/gh/apache/arrow/pull/5418?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n   \n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-10-06T04:15:38.274+0000",
                    "updated": "2019-10-06T04:15:38.274+0000",
                    "started": "2019-10-06T04:15:38.273+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "324005",
                    "issueId": "13257373"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13257373/worklog/327206",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "emkornfield commented on pull request #5418: ARROW-6598: [Java] Sort the code for ApproxEqualsVisitor and provide an interface for custom vector equality\nURL: https://github.com/apache/arrow/pull/5418#discussion_r334221209\n \n \n\n ##########\n File path: java/vector/src/main/java/org/apache/arrow/vector/compare/VectorValueEqualizer.java\n ##########\n @@ -0,0 +1,38 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.arrow.vector.compare;\n+\n+import org.apache.arrow.vector.ValueVector;\n+\n+/**\n+ * A function to determine if two vectors are equal at specified positions.\n+ * @param <V> the vector type.\n+ */\n+public interface VectorValueEqualizer<V extends ValueVector> {\n \n Review comment:\n   why the generic?\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-10-12T05:09:42.200+0000",
                    "updated": "2019-10-12T05:09:42.200+0000",
                    "started": "2019-10-12T05:09:42.199+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "327206",
                    "issueId": "13257373"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13257373/worklog/327227",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "liyafan82 commented on pull request #5418: ARROW-6598: [Java] Sort the code for ApproxEqualsVisitor and provide an interface for custom vector equality\nURL: https://github.com/apache/arrow/pull/5418#discussion_r334223379\n \n \n\n ##########\n File path: java/vector/src/main/java/org/apache/arrow/vector/compare/VectorValueEqualizer.java\n ##########\n @@ -0,0 +1,38 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.arrow.vector.compare;\n+\n+import org.apache.arrow.vector.ValueVector;\n+\n+/**\n+ * A function to determine if two vectors are equal at specified positions.\n+ * @param <V> the vector type.\n+ */\n+public interface VectorValueEqualizer<V extends ValueVector> {\n \n Review comment:\n   I think this is a general question. \r\n   The value of generic is that it gives the Java compiler a chance to discover potential (type related) errors in the code, and prevent them from ever happening at runtime.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-10-12T06:30:15.804+0000",
                    "updated": "2019-10-12T06:30:15.804+0000",
                    "started": "2019-10-12T06:30:15.803+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "327227",
                    "issueId": "13257373"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13257373/worklog/329038",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "tianchen92 commented on pull request #5418: ARROW-6598: [Java] Sort the code for ApproxEqualsVisitor and provide an interface for custom vector equality\nURL: https://github.com/apache/arrow/pull/5418#discussion_r335340468\n \n \n\n ##########\n File path: java/vector/src/main/java/org/apache/arrow/vector/compare/ApproxEqualsVisitor.java\n ##########\n @@ -52,18 +53,8 @@ public ApproxEqualsVisitor(ValueVector left, ValueVector right, float floatEpsil\n     this.floatEpsilon = floatEpsilon;\n     this.doubleEpsilon = doubleEpsilon;\n \n-    floatDiffFunction =\n-        (float value1, float value2) -> Math.abs(value1 - value2) <= floatEpsilon;\n-    doubleDiffFunction =\n-        (double value1, double value2) -> Math.abs(value1 - value2) <= doubleEpsilon;\n-  }\n-\n-  public void setFloatDiffFunction(DiffFunctionFloat floatDiffFunction) {\n-    this.floatDiffFunction = floatDiffFunction;\n-  }\n-\n-  public void setDoubleDiffFunction(DiffFunctionDouble doubleDiffFunction) {\n \n Review comment:\n   We shouldn't limit diffFunction to Math.abs(d1 - d2) <= epsilon(i.e. Validator.java has different implementation)? To make it more flexible, we should keep APIs like these two for setting special diffFunction?\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-10-16T08:30:03.424+0000",
                    "updated": "2019-10-16T08:30:03.424+0000",
                    "started": "2019-10-16T08:30:03.424+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "329038",
                    "issueId": "13257373"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13257373/worklog/329582",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "liyafan82 commented on pull request #5418: ARROW-6598: [Java] Sort the code for ApproxEqualsVisitor and provide an interface for custom vector equality\nURL: https://github.com/apache/arrow/pull/5418#discussion_r335807897\n \n \n\n ##########\n File path: java/vector/src/main/java/org/apache/arrow/vector/compare/ApproxEqualsVisitor.java\n ##########\n @@ -52,18 +53,8 @@ public ApproxEqualsVisitor(ValueVector left, ValueVector right, float floatEpsil\n     this.floatEpsilon = floatEpsilon;\n     this.doubleEpsilon = doubleEpsilon;\n \n-    floatDiffFunction =\n-        (float value1, float value2) -> Math.abs(value1 - value2) <= floatEpsilon;\n-    doubleDiffFunction =\n-        (double value1, double value2) -> Math.abs(value1 - value2) <= doubleEpsilon;\n-  }\n-\n-  public void setFloatDiffFunction(DiffFunctionFloat floatDiffFunction) {\n-    this.floatDiffFunction = floatDiffFunction;\n-  }\n-\n-  public void setDoubleDiffFunction(DiffFunctionDouble doubleDiffFunction) {\n \n Review comment:\n   Sure. Agreed with you. Thanks. \r\n   I have updated the code to allow arbitrary equalization functions. In addition, we have provided copy operation to the equalization function to avoid problem related to thread-safe.\r\n   Please take a look. \n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-10-17T04:46:06.314+0000",
                    "updated": "2019-10-17T04:46:06.314+0000",
                    "started": "2019-10-17T04:46:06.313+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "329582",
                    "issueId": "13257373"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13257373/worklog/333122",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "emkornfield commented on pull request #5418: ARROW-6598: [Java] Sort the code for ApproxEqualsVisitor and provide an interface for custom vector equality\nURL: https://github.com/apache/arrow/pull/5418#discussion_r338393124\n \n \n\n ##########\n File path: java/vector/src/main/java/org/apache/arrow/vector/compare/util/ValueEpsilonEqualizers.java\n ##########\n @@ -0,0 +1,149 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.arrow.vector.compare.util;\n+\n+import org.apache.arrow.vector.Float4Vector;\n+import org.apache.arrow.vector.Float8Vector;\n+import org.apache.arrow.vector.FloatingPointVector;\n+import org.apache.arrow.vector.compare.VectorValueEqualizer;\n+\n+/**\n+ * Vector value equalizers that regard values as equal if their difference\n+ * is within a small threshold (epsilon).\n+ */\n+public class ValueEpsilonEqualizers {\n+\n+  private ValueEpsilonEqualizers() {\n+\n+  }\n+\n+  /**\n+   * Difference function for floating point values.\n+   */\n+  public static class FloatingPointEpsilonEqualizer implements VectorValueEqualizer<FloatingPointVector> {\n+    private final double epsilon;\n+\n+    public FloatingPointEpsilonEqualizer(double epsilon) {\n+      this.epsilon = epsilon;\n+    }\n+\n+    @Override\n+    public final boolean valuesEqual(\n+            FloatingPointVector vector1, int index1, FloatingPointVector vector2, int index2) {\n+      boolean isNull1 = vector1.isNull(index1);\n+      boolean isNull2 = vector2.isNull(index2);\n+\n+      if (isNull1 || isNull2) {\n+        return isNull1 == isNull2;\n+      }\n+\n+      double d1 = vector1.getValueAsDouble(index1);\n+      double d2 = vector2.getValueAsDouble(index2);\n+\n+      if (Double.isNaN(d1)) {\n+        return Double.isNaN(d2);\n+      }\n+      if (Double.isInfinite(d1)) {\n+        return Double.isInfinite(d2) && Math.signum(d1) == Math.signum(d2);\n+      }\n+\n+      return Math.abs(d1 - d2) <= epsilon;\n+    }\n+\n+    @Override\n+    public VectorValueEqualizer<FloatingPointVector> copy() {\n+      return new FloatingPointEpsilonEqualizer(epsilon);\n+    }\n+  }\n+\n+  /**\n+   * Difference function for float values.\n+   */\n+  public static class Float4EpsilonEqualizer implements VectorValueEqualizer<Float4Vector> {\n+    private final float epsilon;\n+\n+    public Float4EpsilonEqualizer(float epsilon) {\n+      this.epsilon = epsilon;\n+    }\n+\n+    @Override\n+    public final boolean valuesEqual(Float4Vector vector1, int index1, Float4Vector vector2, int index2) {\n+      boolean isNull1 = vector1.isNull(index1);\n+      boolean isNull2 = vector2.isNull(index2);\n+\n+      if (isNull1 || isNull2) {\n+        return isNull1 == isNull2;\n+      }\n+\n+      float f1 = vector1.get(index1);\n+      float f2 = vector2.get(index2);\n+\n+      if (Float.isNaN(f1)) {\n+        return Float.isNaN(f2);\n+      }\n+      if (Float.isInfinite(f1)) {\n+        return Float.isInfinite(f2) && Math.signum(f1) == Math.signum(f2);\n+      }\n+\n+      return Math.abs(f1 - f2) <= epsilon;\n+    }\n+\n+    @Override\n+    public VectorValueEqualizer<Float4Vector> copy() {\n \n Review comment:\n   cloneable?\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-10-24T05:59:35.542+0000",
                    "updated": "2019-10-24T05:59:35.542+0000",
                    "started": "2019-10-24T05:59:35.542+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "333122",
                    "issueId": "13257373"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13257373/worklog/333197",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "liyafan82 commented on pull request #5418: ARROW-6598: [Java] Sort the code for ApproxEqualsVisitor and provide an interface for custom vector equality\nURL: https://github.com/apache/arrow/pull/5418#discussion_r338448760\n \n \n\n ##########\n File path: java/vector/src/main/java/org/apache/arrow/vector/compare/util/ValueEpsilonEqualizers.java\n ##########\n @@ -0,0 +1,149 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.arrow.vector.compare.util;\n+\n+import org.apache.arrow.vector.Float4Vector;\n+import org.apache.arrow.vector.Float8Vector;\n+import org.apache.arrow.vector.FloatingPointVector;\n+import org.apache.arrow.vector.compare.VectorValueEqualizer;\n+\n+/**\n+ * Vector value equalizers that regard values as equal if their difference\n+ * is within a small threshold (epsilon).\n+ */\n+public class ValueEpsilonEqualizers {\n+\n+  private ValueEpsilonEqualizers() {\n+\n+  }\n+\n+  /**\n+   * Difference function for floating point values.\n+   */\n+  public static class FloatingPointEpsilonEqualizer implements VectorValueEqualizer<FloatingPointVector> {\n+    private final double epsilon;\n+\n+    public FloatingPointEpsilonEqualizer(double epsilon) {\n+      this.epsilon = epsilon;\n+    }\n+\n+    @Override\n+    public final boolean valuesEqual(\n+            FloatingPointVector vector1, int index1, FloatingPointVector vector2, int index2) {\n+      boolean isNull1 = vector1.isNull(index1);\n+      boolean isNull2 = vector2.isNull(index2);\n+\n+      if (isNull1 || isNull2) {\n+        return isNull1 == isNull2;\n+      }\n+\n+      double d1 = vector1.getValueAsDouble(index1);\n+      double d2 = vector2.getValueAsDouble(index2);\n+\n+      if (Double.isNaN(d1)) {\n+        return Double.isNaN(d2);\n+      }\n+      if (Double.isInfinite(d1)) {\n+        return Double.isInfinite(d2) && Math.signum(d1) == Math.signum(d2);\n+      }\n+\n+      return Math.abs(d1 - d2) <= epsilon;\n+    }\n+\n+    @Override\n+    public VectorValueEqualizer<FloatingPointVector> copy() {\n+      return new FloatingPointEpsilonEqualizer(epsilon);\n+    }\n+  }\n+\n+  /**\n+   * Difference function for float values.\n+   */\n+  public static class Float4EpsilonEqualizer implements VectorValueEqualizer<Float4Vector> {\n+    private final float epsilon;\n+\n+    public Float4EpsilonEqualizer(float epsilon) {\n+      this.epsilon = epsilon;\n+    }\n+\n+    @Override\n+    public final boolean valuesEqual(Float4Vector vector1, int index1, Float4Vector vector2, int index2) {\n+      boolean isNull1 = vector1.isNull(index1);\n+      boolean isNull2 = vector2.isNull(index2);\n+\n+      if (isNull1 || isNull2) {\n+        return isNull1 == isNull2;\n+      }\n+\n+      float f1 = vector1.get(index1);\n+      float f2 = vector2.get(index2);\n+\n+      if (Float.isNaN(f1)) {\n+        return Float.isNaN(f2);\n+      }\n+      if (Float.isInfinite(f1)) {\n+        return Float.isInfinite(f2) && Math.signum(f1) == Math.signum(f2);\n+      }\n+\n+      return Math.abs(f1 - f2) <= epsilon;\n+    }\n+\n+    @Override\n+    public VectorValueEqualizer<Float4Vector> copy() {\n \n Review comment:\n   Good suggestion. Revised accordingly. Thank you.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-10-24T08:39:24.772+0000",
                    "updated": "2019-10-24T08:39:24.772+0000",
                    "started": "2019-10-24T08:39:24.771+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "333197",
                    "issueId": "13257373"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13257373/worklog/333899",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "emkornfield commented on issue #5418: ARROW-6598: [Java] Sort the code for ApproxEqualsVisitor and provide an interface for custom vector equality\nURL: https://github.com/apache/arrow/pull/5418#issuecomment-546212478\n \n \n   +1, thanks.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-10-25T05:55:22.252+0000",
                    "updated": "2019-10-25T05:55:22.252+0000",
                    "started": "2019-10-25T05:55:22.251+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "333899",
                    "issueId": "13257373"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13257373/worklog/333900",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "emkornfield commented on pull request #5418: ARROW-6598: [Java] Sort the code for ApproxEqualsVisitor and provide an interface for custom vector equality\nURL: https://github.com/apache/arrow/pull/5418\n \n \n   \n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-10-25T05:56:32.584+0000",
                    "updated": "2019-10-25T05:56:32.584+0000",
                    "started": "2019-10-25T05:56:32.582+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "333900",
                    "issueId": "13257373"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
            "id": "4",
            "description": "An improvement or enhancement to an existing feature or task.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
            "name": "Improvement",
            "subtask": false,
            "avatarId": 21140
        },
        "timespent": 9000,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@6373fa1c[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@75bd81a2[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@6bdc7cba[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@72f550f2[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@326695b3[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@3b568d84[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@33e71ff8[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@6bcdbbb6[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@6d006071[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@62b5eaf8[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@69262189[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@6fb02710[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 9000,
        "customfield_12312520": null,
        "customfield_12312521": "Fri Oct 25 05:56:33 UTC 2019",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2019-10-25T05:56:33.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-6598/watchers",
            "watchCount": 1,
            "isWatching": false
        },
        "created": "2019-09-18T12:58:46.000+0000",
        "updated": "2019-10-25T05:56:33.000+0000",
        "timeoriginalestimate": null,
        "description": "As a follow up issue of ARROW-6458, we finalize the code for ApproxEqualsVisitor.",
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "2.5h",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 9000
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[Java] Sort the code for ApproxEqualsVisitor",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13257373/comment/16959449",
                    "id": "16959449",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=emkornfield%40gmail.com",
                        "name": "emkornfield@gmail.com",
                        "key": "emkornfield@gmail.com",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Micah Kornfield",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "Issue resolved by pull request 5418\n[https://github.com/apache/arrow/pull/5418]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=emkornfield%40gmail.com",
                        "name": "emkornfield@gmail.com",
                        "key": "emkornfield@gmail.com",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Micah Kornfield",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2019-10-25T05:56:33.880+0000",
                    "updated": "2019-10-25T05:56:33.880+0000"
                }
            ],
            "maxResults": 1,
            "total": 1,
            "startAt": 0
        },
        "customfield_12311820": "0|z06rew:",
        "customfield_12314139": null
    }
}