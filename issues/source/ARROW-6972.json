{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13263921",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13263921",
    "key": "ARROW-6972",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12345977",
                "id": "12345977",
                "description": "",
                "name": "2.0.0",
                "archived": false,
                "released": true,
                "releaseDate": "2020-10-19"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
            "name": "Blocker",
            "id": "1"
        },
        "labels": [
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=govindarajanprashanth%40gmail.com",
            "name": "govindarajanprashanth@gmail.com",
            "key": "govindarajanprashanth@gmail.com",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
            },
            "displayName": "Prashanth Govindarajan",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12334712",
                "id": "12334712",
                "name": "C#"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=camer314",
            "name": "camer314",
            "key": "camer314",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
            },
            "displayName": "Cameron Murray",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=camer314",
            "name": "camer314",
            "key": "camer314",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
            },
            "displayName": "Cameron Murray",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "aggregateprogress": {
            "progress": 10200,
            "total": 10200,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 10200,
            "total": 10200,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-6972/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 17,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13263921/worklog/495524",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pgovind commented on a change in pull request #8348:\nURL: https://github.com/apache/arrow/pull/8348#discussion_r499823191\n\n\n\n##########\nFile path: csharp/test/Apache.Arrow.Tests/ArrayBuilderTests.cs\n##########\n@@ -73,6 +73,67 @@ public void StringArrayBuilderHandlesNullsAndEmptyStrings()\n             Assert.Equal(string.Empty, stringArray.GetString(3));\n         }\n \n+        [Fact]\n+        public void TestStructArray()\n+        {\n+            // The following can be improved with a Builder class for StructArray.\n+            List<Field> fields = new List<Field>();\n+            Field.Builder fieldBuilder = new Field.Builder();\n+            fields.Add(fieldBuilder.Name(\"Strings\").DataType(StringType.Default).Nullable(true).Build());\n+            fieldBuilder = new Field.Builder();\n+            fields.Add(fieldBuilder.Name(\"Ints\").DataType(Int32Type.Default).Nullable(true).Build());\n+            StructType structType = new StructType(fields);\n+\n+            StringArray.Builder stringBuilder = new StringArray.Builder();\n+            StringArray stringArray = stringBuilder.Append(\"joe\").AppendNull().AppendNull().Append(\"mark\").Build();\n+            Int32Array.Builder intBuilder = new Int32Array.Builder();\n+            Int32Array intArray = intBuilder.Append(1).Append(2).AppendNull().Append(4).Build();\n+            List<Array> arrays = new List<Array>();\n+            arrays.Add(stringArray);\n+            arrays.Add(intArray);\n+\n+            ArrowBuffer.BitmapBuilder nullBitmap = new ArrowBuffer.BitmapBuilder();\n+            var nullBitmapBuffer = nullBitmap.Append(true).Append(true).Append(false).Append(true).Build();\n+            StructArray structs = new StructArray(structType, 4, arrays, nullBitmapBuffer, 1);\n+\n+            Assert.Equal(4, structs.Length);\n\nReview comment:\n       Replace the following asserts with ArrayComparer\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-10-05T19:30:15.884+0000",
                    "updated": "2020-10-05T19:30:15.884+0000",
                    "started": "2020-10-05T19:30:15.884+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "495524",
                    "issueId": "13263921"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13263921/worklog/495526",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "github-actions[bot] commented on pull request #8348:\nURL: https://github.com/apache/arrow/pull/8348#issuecomment-703842934\n\n\n   https://issues.apache.org/jira/browse/ARROW-6972\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-10-05T19:32:57.105+0000",
                    "updated": "2020-10-05T19:32:57.105+0000",
                    "started": "2020-10-05T19:32:57.104+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "495526",
                    "issueId": "13263921"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13263921/worklog/495536",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pgovind commented on a change in pull request #8348:\nURL: https://github.com/apache/arrow/pull/8348#discussion_r499823191\n\n\n\n##########\nFile path: csharp/test/Apache.Arrow.Tests/ArrayBuilderTests.cs\n##########\n@@ -73,6 +73,67 @@ public void StringArrayBuilderHandlesNullsAndEmptyStrings()\n             Assert.Equal(string.Empty, stringArray.GetString(3));\n         }\n \n+        [Fact]\n+        public void TestStructArray()\n+        {\n+            // The following can be improved with a Builder class for StructArray.\n+            List<Field> fields = new List<Field>();\n+            Field.Builder fieldBuilder = new Field.Builder();\n+            fields.Add(fieldBuilder.Name(\"Strings\").DataType(StringType.Default).Nullable(true).Build());\n+            fieldBuilder = new Field.Builder();\n+            fields.Add(fieldBuilder.Name(\"Ints\").DataType(Int32Type.Default).Nullable(true).Build());\n+            StructType structType = new StructType(fields);\n+\n+            StringArray.Builder stringBuilder = new StringArray.Builder();\n+            StringArray stringArray = stringBuilder.Append(\"joe\").AppendNull().AppendNull().Append(\"mark\").Build();\n+            Int32Array.Builder intBuilder = new Int32Array.Builder();\n+            Int32Array intArray = intBuilder.Append(1).Append(2).AppendNull().Append(4).Build();\n+            List<Array> arrays = new List<Array>();\n+            arrays.Add(stringArray);\n+            arrays.Add(intArray);\n+\n+            ArrowBuffer.BitmapBuilder nullBitmap = new ArrowBuffer.BitmapBuilder();\n+            var nullBitmapBuffer = nullBitmap.Append(true).Append(true).Append(false).Append(true).Build();\n+            StructArray structs = new StructArray(structType, 4, arrays, nullBitmapBuffer, 1);\n+\n+            Assert.Equal(4, structs.Length);\n\nReview comment:\n       Replace the following asserts with ArrayComparer\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-10-05T19:50:31.597+0000",
                    "updated": "2020-10-05T19:50:31.597+0000",
                    "started": "2020-10-05T19:50:31.597+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "495536",
                    "issueId": "13263921"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13263921/worklog/495621",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "eerhardt commented on a change in pull request #8348:\nURL: https://github.com/apache/arrow/pull/8348#discussion_r499882330\n\n\n\n##########\nFile path: csharp/test/Apache.Arrow.Tests/ArrayBuilderTests.cs\n##########\n@@ -73,7 +73,6 @@ public void StringArrayBuilderHandlesNullsAndEmptyStrings()\n             Assert.Equal(string.Empty, stringArray.GetString(3));\n         }\n \n-\n\nReview comment:\n       Can you revert this change, since it is the only one in this file?\n\n##########\nFile path: csharp/src/Apache.Arrow/Arrays/StructArray.cs\n##########\n@@ -21,13 +21,13 @@ namespace Apache.Arrow\n {\n     public class StructArray : Array\n     {\n-        private readonly List<Array> _fields;\n+        private readonly IEnumerable<IArrowArray> _fields;\n\nReview comment:\n       A couple of questions here:\r\n   \r\n   1. Why the move from `Array` to `IArrowArray`? I kind of think we should remove `IArrowArray`, since the interface doesn't provide any benefit over the abstract class. See https://issues.apache.org/jira/browse/ARROW-5546\r\n   2. How does this `_fields` property ever contain anything? AFAICT - it will always be an empty List.\n\n##########\nFile path: csharp/src/Apache.Arrow/Ipc/ArrowReaderImplementation.cs\n##########\n@@ -180,9 +193,15 @@ internal static ByteBuffer CreateByteBuffer(ReadOnlyMemory<byte> buffer)\n         {\n \n             ArrowBuffer nullArrowBuffer = BuildArrowBuffer(bodyData, recordBatchEnumerator.CurrentBuffer);\n-            recordBatchEnumerator.MoveNextBuffer();\n+            if (!recordBatchEnumerator.MoveNextBuffer())\n\nReview comment:\n       \ud83d\udc4d \n\n##########\nFile path: csharp/src/Apache.Arrow/Ipc/ArrowReaderImplementation.cs\n##########\n@@ -165,8 +165,21 @@ internal static ByteBuffer CreateByteBuffer(ReadOnlyMemory<byte> buffer)\n                 throw new InvalidDataException(\"Null count length must be >= 0\"); // TODO:Localize exception message\n             }\n \n-            ArrowBuffer[] arrowBuff = new[] { nullArrowBuffer, valueArrowBuffer };\n-            ArrayData[] children = GetChildren(ref recordBatchEnumerator, field, bodyData);\n+            ArrowBuffer[] arrowBuff = null;\n+            ArrayData[] children = null;\n+            if (field.DataType.TypeId == ArrowTypeId.Struct)\n+            {\n+                arrowBuff = new[] { nullArrowBuffer};\n+                children = GetChildren(ref recordBatchEnumerator, field, bodyData);\n+            }\n+            else\n+            {\n+                ArrowBuffer valueArrowBuffer = BuildArrowBuffer(bodyData, recordBatchEnumerator.CurrentBuffer);\n+                recordBatchEnumerator.MoveNextBuffer();\n+\n+                arrowBuff = new[] { nullArrowBuffer, valueArrowBuffer };\n+                children = GetChildren(ref recordBatchEnumerator, field, bodyData);\n\nReview comment:\n       it looks like the `children` line can be refactored out of the `if`. It looks the same for both cases.\n\n##########\nFile path: csharp/src/Apache.Arrow/Ipc/MessageSerializer.cs\n##########\n@@ -57,16 +58,30 @@ internal static Schema GetSchema(Flatbuf.Schema schema)\n             for (int i = 0; i < schema.FieldsLength; i++)\n             {\n                 Flatbuf.Field field = schema.Fields(i).GetValueOrDefault();\n-\n-                schemaBuilder.Field(\n-                    new Field(field.Name, GetFieldArrowType(field), field.Nullable));\n+                Field arrowField = FieldFromFlatbuffer(field);\n+                schemaBuilder.Field(arrowField);\n             }\n \n             return schemaBuilder.Build();\n         }\n \n+        private static Field FieldFromFlatbuffer(Flatbuf.Field flatbufField)\n+        {\n+            System.Collections.Generic.List<Field> childFields = null;\n+            if (flatbufField.ChildrenLength > 0)\n+            {\n+                childFields = new System.Collections.Generic.List<Field>();\n\nReview comment:\n       ```suggestion\r\n                   childFields = new System.Collections.Generic.List<Field>(flatbufField.ChildrenLength);\r\n   ```\r\n   \r\n   Since we know up front how many we will need.\r\n   \r\n   Actually, do we even need a `List` here? Could it simply be an array since we know how many we will need?\n\n##########\nFile path: csharp/src/Apache.Arrow/Types/StructType.cs\n##########\n@@ -28,7 +28,7 @@ public sealed class StructType : ArrowType\n \n         public IEnumerable<Field> Fields => _fields;\n\nReview comment:\n       Since we are deriving from `NestedType` now, why do we need the `Fields` property? `NestedType` already has a `Children` property, which will be the same thing.\n\n##########\nFile path: csharp/src/Apache.Arrow/Ipc/ArrowReaderImplementation.cs\n##########\n@@ -165,8 +165,21 @@ internal static ByteBuffer CreateByteBuffer(ReadOnlyMemory<byte> buffer)\n                 throw new InvalidDataException(\"Null count length must be >= 0\"); // TODO:Localize exception message\n             }\n \n-            ArrowBuffer[] arrowBuff = new[] { nullArrowBuffer, valueArrowBuffer };\n-            ArrayData[] children = GetChildren(ref recordBatchEnumerator, field, bodyData);\n+            ArrowBuffer[] arrowBuff = null;\n\nReview comment:\n       No need to initialize these 2 variables to `null` since they will always be set in the `if-else`.\r\n   \r\n   1. It is a minor perf improvement.\r\n   2. It allows the compiler to warn you in case you didn't set them.\n\n##########\nFile path: csharp/test/Apache.Arrow.Tests/StructArrayTests.cs\n##########\n@@ -0,0 +1,86 @@\n+\ufeff// Licensed to the Apache Software Foundation (ASF) under one or more\n+// contributor license agreements. See the NOTICE file distributed with\n+// this work for additional information regarding copyright ownership.\n+// The ASF licenses this file to You under the Apache License, Version 2.0\n+// (the \"License\"); you may not use this file except in compliance with\n+// the License.  You may obtain a copy of the License at\n+//\n+//     http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing, software\n+// distributed under the License is distributed on an \"AS IS\" BASIS,\n+// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+// See the License for the specific language governing permissions and\n+// limitations under the License.\n+\n+using Apache.Arrow.Types;\n+using System.Collections.Generic;\n+using Xunit;\n+\n+namespace Apache.Arrow.Tests\n+{\n+    public class StructArrayTests\n+    {\n+        [Fact]\n+        public void TestStructArray()\n+        {\n+            // The following can be improved with a Builder class for StructArray.\n+            List<Field> fields = new List<Field>();\n+            Field.Builder fieldBuilder = new Field.Builder();\n+            fields.Add(fieldBuilder.Name(\"Strings\").DataType(StringType.Default).Nullable(true).Build());\n+            fieldBuilder = new Field.Builder();\n+            fields.Add(fieldBuilder.Name(\"Ints\").DataType(Int32Type.Default).Nullable(true).Build());\n+            StructType structType = new StructType(fields);\n+\n+            StringArray.Builder stringBuilder = new StringArray.Builder();\n+            StringArray stringArray = stringBuilder.Append(\"joe\").AppendNull().AppendNull().Append(\"mark\").Build();\n+            Int32Array.Builder intBuilder = new Int32Array.Builder();\n+            Int32Array intArray = intBuilder.Append(1).Append(2).AppendNull().Append(4).Build();\n+            List<Array> arrays = new List<Array>();\n+            arrays.Add(stringArray);\n+            arrays.Add(intArray);\n+\n+            ArrowBuffer.BitmapBuilder nullBitmap = new ArrowBuffer.BitmapBuilder();\n+            var nullBitmapBuffer = nullBitmap.Append(true).Append(true).Append(false).Append(true).Build();\n+            StructArray structs = new StructArray(structType, 4, arrays, nullBitmapBuffer, 1);\n+\n+            Assert.Equal(4, structs.Length);\n+            Assert.Equal(1, structs.NullCount);\n+            ArrayData[] childArrays = structs.Data.Children; // Data for StringArray and Int32Array\n+            Assert.Equal(2, childArrays.Length);\n+            for (int j = 0; j < childArrays.Length; j++)\n\nReview comment:\n       (nit) Why `j`? Why not `i`?\n\n##########\nFile path: csharp/src/Apache.Arrow/Ipc/ArrowTypeFlatbufferBuilder.cs\n##########\n@@ -171,6 +172,13 @@ public void Visit(Time64Type type)\n                     Flatbuf.Time.CreateTime(Builder, ToFlatBuffer(type.Unit), 64));\n             }\n \n+            public void Visit(StructType type)\n+            {\n+                Flatbuf.Struct_.StartStruct_(Builder);\n+                FieldType result = FieldType.Build(Flatbuf.Type.Struct_, Flatbuf.Struct_.EndStruct_(Builder));\n\nReview comment:\n       (super nit) Do you need the `FieldType result` variable? Why not just assign `Result` directly, like the other methods do?\n\n##########\nFile path: csharp/src/Apache.Arrow/Ipc/ArrowStreamWriter.cs\n##########\n@@ -102,6 +103,31 @@ public void Visit(BinaryArray array)\n                 _buffers.Add(CreateBuffer(array.ValueBuffer));\n             }\n \n+            private void Visit(ArrayData[] children)\n+            {\n+                for (int i = 0; i < children.Length; i++)\n+                {\n+                    Visit(ArrowArrayFactory.BuildArray(children[i]));\n\nReview comment:\n       It's a bit unfortunate that we need to allocate a new `Array` object here. But we can get this merged as functional, and tweak the performance later.\n\n##########\nFile path: csharp/src/Apache.Arrow/Types/StructType.cs\n##########\n@@ -28,7 +28,7 @@ public sealed class StructType : ArrowType\n \n         public IEnumerable<Field> Fields => _fields;\n\nReview comment:\n       Note that C++ standardized on the \"Field\" name: https://github.com/apache/arrow/pull/7132\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-10-05T22:26:49.273+0000",
                    "updated": "2020-10-05T22:26:49.273+0000",
                    "started": "2020-10-05T22:26:49.272+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "495621",
                    "issueId": "13263921"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13263921/worklog/495638",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pgovind commented on a change in pull request #8348:\nURL: https://github.com/apache/arrow/pull/8348#discussion_r499925085\n\n\n\n##########\nFile path: csharp/src/Apache.Arrow/Arrays/StructArray.cs\n##########\n@@ -21,13 +21,13 @@ namespace Apache.Arrow\n {\n     public class StructArray : Array\n     {\n-        private readonly List<Array> _fields;\n+        private readonly IEnumerable<IArrowArray> _fields;\n\nReview comment:\n       1. I agree. I had `Array` first, but I was forced to make it `IArrowArray` because `RecordBatch.Column(i)` returns an `IArrowArray`. See https://github.com/dotnet/spark/blob/7bcd2a5060e12ca993132f4986b2dfb4b07df94f/src/csharp/Microsoft.Spark.E2ETest/IpcTests/Sql/DataFrameTests.cs#L365. When we refactor `IArrowArray` -> `ArrowArray`, this can change too.\r\n   2. Yeap, you're right. Removed it. It is unused at the moment.\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-10-05T23:26:52.002+0000",
                    "updated": "2020-10-05T23:26:52.002+0000",
                    "started": "2020-10-05T23:26:52.002+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "495638",
                    "issueId": "13263921"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13263921/worklog/495641",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pgovind commented on a change in pull request #8348:\nURL: https://github.com/apache/arrow/pull/8348#discussion_r499927750\n\n\n\n##########\nFile path: csharp/src/Apache.Arrow/Ipc/MessageSerializer.cs\n##########\n@@ -57,16 +58,30 @@ internal static Schema GetSchema(Flatbuf.Schema schema)\n             for (int i = 0; i < schema.FieldsLength; i++)\n             {\n                 Flatbuf.Field field = schema.Fields(i).GetValueOrDefault();\n-\n-                schemaBuilder.Field(\n-                    new Field(field.Name, GetFieldArrowType(field), field.Nullable));\n+                Field arrowField = FieldFromFlatbuffer(field);\n+                schemaBuilder.Field(arrowField);\n             }\n \n             return schemaBuilder.Build();\n         }\n \n+        private static Field FieldFromFlatbuffer(Flatbuf.Field flatbufField)\n+        {\n+            System.Collections.Generic.List<Field> childFields = null;\n+            if (flatbufField.ChildrenLength > 0)\n+            {\n+                childFields = new System.Collections.Generic.List<Field>();\n\nReview comment:\n       Passing in an Array here would get converted to a `List` here anyway in the `StructType` constructor. I did make the change to specify the capacity upfront though\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-10-05T23:36:08.288+0000",
                    "updated": "2020-10-05T23:36:08.288+0000",
                    "started": "2020-10-05T23:36:08.288+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "495641",
                    "issueId": "13263921"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13263921/worklog/495643",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pgovind commented on a change in pull request #8348:\nURL: https://github.com/apache/arrow/pull/8348#discussion_r499936190\n\n\n\n##########\nFile path: csharp/src/Apache.Arrow/Types/StructType.cs\n##########\n@@ -28,7 +28,7 @@ public sealed class StructType : ArrowType\n \n         public IEnumerable<Field> Fields => _fields;\n\nReview comment:\n       Removed `_fields`. I'll open another PR to rename all instances of Children with Field (there are 80+ hits, so I'd rather not pollute this PR).\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-10-06T00:05:07.098+0000",
                    "updated": "2020-10-06T00:05:07.098+0000",
                    "started": "2020-10-06T00:05:07.098+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "495643",
                    "issueId": "13263921"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13263921/worklog/495644",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pgovind commented on a change in pull request #8348:\nURL: https://github.com/apache/arrow/pull/8348#discussion_r499936611\n\n\n\n##########\nFile path: csharp/test/Apache.Arrow.Tests/StructArrayTests.cs\n##########\n@@ -0,0 +1,86 @@\n+\ufeff// Licensed to the Apache Software Foundation (ASF) under one or more\n+// contributor license agreements. See the NOTICE file distributed with\n+// this work for additional information regarding copyright ownership.\n+// The ASF licenses this file to You under the Apache License, Version 2.0\n+// (the \"License\"); you may not use this file except in compliance with\n+// the License.  You may obtain a copy of the License at\n+//\n+//     http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing, software\n+// distributed under the License is distributed on an \"AS IS\" BASIS,\n+// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+// See the License for the specific language governing permissions and\n+// limitations under the License.\n+\n+using Apache.Arrow.Types;\n+using System.Collections.Generic;\n+using Xunit;\n+\n+namespace Apache.Arrow.Tests\n+{\n+    public class StructArrayTests\n+    {\n+        [Fact]\n+        public void TestStructArray()\n+        {\n+            // The following can be improved with a Builder class for StructArray.\n+            List<Field> fields = new List<Field>();\n+            Field.Builder fieldBuilder = new Field.Builder();\n+            fields.Add(fieldBuilder.Name(\"Strings\").DataType(StringType.Default).Nullable(true).Build());\n+            fieldBuilder = new Field.Builder();\n+            fields.Add(fieldBuilder.Name(\"Ints\").DataType(Int32Type.Default).Nullable(true).Build());\n+            StructType structType = new StructType(fields);\n+\n+            StringArray.Builder stringBuilder = new StringArray.Builder();\n+            StringArray stringArray = stringBuilder.Append(\"joe\").AppendNull().AppendNull().Append(\"mark\").Build();\n+            Int32Array.Builder intBuilder = new Int32Array.Builder();\n+            Int32Array intArray = intBuilder.Append(1).Append(2).AppendNull().Append(4).Build();\n+            List<Array> arrays = new List<Array>();\n+            arrays.Add(stringArray);\n+            arrays.Add(intArray);\n+\n+            ArrowBuffer.BitmapBuilder nullBitmap = new ArrowBuffer.BitmapBuilder();\n+            var nullBitmapBuffer = nullBitmap.Append(true).Append(true).Append(false).Append(true).Build();\n+            StructArray structs = new StructArray(structType, 4, arrays, nullBitmapBuffer, 1);\n+\n+            Assert.Equal(4, structs.Length);\n+            Assert.Equal(1, structs.NullCount);\n+            ArrayData[] childArrays = structs.Data.Children; // Data for StringArray and Int32Array\n+            Assert.Equal(2, childArrays.Length);\n+            for (int j = 0; j < childArrays.Length; j++)\n\nReview comment:\n       :D Artifact of refactoring. Fixed now.\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-10-06T00:06:36.132+0000",
                    "updated": "2020-10-06T00:06:36.132+0000",
                    "started": "2020-10-06T00:06:36.132+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "495644",
                    "issueId": "13263921"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13263921/worklog/495645",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pgovind commented on a change in pull request #8348:\nURL: https://github.com/apache/arrow/pull/8348#discussion_r499927750\n\n\n\n##########\nFile path: csharp/src/Apache.Arrow/Ipc/MessageSerializer.cs\n##########\n@@ -57,16 +58,30 @@ internal static Schema GetSchema(Flatbuf.Schema schema)\n             for (int i = 0; i < schema.FieldsLength; i++)\n             {\n                 Flatbuf.Field field = schema.Fields(i).GetValueOrDefault();\n-\n-                schemaBuilder.Field(\n-                    new Field(field.Name, GetFieldArrowType(field), field.Nullable));\n+                Field arrowField = FieldFromFlatbuffer(field);\n+                schemaBuilder.Field(arrowField);\n             }\n \n             return schemaBuilder.Build();\n         }\n \n+        private static Field FieldFromFlatbuffer(Flatbuf.Field flatbufField)\n+        {\n+            System.Collections.Generic.List<Field> childFields = null;\n+            if (flatbufField.ChildrenLength > 0)\n+            {\n+                childFields = new System.Collections.Generic.List<Field>();\n\nReview comment:\n       The `StructType` constructor (really the base `NestedType` constructor) requires an `IReadOnlyList`. I did make the change to specify the capacity upfront though\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-10-06T00:14:07.151+0000",
                    "updated": "2020-10-06T00:14:07.151+0000",
                    "started": "2020-10-06T00:14:07.151+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "495645",
                    "issueId": "13263921"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13263921/worklog/495658",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "eerhardt commented on a change in pull request #8348:\nURL: https://github.com/apache/arrow/pull/8348#discussion_r499947637\n\n\n\n##########\nFile path: csharp/src/Apache.Arrow/Ipc/MessageSerializer.cs\n##########\n@@ -57,16 +58,30 @@ internal static Schema GetSchema(Flatbuf.Schema schema)\n             for (int i = 0; i < schema.FieldsLength; i++)\n             {\n                 Flatbuf.Field field = schema.Fields(i).GetValueOrDefault();\n-\n-                schemaBuilder.Field(\n-                    new Field(field.Name, GetFieldArrowType(field), field.Nullable));\n+                Field arrowField = FieldFromFlatbuffer(field);\n+                schemaBuilder.Field(arrowField);\n             }\n \n             return schemaBuilder.Build();\n         }\n \n+        private static Field FieldFromFlatbuffer(Flatbuf.Field flatbufField)\n+        {\n+            System.Collections.Generic.List<Field> childFields = null;\n+            if (flatbufField.ChildrenLength > 0)\n+            {\n+                childFields = new System.Collections.Generic.List<Field>();\n\nReview comment:\n       It wouldn\u2019t need to make a List in the constructor since the ctor now takes an IReadOnlyList. It could just hang on to that.\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-10-06T00:49:30.425+0000",
                    "updated": "2020-10-06T00:49:30.425+0000",
                    "started": "2020-10-06T00:49:30.425+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "495658",
                    "issueId": "13263921"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13263921/worklog/495664",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pgovind commented on a change in pull request #8348:\nURL: https://github.com/apache/arrow/pull/8348#discussion_r499948831\n\n\n\n##########\nFile path: csharp/src/Apache.Arrow/Ipc/MessageSerializer.cs\n##########\n@@ -57,16 +58,30 @@ internal static Schema GetSchema(Flatbuf.Schema schema)\n             for (int i = 0; i < schema.FieldsLength; i++)\n             {\n                 Flatbuf.Field field = schema.Fields(i).GetValueOrDefault();\n-\n-                schemaBuilder.Field(\n-                    new Field(field.Name, GetFieldArrowType(field), field.Nullable));\n+                Field arrowField = FieldFromFlatbuffer(field);\n+                schemaBuilder.Field(arrowField);\n             }\n \n             return schemaBuilder.Build();\n         }\n \n+        private static Field FieldFromFlatbuffer(Flatbuf.Field flatbufField)\n+        {\n+            System.Collections.Generic.List<Field> childFields = null;\n+            if (flatbufField.ChildrenLength > 0)\n+            {\n+                childFields = new System.Collections.Generic.List<Field>();\n\nReview comment:\n       Oh yea you're right. IReadOnlyList only needs `this[index]`. Fixed now.\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-10-06T00:54:14.262+0000",
                    "updated": "2020-10-06T00:54:14.262+0000",
                    "started": "2020-10-06T00:54:14.262+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "495664",
                    "issueId": "13263921"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13263921/worklog/496203",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "eerhardt commented on a change in pull request #8348:\nURL: https://github.com/apache/arrow/pull/8348#discussion_r500608091\n\n\n\n##########\nFile path: csharp/src/Apache.Arrow/Ipc/ArrowStreamWriter.cs\n##########\n@@ -102,6 +103,31 @@ public void Visit(BinaryArray array)\n                 _buffers.Add(CreateBuffer(array.ValueBuffer));\n             }\n \n+            private void Visit(ArrayData[] children)\n+            {\n+                for (int i = 0; i < children.Length; i++)\n+                {\n+                    Visit(ArrowArrayFactory.BuildArray(children[i]));\n\nReview comment:\n       This is now fixed with the latest changes.\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-10-06T21:31:41.020+0000",
                    "updated": "2020-10-06T21:31:41.020+0000",
                    "started": "2020-10-06T21:31:41.019+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "496203",
                    "issueId": "13263921"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13263921/worklog/496232",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "eerhardt commented on a change in pull request #8348:\nURL: https://github.com/apache/arrow/pull/8348#discussion_r500649820\n\n\n\n##########\nFile path: csharp/src/Apache.Arrow/Types/StructType.cs\n##########\n@@ -28,7 +28,7 @@ public sealed class StructType : ArrowType\n \n         public IEnumerable<Field> Fields => _fields;\n\nReview comment:\n       I resolved this by moving `Fields` to the base `NestedType` and obsoleting `Children`.\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-10-06T23:22:38.576+0000",
                    "updated": "2020-10-06T23:22:38.576+0000",
                    "started": "2020-10-06T23:22:38.576+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "496232",
                    "issueId": "13263921"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13263921/worklog/496233",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "eerhardt commented on a change in pull request #8348:\nURL: https://github.com/apache/arrow/pull/8348#discussion_r500649950\n\n\n\n##########\nFile path: csharp/src/Apache.Arrow/Arrays/StructArray.cs\n##########\n@@ -21,13 +21,13 @@ namespace Apache.Arrow\n {\n     public class StructArray : Array\n     {\n-        private readonly List<Array> _fields;\n+        private readonly IEnumerable<IArrowArray> _fields;\n\nReview comment:\n       I now fill out the `_fields` data correctly.\n\n##########\nFile path: csharp/src/Apache.Arrow/Arrays/StructArray.cs\n##########\n@@ -21,13 +21,13 @@ namespace Apache.Arrow\n {\n     public class StructArray : Array\n     {\n-        private readonly List<Array> _fields;\n+        private readonly IEnumerable<IArrowArray> _fields;\n\nReview comment:\n       It now fills out the `_fields` data correctly.\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-10-06T23:23:12.826+0000",
                    "updated": "2020-10-06T23:23:12.826+0000",
                    "started": "2020-10-06T23:23:12.826+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "496233",
                    "issueId": "13263921"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13263921/worklog/496658",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "eerhardt commented on pull request #8348:\nURL: https://github.com/apache/arrow/pull/8348#issuecomment-704992796\n\n\n   @kou @nealrichardson - do you know why the assign-rust-labels job failed?\r\n   \r\n   ```\r\n   1s\r\n   Run actions/labeler@2.2.0\r\n     with:\r\n       repo-token: ***\r\n       configuration-path: .github/workflows/dev_labeler/labeler.yml\r\n       sync-labels: true\r\n   Error: TypeError: glob pattern string required\r\n   Error: glob pattern string required\r\n   ```\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-10-07T14:56:12.324+0000",
                    "updated": "2020-10-07T14:56:12.324+0000",
                    "started": "2020-10-07T14:56:12.324+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "496658",
                    "issueId": "13263921"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13263921/worklog/496672",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nealrichardson commented on pull request #8348:\nURL: https://github.com/apache/arrow/pull/8348#issuecomment-705000818\n\n\n   @eerhardt I haven't looked but I think the authors of that new workflow are working to fix it. You can ignore it.\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-10-07T15:08:12.735+0000",
                    "updated": "2020-10-07T15:08:12.735+0000",
                    "started": "2020-10-07T15:08:12.735+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "496672",
                    "issueId": "13263921"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13263921/worklog/496800",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "eerhardt closed pull request #8348:\nURL: https://github.com/apache/arrow/pull/8348\n\n\n   \n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-10-07T17:49:30.027+0000",
                    "updated": "2020-10-07T17:49:30.027+0000",
                    "started": "2020-10-07T17:49:30.027+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "496800",
                    "issueId": "13263921"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/2",
            "id": "2",
            "description": "A new feature of the product, which has yet to be developed.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21141&avatarType=issuetype",
            "name": "New Feature",
            "subtask": false,
            "avatarId": 21141
        },
        "timespent": 10200,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@2c1fa86[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@5ad307be[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@228a8bb8[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@60a696a0[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@7d08bd8c[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@402f59ca[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@368ecd3c[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@62494edb[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@5a956bc3[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@604e9852[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@20e94e4a[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@87ef31a[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 10200,
        "customfield_12312520": null,
        "customfield_12312521": "Wed Oct 07 17:49:23 UTC 2020",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2020-10-07T17:49:23.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-6972/watchers",
            "watchCount": 5,
            "isWatching": false
        },
        "created": "2019-10-23T02:52:02.000+0000",
        "updated": "2020-10-07T17:49:31.000+0000",
        "timeoriginalestimate": null,
        "description": "The C# implementation of Arrow does not support struct arrays and, complex types more generally.\r\n\r\n\u00a0I notice ARROW-6870\u00a0addresses Dictionary arrays however this is not as flexible as structs (for example, cannot mix data types)\r\n\r\nThe source does have a stub for StructArray however there is no Builder nor example on how to use it so I can assume it is not supported.\r\n\r\n\u00a0",
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "2h 50m",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 10200
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[C#] Should support StructField arrays",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13263921/comment/17190918",
                    "id": "17190918",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=suhsteve",
                        "name": "suhsteve",
                        "key": "suhsteve",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
                        },
                        "displayName": "Steve Suh",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "We are currently trying to support [Spark 3.0|https://github.com/apache/spark] in [.NET for Apache Spark|https://github.com/dotnet/spark] .  We are tracking it with [issue 654|https://github.com/dotnet/spark/issues/654].  To support this, we need to be able to create a StructArray with StructType/Fields.  However, when attempting to create these, we run into the following exception:\r\n\r\n\r\n{noformat}\r\nProcessStream() failed with exception: System.NotImplementedException: The method or operation is not implemented.\r\n   at Apache.Arrow.Ipc.ArrowTypeFlatbufferBuilder.TypeVisitor.Visit(IArrowType type)\r\n   at Apache.Arrow.Types.ArrowType.Accept[T](T type, IArrowTypeVisitor visitor)\r\n   at Apache.Arrow.Types.StructType.Accept(IArrowTypeVisitor visitor)\r\n   at Apache.Arrow.Ipc.ArrowStreamWriter.SerializeSchema(Schema schema)\r\n   at Apache.Arrow.Ipc.ArrowStreamWriter.WriteSchemaAsync(Schema schema, CancellationToken cancellationToken)\r\n   at Apache.Arrow.Ipc.ArrowStreamWriter.WriteRecordBatchInternalAsync(RecordBatch recordBatch, CancellationToken cancellationToken)\r\n   at Microsoft.Spark.Worker.Command.ArrowOrDataFrameGroupedMapCommandExecutor.ExecuteArrowGroupedMapCommand(Stream inputStream, Stream outputStream, SqlCommand[] commands) in D:\\Source\\Repos\\github\\suhsteve\\spark\\src\\csharp\\Microsoft.Spark.Worker\\Command\\SqlCommandExecutor.cs:line 770\r\n   at Microsoft.Spark.Worker.Command.ArrowOrDataFrameGroupedMapCommandExecutor.ExecuteCore(Stream inputStream, Stream outputStream, SqlCommand[] commands) in D:\\Source\\Repos\\github\\suhsteve\\spark\\src\\csharp\\Microsoft.Spark.Worker\\Command\\SqlCommandExecutor.cs:line 740\r\n   at Microsoft.Spark.Worker.Command.SqlCommandExecutor.Execute(Stream inputStream, Stream outputStream, PythonEvalType evalType, SqlCommand[] commands) in D:\\Source\\Repos\\github\\suhsteve\\spark\\src\\csharp\\Microsoft.Spark.Worker\\Command\\SqlCommandExecutor.cs:line 75\r\n   at Microsoft.Spark.Worker.Command.CommandExecutor.Execute(Stream inputStream, Stream outputStream, Int32 splitIndex, CommandPayload commandPayload) in D:\\Source\\Repos\\github\\suhsteve\\spark\\src\\csharp\\Microsoft.Spark.Worker\\Command\\CommandExecutor.cs:line 57\r\n   at Microsoft.Spark.Worker.TaskRunner.ProcessStream(Stream inputStream, Stream outputStream, Version version, Boolean& readComplete) in D:\\Source\\Repos\\github\\suhsteve\\spark\\src\\csharp\\Microsoft.Spark.Worker\\TaskRunner.cs:line 153\r\n{noformat}\r\n",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=suhsteve",
                        "name": "suhsteve",
                        "key": "suhsteve",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
                        },
                        "displayName": "Steve Suh",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2020-09-04T21:10:36.795+0000",
                    "updated": "2020-09-04T21:14:41.133+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13263921/comment/17201779",
                    "id": "17201779",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=eerhardt",
                        "name": "eerhardt",
                        "key": "eerhardt",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=eerhardt&avatarId=37925",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=eerhardt&avatarId=37925",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=eerhardt&avatarId=37925",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=eerhardt&avatarId=37925"
                        },
                        "displayName": "Eric Erhardt",
                        "active": true,
                        "timeZone": "America/North_Dakota/New_Salem"
                    },
                    "body": "To unblock .NET for Apache Spark, we need to get this fix into 2.0. Marking it as a blocker so we can get this change in before 2.0 ships.",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=eerhardt",
                        "name": "eerhardt",
                        "key": "eerhardt",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=eerhardt&avatarId=37925",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=eerhardt&avatarId=37925",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=eerhardt&avatarId=37925",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=eerhardt&avatarId=37925"
                        },
                        "displayName": "Eric Erhardt",
                        "active": true,
                        "timeZone": "America/North_Dakota/New_Salem"
                    },
                    "created": "2020-09-24T21:25:29.181+0000",
                    "updated": "2020-09-24T21:25:29.181+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13263921/comment/17204848",
                    "id": "17204848",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=npr",
                        "name": "npr",
                        "key": "npr",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
                        },
                        "displayName": "Neal Richardson",
                        "active": true,
                        "timeZone": "America/Los_Angeles"
                    },
                    "body": "Hi [~eerhardt], as discussed on the mailing list, we're looking to do the 2.0 release on October 9. Will you be able to get this issue resolved in the next week?",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=npr",
                        "name": "npr",
                        "key": "npr",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
                        },
                        "displayName": "Neal Richardson",
                        "active": true,
                        "timeZone": "America/Los_Angeles"
                    },
                    "created": "2020-09-30T16:12:36.471+0000",
                    "updated": "2020-09-30T16:12:36.471+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13263921/comment/17205085",
                    "id": "17205085",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=govindarajanprashanth%40gmail.com",
                        "name": "govindarajanprashanth@gmail.com",
                        "key": "govindarajanprashanth@gmail.com",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Prashanth Govindarajan",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "Hello [~npr]. I believe so, yes. I have it working locally already, I just need to do some minor debugging and cleanup.",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=govindarajanprashanth%40gmail.com",
                        "name": "govindarajanprashanth@gmail.com",
                        "key": "govindarajanprashanth@gmail.com",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Prashanth Govindarajan",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2020-09-30T22:46:04.492+0000",
                    "updated": "2020-09-30T22:46:04.492+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13263921/comment/17208284",
                    "id": "17208284",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=govindarajanprashanth%40gmail.com",
                        "name": "govindarajanprashanth@gmail.com",
                        "key": "govindarajanprashanth@gmail.com",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Prashanth Govindarajan",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "Opened\u00a0[https://github.com/apache/arrow/pull/8348/files]\u00a0for this",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=govindarajanprashanth%40gmail.com",
                        "name": "govindarajanprashanth@gmail.com",
                        "key": "govindarajanprashanth@gmail.com",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Prashanth Govindarajan",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2020-10-05T19:59:51.743+0000",
                    "updated": "2020-10-05T19:59:51.743+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13263921/comment/17209733",
                    "id": "17209733",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=eerhardt",
                        "name": "eerhardt",
                        "key": "eerhardt",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=eerhardt&avatarId=37925",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=eerhardt&avatarId=37925",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=eerhardt&avatarId=37925",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=eerhardt&avatarId=37925"
                        },
                        "displayName": "Eric Erhardt",
                        "active": true,
                        "timeZone": "America/North_Dakota/New_Salem"
                    },
                    "body": "Issue resolved by pull request 8348\n[https://github.com/apache/arrow/pull/8348]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=eerhardt",
                        "name": "eerhardt",
                        "key": "eerhardt",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=eerhardt&avatarId=37925",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=eerhardt&avatarId=37925",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=eerhardt&avatarId=37925",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=eerhardt&avatarId=37925"
                        },
                        "displayName": "Eric Erhardt",
                        "active": true,
                        "timeZone": "America/North_Dakota/New_Salem"
                    },
                    "created": "2020-10-07T17:49:23.074+0000",
                    "updated": "2020-10-07T17:49:23.074+0000"
                }
            ],
            "maxResults": 6,
            "total": 6,
            "startAt": 0
        },
        "customfield_12311820": "0|z07uy0:",
        "customfield_12314139": null
    }
}