{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13275065",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13275065",
    "key": "ARROW-7414",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12340948",
                "id": "12340948",
                "description": "",
                "name": "0.16.0",
                "archived": false,
                "released": true,
                "releaseDate": "2020-02-07"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "name": "Major",
            "id": "3"
        },
        "labels": [
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12346358",
                "id": "12346358",
                "description": "",
                "name": "0.15.1",
                "archived": false,
                "released": true,
                "releaseDate": "2019-11-01"
            }
        ],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=npr",
            "name": "npr",
            "key": "npr",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
            },
            "displayName": "Neal Richardson",
            "active": true,
            "timeZone": "America/Los_Angeles"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12333008",
                "id": "12333008",
                "name": "R"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=bkietz",
            "name": "bkietz",
            "key": "bkietz",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=bkietz&avatarId=37277",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bkietz&avatarId=37277",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bkietz&avatarId=37277",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bkietz&avatarId=37277"
            },
            "displayName": "Ben Kietzman",
            "active": true,
            "timeZone": "America/New_York"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=bkietz",
            "name": "bkietz",
            "key": "bkietz",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=bkietz&avatarId=37277",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bkietz&avatarId=37277",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bkietz&avatarId=37277",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bkietz&avatarId=37277"
            },
            "displayName": "Ben Kietzman",
            "active": true,
            "timeZone": "America/New_York"
        },
        "aggregateprogress": {
            "progress": 6000,
            "total": 6000,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 6000,
            "total": 6000,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-7414/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 11,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13275065/worklog/361968",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nealrichardson commented on pull request #6077: ARROW-7414: [R][Dataset] Implement *PartitionSchemeDiscovery in R\nURL: https://github.com/apache/arrow/pull/6077\n \n \n   \n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-12-21T00:06:13.576+0000",
                    "updated": "2019-12-21T00:06:13.576+0000",
                    "started": "2019-12-21T00:06:13.575+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "361968",
                    "issueId": "13275065"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13275065/worklog/361970",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nealrichardson commented on pull request #6077: ARROW-7414: [R][Dataset] Implement *PartitionSchemeDiscovery in R\nURL: https://github.com/apache/arrow/pull/6077#discussion_r360612522\n \n \n\n ##########\n File path: r/tests/testthat/test-dataset.R\n ##########\n @@ -90,13 +90,39 @@ test_that(\"Hive partitioning\", {\n   expect_is(ds, \"Dataset\")\n   expect_equivalent(\n     ds %>%\n+      filter(group == 2) %>%\n       select(chr, dbl) %>%\n       filter(dbl > 7 & dbl < 53) %>%\n       arrange(dbl),\n-    rbind(\n-      df1[8:10, c(\"chr\", \"dbl\")],\n-      df2[1:2, c(\"chr\", \"dbl\")]\n-    )\n+    df2[1:2, c(\"chr\", \"dbl\")]\n+  )\n+})\n+\n+test_that(\"Partition scheme inference\", {\n+  # These are the same tests as above, just using the *PartitionSchemeDiscovery\n+  ds1 <- open_dataset(dataset_dir, partition = \"part\")\n+  expect_identical(names(ds1), c(names(df1), \"part\"))\n+  expect_equivalent(\n+    ds1 %>%\n+      select(string = chr, integer = int, part) %>%\n+      filter(integer > 6 & part == 1) %>%\n+      summarize(mean = mean(integer)),\n+    df1 %>%\n+      select(string = chr, integer = int) %>%\n+      filter(integer > 6) %>%\n+      summarize(mean = mean(integer))\n+  )\n+\n+  ds2 <- open_dataset(hive_dir)\n+  expect_identical(names(ds2), c(names(df1), \"group\", \"other\"))\n+  print(ds2$schema)\n+  expect_equivalent(\n \n Review comment:\n   @bkietz this test fails, which suggests to me that the HivePartitionSchemeDiscovery isn't working fully. The fields do appear in the schema but the filtering isn't happening--the result has too many rows in it.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-12-21T00:07:34.616+0000",
                    "updated": "2019-12-21T00:07:34.616+0000",
                    "started": "2019-12-21T00:07:34.615+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "361970",
                    "issueId": "13275065"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13275065/worklog/361975",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "github-actions[bot] commented on issue #6077: ARROW-7414: [R][Dataset] Implement *PartitionSchemeDiscovery in R\nURL: https://github.com/apache/arrow/pull/6077#issuecomment-568131932\n \n \n   https://issues.apache.org/jira/browse/ARROW-7414\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-12-21T00:16:44.996+0000",
                    "updated": "2019-12-21T00:16:44.996+0000",
                    "started": "2019-12-21T00:16:44.996+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "361975",
                    "issueId": "13275065"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13275065/worklog/365951",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "bkietz commented on pull request #6077: ARROW-7414: [R][Dataset] Implement *PartitionSchemeDiscovery in R\nURL: https://github.com/apache/arrow/pull/6077#discussion_r362928859\n \n \n\n ##########\n File path: r/tests/testthat/test-dataset.R\n ##########\n @@ -90,13 +90,39 @@ test_that(\"Hive partitioning\", {\n   expect_is(ds, \"Dataset\")\n   expect_equivalent(\n     ds %>%\n+      filter(group == 2) %>%\n       select(chr, dbl) %>%\n       filter(dbl > 7 & dbl < 53) %>%\n       arrange(dbl),\n-    rbind(\n-      df1[8:10, c(\"chr\", \"dbl\")],\n-      df2[1:2, c(\"chr\", \"dbl\")]\n-    )\n+    df2[1:2, c(\"chr\", \"dbl\")]\n+  )\n+})\n+\n+test_that(\"Partition scheme inference\", {\n+  # These are the same tests as above, just using the *PartitionSchemeDiscovery\n+  ds1 <- open_dataset(dataset_dir, partition = \"part\")\n+  expect_identical(names(ds1), c(names(df1), \"part\"))\n+  expect_equivalent(\n+    ds1 %>%\n+      select(string = chr, integer = int, part) %>%\n+      filter(integer > 6 & part == 1) %>%\n+      summarize(mean = mean(integer)),\n+    df1 %>%\n+      select(string = chr, integer = int) %>%\n+      filter(integer > 6) %>%\n+      summarize(mean = mean(integer))\n+  )\n+\n+  ds2 <- open_dataset(hive_dir)\n+  expect_identical(names(ds2), c(names(df1), \"group\", \"other\"))\n+  print(ds2$schema)\n+  expect_equivalent(\n \n Review comment:\n   fixed in https://github.com/apache/arrow/pull/6077/commits/6caaa8145fefd1ad510648559293ddc067e80b7b\r\n   HivePartitionSchemeDiscovery was constructing a SchemaPartitionScheme instead of a HivePartitionScheme. Wasn't caught because we only have unit tests for HivePartitionSchemeDiscovery in C++ (e2e uses SchemaPartitionSchemeDiscovery).\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-01-03T19:19:57.719+0000",
                    "updated": "2020-01-03T19:19:57.719+0000",
                    "started": "2020-01-03T19:19:57.719+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "365951",
                    "issueId": "13275065"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13275065/worklog/365963",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "bkietz commented on pull request #6077: ARROW-7414: [R][Dataset] Implement *PartitionSchemeDiscovery in R\nURL: https://github.com/apache/arrow/pull/6077#discussion_r362931355\n \n \n\n ##########\n File path: r/R/dataset.R\n ##########\n @@ -25,21 +25,28 @@\n #'    parsed, and path segments will be matched with the schema fields. For\n #'    example, `schema(year = int16(), month = int8())` would create partitions\n #'    for file paths like \"2019/01/file.parquet\", \"2019/02/file.parquet\", etc.\n+#'   * A character vector that defines the field names corresponding to those\n+#'    path segments (that is, you're providing the names that would correspond\n+#'    to a `Schema` but the types will be autodetected)\n #'   * A `HivePartitionScheme`, as returned by [hive_partition()]\n \n Review comment:\n   This is slightly confusing since `hive_partition()` (with no arguments) now returns a Discovery instead of a Scheme\r\n   ```suggestion\r\n   #'   * A `HivePartitionScheme`, as returned by [hive_partition(...)]\r\n   ```\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-01-03T19:35:35.040+0000",
                    "updated": "2020-01-03T19:35:35.040+0000",
                    "started": "2020-01-03T19:35:35.039+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "365963",
                    "issueId": "13275065"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13275065/worklog/365964",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "bkietz commented on pull request #6077: ARROW-7414: [R][Dataset] Implement *PartitionSchemeDiscovery in R\nURL: https://github.com/apache/arrow/pull/6077#discussion_r362929923\n \n \n\n ##########\n File path: r/NAMESPACE\n ##########\n @@ -31,6 +31,7 @@ S3method(is.na,Expression)\n S3method(is.na,array_expression)\n S3method(length,Array)\n S3method(length,ChunkedArray)\n+S3method(length,Schema)\n \n Review comment:\n   Maybe this is just R convention, but it looks odd to me that Schema and Array share the `length` property. The two have the same name but are logically orthogonal (in the context of Schema it refers to column count but in an Array it refers to row count). It might be less confusing to just type out `length(names(Schema))` but I won't block on this\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-01-03T19:35:35.044+0000",
                    "updated": "2020-01-03T19:35:35.044+0000",
                    "started": "2020-01-03T19:35:35.044+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "365964",
                    "issueId": "13275065"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13275065/worklog/365998",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "bkietz commented on issue #6077: ARROW-7414: [R][Dataset] Implement *PartitionSchemeDiscovery in R\nURL: https://github.com/apache/arrow/pull/6077#issuecomment-570686821\n \n \n   [This failure](https://github.com/apache/arrow/pull/6077/checks?check_run_id=372902977#step:5:1560) looks like a flake\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-01-03T20:19:40.624+0000",
                    "updated": "2020-01-03T20:19:40.624+0000",
                    "started": "2020-01-03T20:19:40.624+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "365998",
                    "issueId": "13275065"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13275065/worklog/366008",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nealrichardson commented on pull request #6077: ARROW-7414: [R][Dataset] Implement *PartitionSchemeDiscovery in R\nURL: https://github.com/apache/arrow/pull/6077#discussion_r362951968\n \n \n\n ##########\n File path: r/NAMESPACE\n ##########\n @@ -31,6 +31,7 @@ S3method(is.na,Expression)\n S3method(is.na,array_expression)\n S3method(length,Array)\n S3method(length,ChunkedArray)\n+S3method(length,Schema)\n \n Review comment:\n   Schema is logically a list of fields, and lists have length, so this makes sense to me. Array or other objects and whether they have length methods doesn\u2019t seem relevant. \n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-01-03T20:32:56.811+0000",
                    "updated": "2020-01-03T20:32:56.811+0000",
                    "started": "2020-01-03T20:32:56.811+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "366008",
                    "issueId": "13275065"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13275065/worklog/366042",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nealrichardson commented on pull request #6077: ARROW-7414: [R][Dataset] Implement *PartitionSchemeDiscovery in R\nURL: https://github.com/apache/arrow/pull/6077#discussion_r362972576\n \n \n\n ##########\n File path: r/R/dataset.R\n ##########\n @@ -25,21 +25,28 @@\n #'    parsed, and path segments will be matched with the schema fields. For\n #'    example, `schema(year = int16(), month = int8())` would create partitions\n #'    for file paths like \"2019/01/file.parquet\", \"2019/02/file.parquet\", etc.\n+#'   * A character vector that defines the field names corresponding to those\n+#'    path segments (that is, you're providing the names that would correspond\n+#'    to a `Schema` but the types will be autodetected)\n #'   * A `HivePartitionScheme`, as returned by [hive_partition()]\n \n Review comment:\n   It's somewhat academic since neither `HivePartitionScheme` nor `HivePartitionSchemeDiscovery` are useful to a user except as an input here, but if we wanted this to be completely factual, I'd prefer this: \r\n   \r\n   ```suggestion\r\n   #'   * A `HivePartitionScheme` or `HivePartitionSchemeDiscovery`, as returned by [hive_partition()]\r\n   ```\r\n   \r\n   The docs for `hive_partition()` do explain that it could return either: https://github.com/apache/arrow/pull/6077/files#diff-b3408619fab15d6abbec82111f21bb8cR13\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-01-03T21:49:19.948+0000",
                    "updated": "2020-01-03T21:49:19.948+0000",
                    "started": "2020-01-03T21:49:19.948+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "366042",
                    "issueId": "13275065"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13275065/worklog/366050",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "bkietz commented on pull request #6077: ARROW-7414: [R][Dataset] Implement *PartitionSchemeDiscovery in R\nURL: https://github.com/apache/arrow/pull/6077#discussion_r362977671\n \n \n\n ##########\n File path: r/R/dataset.R\n ##########\n @@ -25,21 +25,28 @@\n #'    parsed, and path segments will be matched with the schema fields. For\n #'    example, `schema(year = int16(), month = int8())` would create partitions\n #'    for file paths like \"2019/01/file.parquet\", \"2019/02/file.parquet\", etc.\n+#'   * A character vector that defines the field names corresponding to those\n+#'    path segments (that is, you're providing the names that would correspond\n+#'    to a `Schema` but the types will be autodetected)\n #'   * A `HivePartitionScheme`, as returned by [hive_partition()]\n \n Review comment:\n   perfect\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-01-03T22:09:12.160+0000",
                    "updated": "2020-01-03T22:09:12.160+0000",
                    "started": "2020-01-03T22:09:12.159+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "366050",
                    "issueId": "13275065"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13275065/worklog/366685",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "bkietz commented on pull request #6077: ARROW-7414: [R][Dataset] Implement *PartitionSchemeDiscovery in R\nURL: https://github.com/apache/arrow/pull/6077\n \n \n   \n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-01-06T15:02:10.756+0000",
                    "updated": "2020-01-06T15:02:10.756+0000",
                    "started": "2020-01-06T15:02:10.756+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "366685",
                    "issueId": "13275065"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
            "id": "4",
            "description": "An improvement or enhancement to an existing feature or task.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
            "name": "Improvement",
            "subtask": false,
            "avatarId": 21140
        },
        "timespent": 6000,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@5b50890c[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@46bfee94[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@33f7816f[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@a8512cb[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@7c23a437[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@13146ea2[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@1ce77956[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@3ed6334b[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@5fb53aba[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@6fe43e90[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@486ec7f3[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@472de9de[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 6000,
        "customfield_12312520": null,
        "customfield_12312521": "Mon Jan 06 15:02:44 UTC 2020",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2020-01-06T15:02:44.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-7414/watchers",
            "watchCount": 1,
            "isWatching": false
        },
        "created": "2019-12-17T17:40:44.000+0000",
        "updated": "2020-01-06T15:02:44.000+0000",
        "timeoriginalestimate": null,
        "description": null,
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "1h 40m",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 6000
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[R][Dataset] Implement PartitionSchemeDiscovery",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13275065/comment/17008930",
                    "id": "17008930",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=bkietz",
                        "name": "bkietz",
                        "key": "bkietz",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=bkietz&avatarId=37277",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bkietz&avatarId=37277",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bkietz&avatarId=37277",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bkietz&avatarId=37277"
                        },
                        "displayName": "Ben Kietzman",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "Issue resolved by pull request 6077\n[https://github.com/apache/arrow/pull/6077]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=bkietz",
                        "name": "bkietz",
                        "key": "bkietz",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=bkietz&avatarId=37277",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bkietz&avatarId=37277",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bkietz&avatarId=37277",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bkietz&avatarId=37277"
                        },
                        "displayName": "Ben Kietzman",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2020-01-06T15:02:44.419+0000",
                    "updated": "2020-01-06T15:02:44.419+0000"
                }
            ],
            "maxResults": 1,
            "total": 1,
            "startAt": 0
        },
        "customfield_12311820": "0|z09rps:",
        "customfield_12314139": null
    }
}