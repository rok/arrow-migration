{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13249890",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13249890",
    "key": "ARROW-6187",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12345978",
                "id": "12345978",
                "description": "",
                "name": "0.15.0",
                "archived": false,
                "released": true,
                "releaseDate": "2019-10-05"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "name": "Major",
            "id": "3"
        },
        "labels": [
            "parquet",
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=jorisvandenbossche",
            "name": "jorisvandenbossche",
            "key": "jorisvandenbossche",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
            },
            "displayName": "Joris Van den Bossche",
            "active": true,
            "timeZone": "Europe/Brussels"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12328935",
                "id": "12328935",
                "name": "C++"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=jorisvandenbossche",
            "name": "jorisvandenbossche",
            "key": "jorisvandenbossche",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
            },
            "displayName": "Joris Van den Bossche",
            "active": true,
            "timeZone": "Europe/Brussels"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=jorisvandenbossche",
            "name": "jorisvandenbossche",
            "key": "jorisvandenbossche",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
            },
            "displayName": "Joris Van den Bossche",
            "active": true,
            "timeZone": "Europe/Brussels"
        },
        "aggregateprogress": {
            "progress": 8400,
            "total": 8400,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 8400,
            "total": 8400,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-6187/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 14,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13249890/worklog/314936",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jorisvandenbossche commented on pull request #5436: ARROW-6187: [C++] Fallback to storage type when writing ExtensionType to Parquet\nURL: https://github.com/apache/arrow/pull/5436\n \n \n   https://issues.apache.org/jira/browse/ARROW-6187\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-09-19T10:04:04.019+0000",
                    "updated": "2019-09-19T10:04:04.019+0000",
                    "started": "2019-09-19T10:04:04.018+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "314936",
                    "issueId": "13249890"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13249890/worklog/314952",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on issue #5436: ARROW-6187: [C++] Fallback to storage type when writing ExtensionType to Parquet\nURL: https://github.com/apache/arrow/pull/5436#issuecomment-533069661\n \n \n   It would be better to store the extension name and serialization in the Parquet metadata, no? Then you can recreate a true extension array when reading?\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-09-19T10:29:30.331+0000",
                    "updated": "2019-09-19T10:29:30.331+0000",
                    "started": "2019-09-19T10:29:30.330+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "314952",
                    "issueId": "13249890"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13249890/worklog/314963",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jorisvandenbossche commented on issue #5436: ARROW-6187: [C++] Fallback to storage type when writing ExtensionType to Parquet\nURL: https://github.com/apache/arrow/pull/5436#issuecomment-533074946\n \n \n   Yes, that was the idea to look into next. But I can probably directly try that in this PR.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-09-19T10:47:12.618+0000",
                    "updated": "2019-09-19T10:47:12.618+0000",
                    "started": "2019-09-19T10:47:12.617+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "314963",
                    "issueId": "13249890"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13249890/worklog/315113",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on issue #5436: ARROW-6187: [C++] Fallback to storage type when writing ExtensionType to Parquet\nURL: https://github.com/apache/arrow/pull/5436#issuecomment-533173595\n \n \n   I think that would be nice, since that would validate the whole approach. The metadata keys are currently private in `arrow/ipc/metadata_internal.cc` (see `kExtensionTypeKeyName` and `kExtensionMetadataKeyName`), you can probably make them extern in a `.h` somewhere.\r\n   \r\n   Perhaps you could instead use Parquet-specific metadata keys if Parquet has a well-known convention for them, though.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-09-19T15:03:51.951+0000",
                    "updated": "2019-09-19T15:03:51.951+0000",
                    "started": "2019-09-19T15:03:51.950+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "315113",
                    "issueId": "13249890"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13249890/worklog/315239",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jorisvandenbossche commented on pull request #5436: ARROW-6187: [C++] Fallback to storage type when writing ExtensionType to Parquet\nURL: https://github.com/apache/arrow/pull/5436#discussion_r326334006\n \n \n\n ##########\n File path: cpp/src/parquet/arrow/reader_internal.cc\n ##########\n @@ -1098,6 +1123,21 @@ Status TransferDecimal(RecordReader* reader, MemoryPool* pool,\n   return Status::OK();\n }\n \n+Status TransferExtension(RecordReader* reader, std::shared_ptr<DataType> value_type,\n+                         const ColumnDescriptor* descr, MemoryPool* pool, Datum* out) {\n+  std::shared_ptr<ChunkedArray> result;\n+  auto ext_type = std::static_pointer_cast<::arrow::ExtensionType>(value_type);\n+  auto storage_type = ext_type->storage_type();\n+  RETURN_NOT_OK(TransferColumnData(reader, storage_type, descr, pool, &result));\n+\n+  auto result0 = result->chunk(0);\n+  auto ext_data = result0->data()->Copy();\n+  ext_data->type = ext_type;\n+  auto ext_result = ext_type->MakeArray(ext_data);\n \n Review comment:\n   Is there a generic way to create a create a ChunkedArray of a certain type? Or will I need to loop through the chunks, create an ExtensionArray for each chunk, and create a ChunkedArray of all converted chunks?\r\n   \r\n   (I suppose we should implement `View()` for viewing an array as an extensionarray) \n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-09-19T18:59:48.495+0000",
                    "updated": "2019-09-19T18:59:48.495+0000",
                    "started": "2019-09-19T18:59:48.494+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "315239",
                    "issueId": "13249890"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13249890/worklog/316806",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on pull request #5436: ARROW-6187: [C++] Fallback to storage type when writing ExtensionType to Parquet\nURL: https://github.com/apache/arrow/pull/5436#discussion_r327219612\n \n \n\n ##########\n File path: cpp/src/parquet/arrow/reader_internal.cc\n ##########\n @@ -1098,6 +1123,21 @@ Status TransferDecimal(RecordReader* reader, MemoryPool* pool,\n   return Status::OK();\n }\n \n+Status TransferExtension(RecordReader* reader, std::shared_ptr<DataType> value_type,\n+                         const ColumnDescriptor* descr, MemoryPool* pool, Datum* out) {\n+  std::shared_ptr<ChunkedArray> result;\n+  auto ext_type = std::static_pointer_cast<::arrow::ExtensionType>(value_type);\n+  auto storage_type = ext_type->storage_type();\n+  RETURN_NOT_OK(TransferColumnData(reader, storage_type, descr, pool, &result));\n+\n+  auto result0 = result->chunk(0);\n+  auto ext_data = result0->data()->Copy();\n+  ext_data->type = ext_type;\n+  auto ext_result = ext_type->MakeArray(ext_data);\n \n Review comment:\n   The latter.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-09-23T16:47:06.971+0000",
                    "updated": "2019-09-23T16:47:06.971+0000",
                    "started": "2019-09-23T16:47:06.971+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "316806",
                    "issueId": "13249890"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13249890/worklog/316810",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on issue #5436: ARROW-6187: [C++] Fallback to storage type when writing ExtensionType to Parquet\nURL: https://github.com/apache/arrow/pull/5436#issuecomment-534185539\n \n \n   The implementation looks good on the principle, feel free to ping when this is ready for review.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-09-23T16:49:28.897+0000",
                    "updated": "2019-09-23T16:49:28.897+0000",
                    "started": "2019-09-23T16:49:28.896+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "316810",
                    "issueId": "13249890"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13249890/worklog/317334",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jorisvandenbossche commented on pull request #5436: ARROW-6187: [C++] Fallback to storage type when writing ExtensionType to Parquet\nURL: https://github.com/apache/arrow/pull/5436#discussion_r327536556\n \n \n\n ##########\n File path: cpp/src/parquet/arrow/reader_internal.cc\n ##########\n @@ -1098,6 +1123,21 @@ Status TransferDecimal(RecordReader* reader, MemoryPool* pool,\n   return Status::OK();\n }\n \n+Status TransferExtension(RecordReader* reader, std::shared_ptr<DataType> value_type,\n+                         const ColumnDescriptor* descr, MemoryPool* pool, Datum* out) {\n+  std::shared_ptr<ChunkedArray> result;\n+  auto ext_type = std::static_pointer_cast<::arrow::ExtensionType>(value_type);\n+  auto storage_type = ext_type->storage_type();\n+  RETURN_NOT_OK(TransferColumnData(reader, storage_type, descr, pool, &result));\n+\n+  auto result0 = result->chunk(0);\n+  auto ext_data = result0->data()->Copy();\n+  ext_data->type = ext_type;\n+  auto ext_result = ext_type->MakeArray(ext_data);\n \n Review comment:\n   I replaced the above with\r\n   \r\n   ```\r\n     ::arrow::ArrayVector out_chunks(result->num_chunks());\r\n     for (int i = 0; i < result->num_chunks(); i++) {\r\n        auto chunk = result->chunk(i);\r\n        auto ext_data = chunk->data()->Copy();\r\n        ext_data->type = ext_type;\r\n        auto ext_result = ext_type->MakeArray(ext_data);\r\n        out_chunks.push_back(ext_result);\r\n     }\r\n     *out = std::make_shared<ChunkedArray>(out_chunks, ext_type);\r\n   ```\r\n   \r\n   which builds but when running segfaults on the `std::make_shared<ChunkedArray>(out_chunks, ext_type)` line, and can't directly figure out why. Do you see anything obviously wrong ?\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-09-24T10:19:03.639+0000",
                    "updated": "2019-09-24T10:19:03.639+0000",
                    "started": "2019-09-24T10:19:03.639+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "317334",
                    "issueId": "13249890"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13249890/worklog/317335",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jorisvandenbossche commented on pull request #5436: ARROW-6187: [C++] Fallback to storage type when writing ExtensionType to Parquet\nURL: https://github.com/apache/arrow/pull/5436#discussion_r327536556\n \n \n\n ##########\n File path: cpp/src/parquet/arrow/reader_internal.cc\n ##########\n @@ -1098,6 +1123,21 @@ Status TransferDecimal(RecordReader* reader, MemoryPool* pool,\n   return Status::OK();\n }\n \n+Status TransferExtension(RecordReader* reader, std::shared_ptr<DataType> value_type,\n+                         const ColumnDescriptor* descr, MemoryPool* pool, Datum* out) {\n+  std::shared_ptr<ChunkedArray> result;\n+  auto ext_type = std::static_pointer_cast<::arrow::ExtensionType>(value_type);\n+  auto storage_type = ext_type->storage_type();\n+  RETURN_NOT_OK(TransferColumnData(reader, storage_type, descr, pool, &result));\n+\n+  auto result0 = result->chunk(0);\n+  auto ext_data = result0->data()->Copy();\n+  ext_data->type = ext_type;\n+  auto ext_result = ext_type->MakeArray(ext_data);\n \n Review comment:\n   I replaced the above hardcoded handling of the first chunk with\r\n   \r\n   ```\r\n     ::arrow::ArrayVector out_chunks(result->num_chunks());\r\n     for (int i = 0; i < result->num_chunks(); i++) {\r\n        auto chunk = result->chunk(i);\r\n        auto ext_data = chunk->data()->Copy();\r\n        ext_data->type = ext_type;\r\n        auto ext_result = ext_type->MakeArray(ext_data);\r\n        out_chunks.push_back(ext_result);\r\n     }\r\n     *out = std::make_shared<ChunkedArray>(out_chunks, ext_type);\r\n   ```\r\n   \r\n   which builds but when running segfaults on the `std::make_shared<ChunkedArray>(out_chunks, ext_type)` line, and can't directly figure out why. Do you see anything obviously wrong ?\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-09-24T10:19:26.342+0000",
                    "updated": "2019-09-24T10:19:26.342+0000",
                    "started": "2019-09-24T10:19:26.342+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "317335",
                    "issueId": "13249890"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13249890/worklog/317384",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on pull request #5436: ARROW-6187: [C++] Fallback to storage type when writing ExtensionType to Parquet\nURL: https://github.com/apache/arrow/pull/5436#discussion_r327559341\n \n \n\n ##########\n File path: cpp/src/parquet/arrow/reader_internal.cc\n ##########\n @@ -1098,6 +1123,21 @@ Status TransferDecimal(RecordReader* reader, MemoryPool* pool,\n   return Status::OK();\n }\n \n+Status TransferExtension(RecordReader* reader, std::shared_ptr<DataType> value_type,\n+                         const ColumnDescriptor* descr, MemoryPool* pool, Datum* out) {\n+  std::shared_ptr<ChunkedArray> result;\n+  auto ext_type = std::static_pointer_cast<::arrow::ExtensionType>(value_type);\n+  auto storage_type = ext_type->storage_type();\n+  RETURN_NOT_OK(TransferColumnData(reader, storage_type, descr, pool, &result));\n+\n+  auto result0 = result->chunk(0);\n+  auto ext_data = result0->data()->Copy();\n+  ext_data->type = ext_type;\n+  auto ext_result = ext_type->MakeArray(ext_data);\n \n Review comment:\n   That's because `out_chunks(result->num_chunks())` already creates a N-entry vector, then with `push_back` you append _after_ the N first entries (which are null by default).\r\n   \r\n   Just replace `out_chunks.push_back(ext_result);` with `out_chunks[i] = ext_result;`\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-09-24T11:22:38.231+0000",
                    "updated": "2019-09-24T11:22:38.231+0000",
                    "started": "2019-09-24T11:22:38.230+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "317384",
                    "issueId": "13249890"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13249890/worklog/317407",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jorisvandenbossche commented on pull request #5436: ARROW-6187: [C++] Fallback to storage type when writing ExtensionType to Parquet\nURL: https://github.com/apache/arrow/pull/5436#discussion_r327567488\n \n \n\n ##########\n File path: cpp/src/parquet/arrow/reader_internal.cc\n ##########\n @@ -1098,6 +1123,21 @@ Status TransferDecimal(RecordReader* reader, MemoryPool* pool,\n   return Status::OK();\n }\n \n+Status TransferExtension(RecordReader* reader, std::shared_ptr<DataType> value_type,\n+                         const ColumnDescriptor* descr, MemoryPool* pool, Datum* out) {\n+  std::shared_ptr<ChunkedArray> result;\n+  auto ext_type = std::static_pointer_cast<::arrow::ExtensionType>(value_type);\n+  auto storage_type = ext_type->storage_type();\n+  RETURN_NOT_OK(TransferColumnData(reader, storage_type, descr, pool, &result));\n+\n+  auto result0 = result->chunk(0);\n+  auto ext_data = result0->data()->Copy();\n+  ext_data->type = ext_type;\n+  auto ext_result = ext_type->MakeArray(ext_data);\n \n Review comment:\n   Ah, I see, thanks! That indeed works :)\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-09-24T11:45:04.704+0000",
                    "updated": "2019-09-24T11:45:04.704+0000",
                    "started": "2019-09-24T11:45:04.703+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "317407",
                    "issueId": "13249890"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13249890/worklog/317548",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jorisvandenbossche commented on issue #5436: ARROW-6187: [C++] Fallback to storage type when writing ExtensionType to Parquet\nURL: https://github.com/apache/arrow/pull/5436#issuecomment-534592026\n \n \n   This should be ready for review now.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-09-24T14:44:00.342+0000",
                    "updated": "2019-09-24T14:44:00.342+0000",
                    "started": "2019-09-24T14:44:00.341+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "317548",
                    "issueId": "13249890"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13249890/worklog/317699",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on issue #5436: ARROW-6187: [C++] Fallback to storage type when writing ExtensionType to Parquet\nURL: https://github.com/apache/arrow/pull/5436#issuecomment-534666296\n \n \n   AppVeyor build: https://ci.appveyor.com/project/jorisvandenbossche/arrow/builds/27629229\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-09-24T17:35:55.195+0000",
                    "updated": "2019-09-24T17:35:55.195+0000",
                    "started": "2019-09-24T17:35:55.195+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "317699",
                    "issueId": "13249890"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13249890/worklog/317707",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on pull request #5436: ARROW-6187: [C++] Fallback to storage type when writing ExtensionType to Parquet\nURL: https://github.com/apache/arrow/pull/5436\n \n \n   \n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-09-24T17:44:50.948+0000",
                    "updated": "2019-09-24T17:44:50.948+0000",
                    "started": "2019-09-24T17:44:50.947+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "317707",
                    "issueId": "13249890"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
            "id": "4",
            "description": "An improvement or enhancement to an existing feature or task.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
            "name": "Improvement",
            "subtask": false,
            "avatarId": 21140
        },
        "timespent": 8400,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@1eda5415[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@6b792075[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@5547a7cf[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@779f4f9a[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@15efb69e[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@59ea7d9[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@6d0f017a[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@606160de[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@8d2710a[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@7882afa6[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@6d13751d[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@61f9ff1[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 8400,
        "customfield_12312520": null,
        "customfield_12312521": "Tue Sep 24 17:44:49 UTC 2019",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2019-09-24T17:44:49.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-6187/watchers",
            "watchCount": 1,
            "isWatching": false
        },
        "created": "2019-08-09T12:47:35.000+0000",
        "updated": "2019-09-24T17:44:50.000+0000",
        "timeoriginalestimate": null,
        "description": "Writing a table that contains an ExtensionType array to a parquet file is not yet implemented. It currently raises \"ArrowNotImplementedError: Unhandled type for Arrow to Parquet schema conversion: extension<arrow.py_extension_type>\" (for a PyExtensionType in this case).\r\n\r\nI think minimal support can consist of writing the storage type / array. \r\n\r\nWe also might want to save the extension name and metadata in the parquet FileMetadata. \r\n\r\nLater on, this could be potentially be used to restore the extension type when reading. This is related to other issues that need to save the arrow schema (categorical: ARROW-5480, time zones: ARROW-5888). Only in this case, we probably want to store the serialised type in addition to the schema (which only has the extension type's name). ",
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "2h 20m",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 8400
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[C++] fallback to storage type when writing ExtensionType to Parquet",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13249890/comment/16937043",
                    "id": "16937043",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "body": "Issue resolved by pull request 5436\n[https://github.com/apache/arrow/pull/5436]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "created": "2019-09-24T17:44:49.535+0000",
                    "updated": "2019-09-24T17:44:49.535+0000"
                }
            ],
            "maxResults": 1,
            "total": 1,
            "startAt": 0
        },
        "customfield_12311820": "0|z05i9c:",
        "customfield_12314139": null
    }
}