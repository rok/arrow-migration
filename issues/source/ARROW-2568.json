{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13158524",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13158524",
    "key": "ARROW-2568",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12342562",
                "id": "12342562",
                "description": "",
                "name": "0.10.0",
                "archived": false,
                "released": true,
                "releaseDate": "2018-08-06"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "name": "Major",
            "id": "3"
        },
        "labels": [
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12341707",
                "id": "12341707",
                "description": "",
                "name": "0.9.0",
                "archived": false,
                "released": true,
                "releaseDate": "2018-03-19"
            }
        ],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
            "name": "apitrou",
            "key": "pitrou",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
            },
            "displayName": "Antoine Pitrou",
            "active": true,
            "timeZone": "Europe/Paris"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12328936",
                "id": "12328936",
                "name": "Python"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
            "name": "apitrou",
            "key": "pitrou",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
            },
            "displayName": "Antoine Pitrou",
            "active": true,
            "timeZone": "Europe/Paris"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
            "name": "apitrou",
            "key": "pitrou",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
            },
            "displayName": "Antoine Pitrou",
            "active": true,
            "timeZone": "Europe/Paris"
        },
        "aggregateprogress": {
            "progress": 11400,
            "total": 11400,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 11400,
            "total": 11400,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-2568/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 23,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13158524/worklog/105175",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou opened a new pull request #2078: ARROW-2568: [Python] Expose thread pool size setting to Python, and deprecate \"nthreads\" where possible\nURL: https://github.com/apache/arrow/pull/2078\n \n \n   There are two areas where `nthreads` cannot be replaced immediately by the global thread pool:\r\n   \r\n   1. when converting Pandas data to Arrow table or record batch, since it uses a Python `ThreadPoolExecutor` from pure Python code (see `dataframe_to_arrays` in `pandas_compat.py`)\r\n   2. when reading or writing Parquet data, since `parquet-cpp` relies on parallelization facilities in the stable version of Arrow (see https://github.com/apache/parquet-cpp/pull/467)\r\n   \r\n   Elsewhere, we add a `use_threads` boolean argument and deprecate `nthreads`.\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-05-23T16:41:52.453+0000",
                    "updated": "2018-05-23T16:41:52.453+0000",
                    "started": "2018-05-23T16:41:52.452+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "105175",
                    "issueId": "13158524"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13158524/worklog/105187",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on a change in pull request #2078: ARROW-2568: [Python] Expose thread pool size setting to Python, and deprecate \"nthreads\" where possible\nURL: https://github.com/apache/arrow/pull/2078#discussion_r190339452\n \n \n\n ##########\n File path: python/pyarrow/table.pxi\n ##########\n @@ -746,15 +747,19 @@ cdef class RecordBatch:\n             entries.append((name, column))\n         return OrderedDict(entries)\n \n-    def to_pandas(self, nthreads=None):\n+    def to_pandas(self, nthreads=None, use_threads=False):\n         \"\"\"\n         Convert the arrow::RecordBatch to a pandas DataFrame\n \n         Returns\n         -------\n         pandas.DataFrame\n         \"\"\"\n-        return Table.from_batches([self]).to_pandas(nthreads=nthreads)\n+        if nthreads is not None:\n+            warnings.warn(\"`nthreads` argument is ignored, \"\n+                          \"pass `use_threads` instead\", FutureWarning,\n+                          stacklevel=2)\n \n Review comment:\n   Same comment\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-05-23T17:45:38.211+0000",
                    "updated": "2018-05-23T17:45:38.211+0000",
                    "started": "2018-05-23T17:45:38.211+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "105187",
                    "issueId": "13158524"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13158524/worklog/105188",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on a change in pull request #2078: ARROW-2568: [Python] Expose thread pool size setting to Python, and deprecate \"nthreads\" where possible\nURL: https://github.com/apache/arrow/pull/2078#discussion_r190336367\n \n \n\n ##########\n File path: cpp/src/arrow/python/arrow_to_pandas.cc\n ##########\n @@ -1866,14 +1869,14 @@ Status ConvertColumnToPandas(PandasOptions options, const std::shared_ptr<Column\n }\n \n Status ConvertTableToPandas(PandasOptions options, const std::shared_ptr<Table>& table,\n-                            int nthreads, MemoryPool* pool, PyObject** out) {\n-  return ConvertTableToPandas(options, std::unordered_set<std::string>(), table, nthreads,\n-                              pool, out);\n+                            bool use_threads, MemoryPool* pool, PyObject** out) {\n+  return ConvertTableToPandas(options, std::unordered_set<std::string>(), table,\n+                              use_threads, pool, out);\n }\n \n Status ConvertTableToPandas(PandasOptions options,\n                             const std::unordered_set<std::string>& categorical_columns,\n-                            const std::shared_ptr<Table>& table, int nthreads,\n+                            const std::shared_ptr<Table>& table, bool use_threads,\n \n Review comment:\n   `use_threads` could even be moved to the options struct\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-05-23T17:45:38.212+0000",
                    "updated": "2018-05-23T17:45:38.212+0000",
                    "started": "2018-05-23T17:45:38.212+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "105188",
                    "issueId": "13158524"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13158524/worklog/105189",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on a change in pull request #2078: ARROW-2568: [Python] Expose thread pool size setting to Python, and deprecate \"nthreads\" where possible\nURL: https://github.com/apache/arrow/pull/2078#discussion_r190339504\n \n \n\n ##########\n File path: python/pyarrow/table.pxi\n ##########\n @@ -1177,15 +1180,18 @@ cdef class Table:\n         cdef:\n             PandasOptions options\n \n+        if nthreads is not None:\n+            warnings.warn(\"`nthreads` argument is ignored, \"\n+                          \"pass `use_threads` instead\", FutureWarning,\n+                          stacklevel=2)\n \n Review comment:\n   Same\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-05-23T17:45:38.488+0000",
                    "updated": "2018-05-23T17:45:38.488+0000",
                    "started": "2018-05-23T17:45:38.487+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "105189",
                    "issueId": "13158524"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13158524/worklog/105190",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on a change in pull request #2078: ARROW-2568: [Python] Expose thread pool size setting to Python, and deprecate \"nthreads\" where possible\nURL: https://github.com/apache/arrow/pull/2078#discussion_r190339229\n \n \n\n ##########\n File path: python/pyarrow/ipc.py\n ##########\n @@ -168,22 +170,26 @@ def serialize_pandas(df, nthreads=None, preserve_index=True):\n     return sink.get_result()\n \n \n-def deserialize_pandas(buf, nthreads=None):\n+def deserialize_pandas(buf, nthreads=None, use_threads=False):\n     \"\"\"Deserialize a buffer protocol compatible object into a pandas DataFrame.\n \n     Parameters\n     ----------\n     buf : buffer\n         An object compatible with the buffer protocol\n-    nthreads : int, defualt None\n-        The number of threads to use to convert the buffer to a DataFrame,\n-        default all CPUs\n+    use_threads: boolean, default False\n+        Whether to parallelize the conversion using multiple threads\n \n     Returns\n     -------\n     df : pandas.DataFrame\n     \"\"\"\n+    if nthreads is not None:\n+        warnings.warn(\"`nthreads` argument is ignored, \"\n+                      \"pass `use_threads` instead\", FutureWarning,\n+                      stacklevel=2)\n \n Review comment:\n   Same comment as above. Perhaps a helper function that issues the warning could be added to prevent the code duplication\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-05-23T17:45:38.488+0000",
                    "updated": "2018-05-23T17:45:38.488+0000",
                    "started": "2018-05-23T17:45:38.488+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "105190",
                    "issueId": "13158524"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13158524/worklog/105191",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on a change in pull request #2078: ARROW-2568: [Python] Expose thread pool size setting to Python, and deprecate \"nthreads\" where possible\nURL: https://github.com/apache/arrow/pull/2078#discussion_r190337102\n \n \n\n ##########\n File path: cpp/src/arrow/util/thread-pool.cc\n ##########\n @@ -52,6 +52,11 @@ Status ThreadPool::SetCapacity(size_t threads) {\n }\n \n size_t ThreadPool::GetCapacity() {\n+  std::unique_lock<std::mutex> lock(mutex_);\n \n Review comment:\n   Is there a reason to use `unique_lock` over `lock_guard` here? I hadn't ever used `unique_lock` before, e.g. https://stackoverflow.com/questions/20516773/stdunique-lockstdmutex-or-stdlock-guardstdmutex\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-05-23T17:45:38.496+0000",
                    "updated": "2018-05-23T17:45:38.496+0000",
                    "started": "2018-05-23T17:45:38.496+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "105191",
                    "issueId": "13158524"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13158524/worklog/105192",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on a change in pull request #2078: ARROW-2568: [Python] Expose thread pool size setting to Python, and deprecate \"nthreads\" where possible\nURL: https://github.com/apache/arrow/pull/2078#discussion_r190336155\n \n \n\n ##########\n File path: cpp/src/arrow/python/arrow_to_pandas.cc\n ##########\n @@ -1450,23 +1450,26 @@ class DataFrameBlockCreator {\n     return Status::OK();\n   }\n \n-  Status WriteTableToBlocks(int nthreads) {\n+  Status WriteTableToBlocks(bool use_threads) {\n     auto WriteColumn = [this](int i) {\n       std::shared_ptr<PandasBlock> block;\n       RETURN_NOT_OK(this->GetBlock(i, &block));\n       return block->Write(this->table_->column(i), i, this->column_block_placement_[i]);\n     };\n \n-    int num_tasks = table_->num_columns();\n-    nthreads = std::min<int>(nthreads, num_tasks);\n-    if (nthreads == 1) {\n-      for (int i = 0; i < num_tasks; ++i) {\n-        RETURN_NOT_OK(WriteColumn(i));\n+    arrow::internal::ThreadPool* pool = arrow::internal::CPUThreadPool();\n+    std::vector<std::future<Status>> futures;\n+    for (int i = 0; i < table_->num_columns(); ++i) {\n+      futures.push_back(pool->Submit(WriteColumn, i));\n+    }\n+    auto final_status = Status::OK();\n+    for (auto& fut : futures) {\n+      Status st = fut.get();\n+      if (!st.ok()) {\n+        final_status = st;\n       }\n-    } else {\n-      RETURN_NOT_OK(ParallelFor(nthreads, num_tasks, WriteColumn));\n     }\n-    return Status::OK();\n+    return final_status;\n \n Review comment:\n   Put this \"merge all futures Status return values\" into a helper function?\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-05-23T17:45:38.510+0000",
                    "updated": "2018-05-23T17:45:38.510+0000",
                    "started": "2018-05-23T17:45:38.510+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "105192",
                    "issueId": "13158524"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13158524/worklog/105193",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on a change in pull request #2078: ARROW-2568: [Python] Expose thread pool size setting to Python, and deprecate \"nthreads\" where possible\nURL: https://github.com/apache/arrow/pull/2078#discussion_r190337562\n \n \n\n ##########\n File path: cpp/src/arrow/util/thread-pool.h\n ##########\n @@ -125,7 +135,7 @@ class ThreadPool {\n   // Launch a given number of additional workers\n   void LaunchWorkersUnlocked(size_t threads);\n   void WorkerLoop(std::list<std::thread>::iterator it);\n-  size_t GetCapacity();\n+  size_t GetActualCapacity();\n \n Review comment:\n   See above\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-05-23T17:45:38.614+0000",
                    "updated": "2018-05-23T17:45:38.614+0000",
                    "started": "2018-05-23T17:45:38.614+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "105193",
                    "issueId": "13158524"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13158524/worklog/105194",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on a change in pull request #2078: ARROW-2568: [Python] Expose thread pool size setting to Python, and deprecate \"nthreads\" where possible\nURL: https://github.com/apache/arrow/pull/2078#discussion_r190337856\n \n \n\n ##########\n File path: python/pyarrow/feather.py\n ##########\n @@ -66,8 +66,13 @@ def read_table(self, columns=None):\n         table = Table.from_arrays(columns, names=names)\n         return table\n \n-    def read_pandas(self, columns=None, nthreads=1):\n-        return self.read_table(columns=columns).to_pandas(nthreads=nthreads)\n+    def read_pandas(self, columns=None, nthreads=None, use_threads=False):\n+        if nthreads is not None:\n+            warnings.warn(\"`nthreads` argument is ignored, \"\n+                          \"pass `use_threads` instead\", FutureWarning,\n+                          stacklevel=2)\n \n Review comment:\n   If the user had passed `nthreads > 1`, then we should set `use_threads=True` here for backwards compatibility\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-05-23T17:45:38.692+0000",
                    "updated": "2018-05-23T17:45:38.692+0000",
                    "started": "2018-05-23T17:45:38.691+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "105194",
                    "issueId": "13158524"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13158524/worklog/105195",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on a change in pull request #2078: ARROW-2568: [Python] Expose thread pool size setting to Python, and deprecate \"nthreads\" where possible\nURL: https://github.com/apache/arrow/pull/2078#discussion_r190337887\n \n \n\n ##########\n File path: python/pyarrow/feather.py\n ##########\n @@ -157,7 +162,12 @@ def read_pandas(self, columns=None, nthreads=1):\n         pandas.DataFrame\n             Content of the file as a pandas DataFrame (of columns)\n         \"\"\"\n-        return self.read_table(columns=columns).to_pandas(nthreads=nthreads)\n+        if nthreads is not None:\n+            warnings.warn(\"`nthreads` argument is ignored, \"\n+                          \"pass `use_threads` instead\", FutureWarning,\n+                          stacklevel=2)\n \n Review comment:\n   See comment above\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-05-23T17:45:38.779+0000",
                    "updated": "2018-05-23T17:45:38.779+0000",
                    "started": "2018-05-23T17:45:38.778+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "105195",
                    "issueId": "13158524"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13158524/worklog/105196",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on a change in pull request #2078: ARROW-2568: [Python] Expose thread pool size setting to Python, and deprecate \"nthreads\" where possible\nURL: https://github.com/apache/arrow/pull/2078#discussion_r190337284\n \n \n\n ##########\n File path: cpp/src/arrow/util/thread-pool.h\n ##########\n @@ -36,6 +36,11 @@\n \n namespace arrow {\n \n+// Get the number of worker threads used by the process-global thread pool\n+// for CPU-bound tasks.  This is an idealized number, the actual number\n+// may lag a bit.\n+ARROW_EXPORT size_t GetCPUThreadPoolCapacity();\n+\n // Set the number of worker threads used by the process-global thread pool\n // for CPU-bound tasks.\n ARROW_EXPORT Status SetCPUThreadPoolCapacity(size_t threads);\n \n Review comment:\n   `int` instead of `size_t` \n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-05-23T17:45:38.881+0000",
                    "updated": "2018-05-23T17:45:38.881+0000",
                    "started": "2018-05-23T17:45:38.881+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "105196",
                    "issueId": "13158524"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13158524/worklog/105197",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on a change in pull request #2078: ARROW-2568: [Python] Expose thread pool size setting to Python, and deprecate \"nthreads\" where possible\nURL: https://github.com/apache/arrow/pull/2078#discussion_r190337208\n \n \n\n ##########\n File path: cpp/src/arrow/util/thread-pool.h\n ##########\n @@ -36,6 +36,11 @@\n \n namespace arrow {\n \n+// Get the number of worker threads used by the process-global thread pool\n+// for CPU-bound tasks.  This is an idealized number, the actual number\n+// may lag a bit.\n+ARROW_EXPORT size_t GetCPUThreadPoolCapacity();\n \n Review comment:\n   Use `int` here instead of `size_t`. See https://google.github.io/styleguide/cppguide.html#Integer_Types\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-05-23T17:45:38.883+0000",
                    "updated": "2018-05-23T17:45:38.883+0000",
                    "started": "2018-05-23T17:45:38.883+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "105197",
                    "issueId": "13158524"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13158524/worklog/105198",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on a change in pull request #2078: ARROW-2568: [Python] Expose thread pool size setting to Python, and deprecate \"nthreads\" where possible\nURL: https://github.com/apache/arrow/pull/2078#discussion_r190335977\n \n \n\n ##########\n File path: cpp/src/arrow/python/arrow_to_pandas.cc\n ##########\n @@ -1450,23 +1450,26 @@ class DataFrameBlockCreator {\n     return Status::OK();\n   }\n \n-  Status WriteTableToBlocks(int nthreads) {\n+  Status WriteTableToBlocks(bool use_threads) {\n     auto WriteColumn = [this](int i) {\n       std::shared_ptr<PandasBlock> block;\n       RETURN_NOT_OK(this->GetBlock(i, &block));\n       return block->Write(this->table_->column(i), i, this->column_block_placement_[i]);\n     };\n \n-    int num_tasks = table_->num_columns();\n-    nthreads = std::min<int>(nthreads, num_tasks);\n-    if (nthreads == 1) {\n-      for (int i = 0; i < num_tasks; ++i) {\n-        RETURN_NOT_OK(WriteColumn(i));\n+    arrow::internal::ThreadPool* pool = arrow::internal::CPUThreadPool();\n \n Review comment:\n   Maybe call this `cpu_thread_pool()` (similar to `arrow::default_memory_pool()`)\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-05-23T17:45:38.886+0000",
                    "updated": "2018-05-23T17:45:38.886+0000",
                    "started": "2018-05-23T17:45:38.882+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "105198",
                    "issueId": "13158524"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13158524/worklog/105282",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on a change in pull request #2078: ARROW-2568: [Python] Expose thread pool size setting to Python, and deprecate \"nthreads\" where possible\nURL: https://github.com/apache/arrow/pull/2078#discussion_r190366214\n \n \n\n ##########\n File path: cpp/src/arrow/python/arrow_to_pandas.cc\n ##########\n @@ -1450,23 +1450,26 @@ class DataFrameBlockCreator {\n     return Status::OK();\n   }\n \n-  Status WriteTableToBlocks(int nthreads) {\n+  Status WriteTableToBlocks(bool use_threads) {\n     auto WriteColumn = [this](int i) {\n       std::shared_ptr<PandasBlock> block;\n       RETURN_NOT_OK(this->GetBlock(i, &block));\n       return block->Write(this->table_->column(i), i, this->column_block_placement_[i]);\n     };\n \n-    int num_tasks = table_->num_columns();\n-    nthreads = std::min<int>(nthreads, num_tasks);\n-    if (nthreads == 1) {\n-      for (int i = 0; i < num_tasks; ++i) {\n-        RETURN_NOT_OK(WriteColumn(i));\n+    arrow::internal::ThreadPool* pool = arrow::internal::CPUThreadPool();\n+    std::vector<std::future<Status>> futures;\n+    for (int i = 0; i < table_->num_columns(); ++i) {\n+      futures.push_back(pool->Submit(WriteColumn, i));\n+    }\n+    auto final_status = Status::OK();\n+    for (auto& fut : futures) {\n+      Status st = fut.get();\n+      if (!st.ok()) {\n+        final_status = st;\n       }\n-    } else {\n-      RETURN_NOT_OK(ParallelFor(nthreads, num_tasks, WriteColumn));\n     }\n-    return Status::OK();\n+    return final_status;\n \n Review comment:\n   Do you think this should be a static method on the Status class?\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-05-23T19:08:51.538+0000",
                    "updated": "2018-05-23T19:08:51.538+0000",
                    "started": "2018-05-23T19:08:51.538+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "105282",
                    "issueId": "13158524"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13158524/worklog/105283",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on a change in pull request #2078: ARROW-2568: [Python] Expose thread pool size setting to Python, and deprecate \"nthreads\" where possible\nURL: https://github.com/apache/arrow/pull/2078#discussion_r190366451\n \n \n\n ##########\n File path: python/pyarrow/ipc.py\n ##########\n @@ -168,22 +170,26 @@ def serialize_pandas(df, nthreads=None, preserve_index=True):\n     return sink.get_result()\n \n \n-def deserialize_pandas(buf, nthreads=None):\n+def deserialize_pandas(buf, nthreads=None, use_threads=False):\n     \"\"\"Deserialize a buffer protocol compatible object into a pandas DataFrame.\n \n     Parameters\n     ----------\n     buf : buffer\n         An object compatible with the buffer protocol\n-    nthreads : int, defualt None\n-        The number of threads to use to convert the buffer to a DataFrame,\n-        default all CPUs\n+    use_threads: boolean, default False\n+        Whether to parallelize the conversion using multiple threads\n \n     Returns\n     -------\n     df : pandas.DataFrame\n     \"\"\"\n+    if nthreads is not None:\n+        warnings.warn(\"`nthreads` argument is ignored, \"\n+                      \"pass `use_threads` instead\", FutureWarning,\n+                      stacklevel=2)\n \n Review comment:\n   Right :-)\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-05-23T19:09:40.932+0000",
                    "updated": "2018-05-23T19:09:40.932+0000",
                    "started": "2018-05-23T19:09:40.931+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "105283",
                    "issueId": "13158524"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13158524/worklog/105287",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on a change in pull request #2078: ARROW-2568: [Python] Expose thread pool size setting to Python, and deprecate \"nthreads\" where possible\nURL: https://github.com/apache/arrow/pull/2078#discussion_r190366988\n \n \n\n ##########\n File path: cpp/src/arrow/util/thread-pool.h\n ##########\n @@ -36,6 +36,11 @@\n \n namespace arrow {\n \n+// Get the number of worker threads used by the process-global thread pool\n+// for CPU-bound tasks.  This is an idealized number, the actual number\n+// may lag a bit.\n+ARROW_EXPORT size_t GetCPUThreadPoolCapacity();\n \n Review comment:\n   This style guide is a bit ambiguous. It says: \"\"\"Of the C integer types, only int should be used. When appropriate, you are welcome to use standard types like size_t and ptrdiff_t.\"\"\"\r\n   \r\n   Does it consider size_t not to be a C integer type?\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-05-23T19:11:36.317+0000",
                    "updated": "2018-05-23T19:11:36.317+0000",
                    "started": "2018-05-23T19:11:36.316+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "105287",
                    "issueId": "13158524"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13158524/worklog/105288",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on a change in pull request #2078: ARROW-2568: [Python] Expose thread pool size setting to Python, and deprecate \"nthreads\" where possible\nURL: https://github.com/apache/arrow/pull/2078#discussion_r190367757\n \n \n\n ##########\n File path: cpp/src/arrow/util/thread-pool.cc\n ##########\n @@ -52,6 +52,11 @@ Status ThreadPool::SetCapacity(size_t threads) {\n }\n \n size_t ThreadPool::GetCapacity() {\n+  std::unique_lock<std::mutex> lock(mutex_);\n \n Review comment:\n   [`condition_variable::wait`](http://en.cppreference.com/w/cpp/thread/condition_variable/wait) requires a `unique_lock`, and I simply re-used the same idiom all around.\r\n   \r\n   \n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-05-23T19:14:17.999+0000",
                    "updated": "2018-05-23T19:14:17.999+0000",
                    "started": "2018-05-23T19:14:17.998+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "105288",
                    "issueId": "13158524"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13158524/worklog/105560",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on issue #2078: ARROW-2568: [Python] Expose thread pool size setting to Python, and deprecate \"nthreads\" where possible\nURL: https://github.com/apache/arrow/pull/2078#issuecomment-391699789\n \n \n   There's a weird issue on Windows. It seems the global ThreadPool destructor is called after the OS has killed the worker threads, and it hangs on notifying a condition variable. I will have to find a strategy to work it around.\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-05-24T12:40:33.645+0000",
                    "updated": "2018-05-24T12:40:33.645+0000",
                    "started": "2018-05-24T12:40:33.644+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "105560",
                    "issueId": "13158524"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13158524/worklog/105615",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "codecov-io commented on issue #2078: ARROW-2568: [Python] Expose thread pool size setting to Python, and deprecate \"nthreads\" where possible\nURL: https://github.com/apache/arrow/pull/2078#issuecomment-391750128\n \n \n   # [Codecov](https://codecov.io/gh/apache/arrow/pull/2078?src=pr&el=h1) Report\n   > Merging [#2078](https://codecov.io/gh/apache/arrow/pull/2078?src=pr&el=desc) into [master](https://codecov.io/gh/apache/arrow/commit/5c5e95a2d5c84487dff0c9ecbcf5b1ee6da5b929?src=pr&el=desc) will **decrease** coverage by `<.01%`.\n   > The diff coverage is `96.75%`.\n   \n   [![Impacted file tree graph](https://codecov.io/gh/apache/arrow/pull/2078/graphs/tree.svg?width=650&height=150&src=pr&token=LpTCFbqVT1)](https://codecov.io/gh/apache/arrow/pull/2078?src=pr&el=tree)\n   \n   ```diff\n   @@            Coverage Diff             @@\n   ##           master    #2078      +/-   ##\n   ==========================================\n   - Coverage   86.33%   86.33%   -0.01%     \n   ==========================================\n     Files         242      230      -12     \n     Lines       41103    40288     -815     \n   ==========================================\n   - Hits        35487    34782     -705     \n   + Misses       5616     5506     -110\n   ```\n   \n   \n   | [Impacted Files](https://codecov.io/gh/apache/arrow/pull/2078?src=pr&el=tree) | Coverage \u0394 | |\n   |---|---|---|\n   | [cpp/src/arrow/python/arrow\\_to\\_pandas.h](https://codecov.io/gh/apache/arrow/pull/2078/diff?src=pr&el=tree#diff-Y3BwL3NyYy9hcnJvdy9weXRob24vYXJyb3dfdG9fcGFuZGFzLmg=) | `100% <\u00f8> (\u00f8)` | :arrow_up: |\n   | [cpp/src/arrow/util/thread-pool.h](https://codecov.io/gh/apache/arrow/pull/2078/diff?src=pr&el=tree#diff-Y3BwL3NyYy9hcnJvdy91dGlsL3RocmVhZC1wb29sLmg=) | `92.3% <\u00f8> (\u00f8)` | :arrow_up: |\n   | [python/pyarrow/tests/test\\_convert\\_pandas.py](https://codecov.io/gh/apache/arrow/pull/2078/diff?src=pr&el=tree#diff-cHl0aG9uL3B5YXJyb3cvdGVzdHMvdGVzdF9jb252ZXJ0X3BhbmRhcy5weQ==) | `94.78% <100%> (\u00f8)` | :arrow_up: |\n   | [cpp/src/arrow/status.cc](https://codecov.io/gh/apache/arrow/pull/2078/diff?src=pr&el=tree#diff-Y3BwL3NyYy9hcnJvdy9zdGF0dXMuY2M=) | `44.64% <100%> (-1.79%)` | :arrow_down: |\n   | [python/pyarrow/tests/test\\_ipc.py](https://codecov.io/gh/apache/arrow/pull/2078/diff?src=pr&el=tree#diff-cHl0aG9uL3B5YXJyb3cvdGVzdHMvdGVzdF9pcGMucHk=) | `100% <100%> (\u00f8)` | :arrow_up: |\n   | [cpp/src/arrow/util/memory.h](https://codecov.io/gh/apache/arrow/pull/2078/diff?src=pr&el=tree#diff-Y3BwL3NyYy9hcnJvdy91dGlsL21lbW9yeS5o) | `100% <100%> (\u00f8)` | :arrow_up: |\n   | [cpp/src/arrow/status-test.cc](https://codecov.io/gh/apache/arrow/pull/2078/diff?src=pr&el=tree#diff-Y3BwL3NyYy9hcnJvdy9zdGF0dXMtdGVzdC5jYw==) | `100% <100%> (\u00f8)` | :arrow_up: |\n   | [python/pyarrow/lib.pyx](https://codecov.io/gh/apache/arrow/pull/2078/diff?src=pr&el=tree#diff-cHl0aG9uL3B5YXJyb3cvbGliLnB5eA==) | `100% <100%> (\u00f8)` | :arrow_up: |\n   | [cpp/src/arrow/util/thread-pool-test.cc](https://codecov.io/gh/apache/arrow/pull/2078/diff?src=pr&el=tree#diff-Y3BwL3NyYy9hcnJvdy91dGlsL3RocmVhZC1wb29sLXRlc3QuY2M=) | `99.45% <100%> (+0.02%)` | :arrow_up: |\n   | [python/pyarrow/tests/test\\_misc.py](https://codecov.io/gh/apache/arrow/pull/2078/diff?src=pr&el=tree#diff-cHl0aG9uL3B5YXJyb3cvdGVzdHMvdGVzdF9taXNjLnB5) | `100% <100%> (\u00f8)` | :arrow_up: |\n   | ... and [25 more](https://codecov.io/gh/apache/arrow/pull/2078/diff?src=pr&el=tree-more) | |\n   \n   ------\n   \n   [Continue to review full report at Codecov](https://codecov.io/gh/apache/arrow/pull/2078?src=pr&el=continue).\n   > **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n   > `\u0394 = absolute <relative> (impact)`, `\u00f8 = not affected`, `? = missing data`\n   > Powered by [Codecov](https://codecov.io/gh/apache/arrow/pull/2078?src=pr&el=footer). Last update [5c5e95a...a7aeed0](https://codecov.io/gh/apache/arrow/pull/2078?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n   \n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-05-24T15:12:56.619+0000",
                    "updated": "2018-05-24T15:12:56.619+0000",
                    "started": "2018-05-24T15:12:56.618+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "105615",
                    "issueId": "13158524"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13158524/worklog/105628",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "codecov-io commented on issue #2078: ARROW-2568: [Python] Expose thread pool size setting to Python, and deprecate \"nthreads\" where possible\nURL: https://github.com/apache/arrow/pull/2078#issuecomment-391750128\n \n \n   # [Codecov](https://codecov.io/gh/apache/arrow/pull/2078?src=pr&el=h1) Report\n   > Merging [#2078](https://codecov.io/gh/apache/arrow/pull/2078?src=pr&el=desc) into [master](https://codecov.io/gh/apache/arrow/commit/5c5e95a2d5c84487dff0c9ecbcf5b1ee6da5b929?src=pr&el=desc) will **decrease** coverage by `<.01%`.\n   > The diff coverage is `96.87%`.\n   \n   [![Impacted file tree graph](https://codecov.io/gh/apache/arrow/pull/2078/graphs/tree.svg?height=150&width=650&token=LpTCFbqVT1&src=pr)](https://codecov.io/gh/apache/arrow/pull/2078?src=pr&el=tree)\n   \n   ```diff\n   @@            Coverage Diff             @@\n   ##           master    #2078      +/-   ##\n   ==========================================\n   - Coverage   86.33%   86.33%   -0.01%     \n   ==========================================\n     Files         242      230      -12     \n     Lines       41103    40292     -811     \n   ==========================================\n   - Hits        35487    34786     -701     \n   + Misses       5616     5506     -110\n   ```\n   \n   \n   | [Impacted Files](https://codecov.io/gh/apache/arrow/pull/2078?src=pr&el=tree) | Coverage \u0394 | |\n   |---|---|---|\n   | [cpp/src/arrow/util/thread-pool.h](https://codecov.io/gh/apache/arrow/pull/2078/diff?src=pr&el=tree#diff-Y3BwL3NyYy9hcnJvdy91dGlsL3RocmVhZC1wb29sLmg=) | `92.3% <\u00f8> (\u00f8)` | :arrow_up: |\n   | [cpp/src/arrow/python/python-test.cc](https://codecov.io/gh/apache/arrow/pull/2078/diff?src=pr&el=tree#diff-Y3BwL3NyYy9hcnJvdy9weXRob24vcHl0aG9uLXRlc3QuY2M=) | `100% <100%> (\u00f8)` | :arrow_up: |\n   | [python/pyarrow/lib.pyx](https://codecov.io/gh/apache/arrow/pull/2078/diff?src=pr&el=tree#diff-cHl0aG9uL3B5YXJyb3cvbGliLnB5eA==) | `100% <100%> (\u00f8)` | :arrow_up: |\n   | [python/pyarrow/tests/test\\_ipc.py](https://codecov.io/gh/apache/arrow/pull/2078/diff?src=pr&el=tree#diff-cHl0aG9uL3B5YXJyb3cvdGVzdHMvdGVzdF9pcGMucHk=) | `100% <100%> (\u00f8)` | :arrow_up: |\n   | [python/pyarrow/pandas\\_compat.py](https://codecov.io/gh/apache/arrow/pull/2078/diff?src=pr&el=tree#diff-cHl0aG9uL3B5YXJyb3cvcGFuZGFzX2NvbXBhdC5weQ==) | `97.82% <100%> (\u00f8)` | :arrow_up: |\n   | [cpp/src/arrow/status-test.cc](https://codecov.io/gh/apache/arrow/pull/2078/diff?src=pr&el=tree#diff-Y3BwL3NyYy9hcnJvdy9zdGF0dXMtdGVzdC5jYw==) | `100% <100%> (\u00f8)` | :arrow_up: |\n   | [python/pyarrow/ipc.py](https://codecov.io/gh/apache/arrow/pull/2078/diff?src=pr&el=tree#diff-cHl0aG9uL3B5YXJyb3cvaXBjLnB5) | `100% <100%> (\u00f8)` | :arrow_up: |\n   | [cpp/src/arrow/util/thread-pool.cc](https://codecov.io/gh/apache/arrow/pull/2078/diff?src=pr&el=tree#diff-Y3BwL3NyYy9hcnJvdy91dGlsL3RocmVhZC1wb29sLmNj) | `96% <100%> (+2.36%)` | :arrow_up: |\n   | [python/pyarrow/tests/test\\_misc.py](https://codecov.io/gh/apache/arrow/pull/2078/diff?src=pr&el=tree#diff-cHl0aG9uL3B5YXJyb3cvdGVzdHMvdGVzdF9taXNjLnB5) | `100% <100%> (\u00f8)` | :arrow_up: |\n   | [cpp/src/arrow/status.h](https://codecov.io/gh/apache/arrow/pull/2078/diff?src=pr&el=tree#diff-Y3BwL3NyYy9hcnJvdy9zdGF0dXMuaA==) | `95% <100%> (+2.27%)` | :arrow_up: |\n   | ... and [26 more](https://codecov.io/gh/apache/arrow/pull/2078/diff?src=pr&el=tree-more) | |\n   \n   ------\n   \n   [Continue to review full report at Codecov](https://codecov.io/gh/apache/arrow/pull/2078?src=pr&el=continue).\n   > **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n   > `\u0394 = absolute <relative> (impact)`, `\u00f8 = not affected`, `? = missing data`\n   > Powered by [Codecov](https://codecov.io/gh/apache/arrow/pull/2078?src=pr&el=footer). Last update [5c5e95a...91187bf](https://codecov.io/gh/apache/arrow/pull/2078?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n   \n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-05-24T16:19:05.930+0000",
                    "updated": "2018-05-24T16:19:05.930+0000",
                    "started": "2018-05-24T16:19:05.930+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "105628",
                    "issueId": "13158524"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
            "id": "4",
            "description": "An improvement or enhancement to an existing feature or task.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
            "name": "Improvement",
            "subtask": false,
            "avatarId": 21140
        },
        "timespent": 11400,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@1884aa[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@5d505332[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@cb59e3a[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@5323955d[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@96587f8[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@22f0ae9f[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@214a0b5[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@4dd244d7[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@682d40d2[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@4f0e9f1e[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@68389f42[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@37938a6e[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 11400,
        "customfield_12312520": null,
        "customfield_12312521": "Fri May 25 01:37:56 UTC 2018",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2018-05-25T01:37:56.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-2568/watchers",
            "watchCount": 1,
            "isWatching": false
        },
        "created": "2018-05-10T17:14:46.000+0000",
        "updated": "2018-05-25T01:37:56.000+0000",
        "timeoriginalestimate": null,
        "description": "Now that we have a global thread pool, we should:\r\n * use it in places where we currently require an explicit number of threads (with an additional {{use_threads}} argument to enable parallelism)\r\n * deprecate the now pointless {{nthreads}} argument\r\n * expose the thread pool capacity setting in Python",
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "3h 10m",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 11400
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[Python] Expose thread pool size setting to Python, and deprecate \"nthreads\"",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13158524/comment/16490102",
                    "id": "16490102",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "Issue resolved by pull request 2078\n[https://github.com/apache/arrow/pull/2078]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2018-05-25T01:37:56.122+0000",
                    "updated": "2018-05-25T01:37:56.122+0000"
                }
            ],
            "maxResults": 1,
            "total": 1,
            "startAt": 0
        },
        "customfield_12311820": "0|i3tksf:",
        "customfield_12314139": null
    }
}