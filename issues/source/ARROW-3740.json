{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13197533",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13197533",
    "key": "ARROW-3740",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12343858",
                "id": "12343858",
                "description": "",
                "name": "0.12.0",
                "archived": false,
                "released": true,
                "releaseDate": "2019-01-20"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "name": "Major",
            "id": "3"
        },
        "labels": [
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12344316",
                "id": "12344316",
                "name": "0.11.1",
                "archived": false,
                "released": true,
                "releaseDate": "2018-10-23"
            }
        ],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=fsaintjacques",
            "name": "fsaintjacques",
            "key": "fsaintjacques",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fsaintjacques&avatarId=37276",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fsaintjacques&avatarId=37276",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fsaintjacques&avatarId=37276",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fsaintjacques&avatarId=37276"
            },
            "displayName": "Francois Saint-Jacques",
            "active": true,
            "timeZone": "America/New_York"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12328935",
                "id": "12328935",
                "name": "C++"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
            "name": "wesm",
            "key": "wesmckinn",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
            },
            "displayName": "Wes McKinney",
            "active": true,
            "timeZone": "America/New_York"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
            "name": "wesm",
            "key": "wesmckinn",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
            },
            "displayName": "Wes McKinney",
            "active": true,
            "timeZone": "America/New_York"
        },
        "aggregateprogress": {
            "progress": 1200,
            "total": 1200,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 1200,
            "total": 1200,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-3740/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 2,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13197533/worklog/170792",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on a change in pull request #3055: ARROW-3740: [C++] Builder should not downsize\nURL: https://github.com/apache/arrow/pull/3055#discussion_r237640748\n \n \n\n ##########\n File path: cpp/src/arrow/builder.h\n ##########\n @@ -87,7 +87,9 @@ class ARROW_EXPORT ArrayBuilder {\n   /// been appended. Does not account for reallocations that may be due to\n   /// variable size data, like binary values. To make space for incremental\n   /// appends, use Reserve instead.\n-  /// \\param[in] capacity the minimum number of additional array values\n+  ///\n+  /// \\param[in] capacity the minimum number of additional array values. Must\n \n Review comment:\n   I think the \"additional\" here is misleading; I think this needs to be \"the number of total values to allocate memory for\". I'll make this minor change\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-11-29T20:09:22.628+0000",
                    "updated": "2018-11-29T20:09:22.628+0000",
                    "started": "2018-11-29T20:09:22.627+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "170792",
                    "issueId": "13197533"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13197533/worklog/170802",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm closed pull request #3055: ARROW-3740: [C++] Builder should not downsize\nURL: https://github.com/apache/arrow/pull/3055\n \n \n   \n\nThis is a PR merged from a forked repository.\nAs GitHub hides the original diff on merge, it is displayed below for\nthe sake of provenance:\n\nAs this is a foreign pull request (from a fork), the diff is supplied\nbelow (as it won't show otherwise due to GitHub magic):\n\ndiff --git a/cpp/src/arrow/array-test.cc b/cpp/src/arrow/array-test.cc\nindex d7445d6fa6..ab03cede69 100644\n--- a/cpp/src/arrow/array-test.cc\n+++ b/cpp/src/arrow/array-test.cc\n@@ -261,6 +261,16 @@ TEST_F(TestBuilder, TestReserve) {\n   ASSERT_EQ(BitUtil::NextPower2(1030), builder.capacity());\n }\n \n+TEST_F(TestBuilder, TestResizeDownsize) {\n+  UInt8Builder builder(pool_);\n+\n+  ASSERT_OK(builder.Resize(1000));\n+  ASSERT_EQ(1000, builder.capacity());\n+\n+  // Can't downsize.\n+  ASSERT_RAISES(Invalid, builder.Resize(500));\n+}\n+\n template <typename Attrs>\n class TestPrimitiveBuilder : public TestBuilder {\n  public:\n@@ -889,6 +899,8 @@ TYPED_TEST(TestPrimitiveBuilder, TestReserve) {\n   ASSERT_OK(this->builder_->Advance(100));\n   ASSERT_OK(this->builder_->Reserve(kMinBuilderCapacity));\n \n+  ASSERT_RAISES(Invalid, this->builder_->Resize(1));\n+\n   ASSERT_EQ(BitUtil::NextPower2(kMinBuilderCapacity + 100), this->builder_->capacity());\n }\n \ndiff --git a/cpp/src/arrow/builder.cc b/cpp/src/arrow/builder.cc\nindex 6aa415bbed..0d9e0e0e62 100644\n--- a/cpp/src/arrow/builder.cc\n+++ b/cpp/src/arrow/builder.cc\n@@ -79,9 +79,17 @@ Status ArrayBuilder::AppendToBitmap(const uint8_t* valid_bytes, int64_t length)\n   return Status::OK();\n }\n \n+static inline Status CheckCapacity(int64_t new_capacity, int64_t old_capacity) {\n+  if (new_capacity < 0) return Status::Invalid(\"Resize capacity must be positive\");\n+  if (new_capacity < old_capacity) return Status::Invalid(\"Resize cannot downsize\");\n+\n+  return Status::OK();\n+}\n+\n Status ArrayBuilder::Resize(int64_t capacity) {\n   // Target size of validity (null) bitmap data\n   const int64_t new_bitmap_size = BitUtil::BytesForBits(capacity);\n+  RETURN_NOT_OK(CheckCapacity(capacity, capacity_));\n \n   if (capacity_ == 0) {\n     RETURN_NOT_OK(AllocateResizableBuffer(pool_, new_bitmap_size, &null_bitmap_));\n@@ -200,10 +208,8 @@ void PrimitiveBuilder<T>::Reset() {\n \n template <typename T>\n Status PrimitiveBuilder<T>::Resize(int64_t capacity) {\n-  // XXX: Set floor size for now\n-  if (capacity < kMinBuilderCapacity) {\n-    capacity = kMinBuilderCapacity;\n-  }\n+  RETURN_NOT_OK(CheckCapacity(capacity, capacity_));\n+  capacity = std::max(capacity, kMinBuilderCapacity);\n \n   int64_t nbytes = TypeTraits<T>::bytes_required(capacity);\n   if (capacity_ == 0) {\n@@ -298,10 +304,8 @@ void AdaptiveIntBuilderBase::Reset() {\n }\n \n Status AdaptiveIntBuilderBase::Resize(int64_t capacity) {\n-  // XXX: Set floor size for now\n-  if (capacity < kMinBuilderCapacity) {\n-    capacity = kMinBuilderCapacity;\n-  }\n+  RETURN_NOT_OK(CheckCapacity(capacity, capacity_));\n+  capacity = std::max(capacity, kMinBuilderCapacity);\n \n   int64_t nbytes = capacity * int_size_;\n   if (capacity_ == 0) {\n@@ -634,10 +638,8 @@ void BooleanBuilder::Reset() {\n }\n \n Status BooleanBuilder::Resize(int64_t capacity) {\n-  // XXX: Set floor size for now\n-  if (capacity < kMinBuilderCapacity) {\n-    capacity = kMinBuilderCapacity;\n-  }\n+  RETURN_NOT_OK(CheckCapacity(capacity, capacity_));\n+  capacity = std::max(capacity, kMinBuilderCapacity);\n \n   const int64_t new_bitmap_size = BitUtil::BytesForBits(capacity);\n   if (capacity_ == 0) {\n@@ -792,9 +794,8 @@ void DictionaryBuilder<T>::Reset() {\n \n template <typename T>\n Status DictionaryBuilder<T>::Resize(int64_t capacity) {\n-  if (capacity < kMinBuilderCapacity) {\n-    capacity = kMinBuilderCapacity;\n-  }\n+  RETURN_NOT_OK(CheckCapacity(capacity, capacity_));\n+  capacity = std::max(capacity, kMinBuilderCapacity);\n \n   if (capacity_ == 0) {\n     // Initialize hash table\n@@ -807,9 +808,9 @@ Status DictionaryBuilder<T>::Resize(int64_t capacity) {\n }\n \n Status DictionaryBuilder<NullType>::Resize(int64_t capacity) {\n-  if (capacity < kMinBuilderCapacity) {\n-    capacity = kMinBuilderCapacity;\n-  }\n+  RETURN_NOT_OK(CheckCapacity(capacity, capacity_));\n+  capacity = std::max(capacity, kMinBuilderCapacity);\n+\n   RETURN_NOT_OK(values_builder_.Resize(capacity));\n   return ArrayBuilder::Resize(capacity);\n }\n@@ -1003,6 +1004,8 @@ Status ListBuilder::Append(bool is_valid) {\n \n Status ListBuilder::Resize(int64_t capacity) {\n   DCHECK_LE(capacity, kListMaximumElements);\n+  RETURN_NOT_OK(CheckCapacity(capacity, capacity_));\n+\n   // one more then requested for offsets\n   RETURN_NOT_OK(offsets_builder_.Resize((capacity + 1) * sizeof(int32_t)));\n   return ArrayBuilder::Resize(capacity);\n@@ -1054,6 +1057,8 @@ BinaryBuilder::BinaryBuilder(MemoryPool* pool) : BinaryBuilder(binary(), pool) {\n \n Status BinaryBuilder::Resize(int64_t capacity) {\n   DCHECK_LE(capacity, kListMaximumElements);\n+  RETURN_NOT_OK(CheckCapacity(capacity, capacity_));\n+\n   // one more then requested for offsets\n   RETURN_NOT_OK(offsets_builder_.Resize((capacity + 1) * sizeof(int32_t)));\n   return ArrayBuilder::Resize(capacity);\n@@ -1266,6 +1271,7 @@ void FixedSizeBinaryBuilder::Reset() {\n }\n \n Status FixedSizeBinaryBuilder::Resize(int64_t capacity) {\n+  RETURN_NOT_OK(CheckCapacity(capacity, capacity_));\n   RETURN_NOT_OK(byte_builder_.Resize(capacity * byte_width_));\n   return ArrayBuilder::Resize(capacity);\n }\ndiff --git a/cpp/src/arrow/builder.h b/cpp/src/arrow/builder.h\nindex 1e8bccaffb..183e7e9d9b 100644\n--- a/cpp/src/arrow/builder.h\n+++ b/cpp/src/arrow/builder.h\n@@ -87,7 +87,9 @@ class ARROW_EXPORT ArrayBuilder {\n   /// been appended. Does not account for reallocations that may be due to\n   /// variable size data, like binary values. To make space for incremental\n   /// appends, use Reserve instead.\n-  /// \\param[in] capacity the minimum number of additional array values\n+  ///\n+  /// \\param[in] capacity the minimum number of total array values to\n+  ///            accommodate. Must be greater than the current capacity.\n   /// \\return Status\n   virtual Status Resize(int64_t capacity);\n \n\n\n \n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-11-29T20:52:31.096+0000",
                    "updated": "2018-11-29T20:52:31.096+0000",
                    "started": "2018-11-29T20:52:31.096+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "170802",
                    "issueId": "13197533"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
            "id": "1",
            "description": "A problem which impairs or prevents the functions of the product.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
            "name": "Bug",
            "subtask": false,
            "avatarId": 21133
        },
        "timespent": 1200,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@138bd803[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@2def6130[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@3ede9674[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@686e967e[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@26c85ac1[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@153d6ba7[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@5f9a2242[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@435b92a9[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@2721d651[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@593fe141[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@57395016[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@48685e82[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 1200,
        "customfield_12312520": null,
        "customfield_12312521": "Thu Nov 29 20:52:19 UTC 2018",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2018-11-29T20:52:19.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-3740/watchers",
            "watchCount": 3,
            "isWatching": false
        },
        "created": "2018-11-09T23:16:05.000+0000",
        "updated": "2018-11-29T20:52:31.000+0000",
        "timeoriginalestimate": null,
        "description": "This was brought up by the Go patch ARROW-3613. If you append some data to a builder, then call {{Resize}} with something smaller than what's reported by {{length()}}, the capacity will be updated, but the length will not. So I think further appends would probably segfault. Either way we should add some tests for this case of \"shrinking\" a builder (which destroys data, but it's permitted by the API ",
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "20m",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 1200
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[C++] Calling ArrayBuilder::Resize with length smaller than current appended length results in invalid state",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13197533/comment/16702153",
                    "id": "16702153",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=fsaintjacques",
                        "name": "fsaintjacques",
                        "key": "fsaintjacques",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fsaintjacques&avatarId=37276",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fsaintjacques&avatarId=37276",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fsaintjacques&avatarId=37276",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fsaintjacques&avatarId=37276"
                        },
                        "displayName": "Francois Saint-Jacques",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "Should we just refuse downsizing a non-flushed\u00a0builder?",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=fsaintjacques",
                        "name": "fsaintjacques",
                        "key": "fsaintjacques",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fsaintjacques&avatarId=37276",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fsaintjacques&avatarId=37276",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fsaintjacques&avatarId=37276",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fsaintjacques&avatarId=37276"
                        },
                        "displayName": "Francois Saint-Jacques",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2018-11-28T17:17:51.750+0000",
                    "updated": "2018-11-28T17:17:51.750+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13197533/comment/16702177",
                    "id": "16702177",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "That would be a reasonable enough fix, and better than the current behavior certainly",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2018-11-28T17:35:16.796+0000",
                    "updated": "2018-11-28T17:35:16.796+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13197533/comment/16702178",
                    "id": "16702178",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "Probably want to wait until https://github.com/apache/arrow/pull/3047 is merged to avoid rebase conflicts. I'm looking at that now",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2018-11-28T17:35:46.355+0000",
                    "updated": "2018-11-28T17:35:46.355+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13197533/comment/16703806",
                    "id": "16703806",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "Issue resolved by pull request 3055\n[https://github.com/apache/arrow/pull/3055]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2018-11-29T20:52:19.389+0000",
                    "updated": "2018-11-29T20:52:19.389+0000"
                }
            ],
            "maxResults": 4,
            "total": 4,
            "startAt": 0
        },
        "customfield_12311820": "0|s00cgo:",
        "customfield_12314139": null
    }
}