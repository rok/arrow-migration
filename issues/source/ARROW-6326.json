{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13252470",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13252470",
    "key": "ARROW-6326",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12345978",
                "id": "12345978",
                "description": "",
                "name": "0.15.0",
                "archived": false,
                "released": true,
                "releaseDate": "2019-10-05"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "name": "Major",
            "id": "3"
        },
        "labels": [
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=ozars",
            "name": "ozars",
            "key": "ozars",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
            },
            "displayName": "Omer Ozarslan",
            "active": true,
            "timeZone": "America/Chicago"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12328935",
                "id": "12328935",
                "name": "C++"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=ozars",
            "name": "ozars",
            "key": "ozars",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
            },
            "displayName": "Omer Ozarslan",
            "active": true,
            "timeZone": "America/Chicago"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=ozars",
            "name": "ozars",
            "key": "ozars",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
            },
            "displayName": "Omer Ozarslan",
            "active": true,
            "timeZone": "America/Chicago"
        },
        "aggregateprogress": {
            "progress": 12600,
            "total": 12600,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 12600,
            "total": 12600,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-6326/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 23,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13252470/worklog/299758",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ozars commented on pull request #5171: ARROW-6326: [C++] Nullable fields when converting std::tuple to Table\nURL: https://github.com/apache/arrow/pull/5171\n \n \n   `std::optional` isn't used for representing nullable fields in Arrow's current STL conversion API since it requires C++17. Also there are other ways to represent an optional field other than std::optional such as using pointers or external implementations of optional (`boost::optional`, `type_safe::optional` and alike).\r\n   \r\n   Since it is hard to maintain so many different kinds of specializations, introducing an `Optional` concept covering these classes solve this issue and allow implementing nullable fields consistently.\r\n   \r\n   For a type `T` to be considered as an `Optional`:\r\n   1) It should be convertible (implicitly or explicitly) to bool, i.e. it implements `[explicit] operator bool()`,\r\n   2) It should be dereferencable, i.e. it implements `operator*()`.\r\n   \r\n   If a type conforms to above `Optional` requirements, it will be automatically converted to a nullable field when used with `TableFromTupleRange`. This PR doesn't cover setting a tuple value from an optional value read from a table (i.e.` TupleRangeFromTable`).\r\n   \r\n   Inner type used for the field will be inferred from that of the return type of dereferencing optional (e.g. `int32` for `std::optional<int32>`, which will be represented by `Int32Type`).\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-08-22T20:54:56.431+0000",
                    "updated": "2019-08-22T20:54:56.431+0000",
                    "started": "2019-08-22T20:54:56.430+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "299758",
                    "issueId": "13252470"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13252470/worklog/300760",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "codecov-io commented on issue #5171: ARROW-6326: [C++] Nullable fields when converting std::tuple to Table\nURL: https://github.com/apache/arrow/pull/5171#issuecomment-524579598\n \n \n   # [Codecov](https://codecov.io/gh/apache/arrow/pull/5171?src=pr&el=h1) Report\n   > Merging [#5171](https://codecov.io/gh/apache/arrow/pull/5171?src=pr&el=desc) into [master](https://codecov.io/gh/apache/arrow/commit/3c9236d198b93ae3f59d39ce958909a1909078f5?src=pr&el=desc) will **increase** coverage by `1.63%`.\n   > The diff coverage is `96.51%`.\n   \n   [![Impacted file tree graph](https://codecov.io/gh/apache/arrow/pull/5171/graphs/tree.svg?width=650&token=LpTCFbqVT1&height=150&src=pr)](https://codecov.io/gh/apache/arrow/pull/5171?src=pr&el=tree)\n   \n   ```diff\n   @@            Coverage Diff             @@\n   ##           master    #5171      +/-   ##\n   ==========================================\n   + Coverage   87.63%   89.27%   +1.63%     \n   ==========================================\n     Files        1022      739     -283     \n     Lines      146258   105609   -40649     \n     Branches     1437        0    -1437     \n   ==========================================\n   - Hits       128174    94278   -33896     \n   + Misses      17722    11331    -6391     \n   + Partials      362        0     -362\n   ```\n   \n   \n   | [Impacted Files](https://codecov.io/gh/apache/arrow/pull/5171?src=pr&el=tree) | Coverage \u0394 | |\n   |---|---|---|\n   | [cpp/src/arrow/stl.h](https://codecov.io/gh/apache/arrow/pull/5171/diff?src=pr&el=tree#diff-Y3BwL3NyYy9hcnJvdy9zdGwuaA==) | `100% <100%> (\u00f8)` | :arrow_up: |\n   | [cpp/src/arrow/type\\_traits.h](https://codecov.io/gh/apache/arrow/pull/5171/diff?src=pr&el=tree#diff-Y3BwL3NyYy9hcnJvdy90eXBlX3RyYWl0cy5o) | `86.51% <100%> (+0.3%)` | :arrow_up: |\n   | [cpp/src/arrow/stl\\_test.cc](https://codecov.io/gh/apache/arrow/pull/5171/diff?src=pr&el=tree#diff-Y3BwL3NyYy9hcnJvdy9zdGxfdGVzdC5jYw==) | `98.65% <96.2%> (-1.35%)` | :arrow_down: |\n   | [cpp/src/arrow/tensor\\_test.cc](https://codecov.io/gh/apache/arrow/pull/5171/diff?src=pr&el=tree#diff-Y3BwL3NyYy9hcnJvdy90ZW5zb3JfdGVzdC5jYw==) | `100% <0%> (\u00f8)` | :arrow_up: |\n   | [cpp/src/gandiva/projector.cc](https://codecov.io/gh/apache/arrow/pull/5171/diff?src=pr&el=tree#diff-Y3BwL3NyYy9nYW5kaXZhL3Byb2plY3Rvci5jYw==) | `90.75% <0%> (\u00f8)` | :arrow_up: |\n   | [cpp/src/arrow/python/python\\_test.cc](https://codecov.io/gh/apache/arrow/pull/5171/diff?src=pr&el=tree#diff-Y3BwL3NyYy9hcnJvdy9weXRob24vcHl0aG9uX3Rlc3QuY2M=) | `100% <0%> (\u00f8)` | :arrow_up: |\n   | [python/pyarrow/tests/test\\_schema.py](https://codecov.io/gh/apache/arrow/pull/5171/diff?src=pr&el=tree#diff-cHl0aG9uL3B5YXJyb3cvdGVzdHMvdGVzdF9zY2hlbWEucHk=) | `100% <0%> (\u00f8)` | :arrow_up: |\n   | [cpp/src/arrow/python/numpy\\_to\\_arrow.cc](https://codecov.io/gh/apache/arrow/pull/5171/diff?src=pr&el=tree#diff-Y3BwL3NyYy9hcnJvdy9weXRob24vbnVtcHlfdG9fYXJyb3cuY2M=) | `95.78% <0%> (\u00f8)` | :arrow_up: |\n   | [js/src/util/fn.ts](https://codecov.io/gh/apache/arrow/pull/5171/diff?src=pr&el=tree#diff-anMvc3JjL3V0aWwvZm4udHM=) | | |\n   | [go/arrow/memory/memory\\_avx2\\_amd64.go](https://codecov.io/gh/apache/arrow/pull/5171/diff?src=pr&el=tree#diff-Z28vYXJyb3cvbWVtb3J5L21lbW9yeV9hdngyX2FtZDY0Lmdv) | | |\n   | ... and [298 more](https://codecov.io/gh/apache/arrow/pull/5171/diff?src=pr&el=tree-more) | |\n   \n   ------\n   \n   [Continue to review full report at Codecov](https://codecov.io/gh/apache/arrow/pull/5171?src=pr&el=continue).\n   > **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n   > `\u0394 = absolute <relative> (impact)`, `\u00f8 = not affected`, `? = missing data`\n   > Powered by [Codecov](https://codecov.io/gh/apache/arrow/pull/5171?src=pr&el=footer). Last update [3c9236d...0a981f5](https://codecov.io/gh/apache/arrow/pull/5171?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n   \n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-08-24T20:55:19.450+0000",
                    "updated": "2019-08-24T20:55:19.450+0000",
                    "started": "2019-08-24T20:55:19.449+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "300760",
                    "issueId": "13252470"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13252470/worklog/301805",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on issue #5171: ARROW-6326: [C++] Nullable fields when converting std::tuple to Table\nURL: https://github.com/apache/arrow/pull/5171#issuecomment-525212122\n \n \n   @xhochy \n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-08-27T09:06:30.554+0000",
                    "updated": "2019-08-27T09:06:30.554+0000",
                    "started": "2019-08-27T09:06:30.553+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "301805",
                    "issueId": "13252470"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13252470/worklog/304545",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "bkietz commented on pull request #5171: ARROW-6326: [C++] Nullable fields when converting std::tuple to Table\nURL: https://github.com/apache/arrow/pull/5171#discussion_r319647125\n \n \n\n ##########\n File path: cpp/src/arrow/type_traits.h\n ##########\n @@ -368,6 +368,49 @@ struct TypeTraits<ExtensionType> {\n   constexpr static bool is_parameter_free = false;\n };\n \n+namespace internal {\n+\n+template <typename... Ts>\n+struct make_void {\n+  using type = void;\n+};\n+\n+template <typename... Ts>\n+using void_t = typename make_void<Ts...>::type;\n+\n+template <typename T, typename = void>\n+struct is_dereferencable : public std::false_type {};\n+\n+template <typename T>\n+struct is_dereferencable<T, void_t<decltype(*std::declval<T>())>>\n+    : public std::true_type {};\n+\n+template <typename T, typename = void>\n+struct is_optional_like : public std::false_type {};\n+\n+template <typename T>\n+struct is_optional_like<T,\n+                        typename std::enable_if<std::is_constructible<bool, T>::value &&\n+                                                is_dereferencable<T>::value>::type>\n+    : public std::true_type {};\n+\n+}  // namespace internal\n+\n+template <typename T, typename R = void>\n+using enable_if_optional_like =\n+    typename std::enable_if<internal::is_optional_like<T>::value, R>::type;\n+\n+template <typename Optional>\n+struct CTypeTraits<Optional, enable_if_optional_like<Optional>> {\n+  using OptionalInnerType = typename std::remove_const<\n+      typename std::remove_reference<decltype(*std::declval<Optional>())>::type>::type;\n \n Review comment:\n   Why not just use `std::decay`?\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-08-30T19:33:05.231+0000",
                    "updated": "2019-08-30T19:33:05.231+0000",
                    "started": "2019-08-30T19:33:05.231+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "304545",
                    "issueId": "13252470"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13252470/worklog/304546",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "bkietz commented on pull request #5171: ARROW-6326: [C++] Nullable fields when converting std::tuple to Table\nURL: https://github.com/apache/arrow/pull/5171#discussion_r319647907\n \n \n\n ##########\n File path: cpp/src/arrow/type_traits.h\n ##########\n @@ -368,6 +368,49 @@ struct TypeTraits<ExtensionType> {\n   constexpr static bool is_parameter_free = false;\n };\n \n+namespace internal {\n+\n+template <typename... Ts>\n+struct make_void {\n+  using type = void;\n+};\n+\n+template <typename... Ts>\n+using void_t = typename make_void<Ts...>::type;\n \n Review comment:\n   could you use `as_void` instead?\r\n   https://github.com/apache/arrow/pull/5171/files#diff-1bd9192beb3fba5a1140dbd38b88e729R551\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-08-30T19:33:05.539+0000",
                    "updated": "2019-08-30T19:33:05.539+0000",
                    "started": "2019-08-30T19:33:05.538+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "304546",
                    "issueId": "13252470"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13252470/worklog/304547",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "bkietz commented on pull request #5171: ARROW-6326: [C++] Nullable fields when converting std::tuple to Table\nURL: https://github.com/apache/arrow/pull/5171#discussion_r319647990\n \n \n\n ##########\n File path: cpp/src/arrow/type_traits.h\n ##########\n @@ -368,6 +368,49 @@ struct TypeTraits<ExtensionType> {\n   constexpr static bool is_parameter_free = false;\n };\n \n+namespace internal {\n+\n+template <typename... Ts>\n+struct make_void {\n+  using type = void;\n+};\n+\n+template <typename... Ts>\n+using void_t = typename make_void<Ts...>::type;\n \n Review comment:\n   (or replace as_void with void_t)\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-08-30T19:33:05.543+0000",
                    "updated": "2019-08-30T19:33:05.543+0000",
                    "started": "2019-08-30T19:33:05.542+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "304547",
                    "issueId": "13252470"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13252470/worklog/304548",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "bkietz commented on pull request #5171: ARROW-6326: [C++] Nullable fields when converting std::tuple to Table\nURL: https://github.com/apache/arrow/pull/5171#discussion_r319649509\n \n \n\n ##########\n File path: cpp/src/arrow/stl_test.cc\n ##########\n @@ -49,9 +61,55 @@ struct CustomType {\n #undef ARROW_CUSTOM_TYPE_TIED\n };\n \n+// Mock optional object returning null, \"yes\", \"no\", null, \"yes\", \"no\", ...\n \n Review comment:\n   I know this is a test class, but it's a headscrew to me that a single instance of it will sometimes evaluate to true and sometimes to false:\r\n   \r\n   ```c++\r\n   CustomOptionalTypeMock o;\r\n   std::cout << bool(c) << std::endl; // true\r\n   std::cout << bool(c) << std::endl; // true\r\n   std::cout << bool(c) << std::endl; // false\r\n   std::cout << bool(c) << std::endl; // true\r\n   // ...\r\n   ```\r\n   \r\n   It seems to me that in order to emulate an optional, one of these should be consistently null or not null\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-08-30T19:33:05.672+0000",
                    "updated": "2019-08-30T19:33:05.672+0000",
                    "started": "2019-08-30T19:33:05.672+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "304548",
                    "issueId": "13252470"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13252470/worklog/304617",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ozars commented on pull request #5171: ARROW-6326: [C++] Nullable fields when converting std::tuple to Table\nURL: https://github.com/apache/arrow/pull/5171#discussion_r319682688\n \n \n\n ##########\n File path: cpp/src/arrow/type_traits.h\n ##########\n @@ -368,6 +368,49 @@ struct TypeTraits<ExtensionType> {\n   constexpr static bool is_parameter_free = false;\n };\n \n+namespace internal {\n+\n+template <typename... Ts>\n+struct make_void {\n+  using type = void;\n+};\n+\n+template <typename... Ts>\n+using void_t = typename make_void<Ts...>::type;\n \n Review comment:\n   Okay. Replacing `as_void` with `void_t` as it takes variadic arguments.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-08-30T21:44:27.510+0000",
                    "updated": "2019-08-30T21:44:27.510+0000",
                    "started": "2019-08-30T21:44:27.509+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "304617",
                    "issueId": "13252470"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13252470/worklog/304618",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ozars commented on pull request #5171: ARROW-6326: [C++] Nullable fields when converting std::tuple to Table\nURL: https://github.com/apache/arrow/pull/5171#discussion_r319677817\n \n \n\n ##########\n File path: cpp/src/arrow/type_traits.h\n ##########\n @@ -368,6 +368,49 @@ struct TypeTraits<ExtensionType> {\n   constexpr static bool is_parameter_free = false;\n };\n \n+namespace internal {\n+\n+template <typename... Ts>\n+struct make_void {\n+  using type = void;\n+};\n+\n+template <typename... Ts>\n+using void_t = typename make_void<Ts...>::type;\n+\n+template <typename T, typename = void>\n+struct is_dereferencable : public std::false_type {};\n+\n+template <typename T>\n+struct is_dereferencable<T, void_t<decltype(*std::declval<T>())>>\n+    : public std::true_type {};\n+\n+template <typename T, typename = void>\n+struct is_optional_like : public std::false_type {};\n+\n+template <typename T>\n+struct is_optional_like<T,\n+                        typename std::enable_if<std::is_constructible<bool, T>::value &&\n+                                                is_dereferencable<T>::value>::type>\n+    : public std::true_type {};\n+\n+}  // namespace internal\n+\n+template <typename T, typename R = void>\n+using enable_if_optional_like =\n+    typename std::enable_if<internal::is_optional_like<T>::value, R>::type;\n+\n+template <typename Optional>\n+struct CTypeTraits<Optional, enable_if_optional_like<Optional>> {\n+  using OptionalInnerType = typename std::remove_const<\n+      typename std::remove_reference<decltype(*std::declval<Optional>())>::type>::type;\n \n Review comment:\n   Yeah, makes sense.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-08-30T21:44:27.690+0000",
                    "updated": "2019-08-30T21:44:27.690+0000",
                    "started": "2019-08-30T21:44:27.689+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "304618",
                    "issueId": "13252470"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13252470/worklog/304619",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ozars commented on pull request #5171: ARROW-6326: [C++] Nullable fields when converting std::tuple to Table\nURL: https://github.com/apache/arrow/pull/5171#discussion_r319682706\n \n \n\n ##########\n File path: cpp/src/arrow/stl_test.cc\n ##########\n @@ -49,9 +61,55 @@ struct CustomType {\n #undef ARROW_CUSTOM_TYPE_TIED\n };\n \n+// Mock optional object returning null, \"yes\", \"no\", null, \"yes\", \"no\", ...\n \n Review comment:\n   This was actually tailored to be used with `NullableTypesDoNotBreakUserSpecialization` test below. It doesn't entirely mock optional. It checks just that existing user specializations aren't broken. It will be casted in [below](https://github.com/apache/arrow/pull/5171/files#diff-0b35fdf968ac99e27c2c253dfa148f59R105) only. So, it presumes that casting will be done once for each element in a `std::vector<CustomOptionalTypeMock>`.\r\n   \r\n   I can add some comments here clarifying this assumption. Alternatively I can implement a mock iterable of mock optionals to make it consistent. I'd prefer the former, but the latter is okay for me as well.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-08-30T21:44:27.692+0000",
                    "updated": "2019-08-30T21:44:27.692+0000",
                    "started": "2019-08-30T21:44:27.692+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "304619",
                    "issueId": "13252470"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13252470/worklog/305002",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "bkietz commented on pull request #5171: ARROW-6326: [C++] Nullable fields when converting std::tuple to Table\nURL: https://github.com/apache/arrow/pull/5171#discussion_r319769419\n \n \n\n ##########\n File path: cpp/src/arrow/stl_test.cc\n ##########\n @@ -49,9 +61,55 @@ struct CustomType {\n #undef ARROW_CUSTOM_TYPE_TIED\n };\n \n+// Mock optional object returning null, \"yes\", \"no\", null, \"yes\", \"no\", ...\n \n Review comment:\n   If you want to demonstrate that these objects are cast only once, then please implement them with an initially false boolean member `was_cast_` or something equally unambiguous. Comments would also be welcome\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-09-01T18:04:11.483+0000",
                    "updated": "2019-09-01T18:04:11.483+0000",
                    "started": "2019-09-01T18:04:11.481+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "305002",
                    "issueId": "13252470"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13252470/worklog/305022",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ozars commented on pull request #5171: ARROW-6326: [C++] Nullable fields when converting std::tuple to Table\nURL: https://github.com/apache/arrow/pull/5171#discussion_r319781043\n \n \n\n ##########\n File path: cpp/src/arrow/stl_test.cc\n ##########\n @@ -49,9 +61,55 @@ struct CustomType {\n #undef ARROW_CUSTOM_TYPE_TIED\n };\n \n+// Mock optional object returning null, \"yes\", \"no\", null, \"yes\", \"no\", ...\n \n Review comment:\n   Done.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-09-02T00:10:00.823+0000",
                    "updated": "2019-09-02T00:10:00.823+0000",
                    "started": "2019-09-02T00:10:00.823+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "305022",
                    "issueId": "13252470"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13252470/worklog/305025",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ozars commented on issue #5171: ARROW-6326: [C++] Nullable fields when converting std::tuple to Table\nURL: https://github.com/apache/arrow/pull/5171#issuecomment-526965379\n \n \n   I made changes asked in review, but I realized some other issue. If there is a templated ConversionTrait specialized such as:\r\n   ```cpp\r\n   template<typename T>\r\n   struct ConversionTraits<std::optional<T>> {\r\n     // ...\r\n   }\r\n   ```\r\n   \r\n   It won't compile after this PR due to ambiguity between above specialization and `ConversionTraits<Optional>` provided in this patch. Is this an issue?\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-09-02T00:14:52.482+0000",
                    "updated": "2019-09-02T00:14:52.482+0000",
                    "started": "2019-09-02T00:14:52.481+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "305025",
                    "issueId": "13252470"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13252470/worklog/305026",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ozars commented on issue #5171: ARROW-6326: [C++] Nullable fields when converting std::tuple to Table\nURL: https://github.com/apache/arrow/pull/5171#issuecomment-526965379\n \n \n   I made changes asked in review, but I realized some other issue. If there is a templated ConversionTrait specialized by user such as:\r\n   ```cpp\r\n   template<typename T>\r\n   struct ConversionTraits<std::optional<T>> {\r\n     // ...\r\n   }\r\n   ```\r\n   \r\n   It won't compile after this PR due to ambiguity between above specialization and `ConversionTraits<Optional>` provided in this patch. Is this an issue?\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-09-02T00:15:09.482+0000",
                    "updated": "2019-09-02T00:15:09.482+0000",
                    "started": "2019-09-02T00:15:09.481+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "305026",
                    "issueId": "13252470"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13252470/worklog/305033",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "codecov-io commented on issue #5171: ARROW-6326: [C++] Nullable fields when converting std::tuple to Table\nURL: https://github.com/apache/arrow/pull/5171#issuecomment-524579598\n \n \n   # [Codecov](https://codecov.io/gh/apache/arrow/pull/5171?src=pr&el=h1) Report\n   > Merging [#5171](https://codecov.io/gh/apache/arrow/pull/5171?src=pr&el=desc) into [master](https://codecov.io/gh/apache/arrow/commit/a985483eb96fb9352c7ced9d08fb35d46b630bfc?src=pr&el=desc) will **increase** coverage by `1.55%`.\n   > The diff coverage is `93.47%`.\n   \n   [![Impacted file tree graph](https://codecov.io/gh/apache/arrow/pull/5171/graphs/tree.svg?width=650&token=LpTCFbqVT1&height=150&src=pr)](https://codecov.io/gh/apache/arrow/pull/5171?src=pr&el=tree)\n   \n   ```diff\n   @@            Coverage Diff             @@\n   ##           master    #5171      +/-   ##\n   ==========================================\n   + Coverage   87.65%    89.2%   +1.55%     \n   ==========================================\n     Files        1033      750     -283     \n     Lines      148767   107894   -40873     \n     Branches     1437        0    -1437     \n   ==========================================\n   - Hits       130397    96246   -34151     \n   + Misses      18008    11648    -6360     \n   + Partials      362        0     -362\n   ```\n   \n   \n   | [Impacted Files](https://codecov.io/gh/apache/arrow/pull/5171?src=pr&el=tree) | Coverage \u0394 | |\n   |---|---|---|\n   | [cpp/src/arrow/stl.h](https://codecov.io/gh/apache/arrow/pull/5171/diff?src=pr&el=tree#diff-Y3BwL3NyYy9hcnJvdy9zdGwuaA==) | `100% <100%> (\u00f8)` | :arrow_up: |\n   | [cpp/src/arrow/type\\_traits.h](https://codecov.io/gh/apache/arrow/pull/5171/diff?src=pr&el=tree#diff-Y3BwL3NyYy9hcnJvdy90eXBlX3RyYWl0cy5o) | `86.51% <100%> (+0.3%)` | :arrow_up: |\n   | [cpp/src/arrow/stl\\_test.cc](https://codecov.io/gh/apache/arrow/pull/5171/diff?src=pr&el=tree#diff-Y3BwL3NyYy9hcnJvdy9zdGxfdGVzdC5jYw==) | `97.37% <92.94%> (-2.63%)` | :arrow_down: |\n   | [cpp/src/arrow/csv/column\\_builder.cc](https://codecov.io/gh/apache/arrow/pull/5171/diff?src=pr&el=tree#diff-Y3BwL3NyYy9hcnJvdy9jc3YvY29sdW1uX2J1aWxkZXIuY2M=) | `95.54% <0%> (-1.49%)` | :arrow_down: |\n   | [cpp/src/plasma/thirdparty/ae/ae.c](https://codecov.io/gh/apache/arrow/pull/5171/diff?src=pr&el=tree#diff-Y3BwL3NyYy9wbGFzbWEvdGhpcmRwYXJ0eS9hZS9hZS5j) | `70.75% <0%> (-0.95%)` | :arrow_down: |\n   | [python/pyarrow/tests/test\\_parquet.py](https://codecov.io/gh/apache/arrow/pull/5171/diff?src=pr&el=tree#diff-cHl0aG9uL3B5YXJyb3cvdGVzdHMvdGVzdF9wYXJxdWV0LnB5) | `96.61% <0%> (-0.06%)` | :arrow_down: |\n   | [js/src/util/fn.ts](https://codecov.io/gh/apache/arrow/pull/5171/diff?src=pr&el=tree#diff-anMvc3JjL3V0aWwvZm4udHM=) | | |\n   | [go/arrow/memory/memory\\_avx2\\_amd64.go](https://codecov.io/gh/apache/arrow/pull/5171/diff?src=pr&el=tree#diff-Z28vYXJyb3cvbWVtb3J5L21lbW9yeV9hdngyX2FtZDY0Lmdv) | | |\n   | [rust/datafusion/src/execution/filter.rs](https://codecov.io/gh/apache/arrow/pull/5171/diff?src=pr&el=tree#diff-cnVzdC9kYXRhZnVzaW9uL3NyYy9leGVjdXRpb24vZmlsdGVyLnJz) | | |\n   | [rust/arrow/src/csv/writer.rs](https://codecov.io/gh/apache/arrow/pull/5171/diff?src=pr&el=tree#diff-cnVzdC9hcnJvdy9zcmMvY3N2L3dyaXRlci5ycw==) | | |\n   | ... and [279 more](https://codecov.io/gh/apache/arrow/pull/5171/diff?src=pr&el=tree-more) | |\n   \n   ------\n   \n   [Continue to review full report at Codecov](https://codecov.io/gh/apache/arrow/pull/5171?src=pr&el=continue).\n   > **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n   > `\u0394 = absolute <relative> (impact)`, `\u00f8 = not affected`, `? = missing data`\n   > Powered by [Codecov](https://codecov.io/gh/apache/arrow/pull/5171?src=pr&el=footer). Last update [a985483...cd842fd](https://codecov.io/gh/apache/arrow/pull/5171?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n   \n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-09-02T01:55:37.044+0000",
                    "updated": "2019-09-02T01:55:37.044+0000",
                    "started": "2019-09-02T01:55:37.043+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "305033",
                    "issueId": "13252470"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13252470/worklog/305034",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "codecov-io commented on issue #5171: ARROW-6326: [C++] Nullable fields when converting std::tuple to Table\nURL: https://github.com/apache/arrow/pull/5171#issuecomment-524579598\n \n \n   # [Codecov](https://codecov.io/gh/apache/arrow/pull/5171?src=pr&el=h1) Report\n   > Merging [#5171](https://codecov.io/gh/apache/arrow/pull/5171?src=pr&el=desc) into [master](https://codecov.io/gh/apache/arrow/commit/a985483eb96fb9352c7ced9d08fb35d46b630bfc?src=pr&el=desc) will **increase** coverage by `1.55%`.\n   > The diff coverage is `93.47%`.\n   \n   [![Impacted file tree graph](https://codecov.io/gh/apache/arrow/pull/5171/graphs/tree.svg?width=650&token=LpTCFbqVT1&height=150&src=pr)](https://codecov.io/gh/apache/arrow/pull/5171?src=pr&el=tree)\n   \n   ```diff\n   @@            Coverage Diff             @@\n   ##           master    #5171      +/-   ##\n   ==========================================\n   + Coverage   87.65%    89.2%   +1.55%     \n   ==========================================\n     Files        1033      750     -283     \n     Lines      148767   107894   -40873     \n     Branches     1437        0    -1437     \n   ==========================================\n   - Hits       130397    96246   -34151     \n   + Misses      18008    11648    -6360     \n   + Partials      362        0     -362\n   ```\n   \n   \n   | [Impacted Files](https://codecov.io/gh/apache/arrow/pull/5171?src=pr&el=tree) | Coverage \u0394 | |\n   |---|---|---|\n   | [cpp/src/arrow/stl.h](https://codecov.io/gh/apache/arrow/pull/5171/diff?src=pr&el=tree#diff-Y3BwL3NyYy9hcnJvdy9zdGwuaA==) | `100% <100%> (\u00f8)` | :arrow_up: |\n   | [cpp/src/arrow/type\\_traits.h](https://codecov.io/gh/apache/arrow/pull/5171/diff?src=pr&el=tree#diff-Y3BwL3NyYy9hcnJvdy90eXBlX3RyYWl0cy5o) | `86.51% <100%> (+0.3%)` | :arrow_up: |\n   | [cpp/src/arrow/stl\\_test.cc](https://codecov.io/gh/apache/arrow/pull/5171/diff?src=pr&el=tree#diff-Y3BwL3NyYy9hcnJvdy9zdGxfdGVzdC5jYw==) | `97.37% <92.94%> (-2.63%)` | :arrow_down: |\n   | [cpp/src/arrow/csv/column\\_builder.cc](https://codecov.io/gh/apache/arrow/pull/5171/diff?src=pr&el=tree#diff-Y3BwL3NyYy9hcnJvdy9jc3YvY29sdW1uX2J1aWxkZXIuY2M=) | `95.54% <0%> (-1.49%)` | :arrow_down: |\n   | [cpp/src/plasma/thirdparty/ae/ae.c](https://codecov.io/gh/apache/arrow/pull/5171/diff?src=pr&el=tree#diff-Y3BwL3NyYy9wbGFzbWEvdGhpcmRwYXJ0eS9hZS9hZS5j) | `70.75% <0%> (-0.95%)` | :arrow_down: |\n   | [python/pyarrow/tests/test\\_parquet.py](https://codecov.io/gh/apache/arrow/pull/5171/diff?src=pr&el=tree#diff-cHl0aG9uL3B5YXJyb3cvdGVzdHMvdGVzdF9wYXJxdWV0LnB5) | `96.61% <0%> (-0.06%)` | :arrow_down: |\n   | [js/src/util/fn.ts](https://codecov.io/gh/apache/arrow/pull/5171/diff?src=pr&el=tree#diff-anMvc3JjL3V0aWwvZm4udHM=) | | |\n   | [go/arrow/memory/memory\\_avx2\\_amd64.go](https://codecov.io/gh/apache/arrow/pull/5171/diff?src=pr&el=tree#diff-Z28vYXJyb3cvbWVtb3J5L21lbW9yeV9hdngyX2FtZDY0Lmdv) | | |\n   | [rust/datafusion/src/execution/filter.rs](https://codecov.io/gh/apache/arrow/pull/5171/diff?src=pr&el=tree#diff-cnVzdC9kYXRhZnVzaW9uL3NyYy9leGVjdXRpb24vZmlsdGVyLnJz) | | |\n   | [rust/arrow/src/csv/writer.rs](https://codecov.io/gh/apache/arrow/pull/5171/diff?src=pr&el=tree#diff-cnVzdC9hcnJvdy9zcmMvY3N2L3dyaXRlci5ycw==) | | |\n   | ... and [279 more](https://codecov.io/gh/apache/arrow/pull/5171/diff?src=pr&el=tree-more) | |\n   \n   ------\n   \n   [Continue to review full report at Codecov](https://codecov.io/gh/apache/arrow/pull/5171?src=pr&el=continue).\n   > **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n   > `\u0394 = absolute <relative> (impact)`, `\u00f8 = not affected`, `? = missing data`\n   > Powered by [Codecov](https://codecov.io/gh/apache/arrow/pull/5171?src=pr&el=footer). Last update [a985483...cd842fd](https://codecov.io/gh/apache/arrow/pull/5171?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n   \n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-09-02T01:55:40.425+0000",
                    "updated": "2019-09-02T01:55:40.425+0000",
                    "started": "2019-09-02T01:55:40.424+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "305034",
                    "issueId": "13252470"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13252470/worklog/308017",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "fsaintjacques commented on issue #5171: ARROW-6326: [C++] Nullable fields when converting std::tuple to Table\nURL: https://github.com/apache/arrow/pull/5171#issuecomment-528932482\n \n \n   If it becomes a problem, we can wrap the specialization with C+14 ifdef detection and type traits to solve the issue. I'd say go ahead and we'll revisit if it becomes a problem.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-09-06T16:59:28.005+0000",
                    "updated": "2019-09-06T16:59:28.005+0000",
                    "started": "2019-09-06T16:59:28.005+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "308017",
                    "issueId": "13252470"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13252470/worklog/308045",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "xhochy commented on issue #5171: ARROW-6326: [C++] Nullable fields when converting std::tuple to Table\nURL: https://github.com/apache/arrow/pull/5171#issuecomment-528948476\n \n \n   I'll review this in the next 48h, please leave it open until.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-09-06T17:44:19.305+0000",
                    "updated": "2019-09-06T17:44:19.305+0000",
                    "started": "2019-09-06T17:44:19.305+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "308045",
                    "issueId": "13252470"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13252470/worklog/308433",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "xhochy commented on issue #5171: ARROW-6326: [C++] Nullable fields when converting std::tuple to Table\nURL: https://github.com/apache/arrow/pull/5171#issuecomment-529182152\n \n \n   This looks good to me.\r\n   \r\n   For those who have a `template<typename T> struct ConversionTraits<std::optional<T>>` in their code, it would be sufficient to just delete it and use the code in this PR, right?\r\n   \r\n   cc @pacman82 @fjetter \n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-09-08T08:33:25.129+0000",
                    "updated": "2019-09-08T08:33:25.129+0000",
                    "started": "2019-09-08T08:33:25.128+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "308433",
                    "issueId": "13252470"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13252470/worklog/308519",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ozars commented on issue #5171: ARROW-6326: [C++] Nullable fields when converting std::tuple to Table\nURL: https://github.com/apache/arrow/pull/5171#issuecomment-529213048\n \n \n   > For those who have a `template<typename T> struct ConversionTraits<std::optional<T>>` in their code, it would be sufficient to just delete it and use the code in this PR, right?\r\n   \r\n   Yes, this should be sufficient.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-09-08T15:24:05.590+0000",
                    "updated": "2019-09-08T15:24:05.590+0000",
                    "started": "2019-09-08T15:24:05.590+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "308519",
                    "issueId": "13252470"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/2",
            "id": "2",
            "description": "A new feature of the product, which has yet to be developed.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21141&avatarType=issuetype",
            "name": "New Feature",
            "subtask": false,
            "avatarId": 21141
        },
        "timespent": 12600,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@176b26e9[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@1d3e8490[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@3efe4b64[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@578d522f[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@1131e3c6[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@2f1a519[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@4e987b48[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@73b9449e[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@6d08b6fc[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@62de1f29[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@6f117a01[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@56355ec9[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 12600,
        "customfield_12312520": null,
        "customfield_12312521": "Sun Sep 08 17:16:05 UTC 2019",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2019-09-08T17:16:05.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-6326/watchers",
            "watchCount": 1,
            "isWatching": false
        },
        "created": "2019-08-22T19:56:38.000+0000",
        "updated": "2019-09-08T19:51:00.000+0000",
        "timeoriginalestimate": null,
        "description": "{{std::optional}} isn't used for representing nullable fields in Arrow's current STL conversion API since it requires C++17. Also there are other ways to represent an optional field other than {{std::optional}} such as using pointers or external implementations of optional ({{boost::optional}}, {{type_safe::optional}} and alike). \r\n\r\nSince it is hard to maintain so many different kinds of specializations, introducing an {{Optional}} concept covering these classes could solve this issue and allow implementing nullable fields consistently.\r\n\r\nSo, the gist of proposed change will be something along the lines of:\r\n\r\n{code:cpp}\r\n\r\ntemplate<typename T>\r\nconstexpr bool is_optional_like_v = ...;\r\n\r\ntemplate<typename Optional>\r\nstruct CTypeTraits<Optional, enable_if_t<is_optional_like_v<Optional>>> {\r\n   //...\r\n}\r\n\r\ntemplate<typename Optional>\r\nstruct ConversionTraits<Optional, enable_if_t<is_optional_like_v<Optional>>> : public CTypeTraits<Optional> {\r\n   //...\r\n}\r\n{code}\r\n\r\nFor a type {{T}} to be considered as an {{Optional}}:\r\n1) It should be convertible (implicitly or explicitly)  to {{bool}}, i.e. it implements {{[explicit] operator bool()}},\r\n2) It should be dereferencable, i.e. it implements {{operator*()}}.\r\n\r\nThese two requirements provide a generalized way of templating nullable fields based on pointers, {{std::optional}}, {{boost::optional}} etc. However, it would be better (necessary?) if this implementation should act as a default while not breaking existing specializations of users (e.g. an existing  implementation in which {{std::optional}} is specialized by user).\r\n\r\nIs there any issues this approach may cause that I may have missed?\r\n\r\nI will open a draft PR for working on that meanwhile.",
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "3.5h",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 12600
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[C++] Nullable fields when converting std::tuple to Table",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13252470/comment/16925218",
                    "id": "16925218",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=uwe",
                        "name": "uwe",
                        "key": "xhochy",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=xhochy&avatarId=30652",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=xhochy&avatarId=30652",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=xhochy&avatarId=30652",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=xhochy&avatarId=30652"
                        },
                        "displayName": "Uwe Korn",
                        "active": true,
                        "timeZone": "Europe/Berlin"
                    },
                    "body": "Issue resolved by pull request 5171\n[https://github.com/apache/arrow/pull/5171]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=uwe",
                        "name": "uwe",
                        "key": "xhochy",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=xhochy&avatarId=30652",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=xhochy&avatarId=30652",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=xhochy&avatarId=30652",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=xhochy&avatarId=30652"
                        },
                        "displayName": "Uwe Korn",
                        "active": true,
                        "timeZone": "Europe/Berlin"
                    },
                    "created": "2019-09-08T17:16:05.774+0000",
                    "updated": "2019-09-08T17:16:05.774+0000"
                }
            ],
            "maxResults": 1,
            "total": 1,
            "startAt": 0
        },
        "customfield_12311820": "0|z05y1s:",
        "customfield_12314139": null
    }
}