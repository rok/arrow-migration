{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13196498",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13196498",
    "key": "ARROW-3707",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12343858",
                "id": "12343858",
                "description": "",
                "name": "0.12.0",
                "archived": false,
                "released": true,
                "releaseDate": "2019-01-20"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "name": "Major",
            "id": "3"
        },
        "labels": [
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12343066",
                "id": "12343066",
                "description": "",
                "name": "0.11.0",
                "archived": false,
                "released": true,
                "releaseDate": "2018-10-08"
            }
        ],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
            "name": "apitrou",
            "key": "pitrou",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
            },
            "displayName": "Antoine Pitrou",
            "active": true,
            "timeZone": "Europe/Paris"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12328935",
                "id": "12328935",
                "name": "C++"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
            "name": "apitrou",
            "key": "pitrou",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
            },
            "displayName": "Antoine Pitrou",
            "active": true,
            "timeZone": "Europe/Paris"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
            "name": "apitrou",
            "key": "pitrou",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
            },
            "displayName": "Antoine Pitrou",
            "active": true,
            "timeZone": "Europe/Paris"
        },
        "aggregateprogress": {
            "progress": 6000,
            "total": 6000,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 6000,
            "total": 6000,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-3707/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 10,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13196498/worklog/163008",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou opened a new pull request #2909: ARROW-3707: [C++] Fix test regression with zstd 1.3.7\nURL: https://github.com/apache/arrow/pull/2909\n \n \n   \n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-11-06T11:45:43.007+0000",
                    "updated": "2018-11-06T11:45:43.007+0000",
                    "started": "2018-11-06T11:45:43.006+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "163008",
                    "issueId": "13196498"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13196498/worklog/163050",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on issue #2909: ARROW-3707: [C++] Fix test regression with zstd 1.3.7\nURL: https://github.com/apache/arrow/pull/2909#issuecomment-436248549\n \n \n   The Windows compilation failure is in the static CRT build. The only thing that changed is bumping the zstd version.\r\n   ```\r\n   libzstd_static.lib(threading.obj) : error LNK2019: unresolved external symbol __imp__beginthreadex referenced in function ZSTD_pthread_create\r\n   ```\r\n   \r\n   @MaxRis can you advise here?\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-11-06T13:15:59.717+0000",
                    "updated": "2018-11-06T13:15:59.717+0000",
                    "started": "2018-11-06T13:15:59.716+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "163050",
                    "issueId": "13196498"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13196498/worklog/163056",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "MaxRis commented on issue #2909: ARROW-3707: [C++] Fix test regression with zstd 1.3.7\nURL: https://github.com/apache/arrow/pull/2909#issuecomment-436253916\n \n \n   @pitrou probably, there is some zstd patching related issue (like linkage to static crt was not configured properly). Need to check more deeply\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-11-06T13:34:13.994+0000",
                    "updated": "2018-11-06T13:34:13.994+0000",
                    "started": "2018-11-06T13:34:13.993+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "163056",
                    "issueId": "13196498"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13196498/worklog/163092",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on issue #2909: ARROW-3707: [C++] Fix test regression with zstd 1.3.7\nURL: https://github.com/apache/arrow/pull/2909#issuecomment-436291256\n \n \n   I think I'm gonna add the static CRT build as allowed failure. This will allow us to have passing CI for important configurations and let interested people fix the failing builds.\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-11-06T15:23:19.403+0000",
                    "updated": "2018-11-06T15:23:19.403+0000",
                    "started": "2018-11-06T15:23:19.402+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "163092",
                    "issueId": "13196498"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13196498/worklog/163093",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on issue #2909: ARROW-3707: [C++] Fix test regression with zstd 1.3.7\nURL: https://github.com/apache/arrow/pull/2909#issuecomment-436291413\n \n \n   @kszucs, there's a failing RAT check here. Is it expected?\r\n   ```\r\n   $ $TRAVIS_BUILD_DIR/ci/travis_release_audit.sh\r\n   NOT APPROVED: dev/tasks/docker-tests/travis.linux.yml (apache-arrow/dev/tasks/docker-tests/travis.linux.yml): false\r\n   1 unapproved licences. Check rat report: rat.txt\r\n   ```\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-11-06T15:23:48.007+0000",
                    "updated": "2018-11-06T15:23:48.007+0000",
                    "started": "2018-11-06T15:23:48.006+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "163093",
                    "issueId": "13196498"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13196498/worklog/163157",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on issue #2909: ARROW-3707: [C++] Fix test regression with zstd 1.3.7\nURL: https://github.com/apache/arrow/pull/2909#issuecomment-436367343\n \n \n   I _think_ I unbroke the Windows builds now.\r\n   @MaxRis If you are interested in zstd, it seems it's not possible to do a debug build using the cmake files anymore: https://github.com/facebook/zstd/pull/1278\r\n   \n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-11-06T18:55:59.046+0000",
                    "updated": "2018-11-06T18:55:59.046+0000",
                    "started": "2018-11-06T18:55:59.046+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "163157",
                    "issueId": "13196498"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13196498/worklog/163312",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "kou commented on issue #2909: ARROW-3707: [C++] Fix test regression with zstd 1.3.7\nURL: https://github.com/apache/arrow/pull/2909#issuecomment-436467011\n \n \n   Now, `Static_Crt_Build` job is green. Can we remove it from `allow_failures`?\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-11-07T01:08:47.171+0000",
                    "updated": "2018-11-07T01:08:47.171+0000",
                    "started": "2018-11-07T01:08:47.170+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "163312",
                    "issueId": "13196498"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13196498/worklog/163376",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "xhochy commented on issue #2909: ARROW-3707: [C++] Fix test regression with zstd 1.3.7\nURL: https://github.com/apache/arrow/pull/2909#issuecomment-436541431\n \n \n   This also needs a rebase to remove the RAT failure.\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-11-07T08:20:11.381+0000",
                    "updated": "2018-11-07T08:20:11.381+0000",
                    "started": "2018-11-07T08:20:11.380+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "163376",
                    "issueId": "13196498"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13196498/worklog/163415",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "codecov-io commented on issue #2909: ARROW-3707: [C++] Fix test regression with zstd 1.3.7\nURL: https://github.com/apache/arrow/pull/2909#issuecomment-436589573\n \n \n   # [Codecov](https://codecov.io/gh/apache/arrow/pull/2909?src=pr&el=h1) Report\n   > Merging [#2909](https://codecov.io/gh/apache/arrow/pull/2909?src=pr&el=desc) into [master](https://codecov.io/gh/apache/arrow/commit/c303cc90370be1a4ebcc68cd6f158aee29436fb7?src=pr&el=desc) will **increase** coverage by `12.97%`.\n   > The diff coverage is `65%`.\n   \n   [![Impacted file tree graph](https://codecov.io/gh/apache/arrow/pull/2909/graphs/tree.svg?width=650&token=LpTCFbqVT1&height=150&src=pr)](https://codecov.io/gh/apache/arrow/pull/2909?src=pr&el=tree)\n   \n   ```diff\n   @@             Coverage Diff             @@\n   ##           master    #2909       +/-   ##\n   ===========================================\n   + Coverage   74.37%   87.35%   +12.97%     \n   ===========================================\n     Files          68      416      +348     \n     Lines        5160    64943    +59783     \n   ===========================================\n   + Hits         3838    56734    +52896     \n   - Misses       1228     8115     +6887     \n     Partials       94       94\n   ```\n   \n   \n   | [Impacted Files](https://codecov.io/gh/apache/arrow/pull/2909?src=pr&el=tree) | Coverage \u0394 | |\n   |---|---|---|\n   | [cpp/src/arrow/util/compression\\_zstd.cc](https://codecov.io/gh/apache/arrow/pull/2909/diff?src=pr&el=tree#diff-Y3BwL3NyYy9hcnJvdy91dGlsL2NvbXByZXNzaW9uX3pzdGQuY2M=) | `91.75% <65%> (\u00f8)` | |\n   | [python/pyarrow/ipc.pxi](https://codecov.io/gh/apache/arrow/pull/2909/diff?src=pr&el=tree#diff-cHl0aG9uL3B5YXJyb3cvaXBjLnB4aQ==) | `68.36% <0%> (\u00f8)` | |\n   | [cpp/src/parquet/column\\_page.h](https://codecov.io/gh/apache/arrow/pull/2909/diff?src=pr&el=tree#diff-Y3BwL3NyYy9wYXJxdWV0L2NvbHVtbl9wYWdlLmg=) | `89.28% <0%> (\u00f8)` | |\n   | [cpp/src/parquet/bloom\\_filter-test.cc](https://codecov.io/gh/apache/arrow/pull/2909/diff?src=pr&el=tree#diff-Y3BwL3NyYy9wYXJxdWV0L2Jsb29tX2ZpbHRlci10ZXN0LmNj) | `99.15% <0%> (\u00f8)` | |\n   | [cpp/src/plasma/client.cc](https://codecov.io/gh/apache/arrow/pull/2909/diff?src=pr&el=tree#diff-Y3BwL3NyYy9wbGFzbWEvY2xpZW50LmNj) | `84.54% <0%> (\u00f8)` | |\n   | [cpp/src/arrow/io/test-common.h](https://codecov.io/gh/apache/arrow/pull/2909/diff?src=pr&el=tree#diff-Y3BwL3NyYy9hcnJvdy9pby90ZXN0LWNvbW1vbi5o) | `97.29% <0%> (\u00f8)` | |\n   | [cpp/src/arrow/ipc/metadata-internal.h](https://codecov.io/gh/apache/arrow/pull/2909/diff?src=pr&el=tree#diff-Y3BwL3NyYy9hcnJvdy9pcGMvbWV0YWRhdGEtaW50ZXJuYWwuaA==) | `100% <0%> (\u00f8)` | |\n   | [cpp/src/arrow/python/io.cc](https://codecov.io/gh/apache/arrow/pull/2909/diff?src=pr&el=tree#diff-Y3BwL3NyYy9hcnJvdy9weXRob24vaW8uY2M=) | `94.91% <0%> (\u00f8)` | |\n   | [python/pyarrow/hdfs.py](https://codecov.io/gh/apache/arrow/pull/2909/diff?src=pr&el=tree#diff-cHl0aG9uL3B5YXJyb3cvaGRmcy5weQ==) | `36.84% <0%> (\u00f8)` | |\n   | [cpp/src/parquet/column\\_scanner.cc](https://codecov.io/gh/apache/arrow/pull/2909/diff?src=pr&el=tree#diff-Y3BwL3NyYy9wYXJxdWV0L2NvbHVtbl9zY2FubmVyLmNj) | `60.86% <0%> (\u00f8)` | |\n   | ... and [339 more](https://codecov.io/gh/apache/arrow/pull/2909/diff?src=pr&el=tree-more) | |\n   \n   ------\n   \n   [Continue to review full report at Codecov](https://codecov.io/gh/apache/arrow/pull/2909?src=pr&el=continue).\n   > **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n   > `\u0394 = absolute <relative> (impact)`, `\u00f8 = not affected`, `? = missing data`\n   > Powered by [Codecov](https://codecov.io/gh/apache/arrow/pull/2909?src=pr&el=footer). Last update [c303cc9...9fb0676](https://codecov.io/gh/apache/arrow/pull/2909?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n   \n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-11-07T11:11:22.468+0000",
                    "updated": "2018-11-07T11:11:22.468+0000",
                    "started": "2018-11-07T11:11:22.467+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "163415",
                    "issueId": "13196498"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13196498/worklog/163419",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou closed pull request #2909: ARROW-3707: [C++] Fix test regression with zstd 1.3.7\nURL: https://github.com/apache/arrow/pull/2909\n \n \n   \n\nThis is a PR merged from a forked repository.\nAs GitHub hides the original diff on merge, it is displayed below for\nthe sake of provenance:\n\nAs this is a foreign pull request (from a fork), the diff is supplied\nbelow (as it won't show otherwise due to GitHub magic):\n\ndiff --git a/ci/appveyor-cpp-build.bat b/ci/appveyor-cpp-build.bat\nindex bce722ffa9..195941e5b1 100644\n--- a/ci/appveyor-cpp-build.bat\n+++ b/ci/appveyor-cpp-build.bat\n@@ -30,6 +30,7 @@ if \"%JOB%\" == \"Static_Crt_Build\" (\n   pushd cpp\\build-debug\n \n   cmake -G \"%GENERATOR%\" ^\n+        -DARROW_VERBOSE_THIRDPARTY_BUILD=OFF ^\n         -DARROW_USE_STATIC_CRT=ON ^\n         -DARROW_BOOST_USE_SHARED=OFF ^\n         -DARROW_BUILD_SHARED=OFF ^\n@@ -45,6 +46,7 @@ if \"%JOB%\" == \"Static_Crt_Build\" (\n   pushd cpp\\build-release\n \n   cmake -G \"%GENERATOR%\" ^\n+        -DARROW_VERBOSE_THIRDPARTY_BUILD=OFF ^\n         -DARROW_USE_STATIC_CRT=ON ^\n         -DARROW_BOOST_USE_SHARED=OFF ^\n         -DARROW_BUILD_SHARED=OFF ^\n@@ -70,6 +72,7 @@ if \"%JOB%\" == \"Build_Debug\" (\n   pushd cpp\\build-debug\n \n   cmake -G \"%GENERATOR%\" ^\n+        -DARROW_VERBOSE_THIRDPARTY_BUILD=OFF ^\n         -DARROW_BOOST_USE_SHARED=OFF ^\n         -DCMAKE_BUILD_TYPE=%CONFIGURATION% ^\n         -DARROW_BUILD_STATIC=OFF ^\ndiff --git a/ci/cpp-msvc-build-main.bat b/ci/cpp-msvc-build-main.bat\nindex e5eef1e5d8..ef961b2e0f 100644\n--- a/ci/cpp-msvc-build-main.bat\n+++ b/ci/cpp-msvc-build-main.bat\n@@ -19,7 +19,7 @@\n @rem (i.e. for usual configurations)\n \n set ARROW_HOME=%CONDA_PREFIX%\\Library\n-set CMAKE_ARGS=\n+set CMAKE_ARGS=-DARROW_VERBOSE_THIRDPARTY_BUILD=OFF\n \n if \"%JOB%\" == \"Toolchain\" (\n     set CMAKE_ARGS=%CMAKE_ARGS% -DARROW_WITH_BZ2=ON\ndiff --git a/cpp/cmake_modules/ThirdpartyToolchain.cmake b/cpp/cmake_modules/ThirdpartyToolchain.cmake\nindex c35dd4a1dc..bbac55b1fc 100644\n--- a/cpp/cmake_modules/ThirdpartyToolchain.cmake\n+++ b/cpp/cmake_modules/ThirdpartyToolchain.cmake\n@@ -1053,38 +1053,38 @@ if (ARROW_WITH_ZSTD)\n # ZSTD\n \n   if(\"${ZSTD_HOME}\" STREQUAL \"\")\n-    set(ZSTD_BUILD_DIR \"${CMAKE_CURRENT_BINARY_DIR}/zstd_ep-prefix/src/zstd_ep\")\n-    set(ZSTD_INCLUDE_DIR \"${ZSTD_BUILD_DIR}/lib\")\n+    set(ZSTD_PREFIX \"${CMAKE_CURRENT_BINARY_DIR}/zstd_ep-install\")\n+    set(ZSTD_INCLUDE_DIR \"${ZSTD_PREFIX}/include\")\n+\n+    set(ZSTD_CMAKE_ARGS\n+        \"-DCMAKE_BUILD_TYPE=${CMAKE_BUILD_TYPE}\"\n+        \"-DCMAKE_INSTALL_PREFIX=${ZSTD_PREFIX}\"\n+        \"-DZSTD_BUILD_PROGRAMS=off\"\n+        \"-DZSTD_BUILD_SHARED=off\"\n+        \"-DZSTD_BUILD_STATIC=on\"\n+        \"-DZSTD_MULTITHREAD_SUPPORT=off\")\n \n     if (MSVC)\n+      set(ZSTD_STATIC_LIB \"${ZSTD_PREFIX}/lib/zstd_static.lib\")\n       if (ARROW_USE_STATIC_CRT)\n-        if (${UPPERCASE_BUILD_TYPE} STREQUAL \"DEBUG\")\n-          set(ZSTD_RUNTIME_LIBRARY_LINKAGE \"/p:RuntimeLibrary=MultiThreadedDebug\")\n-        else()\n-          set(ZSTD_RUNTIME_LIBRARY_LINKAGE \"/p:RuntimeLibrary=MultiThreaded\")\n-        endif()\n+        set(ZSTD_CMAKE_ARGS ${ZSTD_CMAKE_ARGS} \"-DZSTD_USE_STATIC_RUNTIME=on\")\n       endif()\n-      set(ZSTD_STATIC_LIB \"${ZSTD_BUILD_DIR}/build/VS2010/bin/x64_${CMAKE_BUILD_TYPE}/libzstd_static.lib\")\n-      set(ZSTD_BUILD_COMMAND BUILD_COMMAND msbuild ${ZSTD_BUILD_DIR}/build/VS2010/zstd.sln /t:Build /v:minimal /p:Configuration=${CMAKE_BUILD_TYPE}\n-                             ${ZSTD_RUNTIME_LIBRARY_LINKAGE} /p:Platform=x64 /p:PlatformToolset=v140\n-                             /p:OutDir=${ZSTD_BUILD_DIR}/build/VS2010/bin/x64_${CMAKE_BUILD_TYPE}/ /p:SolutionDir=${ZSTD_BUILD_DIR}/build/VS2010/ )\n-      set(ZSTD_PATCH_COMMAND PATCH_COMMAND git --git-dir=. apply --verbose --whitespace=fix ${CMAKE_SOURCE_DIR}/build-support/zstd_msbuild_gl_runtimelibrary_params.patch)\n     else()\n-      set(ZSTD_STATIC_LIB \"${ZSTD_BUILD_DIR}/lib/libzstd.a\")\n-      set(ZSTD_BUILD_COMMAND BUILD_COMMAND ${CMAKE_SOURCE_DIR}/build-support/build-zstd-lib.sh)\n+      set(ZSTD_STATIC_LIB \"${ZSTD_PREFIX}/lib/libzstd.a\")\n+      # Only pass our C flags on Unix as on MSVC it leads to a\n+      # \"incompatible command-line options\" error\n+      set(ZSTD_CMAKE_ARGS ${ZSTD_CMAKE_ARGS}\n+          \"-DCMAKE_CXX_FLAGS=${EP_CXX_FLAGS}\"\n+          \"-DCMAKE_C_FLAGS=${EP_C_FLAGS}\")\n     endif()\n \n     ExternalProject_Add(zstd_ep\n-        URL ${ZSTD_SOURCE_URL}\n-        ${EP_LOG_OPTIONS}\n-        UPDATE_COMMAND \"\"\n-        ${ZSTD_PATCH_COMMAND}\n-        CONFIGURE_COMMAND \"\"\n-        INSTALL_COMMAND \"\"\n-        BINARY_DIR ${ZSTD_BUILD_DIR}\n-        BUILD_BYPRODUCTS ${ZSTD_STATIC_LIB}\n-        ${ZSTD_BUILD_COMMAND}\n-        )\n+      ${EP_LOG_OPTIONS}\n+      CMAKE_ARGS ${ZSTD_CMAKE_ARGS}\n+      SOURCE_SUBDIR \"build/cmake\"\n+      INSTALL_DIR ${ZSTD_PREFIX}\n+      URL ${ZSTD_SOURCE_URL}\n+      BUILD_BYPRODUCTS \"${ZSTD_STATIC_LIB}\")\n \n     set(ZSTD_VENDORED 1)\n   else()\ndiff --git a/cpp/src/arrow/util/compression_zstd.cc b/cpp/src/arrow/util/compression_zstd.cc\nindex 4064f29c61..8bf02be3f2 100644\n--- a/cpp/src/arrow/util/compression_zstd.cc\n+++ b/cpp/src/arrow/util/compression_zstd.cc\n@@ -24,6 +24,7 @@\n #include <zstd.h>\n \n #include \"arrow/status.h\"\n+#include \"arrow/util/logging.h\"\n #include \"arrow/util/macros.h\"\n \n using std::size_t;\n@@ -34,6 +35,12 @@ namespace util {\n // XXX level = 1 probably doesn't compress very much\n constexpr int kZSTDDefaultCompressionLevel = 1;\n \n+static Status ZSTDError(size_t ret, const char* prefix_msg) {\n+  std::stringstream ss;\n+  ss << prefix_msg << ZSTD_getErrorName(ret);\n+  return Status::IOError(ss.str());\n+}\n+\n // ----------------------------------------------------------------------\n // ZSTD decompressor implementation\n \n@@ -47,7 +54,7 @@ class ZSTDDecompressor : public Decompressor {\n     finished_ = false;\n     size_t ret = ZSTD_initDStream(stream_);\n     if (ZSTD_isError(ret)) {\n-      return ZSTDError(ret, \"zstd init failed: \");\n+      return ZSTDError(ret, \"ZSTD init failed: \");\n     } else {\n       return Status::OK();\n     }\n@@ -69,7 +76,7 @@ class ZSTDDecompressor : public Decompressor {\n     size_t ret;\n     ret = ZSTD_decompressStream(stream_, &out_buf, &in_buf);\n     if (ZSTD_isError(ret)) {\n-      return ZSTDError(ret, \"zstd decompress failed: \");\n+      return ZSTDError(ret, \"ZSTD decompress failed: \");\n     }\n     *bytes_read = static_cast<int64_t>(in_buf.pos);\n     *bytes_written = static_cast<int64_t>(out_buf.pos);\n@@ -81,12 +88,6 @@ class ZSTDDecompressor : public Decompressor {\n   bool IsFinished() override { return finished_; }\n \n  protected:\n-  Status ZSTDError(size_t ret, const char* prefix_msg) {\n-    std::stringstream ss;\n-    ss << prefix_msg << ZSTD_getErrorName(ret);\n-    return Status::IOError(ss.str());\n-  }\n-\n   ZSTD_DStream* stream_;\n   bool finished_;\n };\n@@ -103,7 +104,7 @@ class ZSTDCompressor : public Compressor {\n   Status Init() {\n     size_t ret = ZSTD_initCStream(stream_, kZSTDDefaultCompressionLevel);\n     if (ZSTD_isError(ret)) {\n-      return ZSTDError(ret, \"zstd init failed: \");\n+      return ZSTDError(ret, \"ZSTD init failed: \");\n     } else {\n       return Status::OK();\n     }\n@@ -119,12 +120,6 @@ class ZSTDCompressor : public Compressor {\n              bool* should_retry) override;\n \n  protected:\n-  Status ZSTDError(size_t ret, const char* prefix_msg) {\n-    std::stringstream ss;\n-    ss << prefix_msg << ZSTD_getErrorName(ret);\n-    return Status::IOError(ss.str());\n-  }\n-\n   ZSTD_CStream* stream_;\n };\n \n@@ -144,7 +139,7 @@ Status ZSTDCompressor::Compress(int64_t input_len, const uint8_t* input,\n   size_t ret;\n   ret = ZSTD_compressStream(stream_, &out_buf, &in_buf);\n   if (ZSTD_isError(ret)) {\n-    return ZSTDError(ret, \"zstd compress failed: \");\n+    return ZSTDError(ret, \"ZSTD compress failed: \");\n   }\n   *bytes_read = static_cast<int64_t>(in_buf.pos);\n   *bytes_written = static_cast<int64_t>(out_buf.pos);\n@@ -162,7 +157,7 @@ Status ZSTDCompressor::Flush(int64_t output_len, uint8_t* output, int64_t* bytes\n   size_t ret;\n   ret = ZSTD_flushStream(stream_, &out_buf);\n   if (ZSTD_isError(ret)) {\n-    return ZSTDError(ret, \"zstd flush failed: \");\n+    return ZSTDError(ret, \"ZSTD flush failed: \");\n   }\n   *bytes_written = static_cast<int64_t>(out_buf.pos);\n   *should_retry = ret > 0;\n@@ -180,7 +175,7 @@ Status ZSTDCompressor::End(int64_t output_len, uint8_t* output, int64_t* bytes_w\n   size_t ret;\n   ret = ZSTD_endStream(stream_, &out_buf);\n   if (ZSTD_isError(ret)) {\n-    return ZSTDError(ret, \"zstd end failed: \");\n+    return ZSTDError(ret, \"ZSTD end failed: \");\n   }\n   *bytes_written = static_cast<int64_t>(out_buf.pos);\n   *should_retry = ret > 0;\n@@ -206,10 +201,20 @@ Status ZSTDCodec::MakeDecompressor(std::shared_ptr<Decompressor>* out) {\n \n Status ZSTDCodec::Decompress(int64_t input_len, const uint8_t* input, int64_t output_len,\n                              uint8_t* output_buffer) {\n-  int64_t decompressed_size =\n-      ZSTD_decompress(output_buffer, static_cast<size_t>(output_len), input,\n-                      static_cast<size_t>(input_len));\n-  if (decompressed_size != output_len) {\n+  if (output_buffer == nullptr) {\n+    // We may pass a NULL 0-byte output buffer but some zstd versions demand\n+    // a valid pointer: https://github.com/facebook/zstd/issues/1385\n+    static uint8_t empty_buffer[1];\n+    DCHECK_EQ(output_len, 0);\n+    output_buffer = empty_buffer;\n+  }\n+\n+  size_t ret = ZSTD_decompress(output_buffer, static_cast<size_t>(output_len), input,\n+                               static_cast<size_t>(input_len));\n+  if (ZSTD_isError(ret)) {\n+    return ZSTDError(ret, \"ZSTD decompression failed: \");\n+  }\n+  if (static_cast<int64_t>(ret) != output_len) {\n     return Status::IOError(\"Corrupt ZSTD compressed data.\");\n   }\n   return Status::OK();\n@@ -223,12 +228,13 @@ int64_t ZSTDCodec::MaxCompressedLen(int64_t input_len,\n Status ZSTDCodec::Compress(int64_t input_len, const uint8_t* input,\n                            int64_t output_buffer_len, uint8_t* output_buffer,\n                            int64_t* output_length) {\n-  *output_length =\n+  size_t ret =\n       ZSTD_compress(output_buffer, static_cast<size_t>(output_buffer_len), input,\n                     static_cast<size_t>(input_len), kZSTDDefaultCompressionLevel);\n-  if (ZSTD_isError(*output_length)) {\n-    return Status::IOError(\"ZSTD compression failure.\");\n+  if (ZSTD_isError(ret)) {\n+    return ZSTDError(ret, \"ZSTD compression failed: \");\n   }\n+  *output_length = static_cast<int64_t>(ret);\n   return Status::OK();\n }\n \ndiff --git a/cpp/thirdparty/versions.txt b/cpp/thirdparty/versions.txt\nindex 8fbfb388e8..51a0c5c591 100644\n--- a/cpp/thirdparty/versions.txt\n+++ b/cpp/thirdparty/versions.txt\n@@ -34,5 +34,5 @@ RAPIDJSON_VERSION=v1.1.0\n SNAPPY_VERSION=1.1.3\n THRIFT_VERSION=0.11.0\n ZLIB_VERSION=1.2.8\n-ZSTD_VERSION=v1.2.0\n+ZSTD_VERSION=v1.3.7\n RE2_VERSION=2018-10-01\n\n\n \n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-11-07T12:08:32.537+0000",
                    "updated": "2018-11-07T12:08:32.537+0000",
                    "started": "2018-11-07T12:08:32.537+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "163419",
                    "issueId": "13196498"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
            "id": "1",
            "description": "A problem which impairs or prevents the functions of the product.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
            "name": "Bug",
            "subtask": false,
            "avatarId": 21133
        },
        "timespent": 6000,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@7e93421[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@2f8ab12a[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@76826c1e[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@cfb9005[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@3e3d2bca[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@26d9d709[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@43dead50[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@13f57696[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@44417c59[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@2cc88a47[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@1a4a06a3[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@223392ba[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 6000,
        "customfield_12312520": null,
        "customfield_12312521": "Wed Nov 07 12:08:22 UTC 2018",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2018-11-07T12:08:22.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-3707/watchers",
            "watchCount": 1,
            "isWatching": false
        },
        "created": "2018-11-06T11:41:37.000+0000",
        "updated": "2018-11-07T12:08:32.000+0000",
        "timeoriginalestimate": null,
        "description": "We may pass a NULL output pointer to {{Codec::Decompress}} when the output size is 0, but recent zstd versions don't like that.\r\n\r\nThis was already identified (and patched on the side) by one of our packagers:\r\nhttps://github.com/NixOS/nixpkgs/pull/48928\r\n",
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "1h 40m",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 6000
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[C++] test failure with zstd 1.3.7",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13196498/comment/16678127",
                    "id": "16678127",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "body": "Issue resolved by pull request 2909\n[https://github.com/apache/arrow/pull/2909]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "created": "2018-11-07T12:08:22.569+0000",
                    "updated": "2018-11-07T12:08:22.569+0000"
                }
            ],
            "maxResults": 1,
            "total": 1,
            "startAt": 0
        },
        "customfield_12311820": "0|s0062w:",
        "customfield_12314139": null
    }
}