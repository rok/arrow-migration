{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13262013",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13262013",
    "key": "ARROW-6868",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12340948",
                "id": "12340948",
                "description": "",
                "name": "0.16.0",
                "archived": false,
                "released": true,
                "releaseDate": "2020-02-07"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "name": "Major",
            "id": "3"
        },
        "labels": [
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=nickpoorman",
            "name": "nickpoorman",
            "key": "nickpoorman",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=nickpoorman&avatarId=36441",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=nickpoorman&avatarId=36441",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=nickpoorman&avatarId=36441",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=nickpoorman&avatarId=36441"
            },
            "displayName": "Nick Poorman",
            "active": true,
            "timeZone": "America/New_York"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12333772",
                "id": "12333772",
                "name": "Go"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=nickpoorman",
            "name": "nickpoorman",
            "key": "nickpoorman",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=nickpoorman&avatarId=36441",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=nickpoorman&avatarId=36441",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=nickpoorman&avatarId=36441",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=nickpoorman&avatarId=36441"
            },
            "displayName": "Nick Poorman",
            "active": true,
            "timeZone": "America/New_York"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=nickpoorman",
            "name": "nickpoorman",
            "key": "nickpoorman",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=nickpoorman&avatarId=36441",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=nickpoorman&avatarId=36441",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=nickpoorman&avatarId=36441",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=nickpoorman&avatarId=36441"
            },
            "displayName": "Nick Poorman",
            "active": true,
            "timeZone": "America/New_York"
        },
        "aggregateprogress": {
            "progress": 12000,
            "total": 12000,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 12000,
            "total": 12000,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-6868/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 20,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13262013/worklog/327576",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nickpoorman commented on pull request #5642: ARROW-6868: [Go] Fix slicing struct arrays\nURL: https://github.com/apache/arrow/pull/5642\n \n \n   This PR fixes the issue in: https://issues.apache.org/jira/browse/ARROW-6868\r\n   \r\n   Slicing the struct array should result in `\"{[1.3 1.4] [(null) 4]}\"`, however the entire struct array is returned on a call to `arr.String()`: `\"{[1.1 (null) 1.3 1.4] [1 2 (null) 4]}\"`. The fix was to adjust Data to account for the new offset/length:\r\n   \r\n   ```\r\n   sub := NewSliceData(child, int64(data.offset), int64(data.offset+data.length))\r\n   ```\r\n   \r\n   Result of the test before the fix:\r\n   ```\r\n   === RUN   TestStructArraySlice\r\n   --- FAIL: TestStructArraySlice (0.00s)\r\n      /arrow/go/arrow/array/struct_test.go:358: invalid string representation:\r\n           got = \"{[1.1 (null) 1.3 1.4] [1 2 (null) 4]}\"\r\n           want= \"{[1.3 1.4] [(null) 4]}\"\r\n   FAIL\r\n   FAIL\tgithub.com/apache/arrow/go/arrow/array\t0.043s\r\n   Error: Tests failed.\r\n   ```\r\n   \n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-10-13T21:40:58.021+0000",
                    "updated": "2019-10-13T21:40:58.021+0000",
                    "started": "2019-10-13T21:40:58.020+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "327576",
                    "issueId": "13262013"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13262013/worklog/327577",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "github-actions[bot] commented on issue #5642: ARROW-6868: [Go] Fix slicing struct arrays\nURL: https://github.com/apache/arrow/pull/5642#issuecomment-541462913\n \n \n   https://issues.apache.org/jira/browse/ARROW-6868\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-10-13T21:46:48.359+0000",
                    "updated": "2019-10-13T21:46:48.359+0000",
                    "started": "2019-10-13T21:46:48.358+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "327577",
                    "issueId": "13262013"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13262013/worklog/327650",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "sbinet commented on issue #5642: ARROW-6868: [Go] Fix slicing struct arrays\nURL: https://github.com/apache/arrow/pull/5642#issuecomment-541536575\n \n \n   except for the panics in some of the tests :)\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-10-14T07:50:10.013+0000",
                    "updated": "2019-10-14T07:50:10.013+0000",
                    "started": "2019-10-14T07:50:10.012+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "327650",
                    "issueId": "13262013"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13262013/worklog/330970",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nickpoorman commented on issue #5642: ARROW-6868: [Go] Fix slicing struct arrays\nURL: https://github.com/apache/arrow/pull/5642#issuecomment-544183223\n \n \n   I had to update the tests and fix the `String()` method on the Struct type to make the tests work properly.\r\n   \r\n   Before the fix, calling `String()` on Struct would not take into account the validity bitmap of the struct when printing the child fields.\r\n   \r\n   From the documentation:\r\n   \r\n   > While a struct does not have physical storage for each of its semantic slots (i.e. each scalar C-like struct), an entire struct slot can be set to null via the validity bitmap. Any of the child field arrays can have null values according to their respective independent validity bitmaps. This implies that for a particular struct slot the validity bitmap for the struct array might indicate a null slot when one or more of its child arrays has a non-null value in their corresponding slot. When reading the struct array the parent validity bitmap takes priority.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-10-19T18:16:41.299+0000",
                    "updated": "2019-10-19T18:16:41.299+0000",
                    "started": "2019-10-19T18:16:41.298+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "330970",
                    "issueId": "13262013"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13262013/worklog/331693",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nickpoorman commented on issue #5642: ARROW-6868: [Go] Fix slicing struct arrays\nURL: https://github.com/apache/arrow/pull/5642#issuecomment-544739199\n \n \n   This should be good for review now. @sbinet @stuartcarnie @alexandreyc \n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-10-21T22:44:27.565+0000",
                    "updated": "2019-10-21T22:44:27.565+0000",
                    "started": "2019-10-21T22:44:27.565+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "331693",
                    "issueId": "13262013"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13262013/worklog/331833",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "sbinet commented on issue #5642: ARROW-6868: [Go] Fix slicing struct arrays\nURL: https://github.com/apache/arrow/pull/5642#issuecomment-544835427\n \n \n   Apologies. I am a bit off the grid till middle of next week.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-10-22T07:16:37.190+0000",
                    "updated": "2019-10-22T07:16:37.190+0000",
                    "started": "2019-10-22T07:16:37.189+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "331833",
                    "issueId": "13262013"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13262013/worklog/336775",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "sbinet commented on pull request #5642: ARROW-6868: [Go] Fix slicing struct arrays\nURL: https://github.com/apache/arrow/pull/5642#discussion_r341114378\n \n \n\n ##########\n File path: go/arrow/array/struct.go\n ##########\n @@ -47,21 +48,60 @@ func (a *Struct) Field(i int) Interface { return a.fields[i] }\n func (a *Struct) String() string {\n \to := new(strings.Builder)\n \to.WriteString(\"{\")\n+\n+\tstructBitmap := a.NullBitmapBytes()\n \tfor i, v := range a.fields {\n \t\tif i > 0 {\n \t\t\to.WriteString(\" \")\n \t\t}\n+\t\tif !bytes.Equal(structBitmap, v.NullBitmapBytes()) {\n+\t\t\tmasked := newStructFieldWithParentValidityMask(a, i)\n+\t\t\tfmt.Fprintf(o, \"%v\", masked)\n+\t\t\tmasked.Release()\n+\t\t\tcontinue\n+\t\t}\n \t\tfmt.Fprintf(o, \"%v\", v)\n \t}\n \to.WriteString(\"}\")\n \treturn o.String()\n }\n \n+// newStructFieldWithParentValidityMask returns the Interface at fieldIndex\n+// with a nullBitmapBytes adjusted according on the parent struct nullBitmapBytes.\n+// From the docs:\n+//   \"When reading the struct array the parent validity bitmap takes priority.\"\n+func newStructFieldWithParentValidityMask(a *Struct, fieldIndex int) Interface {\n+\tfield := a.Field(fieldIndex)\n+\tnullBitmapBytes := field.NullBitmapBytes()\n+\tmaskedNullBitmapBytes := make([]byte, len(nullBitmapBytes))\n+\tcopy(maskedNullBitmapBytes, nullBitmapBytes)\n+\tfor i := 0; i < field.Len(); i++ {\n+\t\tif !a.IsValid(i) {\n+\t\t\tbitutil.ClearBit(maskedNullBitmapBytes, i)\n+\t\t}\n+\t}\n+\tdata := NewSliceData(field.Data(), 0, int64(field.Len()))\n+\tbufs := make([]*memory.Buffer, len(data.buffers))\n+\tcopy(bufs, data.buffers)\n+\tbufs[0].Release()\n+\tbufs[0] = memory.NewBufferBytes(maskedNullBitmapBytes)\n+\tdata.buffers = bufs\n+\tmaskedField := MakeFromData(data)\n+\tdata.Release()\n \n Review comment:\n   please move to line 84 and make it a `defer` call.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-10-31T13:42:31.694+0000",
                    "updated": "2019-10-31T13:42:31.694+0000",
                    "started": "2019-10-31T13:42:31.694+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "336775",
                    "issueId": "13262013"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13262013/worklog/336776",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "sbinet commented on pull request #5642: ARROW-6868: [Go] Fix slicing struct arrays\nURL: https://github.com/apache/arrow/pull/5642#discussion_r341117929\n \n \n\n ##########\n File path: go/arrow/array/struct.go\n ##########\n @@ -47,21 +48,60 @@ func (a *Struct) Field(i int) Interface { return a.fields[i] }\n func (a *Struct) String() string {\n \to := new(strings.Builder)\n \to.WriteString(\"{\")\n+\n+\tstructBitmap := a.NullBitmapBytes()\n \tfor i, v := range a.fields {\n \t\tif i > 0 {\n \t\t\to.WriteString(\" \")\n \t\t}\n+\t\tif !bytes.Equal(structBitmap, v.NullBitmapBytes()) {\n+\t\t\tmasked := newStructFieldWithParentValidityMask(a, i)\n+\t\t\tfmt.Fprintf(o, \"%v\", masked)\n+\t\t\tmasked.Release()\n+\t\t\tcontinue\n+\t\t}\n \t\tfmt.Fprintf(o, \"%v\", v)\n \t}\n \to.WriteString(\"}\")\n \treturn o.String()\n }\n \n+// newStructFieldWithParentValidityMask returns the Interface at fieldIndex\n+// with a nullBitmapBytes adjusted according on the parent struct nullBitmapBytes.\n+// From the docs:\n+//   \"When reading the struct array the parent validity bitmap takes priority.\"\n+func newStructFieldWithParentValidityMask(a *Struct, fieldIndex int) Interface {\n \n Review comment:\n   perhaps this `newStructFieldWithParentValidityMask` function should actually be a method of `Struct`?\r\n   and, actually, shouldn't this be factored into the current `func (*Struct) Field(i int) Interface` method?\r\n   (this would probably mean to have an additional (caching) slice of `Interface` fields to not require a matching `Release` on the client...)\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-10-31T13:42:31.765+0000",
                    "updated": "2019-10-31T13:42:31.765+0000",
                    "started": "2019-10-31T13:42:31.764+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "336776",
                    "issueId": "13262013"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13262013/worklog/337087",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nickpoorman commented on pull request #5642: ARROW-6868: [Go] Fix slicing struct arrays\nURL: https://github.com/apache/arrow/pull/5642#discussion_r341398162\n \n \n\n ##########\n File path: go/arrow/array/struct.go\n ##########\n @@ -47,21 +48,60 @@ func (a *Struct) Field(i int) Interface { return a.fields[i] }\n func (a *Struct) String() string {\n \to := new(strings.Builder)\n \to.WriteString(\"{\")\n+\n+\tstructBitmap := a.NullBitmapBytes()\n \tfor i, v := range a.fields {\n \t\tif i > 0 {\n \t\t\to.WriteString(\" \")\n \t\t}\n+\t\tif !bytes.Equal(structBitmap, v.NullBitmapBytes()) {\n+\t\t\tmasked := newStructFieldWithParentValidityMask(a, i)\n+\t\t\tfmt.Fprintf(o, \"%v\", masked)\n+\t\t\tmasked.Release()\n+\t\t\tcontinue\n+\t\t}\n \t\tfmt.Fprintf(o, \"%v\", v)\n \t}\n \to.WriteString(\"}\")\n \treturn o.String()\n }\n \n+// newStructFieldWithParentValidityMask returns the Interface at fieldIndex\n+// with a nullBitmapBytes adjusted according on the parent struct nullBitmapBytes.\n+// From the docs:\n+//   \"When reading the struct array the parent validity bitmap takes priority.\"\n+func newStructFieldWithParentValidityMask(a *Struct, fieldIndex int) Interface {\n+\tfield := a.Field(fieldIndex)\n+\tnullBitmapBytes := field.NullBitmapBytes()\n+\tmaskedNullBitmapBytes := make([]byte, len(nullBitmapBytes))\n+\tcopy(maskedNullBitmapBytes, nullBitmapBytes)\n+\tfor i := 0; i < field.Len(); i++ {\n+\t\tif !a.IsValid(i) {\n+\t\t\tbitutil.ClearBit(maskedNullBitmapBytes, i)\n+\t\t}\n+\t}\n+\tdata := NewSliceData(field.Data(), 0, int64(field.Len()))\n+\tbufs := make([]*memory.Buffer, len(data.buffers))\n+\tcopy(bufs, data.buffers)\n+\tbufs[0].Release()\n+\tbufs[0] = memory.NewBufferBytes(maskedNullBitmapBytes)\n+\tdata.buffers = bufs\n+\tmaskedField := MakeFromData(data)\n+\tdata.Release()\n \n Review comment:\n   Fixed in: https://github.com/apache/arrow/pull/5642/commits/a4a11bf838526a1b3f650616551f8a79e8db513b\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-10-31T22:55:35.644+0000",
                    "updated": "2019-10-31T22:55:35.644+0000",
                    "started": "2019-10-31T22:55:35.644+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "337087",
                    "issueId": "13262013"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13262013/worklog/337088",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nickpoorman commented on pull request #5642: ARROW-6868: [Go] Fix slicing struct arrays\nURL: https://github.com/apache/arrow/pull/5642#discussion_r341399589\n \n \n\n ##########\n File path: go/arrow/array/struct.go\n ##########\n @@ -47,21 +48,60 @@ func (a *Struct) Field(i int) Interface { return a.fields[i] }\n func (a *Struct) String() string {\n \to := new(strings.Builder)\n \to.WriteString(\"{\")\n+\n+\tstructBitmap := a.NullBitmapBytes()\n \tfor i, v := range a.fields {\n \t\tif i > 0 {\n \t\t\to.WriteString(\" \")\n \t\t}\n+\t\tif !bytes.Equal(structBitmap, v.NullBitmapBytes()) {\n+\t\t\tmasked := newStructFieldWithParentValidityMask(a, i)\n+\t\t\tfmt.Fprintf(o, \"%v\", masked)\n+\t\t\tmasked.Release()\n+\t\t\tcontinue\n+\t\t}\n \t\tfmt.Fprintf(o, \"%v\", v)\n \t}\n \to.WriteString(\"}\")\n \treturn o.String()\n }\n \n+// newStructFieldWithParentValidityMask returns the Interface at fieldIndex\n+// with a nullBitmapBytes adjusted according on the parent struct nullBitmapBytes.\n+// From the docs:\n+//   \"When reading the struct array the parent validity bitmap takes priority.\"\n+func newStructFieldWithParentValidityMask(a *Struct, fieldIndex int) Interface {\n \n Review comment:\n   I thought about adding this to `Field(i)` but I decided against it because it would require unnecessary caching logic and I thought it was more in line with the way the other nested logical types implemented slicing.\r\n   \r\n   https://github.com/apache/arrow/blob/a4a11bf838526a1b3f650616551f8a79e8db513b/go/arrow/array/list.go#L66\r\n   https://github.com/apache/arrow/blob/a4a11bf838526a1b3f650616551f8a79e8db513b/go/arrow/array/fixed_size_list.go#L66\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-10-31T23:02:03.843+0000",
                    "updated": "2019-10-31T23:02:03.843+0000",
                    "started": "2019-10-31T23:02:03.843+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "337088",
                    "issueId": "13262013"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13262013/worklog/337089",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nickpoorman commented on pull request #5642: ARROW-6868: [Go] Fix slicing struct arrays\nURL: https://github.com/apache/arrow/pull/5642#discussion_r341399589\n \n \n\n ##########\n File path: go/arrow/array/struct.go\n ##########\n @@ -47,21 +48,60 @@ func (a *Struct) Field(i int) Interface { return a.fields[i] }\n func (a *Struct) String() string {\n \to := new(strings.Builder)\n \to.WriteString(\"{\")\n+\n+\tstructBitmap := a.NullBitmapBytes()\n \tfor i, v := range a.fields {\n \t\tif i > 0 {\n \t\t\to.WriteString(\" \")\n \t\t}\n+\t\tif !bytes.Equal(structBitmap, v.NullBitmapBytes()) {\n+\t\t\tmasked := newStructFieldWithParentValidityMask(a, i)\n+\t\t\tfmt.Fprintf(o, \"%v\", masked)\n+\t\t\tmasked.Release()\n+\t\t\tcontinue\n+\t\t}\n \t\tfmt.Fprintf(o, \"%v\", v)\n \t}\n \to.WriteString(\"}\")\n \treturn o.String()\n }\n \n+// newStructFieldWithParentValidityMask returns the Interface at fieldIndex\n+// with a nullBitmapBytes adjusted according on the parent struct nullBitmapBytes.\n+// From the docs:\n+//   \"When reading the struct array the parent validity bitmap takes priority.\"\n+func newStructFieldWithParentValidityMask(a *Struct, fieldIndex int) Interface {\n \n Review comment:\n   I thought about adding this to `Field(i)` but I decided against it because it would require unnecessary caching logic and I thought it was more in line with the way the other nested logical types implemented slicing.\r\n   \r\n   https://github.com/apache/arrow/blob/a4a11bf838526a1b3f650616551f8a79e8db513b/go/arrow/array/list.go#L66-L71\r\n   https://github.com/apache/arrow/blob/a4a11bf838526a1b3f650616551f8a79e8db513b/go/arrow/array/fixed_size_list.go#L66-L73\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-10-31T23:02:33.940+0000",
                    "updated": "2019-10-31T23:02:33.940+0000",
                    "started": "2019-10-31T23:02:33.940+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "337089",
                    "issueId": "13262013"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13262013/worklog/337093",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nickpoorman commented on pull request #5642: ARROW-6868: [Go] Fix slicing struct arrays\nURL: https://github.com/apache/arrow/pull/5642#discussion_r341400424\n \n \n\n ##########\n File path: go/arrow/array/struct.go\n ##########\n @@ -47,21 +48,60 @@ func (a *Struct) Field(i int) Interface { return a.fields[i] }\n func (a *Struct) String() string {\n \to := new(strings.Builder)\n \to.WriteString(\"{\")\n+\n+\tstructBitmap := a.NullBitmapBytes()\n \tfor i, v := range a.fields {\n \t\tif i > 0 {\n \t\t\to.WriteString(\" \")\n \t\t}\n+\t\tif !bytes.Equal(structBitmap, v.NullBitmapBytes()) {\n+\t\t\tmasked := newStructFieldWithParentValidityMask(a, i)\n+\t\t\tfmt.Fprintf(o, \"%v\", masked)\n+\t\t\tmasked.Release()\n+\t\t\tcontinue\n+\t\t}\n \t\tfmt.Fprintf(o, \"%v\", v)\n \t}\n \to.WriteString(\"}\")\n \treturn o.String()\n }\n \n+// newStructFieldWithParentValidityMask returns the Interface at fieldIndex\n+// with a nullBitmapBytes adjusted according on the parent struct nullBitmapBytes.\n+// From the docs:\n+//   \"When reading the struct array the parent validity bitmap takes priority.\"\n+func newStructFieldWithParentValidityMask(a *Struct, fieldIndex int) Interface {\n \n Review comment:\n   I moved it to a method on struct. https://github.com/apache/arrow/pull/5642/commits/4cfef3c61316c2644175b119d97d831c10926d50\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-10-31T23:06:27.507+0000",
                    "updated": "2019-10-31T23:06:27.507+0000",
                    "started": "2019-10-31T23:06:27.506+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "337093",
                    "issueId": "13262013"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13262013/worklog/337094",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nickpoorman commented on pull request #5642: ARROW-6868: [Go] Fix slicing struct arrays\nURL: https://github.com/apache/arrow/pull/5642#discussion_r341399589\n \n \n\n ##########\n File path: go/arrow/array/struct.go\n ##########\n @@ -47,21 +48,60 @@ func (a *Struct) Field(i int) Interface { return a.fields[i] }\n func (a *Struct) String() string {\n \to := new(strings.Builder)\n \to.WriteString(\"{\")\n+\n+\tstructBitmap := a.NullBitmapBytes()\n \tfor i, v := range a.fields {\n \t\tif i > 0 {\n \t\t\to.WriteString(\" \")\n \t\t}\n+\t\tif !bytes.Equal(structBitmap, v.NullBitmapBytes()) {\n+\t\t\tmasked := newStructFieldWithParentValidityMask(a, i)\n+\t\t\tfmt.Fprintf(o, \"%v\", masked)\n+\t\t\tmasked.Release()\n+\t\t\tcontinue\n+\t\t}\n \t\tfmt.Fprintf(o, \"%v\", v)\n \t}\n \to.WriteString(\"}\")\n \treturn o.String()\n }\n \n+// newStructFieldWithParentValidityMask returns the Interface at fieldIndex\n+// with a nullBitmapBytes adjusted according on the parent struct nullBitmapBytes.\n+// From the docs:\n+//   \"When reading the struct array the parent validity bitmap takes priority.\"\n+func newStructFieldWithParentValidityMask(a *Struct, fieldIndex int) Interface {\n \n Review comment:\n   I thought about adding this to `Field(i)` but I decided against it because it would require unnecessary caching logic and I thought it was more in line with the way the other nested logical types implemented slicing.\r\n   \r\n   https://github.com/apache/arrow/blob/a4a11bf838526a1b3f650616551f8a79e8db513b/go/arrow/array/list.go#L47-L71\r\n   https://github.com/apache/arrow/blob/a4a11bf838526a1b3f650616551f8a79e8db513b/go/arrow/array/fixed_size_list.go#L47-L73\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-10-31T23:07:05.277+0000",
                    "updated": "2019-10-31T23:07:05.277+0000",
                    "started": "2019-10-31T23:07:05.276+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "337094",
                    "issueId": "13262013"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13262013/worklog/337095",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nickpoorman commented on pull request #5642: ARROW-6868: [Go] Fix slicing struct arrays\nURL: https://github.com/apache/arrow/pull/5642#discussion_r341402594\n \n \n\n ##########\n File path: go/arrow/array/struct.go\n ##########\n @@ -47,21 +48,60 @@ func (a *Struct) Field(i int) Interface { return a.fields[i] }\n func (a *Struct) String() string {\n \to := new(strings.Builder)\n \to.WriteString(\"{\")\n+\n+\tstructBitmap := a.NullBitmapBytes()\n \tfor i, v := range a.fields {\n \t\tif i > 0 {\n \t\t\to.WriteString(\" \")\n \t\t}\n+\t\tif !bytes.Equal(structBitmap, v.NullBitmapBytes()) {\n+\t\t\tmasked := newStructFieldWithParentValidityMask(a, i)\n+\t\t\tfmt.Fprintf(o, \"%v\", masked)\n+\t\t\tmasked.Release()\n+\t\t\tcontinue\n+\t\t}\n \t\tfmt.Fprintf(o, \"%v\", v)\n \t}\n \to.WriteString(\"}\")\n \treturn o.String()\n }\n \n+// newStructFieldWithParentValidityMask returns the Interface at fieldIndex\n+// with a nullBitmapBytes adjusted according on the parent struct nullBitmapBytes.\n+// From the docs:\n+//   \"When reading the struct array the parent validity bitmap takes priority.\"\n+func newStructFieldWithParentValidityMask(a *Struct, fieldIndex int) Interface {\n \n Review comment:\n   Ahh. I think I see what you're referring to with `Field(i)`. I guess we need to decide what the behavior of `Field(i)` should be. Should calling `Field(i)` return the masked field or the underling field (which could potentially have a different null bitmap)?\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-10-31T23:16:43.006+0000",
                    "updated": "2019-10-31T23:16:43.006+0000",
                    "started": "2019-10-31T23:16:43.006+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "337095",
                    "issueId": "13262013"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13262013/worklog/337096",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nickpoorman commented on pull request #5642: ARROW-6868: [Go] Fix slicing struct arrays\nURL: https://github.com/apache/arrow/pull/5642#discussion_r341402594\n \n \n\n ##########\n File path: go/arrow/array/struct.go\n ##########\n @@ -47,21 +48,60 @@ func (a *Struct) Field(i int) Interface { return a.fields[i] }\n func (a *Struct) String() string {\n \to := new(strings.Builder)\n \to.WriteString(\"{\")\n+\n+\tstructBitmap := a.NullBitmapBytes()\n \tfor i, v := range a.fields {\n \t\tif i > 0 {\n \t\t\to.WriteString(\" \")\n \t\t}\n+\t\tif !bytes.Equal(structBitmap, v.NullBitmapBytes()) {\n+\t\t\tmasked := newStructFieldWithParentValidityMask(a, i)\n+\t\t\tfmt.Fprintf(o, \"%v\", masked)\n+\t\t\tmasked.Release()\n+\t\t\tcontinue\n+\t\t}\n \t\tfmt.Fprintf(o, \"%v\", v)\n \t}\n \to.WriteString(\"}\")\n \treturn o.String()\n }\n \n+// newStructFieldWithParentValidityMask returns the Interface at fieldIndex\n+// with a nullBitmapBytes adjusted according on the parent struct nullBitmapBytes.\n+// From the docs:\n+//   \"When reading the struct array the parent validity bitmap takes priority.\"\n+func newStructFieldWithParentValidityMask(a *Struct, fieldIndex int) Interface {\n \n Review comment:\n   Ahh. I think I see what you're referring to with `Field(i)`. I guess we need to decide what the behavior of `Field(i)` should be. Should calling `Field(i)` return the masked field with an updated null bitmap or the actual underling field, which could potentially have a different null bitmap?\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-10-31T23:17:14.701+0000",
                    "updated": "2019-10-31T23:17:14.701+0000",
                    "started": "2019-10-31T23:17:14.701+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "337096",
                    "issueId": "13262013"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13262013/worklog/337710",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nickpoorman commented on pull request #5642: ARROW-6868: [Go] Fix slicing struct arrays\nURL: https://github.com/apache/arrow/pull/5642#discussion_r341815256\n \n \n\n ##########\n File path: go/arrow/array/struct.go\n ##########\n @@ -47,21 +48,60 @@ func (a *Struct) Field(i int) Interface { return a.fields[i] }\n func (a *Struct) String() string {\n \to := new(strings.Builder)\n \to.WriteString(\"{\")\n+\n+\tstructBitmap := a.NullBitmapBytes()\n \tfor i, v := range a.fields {\n \t\tif i > 0 {\n \t\t\to.WriteString(\" \")\n \t\t}\n+\t\tif !bytes.Equal(structBitmap, v.NullBitmapBytes()) {\n+\t\t\tmasked := newStructFieldWithParentValidityMask(a, i)\n+\t\t\tfmt.Fprintf(o, \"%v\", masked)\n+\t\t\tmasked.Release()\n+\t\t\tcontinue\n+\t\t}\n \t\tfmt.Fprintf(o, \"%v\", v)\n \t}\n \to.WriteString(\"}\")\n \treturn o.String()\n }\n \n+// newStructFieldWithParentValidityMask returns the Interface at fieldIndex\n+// with a nullBitmapBytes adjusted according on the parent struct nullBitmapBytes.\n+// From the docs:\n+//   \"When reading the struct array the parent validity bitmap takes priority.\"\n+func newStructFieldWithParentValidityMask(a *Struct, fieldIndex int) Interface {\n \n Review comment:\n   I'm not sure if this is the desired behavior, but for what it's worth the Python version does not apply the struct null bitmap either.\r\n   \r\n   ```python\r\n   python\r\n   Python 3.7.3 | packaged by conda-forge | (default, Jul  1 2019, 14:38:56) \r\n   [Clang 4.0.1 (tags/RELEASE_401/final)] :: Anaconda, Inc. on darwin\r\n   Type \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n   >>> import pyarrow as pa\r\n   >>> import numpy as np\r\n   >>> pa.__version__\r\n   '0.15.0'\r\n   >>> np.__version__\r\n   '1.17.3'\r\n   >>> ty = pa.struct([('x', pa.int16()),('y', pa.bool_())])\r\n   >>> xs = pa.array([5, None, 7], type=pa.int16())\r\n   >>> ys = pa.array([False, True, True])\r\n   >>> mask = pa.array(['a', 'b', 'c'], mask=np.array([True, False, False]))\r\n   >>> mask\r\n   <pyarrow.lib.StringArray object at 0x11995e108>\r\n   [\r\n     null,\r\n     \"b\",\r\n     \"c\"\r\n   ]\r\n   >>> arr = pa.StructArray.from_buffers(ty, 3, mask.buffers()[0:1], children=(xs, ys))\r\n   >>> arr\r\n   <pyarrow.lib.StructArray object at 0x11995e168>\r\n   -- is_valid:\r\n     [\r\n       false,\r\n       true,\r\n       true\r\n     ]\r\n   -- child 0 type: int16\r\n     [\r\n       5,\r\n       null,\r\n       7\r\n     ]\r\n   -- child 1 type: bool\r\n     [\r\n       false,\r\n       true,\r\n       true\r\n     ]\r\n   >>> arr.field(0)\r\n   <pyarrow.lib.Int16Array object at 0x11995e1c8>\r\n   [\r\n     5,\r\n     null,\r\n     7\r\n   ]\r\n   >>> arr.field(0).null_count\r\n   1\r\n   >>> \r\n   ```\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-11-02T15:34:42.158+0000",
                    "updated": "2019-11-02T15:34:42.158+0000",
                    "started": "2019-11-02T15:34:42.157+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "337710",
                    "issueId": "13262013"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13262013/worklog/337712",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nickpoorman commented on pull request #5642: ARROW-6868: [Go] Fix slicing struct arrays\nURL: https://github.com/apache/arrow/pull/5642#discussion_r341815959\n \n \n\n ##########\n File path: go/arrow/array/struct.go\n ##########\n @@ -47,21 +48,60 @@ func (a *Struct) Field(i int) Interface { return a.fields[i] }\n func (a *Struct) String() string {\n \to := new(strings.Builder)\n \to.WriteString(\"{\")\n+\n+\tstructBitmap := a.NullBitmapBytes()\n \tfor i, v := range a.fields {\n \t\tif i > 0 {\n \t\t\to.WriteString(\" \")\n \t\t}\n+\t\tif !bytes.Equal(structBitmap, v.NullBitmapBytes()) {\n+\t\t\tmasked := newStructFieldWithParentValidityMask(a, i)\n+\t\t\tfmt.Fprintf(o, \"%v\", masked)\n+\t\t\tmasked.Release()\n+\t\t\tcontinue\n+\t\t}\n \t\tfmt.Fprintf(o, \"%v\", v)\n \t}\n \to.WriteString(\"}\")\n \treturn o.String()\n }\n \n+// newStructFieldWithParentValidityMask returns the Interface at fieldIndex\n+// with a nullBitmapBytes adjusted according on the parent struct nullBitmapBytes.\n+// From the docs:\n+//   \"When reading the struct array the parent validity bitmap takes priority.\"\n+func newStructFieldWithParentValidityMask(a *Struct, fieldIndex int) Interface {\n \n Review comment:\n   The C++ implementation doesn't appear to try to apply the nulls on a call to `field()`: https://github.com/apache/arrow/blob/master/cpp/src/arrow/array.cc#L612\r\n   \r\n   My vote would be to add a new method to Struct where the developer can choose to select a field with the nulls applied and leave the existing `Field` method as is.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-11-02T15:57:06.123+0000",
                    "updated": "2019-11-02T15:57:06.123+0000",
                    "started": "2019-11-02T15:57:06.123+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "337712",
                    "issueId": "13262013"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13262013/worklog/340327",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on issue #5642: ARROW-6868: [Go] Fix slicing struct arrays\nURL: https://github.com/apache/arrow/pull/5642#issuecomment-551369099\n \n \n   @stuartcarnie @alexandreyc ping\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-11-08T03:28:39.208+0000",
                    "updated": "2019-11-08T03:28:39.208+0000",
                    "started": "2019-11-08T03:28:39.207+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "340327",
                    "issueId": "13262013"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13262013/worklog/344668",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nealrichardson commented on issue #5642: ARROW-6868: [Go] Fix slicing struct arrays\nURL: https://github.com/apache/arrow/pull/5642#issuecomment-554571922\n \n \n   Merging since this has been sitting here approved for a while. Can open a followup issue if anyone finds anything objectionable.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-11-15T23:42:30.442+0000",
                    "updated": "2019-11-15T23:42:30.442+0000",
                    "started": "2019-11-15T23:42:30.442+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "344668",
                    "issueId": "13262013"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13262013/worklog/344670",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nealrichardson commented on pull request #5642: ARROW-6868: [Go] Fix slicing struct arrays\nURL: https://github.com/apache/arrow/pull/5642\n \n \n   \n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-11-15T23:44:35.106+0000",
                    "updated": "2019-11-15T23:44:35.106+0000",
                    "started": "2019-11-15T23:44:35.105+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "344670",
                    "issueId": "13262013"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
            "id": "1",
            "description": "A problem which impairs or prevents the functions of the product.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
            "name": "Bug",
            "subtask": false,
            "avatarId": 21133
        },
        "timespent": 12000,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@6cd5f272[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@6dbf6770[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@791ec941[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@6f8cb5f5[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@3dbb9bda[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@5895bd95[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@57ce2307[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@5d671716[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@3c63222b[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@49ef5927[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@6f1f9d06[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@a25e854[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 12000,
        "customfield_12312520": null,
        "customfield_12312521": "Fri Nov 15 23:44:35 UTC 2019",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2019-11-15T23:44:35.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-6868/watchers",
            "watchCount": 1,
            "isWatching": false
        },
        "created": "2019-10-13T17:09:39.000+0000",
        "updated": "2019-11-15T23:44:35.000+0000",
        "timeoriginalestimate": null,
        "description": "Calls to {{array.NewSlice()}} slice the data for all the types implemented except for Struct type.\r\n\r\n\u00a0\r\n\r\nThe fields of the resulting array don't appear to respect the new length and offset.",
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "3h 20m",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 12000
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[Go] slicing Struct array does not slice child fields",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13262013/comment/16950422",
                    "id": "16950422",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=nickpoorman",
                        "name": "nickpoorman",
                        "key": "nickpoorman",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=nickpoorman&avatarId=36441",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=nickpoorman&avatarId=36441",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=nickpoorman&avatarId=36441",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=nickpoorman&avatarId=36441"
                        },
                        "displayName": "Nick Poorman",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "I suspect this is why you also get the entire struct array repeatedly printed for each element of a list when you call {{arr.String()}}\u00a0when {{arr}} is an\u00a0{{arrow.ListOf(arrow.StructOf(fields...)).}}",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=nickpoorman",
                        "name": "nickpoorman",
                        "key": "nickpoorman",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=nickpoorman&avatarId=36441",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=nickpoorman&avatarId=36441",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=nickpoorman&avatarId=36441",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=nickpoorman&avatarId=36441"
                        },
                        "displayName": "Nick Poorman",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2019-10-13T19:10:27.357+0000",
                    "updated": "2019-10-13T19:10:27.357+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13262013/comment/16950423",
                    "id": "16950423",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=nickpoorman",
                        "name": "nickpoorman",
                        "key": "nickpoorman",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=nickpoorman&avatarId=36441",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=nickpoorman&avatarId=36441",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=nickpoorman&avatarId=36441",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=nickpoorman&avatarId=36441"
                        },
                        "displayName": "Nick Poorman",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "I've added a failing test case here:\u00a0[https://github.com/nickpoorman/arrow/commit/bf42e02869b3cce18508eb0353d585c293d6e365#diff-21591177cfd97e46d7859d1efbe3bfedR307]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=nickpoorman",
                        "name": "nickpoorman",
                        "key": "nickpoorman",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=nickpoorman&avatarId=36441",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=nickpoorman&avatarId=36441",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=nickpoorman&avatarId=36441",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=nickpoorman&avatarId=36441"
                        },
                        "displayName": "Nick Poorman",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2019-10-13T19:21:29.529+0000",
                    "updated": "2019-10-13T19:21:29.529+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13262013/comment/16975479",
                    "id": "16975479",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=npr",
                        "name": "npr",
                        "key": "npr",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
                        },
                        "displayName": "Neal Richardson",
                        "active": true,
                        "timeZone": "America/Los_Angeles"
                    },
                    "body": "Issue resolved by pull request 5642\n[https://github.com/apache/arrow/pull/5642]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=npr",
                        "name": "npr",
                        "key": "npr",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
                        },
                        "displayName": "Neal Richardson",
                        "active": true,
                        "timeZone": "America/Los_Angeles"
                    },
                    "created": "2019-11-15T23:44:35.708+0000",
                    "updated": "2019-11-15T23:44:35.708+0000"
                }
            ],
            "maxResults": 3,
            "total": 3,
            "startAt": 0
        },
        "customfield_12311820": "0|z07jn4:",
        "customfield_12314139": null
    }
}