{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13155463",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13155463",
    "key": "ARROW-2516",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12342562",
                "id": "12342562",
                "description": "",
                "name": "0.10.0",
                "archived": false,
                "released": true,
                "releaseDate": "2018-08-06"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "name": "Major",
            "id": "3"
        },
        "labels": [
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
            "name": "apitrou",
            "key": "pitrou",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
            },
            "displayName": "Antoine Pitrou",
            "active": true,
            "timeZone": "Europe/Paris"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12333001",
                "id": "12333001",
                "name": "Packaging"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=paddyhoran",
            "name": "paddyhoran",
            "key": "paddyhoran",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
            },
            "displayName": "Paddy Horan",
            "active": true,
            "timeZone": "America/New_York"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=paddyhoran",
            "name": "paddyhoran",
            "key": "paddyhoran",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
            },
            "displayName": "Paddy Horan",
            "active": true,
            "timeZone": "America/New_York"
        },
        "aggregateprogress": {
            "progress": 3600,
            "total": 3600,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 3600,
            "total": 3600,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-2516/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 6,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13155463/worklog/97845",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou opened a new pull request #1989: ARROW-2516: [CI] Filter changes in AppVeyor builds\nURL: https://github.com/apache/arrow/pull/1989\n \n \n   In AppVeyor PR builds, jobs can be exited early if they test something that the PR doesn't affect.\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-05-03T10:39:11.339+0000",
                    "updated": "2018-05-03T10:39:11.339+0000",
                    "started": "2018-05-03T10:39:11.339+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "97845",
                    "issueId": "13155463"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13155463/worklog/97846",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on issue #1989: ARROW-2516: [CI] Filter changes in AppVeyor builds\nURL: https://github.com/apache/arrow/pull/1989#issuecomment-386255057\n \n \n   Side note: currently, `ci/detect-changes.py` rebuilds everything if the C++ codebase is changed. But do we want to rebuild languages which are reimplementations rather than bindings (e.g. Rust or Java, AFAICT)?\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-05-03T10:41:57.762+0000",
                    "updated": "2018-05-03T10:41:57.762+0000",
                    "started": "2018-05-03T10:41:57.762+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "97846",
                    "issueId": "13155463"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13155463/worklog/97847",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on issue #1989: ARROW-2516: [CI] Filter changes in AppVeyor builds\nURL: https://github.com/apache/arrow/pull/1989#issuecomment-386256753\n \n \n   Example build with only Rust changes: https://ci.appveyor.com/project/pitrou/arrow/build/1.0.402\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-05-03T10:50:24.787+0000",
                    "updated": "2018-05-03T10:50:24.787+0000",
                    "started": "2018-05-03T10:50:24.786+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "97847",
                    "issueId": "13155463"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13155463/worklog/97869",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "xhochy commented on issue #1989: ARROW-2516: [CI] Filter changes in AppVeyor builds\nURL: https://github.com/apache/arrow/pull/1989#issuecomment-386273407\n \n \n   > Side note: currently, ci/detect-changes.py rebuilds everything if the C++ codebase is changed. But do we want to rebuild languages which are reimplementations rather than bindings (e.g. Rust or Java, AFAICT)?\r\n   \r\n   If only C++ is changed, we should only rebuild C++/Python/Glib and not the others.\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-05-03T12:07:44.554+0000",
                    "updated": "2018-05-03T12:07:44.554+0000",
                    "started": "2018-05-03T12:07:44.554+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "97869",
                    "issueId": "13155463"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13155463/worklog/97882",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on issue #1989: ARROW-2516: [CI] Filter changes in AppVeyor builds\nURL: https://github.com/apache/arrow/pull/1989#issuecomment-386290022\n \n \n   > If only C++ is changed, we should only rebuild C++/Python/Glib and not the others.\r\n   \r\n   Done.\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-05-03T13:10:42.838+0000",
                    "updated": "2018-05-03T13:10:42.838+0000",
                    "started": "2018-05-03T13:10:42.838+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "97882",
                    "issueId": "13155463"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13155463/worklog/97912",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou closed pull request #1989: ARROW-2516: [CI] Filter changes in AppVeyor builds\nURL: https://github.com/apache/arrow/pull/1989\n \n \n   \n\nThis is a PR merged from a forked repository.\nAs GitHub hides the original diff on merge, it is displayed below for\nthe sake of provenance:\n\nAs this is a foreign pull request (from a fork), the diff is supplied\nbelow (as it won't show otherwise due to GitHub magic):\n\ndiff --git a/.travis.yml b/.travis.yml\nindex 736f4fe04..e07811a25 100644\n--- a/.travis.yml\n+++ b/.travis.yml\n@@ -33,7 +33,7 @@ before_install:\n         sudo add-apt-repository -y ppa:ubuntu-toolchain-r/test\n         sudo apt-get update -qq\n       fi\n-  - eval `python $TRAVIS_BUILD_DIR/ci/travis_detect_changes.py`\n+  - eval `python $TRAVIS_BUILD_DIR/ci/detect-changes.py`\n \n \n matrix:\ndiff --git a/appveyor.yml b/appveyor.yml\nindex 4d83ddf77..d62baf757 100644\n--- a/appveyor.yml\n+++ b/appveyor.yml\n@@ -37,46 +37,34 @@ matrix:\n environment:\n   global:\n     USE_CLCACHE: true\n+    PYTHON: \"3.6\"\n+    ARCH: \"64\"\n \n   matrix:\n     # NOTE: clcache seems to work best with Ninja and worst with msbuild\n     # (as generated by cmake)\n     - JOB: \"Build\"\n       GENERATOR: Ninja\n-      PYTHON: \"3.6\"\n-      ARCH: \"64\"\n       CONFIGURATION: \"Release\"\n       APPVEYOR_BUILD_WORKER_IMAGE: Visual Studio 2017\n       BOOST_ROOT: C:\\Libraries\\boost_1_64_0\n     - JOB: \"Build_Debug\"\n       GENERATOR: Ninja\n-      PYTHON: \"3.6\"\n-      ARCH: \"64\"\n       CONFIGURATION: \"Debug\"\n     - JOB: \"Build\"\n       GENERATOR: Ninja\n-      PYTHON: \"3.6\"\n-      ARCH: \"64\"\n       CONFIGURATION: \"Release\"\n     - JOB: \"Static_Crt_Build\"\n       GENERATOR: Ninja\n-      PYTHON: \"3.6\"\n-      ARCH: \"64\"\n     - JOB: \"Toolchain\"\n       GENERATOR: Visual Studio 14 2015 Win64\n-      PYTHON: \"3.6\"\n-      ARCH: \"64\"\n       CONFIGURATION: \"Release\"\n     - JOB: \"Cmake_Script_Tests\"\n       GENERATOR: NMake Makefiles\n-      PYTHON: \"3.6\"\n-      ARCH: \"64\"\n       CONFIGURATION: \"Release\"\n       BUILD_SCRIPT: \"CMake_Build_Script\"\n     - JOB: \"Build\"\n       GENERATOR: NMake Makefiles\n-      PYTHON: \"3.6\"\n-      ARCH: \"64\"\n       CONFIGURATION: \"Release\"\n     - JOB: \"Rust_Stable\"\n       RUST_VERSION: stable\n@@ -89,6 +77,13 @@ environment:\n   APPVEYOR_SAVE_CACHE_ON_ERROR: true\n \n install:\n+  - python ci\\detect-changes.py > generated_changes.bat\n+  # Populate ARROW_CI_* variables\n+  - call generated_changes.bat\n+  # Decide to exit if current job doesn't exercise affected topics\n+  - call ci\\appveyor-filter-changes.bat\n+\n+before_build:\n   - call ci\\appveyor-install.bat\n \n build_script:\ndiff --git a/ci/appveyor-setup.bat b/ci/appveyor-cpp-setup.bat\nsimilarity index 100%\nrename from ci/appveyor-setup.bat\nrename to ci/appveyor-cpp-setup.bat\ndiff --git a/ci/appveyor-filter-changes.bat b/ci/appveyor-filter-changes.bat\nnew file mode 100644\nindex 000000000..55428316d\n--- /dev/null\n+++ b/ci/appveyor-filter-changes.bat\n@@ -0,0 +1,32 @@\n+@rem Licensed to the Apache Software Foundation (ASF) under one\n+@rem or more contributor license agreements.  See the NOTICE file\n+@rem distributed with this work for additional information\n+@rem regarding copyright ownership.  The ASF licenses this file\n+@rem to you under the Apache License, Version 2.0 (the\n+@rem \"License\"); you may not use this file except in compliance\n+@rem with the License.  You may obtain a copy of the License at\n+@rem\n+@rem   http://www.apache.org/licenses/LICENSE-2.0\n+@rem\n+@rem Unless required by applicable law or agreed to in writing,\n+@rem software distributed under the License is distributed on an\n+@rem \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+@rem KIND, either express or implied.  See the License for the\n+@rem specific language governing permissions and limitations\n+@rem under the License.\n+\n+if \"%JOB%\" == \"Rust_Stable\" (\n+    if \"%ARROW_CI_RUST_AFFECTED%\" == \"0\" (\n+        echo ===\n+        echo === No Rust changes, exiting job\n+        echo ===\n+        appveyor exit\n+    )\n+) else (\n+    if \"%ARROW_CI_PYTHON_AFFECTED%\" == \"0\" (\n+        echo ===\n+        echo === No C++ or Python changes, exiting job\n+        echo ===\n+        appveyor exit\n+    )\n+)\ndiff --git a/ci/appveyor-install.bat b/ci/appveyor-install.bat\nindex 6bfc62540..f514e78ec 100644\n--- a/ci/appveyor-install.bat\n+++ b/ci/appveyor-install.bat\n@@ -25,5 +25,5 @@ if \"%JOB%\" == \"Rust_Stable\" (\n     cargo -V\n ) else (\n     set \"PATH=C:\\Miniconda36-x64;C:\\Miniconda36-x64\\Scripts;C:\\Miniconda36-x64\\Library\\bin;%PATH%\"\n-    call ci\\appveyor-setup.bat\n+    call ci\\appveyor-cpp-setup.bat\n )\ndiff --git a/ci/travis_detect_changes.py b/ci/detect-changes.py\nsimilarity index 74%\nrename from ci/travis_detect_changes.py\nrename to ci/detect-changes.py\nindex 5295d554b..fce2ba5d9 100644\n--- a/ci/travis_detect_changes.py\n+++ b/ci/detect-changes.py\n@@ -95,6 +95,21 @@ def list_travis_affected_files():\n         return list_affected_files(commit_range)\n \n \n+def list_appveyor_affected_files():\n+    \"\"\"\n+    Return a list of files affected in the current AppVeyor build.\n+    This only works for PR builds.\n+    \"\"\"\n+    # Re-fetch PR base branch (e.g. origin/master), pointing FETCH_HEAD to it\n+    run_cmd([\"git\", \"fetch\", \"-q\", \"origin\",\n+             \"+refs/heads/{0}\".format(os.environ['APPVEYOR_REPO_BRANCH'])])\n+    # Compute base changeset between FETCH_HEAD (PR base) and HEAD (PR head)\n+    merge_base = run_cmd([\"git\", \"merge-base\",\n+                          \"HEAD\", \"FETCH_HEAD\"]).decode().strip()\n+    # Compute changes files between base changeset and HEAD\n+    return list_affected_files(\"{0}..HEAD\".format(merge_base))\n+\n+\n def get_affected_topics(affected_files):\n     \"\"\"\n     Return a dict of topics affected by the given files.\n@@ -120,10 +135,9 @@ def get_affected_topics(affected_files):\n                 affected[k] = True\n             break\n         elif p in ('cpp', 'format'):\n-            # All languages are potentially affected\n-            for k in LANGUAGE_TOPICS:\n+            # Test C++ and bindings to the C++ library\n+            for k in ('cpp', 'python', 'c_glib', 'integration'):\n                 affected[k] = True\n-            affected['integration'] = True\n         elif p in ('java', 'js'):\n             affected[p] = True\n             affected['integration'] = True\n@@ -146,6 +160,14 @@ def get_unix_shell_eval(env):\n                       for k, v in env.items()))\n \n \n+def get_windows_shell_eval(env):\n+    \"\"\"\n+    Return a shell-evalable string to setup some environment variables.\n+    \"\"\"\n+    return \"\\n\".join(('set \"{0}={1}\"'.format(k, v)\n+                      for k, v in env.items()))\n+\n+\n def run_from_travis():\n     if (os.environ['TRAVIS_REPO_SLUG'] == 'apache/arrow' and\n         os.environ['TRAVIS_BRANCH'] == 'master' and\n@@ -172,12 +194,36 @@ def run_from_travis():\n     return get_unix_shell_eval(make_env_for_topics(affected))\n \n \n+def run_from_appveyor():\n+    if not os.environ.get('APPVEYOR_PULL_REQUEST_HEAD_COMMIT'):\n+        # Not a PR build, test everything\n+        affected = dict.fromkeys(ALL_TOPICS, True)\n+    else:\n+        affected_files = list_appveyor_affected_files()\n+        perr(\"Affected files:\", affected_files)\n+        affected = get_affected_topics(affected_files)\n+        assert set(affected) <= set(ALL_TOPICS), affected\n+\n+    perr(\"Affected topics:\")\n+    perr(pprint.pformat(affected))\n+    return get_windows_shell_eval(make_env_for_topics(affected))\n+\n+\n if __name__ == \"__main__\":\n     # This script should have its output evaluated by a shell,\n-    # e.g. \"eval `python ci/travis_detect_changes.py`\"\n-    try:\n-        print(run_from_travis())\n-    except:\n-        # Make sure the enclosing eval will return an error\n-        print(\"exit 1\")\n-        raise\n+    # e.g. \"eval `python ci/detect-changes.py`\"\n+    if os.environ.get('TRAVIS'):\n+        try:\n+            print(run_from_travis())\n+        except:\n+            # Make sure the enclosing eval will return an error\n+            print(\"exit 1\")\n+            raise\n+    elif os.environ.get('APPVEYOR'):\n+        try:\n+            print(run_from_appveyor())\n+        except:\n+            print(\"exit 1\")\n+            raise\n+    else:\n+        sys.exit(\"Script must be run under Travis-CI or AppVeyor\")\n\n\n \n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-05-03T14:47:06.860+0000",
                    "updated": "2018-05-03T14:47:06.860+0000",
                    "started": "2018-05-03T14:47:06.860+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "97912",
                    "issueId": "13155463"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
            "id": "4",
            "description": "An improvement or enhancement to an existing feature or task.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
            "name": "Improvement",
            "subtask": false,
            "avatarId": 21140
        },
        "timespent": 3600,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@41e0f023[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@55ed35cb[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@1b379c99[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@2748a159[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@5fbc54a9[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@20626a0[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@25f2b12d[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@47528ea3[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@7af683fc[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@49768924[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@793d22fe[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@2ac99cec[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 3600,
        "customfield_12312520": null,
        "customfield_12312521": "Thu May 03 14:47:05 UTC 2018",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2018-05-03T14:47:05.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-2516/watchers",
            "watchCount": 2,
            "isWatching": false
        },
        "created": "2018-04-26T16:53:26.000+0000",
        "updated": "2018-07-27T15:24:42.000+0000",
        "timeoriginalestimate": null,
        "description": null,
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "1h",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 3600
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "AppVeyor Build Matrix should be specific to the changes made in a PR",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13155463/comment/16459998",
                    "id": "16459998",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "body": "We can reuse the following logic from CPython:\r\nhttps://github.com/python/cpython/blob/master/.github/appveyor.yml#L11-L26",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "created": "2018-05-01T18:37:49.059+0000",
                    "updated": "2018-05-01T18:37:49.059+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13155463/comment/16462544",
                    "id": "16462544",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "body": "Issue resolved by pull request 1989\n[https://github.com/apache/arrow/pull/1989]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "created": "2018-05-03T14:47:05.656+0000",
                    "updated": "2018-05-03T14:47:05.656+0000"
                }
            ],
            "maxResults": 2,
            "total": 2,
            "startAt": 0
        },
        "customfield_12311820": "0|i3t2f3:",
        "customfield_12314139": null
    }
}