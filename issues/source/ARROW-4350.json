{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13211444",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13211444",
    "key": "ARROW-4350",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12344925",
                "id": "12344925",
                "description": "",
                "name": "0.14.0",
                "archived": false,
                "released": true,
                "releaseDate": "2019-07-04"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "name": "Major",
            "id": "3"
        },
        "labels": [
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12344316",
                "id": "12344316",
                "name": "0.11.1",
                "archived": false,
                "released": true,
                "releaseDate": "2018-10-23"
            },
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12343858",
                "id": "12343858",
                "description": "",
                "name": "0.12.0",
                "archived": false,
                "released": true,
                "releaseDate": "2019-01-20"
            }
        ],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [
            {
                "id": "12563554",
                "self": "https://issues.apache.org/jira/rest/api/2/issueLink/12563554",
                "type": {
                    "id": "10030",
                    "name": "Reference",
                    "inward": "is related to",
                    "outward": "relates to",
                    "self": "https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"
                },
                "outwardIssue": {
                    "id": "13240276",
                    "key": "ARROW-5645",
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13240276",
                    "fields": {
                        "summary": "[Python] Support inferring nested ndarray with ndim > 1",
                        "status": {
                            "self": "https://issues.apache.org/jira/rest/api/2/status/1",
                            "description": "The issue is open and ready for the assignee to start work on it.",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/open.png",
                            "name": "Open",
                            "id": "1",
                            "statusCategory": {
                                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2",
                                "id": 2,
                                "key": "new",
                                "colorName": "blue-gray",
                                "name": "To Do"
                            }
                        },
                        "priority": {
                            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
                            "name": "Major",
                            "id": "3"
                        },
                        "issuetype": {
                            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
                            "id": "4",
                            "description": "An improvement or enhancement to an existing feature or task.",
                            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
                            "name": "Improvement",
                            "subtask": false,
                            "avatarId": 21140
                        }
                    }
                }
            }
        ],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
            "name": "wesm",
            "key": "wesmckinn",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
            },
            "displayName": "Wes McKinney",
            "active": true,
            "timeZone": "America/New_York"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12328936",
                "id": "12328936",
                "name": "Python"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=yupbank",
            "name": "yupbank",
            "key": "yupbank",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
            },
            "displayName": "yu peng",
            "active": true,
            "timeZone": "America/Montreal"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=yupbank",
            "name": "yupbank",
            "key": "yupbank",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
            },
            "displayName": "yu peng",
            "active": true,
            "timeZone": "America/Montreal"
        },
        "aggregateprogress": {
            "progress": 6600,
            "total": 6600,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 6600,
            "total": 6600,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-4350/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 11,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13211444/worklog/262595",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on pull request #4609: ARROW-4350: [Python] Fix conversion from Python to Arrow with nested lists and NumPy dtype=object items\nURL: https://github.com/apache/arrow/pull/4609\n \n \n   NumPy object array values weren't being iterated over in the case where the value type is `list<T>` instead of some primitive type like `int64`. \r\n   \r\n   This code path appears to have never been properly tested, so when a user hit it, it didn't work.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-06-18T20:21:00.984+0000",
                    "updated": "2019-06-18T20:21:00.984+0000",
                    "started": "2019-06-18T20:21:00.983+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "262595",
                    "issueId": "13211444"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13211444/worklog/263019",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jorisvandenbossche commented on pull request #4609: ARROW-4350: [Python] Fix conversion from Python to Arrow with nested lists and NumPy dtype=object items\nURL: https://github.com/apache/arrow/pull/4609#discussion_r295274480\n \n \n\n ##########\n File path: python/pyarrow/array.pxi\n ##########\n @@ -218,6 +218,29 @@ def asarray(values, type=None):\n         return array(values, type=type)\n \n \n+def infer_type(value, from_pandas=False):\n \n Review comment:\n   minor nit, but maybe `value` -> `values`. To be consistent with `asarray` above, and to be clear we expect an array-like of values, not a single value (scalar).\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-06-19T12:48:21.095+0000",
                    "updated": "2019-06-19T12:48:21.095+0000",
                    "started": "2019-06-19T12:48:21.094+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "263019",
                    "issueId": "13211444"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13211444/worklog/263020",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jorisvandenbossche commented on pull request #4609: ARROW-4350: [Python] Fix conversion from Python to Arrow with nested lists and NumPy dtype=object items\nURL: https://github.com/apache/arrow/pull/4609#discussion_r295277398\n \n \n\n ##########\n File path: python/pyarrow/tests/test_convert_builtin.py\n ##########\n @@ -488,6 +488,43 @@ def test_ndarray_nested_numpy_double(from_pandas, inner_seq):\n                                 [[1., 2.], [1., 2., 3.], [np.nan], None])\n \n \n+def test_nested_ndarray_in_object_array():\n+    # ARROW-4350\n+    arr = np.empty(2, dtype=object)\n+    arr[:] = [np.array([1, 2]), np.array([2, 3])]\n+\n+    arr2 = np.empty(2, dtype=object)\n+    arr2[0] = [3, 4]\n+    arr2[1] = [5, 6]\n+\n+    expected_type = pa.list_(pa.list_(pa.int64()))\n+    assert pa.infer_type([arr]) == expected_type\n+\n+    result = pa.array([arr, arr2])\n+    expected = pa.array([[[1, 2], [2, 3]], [[3, 4], [5, 6]]],\n+                        type=expected_type)\n+\n+    assert result.equals(expected)\n+\n \n Review comment:\n   It might be worth adding explicitly the case of length-1 nested arrays, as this case changed compared to released version / master (it was doing something wrong before, see my [comment on the issue](https://issues.apache.org/jira/browse/ARROW-4350?focusedCommentId=16858438&page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-16858438))\r\n   \r\n   This can look like:\r\n   \r\n   ```\r\n   # test case for len-1 arrays to ensure they are interpreted as sublists and not scalars\r\n   arr = np.empty(2, dtype=object)\r\n   arr[:] = [np.array([1]), np.array([2])]\r\n   result = pa.array([arr, arr])\r\n   assert result.to_pylist() == [[[1], [2]], [[1], [2]]]\r\n   ```\r\n   \r\n   I tested that this branch now gives the correct result, on master you would get:\r\n   \r\n   ```\r\n   In [74]: result.to_pylist()                                                                                                                                                                                        \r\n   Out[74]: [[[1, 2]], [[1, 2]]]\r\n   ```\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-06-19T12:48:21.147+0000",
                    "updated": "2019-06-19T12:48:21.147+0000",
                    "started": "2019-06-19T12:48:21.147+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "263020",
                    "issueId": "13211444"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13211444/worklog/263039",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on pull request #4609: ARROW-4350: [Python] Fix conversion from Python to Arrow with nested lists and NumPy dtype=object items\nURL: https://github.com/apache/arrow/pull/4609#discussion_r295291788\n \n \n\n ##########\n File path: cpp/src/arrow/python/helpers.cc\n ##########\n @@ -373,6 +374,8 @@ Status IntegerScalarToFloat32Safe(PyObject* obj, float* out) {\n   return Status::OK();\n }\n \n+void DebugPrint(PyObject* obj) { std::cerr << PyObject_StdStringRepr(obj) << std::endl; }\n \n Review comment:\n   For the record, I would generally use [PySys_FormatStderr](https://docs.python.org/3/c-api/sys.html#c.PySys_FormatStderr).\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-06-19T13:23:29.623+0000",
                    "updated": "2019-06-19T13:23:29.623+0000",
                    "started": "2019-06-19T13:23:29.622+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "263039",
                    "issueId": "13211444"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13211444/worklog/263040",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on pull request #4609: ARROW-4350: [Python] Fix conversion from Python to Arrow with nested lists and NumPy dtype=object items\nURL: https://github.com/apache/arrow/pull/4609#discussion_r295292955\n \n \n\n ##########\n File path: python/pyarrow/tests/test_convert_builtin.py\n ##########\n @@ -488,6 +488,43 @@ def test_ndarray_nested_numpy_double(from_pandas, inner_seq):\n                                 [[1., 2.], [1., 2., 3.], [np.nan], None])\n \n \n+def test_nested_ndarray_in_object_array():\n+    # ARROW-4350\n+    arr = np.empty(2, dtype=object)\n+    arr[:] = [np.array([1, 2]), np.array([2, 3])]\n \n Review comment:\n   Perhaps you should type this explicitly, e.g. `np.int64([1, 2])`. There is no guarantee that Numpy would choose `int64` on all platforms.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-06-19T13:23:29.742+0000",
                    "updated": "2019-06-19T13:23:29.742+0000",
                    "started": "2019-06-19T13:23:29.742+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "263040",
                    "issueId": "13211444"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13211444/worklog/263043",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on pull request #4609: ARROW-4350: [Python] Fix conversion from Python to Arrow with nested lists and NumPy dtype=object items\nURL: https://github.com/apache/arrow/pull/4609#discussion_r295296214\n \n \n\n ##########\n File path: python/pyarrow/tests/test_convert_builtin.py\n ##########\n @@ -488,6 +488,43 @@ def test_ndarray_nested_numpy_double(from_pandas, inner_seq):\n                                 [[1., 2.], [1., 2., 3.], [np.nan], None])\n \n \n+def test_nested_ndarray_in_object_array():\n+    # ARROW-4350\n+    arr = np.empty(2, dtype=object)\n+    arr[:] = [np.array([1, 2]), np.array([2, 3])]\n \n Review comment:\n   Will fix. Windows indeed chooses int32\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-06-19T13:28:01.088+0000",
                    "updated": "2019-06-19T13:28:01.088+0000",
                    "started": "2019-06-19T13:28:01.087+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "263043",
                    "issueId": "13211444"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13211444/worklog/263046",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on pull request #4609: ARROW-4350: [Python] Fix conversion from Python to Arrow with nested lists and NumPy dtype=object items\nURL: https://github.com/apache/arrow/pull/4609#discussion_r295300814\n \n \n\n ##########\n File path: python/pyarrow/array.pxi\n ##########\n @@ -218,6 +218,29 @@ def asarray(values, type=None):\n         return array(values, type=type)\n \n \n+def infer_type(value, from_pandas=False):\n \n Review comment:\n   done\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-06-19T13:37:07.131+0000",
                    "updated": "2019-06-19T13:37:07.131+0000",
                    "started": "2019-06-19T13:37:07.130+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "263046",
                    "issueId": "13211444"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13211444/worklog/263047",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on pull request #4609: ARROW-4350: [Python] Fix conversion from Python to Arrow with nested lists and NumPy dtype=object items\nURL: https://github.com/apache/arrow/pull/4609#discussion_r295302662\n \n \n\n ##########\n File path: cpp/src/arrow/python/helpers.cc\n ##########\n @@ -373,6 +374,8 @@ Status IntegerScalarToFloat32Safe(PyObject* obj, float* out) {\n   return Status::OK();\n }\n \n+void DebugPrint(PyObject* obj) { std::cerr << PyObject_StdStringRepr(obj) << std::endl; }\n \n Review comment:\n   done\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-06-19T13:40:47.840+0000",
                    "updated": "2019-06-19T13:40:47.840+0000",
                    "started": "2019-06-19T13:40:47.839+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "263047",
                    "issueId": "13211444"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13211444/worklog/263049",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on pull request #4609: ARROW-4350: [Python] Fix conversion from Python to Arrow with nested lists and NumPy dtype=object items\nURL: https://github.com/apache/arrow/pull/4609#discussion_r295304941\n \n \n\n ##########\n File path: python/pyarrow/tests/test_convert_builtin.py\n ##########\n @@ -488,6 +488,43 @@ def test_ndarray_nested_numpy_double(from_pandas, inner_seq):\n                                 [[1., 2.], [1., 2., 3.], [np.nan], None])\n \n \n+def test_nested_ndarray_in_object_array():\n+    # ARROW-4350\n+    arr = np.empty(2, dtype=object)\n+    arr[:] = [np.array([1, 2]), np.array([2, 3])]\n+\n+    arr2 = np.empty(2, dtype=object)\n+    arr2[0] = [3, 4]\n+    arr2[1] = [5, 6]\n+\n+    expected_type = pa.list_(pa.list_(pa.int64()))\n+    assert pa.infer_type([arr]) == expected_type\n+\n+    result = pa.array([arr, arr2])\n+    expected = pa.array([[[1, 2], [2, 3]], [[3, 4], [5, 6]]],\n+                        type=expected_type)\n+\n+    assert result.equals(expected)\n+\n \n Review comment:\n   done\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-06-19T13:45:19.212+0000",
                    "updated": "2019-06-19T13:45:19.212+0000",
                    "started": "2019-06-19T13:45:19.212+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "263049",
                    "issueId": "13211444"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13211444/worklog/263050",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on issue #4609: ARROW-4350: [Python] Fix conversion from Python to Arrow with nested lists and NumPy dtype=object items\nURL: https://github.com/apache/arrow/pull/4609#issuecomment-503567230\n \n \n   OK, I think I've addressed everything\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-06-19T13:45:22.977+0000",
                    "updated": "2019-06-19T13:45:22.977+0000",
                    "started": "2019-06-19T13:45:22.976+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "263050",
                    "issueId": "13211444"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13211444/worklog/263182",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on pull request #4609: ARROW-4350: [Python] Fix conversion from Python to Arrow with nested lists and NumPy dtype=object items\nURL: https://github.com/apache/arrow/pull/4609\n \n \n   \n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-06-19T17:29:43.545+0000",
                    "updated": "2019-06-19T17:29:43.545+0000",
                    "started": "2019-06-19T17:29:43.544+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "263182",
                    "issueId": "13211444"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
            "id": "1",
            "description": "A problem which impairs or prevents the functions of the product.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
            "name": "Bug",
            "subtask": false,
            "avatarId": 21133
        },
        "timespent": 6600,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@3426616c[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@1f354220[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@195accea[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@2c4ba9a3[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@276e5987[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@3e1d0c08[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@71efaabd[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@980392[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@556fd067[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@3c4fb8e[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@ff20309[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@4f3605f6[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 6600,
        "customfield_12312520": null,
        "customfield_12312521": "Wed Jun 19 17:29:39 UTC 2019",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2019-06-19T17:29:39.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-4350/watchers",
            "watchCount": 4,
            "isWatching": false
        },
        "created": "2019-01-24T03:37:26.000+0000",
        "updated": "2019-06-19T17:29:43.000+0000",
        "timeoriginalestimate": null,
        "description": "Nested numpy arrays (as the scalar value) cannot be converted to a list-of-list type array:\r\n{code}\r\narr = np.empty(2, dtype=object)\r\narr[:] = [np.array([1, 2]), np.array([2, 3])]\r\n\r\npa.array([arr, arr])\r\n{code}\r\nresults in\r\n{code:java}\r\nArrowTypeError: only size-1 arrays can be converted to Python scalars\r\n{code}\r\nStarting from lists of lists works fine:\r\n{code}\r\nlists = [[1, 2], [2, 3]]\r\npa.array([lists, lists]).type\r\n{code}\r\n{code:none}\r\nListType(list<item: list<item: int64>>)\r\n{code}\r\nSpecifying the type explicitly as {{pa.array([arr, arr], type=pa.list_(pa.list_(pa.int64())))}} does not help.\r\n\r\nDue to this, a round-trip is not working, as the list of list type gives back an array of arrays in python:\r\n{code}\r\nIn [2]: lists = [[1, 2], [2, 3]] \r\n   ...: a = pa.array([lists, lists])                                                                                                                                                                                \r\n\r\nIn [3]: a.to_pandas()                                                                                                                                                                                               \r\nOut[3]: \r\narray([array([array([1, 2]), array([2, 3])], dtype=object),\r\n       array([array([1, 2]), array([2, 3])], dtype=object)], dtype=object)\r\n\r\nIn [4]: pa.array(a.to_pandas())                                                                                                                                                                                     \r\n---------------------------------------------------------------------------\r\nArrowTypeError                            Traceback (most recent call last)\r\n<ipython-input-4-9fee6dc9d0b8> in <module>\r\n----> 1 pa.array(a.to_pandas())\r\n\r\n~/scipy/repos/arrow/python/pyarrow/array.pxi in pyarrow.lib.array()\r\n\r\n~/scipy/repos/arrow/python/pyarrow/array.pxi in pyarrow.lib._ndarray_to_array()\r\n\r\n~/scipy/repos/arrow/python/pyarrow/error.pxi in pyarrow.lib.check_status()\r\n\r\nArrowTypeError: only size-1 arrays can be converted to Python scalars\r\n{code}\r\n----\r\nOrigingal report:\r\n{code:java}\r\nIn [19]: df = pd.DataFrame({'a': [[[1], [2]], [[2], [3]]], 'b': [1, 2]})\r\n\r\nIn [20]: df.iloc[0].to_dict()\r\nOut[20]: {'a': [[1], [2]], 'b': 1}\r\n\r\nIn [21]: pa.Table.from_pandas(df).to_pandas().iloc[0].to_dict()\r\nOut[21]: {'a': array([array([1]), array([2])], dtype=object), 'b': 1}\r\n\r\nIn [24]: np.array(df.iloc[0].to_dict()['a']).shape\r\nOut[24]: (2, 1)\r\n\r\nIn [25]: pa.Table.from_pandas(df).to_pandas().iloc[0].to_dict()['a'].shape\r\nOut[25]: (2,)\r\n{code}\r\nAdding extra array type is not functioning as expected.\u00a0\r\n\r\n\u00a0\r\n\r\nMore importantly, this would fail\r\n\r\n\u00a0\r\n{code:java}\r\nIn [108]: df = pd.DataFrame({'a': [[[1, 2],[2, 3]], [[1,2], [2, 3]]], 'b': [[1, 2],[2, 3]]})\r\n\r\nIn [109]: df\r\nOut[109]:\r\na b\r\n0 [[1, 2], [2, 3]] [1, 2]\r\n1 [[1, 2], [2, 3]] [2, 3]\r\n\r\nIn [110]: pa.Table.from_pandas(pa.Table.from_pandas(df).to_pandas())\r\n---------------------------------------------------------------------------\r\nArrowTypeError Traceback (most recent call last)\r\n<ipython-input-110-4a09836f807e> in <module>()\r\n----> 1 pa.Table.from_pandas(pa.Table.from_pandas(df).to_pandas())\r\n\r\n/Users/pengyu/.pyenv/virtualenvs/starscream/2.7.11/lib/python2.7/site-packages/pyarrow/table.pxi in pyarrow.lib.Table.from_pandas()\r\n1215 <pyarrow.lib.Table object at 0x7f05d1fb1b40>\r\n1216 \"\"\"\r\n-> 1217 names, arrays, metadata = pdcompat.dataframe_to_arrays(\r\n1218 df,\r\n1219 schema=schema,\r\n\r\n/Users/pengyu/.pyenv/virtualenvs/starscream/2.7.11/lib/python2.7/site-packages/pyarrow/pandas_compat.pyc in dataframe_to_arrays(df, schema, preserve_index, nthreads, columns, safe)\r\n379 arrays = [convert_column(c, t)\r\n380 for c, t in zip(columns_to_convert,\r\n--> 381 convert_types)]\r\n382 else:\r\n383 from concurrent import futures\r\n\r\n/Users/pengyu/.pyenv/virtualenvs/starscream/2.7.11/lib/python2.7/site-packages/pyarrow/pandas_compat.pyc in convert_column(col, ty)\r\n374 e.args += (\"Conversion failed for column {0!s} with type {1!s}\"\r\n375 .format(col.name, col.dtype),)\r\n--> 376 raise e\r\n377\r\n378 if nthreads == 1:\r\n\r\nArrowTypeError: ('only size-1 arrays can be converted to Python scalars', 'Conversion failed for column a with type object')\r\n\r\n{code}\r\n\u00a0",
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "1h 50m",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 6600
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[Python] dtype=object arrays cannot be converted to a list-of-list ListArray",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13211444/comment/16777625",
                    "id": "16777625",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "Here is a minimal reproduction of the issue\r\n\r\n{code}\r\nIn [38]: arr = np.empty(2, dtype=object)\r\n\r\nIn [39]: arr[0] = np.array([1, 2])\r\n\r\nIn [40]: arr[1] = np.array([2, 3])\r\n\r\nIn [41]: arr2 = np.empty(2, dtype=object)\r\n\r\nIn [42]: arr2[0] = arr\r\n\r\nIn [43]: arr2[1] = arr\r\n\r\nIn [45]: pa.array(arr2)\r\n---------------------------------------------------------------------------\r\nArrowTypeError                            Traceback (most recent call last)\r\n<ipython-input-45-4dfe5219bac5> in <module>\r\n----> 1 pa.array(arr2)\r\n\r\n~/miniconda/envs/pyarrow-0.12.0-3.7/lib/python3.7/site-packages/pyarrow/array.pxi\r\nin pyarrow.lib.array()\r\n\r\n~/miniconda/envs/pyarrow-0.12.0-3.7/lib/python3.7/site-packages/pyarrow/array.pxi\r\nin pyarrow.lib._ndarray_to_array()\r\n\r\n~/miniconda/envs/pyarrow-0.12.0-3.7/lib/python3.7/site-packages/pyarrow/error.pxi\r\nin pyarrow.lib.check_status()\r\n\r\nArrowTypeError: only size-1 arrays can be converted to Python scalars\r\n{code}",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2019-02-26T06:23:46.920+0000",
                    "updated": "2019-02-26T06:23:46.920+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13211444/comment/16789952",
                    "id": "16789952",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=yupbank",
                        "name": "yupbank",
                        "key": "yupbank",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "yu peng",
                        "active": true,
                        "timeZone": "America/Montreal"
                    },
                    "body": "{code:java}\r\nIn [1]: import numpy as np \r\nIn [2]: import pyarrow as pa \r\nIn [3]: arr = np.empty(2, dtype=object) \r\nIn [4]: arr[0] = np.array([1, 2]) \r\nIn [5]: arr[1] = np.array([2, 3]) \r\nIn [6]: pa.array(arr).to_numpy() \r\n--------------------------------------------------------------------------- NotImplementedError Traceback (most recent call last) \r\n<ipython-input-6-4940e4471348> in <module>() \r\n----> 1 pa.array(arr).to_numpy() /Users/pengyu/.pyenv/virtualenvs/starscream/2.7.11/lib/python2.7/site-packages/pyarrow/array.pxi in pyarrow.lib.Array.to_numpy() \r\n694 'for arrays without nulls.') \r\n695 if not is_primitive(self.type.id) or self.type.id == _Type_BOOL: \r\n--> 696 raise NotImplementedError('NumPy array view is only supported ' \r\n697 'for primitive types.') \r\n698 buflist = self.buffers() \r\nNotImplementedError: NumPy array view is only supported for primitive types.\r\n{code}\r\nI'm not sure whether we want to support `dtype=np.object`, since we can't even convert them back to numpy array",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=yupbank",
                        "name": "yupbank",
                        "key": "yupbank",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "yu peng",
                        "active": true,
                        "timeZone": "America/Montreal"
                    },
                    "created": "2019-03-11T20:48:39.499+0000",
                    "updated": "2019-03-11T20:50:49.121+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13211444/comment/16793155",
                    "id": "16793155",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "Please feel free to submit a patch for 0.13. I'm not sure if anyone else will have time for this over the next several days",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2019-03-14T23:16:42.637+0000",
                    "updated": "2019-03-14T23:16:42.637+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13211444/comment/16852577",
                    "id": "16852577",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "[~jorisvandenbossche] could you take a look and maybe clarify the issue title etc.?",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2019-05-31T02:04:40.909+0000",
                    "updated": "2019-05-31T02:04:40.909+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13211444/comment/16858438",
                    "id": "16858438",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=jorisvandenbossche",
                        "name": "jorisvandenbossche",
                        "key": "jorisvandenbossche",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Joris Van den Bossche",
                        "active": true,
                        "timeZone": "Europe/Brussels"
                    },
                    "body": "Updated the title and top post with additional explanation.\r\n\r\nThe main problem of this limitation is that a roundtrip is not possible (ListArray with nested lists result in arrays-of-arrays when converting to pandas, but arrays-of-arrays cannot be converted back to a nested ListArray.\r\n\r\nFor the subarrays of length 1 (the first example of the original report) \"seems\" to work, but actually gives a wrong result on round-trip:\r\n\r\n{code:python}\r\nIn [5]: arr = [[1], [2]] \r\n   ...: a = pa.array([arr, arr])                                                                                                                                                                                    \r\n\r\nIn [6]: a.to_pandas()                                                                                                                                                                                               \r\nOut[6]: \r\narray([array([array([1]), array([2])], dtype=object),\r\n       array([array([1]), array([2])], dtype=object)], dtype=object)\r\n\r\nIn [7]: a.to_pylist()                                                                                                                                                                                               \r\nOut[7]: [[[1], [2]], [[1], [2]]]\r\n\r\nIn [8]: pa.array(a.to_pandas())                                                                                                                                                                                     \r\nOut[8]: \r\n<pyarrow.lib.ListArray object at 0x7feaee6be098>\r\n[\r\n  [\r\n    [\r\n      1,\r\n      2\r\n    ]\r\n  ],\r\n  [\r\n    [\r\n      1,\r\n      2\r\n    ]\r\n  ]\r\n]\r\n\r\nIn [9]: pa.array(a.to_pylist())                                                                                                                                                                                     \r\nOut[9]: \r\n<pyarrow.lib.ListArray object at 0x7feaeee708b8>\r\n[\r\n  [\r\n    [\r\n      1\r\n    ],\r\n    [\r\n      2\r\n    ]\r\n  ],\r\n  [\r\n    [\r\n      1\r\n    ],\r\n    [\r\n      2\r\n    ]\r\n  ]\r\n]\r\n{code}\r\n\r\nSo both give the same type, but the array-of-array incorrectly gives a \"list of 1 list of len 2\" as scalar instead of \"list of 2 lists of len 1\" as scalar.",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=jorisvandenbossche",
                        "name": "jorisvandenbossche",
                        "key": "jorisvandenbossche",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Joris Van den Bossche",
                        "active": true,
                        "timeZone": "Europe/Brussels"
                    },
                    "created": "2019-06-07T09:32:48.373+0000",
                    "updated": "2019-06-07T09:32:48.373+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13211444/comment/16866007",
                    "id": "16866007",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "I started looking at this",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2019-06-17T21:42:00.702+0000",
                    "updated": "2019-06-17T21:42:00.702+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13211444/comment/16867856",
                    "id": "16867856",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "Issue resolved by pull request 4609\n[https://github.com/apache/arrow/pull/4609]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2019-06-19T17:29:39.447+0000",
                    "updated": "2019-06-19T17:29:39.447+0000"
                }
            ],
            "maxResults": 7,
            "total": 7,
            "startAt": 0
        },
        "customfield_12311820": "0|yi08yw:",
        "customfield_12314139": null
    }
}