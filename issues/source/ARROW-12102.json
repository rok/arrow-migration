{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13367989",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13367989",
    "key": "ARROW-12102",
    "fields": {
        "fixVersions": [],
        "resolution": null,
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/4",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
            "name": "Minor",
            "id": "4"
        },
        "labels": [
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [],
        "customfield_12313825": null,
        "assignee": null,
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/1",
            "description": "The issue is open and ready for the assignee to start work on it.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/open.png",
            "name": "Open",
            "id": "1",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2",
                "id": 2,
                "key": "new",
                "colorName": "blue-gray",
                "name": "To Do"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12334626",
                "id": "12334626",
                "name": "C++ - Gandiva"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=jpedroantunes",
            "name": "jpedroantunes",
            "key": "jpedroantunes",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34060",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34060",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34060",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34060"
            },
            "displayName": "Jo\u00e3o Pedro Antunes Ferreira",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=jpedroantunes",
            "name": "jpedroantunes",
            "key": "jpedroantunes",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34060",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34060",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34060",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34060"
            },
            "displayName": "Jo\u00e3o Pedro Antunes Ferreira",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "aggregateprogress": {
            "progress": 9000,
            "total": 9000,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 9000,
            "total": 9000,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-12102/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 15,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13367989/worklog/572817",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jpedroantunes opened a new pull request #9813:\nURL: https://github.com/apache/arrow/pull/9813\n\n\n   Currently gandiva cache is an LRU cache. It would be interesting to change it so that the expressions which take large amount of time to build stay as long as possible in the cache.\r\n   \r\n   So, we need to Implement a new cache for Gandiva focused on this build time policy, and make it configurable so it is possible to define if it will be used the LRU cache or this new one.\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-03-26T19:07:56.351+0000",
                    "updated": "2021-03-26T19:07:56.351+0000",
                    "started": "2021-03-26T19:07:56.351+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "572817",
                    "issueId": "13367989"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13367989/worklog/572819",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "github-actions[bot] commented on pull request #9813:\nURL: https://github.com/apache/arrow/pull/9813#issuecomment-808451957\n\n\n   https://issues.apache.org/jira/browse/ARROW-12102\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-03-26T19:08:12.353+0000",
                    "updated": "2021-03-26T19:08:12.353+0000",
                    "started": "2021-03-26T19:08:12.353+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "572819",
                    "issueId": "13367989"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13367989/worklog/574787",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "projjal commented on a change in pull request #9813:\nURL: https://github.com/apache/arrow/pull/9813#discussion_r604831679\n\n\n\n##########\nFile path: cpp/src/gandiva/cache.cc\n##########\n@@ -38,6 +42,22 @@ int GetCapacity() {\n   return capacity;\n }\n \n+int GetCacheTypeToUse() {\n+  int cache_type;\n+  const char* env_cache_type = std::getenv(\"GANDIVA_CACHE_TYPE\");\n\nReview comment:\n       Lets not use environment variable to configure the behaviour, its better to use some configuration option. The configuration class in Gandiva contains only a single projector/filter level options. Maybe the first projector/filter that is built in gandiva can have a config option to set the cache policy, which cannot be changed afterwards.\n\n##########\nFile path: cpp/src/gandiva/base_cache.h\n##########\n@@ -0,0 +1,55 @@\n+// Licensed to the Apache Software Foundation (ASF) under one\n+// or more contributor license agreements.  See the NOTICE file\n+// distributed with this work for additional information\n+// regarding copyright ownership.  The ASF licenses this file\n+// to you under the Apache License, Version 2.0 (the\n+// \"License\"); you may not use this file except in compliance\n+// with the License.  You may obtain a copy of the License at\n+//\n+//   http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+#pragma once\n+\n+#include <list>\n+#include <unordered_map>\n+#include <utility>\n+\n+#include \"arrow/util/optional.h\"\n+\n+namespace gandiva {\n+\n+template <class Key, class Value>\n+class BaseCache {\n\nReview comment:\n       Can you add some comments?\n\n##########\nFile path: cpp/src/gandiva/lower_value_used_cache.h\n##########\n@@ -0,0 +1,103 @@\n+// Licensed to the Apache Software Foundation (ASF) under one\n+// or more contributor license agreements.  See the NOTICE file\n+// distributed with this work for additional information\n+// regarding copyright ownership.  The ASF licenses this file\n+// to you under the Apache License, Version 2.0 (the\n+// \"License\"); you may not use this file except in compliance\n+// with the License.  You may obtain a copy of the License at\n+//\n+//   http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+#pragma once\n+\n+#include <list>\n+#include <set>\n+#include <unordered_map>\n+#include <utility>\n+\n+#include \"arrow/util/optional.h\"\n+#include \"gandiva/base_cache.h\"\n+\n+// modified cache to support evict policy of lower value used.\n+namespace gandiva {\n+// a cache which evicts the lower value used item when it is full\n+template <class Key, class Value>\n+class LowerValueUsedCache : public BaseCache<Key, Value> {\n+ public:\n+  struct hasher {\n+    template <typename I>\n+    std::size_t operator()(const I& i) const {\n+      return i.Hash();\n+    }\n+  };\n+  using map_type = std::unordered_map<\n+      Key, std::pair<Value, typename std::set<std::pair<uint64_t, Key>>::iterator>,\n+      hasher>;\n+\n+  explicit LowerValueUsedCache(size_t capacity) : BaseCache<Key, Value>(capacity) {}\n+\n+  LowerValueUsedCache<Key, Value>() : BaseCache<Key, Value>() {}\n+\n+  size_t size() const override { return map_.size(); }\n+\n+  size_t capacity() const override { return this->cache_capacity_; }\n+\n+  bool empty() const override { return map_.empty(); }\n+\n+  bool contains(const Key& key) override { return map_.find(key) != map_.end(); }\n+\n+  void insert(const Key& key, const Value& value,\n+              const uint64_t value_to_order) override {\n+    typename map_type::iterator i = map_.find(key);\n+    if (i == map_.end()) {\n+      // insert item into the cache, but first check if it is full\n+      if (size() >= this->cache_capacity_) {\n+        // check if the value should be inserted on cache, otherwise just return\n+        if (value_to_order <= lvu_set_.begin()->first) return;\n+\n+        // cache is full, evict the least recently used item\n+        evict();\n+      }\n+\n+      // insert the new item\n+      lvu_set_.insert(std::make_pair(value_to_order, key));\n+      map_[key] = std::make_pair(value, lvu_set_.begin());\n\nReview comment:\n       Why adding lvu_set_.begin()\n\n##########\nFile path: cpp/src/gandiva/cache.h\n##########\n@@ -31,29 +32,40 @@ int GetCapacity();\n GANDIVA_EXPORT\n void LogCacheSize(size_t capacity);\n \n+GANDIVA_EXPORT\n+int GetCacheTypeToUse();\n+\n template <class KeyType, typename ValueType>\n class Cache {\n  public:\n-  explicit Cache(size_t capacity) : cache_(capacity) { LogCacheSize(capacity); }\n+  explicit Cache(size_t capacity, int cache_type_to_use) {\n+    if (cache_type_to_use == 0) {\n+      this->cache_ = new LowerValueUsedCache<KeyType, ValueType>(capacity);\n\nReview comment:\n       Why use plain pointers? Its also not being freed. Please use unique_ptr\n\n##########\nFile path: cpp/src/gandiva/lower_value_used_cache.h\n##########\n@@ -0,0 +1,103 @@\n+// Licensed to the Apache Software Foundation (ASF) under one\n+// or more contributor license agreements.  See the NOTICE file\n+// distributed with this work for additional information\n+// regarding copyright ownership.  The ASF licenses this file\n+// to you under the Apache License, Version 2.0 (the\n+// \"License\"); you may not use this file except in compliance\n+// with the License.  You may obtain a copy of the License at\n+//\n+//   http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+#pragma once\n+\n+#include <list>\n+#include <set>\n+#include <unordered_map>\n+#include <utility>\n+\n+#include \"arrow/util/optional.h\"\n+#include \"gandiva/base_cache.h\"\n+\n+// modified cache to support evict policy of lower value used.\n+namespace gandiva {\n+// a cache which evicts the lower value used item when it is full\n+template <class Key, class Value>\n+class LowerValueUsedCache : public BaseCache<Key, Value> {\n\nReview comment:\n       Just evicting based on the build times seems would be problematic since it might just keep only infrequently used large expressions. You should use a combination of build time and some aging policy.\r\n   Also can you change the name. It sounds confusing.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-03-31T12:01:00.664+0000",
                    "updated": "2021-03-31T12:01:00.664+0000",
                    "started": "2021-03-31T12:01:00.664+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "574787",
                    "issueId": "13367989"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13367989/worklog/574846",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jpedroantunes commented on a change in pull request #9813:\nURL: https://github.com/apache/arrow/pull/9813#discussion_r604901684\n\n\n\n##########\nFile path: cpp/src/gandiva/lower_value_used_cache.h\n##########\n@@ -0,0 +1,103 @@\n+// Licensed to the Apache Software Foundation (ASF) under one\n+// or more contributor license agreements.  See the NOTICE file\n+// distributed with this work for additional information\n+// regarding copyright ownership.  The ASF licenses this file\n+// to you under the Apache License, Version 2.0 (the\n+// \"License\"); you may not use this file except in compliance\n+// with the License.  You may obtain a copy of the License at\n+//\n+//   http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+#pragma once\n+\n+#include <list>\n+#include <set>\n+#include <unordered_map>\n+#include <utility>\n+\n+#include \"arrow/util/optional.h\"\n+#include \"gandiva/base_cache.h\"\n+\n+// modified cache to support evict policy of lower value used.\n+namespace gandiva {\n+// a cache which evicts the lower value used item when it is full\n+template <class Key, class Value>\n+class LowerValueUsedCache : public BaseCache<Key, Value> {\n+ public:\n+  struct hasher {\n+    template <typename I>\n+    std::size_t operator()(const I& i) const {\n+      return i.Hash();\n+    }\n+  };\n+  using map_type = std::unordered_map<\n+      Key, std::pair<Value, typename std::set<std::pair<uint64_t, Key>>::iterator>,\n+      hasher>;\n+\n+  explicit LowerValueUsedCache(size_t capacity) : BaseCache<Key, Value>(capacity) {}\n+\n+  LowerValueUsedCache<Key, Value>() : BaseCache<Key, Value>() {}\n+\n+  size_t size() const override { return map_.size(); }\n+\n+  size_t capacity() const override { return this->cache_capacity_; }\n+\n+  bool empty() const override { return map_.empty(); }\n+\n+  bool contains(const Key& key) override { return map_.find(key) != map_.end(); }\n+\n+  void insert(const Key& key, const Value& value,\n+              const uint64_t value_to_order) override {\n+    typename map_type::iterator i = map_.find(key);\n+    if (i == map_.end()) {\n+      // insert item into the cache, but first check if it is full\n+      if (size() >= this->cache_capacity_) {\n+        // check if the value should be inserted on cache, otherwise just return\n+        if (value_to_order <= lvu_set_.begin()->first) return;\n+\n+        // cache is full, evict the least recently used item\n+        evict();\n+      }\n+\n+      // insert the new item\n+      lvu_set_.insert(std::make_pair(value_to_order, key));\n+      map_[key] = std::make_pair(value, lvu_set_.begin());\n\nReview comment:\n       Agree that is not necessary. I will remove it\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-03-31T13:34:39.081+0000",
                    "updated": "2021-03-31T13:34:39.081+0000",
                    "started": "2021-03-31T13:34:39.081+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "574846",
                    "issueId": "13367989"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13367989/worklog/574847",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jpedroantunes commented on a change in pull request #9813:\nURL: https://github.com/apache/arrow/pull/9813#discussion_r604901916\n\n\n\n##########\nFile path: cpp/src/gandiva/base_cache.h\n##########\n@@ -0,0 +1,55 @@\n+// Licensed to the Apache Software Foundation (ASF) under one\n+// or more contributor license agreements.  See the NOTICE file\n+// distributed with this work for additional information\n+// regarding copyright ownership.  The ASF licenses this file\n+// to you under the Apache License, Version 2.0 (the\n+// \"License\"); you may not use this file except in compliance\n+// with the License.  You may obtain a copy of the License at\n+//\n+//   http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+#pragma once\n+\n+#include <list>\n+#include <unordered_map>\n+#include <utility>\n+\n+#include \"arrow/util/optional.h\"\n+\n+namespace gandiva {\n+\n+template <class Key, class Value>\n+class BaseCache {\n\nReview comment:\n       Applied!\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-03-31T13:34:52.021+0000",
                    "updated": "2021-03-31T13:34:52.021+0000",
                    "started": "2021-03-31T13:34:52.021+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "574847",
                    "issueId": "13367989"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13367989/worklog/574848",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jpedroantunes commented on a change in pull request #9813:\nURL: https://github.com/apache/arrow/pull/9813#discussion_r604902035\n\n\n\n##########\nFile path: cpp/src/gandiva/cache.h\n##########\n@@ -31,29 +32,40 @@ int GetCapacity();\n GANDIVA_EXPORT\n void LogCacheSize(size_t capacity);\n \n+GANDIVA_EXPORT\n+int GetCacheTypeToUse();\n+\n template <class KeyType, typename ValueType>\n class Cache {\n  public:\n-  explicit Cache(size_t capacity) : cache_(capacity) { LogCacheSize(capacity); }\n+  explicit Cache(size_t capacity, int cache_type_to_use) {\n+    if (cache_type_to_use == 0) {\n+      this->cache_ = new LowerValueUsedCache<KeyType, ValueType>(capacity);\n\nReview comment:\n       Applied!\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-03-31T13:35:05.062+0000",
                    "updated": "2021-03-31T13:35:05.062+0000",
                    "started": "2021-03-31T13:35:05.061+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "574848",
                    "issueId": "13367989"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13367989/worklog/574889",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jpedroantunes commented on a change in pull request #9813:\nURL: https://github.com/apache/arrow/pull/9813#discussion_r604959826\n\n\n\n##########\nFile path: cpp/src/gandiva/cache.cc\n##########\n@@ -38,6 +42,22 @@ int GetCapacity() {\n   return capacity;\n }\n \n+int GetCacheTypeToUse() {\n+  int cache_type;\n+  const char* env_cache_type = std::getenv(\"GANDIVA_CACHE_TYPE\");\n\nReview comment:\n       I will check the code to better understand what you suggested. If I have any problem, I will reach you\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-03-31T14:49:10.275+0000",
                    "updated": "2021-03-31T14:49:10.275+0000",
                    "started": "2021-03-31T14:49:10.275+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "574889",
                    "issueId": "13367989"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13367989/worklog/574892",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jpedroantunes commented on a change in pull request #9813:\nURL: https://github.com/apache/arrow/pull/9813#discussion_r604963234\n\n\n\n##########\nFile path: cpp/src/gandiva/lower_value_used_cache.h\n##########\n@@ -0,0 +1,103 @@\n+// Licensed to the Apache Software Foundation (ASF) under one\n+// or more contributor license agreements.  See the NOTICE file\n+// distributed with this work for additional information\n+// regarding copyright ownership.  The ASF licenses this file\n+// to you under the Apache License, Version 2.0 (the\n+// \"License\"); you may not use this file except in compliance\n+// with the License.  You may obtain a copy of the License at\n+//\n+//   http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+#pragma once\n+\n+#include <list>\n+#include <set>\n+#include <unordered_map>\n+#include <utility>\n+\n+#include \"arrow/util/optional.h\"\n+#include \"gandiva/base_cache.h\"\n+\n+// modified cache to support evict policy of lower value used.\n+namespace gandiva {\n+// a cache which evicts the lower value used item when it is full\n+template <class Key, class Value>\n+class LowerValueUsedCache : public BaseCache<Key, Value> {\n\nReview comment:\n       I agree with you!\r\n   What I want to discuss here is what would be the best trigger to remove an element according to the build time policy or the recency policy. Do you have any opinion about it?\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-03-31T14:53:35.854+0000",
                    "updated": "2021-03-31T14:53:35.854+0000",
                    "started": "2021-03-31T14:53:35.853+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "574892",
                    "issueId": "13367989"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13367989/worklog/575013",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "projjal commented on a change in pull request #9813:\nURL: https://github.com/apache/arrow/pull/9813#discussion_r605106219\n\n\n\n##########\nFile path: cpp/src/gandiva/lower_value_used_cache.h\n##########\n@@ -0,0 +1,103 @@\n+// Licensed to the Apache Software Foundation (ASF) under one\n+// or more contributor license agreements.  See the NOTICE file\n+// distributed with this work for additional information\n+// regarding copyright ownership.  The ASF licenses this file\n+// to you under the Apache License, Version 2.0 (the\n+// \"License\"); you may not use this file except in compliance\n+// with the License.  You may obtain a copy of the License at\n+//\n+//   http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+#pragma once\n+\n+#include <list>\n+#include <set>\n+#include <unordered_map>\n+#include <utility>\n+\n+#include \"arrow/util/optional.h\"\n+#include \"gandiva/base_cache.h\"\n+\n+// modified cache to support evict policy of lower value used.\n+namespace gandiva {\n+// a cache which evicts the lower value used item when it is full\n+template <class Key, class Value>\n+class LowerValueUsedCache : public BaseCache<Key, Value> {\n\nReview comment:\n       Something like https://en.wikipedia.org/wiki/Cache_replacement_policies#LFU_with_dynamic_aging_(LFUDA)\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-03-31T17:56:02.205+0000",
                    "updated": "2021-03-31T17:56:02.205+0000",
                    "started": "2021-03-31T17:56:02.204+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "575013",
                    "issueId": "13367989"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13367989/worklog/575015",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "projjal commented on a change in pull request #9813:\nURL: https://github.com/apache/arrow/pull/9813#discussion_r605107516\n\n\n\n##########\nFile path: cpp/src/gandiva/filter.h\n##########\n@@ -45,6 +45,10 @@ class FilterCacheKey {\n \n   bool operator!=(const FilterCacheKey& other) const { return !(*this == other); }\n \n+  bool operator<(const FilterCacheKey& other) const {\n+    return uniqifier_ < other.uniqifier_;\n\nReview comment:\n       This is not correct I believe. Also why is this needed?\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-03-31T17:57:50.662+0000",
                    "updated": "2021-03-31T17:57:50.662+0000",
                    "started": "2021-03-31T17:57:50.661+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "575015",
                    "issueId": "13367989"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13367989/worklog/575042",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jpedroantunes commented on a change in pull request #9813:\nURL: https://github.com/apache/arrow/pull/9813#discussion_r605130406\n\n\n\n##########\nFile path: cpp/src/gandiva/filter.h\n##########\n@@ -45,6 +45,10 @@ class FilterCacheKey {\n \n   bool operator!=(const FilterCacheKey& other) const { return !(*this == other); }\n \n+  bool operator<(const FilterCacheKey& other) const {\n+    return uniqifier_ < other.uniqifier_;\n\nReview comment:\n       We needed to implement it because actually, we use this Filter key in a pair structure inside a set on the new Gandiva Cache.\r\n   We use this set to keep registers ordered by the elapsed build time.\r\n   This is why we need to implement this operator anyway, otherwise we can not use it as I needed in logic.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-03-31T18:33:19.184+0000",
                    "updated": "2021-03-31T18:33:19.184+0000",
                    "started": "2021-03-31T18:33:19.184+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "575042",
                    "issueId": "13367989"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13367989/worklog/575045",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "projjal commented on a change in pull request #9813:\nURL: https://github.com/apache/arrow/pull/9813#discussion_r605132657\n\n\n\n##########\nFile path: cpp/src/gandiva/filter.h\n##########\n@@ -45,6 +45,10 @@ class FilterCacheKey {\n \n   bool operator!=(const FilterCacheKey& other) const { return !(*this == other); }\n \n+  bool operator<(const FilterCacheKey& other) const {\n+    return uniqifier_ < other.uniqifier_;\n\nReview comment:\n       You should compare on all the properties. uniqifier property is most likely 0 for all expressions\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-03-31T18:37:09.407+0000",
                    "updated": "2021-03-31T18:37:09.407+0000",
                    "started": "2021-03-31T18:37:09.407+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "575045",
                    "issueId": "13367989"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13367989/worklog/575195",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jpedroantunes commented on a change in pull request #9813:\nURL: https://github.com/apache/arrow/pull/9813#discussion_r605261171\n\n\n\n##########\nFile path: cpp/src/gandiva/filter.h\n##########\n@@ -45,6 +45,10 @@ class FilterCacheKey {\n \n   bool operator!=(const FilterCacheKey& other) const { return !(*this == other); }\n \n+  bool operator<(const FilterCacheKey& other) const {\n+    return uniqifier_ < other.uniqifier_;\n\nReview comment:\n       Not sure if I completely understand your point, but I compared all possible properties for the bool operator<\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-03-31T22:30:17.932+0000",
                    "updated": "2021-03-31T22:30:17.932+0000",
                    "started": "2021-03-31T22:30:17.932+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "575195",
                    "issueId": "13367989"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13367989/worklog/587147",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jpedroantunes commented on pull request #9813:\nURL: https://github.com/apache/arrow/pull/9813#issuecomment-824710562\n\n\n   Will be implemented later\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-04-22T10:05:19.434+0000",
                    "updated": "2021-04-22T10:05:19.434+0000",
                    "started": "2021-04-22T10:05:19.434+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "587147",
                    "issueId": "13367989"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13367989/worklog/587148",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jpedroantunes closed pull request #9813:\nURL: https://github.com/apache/arrow/pull/9813\n\n\n   \n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-04-22T10:05:22.675+0000",
                    "updated": "2021-04-22T10:05:22.675+0000",
                    "started": "2021-04-22T10:05:22.675+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "587148",
                    "issueId": "13367989"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/2",
            "id": "2",
            "description": "A new feature of the product, which has yet to be developed.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21141&avatarType=issuetype",
            "name": "New Feature",
            "subtask": false,
            "avatarId": 21141
        },
        "timespent": 9000,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@d49e43b[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@bd5ea0c[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@7ff3496d[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@5bd25915[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@29e91fa6[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@5c1317c8[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@39ce8506[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@701d69db[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@11684c51[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@5501a4e3[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@18aafdf0[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@3e21c8f[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 9000,
        "customfield_12312520": null,
        "customfield_12312521": "Tue Jul 12 14:04:30 UTC 2022",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": null,
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-12102/watchers",
            "watchCount": 2,
            "isWatching": true
        },
        "created": "2021-03-26T19:03:34.000+0000",
        "updated": "2022-07-12T14:04:30.000+0000",
        "timeoriginalestimate": null,
        "description": "Currently gandiva cache is an LRU cache. It would be interesting to change it so that the expressions which take large amount of time to build stay as long as possible in the cache.\r\n\r\nSo, we need to Implement a new cache for Gandiva focused on this build time policy, and make it configurable so it is possible to define if it will be used the LRU cache or this one based on build time.",
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "2.5h",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 9000
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[C++][Gandiva] Implement new cache for Gandiva focused on a build time policy",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13367989/comment/17565669",
                    "id": "17565669",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=toddfarmer",
                        "name": "toddfarmer",
                        "key": "JIRAUSER288796",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=39935",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=39935",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=39935",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=39935"
                        },
                        "displayName": "Todd Farmer",
                        "active": true,
                        "timeZone": "America/Boise"
                    },
                    "body": "This issue was last updated over 90 days ago, which may be an indication it is no longer being actively worked. To better reflect the current state, the issue is being unassigned. Please feel free to re-take assignment of the issue if it is being actively worked, or if you plan to start that work soon.",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=toddfarmer",
                        "name": "toddfarmer",
                        "key": "JIRAUSER288796",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=39935",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=39935",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=39935",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=39935"
                        },
                        "displayName": "Todd Farmer",
                        "active": true,
                        "timeZone": "America/Boise"
                    },
                    "created": "2022-07-12T14:04:30.658+0000",
                    "updated": "2022-07-12T14:04:30.658+0000"
                }
            ],
            "maxResults": 1,
            "total": 1,
            "startAt": 0
        },
        "customfield_12311820": "0|z0p9eo:",
        "customfield_12314139": null
    }
}