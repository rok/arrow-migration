{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13389850",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13389850",
    "key": "ARROW-13344",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12350323",
                "id": "12350323",
                "description": "",
                "name": "6.0.0",
                "archived": false,
                "released": true,
                "releaseDate": "2021-10-26"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "name": "Major",
            "id": "3"
        },
        "labels": [
            "pull-request-available",
            "query-engine"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [
            {
                "id": "12620453",
                "self": "https://issues.apache.org/jira/rest/api/2/issueLink/12620453",
                "type": {
                    "id": "10030",
                    "name": "Reference",
                    "inward": "is related to",
                    "outward": "relates to",
                    "self": "https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"
                },
                "inwardIssue": {
                    "id": "13392603",
                    "key": "ARROW-13497",
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13392603",
                    "fields": {
                        "summary": "[C++][R] FunctionOptions not used by aggregation nodes",
                        "status": {
                            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
                            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
                            "name": "Resolved",
                            "id": "5",
                            "statusCategory": {
                                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                                "id": 3,
                                "key": "done",
                                "colorName": "green",
                                "name": "Done"
                            }
                        },
                        "priority": {
                            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
                            "name": "Major",
                            "id": "3"
                        },
                        "issuetype": {
                            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
                            "id": "1",
                            "description": "A problem which impairs or prevents the functions of the product.",
                            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
                            "name": "Bug",
                            "subtask": false,
                            "avatarId": 21133
                        }
                    }
                }
            },
            {
                "id": "12620456",
                "self": "https://issues.apache.org/jira/rest/api/2/issueLink/12620456",
                "type": {
                    "id": "10030",
                    "name": "Reference",
                    "inward": "is related to",
                    "outward": "relates to",
                    "self": "https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"
                },
                "inwardIssue": {
                    "id": "13392608",
                    "key": "ARROW-13499",
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13392608",
                    "fields": {
                        "summary": "[R] Aggregation on expression doesn't NSE correctly",
                        "status": {
                            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
                            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
                            "name": "Resolved",
                            "id": "5",
                            "statusCategory": {
                                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                                "id": 3,
                                "key": "done",
                                "colorName": "green",
                                "name": "Done"
                            }
                        },
                        "priority": {
                            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
                            "name": "Major",
                            "id": "3"
                        },
                        "issuetype": {
                            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
                            "id": "1",
                            "description": "A problem which impairs or prevents the functions of the product.",
                            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
                            "name": "Bug",
                            "subtask": false,
                            "avatarId": 21133
                        }
                    }
                }
            },
            {
                "id": "12620459",
                "self": "https://issues.apache.org/jira/rest/api/2/issueLink/12620459",
                "type": {
                    "id": "10030",
                    "name": "Reference",
                    "inward": "is related to",
                    "outward": "relates to",
                    "self": "https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"
                },
                "inwardIssue": {
                    "id": "13393375",
                    "key": "ARROW-13543",
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13393375",
                    "fields": {
                        "summary": "[R] Handle summarize() with 0 arguments or no aggregate functions",
                        "status": {
                            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
                            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
                            "name": "Resolved",
                            "id": "5",
                            "statusCategory": {
                                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                                "id": 3,
                                "key": "done",
                                "colorName": "green",
                                "name": "Done"
                            }
                        },
                        "priority": {
                            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
                            "name": "Major",
                            "id": "3"
                        },
                        "issuetype": {
                            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
                            "id": "1",
                            "description": "A problem which impairs or prevents the functions of the product.",
                            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
                            "name": "Bug",
                            "subtask": false,
                            "avatarId": 21133
                        }
                    }
                }
            },
            {
                "id": "12620457",
                "self": "https://issues.apache.org/jira/rest/api/2/issueLink/12620457",
                "type": {
                    "id": "10030",
                    "name": "Reference",
                    "inward": "is related to",
                    "outward": "relates to",
                    "self": "https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"
                },
                "inwardIssue": {
                    "id": "13392607",
                    "key": "ARROW-13498",
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13392607",
                    "fields": {
                        "summary": "[C++] ScanNode takes filter but doesn't filter",
                        "status": {
                            "self": "https://issues.apache.org/jira/rest/api/2/status/6",
                            "description": "The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/closed.png",
                            "name": "Closed",
                            "id": "6",
                            "statusCategory": {
                                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                                "id": 3,
                                "key": "done",
                                "colorName": "green",
                                "name": "Done"
                            }
                        },
                        "priority": {
                            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
                            "name": "Major",
                            "id": "3"
                        },
                        "issuetype": {
                            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
                            "id": "1",
                            "description": "A problem which impairs or prevents the functions of the product.",
                            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
                            "name": "Bug",
                            "subtask": false,
                            "avatarId": 21133
                        }
                    }
                }
            },
            {
                "id": "12620455",
                "self": "https://issues.apache.org/jira/rest/api/2/issueLink/12620455",
                "type": {
                    "id": "10030",
                    "name": "Reference",
                    "inward": "is related to",
                    "outward": "relates to",
                    "self": "https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"
                },
                "inwardIssue": {
                    "id": "13392634",
                    "key": "ARROW-13502",
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13392634",
                    "fields": {
                        "summary": "[R] Bindings for min/max aggregation",
                        "status": {
                            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
                            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
                            "name": "Resolved",
                            "id": "5",
                            "statusCategory": {
                                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                                "id": 3,
                                "key": "done",
                                "colorName": "green",
                                "name": "Done"
                            }
                        },
                        "priority": {
                            "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
                            "name": "Critical",
                            "id": "2"
                        },
                        "issuetype": {
                            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/2",
                            "id": "2",
                            "description": "A new feature of the product, which has yet to be developed.",
                            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21141&avatarType=issuetype",
                            "name": "New Feature",
                            "subtask": false,
                            "avatarId": 21141
                        }
                    }
                }
            },
            {
                "id": "12621044",
                "self": "https://issues.apache.org/jira/rest/api/2/issueLink/12621044",
                "type": {
                    "id": "10030",
                    "name": "Reference",
                    "inward": "is related to",
                    "outward": "relates to",
                    "self": "https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"
                },
                "inwardIssue": {
                    "id": "13393489",
                    "key": "ARROW-13550",
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13393489",
                    "fields": {
                        "summary": "[R] Support .groups argument to dplyr::summarize()",
                        "status": {
                            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
                            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
                            "name": "Resolved",
                            "id": "5",
                            "statusCategory": {
                                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                                "id": 3,
                                "key": "done",
                                "colorName": "green",
                                "name": "Done"
                            }
                        },
                        "priority": {
                            "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
                            "name": "Critical",
                            "id": "2"
                        },
                        "issuetype": {
                            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/2",
                            "id": "2",
                            "description": "A new feature of the product, which has yet to be developed.",
                            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21141&avatarType=issuetype",
                            "name": "New Feature",
                            "subtask": false,
                            "avatarId": 21141
                        }
                    }
                }
            },
            {
                "id": "12620454",
                "self": "https://issues.apache.org/jira/rest/api/2/issueLink/12620454",
                "type": {
                    "id": "10030",
                    "name": "Reference",
                    "inward": "is related to",
                    "outward": "relates to",
                    "self": "https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"
                },
                "inwardIssue": {
                    "id": "13392633",
                    "key": "ARROW-13501",
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13392633",
                    "fields": {
                        "summary": "[R] Bindings for count aggregation",
                        "status": {
                            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
                            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
                            "name": "Resolved",
                            "id": "5",
                            "statusCategory": {
                                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                                "id": 3,
                                "key": "done",
                                "colorName": "green",
                                "name": "Done"
                            }
                        },
                        "priority": {
                            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
                            "name": "Major",
                            "id": "3"
                        },
                        "issuetype": {
                            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/2",
                            "id": "2",
                            "description": "A new feature of the product, which has yet to be developed.",
                            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21141&avatarType=issuetype",
                            "name": "New Feature",
                            "subtask": false,
                            "avatarId": 21141
                        }
                    }
                }
            },
            {
                "id": "12620458",
                "self": "https://issues.apache.org/jira/rest/api/2/issueLink/12620458",
                "type": {
                    "id": "10030",
                    "name": "Reference",
                    "inward": "is related to",
                    "outward": "relates to",
                    "self": "https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"
                },
                "inwardIssue": {
                    "id": "13393098",
                    "key": "ARROW-13528",
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13393098",
                    "fields": {
                        "summary": "[R] Bindings for mean, var, sd aggregation",
                        "status": {
                            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
                            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
                            "name": "Resolved",
                            "id": "5",
                            "statusCategory": {
                                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                                "id": 3,
                                "key": "done",
                                "colorName": "green",
                                "name": "Done"
                            }
                        },
                        "priority": {
                            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
                            "name": "Major",
                            "id": "3"
                        },
                        "issuetype": {
                            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/2",
                            "id": "2",
                            "description": "A new feature of the product, which has yet to be developed.",
                            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21141&avatarType=issuetype",
                            "name": "New Feature",
                            "subtask": false,
                            "avatarId": 21141
                        }
                    }
                }
            },
            {
                "id": "12621045",
                "self": "https://issues.apache.org/jira/rest/api/2/issueLink/12621045",
                "type": {
                    "id": "10030",
                    "name": "Reference",
                    "inward": "is related to",
                    "outward": "relates to",
                    "self": "https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"
                },
                "inwardIssue": {
                    "id": "13394945",
                    "key": "ARROW-13618",
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13394945",
                    "fields": {
                        "summary": "[R] Use Arrow engine for summarize() by default  ",
                        "status": {
                            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
                            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
                            "name": "Resolved",
                            "id": "5",
                            "statusCategory": {
                                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                                "id": 3,
                                "key": "done",
                                "colorName": "green",
                                "name": "Done"
                            }
                        },
                        "priority": {
                            "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
                            "name": "Critical",
                            "id": "2"
                        },
                        "issuetype": {
                            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
                            "id": "4",
                            "description": "An improvement or enhancement to an existing feature or task.",
                            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
                            "name": "Improvement",
                            "subtask": false,
                            "avatarId": 21140
                        }
                    }
                }
            }
        ],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=npr",
            "name": "npr",
            "key": "npr",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
            },
            "displayName": "Neal Richardson",
            "active": true,
            "timeZone": "America/Los_Angeles"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12333008",
                "id": "12333008",
                "name": "R"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=npr",
            "name": "npr",
            "key": "npr",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
            },
            "displayName": "Neal Richardson",
            "active": true,
            "timeZone": "America/Los_Angeles"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=npr",
            "name": "npr",
            "key": "npr",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
            },
            "displayName": "Neal Richardson",
            "active": true,
            "timeZone": "America/Los_Angeles"
        },
        "aggregateprogress": {
            "progress": 14400,
            "total": 14400,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 14400,
            "total": 14400,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-13344/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 24,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13389850/worklog/627906",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "github-actions[bot] removed a comment on pull request #10722:\nURL: https://github.com/apache/arrow/pull/10722#issuecomment-880611965\n\n\n   <!--\n     Licensed to the Apache Software Foundation (ASF) under one\n     or more contributor license agreements.  See the NOTICE file\n     distributed with this work for additional information\n     regarding copyright ownership.  The ASF licenses this file\n     to you under the Apache License, Version 2.0 (the\n     \"License\"); you may not use this file except in compliance\n     with the License.  You may obtain a copy of the License at\n   \n       http://www.apache.org/licenses/LICENSE-2.0\n   \n     Unless required by applicable law or agreed to in writing,\n     software distributed under the License is distributed on an\n     \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n     KIND, either express or implied.  See the License for the\n     specific language governing permissions and limitations\n     under the License.\n   -->\n   \n   Thanks for opening a pull request!\n   \n   If this is not a [minor PR](https://github.com/apache/arrow/blob/master/CONTRIBUTING.md#Minor-Fixes). Could you open an issue for this pull request on JIRA? https://issues.apache.org/jira/browse/ARROW\n   \n   Opening JIRAs ahead of time contributes to the [Openness](http://theapacheway.com/open/#:~:text=Openness%20allows%20new%20users%20the,must%20happen%20in%20the%20open.) of the Apache Arrow project.\n   \n   Then could you also rename pull request title in the following format?\n   \n       ARROW-${JIRA_ID}: [${COMPONENT}] ${SUMMARY}\n   \n   or\n   \n       MINOR: [${COMPONENT}] ${SUMMARY}\n   \n   See also:\n   \n     * [Other pull requests](https://github.com/apache/arrow/pulls/)\n     * [Contribution Guidelines - How to contribute patches](https://arrow.apache.org/docs/developers/contributing.html#how-to-contribute-patches)\n   \n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-07-26T17:51:21.334+0000",
                    "updated": "2021-07-26T17:51:21.334+0000",
                    "started": "2021-07-26T17:51:21.334+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "627906",
                    "issueId": "13389850"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13389850/worklog/627908",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "github-actions[bot] commented on pull request #10722:\nURL: https://github.com/apache/arrow/pull/10722#issuecomment-886904842\n\n\n   https://issues.apache.org/jira/browse/ARROW-13344\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-07-26T17:51:38.346+0000",
                    "updated": "2021-07-26T17:51:38.346+0000",
                    "started": "2021-07-26T17:51:38.345+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "627908",
                    "issueId": "13389850"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13389850/worklog/628828",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ianmcook commented on a change in pull request #10722:\nURL: https://github.com/apache/arrow/pull/10722#discussion_r677919540\n\n\n\n##########\nFile path: r/R/dplyr-summarize.R\n##########\n@@ -28,14 +28,109 @@ summarise.arrow_dplyr_query <- function(.data, ..., .engine = c(\"arrow\", \"duckdb\n     dplyr::group_vars(.data)             # vars needed for grouping\n   ))\n   .data <- dplyr::select(.data, vars_to_keep)\n-\n   if (match.arg(.engine) == \"duckdb\") {\n-    dplyr::summarise(to_duckdb(.data), ...)\n-  } else {\n-    if (query_on_dataset(.data)) {\n-      not_implemented_for_dataset(\"summarize()\")\n+      dplyr::summarise(to_duckdb(.data), ...)\n+  } else if (isTRUE(getOption(\"arrow.summarize\", FALSE))) {\n+    # Try stuff, if successful return()\n+    out <- try(do_arrow_summarize(.data, ...), silent = TRUE)\n+    if (inherits(out, \"try-error\")) {\n+      return(abandon_ship(call, .data, format(out)))\n+    } else {\n+      return(out)\n     }\n+  } else {\n+    # If unsuccessful or if option not set, do the work in R\n     dplyr::summarise(dplyr::collect(.data), ...)\n   }\n }\n summarise.Dataset <- summarise.ArrowTabular <- summarise.arrow_dplyr_query\n+\n+do_arrow_summarize <- function(.data, ...) {\n+  exprs <- quos(...)\n+  # Check for unnamed expressions and fix if any\n+  unnamed <- !nzchar(names(exprs))\n+  # Deparse and take the first element in case they're long expressions\n+  names(exprs)[unnamed] <- map_chr(exprs[unnamed], as_label)\n+\n+  mask <- arrow_mask(.data)\n+  # Add aggregation wrappers to arrow_mask somehow\n\nReview comment:\n       In dbplyr, aggregate function mappings are defined in a separate object apart from the scalar function mappings. I believe it's set up so the scalar functions are defined in a child environment that has a parent environment with the scalar function mappings defined in it, and the R environment lookup rules make it so when you pass the child environment as the mask, it will only ever use the parent environment if it can't find a function in the child environment.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-07-28T02:05:35.654+0000",
                    "updated": "2021-07-28T02:05:35.654+0000",
                    "started": "2021-07-28T02:05:35.653+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "628828",
                    "issueId": "13389850"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13389850/worklog/628829",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ianmcook commented on a change in pull request #10722:\nURL: https://github.com/apache/arrow/pull/10722#discussion_r677919540\n\n\n\n##########\nFile path: r/R/dplyr-summarize.R\n##########\n@@ -28,14 +28,109 @@ summarise.arrow_dplyr_query <- function(.data, ..., .engine = c(\"arrow\", \"duckdb\n     dplyr::group_vars(.data)             # vars needed for grouping\n   ))\n   .data <- dplyr::select(.data, vars_to_keep)\n-\n   if (match.arg(.engine) == \"duckdb\") {\n-    dplyr::summarise(to_duckdb(.data), ...)\n-  } else {\n-    if (query_on_dataset(.data)) {\n-      not_implemented_for_dataset(\"summarize()\")\n+      dplyr::summarise(to_duckdb(.data), ...)\n+  } else if (isTRUE(getOption(\"arrow.summarize\", FALSE))) {\n+    # Try stuff, if successful return()\n+    out <- try(do_arrow_summarize(.data, ...), silent = TRUE)\n+    if (inherits(out, \"try-error\")) {\n+      return(abandon_ship(call, .data, format(out)))\n+    } else {\n+      return(out)\n     }\n+  } else {\n+    # If unsuccessful or if option not set, do the work in R\n     dplyr::summarise(dplyr::collect(.data), ...)\n   }\n }\n summarise.Dataset <- summarise.ArrowTabular <- summarise.arrow_dplyr_query\n+\n+do_arrow_summarize <- function(.data, ...) {\n+  exprs <- quos(...)\n+  # Check for unnamed expressions and fix if any\n+  unnamed <- !nzchar(names(exprs))\n+  # Deparse and take the first element in case they're long expressions\n+  names(exprs)[unnamed] <- map_chr(exprs[unnamed], as_label)\n+\n+  mask <- arrow_mask(.data)\n+  # Add aggregation wrappers to arrow_mask somehow\n\nReview comment:\n       In dbplyr, aggregate function mappings are defined in a separate object apart from the scalar function mappings. I believe it's set up so the scalar function mappings are defined in a child environment that has a parent environment with the scalar function mappings defined in it, and the R environment lookup rules make it so when you pass the child environment as the mask, it will only ever use the parent environment if it can't find a function in the child environment.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-07-28T02:05:49.999+0000",
                    "updated": "2021-07-28T02:05:49.999+0000",
                    "started": "2021-07-28T02:05:49.998+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "628829",
                    "issueId": "13389850"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13389850/worklog/630606",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nealrichardson commented on a change in pull request #10722:\nURL: https://github.com/apache/arrow/pull/10722#discussion_r678434506\n\n\n\n##########\nFile path: r/R/dplyr-summarize.R\n##########\n@@ -28,14 +28,109 @@ summarise.arrow_dplyr_query <- function(.data, ..., .engine = c(\"arrow\", \"duckdb\n     dplyr::group_vars(.data)             # vars needed for grouping\n   ))\n   .data <- dplyr::select(.data, vars_to_keep)\n-\n   if (match.arg(.engine) == \"duckdb\") {\n-    dplyr::summarise(to_duckdb(.data), ...)\n-  } else {\n-    if (query_on_dataset(.data)) {\n-      not_implemented_for_dataset(\"summarize()\")\n+      dplyr::summarise(to_duckdb(.data), ...)\n+  } else if (isTRUE(getOption(\"arrow.summarize\", FALSE))) {\n+    # Try stuff, if successful return()\n+    out <- try(do_arrow_summarize(.data, ...), silent = TRUE)\n+    if (inherits(out, \"try-error\")) {\n+      return(abandon_ship(call, .data, format(out)))\n+    } else {\n+      return(out)\n     }\n+  } else {\n+    # If unsuccessful or if option not set, do the work in R\n     dplyr::summarise(dplyr::collect(.data), ...)\n   }\n }\n summarise.Dataset <- summarise.ArrowTabular <- summarise.arrow_dplyr_query\n+\n+do_arrow_summarize <- function(.data, ...) {\n+  exprs <- quos(...)\n+  # Check for unnamed expressions and fix if any\n+  unnamed <- !nzchar(names(exprs))\n+  # Deparse and take the first element in case they're long expressions\n+  names(exprs)[unnamed] <- map_chr(exprs[unnamed], as_label)\n+\n+  mask <- arrow_mask(.data)\n+  # Add aggregation wrappers to arrow_mask somehow\n\nReview comment:\n       Cool, we can do that, I was doing it quick and dirty to start\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-07-28T15:50:04.398+0000",
                    "updated": "2021-07-28T15:50:04.398+0000",
                    "started": "2021-07-28T15:50:04.397+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "630606",
                    "issueId": "13389850"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13389850/worklog/631208",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nealrichardson commented on a change in pull request #10722:\nURL: https://github.com/apache/arrow/pull/10722#discussion_r679284036\n\n\n\n##########\nFile path: r/R/dplyr-summarize.R\n##########\n@@ -28,14 +28,109 @@ summarise.arrow_dplyr_query <- function(.data, ..., .engine = c(\"arrow\", \"duckdb\n     dplyr::group_vars(.data)             # vars needed for grouping\n   ))\n   .data <- dplyr::select(.data, vars_to_keep)\n-\n   if (match.arg(.engine) == \"duckdb\") {\n-    dplyr::summarise(to_duckdb(.data), ...)\n-  } else {\n-    if (query_on_dataset(.data)) {\n-      not_implemented_for_dataset(\"summarize()\")\n+      dplyr::summarise(to_duckdb(.data), ...)\n+  } else if (isTRUE(getOption(\"arrow.summarize\", FALSE))) {\n+    # Try stuff, if successful return()\n+    out <- try(do_arrow_summarize(.data, ...), silent = TRUE)\n+    if (inherits(out, \"try-error\")) {\n+      return(abandon_ship(call, .data, format(out)))\n+    } else {\n+      return(out)\n     }\n+  } else {\n+    # If unsuccessful or if option not set, do the work in R\n     dplyr::summarise(dplyr::collect(.data), ...)\n   }\n }\n summarise.Dataset <- summarise.ArrowTabular <- summarise.arrow_dplyr_query\n+\n+do_arrow_summarize <- function(.data, ...) {\n+  exprs <- quos(...)\n+  # Check for unnamed expressions and fix if any\n+  unnamed <- !nzchar(names(exprs))\n+  # Deparse and take the first element in case they're long expressions\n+  names(exprs)[unnamed] <- map_chr(exprs[unnamed], as_label)\n+\n+  mask <- arrow_mask(.data)\n+  # Add aggregation wrappers to arrow_mask somehow\n\nReview comment:\n       This is done though there is some subtlety here that's not quite right. I'll make followups to revisit this and other issues.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-07-29T15:58:27.835+0000",
                    "updated": "2021-07-29T15:58:27.835+0000",
                    "started": "2021-07-29T15:58:27.835+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "631208",
                    "issueId": "13389850"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13389850/worklog/631825",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "bkietz commented on pull request #10722:\nURL: https://github.com/apache/arrow/pull/10722#issuecomment-890076863\n\n\n   > -    MakeScalarAggregateNode and MakeGroupByNode have quite different function signatures, which makes working with the API confusing\r\n   > -    GroupBy doesn't let you specify the names of the output columns\r\n   \r\n   ARROW-13482 (#10793) unifies the factories for scalar and grouped aggregation. I'll ensure that PR also provides configurable output column names for both\r\n   \r\n   -    Grouped aggregation functions all have to be invoked with a hash_ prefix to the name, which seems unnecessary because you can't call a non-hash-aggregation function in GroupBy and you can't call a hash_ function in ScalarAggregate\r\n   \r\n   ARROW-13451 would allow grouping of grouped and scalar aggregation kernels under the same function (rather than requiring distinct `sum` and `hash_sum` functions), which I think would address these\r\n   \n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-07-30T18:30:26.840+0000",
                    "updated": "2021-07-30T18:30:26.840+0000",
                    "started": "2021-07-30T18:30:26.840+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "631825",
                    "issueId": "13389850"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13389850/worklog/633265",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ianmcook commented on a change in pull request #10722:\nURL: https://github.com/apache/arrow/pull/10722#discussion_r682237507\n\n\n\n##########\nFile path: r/R/dplyr-functions.R\n##########\n@@ -777,3 +777,34 @@ nse_funcs$case_when <- function(...) {\n     )\n   )\n }\n+\n+# Aggregation functions\n+# These all return a list of:\n+#' @param fun string function name\n+#' @param data Expression (these are all currently a single field)\n+#' @parma options list of function options, as passed to call_function\n+#' For group-by aggregation, `hash_` gets prepended to the function name.\n+#' So to see a list of available hash aggregation functions, do\n+#' list_compute_functions(\"^hash_\")\n+agg_funcs <- list()\n+agg_funcs$sum <- function(x, na.rm = FALSE) {\n+  list(\n+    fun = \"sum\",\n+    data = x,\n+    options = list(na.rm = na.rm, na.min_count = 0L)\n\nReview comment:\n       Something odd is happening with the NSE so that if I pass `na.rm` as shorthand `T` or `F` instead of `TRUE` or `FALSE`, I get an error like this:\r\n   ```\r\n   Error: Can't subset columns that don't exist.\r\n   x Column `T` doesn't exist.\r\n   ```\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-08-04T02:21:46.753+0000",
                    "updated": "2021-08-04T02:21:46.753+0000",
                    "started": "2021-08-04T02:21:46.753+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "633265",
                    "issueId": "13389850"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13389850/worklog/633266",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ianmcook commented on a change in pull request #10722:\nURL: https://github.com/apache/arrow/pull/10722#discussion_r682241123\n\n\n\n##########\nFile path: r/R/dplyr-functions.R\n##########\n@@ -777,3 +777,34 @@ nse_funcs$case_when <- function(...) {\n     )\n   )\n }\n+\n+# Aggregation functions\n+# These all return a list of:\n+#' @param fun string function name\n+#' @param data Expression (these are all currently a single field)\n+#' @parma options list of function options, as passed to call_function\n+#' For group-by aggregation, `hash_` gets prepended to the function name.\n+#' So to see a list of available hash aggregation functions, do\n+#' list_compute_functions(\"^hash_\")\n+agg_funcs <- list()\n+agg_funcs$sum <- function(x, na.rm = FALSE) {\n+  list(\n+    fun = \"sum\",\n+    data = x,\n+    options = list(na.rm = na.rm, na.min_count = 0L)\n\nReview comment:\n       Oh, I see you opened ARROW-13499 which is about NSE problems. I noted this in a comment there.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-08-04T02:32:35.550+0000",
                    "updated": "2021-08-04T02:32:35.550+0000",
                    "started": "2021-08-04T02:32:35.549+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "633266",
                    "issueId": "13389850"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13389850/worklog/633271",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ianmcook commented on a change in pull request #10722:\nURL: https://github.com/apache/arrow/pull/10722#discussion_r682248376\n\n\n\n##########\nFile path: r/R/dplyr-summarize.R\n##########\n@@ -28,14 +28,107 @@ summarise.arrow_dplyr_query <- function(.data, ..., .engine = c(\"arrow\", \"duckdb\n     dplyr::group_vars(.data) # vars needed for grouping\n   ))\n   .data <- dplyr::select(.data, vars_to_keep)\n-\n   if (match.arg(.engine) == \"duckdb\") {\n     dplyr::summarise(to_duckdb(.data), ...)\n-  } else {\n-    if (query_on_dataset(.data)) {\n-      not_implemented_for_dataset(\"summarize()\")\n+  } else if (isTRUE(getOption(\"arrow.summarize\", FALSE))) {\n\nReview comment:\n       Is this `arrow.summarize` option intended for development/test purposes only? Do you intend to remove it before the 6.0.0 release? If so we should open a Jira for it with priority = blocker.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-08-04T02:55:36.542+0000",
                    "updated": "2021-08-04T02:55:36.542+0000",
                    "started": "2021-08-04T02:55:36.542+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "633271",
                    "issueId": "13389850"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13389850/worklog/633274",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ianmcook commented on a change in pull request #10722:\nURL: https://github.com/apache/arrow/pull/10722#discussion_r682249980\n\n\n\n##########\nFile path: r/R/dplyr-summarize.R\n##########\n@@ -28,14 +28,107 @@ summarise.arrow_dplyr_query <- function(.data, ..., .engine = c(\"arrow\", \"duckdb\n     dplyr::group_vars(.data) # vars needed for grouping\n   ))\n   .data <- dplyr::select(.data, vars_to_keep)\n-\n   if (match.arg(.engine) == \"duckdb\") {\n     dplyr::summarise(to_duckdb(.data), ...)\n-  } else {\n-    if (query_on_dataset(.data)) {\n-      not_implemented_for_dataset(\"summarize()\")\n+  } else if (isTRUE(getOption(\"arrow.summarize\", FALSE))) {\n+    # Try stuff, if successful return()\n+    out <- try(do_arrow_summarize(.data, ...), silent = TRUE)\n+    if (inherits(out, \"try-error\")) {\n+      return(abandon_ship(call, .data, format(out)))\n+    } else {\n+      return(out)\n     }\n+  } else {\n+    # If unsuccessful or if option not set, do the work in R\n     dplyr::summarise(dplyr::collect(.data), ...)\n\nReview comment:\n       I think this path should generate a `pulling data into R` warning\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-08-04T03:00:28.093+0000",
                    "updated": "2021-08-04T03:00:28.093+0000",
                    "started": "2021-08-04T03:00:28.092+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "633274",
                    "issueId": "13389850"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13389850/worklog/633275",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ianmcook commented on a change in pull request #10722:\nURL: https://github.com/apache/arrow/pull/10722#discussion_r682251881\n\n\n\n##########\nFile path: r/R/query-engine.R\n##########\n@@ -0,0 +1,75 @@\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#   http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing,\n+# software distributed under the License is distributed on an\n+# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+# KIND, either express or implied.  See the License for the\n+# specific language governing permissions and limitations\n+# under the License.\n+\n+ExecPlan <- R6Class(\"ExecPlan\",\n+  inherit = ArrowObject,\n+  public = list(\n+    Scan = function(dataset) {\n+      # Handle arrow_dplyr_query\n+      if (inherits(dataset, \"arrow_dplyr_query\")) {\n+        filter <- dataset$filtered_rows\n+        if (isTRUE(filter)) {\n+          filter <- Expression$scalar(TRUE)\n+        }\n+        # Use FieldsInExpression to find all from dataset$selected_columns\n+        colnames <- unique(unlist(map(\n\nReview comment:\n       Use `map_chr()` here to eliminate the `unlist()`?\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-08-04T03:06:16.688+0000",
                    "updated": "2021-08-04T03:06:16.688+0000",
                    "started": "2021-08-04T03:06:16.688+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "633275",
                    "issueId": "13389850"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13389850/worklog/633276",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ianmcook commented on a change in pull request #10722:\nURL: https://github.com/apache/arrow/pull/10722#discussion_r682255126\n\n\n\n##########\nFile path: r/R/dplyr-summarize.R\n##########\n@@ -28,14 +28,107 @@ summarise.arrow_dplyr_query <- function(.data, ..., .engine = c(\"arrow\", \"duckdb\n     dplyr::group_vars(.data) # vars needed for grouping\n   ))\n   .data <- dplyr::select(.data, vars_to_keep)\n-\n   if (match.arg(.engine) == \"duckdb\") {\n     dplyr::summarise(to_duckdb(.data), ...)\n-  } else {\n-    if (query_on_dataset(.data)) {\n-      not_implemented_for_dataset(\"summarize()\")\n+  } else if (isTRUE(getOption(\"arrow.summarize\", FALSE))) {\n\nReview comment:\n       Also it might be best to standardize on the `summarise` spelling with an `s`, for consistency with dplyr options like `dplyr.summarise.inform`\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-08-04T03:16:16.264+0000",
                    "updated": "2021-08-04T03:16:16.264+0000",
                    "started": "2021-08-04T03:16:16.263+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "633276",
                    "issueId": "13389850"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13389850/worklog/633278",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ianmcook commented on a change in pull request #10722:\nURL: https://github.com/apache/arrow/pull/10722#discussion_r682256920\n\n\n\n##########\nFile path: r/R/dplyr-summarize.R\n##########\n@@ -28,14 +28,107 @@ summarise.arrow_dplyr_query <- function(.data, ..., .engine = c(\"arrow\", \"duckdb\n     dplyr::group_vars(.data) # vars needed for grouping\n   ))\n   .data <- dplyr::select(.data, vars_to_keep)\n-\n   if (match.arg(.engine) == \"duckdb\") {\n     dplyr::summarise(to_duckdb(.data), ...)\n-  } else {\n-    if (query_on_dataset(.data)) {\n-      not_implemented_for_dataset(\"summarize()\")\n+  } else if (isTRUE(getOption(\"arrow.summarize\", FALSE))) {\n+    # Try stuff, if successful return()\n+    out <- try(do_arrow_summarize(.data, ...), silent = TRUE)\n+    if (inherits(out, \"try-error\")) {\n+      return(abandon_ship(call, .data, format(out)))\n+    } else {\n+      return(out)\n     }\n+  } else {\n+    # If unsuccessful or if option not set, do the work in R\n     dplyr::summarise(dplyr::collect(.data), ...)\n   }\n }\n summarise.Dataset <- summarise.ArrowTabular <- summarise.arrow_dplyr_query\n+\n+do_arrow_summarize <- function(.data, ...) {\n\nReview comment:\n       Handle the `.groups` argument to `dplyr::summarise()`:\r\n   ```suggestion\r\n   do_arrow_summarize <- function(.data, ..., .groups = NULL) {\r\n     if (!is.null(.groups)) {\r\n       abort(\"`summarize()` with `.groups` argument not supported in Arrow\")\r\n     }\r\n   ```\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-08-04T03:22:21.046+0000",
                    "updated": "2021-08-04T03:22:21.046+0000",
                    "started": "2021-08-04T03:22:21.045+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "633278",
                    "issueId": "13389850"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13389850/worklog/633286",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ianmcook commented on a change in pull request #10722:\nURL: https://github.com/apache/arrow/pull/10722#discussion_r682270571\n\n\n\n##########\nFile path: r/tests/testthat/test-dplyr-aggregate.R\n##########\n@@ -0,0 +1,165 @@\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#   http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing,\n+# software distributed under the License is distributed on an\n+# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+# KIND, either express or implied.  See the License for the\n+# specific language governing permissions and limitations\n+# under the License.\n+\n+skip_if_not_available(\"dataset\")\n+\n+withr::local_options(list(arrow.summarize = TRUE))\n+\n+library(dplyr)\n+library(stringr)\n+\n+tbl <- example_data\n+# Add some better string data\n+tbl$verses <- verses[[1]]\n+# c(\" a \", \"  b  \", \"   c   \", ...) increasing padding\n+# nchar =   3  5  7  9 11 13 15 17 19 21\n+tbl$padded_strings <- stringr::str_pad(letters[1:10], width = 2 * (1:10) + 1, side = \"both\")\n+tbl$some_grouping <- rep(c(1, 2), 5)\n+\n+test_that(\"Can aggregate\", {\n+  expect_dplyr_equal(\n+    input %>%\n+      summarize(total = sum(int, na.rm = TRUE)) %>%\n+      collect(),\n+    tbl\n+  )\n+  skip(\"ARROW-13497: This is failing because the default is na.rm = FALSE\")\n+  expect_dplyr_equal(\n+    input %>%\n+      summarize(total = sum(int)) %>%\n+      collect(),\n+    tbl\n+  )\n+})\n+\n+test_that(\"Group by sum on dataset\", {\n+  expect_dplyr_equal(\n+    input %>%\n+      group_by(some_grouping) %>%\n+      summarize(total = sum(int, na.rm = TRUE)) %>%\n+      arrange(some_grouping) %>%\n+      collect(),\n+    tbl\n+  )\n+\n+  expect_dplyr_equal(\n+    input %>%\n+      group_by(some_grouping) %>%\n+      summarize(total = sum(int * 4, na.rm = TRUE)) %>%\n+      arrange(some_grouping) %>%\n+      collect(),\n+    tbl\n+  )\n+\n+  skip(\"ARROW-13497: This is failing because the default is na.rm = FALSE\")\n+  expect_dplyr_equal(\n+    input %>%\n+      group_by(some_grouping) %>%\n+      summarize(total = sum(int)) %>%\n+      arrange(some_grouping) %>%\n+      collect(),\n+    tbl\n+  )\n+})\n+\n+test_that(\"Group by any/all\", {\n+  withr::local_options(list(arrow.debug = TRUE))\n+\n+  expect_dplyr_equal(\n+    input %>%\n+      group_by(some_grouping) %>%\n+      summarize(any(lgl, na.rm = TRUE)) %>%\n+      arrange(some_grouping) %>%\n+      collect(),\n+    tbl\n+  )\n+  expect_dplyr_equal(\n+    input %>%\n+      group_by(some_grouping) %>%\n+      summarize(all(lgl, na.rm = TRUE)) %>%\n+      arrange(some_grouping) %>%\n+      collect(),\n+    tbl\n+  )\n+  # ARROW-13497: na.rm option also is not being passed/received to any/all\n+\n+  expect_dplyr_equal(\n+    input %>%\n+      mutate(has_words = nchar(verses) < 0) %>%\n+      group_by(some_grouping) %>%\n+      summarize(any(has_words)) %>%\n+      arrange(some_grouping) %>%\n+      collect(),\n+    tbl\n+  )\n+  expect_dplyr_equal(\n+    input %>%\n+      mutate(has_words = nchar(verses) < 0) %>%\n+      group_by(some_grouping) %>%\n+      summarize(all(has_words)) %>%\n+      arrange(some_grouping) %>%\n+      collect(),\n+    tbl\n+  )\n+  skip(\"This seems to be calling base::nchar\")\n+  expect_dplyr_equal(\n+    input %>%\n+      group_by(some_grouping) %>%\n+      summarize(has_words = all(nchar(verses) < 0)) %>%\n+      arrange(some_grouping) %>%\n+      collect(),\n+    tbl\n+  )\n+})\n+\n+test_that(\"Filter and aggregate\", {\n+  expect_dplyr_equal(\n+    input %>%\n+      filter(some_grouping == 2) %>%\n+      summarize(total = sum(int, na.rm = TRUE)) %>%\n+      collect(),\n+    tbl\n+  )\n+\n+  expect_dplyr_equal(\n+    input %>%\n+      filter(int > 5) %>%\n+      summarize(total = sum(int, na.rm = TRUE)) %>%\n+      collect(),\n+    tbl\n+  )\n+\n+  expect_dplyr_equal(\n+    input %>%\n+      filter(some_grouping == 2) %>%\n+      group_by(some_grouping) %>%\n+      summarize(total = sum(int, na.rm = TRUE)) %>%\n+      arrange(some_grouping) %>%\n+      collect(),\n+    tbl\n+  )\n+\n+  expect_dplyr_equal(\n+    input %>%\n+      filter(int > 5) %>%\n+      group_by(some_grouping) %>%\n+      summarize(total = sum(int, na.rm = TRUE)) %>%\n+      arrange(some_grouping) %>%\n+      collect(),\n+    tbl\n+  )\n+})\n\nReview comment:\n       I opened ARROW-13543 to fix the case where the user calls `summarise()` with no aggregate function. Maybe also add a skipped or failing test for that here.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-08-04T04:06:40.163+0000",
                    "updated": "2021-08-04T04:06:40.163+0000",
                    "started": "2021-08-04T04:06:40.163+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "633286",
                    "issueId": "13389850"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13389850/worklog/633507",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nealrichardson commented on a change in pull request #10722:\nURL: https://github.com/apache/arrow/pull/10722#discussion_r682578342\n\n\n\n##########\nFile path: r/R/dplyr-summarize.R\n##########\n@@ -28,14 +28,107 @@ summarise.arrow_dplyr_query <- function(.data, ..., .engine = c(\"arrow\", \"duckdb\n     dplyr::group_vars(.data) # vars needed for grouping\n   ))\n   .data <- dplyr::select(.data, vars_to_keep)\n-\n   if (match.arg(.engine) == \"duckdb\") {\n     dplyr::summarise(to_duckdb(.data), ...)\n-  } else {\n-    if (query_on_dataset(.data)) {\n-      not_implemented_for_dataset(\"summarize()\")\n+  } else if (isTRUE(getOption(\"arrow.summarize\", FALSE))) {\n+    # Try stuff, if successful return()\n+    out <- try(do_arrow_summarize(.data, ...), silent = TRUE)\n+    if (inherits(out, \"try-error\")) {\n+      return(abandon_ship(call, .data, format(out)))\n+    } else {\n+      return(out)\n     }\n+  } else {\n+    # If unsuccessful or if option not set, do the work in R\n     dplyr::summarise(dplyr::collect(.data), ...)\n\nReview comment:\n       Maybe so but it doesn't in the released version, and we'll be deleting this else case before release\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-08-04T12:43:06.500+0000",
                    "updated": "2021-08-04T12:43:06.500+0000",
                    "started": "2021-08-04T12:43:06.500+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "633507",
                    "issueId": "13389850"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13389850/worklog/633508",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nealrichardson commented on a change in pull request #10722:\nURL: https://github.com/apache/arrow/pull/10722#discussion_r682580476\n\n\n\n##########\nFile path: r/R/query-engine.R\n##########\n@@ -0,0 +1,75 @@\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#   http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing,\n+# software distributed under the License is distributed on an\n+# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+# KIND, either express or implied.  See the License for the\n+# specific language governing permissions and limitations\n+# under the License.\n+\n+ExecPlan <- R6Class(\"ExecPlan\",\n+  inherit = ArrowObject,\n+  public = list(\n+    Scan = function(dataset) {\n+      # Handle arrow_dplyr_query\n+      if (inherits(dataset, \"arrow_dplyr_query\")) {\n+        filter <- dataset$filtered_rows\n+        if (isTRUE(filter)) {\n+          filter <- Expression$scalar(TRUE)\n+        }\n+        # Use FieldsInExpression to find all from dataset$selected_columns\n+        colnames <- unique(unlist(map(\n\nReview comment:\n       We can't because `dataset$selected_columns` is a list of Expressions that may contain 0, 1, or many FieldRefs\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-08-04T12:45:52.635+0000",
                    "updated": "2021-08-04T12:45:52.635+0000",
                    "started": "2021-08-04T12:45:52.634+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "633508",
                    "issueId": "13389850"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13389850/worklog/633513",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nealrichardson commented on a change in pull request #10722:\nURL: https://github.com/apache/arrow/pull/10722#discussion_r682596520\n\n\n\n##########\nFile path: r/R/dplyr-summarize.R\n##########\n@@ -28,14 +28,107 @@ summarise.arrow_dplyr_query <- function(.data, ..., .engine = c(\"arrow\", \"duckdb\n     dplyr::group_vars(.data) # vars needed for grouping\n   ))\n   .data <- dplyr::select(.data, vars_to_keep)\n-\n   if (match.arg(.engine) == \"duckdb\") {\n     dplyr::summarise(to_duckdb(.data), ...)\n-  } else {\n-    if (query_on_dataset(.data)) {\n-      not_implemented_for_dataset(\"summarize()\")\n+  } else if (isTRUE(getOption(\"arrow.summarize\", FALSE))) {\n\nReview comment:\n       I removed the flag now. It had the side effect of raising the warning you asked about below in the unsupported cases. This is probably the right path forward.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-08-04T13:06:20.566+0000",
                    "updated": "2021-08-04T13:06:20.566+0000",
                    "started": "2021-08-04T13:06:20.566+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "633513",
                    "issueId": "13389850"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13389850/worklog/633514",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ianmcook commented on a change in pull request #10722:\nURL: https://github.com/apache/arrow/pull/10722#discussion_r682256920\n\n\n\n##########\nFile path: r/R/dplyr-summarize.R\n##########\n@@ -28,14 +28,107 @@ summarise.arrow_dplyr_query <- function(.data, ..., .engine = c(\"arrow\", \"duckdb\n     dplyr::group_vars(.data) # vars needed for grouping\n   ))\n   .data <- dplyr::select(.data, vars_to_keep)\n-\n   if (match.arg(.engine) == \"duckdb\") {\n     dplyr::summarise(to_duckdb(.data), ...)\n-  } else {\n-    if (query_on_dataset(.data)) {\n-      not_implemented_for_dataset(\"summarize()\")\n+  } else if (isTRUE(getOption(\"arrow.summarize\", FALSE))) {\n+    # Try stuff, if successful return()\n+    out <- try(do_arrow_summarize(.data, ...), silent = TRUE)\n+    if (inherits(out, \"try-error\")) {\n+      return(abandon_ship(call, .data, format(out)))\n+    } else {\n+      return(out)\n     }\n+  } else {\n+    # If unsuccessful or if option not set, do the work in R\n     dplyr::summarise(dplyr::collect(.data), ...)\n   }\n }\n summarise.Dataset <- summarise.ArrowTabular <- summarise.arrow_dplyr_query\n+\n+do_arrow_summarize <- function(.data, ...) {\n\nReview comment:\n       Handle the `.groups` argument to `dplyr::summarise()`:\r\n   ```suggestion\r\n   do_arrow_summarize <- function(.data, ..., .groups = NULL) {\r\n     if (!is.null(.groups)) {\r\n       # ARROW-13550\r\n       abort(\"`summarize()` with `.groups` argument not supported in Arrow\")\r\n     }\r\n   ```\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-08-04T13:07:23.938+0000",
                    "updated": "2021-08-04T13:07:23.938+0000",
                    "started": "2021-08-04T13:07:23.938+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "633514",
                    "issueId": "13389850"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13389850/worklog/633515",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nealrichardson commented on a change in pull request #10722:\nURL: https://github.com/apache/arrow/pull/10722#discussion_r682599737\n\n\n\n##########\nFile path: r/tests/testthat/test-dplyr-aggregate.R\n##########\n@@ -0,0 +1,165 @@\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#   http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing,\n+# software distributed under the License is distributed on an\n+# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+# KIND, either express or implied.  See the License for the\n+# specific language governing permissions and limitations\n+# under the License.\n+\n+skip_if_not_available(\"dataset\")\n+\n+withr::local_options(list(arrow.summarize = TRUE))\n+\n+library(dplyr)\n+library(stringr)\n+\n+tbl <- example_data\n+# Add some better string data\n+tbl$verses <- verses[[1]]\n+# c(\" a \", \"  b  \", \"   c   \", ...) increasing padding\n+# nchar =   3  5  7  9 11 13 15 17 19 21\n+tbl$padded_strings <- stringr::str_pad(letters[1:10], width = 2 * (1:10) + 1, side = \"both\")\n+tbl$some_grouping <- rep(c(1, 2), 5)\n+\n+test_that(\"Can aggregate\", {\n+  expect_dplyr_equal(\n+    input %>%\n+      summarize(total = sum(int, na.rm = TRUE)) %>%\n+      collect(),\n+    tbl\n+  )\n+  skip(\"ARROW-13497: This is failing because the default is na.rm = FALSE\")\n+  expect_dplyr_equal(\n+    input %>%\n+      summarize(total = sum(int)) %>%\n+      collect(),\n+    tbl\n+  )\n+})\n+\n+test_that(\"Group by sum on dataset\", {\n+  expect_dplyr_equal(\n+    input %>%\n+      group_by(some_grouping) %>%\n+      summarize(total = sum(int, na.rm = TRUE)) %>%\n+      arrange(some_grouping) %>%\n+      collect(),\n+    tbl\n+  )\n+\n+  expect_dplyr_equal(\n+    input %>%\n+      group_by(some_grouping) %>%\n+      summarize(total = sum(int * 4, na.rm = TRUE)) %>%\n+      arrange(some_grouping) %>%\n+      collect(),\n+    tbl\n+  )\n+\n+  skip(\"ARROW-13497: This is failing because the default is na.rm = FALSE\")\n+  expect_dplyr_equal(\n+    input %>%\n+      group_by(some_grouping) %>%\n+      summarize(total = sum(int)) %>%\n+      arrange(some_grouping) %>%\n+      collect(),\n+    tbl\n+  )\n+})\n+\n+test_that(\"Group by any/all\", {\n+  withr::local_options(list(arrow.debug = TRUE))\n+\n+  expect_dplyr_equal(\n+    input %>%\n+      group_by(some_grouping) %>%\n+      summarize(any(lgl, na.rm = TRUE)) %>%\n+      arrange(some_grouping) %>%\n+      collect(),\n+    tbl\n+  )\n+  expect_dplyr_equal(\n+    input %>%\n+      group_by(some_grouping) %>%\n+      summarize(all(lgl, na.rm = TRUE)) %>%\n+      arrange(some_grouping) %>%\n+      collect(),\n+    tbl\n+  )\n+  # ARROW-13497: na.rm option also is not being passed/received to any/all\n+\n+  expect_dplyr_equal(\n+    input %>%\n+      mutate(has_words = nchar(verses) < 0) %>%\n+      group_by(some_grouping) %>%\n+      summarize(any(has_words)) %>%\n+      arrange(some_grouping) %>%\n+      collect(),\n+    tbl\n+  )\n+  expect_dplyr_equal(\n+    input %>%\n+      mutate(has_words = nchar(verses) < 0) %>%\n+      group_by(some_grouping) %>%\n+      summarize(all(has_words)) %>%\n+      arrange(some_grouping) %>%\n+      collect(),\n+    tbl\n+  )\n+  skip(\"This seems to be calling base::nchar\")\n+  expect_dplyr_equal(\n+    input %>%\n+      group_by(some_grouping) %>%\n+      summarize(has_words = all(nchar(verses) < 0)) %>%\n+      arrange(some_grouping) %>%\n+      collect(),\n+    tbl\n+  )\n+})\n+\n+test_that(\"Filter and aggregate\", {\n+  expect_dplyr_equal(\n+    input %>%\n+      filter(some_grouping == 2) %>%\n+      summarize(total = sum(int, na.rm = TRUE)) %>%\n+      collect(),\n+    tbl\n+  )\n+\n+  expect_dplyr_equal(\n+    input %>%\n+      filter(int > 5) %>%\n+      summarize(total = sum(int, na.rm = TRUE)) %>%\n+      collect(),\n+    tbl\n+  )\n+\n+  expect_dplyr_equal(\n+    input %>%\n+      filter(some_grouping == 2) %>%\n+      group_by(some_grouping) %>%\n+      summarize(total = sum(int, na.rm = TRUE)) %>%\n+      arrange(some_grouping) %>%\n+      collect(),\n+    tbl\n+  )\n+\n+  expect_dplyr_equal(\n+    input %>%\n+      filter(int > 5) %>%\n+      group_by(some_grouping) %>%\n+      summarize(total = sum(int, na.rm = TRUE)) %>%\n+      arrange(some_grouping) %>%\n+      collect(),\n+    tbl\n+  )\n+})\n\nReview comment:\n       I'll leave that to the followup since we're so far from the release, and I don't want to block others from picking up these followups.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-08-04T13:10:00.112+0000",
                    "updated": "2021-08-04T13:10:00.112+0000",
                    "started": "2021-08-04T13:10:00.112+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "633515",
                    "issueId": "13389850"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/2",
            "id": "2",
            "description": "A new feature of the product, which has yet to be developed.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21141&avatarType=issuetype",
            "name": "New Feature",
            "subtask": false,
            "avatarId": 21141
        },
        "timespent": 14400,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@27d0840d[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@26b7c39a[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@4799c1bc[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@5faa71c6[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@4c9d7af5[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@7eeb5643[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@77f6fc03[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@7b5e977a[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@5cb31036[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@784e0cad[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@3898e143[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@3772446d[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 14400,
        "customfield_12312520": null,
        "customfield_12312521": "Wed Aug 04 19:10:27 UTC 2021",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2021-08-04T19:10:27.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-13344/watchers",
            "watchCount": 3,
            "isWatching": false
        },
        "created": "2021-07-15T13:48:06.000+0000",
        "updated": "2021-08-12T18:32:42.000+0000",
        "timeoriginalestimate": null,
        "description": null,
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "4h",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 14400
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[R] Initial bindings for ExecPlan/ExecNode",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13389850/comment/17393404",
                    "id": "17393404",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=npr",
                        "name": "npr",
                        "key": "npr",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
                        },
                        "displayName": "Neal Richardson",
                        "active": true,
                        "timeZone": "America/Los_Angeles"
                    },
                    "body": "Issue resolved by pull request 10722\n[https://github.com/apache/arrow/pull/10722]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=npr",
                        "name": "npr",
                        "key": "npr",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
                        },
                        "displayName": "Neal Richardson",
                        "active": true,
                        "timeZone": "America/Los_Angeles"
                    },
                    "created": "2021-08-04T19:10:27.930+0000",
                    "updated": "2021-08-04T19:10:27.930+0000"
                }
            ],
            "maxResults": 1,
            "total": 1,
            "startAt": 0
        },
        "customfield_12311820": "0|z0szdk:",
        "customfield_12314139": null
    }
}