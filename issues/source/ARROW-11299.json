{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13353004",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13353004",
    "key": "ARROW-11299",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12349493",
                "id": "12349493",
                "description": "",
                "name": "4.0.0",
                "archived": false,
                "released": true,
                "releaseDate": "2021-04-26"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "name": "Major",
            "id": "3"
        },
        "labels": [
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12345977",
                "id": "12345977",
                "description": "",
                "name": "2.0.0",
                "archived": false,
                "released": true,
                "releaseDate": "2020-10-19"
            }
        ],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=yibocai",
            "name": "yibocai",
            "key": "yibo",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=yibo&avatarId=47542",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=yibo&avatarId=47542",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=yibo&avatarId=47542",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=yibo&avatarId=47542"
            },
            "displayName": "Yibo Cai",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12328935",
                "id": "12328935",
                "name": "C++"
            },
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12328936",
                "id": "12328936",
                "name": "Python"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=yibocai",
            "name": "yibocai",
            "key": "yibo",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=yibo&avatarId=47542",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=yibo&avatarId=47542",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=yibo&avatarId=47542",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=yibo&avatarId=47542"
            },
            "displayName": "Yibo Cai",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=yibocai",
            "name": "yibocai",
            "key": "yibo",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=yibo&avatarId=47542",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=yibo&avatarId=47542",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=yibo&avatarId=47542",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=yibo&avatarId=47542"
            },
            "displayName": "Yibo Cai",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "aggregateprogress": {
            "progress": 8400,
            "total": 8400,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 8400,
            "total": 8400,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-11299/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 14,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13353004/worklog/538192",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "cyb70289 opened a new pull request #9274:\nURL: https://github.com/apache/arrow/pull/9274\n\n\n   Many `invalid-offsetof` warnings in python building:\r\n   ...\r\n   ~/arrow/python/build/temp.linux-x86_64-3.6/_compute.cpp:26034:146:\r\n   warning: offsetof within non-standard-layout type \u2018__pyx_obj_7pyarrow_8_compute__CastOptions\u2019 is undefined [-Winvalid-offsetof]\r\n    x_type_7pyarrow_8_compute__CastOptions.tp_weaklistoffset = offsetof(struct __pyx_obj_7pyarrow_8_compute__CastOptions, __pyx_base.__pyx_base.__weakref__);\r\n   ...\r\n   \r\n   Cython generated code calls `offsetof` on FunctionOptions based classes.\r\n   `offsetof` only applies to C++ classes with `standard layout type` [1],\r\n   which excludes virtual functions.\r\n   \r\n   Fix the warning by removing virtual destructor in FunctionOptions class.\r\n   No FunctionOptions derived class has explicit destructor, so removing\r\n   the virtual destructor looks safe now. But it may cause memory leak in\r\n   the future when some derived classes have explicit destructors.\r\n   \r\n   Any better way to handle this issue?\r\n   \r\n   [1] https://en.cppreference.com/w/cpp/named_req/StandardLayoutType\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-01-20T03:15:40.073+0000",
                    "updated": "2021-01-20T03:15:40.073+0000",
                    "started": "2021-01-20T03:15:40.073+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "538192",
                    "issueId": "13353004"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13353004/worklog/538193",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "github-actions[bot] commented on pull request #9274:\nURL: https://github.com/apache/arrow/pull/9274#issuecomment-763300961\n\n\n   https://issues.apache.org/jira/browse/ARROW-11299\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-01-20T03:17:28.185+0000",
                    "updated": "2021-01-20T03:17:28.185+0000",
                    "started": "2021-01-20T03:17:28.185+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "538193",
                    "issueId": "13353004"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13353004/worklog/538206",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "cyb70289 commented on pull request #9274:\nURL: https://github.com/apache/arrow/pull/9274#issuecomment-763319885\n\n\n   All debug build failed due to this change. FunctionOptions is supposed to be polymorphic, but looks it not necessary.\r\n   Would like to hear comments before moving on.\r\n   @bkietz \n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-01-20T04:20:11.017+0000",
                    "updated": "2021-01-20T04:20:11.017+0000",
                    "started": "2021-01-20T04:20:11.016+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "538206",
                    "issueId": "13353004"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13353004/worklog/538289",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "cyb70289 edited a comment on pull request #9274:\nURL: https://github.com/apache/arrow/pull/9274#issuecomment-763319885\n\n\n   All debug build failed due to this change. FunctionOptions is supposed to be polymorphic, but looks not necessary.\r\n   Would like to hear comments before moving on.\r\n   @bkietz @pitrou \n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-01-20T09:24:41.738+0000",
                    "updated": "2021-01-20T09:24:41.738+0000",
                    "started": "2021-01-20T09:24:41.738+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "538289",
                    "issueId": "13353004"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13353004/worklog/538578",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "bkietz commented on pull request #9274:\nURL: https://github.com/apache/arrow/pull/9274#issuecomment-763823491\n\n\n   @cyb70289 `arrow::dataset::Expression::Call::options` requires that virtual destructor since a `shared_ptr<FunctionOptions>` is used to store subclasses of FunctionOptions. Removing this virtual destructor results in a resource leak since the derived classes' (implicit) destructors are not being called, leaking data members such as `arrow::compute::SetLookupOptions::value_set` which are not destroyed.\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-01-20T17:53:02.664+0000",
                    "updated": "2021-01-20T17:53:02.664+0000",
                    "started": "2021-01-20T17:53:02.663+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "538578",
                    "issueId": "13353004"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13353004/worklog/538588",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "bkietz commented on pull request #9274:\nURL: https://github.com/apache/arrow/pull/9274#issuecomment-763833521\n\n\n   I think the best way to resolve this issue is to avoid direct instances of derived classes of FunctionOptions in Cython, since Cython inappropriately applies `offsetof`. For example, note that the warning is emitted for [MinMaxOptions](https://github.com/apache/arrow/blob/fdc63acdb68adade0d68e232dfcc892dc0ecf700/python/pyarrow/_compute.pyx#L670) but not for [SetLookupOptions](https://github.com/apache/arrow/blob/fdc63acdb68adade0d68e232dfcc892dc0ecf700/python/pyarrow/_compute.pyx#L732) (where the options are held by unique_ptr rather than being a direct member).\r\n   \r\n   I'd recommend the following approach: rewrite `_compute.pyx::FunctionOptions` to hold a `shared_ptr[CFunctionOptions]`, and let the `cdef` classes acquire a non owning pointer to the appropriate FunctionOptions subclass. For example:\r\n   \r\n   `_compute.pxd`\r\n   ```python\r\n   cdef class FunctionOptions(_Weakrefable):\r\n       cdef:\r\n           shared_ptr[CFunctionOptions] options\r\n   \r\n       cdef const CFunctionOptions* get_options(self) except NULL\r\n   ```\r\n   \r\n   `_compute.pyx`\r\n   ```python\r\n   cdef class _CastOptions(FunctionOptions):\r\n       cdef:\r\n           const CCastOptions* cast_options\r\n   \r\n       __slots__ = ()  # avoid mistakingly creating attributes\r\n   \r\n       cdef const CFunctionOptions* get_options(self) except NULL:\r\n           return self.cast_options\r\n   ```\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-01-20T18:09:23.734+0000",
                    "updated": "2021-01-20T18:09:23.734+0000",
                    "started": "2021-01-20T18:09:23.734+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "538588",
                    "issueId": "13353004"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13353004/worklog/538842",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "cyb70289 commented on pull request #9274:\nURL: https://github.com/apache/arrow/pull/9274#issuecomment-764217852\n\n\n   > @cyb70289 `arrow::dataset::Expression::Call::options` requires that virtual destructor since a `shared_ptr<FunctionOptions>` is used to store subclasses of FunctionOptions. Removing this virtual destructor results in a resource leak since the derived classes' (implicit) destructors are not being called, leaking data members such as `arrow::compute::SetLookupOptions::value_set` which are not destroyed.\r\n   \r\n   Thanks @bkietz , I missed this point.\r\n   Will update according to your comment. \n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-01-21T03:50:27.018+0000",
                    "updated": "2021-01-21T03:50:27.018+0000",
                    "started": "2021-01-21T03:50:27.018+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "538842",
                    "issueId": "13353004"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13353004/worklog/539851",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "cyb70289 commented on pull request #9274:\nURL: https://github.com/apache/arrow/pull/9274#issuecomment-764217852\n\n\n   > @cyb70289 `arrow::dataset::Expression::Call::options` requires that virtual destructor since a `shared_ptr<FunctionOptions>` is used to store subclasses of FunctionOptions. Removing this virtual destructor results in a resource leak since the derived classes' (implicit) destructors are not being called, leaking data members such as `arrow::compute::SetLookupOptions::value_set` which are not destroyed.\r\n   \r\n   Thanks @bkietz , I missed this point.\r\n   Will update according to your comment. \n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-01-22T06:25:36.208+0000",
                    "updated": "2021-01-22T06:25:36.208+0000",
                    "started": "2021-01-22T06:25:36.208+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "539851",
                    "issueId": "13353004"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13353004/worklog/540057",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "cyb70289 commented on a change in pull request #9274:\nURL: https://github.com/apache/arrow/pull/9274#discussion_r562483502\n\n\n\n##########\nFile path: python/pyarrow/_compute.pyx\n##########\n@@ -481,88 +481,89 @@ cdef class FunctionOptions(_Weakrefable):\n \n cdef class _CastOptions(FunctionOptions):\n     cdef:\n-        CCastOptions options\n+        unique_ptr[CCastOptions] options\n \n     __slots__ = ()  # avoid mistakingly creating attributes\n \n     cdef const CFunctionOptions* get_options(self) except NULL:\n-        return &self.options\n+        return self.options.get()\n \n     def _set_options(self, DataType target_type, allow_int_overflow,\n                      allow_time_truncate, allow_time_overflow,\n                      allow_float_truncate, allow_invalid_utf8):\n+        self.options.reset(new CCastOptions())\n         self._set_type(target_type)\n         if allow_int_overflow is not None:\n-            self.allow_int_overflow = allow_int_overflow\n+            deref(self.options).allow_int_overflow = allow_int_overflow\n         if allow_time_truncate is not None:\n-            self.allow_time_truncate = allow_time_truncate\n+            deref(self.options).allow_time_truncate = allow_time_truncate\n         if allow_time_overflow is not None:\n-            self.allow_time_overflow = allow_time_overflow\n+            deref(self.options).allow_time_overflow = allow_time_overflow\n         if allow_float_truncate is not None:\n-            self.allow_float_truncate = allow_float_truncate\n+            deref(self.options).allow_float_truncate = allow_float_truncate\n         if allow_invalid_utf8 is not None:\n-            self.allow_invalid_utf8 = allow_invalid_utf8\n+            deref(self.options).allow_invalid_utf8 = allow_invalid_utf8\n \n     def _set_type(self, target_type=None):\n         if target_type is not None:\n-            self.options.to_type = (\n+            deref(self.options).to_type = (\n                 (<DataType> ensure_type(target_type)).sp_type\n             )\n \n     def _set_safe(self):\n-        self.options = CCastOptions.Safe()\n+        self.options.reset(new CCastOptions(CCastOptions.Safe()))\n\nReview comment:\n       Any way to assign `self.options` directly?\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-01-22T09:03:03.544+0000",
                    "updated": "2021-01-22T09:03:03.544+0000",
                    "started": "2021-01-22T09:03:03.544+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "540057",
                    "issueId": "13353004"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13353004/worklog/540060",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "cyb70289 commented on a change in pull request #9274:\nURL: https://github.com/apache/arrow/pull/9274#discussion_r562484017\n\n\n\n##########\nFile path: python/pyarrow/_compute.pyx\n##########\n@@ -481,88 +481,89 @@ cdef class FunctionOptions(_Weakrefable):\n \n cdef class _CastOptions(FunctionOptions):\n     cdef:\n-        CCastOptions options\n+        unique_ptr[CCastOptions] options\n \n     __slots__ = ()  # avoid mistakingly creating attributes\n \n     cdef const CFunctionOptions* get_options(self) except NULL:\n-        return &self.options\n+        return self.options.get()\n \n     def _set_options(self, DataType target_type, allow_int_overflow,\n                      allow_time_truncate, allow_time_overflow,\n                      allow_float_truncate, allow_invalid_utf8):\n+        self.options.reset(new CCastOptions())\n         self._set_type(target_type)\n         if allow_int_overflow is not None:\n-            self.allow_int_overflow = allow_int_overflow\n+            deref(self.options).allow_int_overflow = allow_int_overflow\n\nReview comment:\n       Looks `options` is missed in current code.\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-01-22T09:04:02.621+0000",
                    "updated": "2021-01-22T09:04:02.621+0000",
                    "started": "2021-01-22T09:04:02.621+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "540060",
                    "issueId": "13353004"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13353004/worklog/540192",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "bkietz commented on a change in pull request #9274:\nURL: https://github.com/apache/arrow/pull/9274#discussion_r562633900\n\n\n\n##########\nFile path: python/pyarrow/_compute.pyx\n##########\n@@ -481,88 +481,89 @@ cdef class FunctionOptions(_Weakrefable):\n \n cdef class _CastOptions(FunctionOptions):\n     cdef:\n-        CCastOptions options\n+        unique_ptr[CCastOptions] options\n \n     __slots__ = ()  # avoid mistakingly creating attributes\n \n     cdef const CFunctionOptions* get_options(self) except NULL:\n-        return &self.options\n+        return self.options.get()\n \n     def _set_options(self, DataType target_type, allow_int_overflow,\n                      allow_time_truncate, allow_time_overflow,\n                      allow_float_truncate, allow_invalid_utf8):\n+        self.options.reset(new CCastOptions())\n         self._set_type(target_type)\n         if allow_int_overflow is not None:\n-            self.allow_int_overflow = allow_int_overflow\n+            deref(self.options).allow_int_overflow = allow_int_overflow\n\nReview comment:\n       I'm not sure what you mean here. Note that `self.allow_int_overflow = ` is a property setter which modifies the corresponding field in CCastOptions, so substituting `deref(self.options).allow_int_overflow = ` here is unnecessary\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-01-22T13:35:43.269+0000",
                    "updated": "2021-01-22T13:35:43.269+0000",
                    "started": "2021-01-22T13:35:43.269+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "540192",
                    "issueId": "13353004"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13353004/worklog/540193",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "bkietz commented on a change in pull request #9274:\nURL: https://github.com/apache/arrow/pull/9274#discussion_r562634717\n\n\n\n##########\nFile path: python/pyarrow/_compute.pyx\n##########\n@@ -481,88 +481,89 @@ cdef class FunctionOptions(_Weakrefable):\n \n cdef class _CastOptions(FunctionOptions):\n     cdef:\n-        CCastOptions options\n+        unique_ptr[CCastOptions] options\n \n     __slots__ = ()  # avoid mistakingly creating attributes\n \n     cdef const CFunctionOptions* get_options(self) except NULL:\n-        return &self.options\n+        return self.options.get()\n \n     def _set_options(self, DataType target_type, allow_int_overflow,\n                      allow_time_truncate, allow_time_overflow,\n                      allow_float_truncate, allow_invalid_utf8):\n+        self.options.reset(new CCastOptions())\n         self._set_type(target_type)\n         if allow_int_overflow is not None:\n-            self.allow_int_overflow = allow_int_overflow\n+            deref(self.options).allow_int_overflow = allow_int_overflow\n         if allow_time_truncate is not None:\n-            self.allow_time_truncate = allow_time_truncate\n+            deref(self.options).allow_time_truncate = allow_time_truncate\n         if allow_time_overflow is not None:\n-            self.allow_time_overflow = allow_time_overflow\n+            deref(self.options).allow_time_overflow = allow_time_overflow\n         if allow_float_truncate is not None:\n-            self.allow_float_truncate = allow_float_truncate\n+            deref(self.options).allow_float_truncate = allow_float_truncate\n         if allow_invalid_utf8 is not None:\n-            self.allow_invalid_utf8 = allow_invalid_utf8\n+            deref(self.options).allow_invalid_utf8 = allow_invalid_utf8\n \n     def _set_type(self, target_type=None):\n         if target_type is not None:\n-            self.options.to_type = (\n+            deref(self.options).to_type = (\n                 (<DataType> ensure_type(target_type)).sp_type\n             )\n \n     def _set_safe(self):\n-        self.options = CCastOptions.Safe()\n+        self.options.reset(new CCastOptions(CCastOptions.Safe()))\n\nReview comment:\n       I think this is the most efficient way to write this in cython.\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-01-22T13:37:06.390+0000",
                    "updated": "2021-01-22T13:37:06.390+0000",
                    "started": "2021-01-22T13:37:06.390+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "540193",
                    "issueId": "13353004"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13353004/worklog/540202",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "cyb70289 commented on a change in pull request #9274:\nURL: https://github.com/apache/arrow/pull/9274#discussion_r562660367\n\n\n\n##########\nFile path: python/pyarrow/_compute.pyx\n##########\n@@ -481,88 +481,89 @@ cdef class FunctionOptions(_Weakrefable):\n \n cdef class _CastOptions(FunctionOptions):\n     cdef:\n-        CCastOptions options\n+        unique_ptr[CCastOptions] options\n \n     __slots__ = ()  # avoid mistakingly creating attributes\n \n     cdef const CFunctionOptions* get_options(self) except NULL:\n-        return &self.options\n+        return self.options.get()\n \n     def _set_options(self, DataType target_type, allow_int_overflow,\n                      allow_time_truncate, allow_time_overflow,\n                      allow_float_truncate, allow_invalid_utf8):\n+        self.options.reset(new CCastOptions())\n         self._set_type(target_type)\n         if allow_int_overflow is not None:\n-            self.allow_int_overflow = allow_int_overflow\n+            deref(self.options).allow_int_overflow = allow_int_overflow\n\nReview comment:\n       Restored to original code.\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-01-22T14:17:48.570+0000",
                    "updated": "2021-01-22T14:17:48.570+0000",
                    "started": "2021-01-22T14:17:48.570+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "540202",
                    "issueId": "13353004"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13353004/worklog/540284",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "bkietz closed pull request #9274:\nURL: https://github.com/apache/arrow/pull/9274\n\n\n   \n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-01-22T18:20:58.865+0000",
                    "updated": "2021-01-22T18:20:58.865+0000",
                    "started": "2021-01-22T18:20:58.865+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "540284",
                    "issueId": "13353004"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
            "id": "1",
            "description": "A problem which impairs or prevents the functions of the product.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
            "name": "Bug",
            "subtask": false,
            "avatarId": 21133
        },
        "timespent": 8400,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@7fcb0ec9[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@204c1b37[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@44ebbd1a[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@43e9313[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@3339a82c[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@5a761ab2[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@43ec6f8b[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@333acaee[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@4dbc7c6d[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@27754ce2[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@7c5ffb0[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@624d381c[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 8400,
        "customfield_12312520": null,
        "customfield_12312521": "Fri Jan 22 18:20:54 UTC 2021",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2021-01-22T18:20:54.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-11299/watchers",
            "watchCount": 2,
            "isWatching": false
        },
        "created": "2021-01-18T08:16:27.000+0000",
        "updated": "2021-04-18T15:59:21.000+0000",
        "timeoriginalestimate": null,
        "description": "Many warnings about compute kernel options when building Arrow python.\r\nRemoving below line suppresses the warnings.\r\nhttps://github.com/apache/arrow/blob/140135908c5d131ceac31a0e529f9b9b763b1106/cpp/src/arrow/compute/function.h#L45\r\nI think the reason is virtual destructor makes the structure non C compatible and cannot use offsetof macro safely.\r\nAs function options are straightforward, looks destructor is not necessary.\r\n[~bkietz]\r\n\r\n*Steps to reproduce*\r\nbuild arrow cpp\r\n{code:bash}\r\n ~/arrow/cpp/release $ cmake -GNinja -DCMAKE_BUILD_TYPE=Release -DARROW_COMPUTE=ON -DARROW_BUILD_TESTS=ON -DCMAKE_INSTALL_PREFIX=$(pwd)/_install -DCMAKE_INSTALL_LIBDIR=lib -DARROW_PYTHON=ON -DCMAKE_CXX_COMPILER=/usr/bin/clang++-9 -DCMAKE_C_COMPILER=/usr/bin/clang-9 ..\r\n\r\n~/arrow/cpp/release $ ninja install\r\n{code}\r\n\r\nbuild arrow python\r\n{code:bash}\r\n ~/arrow/python $ python --version\r\n Python 3.6.9\r\n\r\n~/arrow/python $ python setup.py build_ext --inplace\r\n ......\r\n [ 93%] Building CXX object CMakeFiles/_compute.dir/_compute.cpp.o [27/1691]\r\n In file included from /usr/include/x86_64-linux-gnu/bits/types/stack_t.h:23:0, \r\n from /usr/include/signal.h:303,\r\n from /home/cyb/archery/lib/python3.6/site-packages/numpy/core/include/numpy/npy_interrupt.h:84,\r\n from /home/cyb/archery/lib/python3.6/site-packages/numpy/core/include/numpy/arrayobject.h:5,\r\n from /home/cyb/arrow/cpp/release/_install/include/arrow/python/numpy_interop.h:41,\r\n from /home/cyb/arrow/cpp/release/_install/include/arrow/python/helpers.h:27,\r\n from /home/cyb/arrow/cpp/release/_install/include/arrow/python/api.h:24,\r\n from /home/cyb/arrow/python/build/temp.linux-x86_64-3.6/_compute.cpp:696:\r\n /home/cyb/arrow/python/build/temp.linux-x86_64-3.6/_compute.cpp: In function \u2018int __Pyx_modinit_type_init_code()\u2019:\r\n /home/cyb/arrow/python/build/temp.linux-x86_64-3.6/_compute.cpp:26034:146: warning: offsetof within non-standard-layout type \u2018__pyx_obj_7pyarrow_8_compute__CastOptions\u2019 is undefined [-Winvalid-offsetof]\r\n x_type_7pyarrow_8_compute__CastOptions.tp_weaklistoffset = offsetof(struct __pyx_obj_7pyarrow_8_compute__CastOptions, __pyx_base.__pyx_base.__weakref__);\r\n ^\r\n /home/cyb/arrow/python/build/temp.linux-x86_64-3.6/_compute.cpp:26066:150: warning: offsetof within non-standard-layout type \u2018__pyx_obj_7pyarrow_8_compute__FilterOptions\u2019 is undefined [-Winvalid-offsetof]\r\n type_7pyarrow_8_compute__FilterOptions.tp_weaklistoffset = offsetof(struct __pyx_obj_7pyarrow_8_compute__FilterOptions, __pyx_base.__pyx_base.__weakref__);\r\n ^\r\n /home/cyb/arrow/python/build/temp.linux-x86_64-3.6/_compute.cpp:26082:146: warning: offsetof within non-standard-layout type \u2018__pyx_obj_7pyarrow_8_compute__TakeOptions\u2019 is undefined [-Winvalid-offsetof]\r\n x_type_7pyarrow_8_compute__TakeOptions.tp_weaklistoffset = offsetof(struct __pyx_obj_7pyarrow_8_compute__TakeOptions, __pyx_base.__pyx_base.__weakref__);\r\n ^\r\n /home/cyb/arrow/python/build/temp.linux-x86_64-3.6/_compute.cpp:26130:150: warning: offsetof within non-standard-layout type \u2018__pyx_obj_7pyarrow_8_compute__MinMaxOptions\u2019 is undefined [-Winvalid-offsetof]\r\n type_7pyarrow_8_compute__MinMaxOptions.tp_weaklistoffset = offsetof(struct __pyx_obj_7pyarrow_8_compute__MinMaxOptions, __pyx_base.__pyx_base.__weakref__);\r\n ^\r\n /home/cyb/arrow/python/build/temp.linux-x86_64-3.6/_compute.cpp:26146:148: warning: offsetof within non-standard-layout type \u2018__pyx_obj_7pyarrow_8_compute__CountOptions\u2019 is undefined [-Winvalid-offsetof]\r\n _type_7pyarrow_8_compute__CountOptions.tp_weaklistoffset = offsetof(struct __pyx_obj_7pyarrow_8_compute__CountOptions, __pyx_base.__pyx_base.__weakref__);\r\n ^ \r\n /home/cyb/arrow/python/build/temp.linux-x86_64-3.6/_compute.cpp:26162:146: warning: offsetof within non-standard-layout type \u2018__pyx_obj_7pyarrow_8_compute__ModeOptions\u2019 is undefined [-Winvalid-offsetof]\r\n x_type_7pyarrow_8_compute__ModeOptions.tp_weaklistoffset = offsetof(struct __pyx_obj_7pyarrow_8_compute__ModeOptions, __pyx_base.__pyx_base.__weakref__);\r\n ^\r\n /home/cyb/arrow/python/build/temp.linux-x86_64-3.6/_compute.cpp:26210:154: warning: offsetof within non-standard-layout type \u2018__pyx_obj_7pyarrow_8_compute__VarianceOptions\u2019 is undefined [-Winvalid-offsetof]\r\n pe_7pyarrow_8_compute__VarianceOptions.tp_weaklistoffset = offsetof(struct __pyx_obj_7pyarrow_8_compute__VarianceOptions, __pyx_base.__pyx_base.__weakref__);\r\n ^\r\n /home/cyb/arrow/python/build/temp.linux-x86_64-3.6/_compute.cpp:26258:156: warning: offsetof within non-standard-layout type \u2018__pyx_obj_7pyarrow_8_compute__ArraySortOptions\u2019 is undefined [-Winvalid-offsetof]\r\n e_7pyarrow_8_compute__ArraySortOptions.tp_weaklistoffset = offsetof(struct __pyx_obj_7pyarrow_8_compute__ArraySortOptions, __pyx_base.__pyx_base.__weakref__);\r\n ^\r\n /home/cyb/arrow/python/build/temp.linux-x86_64-3.6/_compute.cpp:26274:146: warning: offsetof within non-standard-layout type \u2018__pyx_obj_7pyarrow_8_compute__SortOptions\u2019 is undefined [-Winvalid-offsetof]\r\n x_type_7pyarrow_8_compute__SortOptions.tp_weaklistoffset = offsetof(struct __pyx_obj_7pyarrow_8_compute__SortOptions, __pyx_base.__pyx_base.__weakref__);\r\n ......\r\n {code}",
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "2h 20m",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 8400
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[Python] build warning in python",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13353004/comment/17270340",
                    "id": "17270340",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=bkietz",
                        "name": "bkietz",
                        "key": "bkietz",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=bkietz&avatarId=37277",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bkietz&avatarId=37277",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bkietz&avatarId=37277",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bkietz&avatarId=37277"
                        },
                        "displayName": "Ben Kietzman",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "Issue resolved by pull request 9274\n[https://github.com/apache/arrow/pull/9274]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=bkietz",
                        "name": "bkietz",
                        "key": "bkietz",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=bkietz&avatarId=37277",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bkietz&avatarId=37277",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bkietz&avatarId=37277",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bkietz&avatarId=37277"
                        },
                        "displayName": "Ben Kietzman",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2021-01-22T18:20:54.815+0000",
                    "updated": "2021-01-22T18:20:54.815+0000"
                }
            ],
            "maxResults": 1,
            "total": 1,
            "startAt": 0
        },
        "customfield_12311820": "0|z0mprc:",
        "customfield_12314139": null
    }
}