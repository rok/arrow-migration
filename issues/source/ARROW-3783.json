{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13198158",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13198158",
    "key": "ARROW-3783",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12340948",
                "id": "12340948",
                "description": "",
                "name": "0.16.0",
                "archived": false,
                "released": true,
                "releaseDate": "2020-02-07"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "name": "Major",
            "id": "3"
        },
        "labels": [
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=npr",
            "name": "npr",
            "key": "npr",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
            },
            "displayName": "Neal Richardson",
            "active": true,
            "timeZone": "America/Los_Angeles"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12333008",
                "id": "12333008",
                "name": "R"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=javierluraschi",
            "name": "javierluraschi",
            "key": "javierluraschi",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
            },
            "displayName": "Javier Luraschi",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=javierluraschi",
            "name": "javierluraschi",
            "key": "javierluraschi",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
            },
            "displayName": "Javier Luraschi",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "aggregateprogress": {
            "progress": 7200,
            "total": 7200,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 7200,
            "total": 7200,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-3783/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 12,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13198158/worklog/165647",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "javierluraschi opened a new pull request #2955: ARROW-3783: [R] Fix float vector conversion\nURL: https://github.com/apache/arrow/pull/2955\n \n \n   https://issues.apache.org/jira/browse/ARROW-3783.\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-11-13T21:26:17.063+0000",
                    "updated": "2018-11-13T21:26:17.063+0000",
                    "started": "2018-11-13T21:26:17.062+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "165647",
                    "issueId": "13198158"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13198158/worklog/165661",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on issue #2955: ARROW-3783: [R] Fix float vector conversion\nURL: https://github.com/apache/arrow/pull/2955#issuecomment-438453620\n \n \n   Is it possible to test this (if not, why not)? Ideally we should be able to write\r\n   \r\n   ```\r\n   arr <- array(1:10, type=float32())\r\n   result <- arr$as_vector()\r\n   ```\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-11-13T21:57:45.027+0000",
                    "updated": "2018-11-13T21:57:45.027+0000",
                    "started": "2018-11-13T21:57:45.026+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "165661",
                    "issueId": "13198158"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13198158/worklog/165675",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "javierluraschi commented on issue #2955: ARROW-3783: [R] Fix float vector conversion\nURL: https://github.com/apache/arrow/pull/2955#issuecomment-438466218\n \n \n   We would need this fix https://github.com/apache/arrow/pull/2956 to make your example work, but wouldn't help me much since I'm using `RecordBatches` not plain `Arrays`, let me cook the tests using Rcpp and I'll include those here.\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-11-13T22:40:52.839+0000",
                    "updated": "2018-11-13T22:40:52.839+0000",
                    "started": "2018-11-13T22:40:52.838+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "165675",
                    "issueId": "13198158"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13198158/worklog/166004",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "javierluraschi commented on issue #2955: ARROW-3783: [R] Fix float vector conversion\nURL: https://github.com/apache/arrow/pull/2955#issuecomment-438772433\n \n \n   Alright, let me close this one then, thanks @romainfrancois.\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-11-14T18:42:48.157+0000",
                    "updated": "2018-11-14T18:42:48.157+0000",
                    "started": "2018-11-14T18:42:48.156+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "166004",
                    "issueId": "13198158"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13198158/worklog/166005",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "javierluraschi closed pull request #2955: ARROW-3783: [R] Fix float vector conversion\nURL: https://github.com/apache/arrow/pull/2955\n \n \n   \n\nThis is a PR merged from a forked repository.\nAs GitHub hides the original diff on merge, it is displayed below for\nthe sake of provenance:\n\nAs this is a foreign pull request (from a fork), the diff is supplied\nbelow (as it won't show otherwise due to GitHub magic):\n\ndiff --git a/r/R/RcppExports.R b/r/R/RcppExports.R\nindex 3811c5d316..2924639909 100644\n--- a/r/R/RcppExports.R\n+++ b/r/R/RcppExports.R\n@@ -653,3 +653,7 @@ Table__column <- function(table, i) {\n     .Call(`_arrow_Table__column`, table, i)\n }\n \n+TestRecordBatch <- function() {\n+    .Call(`_arrow_TestRecordBatch`)\n+}\n+\ndiff --git a/r/src/RcppExports.cpp b/r/src/RcppExports.cpp\nindex 79ee497660..1d2f002b98 100644\n--- a/r/src/RcppExports.cpp\n+++ b/r/src/RcppExports.cpp\n@@ -1817,6 +1817,16 @@ BEGIN_RCPP\n     return rcpp_result_gen;\n END_RCPP\n }\n+// TestRecordBatch\n+std::shared_ptr<arrow::RecordBatch> TestRecordBatch();\n+RcppExport SEXP _arrow_TestRecordBatch() {\n+BEGIN_RCPP\n+    Rcpp::RObject rcpp_result_gen;\n+    Rcpp::RNGScope rcpp_rngScope_gen;\n+    rcpp_result_gen = Rcpp::wrap(TestRecordBatch());\n+    return rcpp_result_gen;\n+END_RCPP\n+}\n \n static const R_CallMethodDef CallEntries[] = {\n     {\"_arrow_Array__from_vector\", (DL_FUNC) &_arrow_Array__from_vector, 1},\n@@ -1982,6 +1992,7 @@ static const R_CallMethodDef CallEntries[] = {\n     {\"_arrow_Table__schema\", (DL_FUNC) &_arrow_Table__schema, 1},\n     {\"_arrow_Table__to_dataframe\", (DL_FUNC) &_arrow_Table__to_dataframe, 1},\n     {\"_arrow_Table__column\", (DL_FUNC) &_arrow_Table__column, 2},\n+    {\"_arrow_TestRecordBatch\", (DL_FUNC) &_arrow_TestRecordBatch, 0},\n     {NULL, NULL, 0}\n };\n \ndiff --git a/r/src/array.cpp b/r/src/array.cpp\nindex a83929c206..445c4594d8 100644\n--- a/r/src/array.cpp\n+++ b/r/src/array.cpp\n@@ -725,7 +725,7 @@ struct Converter_Promotion {\n       std::fill_n(data.begin() + start, n, default_value<RTYPE>());\n     } else {\n       auto p_values = GetValuesSafely<value_type>(array->data(), 1, array->offset());\n-      STOP_IF_NULL(start);\n+      STOP_IF_NULL(p_values);\n \n       auto value_convert = [](value_type value) {\n         return static_cast<r_stored_type>(value);\n@@ -931,10 +931,10 @@ SEXP ArrayVector__as_vector(int64_t n, const ArrayVector& arrays) {\n       return ArrayVector_To_Vector<Converter_Promotion<REALSXP, arrow::UInt32Type>>(\n           n, arrays);\n     case Type::HALF_FLOAT:\n-      return ArrayVector_To_Vector<Converter_Promotion<REALSXP, arrow::UInt32Type>>(\n+      return ArrayVector_To_Vector<Converter_Promotion<REALSXP, arrow::FloatType>>(\n           n, arrays);\n     case Type::FLOAT:\n-      return ArrayVector_To_Vector<Converter_Promotion<REALSXP, arrow::UInt32Type>>(\n+      return ArrayVector_To_Vector<Converter_Promotion<REALSXP, arrow::FloatType>>(\n           n, arrays);\n \n       // time32 ane time64\ndiff --git a/r/src/test.cpp b/r/src/test.cpp\nnew file mode 100644\nindex 0000000000..d6aa87c289\n--- /dev/null\n+++ b/r/src/test.cpp\n@@ -0,0 +1,41 @@\n+// Licensed to the Apache Software Foundation (ASF) under one\n+// or more contributor license agreements.  See the NOTICE file\n+// distributed with this work for additional information\n+// regarding copyright ownership.  The ASF licenses this file\n+// to you under the Apache License, Version 2.0 (the\n+// \"License\"); you may not use this file except in compliance\n+// with the License.  You may obtain a copy of the License at\n+//\n+//   http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+#include \"arrow_types.h\"\n+\n+using namespace Rcpp;\n+using namespace arrow;\n+\n+// [[Rcpp::export]]\n+std::shared_ptr<arrow::RecordBatch> TestRecordBatch() {\n+  std::shared_ptr<arrow::Array> array_int16;\n+  typename TypeTraits<arrow::Int16Type>::BuilderType builder_int16;\n+  builder_int16.Append(1);\n+  builder_int16.Finish(&array_int16);\n+\n+  std::shared_ptr<arrow::Array> array_float;\n+  typename TypeTraits<arrow::FloatType>::BuilderType builder_float;\n+  builder_float.Append(1.0f);\n+  builder_float.Finish(&array_float);\n+\n+  std::vector<std::shared_ptr<Field>> fields;\n+  fields.push_back(std::make_shared<Field>(std::string(\"int16\"), array_int16->type()));\n+  fields.push_back(std::make_shared<Field>(std::string(\"float\"), array_float->type()));\n+  auto schema = std::make_shared<Schema>(std::move(fields));\n+\n+  return arrow::RecordBatch::Make(schema, 1, {array_int16, array_float});\n+}\ndiff --git a/r/tests/testthat/test-RecordBatch.R b/r/tests/testthat/test-RecordBatch.R\nindex e48be188a9..fd1835edb0 100644\n--- a/r/tests/testthat/test-RecordBatch.R\n+++ b/r/tests/testthat/test-RecordBatch.R\n@@ -170,3 +170,15 @@ test_that(\"read_record_batch can handle Message, Schema parameters (ARROW-3499)\"\n   batch2 <- read_record_batch(message, schema)\n   expect_equal(batch, batch2)\n })\n+\n+test_that(\"record_batch supports non-native types\", {\n+  record_batch <- shared_ptr(`arrow::RecordBatch`, TestRecordBatch())\n+\n+  expect_equal(\n+    as_tibble(record_batch),\n+    tibble::tibble(\n+      int16 = 1,\n+      float = 1.0\n+    )\n+  )\n+})\n\n\n \n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-11-14T18:42:48.695+0000",
                    "updated": "2018-11-14T18:42:48.695+0000",
                    "started": "2018-11-14T18:42:48.695+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "166005",
                    "issueId": "13198158"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13198158/worklog/166010",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "javierluraschi opened a new pull request #2955: ARROW-3783: [R] Fix float vector conversion\nURL: https://github.com/apache/arrow/pull/2955\n \n \n   https://issues.apache.org/jira/browse/ARROW-3783.\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-11-14T18:47:21.524+0000",
                    "updated": "2018-11-14T18:47:21.524+0000",
                    "started": "2018-11-14T18:47:21.523+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "166010",
                    "issueId": "13198158"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13198158/worklog/166011",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "javierluraschi commented on issue #2955: ARROW-3783: [R] Fix float vector conversion\nURL: https://github.com/apache/arrow/pull/2955#issuecomment-438774493\n \n \n   Sorry, closed the wrong PR. We still need this one, this PR does not make use of `array(type = type)`.\r\n   \r\n   Is there anything you want to change in this PR @romainfrancois?\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-11-14T18:48:35.381+0000",
                    "updated": "2018-11-14T18:48:35.381+0000",
                    "started": "2018-11-14T18:48:35.380+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "166011",
                    "issueId": "13198158"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13198158/worklog/166026",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "javierluraschi commented on issue #2955: ARROW-3783: [R] Fix float vector conversion\nURL: https://github.com/apache/arrow/pull/2955#issuecomment-438779945\n \n \n   Removed tests, @romainfrancois has a better idea to test this.\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-11-14T19:04:11.229+0000",
                    "updated": "2018-11-14T19:04:11.229+0000",
                    "started": "2018-11-14T19:04:11.228+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "166026",
                    "issueId": "13198158"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13198158/worklog/166411",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "romainfrancois commented on a change in pull request #2955: ARROW-3783: [R] Fix float vector conversion\nURL: https://github.com/apache/arrow/pull/2955#discussion_r233823470\n \n \n\n ##########\n File path: r/src/array.cpp\n ##########\n @@ -945,10 +945,10 @@ SEXP ArrayVector__as_vector(int64_t n, const ArrayVector& arrays) {\n       return ArrayVector_To_Vector<Converter_Promotion<REALSXP, arrow::UInt32Type>>(\n           n, arrays);\n     case Type::HALF_FLOAT:\n-      return ArrayVector_To_Vector<Converter_Promotion<REALSXP, arrow::UInt32Type>>(\n+      return ArrayVector_To_Vector<Converter_Promotion<REALSXP, arrow::FloatType>>(\n \n Review comment:\n   actually this needs to be `arrow::HalfFloatType` here. Fixed in #2959 \n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-11-15T12:31:08.916+0000",
                    "updated": "2018-11-15T12:31:08.916+0000",
                    "started": "2018-11-15T12:31:08.915+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "166411",
                    "issueId": "13198158"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13198158/worklog/170259",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on issue #2955: ARROW-3783: [R] Fix float vector conversion\nURL: https://github.com/apache/arrow/pull/2955#issuecomment-442495177\n \n \n   Needs rebase. Is this obsolete?\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-11-28T15:47:49.059+0000",
                    "updated": "2018-11-28T15:47:49.059+0000",
                    "started": "2018-11-28T15:47:49.058+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "170259",
                    "issueId": "13198158"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13198158/worklog/170271",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "romainfrancois commented on issue #2955: ARROW-3783: [R] Fix float vector conversion\nURL: https://github.com/apache/arrow/pull/2955#issuecomment-442498216\n \n \n   I believe this is is obsolete indeed. \n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-11-28T15:55:36.745+0000",
                    "updated": "2018-11-28T15:55:36.745+0000",
                    "started": "2018-11-28T15:55:36.745+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "170271",
                    "issueId": "13198158"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13198158/worklog/170281",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm closed pull request #2955: ARROW-3783: [R] Fix float vector conversion\nURL: https://github.com/apache/arrow/pull/2955\n \n \n   \n\nThis is a PR merged from a forked repository.\nAs GitHub hides the original diff on merge, it is displayed below for\nthe sake of provenance:\n\nAs this is a foreign pull request (from a fork), the diff is supplied\nbelow (as it won't show otherwise due to GitHub magic):\n\ndiff --git a/r/src/array.cpp b/r/src/array.cpp\nindex 3af4934e46..ea993f90fb 100644\n--- a/r/src/array.cpp\n+++ b/r/src/array.cpp\n@@ -945,10 +945,10 @@ SEXP ArrayVector__as_vector(int64_t n, const ArrayVector& arrays) {\n       return ArrayVector_To_Vector<Converter_Promotion<REALSXP, arrow::UInt32Type>>(\n           n, arrays);\n     case Type::HALF_FLOAT:\n-      return ArrayVector_To_Vector<Converter_Promotion<REALSXP, arrow::UInt32Type>>(\n+      return ArrayVector_To_Vector<Converter_Promotion<REALSXP, arrow::FloatType>>(\n           n, arrays);\n     case Type::FLOAT:\n-      return ArrayVector_To_Vector<Converter_Promotion<REALSXP, arrow::UInt32Type>>(\n+      return ArrayVector_To_Vector<Converter_Promotion<REALSXP, arrow::FloatType>>(\n           n, arrays);\n \n       // time32 ane time64\n\n\n \n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-11-28T16:13:30.123+0000",
                    "updated": "2018-11-28T16:13:30.123+0000",
                    "started": "2018-11-28T16:13:30.123+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "170281",
                    "issueId": "13198158"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
            "id": "1",
            "description": "A problem which impairs or prevents the functions of the product.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
            "name": "Bug",
            "subtask": false,
            "avatarId": 21133
        },
        "timespent": 7200,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@764adfe5[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@2545f433[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@1db342b2[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@17ddc95b[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@2b5f212d[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@264c1d65[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@216d6dcc[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@5883ffab[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@a07fbdf[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@4ce668cf[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@62f6f92[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@4196a65b[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 7200,
        "customfield_12312520": null,
        "customfield_12312521": "Thu Mar 04 21:41:34 UTC 2021",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2020-02-03T20:12:11.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-3783/watchers",
            "watchCount": 3,
            "isWatching": false
        },
        "created": "2018-11-13T21:22:18.000+0000",
        "updated": "2021-03-04T21:41:34.000+0000",
        "timeoriginalestimate": null,
        "description": "Repro from `sparklyr`:\r\n\r\n\u00a0\r\n{code:java}\r\nlibrary(sparklyr)\r\nlibrary(arrow)\r\n\r\nsc <- spark_connect(master = \"local\")\r\nDBI::dbGetQuery(sc, \"SELECT cast(1 as float)\"){code}\r\n\u00a0\r\n\r\nActual:\r\n{code:java}\r\n  CAST(1 AS FLOAT)\r\n1       1065353216{code}\r\nExpected:\r\n\r\n\u00a0\r\n{code:java}\r\n  CAST(1 AS FLOAT)\r\n1                1{code}\r\n\u00a0",
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "2h",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 7200
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[R] Incorrect collection of float type",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13198158/comment/16958252",
                    "id": "16958252",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=npr",
                        "name": "npr",
                        "key": "npr",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
                        },
                        "displayName": "Neal Richardson",
                        "active": true,
                        "timeZone": "America/Los_Angeles"
                    },
                    "body": "[~javierluraschi] is this still an issue? I don't have spark locally, but this works now:\r\n\r\n{code}\r\n> Array$create(1L, type=float32())\r\nArray\r\n<float>\r\n[\r\n  1\r\n]\r\n{code}\r\n\r\nIt looks like halffloat isn't supported, but that sounds like a different issue\r\n\r\n{code}\r\n> Array$create(1L, type=float16())\r\nError in Array__from_vector(x, type) : \r\n  NotImplemented: type not implemented\r\n{code}",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=npr",
                        "name": "npr",
                        "key": "npr",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
                        },
                        "displayName": "Neal Richardson",
                        "active": true,
                        "timeZone": "America/Los_Angeles"
                    },
                    "created": "2019-10-23T21:08:30.528+0000",
                    "updated": "2019-10-23T21:08:30.528+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13198158/comment/17029237",
                    "id": "17029237",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=npr",
                        "name": "npr",
                        "key": "npr",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
                        },
                        "displayName": "Neal Richardson",
                        "active": true,
                        "timeZone": "America/Los_Angeles"
                    },
                    "body": "Created ARROW-7753 for halffloat support but otherwise this seems to have been resolved.",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=npr",
                        "name": "npr",
                        "key": "npr",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
                        },
                        "displayName": "Neal Richardson",
                        "active": true,
                        "timeZone": "America/Los_Angeles"
                    },
                    "created": "2020-02-03T20:12:11.979+0000",
                    "updated": "2020-02-03T20:12:11.979+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13198158/comment/17295474",
                    "id": "17295474",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=msummersgill",
                        "name": "msummersgill",
                        "key": "msummersgill",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=msummersgill&avatarId=46003",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=msummersgill&avatarId=46003",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=msummersgill&avatarId=46003",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=msummersgill&avatarId=46003"
                        },
                        "displayName": "Matthew Summersgill",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "[~npr]\u00a0 \u2013 Just wanted to check and see what the status on this one was. Issue shows closed, and I see there have been some PR's in the past, but it wasn't clear if anything was merged. Regardless, when I attempt to collect a float32 value from Spark to R, I get the following warning. Is something that would make sense for me to open a new issue?\r\n{code:r}\r\nstr(collect(SparkR::sql(\"SELECT float('1') AS x;\"))$x[[1]])\r\n## num 1\r\n\r\n## Warning message:In value[[3L]](cond) :  The conversion from Spark DataFrame to R DataFrame was attempted with Arrow optimization because 'spark.sql.execution.arrow.sparkr.enabled' is set to true; however, failed, attempting non-optimization. Reason: Error in checkSchemaInArrow(schema(x)): Arrow optimization in R does not support float type yet.\r\n{code}",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=msummersgill",
                        "name": "msummersgill",
                        "key": "msummersgill",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=msummersgill&avatarId=46003",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=msummersgill&avatarId=46003",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=msummersgill&avatarId=46003",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=msummersgill&avatarId=46003"
                        },
                        "displayName": "Matthew Summersgill",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2021-03-04T17:52:21.560+0000",
                    "updated": "2021-03-04T17:52:21.560+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13198158/comment/17295489",
                    "id": "17295489",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=npr",
                        "name": "npr",
                        "key": "npr",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
                        },
                        "displayName": "Neal Richardson",
                        "active": true,
                        "timeZone": "America/Los_Angeles"
                    },
                    "body": "The error comes from spark: https://github.com/apache/spark/blob/13fd272cd353c8aa40a6030c4c847c2e2f632f68/R/pkg/R/types.R#L98\r\n\r\nLooks like SparkR hasn't kept up with what types are supported in the arrow package, so you may want to open an issue for Spark.",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=npr",
                        "name": "npr",
                        "key": "npr",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
                        },
                        "displayName": "Neal Richardson",
                        "active": true,
                        "timeZone": "America/Los_Angeles"
                    },
                    "created": "2021-03-04T18:09:15.952+0000",
                    "updated": "2021-03-04T18:09:15.952+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13198158/comment/17295581",
                    "id": "17295581",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=msummersgill",
                        "name": "msummersgill",
                        "key": "msummersgill",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=msummersgill&avatarId=46003",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=msummersgill&avatarId=46003",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=msummersgill&avatarId=46003",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=msummersgill&avatarId=46003"
                        },
                        "displayName": "Matthew Summersgill",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "Thanks for pointing me in the right direction, I'll do some testing and see if I can get this resolved on the spark side!",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=msummersgill",
                        "name": "msummersgill",
                        "key": "msummersgill",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=msummersgill&avatarId=46003",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=msummersgill&avatarId=46003",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=msummersgill&avatarId=46003",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=msummersgill&avatarId=46003"
                        },
                        "displayName": "Matthew Summersgill",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2021-03-04T20:50:42.740+0000",
                    "updated": "2021-03-04T20:50:42.740+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13198158/comment/17295584",
                    "id": "17295584",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=msummersgill",
                        "name": "msummersgill",
                        "key": "msummersgill",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=msummersgill&avatarId=46003",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=msummersgill&avatarId=46003",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=msummersgill&avatarId=46003",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=msummersgill&avatarId=46003"
                        },
                        "displayName": "Matthew Summersgill",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "That pointer was spot on, I forked spark, deleted the 3 lines of code, rebuilt SparkR and it just works! I'm opening a PR in spark, but I noticed that there are four other types where SparkR presumes no arrow support.\u00a0 Are these types supported by arrow as well? If so, I'll test and then remove the corresponding error-handlers in the same PR.\r\n\r\n\u00a0\r\n{code:r}\r\n  if (any(field_strings == \"BinaryType\")) {\r\n    stop(\"Arrow optimization in R does not support binary type yet.\")\r\n  }\r\n  if (any(startsWith(field_strings, \"ArrayType\"))) {\r\n    stop(\"Arrow optimization in R does not support array type yet.\")\r\n  }\r\n\r\n  # Arrow optimization in Spark does not yet support both cases below.\r\n  if (any(startsWith(field_strings, \"StructType\"))) {\r\n    stop(\"Arrow optimization in R does not support nested struct type yet.\")\r\n  }\r\n  if (any(startsWith(field_strings, \"MapType\"))) {\r\n    stop(\"Arrow optimization in R does not support map type yet.\")\r\n  }\r\n{code}",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=msummersgill",
                        "name": "msummersgill",
                        "key": "msummersgill",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=msummersgill&avatarId=46003",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=msummersgill&avatarId=46003",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=msummersgill&avatarId=46003",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=msummersgill&avatarId=46003"
                        },
                        "displayName": "Matthew Summersgill",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2021-03-04T21:23:14.600+0000",
                    "updated": "2021-03-04T21:23:14.600+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13198158/comment/17295588",
                    "id": "17295588",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=npr",
                        "name": "npr",
                        "key": "npr",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
                        },
                        "displayName": "Neal Richardson",
                        "active": true,
                        "timeZone": "America/Los_Angeles"
                    },
                    "body": "Supported Arrow types in the R package are in https://arrow.apache.org/docs/r/articles/arrow.html#arrow-to-r, the same section you're editing in ARROW-11864. Map is not supported yet but I would imagine the others are; you could also refer to what sparklyr has implemented.",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=npr",
                        "name": "npr",
                        "key": "npr",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
                        },
                        "displayName": "Neal Richardson",
                        "active": true,
                        "timeZone": "America/Los_Angeles"
                    },
                    "created": "2021-03-04T21:33:12.521+0000",
                    "updated": "2021-03-04T21:33:12.521+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13198158/comment/17295592",
                    "id": "17295592",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=msummersgill",
                        "name": "msummersgill",
                        "key": "msummersgill",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=msummersgill&avatarId=46003",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=msummersgill&avatarId=46003",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=msummersgill&avatarId=46003",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=msummersgill&avatarId=46003"
                        },
                        "displayName": "Matthew Summersgill",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "Perfect! I will test on those additional types, any feedback you have on the PR for Spark ([https://github.com/apache/spark/pull/31744)]\u00a0is welcome!",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=msummersgill",
                        "name": "msummersgill",
                        "key": "msummersgill",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=msummersgill&avatarId=46003",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=msummersgill&avatarId=46003",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=msummersgill&avatarId=46003",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=msummersgill&avatarId=46003"
                        },
                        "displayName": "Matthew Summersgill",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2021-03-04T21:41:34.085+0000",
                    "updated": "2021-03-04T21:41:34.085+0000"
                }
            ],
            "maxResults": 8,
            "total": 8,
            "startAt": 0
        },
        "customfield_12311820": "0|s00gaw:",
        "customfield_12314139": null
    }
}