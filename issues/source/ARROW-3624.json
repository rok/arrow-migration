{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13194400",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13194400",
    "key": "ARROW-3624",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12343858",
                "id": "12343858",
                "description": "",
                "name": "0.12.0",
                "archived": false,
                "released": true,
                "releaseDate": "2019-01-20"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "name": "Major",
            "id": "3"
        },
        "labels": [
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=pearu",
            "name": "pearu",
            "key": "pearu",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pearu&avatarId=35984",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pearu&avatarId=35984",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pearu&avatarId=35984",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pearu&avatarId=35984"
            },
            "displayName": "Pearu Peterson",
            "active": true,
            "timeZone": "Europe/Tallinn"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12328935",
                "id": "12328935",
                "name": "C++"
            },
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12328936",
                "id": "12328936",
                "name": "Python"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=pearu",
            "name": "pearu",
            "key": "pearu",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pearu&avatarId=35984",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pearu&avatarId=35984",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pearu&avatarId=35984",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pearu&avatarId=35984"
            },
            "displayName": "Pearu Peterson",
            "active": true,
            "timeZone": "Europe/Tallinn"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=pearu",
            "name": "pearu",
            "key": "pearu",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pearu&avatarId=35984",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pearu&avatarId=35984",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pearu&avatarId=35984",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pearu&avatarId=35984"
            },
            "displayName": "Pearu Peterson",
            "active": true,
            "timeZone": "Europe/Tallinn"
        },
        "aggregateprogress": {
            "progress": 28800,
            "total": 28800,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 28800,
            "total": 28800,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-3624/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 31,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13194400/worklog/159159",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pearu opened a new pull request #2844: ARROW-3624: [Python/C++] Support for zero-sized device buffers\nURL: https://github.com/apache/arrow/pull/2844\n \n \n   This PR extends Arrow CUDA support to zero-size buffers.\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-10-26T12:22:30.584+0000",
                    "updated": "2018-10-26T12:22:30.584+0000",
                    "started": "2018-10-26T12:22:30.584+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "159159",
                    "issueId": "13194400"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13194400/worklog/159164",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=pearu",
                        "name": "pearu",
                        "key": "pearu",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pearu&avatarId=35984",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pearu&avatarId=35984",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pearu&avatarId=35984",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pearu&avatarId=35984"
                        },
                        "displayName": "Pearu Peterson",
                        "active": true,
                        "timeZone": "Europe/Tallinn"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=pearu",
                        "name": "pearu",
                        "key": "pearu",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pearu&avatarId=35984",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pearu&avatarId=35984",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pearu&avatarId=35984",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pearu&avatarId=35984"
                        },
                        "displayName": "Pearu Peterson",
                        "active": true,
                        "timeZone": "Europe/Tallinn"
                    },
                    "comment": "",
                    "created": "2018-10-26T12:25:33.369+0000",
                    "updated": "2018-10-26T12:25:33.369+0000",
                    "started": "2018-10-26T12:25:00.000+0000",
                    "timeSpent": "3h",
                    "timeSpentSeconds": 10800,
                    "id": "159164",
                    "issueId": "13194400"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13194400/worklog/159401",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on issue #2844: ARROW-3624: [Python/C++] Support for zero-sized device buffers\nURL: https://github.com/apache/arrow/pull/2844#issuecomment-433543514\n \n \n   @pearu this branch is messed up, I'm going to clean it up for you. Please try to avoid ever using `git merge` and instead rely on `rebase`, `rebase -i` and `reset --hard` where relevant. Use `git reflog` if you ever make a mistake (see https://ohshitgit.com/). I'm about to force push this branch so you should `git fetch Quansight` and then `git reset --hard Quansight/cuda-buffer`\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-10-26T21:06:39.300+0000",
                    "updated": "2018-10-26T21:06:39.300+0000",
                    "started": "2018-10-26T21:06:39.299+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "159401",
                    "issueId": "13194400"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13194400/worklog/159402",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on issue #2844: ARROW-3624: [Python/C++] Support for zero-sized device buffers\nURL: https://github.com/apache/arrow/pull/2844#issuecomment-433544426\n \n \n   Here's the git commands I used just now\r\n   \r\n   ```\r\n    2001  git fetch Quansight \r\n    2002  git checkout -b ARROW-3624 Quansight/cuda-buffer \r\n    2003  git checkout -b ARROW-3624-fix\r\n    2004  git reset --hard master\r\n    2005  git merge --squash ARROW-3624\r\n    2007  git commit -m \"Support for zero-sized device buffers\" --author=\"Pearu Peterson <pearu.peterson@gmail.com>\"\r\n    2009  git checkout ARROW-3624\r\n    2010  git reset --hard master\r\n    2011  git merge --ff-only ARROW-3624-fix \r\n    2012  git push -f\r\n   ```\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-10-26T21:10:37.597+0000",
                    "updated": "2018-10-26T21:10:37.597+0000",
                    "started": "2018-10-26T21:10:37.597+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "159402",
                    "issueId": "13194400"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13194400/worklog/159422",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "codecov-io commented on issue #2844: ARROW-3624: [Python/C++] Support for zero-sized device buffers\nURL: https://github.com/apache/arrow/pull/2844#issuecomment-433552486\n \n \n   # [Codecov](https://codecov.io/gh/apache/arrow/pull/2844?src=pr&el=h1) Report\n   > Merging [#2844](https://codecov.io/gh/apache/arrow/pull/2844?src=pr&el=desc) into [master](https://codecov.io/gh/apache/arrow/commit/34e48b527fa9da746607c8d75c30ba5d828bb680?src=pr&el=desc) will **increase** coverage by `0.91%`.\n   > The diff coverage is `0%`.\n   \n   [![Impacted file tree graph](https://codecov.io/gh/apache/arrow/pull/2844/graphs/tree.svg?width=650&token=LpTCFbqVT1&height=150&src=pr)](https://codecov.io/gh/apache/arrow/pull/2844?src=pr&el=tree)\n   \n   ```diff\n   @@            Coverage Diff            @@\n   ##           master   #2844      +/-   ##\n   =========================================\n   + Coverage   87.48%   88.4%   +0.91%     \n   =========================================\n     Files         410     348      -62     \n     Lines       63327   59222    -4105     \n   =========================================\n   - Hits        55403   52356    -3047     \n   + Misses       7850    6866     -984     \n   + Partials       74       0      -74\n   ```\n   \n   \n   | [Impacted Files](https://codecov.io/gh/apache/arrow/pull/2844?src=pr&el=tree) | Coverage \u0394 | |\n   |---|---|---|\n   | [python/pyarrow/tests/test\\_cuda.py](https://codecov.io/gh/apache/arrow/pull/2844/diff?src=pr&el=tree#diff-cHl0aG9uL3B5YXJyb3cvdGVzdHMvdGVzdF9jdWRhLnB5) | `1.74% <0%> (-0.08%)` | :arrow_down: |\n   | [rust/src/record\\_batch.rs](https://codecov.io/gh/apache/arrow/pull/2844/diff?src=pr&el=tree#diff-cnVzdC9zcmMvcmVjb3JkX2JhdGNoLnJz) | | |\n   | [go/arrow/array/table.go](https://codecov.io/gh/apache/arrow/pull/2844/diff?src=pr&el=tree#diff-Z28vYXJyb3cvYXJyYXkvdGFibGUuZ28=) | | |\n   | [rust/src/util/bit\\_util.rs](https://codecov.io/gh/apache/arrow/pull/2844/diff?src=pr&el=tree#diff-cnVzdC9zcmMvdXRpbC9iaXRfdXRpbC5ycw==) | | |\n   | [go/arrow/math/uint64\\_amd64.go](https://codecov.io/gh/apache/arrow/pull/2844/diff?src=pr&el=tree#diff-Z28vYXJyb3cvbWF0aC91aW50NjRfYW1kNjQuZ28=) | | |\n   | [go/arrow/internal/testing/tools/bool.go](https://codecov.io/gh/apache/arrow/pull/2844/diff?src=pr&el=tree#diff-Z28vYXJyb3cvaW50ZXJuYWwvdGVzdGluZy90b29scy9ib29sLmdv) | | |\n   | [go/arrow/internal/bitutil/bitutil.go](https://codecov.io/gh/apache/arrow/pull/2844/diff?src=pr&el=tree#diff-Z28vYXJyb3cvaW50ZXJuYWwvYml0dXRpbC9iaXR1dGlsLmdv) | | |\n   | [go/arrow/memory/memory\\_avx2\\_amd64.go](https://codecov.io/gh/apache/arrow/pull/2844/diff?src=pr&el=tree#diff-Z28vYXJyb3cvbWVtb3J5L21lbW9yeV9hdngyX2FtZDY0Lmdv) | | |\n   | [go/arrow/array/null.go](https://codecov.io/gh/apache/arrow/pull/2844/diff?src=pr&el=tree#diff-Z28vYXJyb3cvYXJyYXkvbnVsbC5nbw==) | | |\n   | [go/arrow/datatype\\_nested.go](https://codecov.io/gh/apache/arrow/pull/2844/diff?src=pr&el=tree#diff-Z28vYXJyb3cvZGF0YXR5cGVfbmVzdGVkLmdv) | | |\n   | ... and [53 more](https://codecov.io/gh/apache/arrow/pull/2844/diff?src=pr&el=tree-more) | |\n   \n   ------\n   \n   [Continue to review full report at Codecov](https://codecov.io/gh/apache/arrow/pull/2844?src=pr&el=continue).\n   > **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n   > `\u0394 = absolute <relative> (impact)`, `\u00f8 = not affected`, `? = missing data`\n   > Powered by [Codecov](https://codecov.io/gh/apache/arrow/pull/2844?src=pr&el=footer). Last update [34e48b5...5dc7c36](https://codecov.io/gh/apache/arrow/pull/2844?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n   \n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-10-26T21:48:13.381+0000",
                    "updated": "2018-10-26T21:48:13.381+0000",
                    "started": "2018-10-26T21:48:13.379+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "159422",
                    "issueId": "13194400"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13194400/worklog/159552",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pearu commented on issue #2844: ARROW-3624: [Python/C++] Support for zero-sized device buffers\nURL: https://github.com/apache/arrow/pull/2844#issuecomment-433602759\n \n \n   @wesm sorry for the mess and thanks for the links.\r\n   In my case, the merge was triggered by `git pull`. I tried `git pull --rebase` but that lead to conflicts with unrelated files.\r\n   \r\n   This is the workflow I have used (following instructions from \r\n     https://gist.github.com/Chaser324/ce0505fbed06b947d962 \r\n   that also contains rebase suggestions but these have never worked for me):\r\n   \r\n   Initial setup:\r\n   ```\r\n   git clone git@github.com:Quansight/arrow.git\r\n   git remote add upstream https://github.com/apache/arrow.git\r\n   ```\r\n   \r\n   To update Quansight arrow fork:\r\n   ```\r\n   git fetch upstream\r\n   git checkout master\r\n   git merge upstream/master\r\n   git push\r\n   ```\r\n   \r\n   To start working with a feature:\r\n   ```\r\n   git branch newfeature\r\n   git checkout newfeature\r\n   # Implement feature\r\n   git push -u origin newfeature\r\n   ``` \r\n   \r\n   Clearly the above is conflicting with arrow workflow and I'd really appreciate suggestions for improving the above.\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-10-27T08:42:30.293+0000",
                    "updated": "2018-10-27T08:42:30.293+0000",
                    "started": "2018-10-27T08:42:30.292+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "159552",
                    "issueId": "13194400"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13194400/worklog/159553",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on issue #2844: ARROW-3624: [Python/C++] Support for zero-sized device buffers\nURL: https://github.com/apache/arrow/pull/2844#issuecomment-433603570\n \n \n   `git pull` is equivalent to `git fetch && git merge`. \r\n   \r\n   Our workflow is generally\r\n   \r\n   ```\r\n   # from feature branch\r\n   git fetch upstream\r\n   git rebase upstream/master\r\n   ```\r\n   \r\n   If there is a rebase conflict, you can minimize conflicts by first doing `git rebase -i $COMMIT`, where `$COMMIT` is the current upstream parent commit for your feature branch. `git rebase -i` allows you to squash your commits into a single commit, then `git rebase upstream/master` should have fewer or no issues. \r\n   \r\n   Another problem: Quansight master branch is not tracking upstream master\r\n   \r\n   https://github.com/Quansight/arrow\r\n   \r\n   To fix this\r\n   \r\n   ```\r\n   # from Quansight/master\r\n   git fetch upstream\r\n   git reset --hard upstream/master\r\n   git push -f -u Quansight/master\r\n   ```\r\n   \r\n   FWIW, I never use `git merge` or `git pull` without `--ff-only`. git can be configured to do this automatically https://stackoverflow.com/a/35298178/776560\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-10-27T08:56:37.020+0000",
                    "updated": "2018-10-27T08:56:37.020+0000",
                    "started": "2018-10-27T08:56:37.019+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "159553",
                    "issueId": "13194400"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13194400/worklog/159658",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "codecov-io edited a comment on issue #2844: ARROW-3624: [Python/C++] Support for zero-sized device buffers and device-to-device copying\nURL: https://github.com/apache/arrow/pull/2844#issuecomment-433552486\n \n \n   # [Codecov](https://codecov.io/gh/apache/arrow/pull/2844?src=pr&el=h1) Report\n   > Merging [#2844](https://codecov.io/gh/apache/arrow/pull/2844?src=pr&el=desc) into [master](https://codecov.io/gh/apache/arrow/commit/34e48b527fa9da746607c8d75c30ba5d828bb680?src=pr&el=desc) will **increase** coverage by `0.84%`.\n   > The diff coverage is `0%`.\n   \n   [![Impacted file tree graph](https://codecov.io/gh/apache/arrow/pull/2844/graphs/tree.svg?width=650&token=LpTCFbqVT1&height=150&src=pr)](https://codecov.io/gh/apache/arrow/pull/2844?src=pr&el=tree)\n   \n   ```diff\n   @@            Coverage Diff             @@\n   ##           master    #2844      +/-   ##\n   ==========================================\n   + Coverage   87.48%   88.33%   +0.84%     \n   ==========================================\n     Files         410      348      -62     \n     Lines       63327    59265    -4062     \n   ==========================================\n   - Hits        55403    52353    -3050     \n   + Misses       7850     6912     -938     \n   + Partials       74        0      -74\n   ```\n   \n   \n   | [Impacted Files](https://codecov.io/gh/apache/arrow/pull/2844?src=pr&el=tree) | Coverage \u0394 | |\n   |---|---|---|\n   | [python/pyarrow/tests/test\\_cuda.py](https://codecov.io/gh/apache/arrow/pull/2844/diff?src=pr&el=tree#diff-cHl0aG9uL3B5YXJyb3cvdGVzdHMvdGVzdF9jdWRhLnB5) | `1.57% <0%> (-0.25%)` | :arrow_down: |\n   | [cpp/src/arrow/csv/column-builder.cc](https://codecov.io/gh/apache/arrow/pull/2844/diff?src=pr&el=tree#diff-Y3BwL3NyYy9hcnJvdy9jc3YvY29sdW1uLWJ1aWxkZXIuY2M=) | `94.92% <0%> (-2.18%)` | :arrow_down: |\n   | [rust/src/record\\_batch.rs](https://codecov.io/gh/apache/arrow/pull/2844/diff?src=pr&el=tree#diff-cnVzdC9zcmMvcmVjb3JkX2JhdGNoLnJz) | | |\n   | [go/arrow/array/table.go](https://codecov.io/gh/apache/arrow/pull/2844/diff?src=pr&el=tree#diff-Z28vYXJyb3cvYXJyYXkvdGFibGUuZ28=) | | |\n   | [rust/src/util/bit\\_util.rs](https://codecov.io/gh/apache/arrow/pull/2844/diff?src=pr&el=tree#diff-cnVzdC9zcmMvdXRpbC9iaXRfdXRpbC5ycw==) | | |\n   | [go/arrow/math/uint64\\_amd64.go](https://codecov.io/gh/apache/arrow/pull/2844/diff?src=pr&el=tree#diff-Z28vYXJyb3cvbWF0aC91aW50NjRfYW1kNjQuZ28=) | | |\n   | [go/arrow/internal/testing/tools/bool.go](https://codecov.io/gh/apache/arrow/pull/2844/diff?src=pr&el=tree#diff-Z28vYXJyb3cvaW50ZXJuYWwvdGVzdGluZy90b29scy9ib29sLmdv) | | |\n   | [go/arrow/internal/bitutil/bitutil.go](https://codecov.io/gh/apache/arrow/pull/2844/diff?src=pr&el=tree#diff-Z28vYXJyb3cvaW50ZXJuYWwvYml0dXRpbC9iaXR1dGlsLmdv) | | |\n   | [go/arrow/memory/memory\\_avx2\\_amd64.go](https://codecov.io/gh/apache/arrow/pull/2844/diff?src=pr&el=tree#diff-Z28vYXJyb3cvbWVtb3J5L21lbW9yeV9hdngyX2FtZDY0Lmdv) | | |\n   | [go/arrow/array/null.go](https://codecov.io/gh/apache/arrow/pull/2844/diff?src=pr&el=tree#diff-Z28vYXJyb3cvYXJyYXkvbnVsbC5nbw==) | | |\n   | ... and [54 more](https://codecov.io/gh/apache/arrow/pull/2844/diff?src=pr&el=tree-more) | |\n   \n   ------\n   \n   [Continue to review full report at Codecov](https://codecov.io/gh/apache/arrow/pull/2844?src=pr&el=continue).\n   > **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n   > `\u0394 = absolute <relative> (impact)`, `\u00f8 = not affected`, `? = missing data`\n   > Powered by [Codecov](https://codecov.io/gh/apache/arrow/pull/2844?src=pr&el=footer). Last update [34e48b5...36f7581](https://codecov.io/gh/apache/arrow/pull/2844?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n   \n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-10-27T18:29:56.437+0000",
                    "updated": "2018-10-27T18:29:56.437+0000",
                    "started": "2018-10-27T18:29:56.436+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "159658",
                    "issueId": "13194400"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13194400/worklog/159719",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pearu commented on issue #2844: ARROW-3624: [Python/C++] Support for zero-sized device buffers and device-to-device copying\nURL: https://github.com/apache/arrow/pull/2844#issuecomment-433699184\n \n \n   @wesm @pitrou this PR is now ready for review.\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-10-28T12:07:50.745+0000",
                    "updated": "2018-10-28T12:07:50.745+0000",
                    "started": "2018-10-28T12:07:50.745+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "159719",
                    "issueId": "13194400"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13194400/worklog/159720",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on issue #2844: ARROW-3624: [Python/C++] Support for zero-sized device buffers and device-to-device copying\nURL: https://github.com/apache/arrow/pull/2844#issuecomment-433701030\n \n \n   Thanks. Can you assist with some other code reviews? We need additional maintenance help\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-10-28T12:30:33.540+0000",
                    "updated": "2018-10-28T12:30:33.540+0000",
                    "started": "2018-10-28T12:30:33.540+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "159720",
                    "issueId": "13194400"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13194400/worklog/159992",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on a change in pull request #2844: ARROW-3624: [Python/C++] Support for zero-sized device buffers and device-to-device copying\nURL: https://github.com/apache/arrow/pull/2844#discussion_r228880541\n \n \n\n ##########\n File path: cpp/src/arrow/gpu/cuda_context.cc\n ##########\n @@ -99,31 +100,52 @@ class CudaContext::CudaContextImpl {\n     return Status::OK();\n   }\n \n+  Status CopyDeviceToDevice(void* dst, const void* src, int64_t nbytes) {\n+    ContextSaver set_temporary(context_);\n+    CU_RETURN_NOT_OK(cuMemcpyDtoD(reinterpret_cast<CUdeviceptr>(dst),\n+                                  reinterpret_cast<const CUdeviceptr>(src),\n+                                  static_cast<size_t>(nbytes)));\n+    return Status::OK();\n+  }\n+\n   Status Synchronize(void) {\n     ContextSaver set_temporary(context_);\n     CU_RETURN_NOT_OK(cuCtxSynchronize());\n     return Status::OK();\n   }\n \n   Status Free(void* device_ptr, int64_t nbytes) {\n-    CU_RETURN_NOT_OK(cuMemFree(reinterpret_cast<CUdeviceptr>(device_ptr)));\n+    if (device_ptr != NULL)  // non 0-size buffer, see ExportIpcBuffer\n+      CU_RETURN_NOT_OK(cuMemFree(reinterpret_cast<CUdeviceptr>(device_ptr)));\n     bytes_allocated_ -= nbytes;\n     return Status::OK();\n   }\n \n   Status ExportIpcBuffer(void* data, std::shared_ptr<CudaIpcMemHandle>* handle) {\n     ContextSaver set_temporary(context_);\n     CUipcMemHandle cu_handle;\n-    CU_RETURN_NOT_OK(cuIpcGetMemHandle(&cu_handle, reinterpret_cast<CUdeviceptr>(data)));\n+    if (data != NULL) {\n+      CU_RETURN_NOT_OK(\n+          cuIpcGetMemHandle(&cu_handle, reinterpret_cast<CUdeviceptr>(data)));\n+    } else {\n+      // 0-size buffers are marked by setting device pointer to 0. To\n+      // make cu_handle aware of this, we zero cu_handle memory.\n+      // Since in Linux sizeof(CUipcMemHandle) == 64, we cast handle\n+      // value to int64_t:\n+      reinterpret_cast<int64_t*>(&cu_handle)[0] = 0;\n+    }\n     *handle = std::shared_ptr<CudaIpcMemHandle>(new CudaIpcMemHandle(&cu_handle));\n     return Status::OK();\n   }\n \n   Status OpenIpcBuffer(const CudaIpcMemHandle& ipc_handle, uint8_t** out) {\n     auto handle = reinterpret_cast<const CUipcMemHandle*>(ipc_handle.handle());\n-    CUdeviceptr data;\n-    CU_RETURN_NOT_OK(\n-        cuIpcOpenMemHandle(&data, *handle, CU_IPC_MEM_LAZY_ENABLE_PEER_ACCESS));\n+    CUdeviceptr data = 0;\n+    // If handle memory is zero, the IPC handle represents 0-size\n+    // buffer. See also related comments in ExportIpcBuffer.\n+    if (reinterpret_cast<const int64_t*>(handle)[0] != 0)\n \n Review comment:\n   That doesn't look safe to me. Perhaps `*handle != reinterpret_cast<CUipcMemHandle>(0)`?\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-10-29T13:25:36.750+0000",
                    "updated": "2018-10-29T13:25:36.750+0000",
                    "started": "2018-10-29T13:25:36.749+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "159992",
                    "issueId": "13194400"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13194400/worklog/160147",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pearu commented on issue #2844: ARROW-3624: [Python/C++] Support for zero-sized device buffers and device-to-device copying\nURL: https://github.com/apache/arrow/pull/2844#issuecomment-434052593\n \n \n   > Thanks. Can you assist with some other code reviews? We need additional maintenance help\r\n   \r\n   @wesm , yes.\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-10-29T19:46:12.113+0000",
                    "updated": "2018-10-29T19:46:12.113+0000",
                    "started": "2018-10-29T19:46:11.962+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "160147",
                    "issueId": "13194400"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13194400/worklog/160149",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pearu commented on a change in pull request #2844: ARROW-3624: [Python/C++] Support for zero-sized device buffers and device-to-device copying\nURL: https://github.com/apache/arrow/pull/2844#discussion_r229072654\n \n \n\n ##########\n File path: cpp/src/arrow/gpu/cuda_context.cc\n ##########\n @@ -17,15 +17,14 @@\n \n #include \"arrow/gpu/cuda_context.h\"\n \n+#include <cuda.h>\n \n Review comment:\n   That was a change made by `make format`. I'll redo it.\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-10-29T19:47:36.640+0000",
                    "updated": "2018-10-29T19:47:36.640+0000",
                    "started": "2018-10-29T19:47:36.639+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "160149",
                    "issueId": "13194400"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13194400/worklog/160238",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "scopatz commented on a change in pull request #2844: ARROW-3624: [Python/C++] Support for zero-sized device buffers and device-to-device copying\nURL: https://github.com/apache/arrow/pull/2844#discussion_r229114601\n \n \n\n ##########\n File path: cpp/src/arrow/gpu/cuda_context.cc\n ##########\n @@ -301,8 +328,9 @@ Status CudaContext::OpenIpcBuffer(const CudaIpcMemHandle& ipc_handle,\n \n Status CudaContext::CloseIpcBuffer(CudaBuffer* buf) {\n   ContextSaver set_temporary(reinterpret_cast<CUcontext>(handle()));\n-  CU_RETURN_NOT_OK(\n-      cuIpcCloseMemHandle(reinterpret_cast<CUdeviceptr>(buf->mutable_data())));\n+  auto data = reinterpret_cast<CUdeviceptr>(buf->mutable_data());\n+  if (data != 0)  // non 0-size buffer, see ExportIpcBuffer\n \n Review comment:\n   this should probably also be `data != reinterpret_cast<CUdeviceptr>(0)`\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-10-29T21:59:58.759+0000",
                    "updated": "2018-10-29T21:59:58.759+0000",
                    "started": "2018-10-29T21:59:58.758+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "160238",
                    "issueId": "13194400"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13194400/worklog/160240",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "scopatz commented on issue #2844: ARROW-3624: [Python/C++] Support for zero-sized device buffers and device-to-device copying\nURL: https://github.com/apache/arrow/pull/2844#issuecomment-434098796\n \n \n   Thanks for putting this in @pearu! Other than the casting and documentation issues, this seems fine to me.\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-10-29T22:06:57.933+0000",
                    "updated": "2018-10-29T22:06:57.933+0000",
                    "started": "2018-10-29T22:06:57.932+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "160240",
                    "issueId": "13194400"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13194400/worklog/160469",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pearu commented on a change in pull request #2844: ARROW-3624: [Python/C++] Support for zero-sized device buffers and device-to-device copying\nURL: https://github.com/apache/arrow/pull/2844#discussion_r229220638\n \n \n\n ##########\n File path: cpp/src/arrow/gpu/cuda_context.cc\n ##########\n @@ -99,31 +100,52 @@ class CudaContext::CudaContextImpl {\n     return Status::OK();\n   }\n \n+  Status CopyDeviceToDevice(void* dst, const void* src, int64_t nbytes) {\n+    ContextSaver set_temporary(context_);\n+    CU_RETURN_NOT_OK(cuMemcpyDtoD(reinterpret_cast<CUdeviceptr>(dst),\n+                                  reinterpret_cast<const CUdeviceptr>(src),\n+                                  static_cast<size_t>(nbytes)));\n+    return Status::OK();\n+  }\n+\n   Status Synchronize(void) {\n     ContextSaver set_temporary(context_);\n     CU_RETURN_NOT_OK(cuCtxSynchronize());\n     return Status::OK();\n   }\n \n   Status Free(void* device_ptr, int64_t nbytes) {\n-    CU_RETURN_NOT_OK(cuMemFree(reinterpret_cast<CUdeviceptr>(device_ptr)));\n+    if (device_ptr != NULL)  // non 0-size buffer, see ExportIpcBuffer\n+      CU_RETURN_NOT_OK(cuMemFree(reinterpret_cast<CUdeviceptr>(device_ptr)));\n     bytes_allocated_ -= nbytes;\n     return Status::OK();\n   }\n \n   Status ExportIpcBuffer(void* data, std::shared_ptr<CudaIpcMemHandle>* handle) {\n     ContextSaver set_temporary(context_);\n     CUipcMemHandle cu_handle;\n-    CU_RETURN_NOT_OK(cuIpcGetMemHandle(&cu_handle, reinterpret_cast<CUdeviceptr>(data)));\n+    if (data != NULL) {\n+      CU_RETURN_NOT_OK(\n+          cuIpcGetMemHandle(&cu_handle, reinterpret_cast<CUdeviceptr>(data)));\n+    } else {\n+      // 0-size buffers are marked by setting device pointer to 0. To\n+      // make cu_handle aware of this, we zero cu_handle memory.\n+      // Since in Linux sizeof(CUipcMemHandle) == 64, we cast handle\n \n Review comment:\n   Fixed.\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-10-30T08:57:55.523+0000",
                    "updated": "2018-10-30T08:57:55.523+0000",
                    "started": "2018-10-30T08:57:55.522+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "160469",
                    "issueId": "13194400"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13194400/worklog/160472",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pearu commented on a change in pull request #2844: ARROW-3624: [Python/C++] Support for zero-sized device buffers and device-to-device copying\nURL: https://github.com/apache/arrow/pull/2844#discussion_r229223011\n \n \n\n ##########\n File path: cpp/src/arrow/gpu/cuda_context.cc\n ##########\n @@ -99,31 +100,52 @@ class CudaContext::CudaContextImpl {\n     return Status::OK();\n   }\n \n+  Status CopyDeviceToDevice(void* dst, const void* src, int64_t nbytes) {\n+    ContextSaver set_temporary(context_);\n+    CU_RETURN_NOT_OK(cuMemcpyDtoD(reinterpret_cast<CUdeviceptr>(dst),\n+                                  reinterpret_cast<const CUdeviceptr>(src),\n+                                  static_cast<size_t>(nbytes)));\n+    return Status::OK();\n+  }\n+\n   Status Synchronize(void) {\n     ContextSaver set_temporary(context_);\n     CU_RETURN_NOT_OK(cuCtxSynchronize());\n     return Status::OK();\n   }\n \n   Status Free(void* device_ptr, int64_t nbytes) {\n-    CU_RETURN_NOT_OK(cuMemFree(reinterpret_cast<CUdeviceptr>(device_ptr)));\n+    if (device_ptr != NULL)  // non 0-size buffer, see ExportIpcBuffer\n+      CU_RETURN_NOT_OK(cuMemFree(reinterpret_cast<CUdeviceptr>(device_ptr)));\n     bytes_allocated_ -= nbytes;\n     return Status::OK();\n   }\n \n   Status ExportIpcBuffer(void* data, std::shared_ptr<CudaIpcMemHandle>* handle) {\n     ContextSaver set_temporary(context_);\n     CUipcMemHandle cu_handle;\n-    CU_RETURN_NOT_OK(cuIpcGetMemHandle(&cu_handle, reinterpret_cast<CUdeviceptr>(data)));\n+    if (data != NULL) {\n+      CU_RETURN_NOT_OK(\n+          cuIpcGetMemHandle(&cu_handle, reinterpret_cast<CUdeviceptr>(data)));\n+    } else {\n+      // 0-size buffers are marked by setting device pointer to 0. To\n+      // make cu_handle aware of this, we zero cu_handle memory.\n+      // Since in Linux sizeof(CUipcMemHandle) == 64, we cast handle\n+      // value to int64_t:\n+      reinterpret_cast<int64_t*>(&cu_handle)[0] = 0;\n+    }\n     *handle = std::shared_ptr<CudaIpcMemHandle>(new CudaIpcMemHandle(&cu_handle));\n     return Status::OK();\n   }\n \n   Status OpenIpcBuffer(const CudaIpcMemHandle& ipc_handle, uint8_t** out) {\n     auto handle = reinterpret_cast<const CUipcMemHandle*>(ipc_handle.handle());\n-    CUdeviceptr data;\n-    CU_RETURN_NOT_OK(\n-        cuIpcOpenMemHandle(&data, *handle, CU_IPC_MEM_LAZY_ENABLE_PEER_ACCESS));\n+    CUdeviceptr data = 0;\n+    // If handle memory is zero, the IPC handle represents 0-size\n+    // buffer. See also related comments in ExportIpcBuffer.\n+    if (reinterpret_cast<const int64_t*>(handle)[0] != 0)\n \n Review comment:\n   The `reinterpret_cast<CUipcMemHandle>(0)` part gives invalid cast error.\r\n   The solution like in [here](https://stackoverflow.com/questions/6938219/how-to-check-whether-all-bytes-in-a-memory-block-are-zero) seems like an overkill.\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-10-30T09:05:43.227+0000",
                    "updated": "2018-10-30T09:05:43.227+0000",
                    "started": "2018-10-30T09:05:43.226+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "160472",
                    "issueId": "13194400"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13194400/worklog/160481",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pearu commented on a change in pull request #2844: ARROW-3624: [Python/C++] Support for zero-sized device buffers and device-to-device copying\nURL: https://github.com/apache/arrow/pull/2844#discussion_r229233761\n \n \n\n ##########\n File path: cpp/src/arrow/gpu/cuda_memory.h\n ##########\n @@ -67,6 +68,16 @@ class ARROW_EXPORT CudaBuffer : public Buffer {\n   /// \\return Status\n   Status CopyFromHost(const int64_t position, const void* data, int64_t nbytes);\n \n+  /// \\brief Copy memory from device to device at position\n+  /// \\param[in] position start position to copy bytes\n+  /// \\param[in] data the device data to copy\n+  /// \\param[in] nbytes number of bytes to copy\n+  /// \\return Status\n+  ///\n+  /// \\note It is assumed that both source and destination device\n+  /// memories have been allocated within the same context.\n \n Review comment:\n   Currently, no.\r\n   \r\n   In CudaContext we are using cuMemcpyDtoD for copying data within a device.\r\n   To copy data between the two devices, one would need to use [cudaMemcpyPeer](https://docs.nvidia.com/cuda/cuda-runtime-api/group__CUDART__MEMORY.html#group__CUDART__MEMORY_1g88fd1245b2cb10d2d30c74900b7dfb9c) that requires the knowledge of another device.\r\n   \r\n   For copying data between different devices, introduction of new methods is required, e.g.:\r\n   ```\r\n   CudaContext::CudaContextImpl::CopyAnotherDeviceToDevice(void* dst, const void* src, const CudaDevice& src_device, int64_t nbytes)\r\n   ...\r\n   CudaBuffer::CopyFromAnotherDevice(const int64_t position, const void* data, const CudaDevice& data_device, int64_t nbytes)\r\n   ```\r\n   See also [this](https://stackoverflow.com/questions/31628041/how-to-copy-memory-between-different-gpus-in-cuda).\r\n   \r\n   Since I don't have access to multiple GPU devices to test this, I would suggest postponing implementing this feature and create the corresponding JIRA issue. Thoughts?\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-10-30T09:38:54.283+0000",
                    "updated": "2018-10-30T09:38:54.283+0000",
                    "started": "2018-10-30T09:38:54.279+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "160481",
                    "issueId": "13194400"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13194400/worklog/160483",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on a change in pull request #2844: ARROW-3624: [Python/C++] Support for zero-sized device buffers and device-to-device copying\nURL: https://github.com/apache/arrow/pull/2844#discussion_r229235827\n \n \n\n ##########\n File path: cpp/src/arrow/gpu/cuda_memory.h\n ##########\n @@ -67,6 +68,16 @@ class ARROW_EXPORT CudaBuffer : public Buffer {\n   /// \\return Status\n   Status CopyFromHost(const int64_t position, const void* data, int64_t nbytes);\n \n+  /// \\brief Copy memory from device to device at position\n+  /// \\param[in] position start position to copy bytes\n+  /// \\param[in] data the device data to copy\n+  /// \\param[in] nbytes number of bytes to copy\n+  /// \\return Status\n+  ///\n+  /// \\note It is assumed that both source and destination device\n+  /// memories have been allocated within the same context.\n \n Review comment:\n   Sounds fine to me\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-10-30T09:44:42.503+0000",
                    "updated": "2018-10-30T09:44:42.503+0000",
                    "started": "2018-10-30T09:44:42.502+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "160483",
                    "issueId": "13194400"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13194400/worklog/160495",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on a change in pull request #2844: ARROW-3624: [Python/C++] Support for zero-sized device buffers and device-to-device copying\nURL: https://github.com/apache/arrow/pull/2844#discussion_r229240604\n \n \n\n ##########\n File path: cpp/src/arrow/gpu/cuda_context.cc\n ##########\n @@ -99,31 +100,52 @@ class CudaContext::CudaContextImpl {\n     return Status::OK();\n   }\n \n+  Status CopyDeviceToDevice(void* dst, const void* src, int64_t nbytes) {\n+    ContextSaver set_temporary(context_);\n+    CU_RETURN_NOT_OK(cuMemcpyDtoD(reinterpret_cast<CUdeviceptr>(dst),\n+                                  reinterpret_cast<const CUdeviceptr>(src),\n+                                  static_cast<size_t>(nbytes)));\n+    return Status::OK();\n+  }\n+\n   Status Synchronize(void) {\n     ContextSaver set_temporary(context_);\n     CU_RETURN_NOT_OK(cuCtxSynchronize());\n     return Status::OK();\n   }\n \n   Status Free(void* device_ptr, int64_t nbytes) {\n-    CU_RETURN_NOT_OK(cuMemFree(reinterpret_cast<CUdeviceptr>(device_ptr)));\n+    if (device_ptr != NULL)  // non 0-size buffer, see ExportIpcBuffer\n+      CU_RETURN_NOT_OK(cuMemFree(reinterpret_cast<CUdeviceptr>(device_ptr)));\n     bytes_allocated_ -= nbytes;\n     return Status::OK();\n   }\n \n   Status ExportIpcBuffer(void* data, std::shared_ptr<CudaIpcMemHandle>* handle) {\n     ContextSaver set_temporary(context_);\n     CUipcMemHandle cu_handle;\n-    CU_RETURN_NOT_OK(cuIpcGetMemHandle(&cu_handle, reinterpret_cast<CUdeviceptr>(data)));\n+    if (data != NULL) {\n+      CU_RETURN_NOT_OK(\n+          cuIpcGetMemHandle(&cu_handle, reinterpret_cast<CUdeviceptr>(data)));\n+    } else {\n+      // 0-size buffers are marked by setting device pointer to 0. To\n+      // make cu_handle aware of this, we zero cu_handle memory.\n+      // Since in Linux sizeof(CUipcMemHandle) == 64, we cast handle\n+      // value to int64_t:\n+      reinterpret_cast<int64_t*>(&cu_handle)[0] = 0;\n+    }\n     *handle = std::shared_ptr<CudaIpcMemHandle>(new CudaIpcMemHandle(&cu_handle));\n     return Status::OK();\n   }\n \n   Status OpenIpcBuffer(const CudaIpcMemHandle& ipc_handle, uint8_t** out) {\n     auto handle = reinterpret_cast<const CUipcMemHandle*>(ipc_handle.handle());\n-    CUdeviceptr data;\n-    CU_RETURN_NOT_OK(\n-        cuIpcOpenMemHandle(&data, *handle, CU_IPC_MEM_LAZY_ENABLE_PEER_ACCESS));\n+    CUdeviceptr data = 0;\n+    // If handle memory is zero, the IPC handle represents 0-size\n+    // buffer. See also related comments in ExportIpcBuffer.\n+    if (reinterpret_cast<const int64_t*>(handle)[0] != 0)\n \n Review comment:\n   Another possibility is to stop using the \"zero handle\" hack and instead have a separate boolean indicating a zero-sized buffer. This probably means you need to include it in the IPC message structure.\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-10-30T09:58:37.838+0000",
                    "updated": "2018-10-30T09:58:37.838+0000",
                    "started": "2018-10-30T09:58:37.837+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "160495",
                    "issueId": "13194400"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
            "id": "4",
            "description": "An improvement or enhancement to an existing feature or task.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
            "name": "Improvement",
            "subtask": false,
            "avatarId": 21140
        },
        "timespent": 28800,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@77fa7325[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@135b720a[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@27814b4f[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@6f82a697[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@7cb5b148[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@4cd9d9ac[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@612f384b[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@1b639ce7[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@4a8d4132[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@481be576[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@50ee715e[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@57ed4b00[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 28800,
        "customfield_12312520": null,
        "customfield_12312521": "Wed Oct 31 13:36:27 UTC 2018",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2018-10-31T13:36:27.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-3624/watchers",
            "watchCount": 1,
            "isWatching": false
        },
        "created": "2018-10-26T12:20:44.000+0000",
        "updated": "2018-10-31T13:36:27.000+0000",
        "timeoriginalestimate": null,
        "description": "CUDA cuMemAlloc raises an error when trying to allocate device memory with zero-size.\r\nOn the other, using zero sized buffers or arrays is important for generic programming.",
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "8h",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 28800
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[Python/C++] Support for zero-sized device buffers",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13194400/comment/16670117",
                    "id": "16670117",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "body": "Issue resolved by pull request 2844\n[https://github.com/apache/arrow/pull/2844]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "created": "2018-10-31T13:36:27.890+0000",
                    "updated": "2018-10-31T13:36:27.890+0000"
                }
            ],
            "maxResults": 1,
            "total": 1,
            "startAt": 0
        },
        "customfield_12311820": "0|i3zofb:",
        "customfield_12314139": null
    }
}