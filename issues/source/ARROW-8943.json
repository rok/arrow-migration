{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13307443",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13307443",
    "key": "ARROW-8943",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12347769",
                "id": "12347769",
                "description": "",
                "name": "1.0.0",
                "archived": false,
                "released": true,
                "releaseDate": "2020-07-24"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "name": "Major",
            "id": "3"
        },
        "labels": [
            "dataset",
            "dataset-dask-integration",
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=fsaintjacques",
            "name": "fsaintjacques",
            "key": "fsaintjacques",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fsaintjacques&avatarId=37276",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fsaintjacques&avatarId=37276",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fsaintjacques&avatarId=37276",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fsaintjacques&avatarId=37276"
            },
            "displayName": "Francois Saint-Jacques",
            "active": true,
            "timeZone": "America/New_York"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12328935",
                "id": "12328935",
                "name": "C++"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=jorisvandenbossche",
            "name": "jorisvandenbossche",
            "key": "jorisvandenbossche",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
            },
            "displayName": "Joris Van den Bossche",
            "active": true,
            "timeZone": "Europe/Brussels"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=jorisvandenbossche",
            "name": "jorisvandenbossche",
            "key": "jorisvandenbossche",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
            },
            "displayName": "Joris Van den Bossche",
            "active": true,
            "timeZone": "Europe/Brussels"
        },
        "aggregateprogress": {
            "progress": 3600,
            "total": 3600,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 3600,
            "total": 3600,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-8943/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 6,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13307443/worklog/445992",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "fsaintjacques opened a new pull request #7437:\nURL: https://github.com/apache/arrow/pull/7437\n\n\n   \n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-06-15T18:20:00.394+0000",
                    "updated": "2020-06-15T18:20:00.394+0000",
                    "started": "2020-06-15T18:20:00.394+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "445992",
                    "issueId": "13307443"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13307443/worklog/445999",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "github-actions[bot] commented on pull request #7437:\nURL: https://github.com/apache/arrow/pull/7437#issuecomment-644304497\n\n\n   https://issues.apache.org/jira/browse/ARROW-8943\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-06-15T18:32:19.755+0000",
                    "updated": "2020-06-15T18:32:19.755+0000",
                    "started": "2020-06-15T18:32:19.755+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "445999",
                    "issueId": "13307443"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13307443/worklog/446386",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jorisvandenbossche commented on a change in pull request #7437:\nURL: https://github.com/apache/arrow/pull/7437#discussion_r440673889\n\n\n\n##########\nFile path: python/pyarrow/dataset.py\n##########\n@@ -445,7 +446,8 @@ def _union_dataset(children, schema=None, **kwargs):\n     return UnionDataset(schema, children)\n \n \n-def parquet_dataset(metadata_path, schema=None, filesystem=None, format=None):\n+def parquet_dataset(metadata_path, schema=None, filesystem=None, format=None,\n+                    partitioning=None, partition_base_dir=None):\n\nReview comment:\n       Can you also update the docstring here?\n\n##########\nFile path: cpp/src/arrow/dataset/file_parquet.h\n##########\n@@ -215,6 +215,34 @@ class ARROW_DS_EXPORT ParquetFileFragment : public FileFragment {\n   friend class ParquetFileFormat;\n };\n \n+struct ParquetFactoryOptions {\n+  // Either an explicit Partitioning or a PartitioningFactory to discover one.\n+  //\n+  // If a factory is provided, it will be used to infer a schema for partition fields\n+  // based on file and directory paths then construct a Partitioning. The default\n+  // is a Partitioning which will yield no partition information.\n+  //\n+  // The (explicit or discovered) partitioning will be applied to discovered files\n+  // and the resulting partition information embedded in the Dataset.\n+  PartitioningOrFactory partitioning{Partitioning::Default()};\n+\n+  // For the purposes of applying the partitioning, paths will be stripped\n+  // of the partition_base_dir. Files not matching the partition_base_dir\n+  // prefix will be skipped for partition discovery. The ignored files will still\n+  // be part of the Dataset, but will not have partition information.\n+  //\n+  // Example:\n+  // partition_base_dir = \"/dataset\";\n+  //\n+  // - \"/dataset/US/sales.csv\" -> \"US/sales.csv\" will be given to the partitioning\n+  //\n+  // - \"/home/john/late_sales.csv\" -> Will be ignored for partition discovery.\n+  //\n+  // This is useful for partitioning which parses directory when ordering\n+  // is important, e.g. DirectoryPartitioning.\n+  std::string partition_base_dir;\n\nReview comment:\n       Does this have a default? (eg I would assume the base directory of `_metadata` file)\n\n##########\nFile path: cpp/src/arrow/dataset/file_parquet.cc\n##########\n@@ -618,15 +641,37 @@ ParquetDatasetFactory::CollectParquetFragments(\n   }\n }\n \n+Result<std::vector<std::shared_ptr<Schema>>> ParquetDatasetFactory::InspectSchemas(\n+    InspectOptions options) {\n+  std::shared_ptr<Schema> schema;\n+  RETURN_NOT_OK(parquet::arrow::FromParquetSchema(metadata_->schema(), &schema));\n+\n+  // Gather paths found in RowGroups' ColumnChunks.\n+  auto properties = MakeArrowReaderProperties(*format_, *metadata_);\n+  ARROW_ASSIGN_OR_RAISE(auto paths, CollectPaths(*metadata_, properties));\n\nReview comment:\n       Should we only collect those paths here again if there is an actual partitioning? (when `options_.partitioning` is not the default \"no partitioning\") \r\n   (I don't know how costly this is, probably not much)\n\n##########\nFile path: python/pyarrow/_dataset.pyx\n##########\n@@ -1493,6 +1493,80 @@ cdef class UnionDatasetFactory(DatasetFactory):\n         self.union_factory = <CUnionDatasetFactory*> sp.get()\n \n \n+cdef class ParquetFactoryOptions:\n+    \"\"\"\n+    Influences the discovery of parquet dataset.\n+\n+    Parameters\n+    ----------\n+    partition_base_dir : str, optional\n+        For the purposes of applying the partitioning, paths will be\n+        stripped of the partition_base_dir. Files not matching the\n+        partition_base_dir prefix will be skipped for partitioning discovery.\n+        The ignored files will still be part of the Dataset, but will not\n+        have partition information.\n+    \"\"\"\n\nReview comment:\n       Can you include an entry for the `partitioning` parameter as well? \r\n   (for some reason it seems this is also not included in the FileSystemFactoryOptions, but I think it is better to include)\n\n##########\nFile path: python/pyarrow/dataset.py\n##########\n@@ -486,8 +488,13 @@ def parquet_dataset(metadata_path, schema=None, filesystem=None, format=None):\n         filesystem, _ = _ensure_filesystem(filesystem)\n \n     metadata_path = _normalize_path(filesystem, _stringify_path(metadata_path))\n+    options = ParquetFactoryOptions(\n+        partition_base_dir=partition_base_dir,\n+        partitioning=partitioning\n\nReview comment:\n       Can you add here a `partitioning = _ensure_partitioning(partitioning)` before passing it to ParquetFactoryOptions? \r\n   \r\n   (that will eg make sure that `parquet_dataset(..., partitioning=\"hive\")` will also work, similarly as for `dataset(..)`)\n\n##########\nFile path: python/pyarrow/tests/test_dataset.py\n##########\n@@ -1522,19 +1522,20 @@ def _create_parquet_dataset_partitioned(root_path):\n @pytest.mark.parquet\n @pytest.mark.pandas\n def test_parquet_dataset_factory_partitioned(tempdir):\n-    # TODO support for specifying partitioning scheme\n-\n     root_path = tempdir / \"test_parquet_dataset_factory_partitioned\"\n     metadata_path, table = _create_parquet_dataset_partitioned(root_path)\n \n-    dataset = ds.parquet_dataset(metadata_path)\n-    # TODO partition column not yet included\n-    # assert dataset.schema.equals(table.schema)\n+    partitioning = ds.partitioning(flavor=\"hive\")\n+    dataset = ds.parquet_dataset(metadata_path,\n+                                 partitioning=partitioning,\n+                                 partition_base_dir=str(root_path))\n\nReview comment:\n       Related to my previous question about the default of this keyword: is it in this case needed to pass this?\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-06-16T09:35:03.673+0000",
                    "updated": "2020-06-16T09:35:03.673+0000",
                    "started": "2020-06-16T09:35:03.673+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "446386",
                    "issueId": "13307443"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13307443/worklog/447347",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "fsaintjacques commented on a change in pull request #7437:\nURL: https://github.com/apache/arrow/pull/7437#discussion_r441621088\n\n\n\n##########\nFile path: cpp/src/arrow/dataset/file_parquet.h\n##########\n@@ -215,6 +215,34 @@ class ARROW_DS_EXPORT ParquetFileFragment : public FileFragment {\n   friend class ParquetFileFormat;\n };\n \n+struct ParquetFactoryOptions {\n+  // Either an explicit Partitioning or a PartitioningFactory to discover one.\n+  //\n+  // If a factory is provided, it will be used to infer a schema for partition fields\n+  // based on file and directory paths then construct a Partitioning. The default\n+  // is a Partitioning which will yield no partition information.\n+  //\n+  // The (explicit or discovered) partitioning will be applied to discovered files\n+  // and the resulting partition information embedded in the Dataset.\n+  PartitioningOrFactory partitioning{Partitioning::Default()};\n+\n+  // For the purposes of applying the partitioning, paths will be stripped\n+  // of the partition_base_dir. Files not matching the partition_base_dir\n+  // prefix will be skipped for partition discovery. The ignored files will still\n+  // be part of the Dataset, but will not have partition information.\n+  //\n+  // Example:\n+  // partition_base_dir = \"/dataset\";\n+  //\n+  // - \"/dataset/US/sales.csv\" -> \"US/sales.csv\" will be given to the partitioning\n+  //\n+  // - \"/home/john/late_sales.csv\" -> Will be ignored for partition discovery.\n+  //\n+  // This is useful for partitioning which parses directory when ordering\n+  // is important, e.g. DirectoryPartitioning.\n+  std::string partition_base_dir;\n\nReview comment:\n       That's a good point. I'll follow what FileSystemFactory does with the selector base's path.\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-06-17T15:09:58.859+0000",
                    "updated": "2020-06-17T15:09:58.859+0000",
                    "started": "2020-06-17T15:09:58.859+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "447347",
                    "issueId": "13307443"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13307443/worklog/447353",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "fsaintjacques commented on a change in pull request #7437:\nURL: https://github.com/apache/arrow/pull/7437#discussion_r441633483\n\n\n\n##########\nFile path: python/pyarrow/tests/test_dataset.py\n##########\n@@ -1522,19 +1522,20 @@ def _create_parquet_dataset_partitioned(root_path):\n @pytest.mark.parquet\n @pytest.mark.pandas\n def test_parquet_dataset_factory_partitioned(tempdir):\n-    # TODO support for specifying partitioning scheme\n-\n     root_path = tempdir / \"test_parquet_dataset_factory_partitioned\"\n     metadata_path, table = _create_parquet_dataset_partitioned(root_path)\n \n-    dataset = ds.parquet_dataset(metadata_path)\n-    # TODO partition column not yet included\n-    # assert dataset.schema.equals(table.schema)\n+    partitioning = ds.partitioning(flavor=\"hive\")\n+    dataset = ds.parquet_dataset(metadata_path,\n+                                 partitioning=partitioning,\n+                                 partition_base_dir=str(root_path))\n\nReview comment:\n       It is not needed anymore and fixed :)\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-06-17T15:26:19.451+0000",
                    "updated": "2020-06-17T15:26:19.451+0000",
                    "started": "2020-06-17T15:26:19.451+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "447353",
                    "issueId": "13307443"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13307443/worklog/447873",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "fsaintjacques closed pull request #7437:\nURL: https://github.com/apache/arrow/pull/7437\n\n\n   \n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-06-18T15:25:18.813+0000",
                    "updated": "2020-06-18T15:25:18.813+0000",
                    "started": "2020-06-18T15:25:18.813+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "447873",
                    "issueId": "13307443"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
            "id": "4",
            "description": "An improvement or enhancement to an existing feature or task.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
            "name": "Improvement",
            "subtask": false,
            "avatarId": 21140
        },
        "timespent": 3600,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@36feb37[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@4ccee6bc[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@2952d8a8[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@12922038[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@2bd7d880[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@3b6431da[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@44c2986[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@75c5ad7[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@125a8164[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@82a9814[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@6d4f808e[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@8a0e512[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 3600,
        "customfield_12312520": null,
        "customfield_12312521": "Thu Jun 18 15:25:11 UTC 2020",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2020-06-18T15:25:11.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-8943/watchers",
            "watchCount": 3,
            "isWatching": false
        },
        "created": "2020-05-26T13:42:30.000+0000",
        "updated": "2020-06-18T15:25:19.000+0000",
        "timeoriginalestimate": null,
        "description": "Follow-up on ARROW-8062: the ParquetDatasetFactory currently does not yet support specifying a Partitioning / inferring with a PartitioningFactory.",
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "1h",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 3600
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[C++][Dataset] Add support for Partitioning to ParquetDatasetFactory",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13307443/comment/17139501",
                    "id": "17139501",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=fsaintjacques",
                        "name": "fsaintjacques",
                        "key": "fsaintjacques",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fsaintjacques&avatarId=37276",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fsaintjacques&avatarId=37276",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fsaintjacques&avatarId=37276",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fsaintjacques&avatarId=37276"
                        },
                        "displayName": "Francois Saint-Jacques",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "Issue resolved by pull request 7437\n[https://github.com/apache/arrow/pull/7437]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=fsaintjacques",
                        "name": "fsaintjacques",
                        "key": "fsaintjacques",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fsaintjacques&avatarId=37276",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fsaintjacques&avatarId=37276",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fsaintjacques&avatarId=37276",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fsaintjacques&avatarId=37276"
                        },
                        "displayName": "Francois Saint-Jacques",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2020-06-18T15:25:11.085+0000",
                    "updated": "2020-06-18T15:25:11.085+0000"
                }
            ],
            "maxResults": 1,
            "total": 1,
            "startAt": 0
        },
        "customfield_12311820": "0|z0f628:",
        "customfield_12314139": null
    }
}