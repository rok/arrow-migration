{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13261952",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13261952",
    "key": "ARROW-6867",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12340948",
                "id": "12340948",
                "description": "",
                "name": "0.16.0",
                "archived": false,
                "released": true,
                "releaseDate": "2020-02-07"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "name": "Major",
            "id": "3"
        },
        "labels": [
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12345978",
                "id": "12345978",
                "description": "",
                "name": "0.15.0",
                "archived": false,
                "released": true,
                "releaseDate": "2019-10-05"
            }
        ],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=lidavidm",
            "name": "lidavidm",
            "key": "lidavidm",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
            },
            "displayName": "David Li",
            "active": true,
            "timeZone": "America/New_York"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12334621",
                "id": "12334621",
                "name": "FlightRPC"
            },
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12328933",
                "id": "12328933",
                "name": "Java"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=lidavidm",
            "name": "lidavidm",
            "key": "lidavidm",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
            },
            "displayName": "David Li",
            "active": true,
            "timeZone": "America/New_York"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=lidavidm",
            "name": "lidavidm",
            "key": "lidavidm",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
            },
            "displayName": "David Li",
            "active": true,
            "timeZone": "America/New_York"
        },
        "aggregateprogress": {
            "progress": 14400,
            "total": 14400,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 14400,
            "total": 14400,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-6867/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 24,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13261952/worklog/327367",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "lihalite commented on pull request #5634: ARROW-6867: [FlightRPC][Java] clean up default executor\nURL: https://github.com/apache/arrow/pull/5634\n \n \n   We were feeding gRPC an executor, but neglecting to shut it down, which caused the JVM to hang at shutdown when running inside IntelliJ. The gRPC documentation requires that we shut down executors ourselves: https://grpc.github.io/grpc-java/javadoc/io/grpc/ServerBuilder.html#executor-java.util.concurrent.Executor-\r\n   \r\n   Not too sure how to write a unit test for this - it clearly doesn't occur inside the Maven/JUnit unit test runner.\r\n   \r\n   Travis: https://travis-ci.com/lihalite/arrow/builds/131648977\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-10-12T17:30:49.016+0000",
                    "updated": "2019-10-12T17:30:49.016+0000",
                    "started": "2019-10-12T17:30:49.016+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "327367",
                    "issueId": "13261952"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13261952/worklog/327368",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "github-actions[bot] commented on issue #5634: ARROW-6867: [FlightRPC][Java] clean up default executor\nURL: https://github.com/apache/arrow/pull/5634#issuecomment-541345483\n \n \n   https://issues.apache.org/jira/browse/ARROW-6867\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-10-12T17:31:11.181+0000",
                    "updated": "2019-10-12T17:31:11.181+0000",
                    "started": "2019-10-12T17:31:11.180+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "327368",
                    "issueId": "13261952"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13261952/worklog/327415",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "siddharthteotia commented on pull request #5634: ARROW-6867: [FlightRPC][Java] clean up default executor\nURL: https://github.com/apache/arrow/pull/5634#discussion_r334260440\n \n \n\n ##########\n File path: java/flight/src/main/java/org/apache/arrow/flight/FlightServer.java\n ##########\n @@ -103,6 +107,11 @@ public void awaitTermination() throws InterruptedException {\n   /** Request that the server shut down. */\n   public void shutdown() {\n     server.shutdown();\n+    try {\n+      AutoCloseables.close(resources);\n \n Review comment:\n   If server.shutdown() fails, we will leak resources (fail to invoke AutoCloseables.close)?\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-10-13T02:44:07.366+0000",
                    "updated": "2019-10-13T02:44:07.366+0000",
                    "started": "2019-10-13T02:44:07.366+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "327415",
                    "issueId": "13261952"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13261952/worklog/327525",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "lihalite commented on pull request #5634: ARROW-6867: [FlightRPC][Java] clean up default executor\nURL: https://github.com/apache/arrow/pull/5634#discussion_r334287151\n \n \n\n ##########\n File path: java/flight/src/main/java/org/apache/arrow/flight/FlightServer.java\n ##########\n @@ -103,6 +107,11 @@ public void awaitTermination() throws InterruptedException {\n   /** Request that the server shut down. */\n   public void shutdown() {\n     server.shutdown();\n+    try {\n+      AutoCloseables.close(resources);\n \n Review comment:\n   We could, but server.shutdown doesn't throw any checked exceptions. I can move it into a finally block though.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-10-13T17:22:41.145+0000",
                    "updated": "2019-10-13T17:22:41.145+0000",
                    "started": "2019-10-13T17:22:41.144+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "327525",
                    "issueId": "13261952"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13261952/worklog/327526",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "lihalite commented on pull request #5634: ARROW-6867: [FlightRPC][Java] clean up default executor\nURL: https://github.com/apache/arrow/pull/5634#discussion_r334287181\n \n \n\n ##########\n File path: java/flight/src/main/java/org/apache/arrow/flight/FlightServer.java\n ##########\n @@ -103,6 +107,11 @@ public void awaitTermination() throws InterruptedException {\n   /** Request that the server shut down. */\n   public void shutdown() {\n     server.shutdown();\n+    try {\n+      AutoCloseables.close(resources);\n \n Review comment:\n   Er, no, I can't, since I don't want to shut down the executor before the server itself shuts down. \n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-10-13T17:23:19.441+0000",
                    "updated": "2019-10-13T17:23:19.441+0000",
                    "started": "2019-10-13T17:23:19.440+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "327526",
                    "issueId": "13261952"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13261952/worklog/329646",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "emkornfield commented on pull request #5634: ARROW-6867: [FlightRPC][Java] clean up default executor\nURL: https://github.com/apache/arrow/pull/5634#discussion_r335838735\n \n \n\n ##########\n File path: java/flight/src/main/java/org/apache/arrow/flight/FlightServer.java\n ##########\n @@ -227,13 +236,19 @@ public FlightServer build() {\n       }\n \n       // Share one executor between the gRPC service, DoPut, and Handshake\n+      final List<AutoCloseable> resources = new ArrayList<>();\n       final ExecutorService exec = executor != null ? executor : Executors.newCachedThreadPool();\n+      if (executor == null) {\n+        // If we create an executor, make sure to shut it down alongside the server.\n+        resources.add(exec::shutdownNow);\n \n Review comment:\n   why shutdownNow and not shutdown?\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-10-17T07:07:02.944+0000",
                    "updated": "2019-10-17T07:07:02.944+0000",
                    "started": "2019-10-17T07:07:02.944+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "329646",
                    "issueId": "13261952"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13261952/worklog/329647",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "emkornfield commented on pull request #5634: ARROW-6867: [FlightRPC][Java] clean up default executor\nURL: https://github.com/apache/arrow/pull/5634#discussion_r335839993\n \n \n\n ##########\n File path: java/flight/src/main/java/org/apache/arrow/flight/FlightServer.java\n ##########\n @@ -227,13 +236,19 @@ public FlightServer build() {\n       }\n \n       // Share one executor between the gRPC service, DoPut, and Handshake\n+      final List<AutoCloseable> resources = new ArrayList<>();\n       final ExecutorService exec = executor != null ? executor : Executors.newCachedThreadPool();\n+      if (executor == null) {\n \n Review comment:\n   it seems like it would be clearer to remove the ternary operator combine the resources cleanup into one if/then block?\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-10-17T07:10:31.588+0000",
                    "updated": "2019-10-17T07:10:31.588+0000",
                    "started": "2019-10-17T07:10:31.588+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "329647",
                    "issueId": "13261952"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13261952/worklog/329649",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "emkornfield commented on issue #5634: ARROW-6867: [FlightRPC][Java] clean up default executor\nURL: https://github.com/apache/arrow/pull/5634#issuecomment-543041189\n \n \n   > Not too sure how to write a unit test for this - it clearly doesn't occur inside the Maven/JUnit unit test runner.\r\n   \r\n   At the very least you should be able to test for the post condition that the executor passed in is terminated after a call to close.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-10-17T07:17:28.043+0000",
                    "updated": "2019-10-17T07:17:28.043+0000",
                    "started": "2019-10-17T07:17:28.041+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "329649",
                    "issueId": "13261952"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13261952/worklog/332854",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "lihalite commented on pull request #5634: ARROW-6867: [FlightRPC][Java] clean up default executor\nURL: https://github.com/apache/arrow/pull/5634#discussion_r338262904\n \n \n\n ##########\n File path: java/flight/src/main/java/org/apache/arrow/flight/FlightServer.java\n ##########\n @@ -227,13 +236,19 @@ public FlightServer build() {\n       }\n \n       // Share one executor between the gRPC service, DoPut, and Handshake\n+      final List<AutoCloseable> resources = new ArrayList<>();\n       final ExecutorService exec = executor != null ? executor : Executors.newCachedThreadPool();\n+      if (executor == null) {\n \n Review comment:\n   Yes, consolidated them.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-10-23T20:30:50.937+0000",
                    "updated": "2019-10-23T20:30:50.937+0000",
                    "started": "2019-10-23T20:30:50.937+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "332854",
                    "issueId": "13261952"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13261952/worklog/332855",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "lihalite commented on pull request #5634: ARROW-6867: [FlightRPC][Java] clean up default executor\nURL: https://github.com/apache/arrow/pull/5634#discussion_r338263143\n \n \n\n ##########\n File path: java/flight/src/main/java/org/apache/arrow/flight/FlightServer.java\n ##########\n @@ -227,13 +236,19 @@ public FlightServer build() {\n       }\n \n       // Share one executor between the gRPC service, DoPut, and Handshake\n+      final List<AutoCloseable> resources = new ArrayList<>();\n       final ExecutorService exec = executor != null ? executor : Executors.newCachedThreadPool();\n+      if (executor == null) {\n+        // If we create an executor, make sure to shut it down alongside the server.\n+        resources.add(exec::shutdownNow);\n \n Review comment:\n   I was worried about it blocking but on reflection, if we make it to closing the executor, the gRPC server should be shut down and everything should be terminated. I've changed it and updated the comment to explain.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-10-23T20:31:23.932+0000",
                    "updated": "2019-10-23T20:31:23.932+0000",
                    "started": "2019-10-23T20:31:23.931+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "332855",
                    "issueId": "13261952"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13261952/worklog/332856",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "lihalite commented on issue #5634: ARROW-6867: [FlightRPC][Java] clean up default executor\nURL: https://github.com/apache/arrow/pull/5634#issuecomment-545623194\n \n \n   > > Not too sure how to write a unit test for this - it clearly doesn't occur inside the Maven/JUnit unit test runner.\r\n   > \r\n   > At the very least you should be able to test for the post condition that the executor passed in is terminated after a call to close.\r\n   \r\n   Yes, I've added two tests to cover the two cases. \r\n   \r\n   Apologies for the delay, I got tied up at work.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-10-23T20:31:48.153+0000",
                    "updated": "2019-10-23T20:31:48.153+0000",
                    "started": "2019-10-23T20:31:48.153+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "332856",
                    "issueId": "13261952"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13261952/worklog/333118",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "emkornfield commented on pull request #5634: ARROW-6867: [FlightRPC][Java] clean up default executor\nURL: https://github.com/apache/arrow/pull/5634#discussion_r338392460\n \n \n\n ##########\n File path: java/flight/src/test/java/org/apache/arrow/flight/TestServerOptions.java\n ##########\n @@ -54,6 +56,47 @@ public void builderConsumer() throws Exception {\n     }\n   }\n \n+  /**\n+   * Make sure that if Flight supplies a default executor to gRPC, then it is closed along with the server.\n+   */\n+  @Test\n+  public void defaultExecutorClosed() throws Exception {\n+    try (\n+        BufferAllocator a = new RootAllocator(Long.MAX_VALUE);\n+        FlightServer server =\n+            FlightTestUtil.getStartedServer(\n+                (location) -> FlightServer.builder(a, location, new NoOpFlightProducer())\n+                    .build()\n+            )) {\n+      Assert.assertTrue(\"Resources list is non-empty.\", server.resources.size() > 0);\n+      // We can't actually look for the executor object, as what's in the resources list is a reference to its\n+      // shutdown method.\n+    }\n \n Review comment:\n   can't you try shutting down here and verify it does shutdown?\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-10-24T05:56:46.939+0000",
                    "updated": "2019-10-24T05:56:46.939+0000",
                    "started": "2019-10-24T05:56:46.939+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "333118",
                    "issueId": "13261952"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13261952/worklog/338394",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "lihalite commented on pull request #5634: ARROW-6867: [FlightRPC][Java] clean up default executor\nURL: https://github.com/apache/arrow/pull/5634#discussion_r342307774\n \n \n\n ##########\n File path: java/flight/src/test/java/org/apache/arrow/flight/TestServerOptions.java\n ##########\n @@ -54,6 +56,47 @@ public void builderConsumer() throws Exception {\n     }\n   }\n \n+  /**\n+   * Make sure that if Flight supplies a default executor to gRPC, then it is closed along with the server.\n+   */\n+  @Test\n+  public void defaultExecutorClosed() throws Exception {\n+    try (\n+        BufferAllocator a = new RootAllocator(Long.MAX_VALUE);\n+        FlightServer server =\n+            FlightTestUtil.getStartedServer(\n+                (location) -> FlightServer.builder(a, location, new NoOpFlightProducer())\n+                    .build()\n+            )) {\n+      Assert.assertTrue(\"Resources list is non-empty.\", server.resources.size() > 0);\n+      // We can't actually look for the executor object, as what's in the resources list is a reference to its\n+      // shutdown method.\n+    }\n \n Review comment:\n   No, there's no accessible reference to the actual executor to confirm it afterwards.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-11-04T22:42:49.223+0000",
                    "updated": "2019-11-04T22:42:49.223+0000",
                    "started": "2019-11-04T22:42:49.223+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "338394",
                    "issueId": "13261952"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13261952/worklog/338395",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "lihalite commented on pull request #5634: ARROW-6867: [FlightRPC][Java] clean up default executor\nURL: https://github.com/apache/arrow/pull/5634#discussion_r342307936\n \n \n\n ##########\n File path: java/flight/src/test/java/org/apache/arrow/flight/TestServerOptions.java\n ##########\n @@ -54,6 +56,47 @@ public void builderConsumer() throws Exception {\n     }\n   }\n \n+  /**\n+   * Make sure that if Flight supplies a default executor to gRPC, then it is closed along with the server.\n+   */\n+  @Test\n+  public void defaultExecutorClosed() throws Exception {\n+    try (\n+        BufferAllocator a = new RootAllocator(Long.MAX_VALUE);\n+        FlightServer server =\n+            FlightTestUtil.getStartedServer(\n+                (location) -> FlightServer.builder(a, location, new NoOpFlightProducer())\n+                    .build()\n+            )) {\n+      Assert.assertTrue(\"Resources list is non-empty.\", server.resources.size() > 0);\n+      // We can't actually look for the executor object, as what's in the resources list is a reference to its\n+      // shutdown method.\n+    }\n \n Review comment:\n   I could plumb one through, but it'd be adding references specifically for testing.\r\n   \r\n   (Sorry for the delay again, October was quite the busy month.)\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-11-04T22:43:20.854+0000",
                    "updated": "2019-11-04T22:43:20.854+0000",
                    "started": "2019-11-04T22:43:20.854+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "338395",
                    "issueId": "13261952"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13261952/worklog/339773",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "emkornfield commented on pull request #5634: ARROW-6867: [FlightRPC][Java] clean up default executor\nURL: https://github.com/apache/arrow/pull/5634#discussion_r343493923\n \n \n\n ##########\n File path: java/flight/src/test/java/org/apache/arrow/flight/TestServerOptions.java\n ##########\n @@ -54,6 +56,47 @@ public void builderConsumer() throws Exception {\n     }\n   }\n \n+  /**\n+   * Make sure that if Flight supplies a default executor to gRPC, then it is closed along with the server.\n+   */\n+  @Test\n+  public void defaultExecutorClosed() throws Exception {\n+    try (\n+        BufferAllocator a = new RootAllocator(Long.MAX_VALUE);\n+        FlightServer server =\n+            FlightTestUtil.getStartedServer(\n+                (location) -> FlightServer.builder(a, location, new NoOpFlightProducer())\n+                    .build()\n+            )) {\n+      Assert.assertTrue(\"Resources list is non-empty.\", server.resources.size() > 0);\n+      // We can't actually look for the executor object, as what's in the resources list is a reference to its\n+      // shutdown method.\n+    }\n \n Review comment:\n   What do you think about making resources less generic and take the reference to ExecutorService in the class instead of list of AutoCloseable?  Then make awaitTermination rely on both the server and the executor (if its not null).  That way you don't need anything specifically visible for testing.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-11-07T06:32:51.415+0000",
                    "updated": "2019-11-07T06:32:51.415+0000",
                    "started": "2019-11-07T06:32:51.412+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "339773",
                    "issueId": "13261952"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13261952/worklog/340687",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "lihalite commented on pull request #5634: ARROW-6867: [FlightRPC][Java] clean up default executor\nURL: https://github.com/apache/arrow/pull/5634#discussion_r344324190\n \n \n\n ##########\n File path: java/flight/src/test/java/org/apache/arrow/flight/TestServerOptions.java\n ##########\n @@ -54,6 +56,47 @@ public void builderConsumer() throws Exception {\n     }\n   }\n \n+  /**\n+   * Make sure that if Flight supplies a default executor to gRPC, then it is closed along with the server.\n+   */\n+  @Test\n+  public void defaultExecutorClosed() throws Exception {\n+    try (\n+        BufferAllocator a = new RootAllocator(Long.MAX_VALUE);\n+        FlightServer server =\n+            FlightTestUtil.getStartedServer(\n+                (location) -> FlightServer.builder(a, location, new NoOpFlightProducer())\n+                    .build()\n+            )) {\n+      Assert.assertTrue(\"Resources list is non-empty.\", server.resources.size() > 0);\n+      // We can't actually look for the executor object, as what's in the resources list is a reference to its\n+      // shutdown method.\n+    }\n \n Review comment:\n   That makes sense. I've updated the PR.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-11-08T19:08:27.407+0000",
                    "updated": "2019-11-08T19:08:27.407+0000",
                    "started": "2019-11-08T19:08:27.407+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "340687",
                    "issueId": "13261952"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13261952/worklog/341686",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "emkornfield commented on pull request #5634: ARROW-6867: [FlightRPC][Java] clean up default executor\nURL: https://github.com/apache/arrow/pull/5634#discussion_r345038477\n \n \n\n ##########\n File path: java/flight/src/main/java/org/apache/arrow/flight/FlightServer.java\n ##########\n @@ -58,14 +59,19 @@\n \n   private final Location location;\n   private final Server server;\n+  // The executor used by the gRPC server. We don't use it here, but we do need to clean it up with the server.\n+  // May be null, if a user-supplied executor was provided (as we do not want to clean that up)\n+  @VisibleForTesting\n+  final ExecutorService grpcExecutor;\n \n Review comment:\n   I think you could avoid exposing this if you added this to awaitTermination as well (but that is a little tricky to do correctly).  I'm OK if you don't want to do it.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-11-12T06:46:58.989+0000",
                    "updated": "2019-11-12T06:46:58.989+0000",
                    "started": "2019-11-12T06:46:58.989+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "341686",
                    "issueId": "13261952"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13261952/worklog/343788",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "lihalite commented on pull request #5634: ARROW-6867: [FlightRPC][Java] clean up default executor\nURL: https://github.com/apache/arrow/pull/5634#discussion_r346573478\n \n \n\n ##########\n File path: java/flight/src/main/java/org/apache/arrow/flight/FlightServer.java\n ##########\n @@ -58,14 +59,19 @@\n \n   private final Location location;\n   private final Server server;\n+  // The executor used by the gRPC server. We don't use it here, but we do need to clean it up with the server.\n+  // May be null, if a user-supplied executor was provided (as we do not want to clean that up)\n+  @VisibleForTesting\n+  final ExecutorService grpcExecutor;\n \n Review comment:\n   Hmm, how would that work in the test? We'd shut down the executor in awaitTermination and wait?\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-11-14T22:12:30.404+0000",
                    "updated": "2019-11-14T22:12:30.404+0000",
                    "started": "2019-11-14T22:12:30.404+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "343788",
                    "issueId": "13261952"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13261952/worklog/343993",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "emkornfield commented on pull request #5634: ARROW-6867: [FlightRPC][Java] clean up default executor\nURL: https://github.com/apache/arrow/pull/5634#discussion_r346666941\n \n \n\n ##########\n File path: java/flight/src/main/java/org/apache/arrow/flight/FlightServer.java\n ##########\n @@ -58,14 +59,19 @@\n \n   private final Location location;\n   private final Server server;\n+  // The executor used by the gRPC server. We don't use it here, but we do need to clean it up with the server.\n+  // May be null, if a user-supplied executor was provided (as we do not want to clean that up)\n+  @VisibleForTesting\n+  final ExecutorService grpcExecutor;\n \n Review comment:\n   I would have thought we shutdown the executorservice in shutdown\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-11-15T05:31:07.799+0000",
                    "updated": "2019-11-15T05:31:07.799+0000",
                    "started": "2019-11-15T05:31:07.798+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "343993",
                    "issueId": "13261952"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13261952/worklog/344652",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "lidavidm commented on pull request #5634: ARROW-6867: [FlightRPC][Java] clean up default executor\nURL: https://github.com/apache/arrow/pull/5634#discussion_r347050071\n \n \n\n ##########\n File path: java/flight/src/main/java/org/apache/arrow/flight/FlightServer.java\n ##########\n @@ -58,14 +59,19 @@\n \n   private final Location location;\n   private final Server server;\n+  // The executor used by the gRPC server. We don't use it here, but we do need to clean it up with the server.\n+  // May be null, if a user-supplied executor was provided (as we do not want to clean that up)\n+  @VisibleForTesting\n+  final ExecutorService grpcExecutor;\n \n Review comment:\n   Er, right. I can do that, but I still don't see how that'd let us avoid exposing it in test.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-11-15T23:24:15.818+0000",
                    "updated": "2019-11-15T23:24:15.818+0000",
                    "started": "2019-11-15T23:24:15.818+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "344652",
                    "issueId": "13261952"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
            "id": "1",
            "description": "A problem which impairs or prevents the functions of the product.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
            "name": "Bug",
            "subtask": false,
            "avatarId": 21133
        },
        "timespent": 14400,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@3dc1e5ed[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@30e48129[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@38cb253c[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@2cb216c5[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@110af643[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@21156c5b[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@40165f80[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@7cae6d79[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@3a502441[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@302df0e4[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@4235533e[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@4d7f3ba4[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 14400,
        "customfield_12312520": null,
        "customfield_12312521": "Thu Nov 21 05:44:07 UTC 2019",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2019-11-21T05:44:07.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-6867/watchers",
            "watchCount": 1,
            "isWatching": false
        },
        "created": "2019-10-12T14:52:54.000+0000",
        "updated": "2019-11-21T14:02:12.000+0000",
        "timeoriginalestimate": null,
        "description": "I noticed this while working on Flight integration tests. FlightService keeps an executor, which can hang the JVM on shutdown if the executor itself is not shut down.\r\n\r\nIt's used by Handshake and DoPut.\r\n\r\nI think this surfaced because I wrote an AuthHandler that threw an exception.",
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "4h",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 14400
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[FlightRPC][Java] Flight server can hang JVM on shutdown",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13261952/comment/16950062",
                    "id": "16950062",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=lidavidm",
                        "name": "lidavidm",
                        "key": "lidavidm",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "David Li",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "Aha, the real reason is\r\n\r\n1) By default, we share an executor between gRPC and Flight.\r\n 2) gRPC doesn't take ownership of the executor, so we need to manually shut it down on exit.\r\n\r\nThe safest thing would be to clean up the executor, and document Flight as owning it.",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=lidavidm",
                        "name": "lidavidm",
                        "key": "lidavidm",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "David Li",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2019-10-12T14:58:44.851+0000",
                    "updated": "2019-10-12T15:00:20.559+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13261952/comment/16978996",
                    "id": "16978996",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=emkornfield%40gmail.com",
                        "name": "emkornfield@gmail.com",
                        "key": "emkornfield@gmail.com",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Micah Kornfield",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "Issue resolved by pull request 5634\n[https://github.com/apache/arrow/pull/5634]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=emkornfield%40gmail.com",
                        "name": "emkornfield@gmail.com",
                        "key": "emkornfield@gmail.com",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Micah Kornfield",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2019-11-21T05:44:07.967+0000",
                    "updated": "2019-11-21T05:44:07.967+0000"
                }
            ],
            "maxResults": 2,
            "total": 2,
            "startAt": 0
        },
        "customfield_12311820": "0|z07j9k:",
        "customfield_12314139": null
    }
}