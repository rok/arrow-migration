{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13368495",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13368495",
    "key": "ARROW-12146",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12349493",
                "id": "12349493",
                "description": "",
                "name": "4.0.0",
                "archived": false,
                "released": true,
                "releaseDate": "2021-04-26"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/4",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
            "name": "Minor",
            "id": "4"
        },
        "labels": [
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=jpedroantunes",
            "name": "jpedroantunes",
            "key": "jpedroantunes",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34060",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34060",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34060",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34060"
            },
            "displayName": "Jo\u00e3o Pedro Antunes Ferreira",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12334626",
                "id": "12334626",
                "name": "C++ - Gandiva"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=jpedroantunes",
            "name": "jpedroantunes",
            "key": "jpedroantunes",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34060",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34060",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34060",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34060"
            },
            "displayName": "Jo\u00e3o Pedro Antunes Ferreira",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=jpedroantunes",
            "name": "jpedroantunes",
            "key": "jpedroantunes",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34060",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34060",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34060",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34060"
            },
            "displayName": "Jo\u00e3o Pedro Antunes Ferreira",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "aggregateprogress": {
            "progress": 21000,
            "total": 21000,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 21000,
            "total": 21000,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-12146/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 35,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13368495/worklog/573821",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jpedroantunes opened a new pull request #9844:\nURL: https://github.com/apache/arrow/pull/9844\n\n\n   Implement CONVERT_FROM(expression, \u2018UTF8\u2019, replacement char)\r\n   \r\n   Converts the byte data in expression to UTF-8. Expression can be a literal string or a field name. Will replace any invalid UTF-8 characters with the replacement character.\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-03-30T01:05:56.881+0000",
                    "updated": "2021-03-30T01:05:56.881+0000",
                    "started": "2021-03-30T01:05:56.881+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "573821",
                    "issueId": "13368495"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13368495/worklog/573969",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "github-actions[bot] commented on pull request #9844:\nURL: https://github.com/apache/arrow/pull/9844#issuecomment-810051836\n\n\n   https://issues.apache.org/jira/browse/ARROW-12146\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-03-30T09:06:09.192+0000",
                    "updated": "2021-03-30T09:06:09.192+0000",
                    "started": "2021-03-30T09:06:09.191+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "573969",
                    "issueId": "13368495"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13368495/worklog/574104",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "projjal commented on a change in pull request #9844:\nURL: https://github.com/apache/arrow/pull/9844#discussion_r604045553\n\n\n\n##########\nFile path: cpp/src/gandiva/precompiled/string_ops.cc\n##########\n@@ -1246,6 +1246,33 @@ const char* convert_fromUTF8_binary(gdv_int64 context, const char* bin_in, gdv_i\n   return ret;\n }\n \n+FORCE_INLINE\n+const char* convert_replace_invalid_fromUTF8_binary(\n+    gdv_int64 context, const char* text_in, gdv_int32 text_len,\n+    const char* char_to_replace, gdv_int32 /*char_to_replace_len*/, gdv_int32* out_len) {\n+  *out_len = text_len;\n\nReview comment:\n       How are you not using char_to_replace_len\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-03-30T12:23:11.617+0000",
                    "updated": "2021-03-30T12:23:11.617+0000",
                    "started": "2021-03-30T12:23:11.617+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "574104",
                    "issueId": "13368495"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13368495/worklog/574110",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "projjal commented on a change in pull request #9844:\nURL: https://github.com/apache/arrow/pull/9844#discussion_r604048019\n\n\n\n##########\nFile path: cpp/src/gandiva/precompiled/string_ops.cc\n##########\n@@ -1246,6 +1246,33 @@ const char* convert_fromUTF8_binary(gdv_int64 context, const char* bin_in, gdv_i\n   return ret;\n }\n \n+FORCE_INLINE\n+const char* convert_replace_invalid_fromUTF8_binary(\n+    gdv_int64 context, const char* text_in, gdv_int32 text_len,\n+    const char* char_to_replace, gdv_int32 /*char_to_replace_len*/, gdv_int32* out_len) {\n+  *out_len = text_len;\n+  char* ret = reinterpret_cast<char*>(gdv_fn_context_arena_malloc(context, *out_len));\n+  if (ret == nullptr) {\n+    gdv_fn_context_set_error_msg(context, \"Could not allocate memory for output string\");\n+    *out_len = 0;\n+    return \"\";\n+  }\n+  std::string str;\n+  gdv_int32 char_len;\n+  // scan the base text from left to right and increment the start pointer till\n+  // looking for invalid chars to substitute\n+  for (int text_index = 0; text_index < text_len; text_index += 1) {\n\nReview comment:\n       logic here is faulty. You need to increment by char_len instead of 1 after each iteration\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-03-30T12:26:37.253+0000",
                    "updated": "2021-03-30T12:26:37.253+0000",
                    "started": "2021-03-30T12:26:37.253+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "574110",
                    "issueId": "13368495"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13368495/worklog/574111",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "projjal commented on a change in pull request #9844:\nURL: https://github.com/apache/arrow/pull/9844#discussion_r604049008\n\n\n\n##########\nFile path: cpp/src/gandiva/precompiled/string_ops.cc\n##########\n@@ -1246,6 +1246,33 @@ const char* convert_fromUTF8_binary(gdv_int64 context, const char* bin_in, gdv_i\n   return ret;\n }\n \n+FORCE_INLINE\n+const char* convert_replace_invalid_fromUTF8_binary(\n+    gdv_int64 context, const char* text_in, gdv_int32 text_len,\n+    const char* char_to_replace, gdv_int32 /*char_to_replace_len*/, gdv_int32* out_len) {\n+  *out_len = text_len;\n+  char* ret = reinterpret_cast<char*>(gdv_fn_context_arena_malloc(context, *out_len));\n\nReview comment:\n       output string length can be larger than input binary length\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-03-30T12:28:02.427+0000",
                    "updated": "2021-03-30T12:28:02.427+0000",
                    "started": "2021-03-30T12:28:02.427+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "574111",
                    "issueId": "13368495"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13368495/worklog/574115",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "projjal commented on a change in pull request #9844:\nURL: https://github.com/apache/arrow/pull/9844#discussion_r604052248\n\n\n\n##########\nFile path: cpp/src/gandiva/precompiled/string_ops.cc\n##########\n@@ -1246,6 +1246,33 @@ const char* convert_fromUTF8_binary(gdv_int64 context, const char* bin_in, gdv_i\n   return ret;\n }\n \n+FORCE_INLINE\n+const char* convert_replace_invalid_fromUTF8_binary(\n+    gdv_int64 context, const char* text_in, gdv_int32 text_len,\n+    const char* char_to_replace, gdv_int32 /*char_to_replace_len*/, gdv_int32* out_len) {\n+  *out_len = text_len;\n+  char* ret = reinterpret_cast<char*>(gdv_fn_context_arena_malloc(context, *out_len));\n+  if (ret == nullptr) {\n+    gdv_fn_context_set_error_msg(context, \"Could not allocate memory for output string\");\n+    *out_len = 0;\n+    return \"\";\n+  }\n+  std::string str;\n+  gdv_int32 char_len;\n+  // scan the base text from left to right and increment the start pointer till\n+  // looking for invalid chars to substitute\n+  for (int text_index = 0; text_index < text_len; text_index += 1) {\n+    char_len = utf8_char_length(text_in[text_index]);\n+    if (char_len == 0 || text_index + char_len > text_len) {\n+      str += char_to_replace;\n\nReview comment:\n       char to_replace is not necessarily null-terminated\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-03-30T12:32:15.762+0000",
                    "updated": "2021-03-30T12:32:15.762+0000",
                    "started": "2021-03-30T12:32:15.762+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "574115",
                    "issueId": "13368495"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13368495/worklog/574216",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jpedroantunes commented on a change in pull request #9844:\nURL: https://github.com/apache/arrow/pull/9844#discussion_r604220433\n\n\n\n##########\nFile path: cpp/src/gandiva/precompiled/string_ops.cc\n##########\n@@ -1246,6 +1246,33 @@ const char* convert_fromUTF8_binary(gdv_int64 context, const char* bin_in, gdv_i\n   return ret;\n }\n \n+FORCE_INLINE\n+const char* convert_replace_invalid_fromUTF8_binary(\n+    gdv_int64 context, const char* text_in, gdv_int32 text_len,\n+    const char* char_to_replace, gdv_int32 /*char_to_replace_len*/, gdv_int32* out_len) {\n+  *out_len = text_len;\n\nReview comment:\n       As defined by email, actually we are going to consider a single char to replace.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-03-30T15:47:51.326+0000",
                    "updated": "2021-03-30T15:47:51.326+0000",
                    "started": "2021-03-30T15:47:51.326+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "574216",
                    "issueId": "13368495"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13368495/worklog/574217",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jpedroantunes commented on a change in pull request #9844:\nURL: https://github.com/apache/arrow/pull/9844#discussion_r604220697\n\n\n\n##########\nFile path: cpp/src/gandiva/precompiled/string_ops.cc\n##########\n@@ -1246,6 +1246,33 @@ const char* convert_fromUTF8_binary(gdv_int64 context, const char* bin_in, gdv_i\n   return ret;\n }\n \n+FORCE_INLINE\n+const char* convert_replace_invalid_fromUTF8_binary(\n+    gdv_int64 context, const char* text_in, gdv_int32 text_len,\n+    const char* char_to_replace, gdv_int32 /*char_to_replace_len*/, gdv_int32* out_len) {\n+  *out_len = text_len;\n+  char* ret = reinterpret_cast<char*>(gdv_fn_context_arena_malloc(context, *out_len));\n+  if (ret == nullptr) {\n+    gdv_fn_context_set_error_msg(context, \"Could not allocate memory for output string\");\n+    *out_len = 0;\n+    return \"\";\n+  }\n+  std::string str;\n+  gdv_int32 char_len;\n+  // scan the base text from left to right and increment the start pointer till\n+  // looking for invalid chars to substitute\n+  for (int text_index = 0; text_index < text_len; text_index += 1) {\n\nReview comment:\n       Corrected!\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-03-30T15:48:04.195+0000",
                    "updated": "2021-03-30T15:48:04.195+0000",
                    "started": "2021-03-30T15:48:04.195+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "574217",
                    "issueId": "13368495"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13368495/worklog/574219",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jpedroantunes commented on a change in pull request #9844:\nURL: https://github.com/apache/arrow/pull/9844#discussion_r604221525\n\n\n\n##########\nFile path: cpp/src/gandiva/precompiled/string_ops.cc\n##########\n@@ -1246,6 +1246,33 @@ const char* convert_fromUTF8_binary(gdv_int64 context, const char* bin_in, gdv_i\n   return ret;\n }\n \n+FORCE_INLINE\n+const char* convert_replace_invalid_fromUTF8_binary(\n+    gdv_int64 context, const char* text_in, gdv_int32 text_len,\n+    const char* char_to_replace, gdv_int32 /*char_to_replace_len*/, gdv_int32* out_len) {\n+  *out_len = text_len;\n+  char* ret = reinterpret_cast<char*>(gdv_fn_context_arena_malloc(context, *out_len));\n\nReview comment:\n       As defined by email, actually we are going to consider a single char to replace. So the input length will necessarily be equals to the output length!\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-03-30T15:49:02.980+0000",
                    "updated": "2021-03-30T15:49:02.980+0000",
                    "started": "2021-03-30T15:49:02.980+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "574219",
                    "issueId": "13368495"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13368495/worklog/574221",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jpedroantunes commented on a change in pull request #9844:\nURL: https://github.com/apache/arrow/pull/9844#discussion_r604223982\n\n\n\n##########\nFile path: cpp/src/gandiva/precompiled/string_ops.cc\n##########\n@@ -1246,6 +1246,33 @@ const char* convert_fromUTF8_binary(gdv_int64 context, const char* bin_in, gdv_i\n   return ret;\n }\n \n+FORCE_INLINE\n+const char* convert_replace_invalid_fromUTF8_binary(\n+    gdv_int64 context, const char* text_in, gdv_int32 text_len,\n+    const char* char_to_replace, gdv_int32 /*char_to_replace_len*/, gdv_int32* out_len) {\n+  *out_len = text_len;\n+  char* ret = reinterpret_cast<char*>(gdv_fn_context_arena_malloc(context, *out_len));\n+  if (ret == nullptr) {\n+    gdv_fn_context_set_error_msg(context, \"Could not allocate memory for output string\");\n+    *out_len = 0;\n+    return \"\";\n+  }\n+  std::string str;\n+  gdv_int32 char_len;\n+  // scan the base text from left to right and increment the start pointer till\n+  // looking for invalid chars to substitute\n+  for (int text_index = 0; text_index < text_len; text_index += 1) {\n+    char_len = utf8_char_length(text_in[text_index]);\n+    if (char_len == 0 || text_index + char_len > text_len) {\n+      str += char_to_replace;\n\nReview comment:\n       Corrected for not using string anymore. Now using memcpy!\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-03-30T15:52:13.978+0000",
                    "updated": "2021-03-30T15:52:13.978+0000",
                    "started": "2021-03-30T15:52:13.978+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "574221",
                    "issueId": "13368495"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13368495/worklog/574279",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "projjal commented on a change in pull request #9844:\nURL: https://github.com/apache/arrow/pull/9844#discussion_r604301461\n\n\n\n##########\nFile path: cpp/src/gandiva/precompiled/string_ops.cc\n##########\n@@ -1246,6 +1246,39 @@ const char* convert_fromUTF8_binary(gdv_int64 context, const char* bin_in, gdv_i\n   return ret;\n }\n \n+FORCE_INLINE\n+const char* convert_replace_invalid_fromUTF8_binary(\n+    gdv_int64 context, const char* text_in, gdv_int32 text_len,\n+    const char* char_to_replace, gdv_int32 /*char_to_replace_len*/, gdv_int32* out_len) {\n+  // actually the convert_replace function replaces the invalid bytes with a single byte\n+  // so the output length will be the same as the input length\n\nReview comment:\n       If you are assuming it is single byte char, add a check to validate that the char_length of char_to_replace is 1. If its greater than one, return error saying not supported\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-03-30T17:37:27.691+0000",
                    "updated": "2021-03-30T17:37:27.691+0000",
                    "started": "2021-03-30T17:37:27.691+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "574279",
                    "issueId": "13368495"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13368495/worklog/574282",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "projjal commented on a change in pull request #9844:\nURL: https://github.com/apache/arrow/pull/9844#discussion_r604303465\n\n\n\n##########\nFile path: cpp/src/gandiva/precompiled/string_ops.cc\n##########\n@@ -1246,6 +1246,39 @@ const char* convert_fromUTF8_binary(gdv_int64 context, const char* bin_in, gdv_i\n   return ret;\n }\n \n+FORCE_INLINE\n+const char* convert_replace_invalid_fromUTF8_binary(\n+    gdv_int64 context, const char* text_in, gdv_int32 text_len,\n+    const char* char_to_replace, gdv_int32 /*char_to_replace_len*/, gdv_int32* out_len) {\n+  // actually the convert_replace function replaces the invalid bytes with a single byte\n+  // so the output length will be the same as the input length\n+  *out_len = text_len;\n+  char* ret = reinterpret_cast<char*>(gdv_fn_context_arena_malloc(context, *out_len));\n+  if (ret == nullptr) {\n+    gdv_fn_context_set_error_msg(context, \"Could not allocate memory for output string\");\n+    *out_len = 0;\n+    return \"\";\n+  }\n+  gdv_int32 out_byte_counter = 0;\n+  gdv_int32 char_len;\n+  // scan the base text from left to right and increment the start pointer till\n+  // looking for invalid chars to substitute\n+  for (int text_index = 0; text_index < text_len; text_index += char_len) {\n+    char_len = utf8_char_length(text_in[text_index]);\n+    if (char_len == 0 || text_index + char_len > text_len) {\n\nReview comment:\n       utf8_char_length doesn't completely validate the utf8 char. You need to call a validate function in the if statement.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-03-30T17:40:15.290+0000",
                    "updated": "2021-03-30T17:40:15.290+0000",
                    "started": "2021-03-30T17:40:15.289+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "574282",
                    "issueId": "13368495"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13368495/worklog/574292",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jpedroantunes commented on a change in pull request #9844:\nURL: https://github.com/apache/arrow/pull/9844#discussion_r604220433\n\n\n\n##########\nFile path: cpp/src/gandiva/precompiled/string_ops.cc\n##########\n@@ -1246,6 +1246,33 @@ const char* convert_fromUTF8_binary(gdv_int64 context, const char* bin_in, gdv_i\n   return ret;\n }\n \n+FORCE_INLINE\n+const char* convert_replace_invalid_fromUTF8_binary(\n+    gdv_int64 context, const char* text_in, gdv_int32 text_len,\n+    const char* char_to_replace, gdv_int32 /*char_to_replace_len*/, gdv_int32* out_len) {\n+  *out_len = text_len;\n\nReview comment:\n       Actually we are going to consider a single char to replace.\n\n##########\nFile path: cpp/src/gandiva/precompiled/string_ops.cc\n##########\n@@ -1246,6 +1246,33 @@ const char* convert_fromUTF8_binary(gdv_int64 context, const char* bin_in, gdv_i\n   return ret;\n }\n \n+FORCE_INLINE\n+const char* convert_replace_invalid_fromUTF8_binary(\n+    gdv_int64 context, const char* text_in, gdv_int32 text_len,\n+    const char* char_to_replace, gdv_int32 /*char_to_replace_len*/, gdv_int32* out_len) {\n+  *out_len = text_len;\n+  char* ret = reinterpret_cast<char*>(gdv_fn_context_arena_malloc(context, *out_len));\n\nReview comment:\n       Actually we are going to consider a single char to replace. So the input length will necessarily be equals to the output length!\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-03-30T17:55:33.938+0000",
                    "updated": "2021-03-30T17:55:33.938+0000",
                    "started": "2021-03-30T17:55:33.938+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "574292",
                    "issueId": "13368495"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13368495/worklog/574374",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jpedroantunes commented on a change in pull request #9844:\nURL: https://github.com/apache/arrow/pull/9844#discussion_r604391508\n\n\n\n##########\nFile path: cpp/src/gandiva/precompiled/string_ops.cc\n##########\n@@ -1246,6 +1246,39 @@ const char* convert_fromUTF8_binary(gdv_int64 context, const char* bin_in, gdv_i\n   return ret;\n }\n \n+FORCE_INLINE\n+const char* convert_replace_invalid_fromUTF8_binary(\n+    gdv_int64 context, const char* text_in, gdv_int32 text_len,\n+    const char* char_to_replace, gdv_int32 /*char_to_replace_len*/, gdv_int32* out_len) {\n+  // actually the convert_replace function replaces the invalid bytes with a single byte\n+  // so the output length will be the same as the input length\n\nReview comment:\n       Added!\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-03-30T19:58:03.986+0000",
                    "updated": "2021-03-30T19:58:03.986+0000",
                    "started": "2021-03-30T19:58:03.986+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "574374",
                    "issueId": "13368495"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13368495/worklog/574375",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jpedroantunes commented on a change in pull request #9844:\nURL: https://github.com/apache/arrow/pull/9844#discussion_r604392118\n\n\n\n##########\nFile path: cpp/src/gandiva/precompiled/string_ops.cc\n##########\n@@ -1246,6 +1246,39 @@ const char* convert_fromUTF8_binary(gdv_int64 context, const char* bin_in, gdv_i\n   return ret;\n }\n \n+FORCE_INLINE\n+const char* convert_replace_invalid_fromUTF8_binary(\n+    gdv_int64 context, const char* text_in, gdv_int32 text_len,\n+    const char* char_to_replace, gdv_int32 /*char_to_replace_len*/, gdv_int32* out_len) {\n+  // actually the convert_replace function replaces the invalid bytes with a single byte\n+  // so the output length will be the same as the input length\n+  *out_len = text_len;\n+  char* ret = reinterpret_cast<char*>(gdv_fn_context_arena_malloc(context, *out_len));\n+  if (ret == nullptr) {\n+    gdv_fn_context_set_error_msg(context, \"Could not allocate memory for output string\");\n+    *out_len = 0;\n+    return \"\";\n+  }\n+  gdv_int32 out_byte_counter = 0;\n+  gdv_int32 char_len;\n+  // scan the base text from left to right and increment the start pointer till\n+  // looking for invalid chars to substitute\n+  for (int text_index = 0; text_index < text_len; text_index += char_len) {\n+    char_len = utf8_char_length(text_in[text_index]);\n+    if (char_len == 0 || text_index + char_len > text_len) {\n\nReview comment:\n       @projjal what do you mean by \"validate function\"? I'm trying to find this function to apply it, but I'm not seeing it\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-03-30T19:59:07.064+0000",
                    "updated": "2021-03-30T19:59:07.064+0000",
                    "started": "2021-03-30T19:59:07.063+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "574375",
                    "issueId": "13368495"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13368495/worklog/574741",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "projjal commented on a change in pull request #9844:\nURL: https://github.com/apache/arrow/pull/9844#discussion_r604801337\n\n\n\n##########\nFile path: cpp/src/gandiva/precompiled/string_ops.cc\n##########\n@@ -1246,6 +1246,39 @@ const char* convert_fromUTF8_binary(gdv_int64 context, const char* bin_in, gdv_i\n   return ret;\n }\n \n+FORCE_INLINE\n+const char* convert_replace_invalid_fromUTF8_binary(\n+    gdv_int64 context, const char* text_in, gdv_int32 text_len,\n+    const char* char_to_replace, gdv_int32 /*char_to_replace_len*/, gdv_int32* out_len) {\n+  // actually the convert_replace function replaces the invalid bytes with a single byte\n+  // so the output length will be the same as the input length\n+  *out_len = text_len;\n+  char* ret = reinterpret_cast<char*>(gdv_fn_context_arena_malloc(context, *out_len));\n+  if (ret == nullptr) {\n+    gdv_fn_context_set_error_msg(context, \"Could not allocate memory for output string\");\n+    *out_len = 0;\n+    return \"\";\n+  }\n+  gdv_int32 out_byte_counter = 0;\n+  gdv_int32 char_len;\n+  // scan the base text from left to right and increment the start pointer till\n+  // looking for invalid chars to substitute\n+  for (int text_index = 0; text_index < text_len; text_index += char_len) {\n+    char_len = utf8_char_length(text_in[text_index]);\n+    if (char_len == 0 || text_index + char_len > text_len) {\n\nReview comment:\n       it should be simple to write. You can check the logic in utf8_length function. Basically it just checks if the MSBs of the bytes is correct according to the format.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-03-31T11:04:26.840+0000",
                    "updated": "2021-03-31T11:04:26.840+0000",
                    "started": "2021-03-31T11:04:26.840+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "574741",
                    "issueId": "13368495"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13368495/worklog/574742",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "projjal commented on a change in pull request #9844:\nURL: https://github.com/apache/arrow/pull/9844#discussion_r604801995\n\n\n\n##########\nFile path: cpp/src/gandiva/precompiled/string_ops.cc\n##########\n@@ -1246,6 +1246,44 @@ const char* convert_fromUTF8_binary(gdv_int64 context, const char* bin_in, gdv_i\n   return ret;\n }\n \n+FORCE_INLINE\n+const char* convert_replace_invalid_fromUTF8_binary(\n+    gdv_int64 context, const char* text_in, gdv_int32 text_len,\n+    const char* char_to_replace, gdv_int32 char_to_replace_len, gdv_int32* out_len) {\n+  if (char_to_replace_len > 1) {\n+    gdv_fn_context_set_error_msg(context, \"Replacement of multiple bytes not supported\");\n+    *out_len = 0;\n+    return \"\";\n+  }\n+  // actually the convert_replace function replaces the invalid bytes with a single byte\n+  // so the output length will be the same as the input length\n+  *out_len = text_len;\n+  char* ret = reinterpret_cast<char*>(gdv_fn_context_arena_malloc(context, *out_len));\n+  if (ret == nullptr) {\n+    gdv_fn_context_set_error_msg(context, \"Could not allocate memory for output string\");\n+    *out_len = 0;\n+    return \"\";\n+  }\n+  gdv_int32 out_byte_counter = 0;\n+  gdv_int32 char_len;\n+  // scan the base text from left to right and increment the start pointer till\n+  // looking for invalid chars to substitute\n+  for (int text_index = 0; text_index < text_len; text_index += char_len) {\n+    char_len = utf8_char_length(text_in[text_index]);\n\nReview comment:\n       Since most of the time the input will be ascii, you can optimise it for that case.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-03-31T11:05:40.160+0000",
                    "updated": "2021-03-31T11:05:40.160+0000",
                    "started": "2021-03-31T11:05:40.160+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "574742",
                    "issueId": "13368495"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13368495/worklog/574814",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jpedroantunes commented on a change in pull request #9844:\nURL: https://github.com/apache/arrow/pull/9844#discussion_r604864206\n\n\n\n##########\nFile path: cpp/src/gandiva/precompiled/string_ops.cc\n##########\n@@ -1246,6 +1246,39 @@ const char* convert_fromUTF8_binary(gdv_int64 context, const char* bin_in, gdv_i\n   return ret;\n }\n \n+FORCE_INLINE\n+const char* convert_replace_invalid_fromUTF8_binary(\n+    gdv_int64 context, const char* text_in, gdv_int32 text_len,\n+    const char* char_to_replace, gdv_int32 /*char_to_replace_len*/, gdv_int32* out_len) {\n+  // actually the convert_replace function replaces the invalid bytes with a single byte\n+  // so the output length will be the same as the input length\n+  *out_len = text_len;\n+  char* ret = reinterpret_cast<char*>(gdv_fn_context_arena_malloc(context, *out_len));\n+  if (ret == nullptr) {\n+    gdv_fn_context_set_error_msg(context, \"Could not allocate memory for output string\");\n+    *out_len = 0;\n+    return \"\";\n+  }\n+  gdv_int32 out_byte_counter = 0;\n+  gdv_int32 char_len;\n+  // scan the base text from left to right and increment the start pointer till\n+  // looking for invalid chars to substitute\n+  for (int text_index = 0; text_index < text_len; text_index += char_len) {\n+    char_len = utf8_char_length(text_in[text_index]);\n+    if (char_len == 0 || text_index + char_len > text_len) {\n\nReview comment:\n       Thanks! Included validation according to utf8_length.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-03-31T12:46:04.593+0000",
                    "updated": "2021-03-31T12:46:04.593+0000",
                    "started": "2021-03-31T12:46:04.593+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "574814",
                    "issueId": "13368495"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13368495/worklog/575019",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "projjal commented on a change in pull request #9844:\nURL: https://github.com/apache/arrow/pull/9844#discussion_r605111131\n\n\n\n##########\nFile path: cpp/src/gandiva/precompiled/string_ops.cc\n##########\n@@ -1246,6 +1258,52 @@ const char* convert_fromUTF8_binary(gdv_int64 context, const char* bin_in, gdv_i\n   return ret;\n }\n \n+FORCE_INLINE\n+const char* convert_replace_invalid_fromUTF8_binary(\n+    gdv_int64 context, const char* text_in, gdv_int32 text_len,\n+    const char* char_to_replace, gdv_int32 char_to_replace_len, gdv_int32* out_len) {\n+  if (char_to_replace_len > 1) {\n+    gdv_fn_context_set_error_msg(context, \"Replacement of multiple bytes not supported\");\n+    *out_len = 0;\n+    return \"\";\n+  }\n+  // actually the convert_replace function replaces the invalid bytes with a single byte\n+  // so the output length will be the same as the input length\n+  *out_len = text_len;\n+  char* ret = reinterpret_cast<char*>(gdv_fn_context_arena_malloc(context, *out_len));\n+  if (ret == nullptr) {\n+    gdv_fn_context_set_error_msg(context, \"Could not allocate memory for output string\");\n+    *out_len = 0;\n+    return \"\";\n+  }\n+  gdv_int32 out_byte_counter = 0;\n+  gdv_int32 char_len;\n+  // scan the base text from left to right and increment the start pointer till\n+  // looking for invalid chars to substitute\n+  for (int text_index = 0; text_index < text_len; text_index += char_len) {\n+    char_len = utf8_char_length(text_in[text_index]);\n+    if (char_len == 0) {\n+      memcpy(ret + out_byte_counter, char_to_replace, 1);\n+      out_byte_counter += 1;\n+      // define char_len = 1 to increase text_index by 1 (as ASCII char fits in 1 byte)\n+      char_len = 1;\n+      continue;\n+    }\n+    // if the char length is greater than 0, execute another validation on MSBs\n+    char* invalid_char = reinterpret_cast<char*>(malloc(char_len));\n+    if (text_index + char_len > text_len || validate_utf8_following_bytes(\n+        text_in, char_len, text_index, invalid_char) == 0) {\n+      memcpy(ret + out_byte_counter, char_to_replace, char_len);\n+    } else {\n+      memcpy(ret + out_byte_counter, text_in + text_index, char_len);\n\nReview comment:\n       It is currently doing a memcpy for character by character. You can keep track of valid chars across the loop and do a single memcpy at the end or after detecting invalid char. \n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-03-31T18:03:13.646+0000",
                    "updated": "2021-03-31T18:03:13.646+0000",
                    "started": "2021-03-31T18:03:13.645+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "575019",
                    "issueId": "13368495"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13368495/worklog/575022",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "projjal commented on a change in pull request #9844:\nURL: https://github.com/apache/arrow/pull/9844#discussion_r605112605\n\n\n\n##########\nFile path: cpp/src/gandiva/precompiled/string_ops.cc\n##########\n@@ -1246,6 +1258,52 @@ const char* convert_fromUTF8_binary(gdv_int64 context, const char* bin_in, gdv_i\n   return ret;\n }\n \n+FORCE_INLINE\n+const char* convert_replace_invalid_fromUTF8_binary(\n+    gdv_int64 context, const char* text_in, gdv_int32 text_len,\n+    const char* char_to_replace, gdv_int32 char_to_replace_len, gdv_int32* out_len) {\n+  if (char_to_replace_len > 1) {\n+    gdv_fn_context_set_error_msg(context, \"Replacement of multiple bytes not supported\");\n+    *out_len = 0;\n+    return \"\";\n+  }\n+  // actually the convert_replace function replaces the invalid bytes with a single byte\n+  // so the output length will be the same as the input length\n+  *out_len = text_len;\n+  char* ret = reinterpret_cast<char*>(gdv_fn_context_arena_malloc(context, *out_len));\n+  if (ret == nullptr) {\n+    gdv_fn_context_set_error_msg(context, \"Could not allocate memory for output string\");\n+    *out_len = 0;\n+    return \"\";\n+  }\n+  gdv_int32 out_byte_counter = 0;\n+  gdv_int32 char_len;\n+  // scan the base text from left to right and increment the start pointer till\n+  // looking for invalid chars to substitute\n+  for (int text_index = 0; text_index < text_len; text_index += char_len) {\n+    char_len = utf8_char_length(text_in[text_index]);\n+    if (char_len == 0) {\n+      memcpy(ret + out_byte_counter, char_to_replace, 1);\n+      out_byte_counter += 1;\n+      // define char_len = 1 to increase text_index by 1 (as ASCII char fits in 1 byte)\n+      char_len = 1;\n+      continue;\n+    }\n+    // if the char length is greater than 0, execute another validation on MSBs\n+    char* invalid_char = reinterpret_cast<char*>(malloc(char_len));\n\nReview comment:\n       please use arena malloc\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-03-31T18:05:37.280+0000",
                    "updated": "2021-03-31T18:05:37.280+0000",
                    "started": "2021-03-31T18:05:37.279+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "575022",
                    "issueId": "13368495"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/2",
            "id": "2",
            "description": "A new feature of the product, which has yet to be developed.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21141&avatarType=issuetype",
            "name": "New Feature",
            "subtask": false,
            "avatarId": 21141
        },
        "timespent": 21000,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@7600c03f[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@2cd578b4[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@472f958e[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@40385507[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@5461139c[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@16aeaec8[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@2d16da76[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@2f0432be[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@73a53931[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@109e0163[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@b40bc6c[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@5dffe78[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 21000,
        "customfield_12312520": null,
        "customfield_12312521": "Mon Apr 12 15:53:16 UTC 2021",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2021-04-12T15:53:16.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-12146/watchers",
            "watchCount": 1,
            "isWatching": false
        },
        "created": "2021-03-30T01:05:00.000+0000",
        "updated": "2021-04-12T15:53:24.000+0000",
        "timeoriginalestimate": null,
        "description": "Implement CONVERT_FROM(expression, \u2018UTF8\u2019, replacement char)\r\n\r\nConverts the byte data in expression to UTF-8. Expression can be a literal string or a field name. Will replace any invalid UTF-8 characters with the replacement character.",
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "5h 50m",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 21000
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[C++][Gandiva] Implement CONVERT_FROM(expression, \u2018UTF8\u2019, replacement char) function",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13368495/comment/17319530",
                    "id": "17319530",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=praveenbingo",
                        "name": "praveenbingo",
                        "key": "praveenbingo",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Praveen Kumar",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "Issue resolved by pull request 9844\n[https://github.com/apache/arrow/pull/9844]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=praveenbingo",
                        "name": "praveenbingo",
                        "key": "praveenbingo",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Praveen Kumar",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2021-04-12T15:53:16.155+0000",
                    "updated": "2021-04-12T15:53:16.155+0000"
                }
            ],
            "maxResults": 1,
            "total": 1,
            "startAt": 0
        },
        "customfield_12311820": "0|z0pcig:",
        "customfield_12314139": null
    }
}