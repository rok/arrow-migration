{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13300999",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13300999",
    "key": "ARROW-8594",
    "fields": {
        "fixVersions": [],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/5",
            "id": "5",
            "description": "All attempts at reproducing this issue failed, or not enough information was available to reproduce the issue. Reading the code produces no clues as to why this behavior would occur. If more information appears later, please reopen the issue.",
            "name": "Cannot Reproduce"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
            "name": "Critical",
            "id": "2"
        },
        "labels": [],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": null,
        "customfield_12312330": null,
        "versions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12340948",
                "id": "12340948",
                "description": "",
                "name": "0.16.0",
                "archived": false,
                "released": true,
                "releaseDate": "2020-02-07"
            }
        ],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=kou",
            "name": "kou",
            "key": "kou",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=kou&avatarId=30762",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kou&avatarId=30762",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kou&avatarId=30762",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kou&avatarId=30762"
            },
            "displayName": "Kouhei Sutou",
            "active": true,
            "timeZone": "Asia/Tokyo"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/6",
            "description": "The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/closed.png",
            "name": "Closed",
            "id": "6",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12332430",
                "id": "12332430",
                "name": "GLib"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": null,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=tahmad",
            "name": "tahmad",
            "key": "tahmad",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=tahmad&avatarId=37024",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tahmad&avatarId=37024",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tahmad&avatarId=37024",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tahmad&avatarId=37024"
            },
            "displayName": "Tanveer",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=tahmad",
            "name": "tahmad",
            "key": "tahmad",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=tahmad&avatarId=37024",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tahmad&avatarId=37024",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tahmad&avatarId=37024",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tahmad&avatarId=37024"
            },
            "displayName": "Tanveer",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "aggregateprogress": {
            "progress": 0,
            "total": 0
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 0,
            "total": 0
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-8594/votes",
            "votes": 0,
            "hasVoted": false
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
            "id": "1",
            "description": "A problem which impairs or prevents the functions of the product.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
            "name": "Bug",
            "subtask": false,
            "avatarId": 21133
        },
        "timespent": null,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@14907ae7[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@32f553c[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@7bcb0c57[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@23430a7[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@47b753db[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@733b7fc0[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@50b16c44[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@73a3dffd[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@e7763d9[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@261ad8a8[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@7d125363[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@10a3370b[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": null,
        "customfield_12312520": null,
        "customfield_12312521": "Mon Apr 27 00:04:26 UTC 2020",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2020-04-27T00:05:12.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-8594/watchers",
            "watchCount": 2,
            "isWatching": false
        },
        "created": "2020-04-25T20:27:02.000+0000",
        "updated": "2020-04-27T00:05:12.000+0000",
        "timeoriginalestimate": null,
        "description": "There is some problem with Plasma Object creation in Arrow Build 0.16.\r\n\r\nThe following test function was working fine with Build 0.12, but now in Build 0.16 it is giving some check error: Check failed: object.data_size == data_size\u00a0\r\n\r\nThe sample code is:\r\n\r\n\u00a0\r\n{code:java}\r\nvoid plasma_cglib_test(void){\r\ngboolean success = TRUE;\r\n GError *error = NULL;\r\nguint8 id_arr[20] = {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9};\r\n GPlasmaClient *gPlasmaClient;\r\n GPlasmaObjectID *object_id;\r\n GPlasmaClientCreateOptions *create_options;\r\n GPlasmaClientOptions *gplasmaClient_options;\r\n GPlasmaCreatedObject *Object;\r\nconst guint8 *testdata = (const guint8[]){'a', 'b', 'c', 0};\r\n gint64 size=4;\r\ncreate_options = gplasma_client_create_options_new();\r\n gplasmaClient_options = gplasma_client_options_new();\r\n gPlasmaClient = gplasma_client_new(\"/tmp/store0\",gplasmaClient_options, &error);\r\n object_id = gplasma_object_id_new(id_arr, 20, &error);\r\n{\r\n guint8 metadata[] = \"metadata\";\r\n gplasma_client_create_options_set_metadata(create_options, (const guint8 *)metadata, sizeof(metadata));\r\n }\r\n Object = gplasma_client_create(gPlasmaClient, object_id, size, create_options, &error);\r\ng_object_unref(create_options);\r\n {\r\n GArrowBuffer *data;\r\n g_object_get(Object, \"data\", &data, NULL);\r\n garrow_mutable_buffer_set_data(GARROW_MUTABLE_BUFFER(data),0, testdata,size,&error);\r\n g_object_unref(data);\r\n }\r\ngplasma_created_object_seal(Object, &error);\r\n g_object_unref(Object);\r\n gplasma_client_disconnect(gPlasmaClient, &error);\r\n g_object_unref(gPlasmaClient);\r\n g_object_unref(object_id);\r\n fprintf(stderr, \"[%s] obj_id: %d , size: %ld, Done. \\n\", __func__, id_arr[0], size);\r\n}\r\n{code}\r\nOutput for build 0.12 is:\r\n{code:java}\r\nSingularity> plasma_store -m 93000 -s /tmp/store0 & ./bwa\r\n[1] 29574\r\nWARNING: Logging before InitGoogleLogging() is written to STDERR\r\nE0425 22:14:50.104815 29575 io.cc:168] Connection to IPC socket failed for pathname /tmp/store0, retrying 50 more times\r\nE0425 22:14:50.205021 29575 io.cc:168] Connection to IPC socket failed for pathname /tmp/store0, retrying 49 more times\r\nE0425 22:14:50.305122 29575 io.cc:168] Connection to IPC socket failed for pathname /tmp/store0, retrying 48 more times\r\nI0425 22:14:50.333011 29574 store.cc:994] Allowing the Plasma store to use up to 9.3e-05GB of memory.\r\nI0425 22:14:50.379298 29574 store.cc:1024] Starting object store with directory /dev/shm and huge page support disabled\r\nI0425 22:14:50.405828 29574 store.cc:599] Disconnecting client on fd 6\r\n[plasma_cglib_test] obj_id: 1 , size: 4, Done. {code}\r\nFollowing is the output for build 0.16:\r\n{code:java}\r\nSingularity> plasma_store -m 93000 -s /tmp/store0 & ./bwa\r\n[1] 28738\r\n/build/apache-arrow-0.16.0/cpp/src/plasma/io.cc:168: Connection to IPC socket failed for pathname /tmp/store0, retrying 20 more times\r\n/arrow/cpp/src/plasma/store.cc:1242: Allowing the Plasma store to use up to 9.3e-05GB of memory.\r\n/arrow/cpp/src/plasma/store.cc:1269: Starting object store with directory /dev/shm and huge page support disabled\r\n/build/apache-arrow-0.16.0/cpp/src/plasma/client.cc:437: Check failed: object.data_size == data_size \r\n/usr/lib/x86_64-linux-gnu/libarrow.so.16(+0x339dd1)[0x2b0a70d55dd1]\r\n/usr/lib/x86_64-linux-gnu/libarrow.so.16(_ZN5arrow4util8ArrowLogD1Ev+0xdd)[0x2b0a7104346d]\r\n/usr/lib/x86_64-linux-gnu/libplasma.so.16(+0x14021)[0x2b0a7224d021]\r\n/usr/lib/x86_64-linux-gnu/libplasma.so.16(_ZN6plasma12PlasmaClient6CreateERKNS_8UniqueIDElPKhlPSt10shared_ptrIN5arrow6BufferEEi+0x29)[0x2b0a7224d289]\r\n/usr/local/lib/libplasma-glib.so.16(gplasma_client_create+0xe3)[0x2b0a6f912513]\r\n./bwa(+0x204b2)[0x55babc7e04b2]\r\n./bwa(+0x329c)[0x55babc7c329c]\r\n/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xe7)[0x2b0a6ff96b97]\r\n./bwa(+0x3a5a)[0x55babc7c3a5a]\r\n/arrow/cpp/src/plasma/store.ccAborted (core dumped)\r\n:749: Disconnecting client on fd 6{code}\r\n\u00a0",
        "customfield_10010": null,
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[GLib][Plasma] Check failed: object.data_size == data_size ",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "customfield_12311820": "0|z0e2m8:",
        "customfield_12314139": null
    }
}