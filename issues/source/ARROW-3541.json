{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13192229",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13192229",
    "key": "ARROW-3541",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12343858",
                "id": "12343858",
                "description": "",
                "name": "0.12.0",
                "archived": false,
                "released": true,
                "releaseDate": "2019-01-20"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/4",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
            "name": "Minor",
            "id": "4"
        },
        "labels": [
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=paddyhoran",
            "name": "paddyhoran",
            "key": "paddyhoran",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
            },
            "displayName": "Paddy Horan",
            "active": true,
            "timeZone": "America/New_York"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12333773",
                "id": "12333773",
                "name": "Rust"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=paddyhoran",
            "name": "paddyhoran",
            "key": "paddyhoran",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
            },
            "displayName": "Paddy Horan",
            "active": true,
            "timeZone": "America/New_York"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=paddyhoran",
            "name": "paddyhoran",
            "key": "paddyhoran",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
            },
            "displayName": "Paddy Horan",
            "active": true,
            "timeZone": "America/New_York"
        },
        "aggregateprogress": {
            "progress": 15600,
            "total": 15600,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 15600,
            "total": 15600,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-3541/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 29,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13192229/worklog/156390",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "paddyhoran opened a new pull request #2799: ARROW-3541: [Rust] Update BufferBuilder to allow for new bit-packed BooleanArray\nURL: https://github.com/apache/arrow/pull/2799\n \n \n   \n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-10-19T16:26:16.104+0000",
                    "updated": "2018-10-19T16:26:16.104+0000",
                    "started": "2018-10-19T16:26:16.103+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "156390",
                    "issueId": "13192229"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13192229/worklog/156392",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "paddyhoran commented on issue #2799: ARROW-3541: [Rust] Update BufferBuilder to allow for new bit-packed BooleanArray\nURL: https://github.com/apache/arrow/pull/2799#issuecomment-431422587\n \n \n   cc @kszucs @crepererum @sunchao @andygrove \n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-10-19T16:33:50.652+0000",
                    "updated": "2018-10-19T16:33:50.652+0000",
                    "started": "2018-10-19T16:33:50.651+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "156392",
                    "issueId": "13192229"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13192229/worklog/156425",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "paddyhoran commented on issue #2799: ARROW-3541: [Rust] Update BufferBuilder to allow for new bit-packed BooleanArray\nURL: https://github.com/apache/arrow/pull/2799#issuecomment-431454601\n \n \n   CI failure is for R which seems to be failing across the board for new PR's\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-10-19T18:24:25.759+0000",
                    "updated": "2018-10-19T18:24:25.759+0000",
                    "started": "2018-10-19T18:24:25.759+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "156425",
                    "issueId": "13192229"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13192229/worklog/156495",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "sunchao commented on a change in pull request #2799: ARROW-3541: [Rust] Update BufferBuilder to allow for new bit-packed BooleanArray\nURL: https://github.com/apache/arrow/pull/2799#discussion_r226804623\n \n \n\n ##########\n File path: rust/src/builder.rs\n ##########\n @@ -36,13 +37,99 @@ where\n     _marker: PhantomData<T>,\n }\n \n-impl<T> BufferBuilder<T>\n-where\n-    T: ArrowPrimitiveType,\n-{\n+macro_rules! impl_buffer_builder {\n \n Review comment:\n   This code duplication is unfortunate. I really hope we can use [specialization](https://github.com/rust-lang/rust/pull/31844) but it's only available in nightly :(\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-10-19T23:32:01.546+0000",
                    "updated": "2018-10-19T23:32:01.546+0000",
                    "started": "2018-10-19T23:32:01.545+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "156495",
                    "issueId": "13192229"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13192229/worklog/156496",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "sunchao commented on a change in pull request #2799: ARROW-3541: [Rust] Update BufferBuilder to allow for new bit-packed BooleanArray\nURL: https://github.com/apache/arrow/pull/2799#discussion_r226784197\n \n \n\n ##########\n File path: rust/src/builder.rs\n ##########\n @@ -57,21 +144,34 @@ where\n \n     /// Returns the current capacity of the builder (number of elements)\n     pub fn capacity(&self) -> i64 {\n-        let byte_capacity = self.buffer.capacity();\n-        (byte_capacity / mem::size_of::<T>()) as i64\n+        let byte_capacity = self.buffer.capacity() as i64;\n+        byte_capacity * 8\n     }\n \n     /// Push a value into the builder, growing the internal buffer as needed\n-    pub fn push(&mut self, v: T) -> Result<()> {\n+    pub fn push(&mut self, v: bool) -> Result<()> {\n         self.reserve(1)?;\n-        self.write_bytes(v.to_byte_slice(), 1)\n+        if v {\n+            // Check needed here to increase the buffers `len` to ensure that `set_bit` is safe\n+            // Zeroing out other bits also makes testing easier\n+            if self.len > self.buffer.len() as i64 * 8 {\n+                // safe to `unwrap` here as `write` performs a `capacity` check which is\n+                // already done by `reserve`\n+                self.buffer.write(&[0]).unwrap();\n+            }\n+            bit_util::set_bit(self.buffer.data_mut(), (self.len) as usize);\n \n Review comment:\n   This will be in-efficient as every `data_mut` call will in turn call `from_raw_parts_mut` which construct a slice from the pointer. Maybe we can have something like `set_bit_raw` that directly operates on pointers?\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-10-19T23:32:01.616+0000",
                    "updated": "2018-10-19T23:32:01.616+0000",
                    "started": "2018-10-19T23:32:01.615+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "156496",
                    "issueId": "13192229"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13192229/worklog/156497",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "sunchao commented on a change in pull request #2799: ARROW-3541: [Rust] Update BufferBuilder to allow for new bit-packed BooleanArray\nURL: https://github.com/apache/arrow/pull/2799#discussion_r226804548\n \n \n\n ##########\n File path: rust/src/builder.rs\n ##########\n @@ -57,21 +144,34 @@ where\n \n     /// Returns the current capacity of the builder (number of elements)\n     pub fn capacity(&self) -> i64 {\n-        let byte_capacity = self.buffer.capacity();\n-        (byte_capacity / mem::size_of::<T>()) as i64\n+        let byte_capacity = self.buffer.capacity() as i64;\n+        byte_capacity * 8\n     }\n \n     /// Push a value into the builder, growing the internal buffer as needed\n-    pub fn push(&mut self, v: T) -> Result<()> {\n+    pub fn push(&mut self, v: bool) -> Result<()> {\n         self.reserve(1)?;\n-        self.write_bytes(v.to_byte_slice(), 1)\n+        if v {\n+            // Check needed here to increase the buffers `len` to ensure that `set_bit` is safe\n+            // Zeroing out other bits also makes testing easier\n+            if self.len > self.buffer.len() as i64 * 8 {\n+                // safe to `unwrap` here as `write` performs a `capacity` check which is\n+                // already done by `reserve`\n+                self.buffer.write(&[0]).unwrap();\n+            }\n+            bit_util::set_bit(self.buffer.data_mut(), (self.len) as usize);\n+        }\n+        self.len += 1;\n+        Ok(())\n     }\n \n     /// Push a slice of type T, growing the internal buffer as needed\n-    pub fn push_slice(&mut self, slice: &[T]) -> Result<()> {\n-        let array_slots = slice.len() as i64;\n-        self.reserve(array_slots)?;\n-        self.write_bytes(slice.to_byte_slice(), array_slots)\n+    pub fn push_slice(&mut self, slice: &[bool]) -> Result<()> {\n+        let array_slots = slice.len();\n+        for i in 0..array_slots {\n \n Review comment:\n   This is fine but it may be too slow if we write bit by bit. We can optimize this in future though.\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-10-19T23:32:01.616+0000",
                    "updated": "2018-10-19T23:32:01.616+0000",
                    "started": "2018-10-19T23:32:01.615+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "156497",
                    "issueId": "13192229"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13192229/worklog/156498",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "sunchao commented on a change in pull request #2799: ARROW-3541: [Rust] Update BufferBuilder to allow for new bit-packed BooleanArray\nURL: https://github.com/apache/arrow/pull/2799#discussion_r226804249\n \n \n\n ##########\n File path: rust/src/builder.rs\n ##########\n @@ -57,21 +144,34 @@ where\n \n     /// Returns the current capacity of the builder (number of elements)\n     pub fn capacity(&self) -> i64 {\n-        let byte_capacity = self.buffer.capacity();\n-        (byte_capacity / mem::size_of::<T>()) as i64\n+        let byte_capacity = self.buffer.capacity() as i64;\n+        byte_capacity * 8\n     }\n \n     /// Push a value into the builder, growing the internal buffer as needed\n-    pub fn push(&mut self, v: T) -> Result<()> {\n+    pub fn push(&mut self, v: bool) -> Result<()> {\n         self.reserve(1)?;\n-        self.write_bytes(v.to_byte_slice(), 1)\n+        if v {\n+            // Check needed here to increase the buffers `len` to ensure that `set_bit` is safe\n+            // Zeroing out other bits also makes testing easier\n+            if self.len > self.buffer.len() as i64 * 8 {\n \n Review comment:\n   Should this be `>=`? Also, it may be too expensive to do this check for every bit we write. Can we zero out the bits when we grow the capacity so that we only need to do it once?\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-10-19T23:32:01.717+0000",
                    "updated": "2018-10-19T23:32:01.717+0000",
                    "started": "2018-10-19T23:32:01.716+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "156498",
                    "issueId": "13192229"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13192229/worklog/156511",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "paddyhoran commented on a change in pull request #2799: ARROW-3541: [Rust] Update BufferBuilder to allow for new bit-packed BooleanArray\nURL: https://github.com/apache/arrow/pull/2799#discussion_r226814660\n \n \n\n ##########\n File path: rust/src/builder.rs\n ##########\n @@ -57,21 +144,34 @@ where\n \n     /// Returns the current capacity of the builder (number of elements)\n     pub fn capacity(&self) -> i64 {\n-        let byte_capacity = self.buffer.capacity();\n-        (byte_capacity / mem::size_of::<T>()) as i64\n+        let byte_capacity = self.buffer.capacity() as i64;\n+        byte_capacity * 8\n     }\n \n     /// Push a value into the builder, growing the internal buffer as needed\n-    pub fn push(&mut self, v: T) -> Result<()> {\n+    pub fn push(&mut self, v: bool) -> Result<()> {\n         self.reserve(1)?;\n-        self.write_bytes(v.to_byte_slice(), 1)\n+        if v {\n+            // Check needed here to increase the buffers `len` to ensure that `set_bit` is safe\n+            // Zeroing out other bits also makes testing easier\n+            if self.len > self.buffer.len() as i64 * 8 {\n \n Review comment:\n   Yep it should be `>=`, thanks\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-10-20T03:09:16.214+0000",
                    "updated": "2018-10-20T03:09:16.214+0000",
                    "started": "2018-10-20T03:09:16.214+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "156511",
                    "issueId": "13192229"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13192229/worklog/156512",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "paddyhoran commented on issue #2799: ARROW-3541: [Rust] Update BufferBuilder to allow for new bit-packed BooleanArray\nURL: https://github.com/apache/arrow/pull/2799#issuecomment-431544099\n \n \n   Thanks very much for the review @sunchao.\r\n   \r\n   I was using `write` to increment the `len` of the buffer as well as set the bits to zero (if `len` was not updated `data_mut` would fail).  I like your suggestion to zero out all the bytes and create a `set_bit_raw`.\r\n   \r\n   Probably won't get back to this until Sunday or so, thanks again for the feedback.\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-10-20T03:15:43.193+0000",
                    "updated": "2018-10-20T03:15:43.193+0000",
                    "started": "2018-10-20T03:15:43.192+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "156512",
                    "issueId": "13192229"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13192229/worklog/156748",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "paddyhoran closed pull request #2799: ARROW-3541: [Rust] Update BufferBuilder to allow for new bit-packed BooleanArray\nURL: https://github.com/apache/arrow/pull/2799\n \n \n   \n\nThis is a PR merged from a forked repository.\nAs GitHub hides the original diff on merge, it is displayed below for\nthe sake of provenance:\n\nAs this is a foreign pull request (from a fork), the diff is supplied\nbelow (as it won't show otherwise due to GitHub magic):\n\ndiff --git a/rust/src/builder.rs b/rust/src/builder.rs\nindex 2584ae93fc..d1b2bdc918 100644\n--- a/rust/src/builder.rs\n+++ b/rust/src/builder.rs\n@@ -22,9 +22,10 @@ use std::io::Write;\n use std::marker::PhantomData;\n use std::mem;\n \n-use super::buffer::*;\n-use super::datatypes::*;\n+use buffer::{Buffer, MutableBuffer};\n+use datatypes::{ArrowPrimitiveType, ToByteSlice};\n use error::{ArrowError, Result};\n+use util::bit_util;\n \n /// Buffer builder with zero-copy build method\n pub struct BufferBuilder<T>\n@@ -36,13 +37,99 @@ where\n     _marker: PhantomData<T>,\n }\n \n-impl<T> BufferBuilder<T>\n-where\n-    T: ArrowPrimitiveType,\n-{\n+macro_rules! impl_buffer_builder {\n+    ($native_ty:ident) => {\n+        impl BufferBuilder<$native_ty> {\n+            /// Creates a builder with a fixed initial capacity\n+            pub fn new(capacity: i64) -> Self {\n+                let buffer = MutableBuffer::new(capacity as usize * mem::size_of::<$native_ty>());\n+                Self {\n+                    buffer,\n+                    len: 0,\n+                    _marker: PhantomData,\n+                }\n+            }\n+\n+            /// Returns the number of array elements (slots) in the builder\n+            pub fn len(&self) -> i64 {\n+                self.len\n+            }\n+\n+            /// Returns the current capacity of the builder (number of elements)\n+            pub fn capacity(&self) -> i64 {\n+                let byte_capacity = self.buffer.capacity();\n+                (byte_capacity / mem::size_of::<$native_ty>()) as i64\n+            }\n+\n+            /// Push a value into the builder, growing the internal buffer as needed\n+            pub fn push(&mut self, v: $native_ty) -> Result<()> {\n+                self.reserve(1)?;\n+                self.write_bytes(v.to_byte_slice(), 1)\n+            }\n+\n+            /// Push a slice of type T, growing the internal buffer as needed\n+            pub fn push_slice(&mut self, slice: &[$native_ty]) -> Result<()> {\n+                let array_slots = slice.len() as i64;\n+                self.reserve(array_slots)?;\n+                self.write_bytes(slice.to_byte_slice(), array_slots)\n+            }\n+\n+            /// Reserve memory for n elements of type T\n+            pub fn reserve(&mut self, n: i64) -> Result<()> {\n+                let new_capacity = self.len + n;\n+                if new_capacity > self.capacity() {\n+                    return self.grow(new_capacity);\n+                }\n+                Ok(())\n+            }\n+\n+            /// Grow the internal buffer to `new_capacity`, where `new_capacity` is the capacity in\n+            /// elements of type T\n+            fn grow(&mut self, new_capacity: i64) -> Result<()> {\n+                let byte_capacity = mem::size_of::<$native_ty>() * new_capacity as usize;\n+                self.buffer.resize(byte_capacity)\n+            }\n+\n+            /// Build an immutable `Buffer` from the existing internal `MutableBuffer`'s memory\n+            pub fn finish(self) -> Buffer {\n+                self.buffer.freeze()\n+            }\n+\n+            /// Writes a byte slice to the underlying buffer and updates the `len`, i.e. the number array\n+            /// elements in the builder.  Also, converts the `io::Result` required by the `Write` trait\n+            /// to the Arrow `Result` type.\n+            fn write_bytes(&mut self, bytes: &[u8], len_added: i64) -> Result<()> {\n+                let write_result = self.buffer.write(bytes);\n+                // `io::Result` has many options one of which we use, so pattern matching is overkill here\n+                if write_result.is_err() {\n+                    Err(ArrowError::MemoryError(\n+                        \"Could not write to Buffer, not big enough\".to_string(),\n+                    ))\n+                } else {\n+                    self.len += len_added;\n+                    Ok(())\n+                }\n+            }\n+        }\n+    };\n+}\n+\n+impl_buffer_builder!(u8);\n+impl_buffer_builder!(u16);\n+impl_buffer_builder!(u32);\n+impl_buffer_builder!(u64);\n+impl_buffer_builder!(i8);\n+impl_buffer_builder!(i16);\n+impl_buffer_builder!(i32);\n+impl_buffer_builder!(i64);\n+impl_buffer_builder!(f32);\n+impl_buffer_builder!(f64);\n+\n+impl BufferBuilder<bool> {\n     /// Creates a builder with a fixed initial capacity\n     pub fn new(capacity: i64) -> Self {\n-        let buffer = MutableBuffer::new(capacity as usize * mem::size_of::<T>());\n+        let byte_capacity = bit_util::ceil(capacity, 8) as usize;\n+        let buffer = MutableBuffer::new(byte_capacity).with_bitset(byte_capacity, false);\n         Self {\n             buffer,\n             len: 0,\n@@ -57,21 +144,34 @@ where\n \n     /// Returns the current capacity of the builder (number of elements)\n     pub fn capacity(&self) -> i64 {\n-        let byte_capacity = self.buffer.capacity();\n-        (byte_capacity / mem::size_of::<T>()) as i64\n+        let byte_capacity = self.buffer.capacity() as i64;\n+        byte_capacity * 8\n     }\n \n     /// Push a value into the builder, growing the internal buffer as needed\n-    pub fn push(&mut self, v: T) -> Result<()> {\n+    pub fn push(&mut self, v: bool) -> Result<()> {\n         self.reserve(1)?;\n-        self.write_bytes(v.to_byte_slice(), 1)\n+        if v {\n+            // Check needed here to increase the buffers `len` to ensure that `set_bit` is safe\n+            // Zeroing out other bits also makes testing easier\n+            if self.len > self.buffer.len() as i64 * 8 {\n+                // safe to `unwrap` here as `write` performs a `capacity` check which is\n+                // already done by `reserve`\n+                self.buffer.write(&[0]).unwrap();\n+            }\n+            bit_util::set_bit(self.buffer.data_mut(), (self.len) as usize);\n+        }\n+        self.len += 1;\n+        Ok(())\n     }\n \n     /// Push a slice of type T, growing the internal buffer as needed\n-    pub fn push_slice(&mut self, slice: &[T]) -> Result<()> {\n-        let array_slots = slice.len() as i64;\n-        self.reserve(array_slots)?;\n-        self.write_bytes(slice.to_byte_slice(), array_slots)\n+    pub fn push_slice(&mut self, slice: &[bool]) -> Result<()> {\n+        let array_slots = slice.len();\n+        for i in 0..array_slots {\n+            self.push(slice[i])?;\n+        }\n+        Ok(())\n     }\n \n     /// Reserve memory for n elements of type T\n@@ -86,7 +186,7 @@ where\n     /// Grow the internal buffer to `new_capacity`, where `new_capacity` is the capacity in\n     /// elements of type T\n     fn grow(&mut self, new_capacity: i64) -> Result<()> {\n-        let byte_capacity = mem::size_of::<T>() * new_capacity as usize;\n+        let byte_capacity = bit_util::ceil(new_capacity, 8) as usize;\n         self.buffer.resize(byte_capacity)\n     }\n \n@@ -94,22 +194,6 @@ where\n     pub fn finish(self) -> Buffer {\n         self.buffer.freeze()\n     }\n-\n-    /// Writes a byte slice to the underlying buffer and updates the `len`, i.e. the number array\n-    /// elements in the builder.  Also, converts the `io::Result` required by the `Write` trait\n-    /// to the Arrow `Result` type.\n-    fn write_bytes(&mut self, bytes: &[u8], len_added: i64) -> Result<()> {\n-        let write_result = self.buffer.write(bytes);\n-        // `io::Result` has many options one of which we use, so pattern matching is overkill here\n-        if write_result.is_err() {\n-            Err(ArrowError::MemoryError(\n-                \"Could not write to Buffer, not big enough\".to_string(),\n-            ))\n-        } else {\n-            self.len += len_added;\n-            Ok(())\n-        }\n-    }\n }\n \n #[cfg(test)]\n@@ -190,19 +274,58 @@ mod tests {\n     #[test]\n     fn test_write_bytes() {\n         let mut b = BufferBuilder::<bool>::new(4);\n-        let bytes = [false, true, false, true].to_byte_slice();\n+        b.push(false).unwrap();\n+        b.push(true).unwrap();\n+        b.push(false).unwrap();\n+        b.push(true).unwrap();\n+        assert_eq!(4, b.len());\n+        assert_eq!(512, b.capacity());\n+        let buffer = b.finish();\n+        assert_eq!(1, buffer.len());\n+\n+        let mut b = BufferBuilder::<bool>::new(4);\n+        b.push_slice(&[false, true, false, true]).unwrap();\n+        assert_eq!(4, b.len());\n+        assert_eq!(512, b.capacity());\n+        let buffer = b.finish();\n+        assert_eq!(1, buffer.len());\n+    }\n+\n+    #[test]\n+    fn test_write_bytes_i32() {\n+        let mut b = BufferBuilder::<i32>::new(4);\n+        let bytes = [8, 16, 32, 64].to_byte_slice();\n         b.write_bytes(bytes, 4).unwrap();\n         assert_eq!(4, b.len());\n-        assert_eq!(64, b.capacity());\n+        assert_eq!(16, b.capacity());\n         let buffer = b.finish();\n-        assert_eq!(4, buffer.len());\n+        assert_eq!(16, buffer.len());\n     }\n \n     #[test]\n     #[should_panic(expected = \"Could not write to Buffer, not big enough\")]\n     fn test_write_too_many_bytes() {\n-        let mut b = BufferBuilder::<bool>::new(0);\n-        let bytes = [false, true, false, true].to_byte_slice();\n+        let mut b = BufferBuilder::<i32>::new(0);\n+        let bytes = [8, 16, 32, 64].to_byte_slice();\n         b.write_bytes(bytes, 4).unwrap();\n     }\n+\n+    #[test]\n+    fn test_boolean_builder_increases_buffer_len() {\n+        // 00000010 01001000\n+        let buf = Buffer::from([72_u8, 2_u8]);\n+        let mut builder = BufferBuilder::<bool>::new(8);\n+\n+        for i in 0..10 {\n+            if i == 3 || i == 6 || i == 9 {\n+                builder.push(true).unwrap();\n+            } else {\n+                builder.push(false).unwrap();\n+            }\n+        }\n+        let buf2 = builder.finish();\n+\n+        assert_eq!(buf.len(), buf2.len());\n+        assert_eq!(buf.data(), buf2.data());\n+    }\n }\n\n\n \n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-10-22T03:05:53.922+0000",
                    "updated": "2018-10-22T03:05:53.922+0000",
                    "started": "2018-10-22T03:05:53.921+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "156748",
                    "issueId": "13192229"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13192229/worklog/156749",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "paddyhoran opened a new pull request #2799: ARROW-3541: [Rust] Update BufferBuilder to allow for new bit-packed BooleanArray\nURL: https://github.com/apache/arrow/pull/2799\n \n \n   \n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-10-22T03:06:16.422+0000",
                    "updated": "2018-10-22T03:06:16.422+0000",
                    "started": "2018-10-22T03:06:16.420+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "156749",
                    "issueId": "13192229"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13192229/worklog/156750",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "paddyhoran commented on issue #2799: ARROW-3541: [Rust] Update BufferBuilder to allow for new bit-packed BooleanArray\nURL: https://github.com/apache/arrow/pull/2799#issuecomment-431732574\n \n \n   @sunchao @kszucs @crepererum @andygrove this is ready for review again.\r\n   \r\n   I am now initializing the entire capacity to 0 when creating (or resized) the buffer then using a new `set_bit_raw` fn to update the internal buffer.  I am also deferring setting the len of the buffer until `freeze` is called to avoid the overhead of determining when it should be updated on each push.\r\n   \r\n   This PR is not re-triggering CI or reflecting the latest changes for me, that is why I closed it and re-opened it.  Hopefully it will resolve itself before your review.\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-10-22T03:13:46.966+0000",
                    "updated": "2018-10-22T03:13:46.966+0000",
                    "started": "2018-10-22T03:13:46.965+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "156750",
                    "issueId": "13192229"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13192229/worklog/156751",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "paddyhoran commented on issue #2799: ARROW-3541: [Rust] Update BufferBuilder to allow for new bit-packed BooleanArray\nURL: https://github.com/apache/arrow/pull/2799#issuecomment-431732984\n \n \n   @sunchao @kszucs @crepererum @andygrove this is ready for review again.\r\n   \r\n   I am now initializing the entire capacity to 0 when creating (or resized) the buffer and then using a new `set_bit_raw` fn to update the internal buffer.  I am also deferring setting the `len` of the buffer until `freeze` is called to avoid the overhead of determining when it should be updated on each push.\r\n   \r\n   This PR is not re-triggering CI or reflecting the latest changes for me, that is why I closed it and re-opened it.  Hopefully it will resolve itself before your review.\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-10-22T03:18:39.937+0000",
                    "updated": "2018-10-22T03:18:39.937+0000",
                    "started": "2018-10-22T03:18:39.936+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "156751",
                    "issueId": "13192229"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13192229/worklog/156752",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "paddyhoran commented on issue #2799: ARROW-3541: [Rust] Update BufferBuilder to allow for new bit-packed BooleanArray\nURL: https://github.com/apache/arrow/pull/2799#issuecomment-431733783\n \n \n   @sunchao @kszucs @crepererum @andygrove this is ready for review again.\r\n   \r\n   I am now initializing the entire capacity to 0 when creating (or resized) the buffer then using a new `set_bit_raw` fn to update the internal buffer.  I am also deferring setting the len of the buffer until `freeze` is called to avoid the overhead of determining when it should be updated on each push.\r\n   \r\n   This PR is not re-triggering CI or reflecting the latest changes for me, that is why I closed it and re-opened it.  Hopefully it will resolve itself before your review.\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-10-22T03:28:19.829+0000",
                    "updated": "2018-10-22T03:28:19.829+0000",
                    "started": "2018-10-22T03:28:19.829+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "156752",
                    "issueId": "13192229"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13192229/worklog/156902",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "paddyhoran commented on issue #2799: ARROW-3541: [Rust] Update BufferBuilder to allow for new bit-packed BooleanArray\nURL: https://github.com/apache/arrow/pull/2799#issuecomment-431821242\n \n \n   Sorry about the repeated comments (now deleted), github was having issues last night...\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-10-22T18:40:26.239+0000",
                    "updated": "2018-10-22T18:40:26.239+0000",
                    "started": "2018-10-22T18:40:26.238+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "156902",
                    "issueId": "13192229"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13192229/worklog/156903",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "paddyhoran removed a comment on issue #2799: ARROW-3541: [Rust] Update BufferBuilder to allow for new bit-packed BooleanArray\nURL: https://github.com/apache/arrow/pull/2799#issuecomment-431732984\n \n \n   @sunchao @kszucs @crepererum @andygrove this is ready for review again.\r\n   \r\n   I am now initializing the entire capacity to 0 when creating (or resized) the buffer and then using a new `set_bit_raw` fn to update the internal buffer.  I am also deferring setting the `len` of the buffer until `freeze` is called to avoid the overhead of determining when it should be updated on each push.\r\n   \r\n   This PR is not re-triggering CI or reflecting the latest changes for me, that is why I closed it and re-opened it.  Hopefully it will resolve itself before your review.\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-10-22T18:40:43.685+0000",
                    "updated": "2018-10-22T18:40:43.685+0000",
                    "started": "2018-10-22T18:40:43.684+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "156903",
                    "issueId": "13192229"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13192229/worklog/156904",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "paddyhoran removed a comment on issue #2799: ARROW-3541: [Rust] Update BufferBuilder to allow for new bit-packed BooleanArray\nURL: https://github.com/apache/arrow/pull/2799#issuecomment-431733783\n \n \n   @sunchao @kszucs @crepererum @andygrove this is ready for review again.\r\n   \r\n   I am now initializing the entire capacity to 0 when creating (or resized) the buffer then using a new `set_bit_raw` fn to update the internal buffer.  I am also deferring setting the len of the buffer until `freeze` is called to avoid the overhead of determining when it should be updated on each push.\r\n   \r\n   This PR is not re-triggering CI or reflecting the latest changes for me, that is why I closed it and re-opened it.  Hopefully it will resolve itself before your review.\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-10-22T18:40:44.584+0000",
                    "updated": "2018-10-22T18:40:44.584+0000",
                    "started": "2018-10-22T18:40:44.584+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "156904",
                    "issueId": "13192229"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13192229/worklog/156907",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "paddyhoran commented on issue #2799: ARROW-3541: [Rust] Update BufferBuilder to allow for new bit-packed BooleanArray\nURL: https://github.com/apache/arrow/pull/2799#issuecomment-431822100\n \n \n   Travis is failing, but I can't access the \"details\" to see what it is...\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-10-22T18:41:10.582+0000",
                    "updated": "2018-10-22T18:41:10.582+0000",
                    "started": "2018-10-22T18:41:10.582+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "156907",
                    "issueId": "13192229"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13192229/worklog/156921",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "paddyhoran edited a comment on issue #2799: ARROW-3541: [Rust] Update BufferBuilder to allow for new bit-packed BooleanArray\nURL: https://github.com/apache/arrow/pull/2799#issuecomment-431821242\n \n \n   Sorry about the repeated comments (now deleted), github was having issues last night...\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-10-22T18:43:03.963+0000",
                    "updated": "2018-10-22T18:43:03.963+0000",
                    "started": "2018-10-22T18:43:03.962+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "156921",
                    "issueId": "13192229"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13192229/worklog/157359",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "sunchao commented on a change in pull request #2799: ARROW-3541: [Rust] Update BufferBuilder to allow for new bit-packed BooleanArray\nURL: https://github.com/apache/arrow/pull/2799#discussion_r227225840\n \n \n\n ##########\n File path: rust/src/builder.rs\n ##########\n @@ -86,29 +186,19 @@ where\n     /// Grow the internal buffer to `new_capacity`, where `new_capacity` is the capacity in\n     /// elements of type T\n     fn grow(&mut self, new_capacity: i64) -> Result<()> {\n-        let byte_capacity = mem::size_of::<T>() * new_capacity as usize;\n-        self.buffer.resize(byte_capacity)\n+        let new_byte_capacity = bit_util::ceil(new_capacity, 8) as usize;\n+        let existing_capacity = self.buffer.capacity();\n+        let capacity_added = self.buffer.resize(new_byte_capacity)?;\n+        self.buffer\n+            .ensure_null_bits(existing_capacity, capacity_added);\n+        Ok(())\n     }\n \n     /// Build an immutable `Buffer` from the existing internal `MutableBuffer`'s memory\n     pub fn finish(self) -> Buffer {\n-        self.buffer.freeze()\n-    }\n-\n-    /// Writes a byte slice to the underlying buffer and updates the `len`, i.e. the number array\n-    /// elements in the builder.  Also, converts the `io::Result` required by the `Write` trait\n-    /// to the Arrow `Result` type.\n-    fn write_bytes(&mut self, bytes: &[u8], len_added: i64) -> Result<()> {\n \n Review comment:\n   Do we need to implement `write_bytes` for boolean type?\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-10-23T05:11:31.084+0000",
                    "updated": "2018-10-23T05:11:31.084+0000",
                    "started": "2018-10-23T05:11:31.084+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "157359",
                    "issueId": "13192229"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
            "id": "1",
            "description": "A problem which impairs or prevents the functions of the product.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
            "name": "Bug",
            "subtask": false,
            "avatarId": 21133
        },
        "timespent": 15600,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@4acde480[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@6c12ef01[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@2bb7fc12[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@50266482[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@7524af33[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@240be706[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@3048c8f9[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@5329a806[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@3a4d867[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@786c3cc2[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@e952c36[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@1062dc7a[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 15600,
        "customfield_12312520": null,
        "customfield_12312521": "Thu Oct 25 08:54:40 UTC 2018",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2018-10-25T08:54:40.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-3541/watchers",
            "watchCount": 1,
            "isWatching": false
        },
        "created": "2018-10-17T13:12:34.000+0000",
        "updated": "2018-10-25T08:54:48.000+0000",
        "timeoriginalestimate": null,
        "description": null,
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "4h 20m",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 15600
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[Rust] Update BufferBuilder to allow for new bit-packed BooleanArray",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13192229/comment/16663459",
                    "id": "16663459",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "Issue resolved by pull request 2799\n[https://github.com/apache/arrow/pull/2799]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2018-10-25T08:54:40.558+0000",
                    "updated": "2018-10-25T08:54:40.558+0000"
                }
            ],
            "maxResults": 1,
            "total": 1,
            "startAt": 0
        },
        "customfield_12311820": "0|i3zb33:",
        "customfield_12314139": null
    }
}