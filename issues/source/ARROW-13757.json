{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13397226",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13397226",
    "key": "ARROW-13757",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12350323",
                "id": "12350323",
                "description": "",
                "name": "6.0.0",
                "archived": false,
                "released": true,
                "releaseDate": "2021-10-26"
            },
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12350475",
                "id": "12350475",
                "description": "",
                "name": "5.0.1",
                "archived": true,
                "released": false
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "name": "Major",
            "id": "3"
        },
        "labels": [
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=npr",
            "name": "npr",
            "key": "npr",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
            },
            "displayName": "Neal Richardson",
            "active": true,
            "timeZone": "America/Los_Angeles"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12333008",
                "id": "12333008",
                "name": "R"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=npr",
            "name": "npr",
            "key": "npr",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
            },
            "displayName": "Neal Richardson",
            "active": true,
            "timeZone": "America/Los_Angeles"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=npr",
            "name": "npr",
            "key": "npr",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
            },
            "displayName": "Neal Richardson",
            "active": true,
            "timeZone": "America/Los_Angeles"
        },
        "aggregateprogress": {
            "progress": 5400,
            "total": 5400,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 5400,
            "total": 5400,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-13757/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 9,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13397226/worklog/641774",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "github-actions[bot] commented on pull request #11000:\nURL: https://github.com/apache/arrow/pull/11000#issuecomment-905659197\n\n\n   https://issues.apache.org/jira/browse/ARROW-13757\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-08-25T16:03:44.842+0000",
                    "updated": "2021-08-25T16:03:44.842+0000",
                    "started": "2021-08-25T16:03:44.842+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "641774",
                    "issueId": "13397226"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13397226/worklog/641782",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jonkeane commented on a change in pull request #11000:\nURL: https://github.com/apache/arrow/pull/11000#discussion_r695904613\n\n\n\n##########\nFile path: r/tools/nixlibs.R\n##########\n@@ -215,10 +215,8 @@ download_source <- function() {\n \n   # Given VERSION as x.y.z.p\n   p <- package_version(VERSION)[1, 4]\n-  if (is.na(p) || p < 1000) {\n-    # This is either just x.y.z or it has a small (R-only) patch version\n-    # Download from the official Apache release, dropping the p\n-    VERSION <- as.character(package_version(VERSION)[1, -4])\n+  if (is.na(p)) {\n\nReview comment:\n       Do we want to remove the p < 1000 checking here? I think we want to keep that (or maybe check < 9000 since we don't want dev versions to be attempted to be downloaded, right?\n\n##########\nFile path: r/tools/nixlibs.R\n##########\n@@ -215,10 +215,8 @@ download_source <- function() {\n \n   # Given VERSION as x.y.z.p\n   p <- package_version(VERSION)[1, 4]\n-  if (is.na(p) || p < 1000) {\n-    # This is either just x.y.z or it has a small (R-only) patch version\n-    # Download from the official Apache release, dropping the p\n-    VERSION <- as.character(package_version(VERSION)[1, -4])\n+  if (is.na(p)) {\n+    # This is just x.y.z so download the official Apache release\n\nReview comment:\n       This is probably not the time to bikeshed, but I wonder if a try/catch (or \"just\" a modified if/else like below) would provide future proofing for the all-R no-cpp release that the removed comment hinted at.\r\n   \r\n   (I couldn't get GH's UI to let me edit all of these lines, but this would replace 219-224:\r\n   \r\n   ```\r\n     # This is just x.y.z so download the official Apache release\r\n     got_source <- apache_download(VERSION, tf1)\r\n     # If this source isn't available, fall back to x.y.z (in case this is an R-only patch version that doesn't have a cpp patch\r\n     if (!got_source) {\r\n       VERSION <- as.character(package_version(VERSION)[1, -4])\r\n       got_source <- apache_download(VERSION, tf1)    \r\n     }\r\n     \r\n    if (got_source) {\r\n       untar(tf1, exdir = src_dir)\r\n       unlink(tf1)\r\n       src_dir <- paste0(src_dir, \"/apache-arrow-\", VERSION, \"/cpp\")\r\n    }\r\n   ```\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-08-25T16:13:16.831+0000",
                    "updated": "2021-08-25T16:13:16.831+0000",
                    "started": "2021-08-25T16:13:16.831+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "641782",
                    "issueId": "13397226"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13397226/worklog/641817",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jonkeane commented on a change in pull request #11000:\nURL: https://github.com/apache/arrow/pull/11000#discussion_r695941162\n\n\n\n##########\nFile path: r/tools/nixlibs.R\n##########\n@@ -215,10 +215,8 @@ download_source <- function() {\n \n   # Given VERSION as x.y.z.p\n   p <- package_version(VERSION)[1, 4]\n-  if (is.na(p) || p < 1000) {\n-    # This is either just x.y.z or it has a small (R-only) patch version\n-    # Download from the official Apache release, dropping the p\n-    VERSION <- as.character(package_version(VERSION)[1, -4])\n+  if (is.na(p)) {\n+    # This is just x.y.z so download the official Apache release\n\nReview comment:\n       Oh, actually I'm wrong here, our (possible) minor patch release would be downloaded through `nightly_download()` not `apache_download()` \n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-08-25T16:58:43.450+0000",
                    "updated": "2021-08-25T16:58:43.450+0000",
                    "started": "2021-08-25T16:58:43.450+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "641817",
                    "issueId": "13397226"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13397226/worklog/641821",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jonkeane commented on a change in pull request #11000:\nURL: https://github.com/apache/arrow/pull/11000#discussion_r695943183\n\n\n\n##########\nFile path: r/tools/nixlibs.R\n##########\n@@ -215,10 +215,8 @@ download_source <- function() {\n \n   # Given VERSION as x.y.z.p\n   p <- package_version(VERSION)[1, 4]\n-  if (is.na(p) || p < 1000) {\n-    # This is either just x.y.z or it has a small (R-only) patch version\n-    # Download from the official Apache release, dropping the p\n-    VERSION <- as.character(package_version(VERSION)[1, -4])\n+  if (is.na(p)) {\n\nReview comment:\n       This isn't quite right (see my comment below about confusion between `apache_download()` and `nightly_download()`). Removing the `p < 1000` is fine here, but I wonder if we should change [line 225](https://github.com/apache/arrow/pull/11000/files#diff-935746c34b16289a07b0d9bf7642dbd268b18059b6187f7cdec7c464be47a3deR225) to be:\r\n   \r\n   ```\r\n     } else if (p <= 9000 | p > 9999) {\r\n   ```\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-08-25T17:01:23.678+0000",
                    "updated": "2021-08-25T17:01:23.678+0000",
                    "started": "2021-08-25T17:01:23.677+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "641821",
                    "issueId": "13397226"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13397226/worklog/641822",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jonkeane commented on a change in pull request #11000:\nURL: https://github.com/apache/arrow/pull/11000#discussion_r695941162\n\n\n\n##########\nFile path: r/tools/nixlibs.R\n##########\n@@ -215,10 +215,8 @@ download_source <- function() {\n \n   # Given VERSION as x.y.z.p\n   p <- package_version(VERSION)[1, 4]\n-  if (is.na(p) || p < 1000) {\n-    # This is either just x.y.z or it has a small (R-only) patch version\n-    # Download from the official Apache release, dropping the p\n-    VERSION <- as.character(package_version(VERSION)[1, -4])\n+  if (is.na(p)) {\n+    # This is just x.y.z so download the official Apache release\n\nReview comment:\n       Oh, actually I'm wrong here, our (possible) minor patch release would be downloaded through `nightly_download()` not `apache_download()` (and be moved to the nightly download chunk in lines 225-233\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-08-25T17:01:48.860+0000",
                    "updated": "2021-08-25T17:01:48.860+0000",
                    "started": "2021-08-25T17:01:48.859+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "641822",
                    "issueId": "13397226"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13397226/worklog/641825",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jonkeane commented on a change in pull request #11000:\nURL: https://github.com/apache/arrow/pull/11000#discussion_r695944678\n\n\n\n##########\nFile path: r/tools/nixlibs.R\n##########\n@@ -215,10 +215,8 @@ download_source <- function() {\n \n   # Given VERSION as x.y.z.p\n   p <- package_version(VERSION)[1, 4]\n-  if (is.na(p) || p < 1000) {\n-    # This is either just x.y.z or it has a small (R-only) patch version\n-    # Download from the official Apache release, dropping the p\n-    VERSION <- as.character(package_version(VERSION)[1, -4])\n+  if (is.na(p)) {\n\nReview comment:\n       or we could leave the dev-version checking be for now as we don't use dev-version bumps in our process right now so it'll always be x.y.z.9000\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-08-25T17:03:26.339+0000",
                    "updated": "2021-08-25T17:03:26.339+0000",
                    "started": "2021-08-25T17:03:26.339+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "641825",
                    "issueId": "13397226"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13397226/worklog/641842",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nealrichardson commented on a change in pull request #11000:\nURL: https://github.com/apache/arrow/pull/11000#discussion_r695959406\n\n\n\n##########\nFile path: r/tools/nixlibs.R\n##########\n@@ -215,10 +215,8 @@ download_source <- function() {\n \n   # Given VERSION as x.y.z.p\n   p <- package_version(VERSION)[1, 4]\n-  if (is.na(p) || p < 1000) {\n-    # This is either just x.y.z or it has a small (R-only) patch version\n-    # Download from the official Apache release, dropping the p\n-    VERSION <- as.character(package_version(VERSION)[1, -4])\n+  if (is.na(p)) {\n+    # This is just x.y.z so download the official Apache release\n\nReview comment:\n       The logic I was going for is:\r\n   \r\n   ```\r\n   if version == x.y.z:\r\n     download from apache\r\n   elif version == x.y.z.p and p != 9000:\r\n     download from s3 (\"nightly\")\r\n   else\r\n     don't download because this is our dev version sentinel (x.y.z.9000)\r\n   ```\r\n   \r\n   5.0.0.1 (and now I guess 5.0.0.2) has C++ source on our \"nightly\" S3 bucket.\r\n   \r\n   What this changes is removes the logic of allowing 5.0.0.1 to use the 5.0.0 apache release, as in when we have to do R only things to massage a CRAN release through. It would mean that if we had to do a 6.0.0.1 release because of a new whitespace requirement from CRAN, we would have to also produce a /libarrow/src/arrow-6.0.0.1.zip and host on the nightly repo. All of this is moot if I/we start bundling the C++ source in the R package, as discussed on that other jira issue.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-08-25T17:23:40.179+0000",
                    "updated": "2021-08-25T17:23:40.179+0000",
                    "started": "2021-08-25T17:23:40.178+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "641842",
                    "issueId": "13397226"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13397226/worklog/641851",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jonkeane commented on pull request #11000:\nURL: https://github.com/apache/arrow/pull/11000#issuecomment-905733542\n\n\n   _nods_ in that case let\u2019s keep the simplest thing (the PR as is) and either\n   bundle source and it\u2019s moot or add something like the retry if nightly\n   doesn\u2019t exist before we release next.\n   \n   On Wed, Aug 25, 2021 at 18:23 Neal Richardson ***@***.***>\n   wrote:\n   \n   > ***@***.**** commented on this pull request.\n   > ------------------------------\n   >\n   > In r/tools/nixlibs.R\n   > <https://github.com/apache/arrow/pull/11000#discussion_r695959406>:\n   >\n   > > @@ -215,10 +215,8 @@ download_source <- function() {\n   >\n   >    # Given VERSION as x.y.z.p\n   >    p <- package_version(VERSION)[1, 4]\n   > -  if (is.na(p) || p < 1000) {\n   > -    # This is either just x.y.z or it has a small (R-only) patch version\n   > -    # Download from the official Apache release, dropping the p\n   > -    VERSION <- as.character(package_version(VERSION)[1, -4])\n   > +  if (is.na(p)) {\n   > +    # This is just x.y.z so download the official Apache release\n   >\n   > The logic I was going for is:\n   >\n   > if version == x.y.z:\n   >   download from apache\n   > elif version == x.y.z.p and p != 9000:\n   >   download from s3 (\"nightly\")\n   > else\n   >   don't download because this is our dev version sentinel (x.y.z.9000)\n   >\n   > 5.0.0.1 (and now I guess 5.0.0.2) has C++ source on our \"nightly\" S3\n   > bucket.\n   >\n   > What this changes is removes the logic of allowing 5.0.0.1 to use the\n   > 5.0.0 apache release, as in when we have to do R only things to massage a\n   > CRAN release through. It would mean that if we had to do a 6.0.0.1 release\n   > because of a new whitespace requirement from CRAN, we would have to also\n   > produce a /libarrow/src/arrow-6\n   > <https://issues.apache.org/jira/browse/ARROW-6>.0.0.1.zip and host on the\n   > nightly repo. All of this is moot if I/we start bundling the C++ source in\n   > the R package, as discussed on that other jira issue.\n   >\n   > \u2014\n   > You are receiving this because you commented.\n   > Reply to this email directly, view it on GitHub\n   > <https://github.com/apache/arrow/pull/11000#discussion_r695959406>, or\n   > unsubscribe\n   > <https://github.com/notifications/unsubscribe-auth/AAFK7RKAJTYMLV6FPE67LVLT6URJ3ANCNFSM5CZNXJIQ>\n   > .\n   > Triage notifications on the go with GitHub Mobile for iOS\n   > <https://apps.apple.com/app/apple-store/id1477376905?ct=notification-email&mt=8&pt=524675>\n   > or Android\n   > <https://play.google.com/store/apps/details?id=com.github.android&utm_campaign=notification-email>\n   > .\n   >\n   -- \n   -Jon\n   \n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-08-25T17:32:12.693+0000",
                    "updated": "2021-08-25T17:32:12.693+0000",
                    "started": "2021-08-25T17:32:12.693+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "641851",
                    "issueId": "13397226"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13397226/worklog/642549",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nealrichardson closed pull request #11000:\nURL: https://github.com/apache/arrow/pull/11000\n\n\n   \n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-08-26T19:47:46.572+0000",
                    "updated": "2021-08-26T19:47:46.572+0000",
                    "started": "2021-08-26T19:47:46.571+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "642549",
                    "issueId": "13397226"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
            "id": "4",
            "description": "An improvement or enhancement to an existing feature or task.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
            "name": "Improvement",
            "subtask": false,
            "avatarId": 21140
        },
        "timespent": 5400,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@2b47754d[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@45007316[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@1bf2f410[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@5dacacbb[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@6d5bb10a[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@1e0e878d[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@12d0b228[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@2aa10dbd[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@1a422a02[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@709ae428[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@674c59e1[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@45226c50[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 5400,
        "customfield_12312520": null,
        "customfield_12312521": "Thu Aug 26 19:47:41 UTC 2021",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2021-08-26T19:47:41.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-13757/watchers",
            "watchCount": 1,
            "isWatching": false
        },
        "created": "2021-08-25T16:00:34.000+0000",
        "updated": "2021-08-26T19:47:47.000+0000",
        "timeoriginalestimate": null,
        "description": null,
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "1.5h",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 5400
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[R] Fix download of C++ source for CRAN patch releases",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13397226/comment/17405442",
                    "id": "17405442",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=npr",
                        "name": "npr",
                        "key": "npr",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
                        },
                        "displayName": "Neal Richardson",
                        "active": true,
                        "timeZone": "America/Los_Angeles"
                    },
                    "body": "Issue resolved by pull request 11000\n[https://github.com/apache/arrow/pull/11000]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=npr",
                        "name": "npr",
                        "key": "npr",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
                        },
                        "displayName": "Neal Richardson",
                        "active": true,
                        "timeZone": "America/Los_Angeles"
                    },
                    "created": "2021-08-26T19:47:41.629+0000",
                    "updated": "2021-08-26T19:47:41.629+0000"
                }
            ],
            "maxResults": 1,
            "total": 1,
            "startAt": 0
        },
        "customfield_12311820": "0|z0u8w0:",
        "customfield_12314139": null
    }
}