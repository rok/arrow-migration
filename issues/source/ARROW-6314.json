{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13252258",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13252258",
    "key": "ARROW-6314",
    "fields": {
        "parent": {
            "id": "13252257",
            "key": "ARROW-6313",
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13252257",
            "fields": {
                "summary": "[Format] Tracking for ensuring flatbuffer serialized values are aligned in stream/files.",
                "status": {
                    "self": "https://issues.apache.org/jira/rest/api/2/status/5",
                    "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
                    "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
                    "name": "Resolved",
                    "id": "5",
                    "statusCategory": {
                        "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                        "id": 3,
                        "key": "done",
                        "colorName": "green",
                        "name": "Done"
                    }
                },
                "priority": {
                    "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
                    "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
                    "name": "Blocker",
                    "id": "1"
                },
                "issuetype": {
                    "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
                    "id": "4",
                    "description": "An improvement or enhancement to an existing feature or task.",
                    "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
                    "name": "Improvement",
                    "subtask": false,
                    "avatarId": 21140
                }
            }
        },
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12345978",
                "id": "12345978",
                "description": "",
                "name": "0.15.0",
                "archived": false,
                "released": true,
                "releaseDate": "2019-10-05"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
            "name": "Blocker",
            "id": "1"
        },
        "labels": [
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
            "name": "wesm",
            "key": "wesmckinn",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
            },
            "displayName": "Wes McKinney",
            "active": true,
            "timeZone": "America/New_York"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12328935",
                "id": "12328935",
                "name": "C++"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=emkornfield%40gmail.com",
            "name": "emkornfield@gmail.com",
            "key": "emkornfield@gmail.com",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
            },
            "displayName": "Micah Kornfield",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=emkornfield%40gmail.com",
            "name": "emkornfield@gmail.com",
            "key": "emkornfield@gmail.com",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
            },
            "displayName": "Micah Kornfield",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "aggregateprogress": {
            "progress": 27600,
            "total": 27600,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 27600,
            "total": 27600,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-6314/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 50,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13252258/worklog/302498",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on pull request #5211: ARROW-6314: [C++] Implement IPC message format alignment changes, provide backwards compatibility and \"legacy\" option to emit old message format\nURL: https://github.com/apache/arrow/pull/5211\n \n \n   This also moves the alignment multiple to `IpcOptions` and adds the `IpcOptions` argument to more functions. \n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-08-28T02:17:37.390+0000",
                    "updated": "2019-08-28T02:17:37.390+0000",
                    "started": "2019-08-28T02:17:37.389+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "302498",
                    "issueId": "13252258"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13252258/worklog/302531",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on issue #5211: ARROW-6314: [C++] Implement IPC message format alignment changes, provide backwards compatibility and \"legacy\" option to emit old message format\nURL: https://github.com/apache/arrow/pull/5211#issuecomment-525588400\n \n \n   Will fix the CI issues and arrow_cuda failure (don't currently have CUDA installed on my laptop)\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-08-28T05:19:32.668+0000",
                    "updated": "2019-08-28T05:19:32.668+0000",
                    "started": "2019-08-28T05:19:32.668+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "302531",
                    "issueId": "13252258"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13252258/worklog/302534",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "emkornfield commented on pull request #5211: ARROW-6314: [C++] Implement IPC message format alignment changes, provide backwards compatibility and \"legacy\" option to emit old message format\nURL: https://github.com/apache/arrow/pull/5211#discussion_r318398017\n \n \n\n ##########\n File path: cpp/src/arrow/ipc/message.cc\n ##########\n @@ -269,27 +289,39 @@ Status CheckAligned(io::FileInterface* stream, int32_t alignment) {\n   int64_t current_position;\n   ARROW_RETURN_NOT_OK(stream->Tell(&current_position));\n   if (current_position % alignment != 0) {\n-    return Status::Invalid(\"Stream is not aligned\");\n+    return Status::Invalid(\"Stream is not aligned pos:\", current_position,\n \n Review comment:\n   ```suggestion\r\n       return Status::Invalid(\"Stream is not aligned pos: \", current_position,\r\n   ```\r\n   missing space.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-08-28T05:31:06.688+0000",
                    "updated": "2019-08-28T05:31:06.688+0000",
                    "started": "2019-08-28T05:31:06.688+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "302534",
                    "issueId": "13252258"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13252258/worklog/302535",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "emkornfield commented on pull request #5211: ARROW-6314: [C++] Implement IPC message format alignment changes, provide backwards compatibility and \"legacy\" option to emit old message format\nURL: https://github.com/apache/arrow/pull/5211#discussion_r318399648\n \n \n\n ##########\n File path: cpp/src/arrow/ipc/writer.cc\n ##########\n @@ -1046,23 +1036,27 @@ class PayloadStreamWriter : public internal::IpcPayloadWriter,\n #endif\n \n     int32_t metadata_length = 0;  // unused\n-    RETURN_NOT_OK(WriteIpcPayload(payload, sink_, &metadata_length));\n+    RETURN_NOT_OK(WriteIpcPayload(payload, options_, sink_, &metadata_length));\n     RETURN_NOT_OK(UpdatePositionCheckAligned());\n     return Status::OK();\n   }\n \n   Status Close() override {\n     // Write 0 EOS message\n-    return Write(&kEos, sizeof(int32_t));\n+    return Write(&kEos, sizeof(int64_t));\n \n Review comment:\n   does sizeof(kEos) work here?\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-08-28T05:39:30.810+0000",
                    "updated": "2019-08-28T05:39:30.810+0000",
                    "started": "2019-08-28T05:39:30.810+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "302535",
                    "issueId": "13252258"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13252258/worklog/302538",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "emkornfield commented on pull request #5211: ARROW-6314: [C++] Implement IPC message format alignment changes, provide backwards compatibility and \"legacy\" option to emit old message format\nURL: https://github.com/apache/arrow/pull/5211#discussion_r318399891\n \n \n\n ##########\n File path: cpp/src/arrow/ipc/writer.cc\n ##########\n @@ -1107,7 +1101,7 @@ class PayloadFileWriter : public internal::IpcPayloadWriter, protected StreamBoo\n \n   Status Close() override {\n     // Write 0 EOS message for compatibility with sequential readers\n-    RETURN_NOT_OK(Write(&kEos, sizeof(int32_t)));\n+    RETURN_NOT_OK(Write(&kEos, sizeof(int64_t)));\n \n Review comment:\n   I forget the exact class hierarchy here but is it possible to factor out a WriteEos?\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-08-28T05:40:47.422+0000",
                    "updated": "2019-08-28T05:40:47.422+0000",
                    "started": "2019-08-28T05:40:47.421+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "302538",
                    "issueId": "13252258"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13252258/worklog/302539",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "emkornfield commented on pull request #5211: ARROW-6314: [C++] Implement IPC message format alignment changes, provide backwards compatibility and \"legacy\" option to emit old message format\nURL: https://github.com/apache/arrow/pull/5211#discussion_r318400271\n \n \n\n ##########\n File path: cpp/src/arrow/ipc/message.cc\n ##########\n @@ -237,15 +241,31 @@ Status ReadMessage(int64_t offset, int32_t metadata_length, io::RandomAccessFile\n                            \" metadata bytes but got \", buffer->size());\n   }\n \n-  int32_t flatbuffer_size = *reinterpret_cast<const int32_t*>(buffer->data());\n+  const int32_t continuation = util::SafeLoadAs<int32_t>(buffer->data());\n+  int32_t message_length = 0;\n+  int32_t prefix_size = -1;\n+  if (continuation == kIpcContinuationToken) {\n+    // Valid IPC message, parse the message length now\n+    message_length = util::SafeLoadAs<int32_t>(buffer->data() + 4);\n+    prefix_size = 8;\n+  } else if (continuation == 0) {\n+    // EOS\n+    *message = nullptr;\n+    return Status::OK();\n+  } else {\n+    // ARROW-6314: Backwards compatibility for reading old IPC\n+    // messages produced prior to version 0.15.0\n+    message_length = continuation;\n+    prefix_size = 4;\n+  }\n \n-  if (flatbuffer_size + static_cast<int>(sizeof(int32_t)) > metadata_length) {\n-    return Status::Invalid(\"flatbuffer size \", metadata_length,\n+  if (message_length + prefix_size != metadata_length) {\n+    return Status::Invalid(\"flatbuffer size \", message_length,\n                            \" invalid. File offset: \", offset,\n                            \", metadata length: \", metadata_length);\n   }\n \n-  auto metadata = SliceBuffer(buffer, 4, buffer->size() - 4);\n+  auto metadata = SliceBuffer(buffer, prefix_size, buffer->size() - prefix_size);\n \n Review comment:\n   I'm OK with this, since we are deprecating the path, but if we wanted to get ride of alignment issues, I think this would be the place to copy the buffer (I don't know how practical that is)\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-08-28T05:42:39.020+0000",
                    "updated": "2019-08-28T05:42:39.020+0000",
                    "started": "2019-08-28T05:42:39.019+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "302539",
                    "issueId": "13252258"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13252258/worklog/302540",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "emkornfield commented on issue #5211: ARROW-6314: [C++] Implement IPC message format alignment changes, provide backwards compatibility and \"legacy\" option to emit old message format\nURL: https://github.com/apache/arrow/pull/5211#issuecomment-525592919\n \n \n   Took a quick scan through and seems reasonable.  One question about if we want to memcpy for pre-0.15.0 version.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-08-28T05:43:14.918+0000",
                    "updated": "2019-08-28T05:43:14.918+0000",
                    "started": "2019-08-28T05:43:14.918+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "302540",
                    "issueId": "13252258"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13252258/worklog/302734",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on pull request #5211: ARROW-6314: [C++] Implement IPC message format alignment changes, provide backwards compatibility and \"legacy\" option to emit old message format\nURL: https://github.com/apache/arrow/pull/5211#discussion_r318487165\n \n \n\n ##########\n File path: cpp/src/arrow/ipc/message.cc\n ##########\n @@ -227,7 +231,7 @@ std::string FormatMessageType(Message::Type type) {\n Status ReadMessage(int64_t offset, int32_t metadata_length, io::RandomAccessFile* file,\n                    std::unique_ptr<Message>* message) {\n   ARROW_CHECK_GT(static_cast<size_t>(metadata_length), sizeof(int32_t))\n-      << \"metadata_length should be at least 4\";\n+      << \"metadata_length should be at least 8\";\n \n Review comment:\n   Hmm... the comperand hasn't changed, so why the change in the error message?\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-08-28T10:09:42.164+0000",
                    "updated": "2019-08-28T10:09:42.164+0000",
                    "started": "2019-08-28T10:09:42.163+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "302734",
                    "issueId": "13252258"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13252258/worklog/302735",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on pull request #5211: ARROW-6314: [C++] Implement IPC message format alignment changes, provide backwards compatibility and \"legacy\" option to emit old message format\nURL: https://github.com/apache/arrow/pull/5211#discussion_r318487637\n \n \n\n ##########\n File path: cpp/src/arrow/ipc/message.cc\n ##########\n @@ -237,15 +241,31 @@ Status ReadMessage(int64_t offset, int32_t metadata_length, io::RandomAccessFile\n                            \" metadata bytes but got \", buffer->size());\n   }\n \n-  int32_t flatbuffer_size = *reinterpret_cast<const int32_t*>(buffer->data());\n+  const int32_t continuation = util::SafeLoadAs<int32_t>(buffer->data());\n+  int32_t message_length = 0;\n+  int32_t prefix_size = -1;\n+  if (continuation == kIpcContinuationToken) {\n+    // Valid IPC message, parse the message length now\n+    message_length = util::SafeLoadAs<int32_t>(buffer->data() + 4);\n \n Review comment:\n   It's not obvious whether the buffer can be too small here.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-08-28T10:09:42.241+0000",
                    "updated": "2019-08-28T10:09:42.241+0000",
                    "started": "2019-08-28T10:09:42.241+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "302735",
                    "issueId": "13252258"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13252258/worklog/302736",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on pull request #5211: ARROW-6314: [C++] Implement IPC message format alignment changes, provide backwards compatibility and \"legacy\" option to emit old message format\nURL: https://github.com/apache/arrow/pull/5211#discussion_r318493083\n \n \n\n ##########\n File path: cpp/src/arrow/ipc/message.cc\n ##########\n @@ -237,15 +241,31 @@ Status ReadMessage(int64_t offset, int32_t metadata_length, io::RandomAccessFile\n                            \" metadata bytes but got \", buffer->size());\n   }\n \n-  int32_t flatbuffer_size = *reinterpret_cast<const int32_t*>(buffer->data());\n+  const int32_t continuation = util::SafeLoadAs<int32_t>(buffer->data());\n+  int32_t message_length = 0;\n \n Review comment:\n   I get lost. Is this the message body length? The actual metadata length?\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-08-28T10:09:42.332+0000",
                    "updated": "2019-08-28T10:09:42.332+0000",
                    "started": "2019-08-28T10:09:42.332+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "302736",
                    "issueId": "13252258"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13252258/worklog/302737",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on pull request #5211: ARROW-6314: [C++] Implement IPC message format alignment changes, provide backwards compatibility and \"legacy\" option to emit old message format\nURL: https://github.com/apache/arrow/pull/5211#discussion_r318491406\n \n \n\n ##########\n File path: cpp/src/arrow/ipc/message.cc\n ##########\n @@ -237,15 +241,31 @@ Status ReadMessage(int64_t offset, int32_t metadata_length, io::RandomAccessFile\n                            \" metadata bytes but got \", buffer->size());\n   }\n \n-  int32_t flatbuffer_size = *reinterpret_cast<const int32_t*>(buffer->data());\n+  const int32_t continuation = util::SafeLoadAs<int32_t>(buffer->data());\n+  int32_t message_length = 0;\n+  int32_t prefix_size = -1;\n+  if (continuation == kIpcContinuationToken) {\n+    // Valid IPC message, parse the message length now\n+    message_length = util::SafeLoadAs<int32_t>(buffer->data() + 4);\n+    prefix_size = 8;\n+  } else if (continuation == 0) {\n+    // EOS\n+    *message = nullptr;\n+    return Status::OK();\n+  } else {\n+    // ARROW-6314: Backwards compatibility for reading old IPC\n+    // messages produced prior to version 0.15.0\n+    message_length = continuation;\n+    prefix_size = 4;\n+  }\n \n-  if (flatbuffer_size + static_cast<int>(sizeof(int32_t)) > metadata_length) {\n-    return Status::Invalid(\"flatbuffer size \", metadata_length,\n+  if (message_length + prefix_size != metadata_length) {\n+    return Status::Invalid(\"flatbuffer size \", message_length,\n                            \" invalid. File offset: \", offset,\n                            \", metadata length: \", metadata_length);\n   }\n \n-  auto metadata = SliceBuffer(buffer, 4, buffer->size() - 4);\n+  auto metadata = SliceBuffer(buffer, prefix_size, buffer->size() - prefix_size);\n \n Review comment:\n   We would be copying only if `prefix_size == 4`, right?\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-08-28T10:09:42.336+0000",
                    "updated": "2019-08-28T10:09:42.336+0000",
                    "started": "2019-08-28T10:09:42.335+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "302737",
                    "issueId": "13252258"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13252258/worklog/302747",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on issue #5211: ARROW-6314: [C++] Implement IPC message format alignment changes, provide backwards compatibility and \"legacy\" option to emit old message format\nURL: https://github.com/apache/arrow/pull/5211#issuecomment-525684078\n \n \n   I fixed the CUDA issue.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-08-28T10:29:58.666+0000",
                    "updated": "2019-08-28T10:29:58.666+0000",
                    "started": "2019-08-28T10:29:58.665+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "302747",
                    "issueId": "13252258"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13252258/worklog/302748",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on issue #5211: ARROW-6314: [C++] Implement IPC message format alignment changes, provide backwards compatibility and \"legacy\" option to emit old message format\nURL: https://github.com/apache/arrow/pull/5211#issuecomment-525684078\n \n \n   I pushed a fix for the CUDA issue.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-08-28T10:30:12.069+0000",
                    "updated": "2019-08-28T10:30:12.069+0000",
                    "started": "2019-08-28T10:30:12.069+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "302748",
                    "issueId": "13252258"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13252258/worklog/302920",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on pull request #5211: ARROW-6314: [C++] Implement IPC message format alignment changes, provide backwards compatibility and \"legacy\" option to emit old message format\nURL: https://github.com/apache/arrow/pull/5211#discussion_r318619320\n \n \n\n ##########\n File path: cpp/src/arrow/ipc/message.cc\n ##########\n @@ -227,7 +231,7 @@ std::string FormatMessageType(Message::Type type) {\n Status ReadMessage(int64_t offset, int32_t metadata_length, io::RandomAccessFile* file,\n                    std::unique_ptr<Message>* message) {\n   ARROW_CHECK_GT(static_cast<size_t>(metadata_length), sizeof(int32_t))\n-      << \"metadata_length should be at least 4\";\n+      << \"metadata_length should be at least 8\";\n \n Review comment:\n   I think this was an error from Micah's quick check during the vote, I will revert\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-08-28T14:39:29.690+0000",
                    "updated": "2019-08-28T14:39:29.690+0000",
                    "started": "2019-08-28T14:39:29.689+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "302920",
                    "issueId": "13252258"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13252258/worklog/302921",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on pull request #5211: ARROW-6314: [C++] Implement IPC message format alignment changes, provide backwards compatibility and \"legacy\" option to emit old message format\nURL: https://github.com/apache/arrow/pull/5211#discussion_r318619438\n \n \n\n ##########\n File path: cpp/src/arrow/ipc/message.cc\n ##########\n @@ -237,15 +241,31 @@ Status ReadMessage(int64_t offset, int32_t metadata_length, io::RandomAccessFile\n                            \" metadata bytes but got \", buffer->size());\n   }\n \n-  int32_t flatbuffer_size = *reinterpret_cast<const int32_t*>(buffer->data());\n+  const int32_t continuation = util::SafeLoadAs<int32_t>(buffer->data());\n+  int32_t message_length = 0;\n+  int32_t prefix_size = -1;\n+  if (continuation == kIpcContinuationToken) {\n+    // Valid IPC message, parse the message length now\n+    message_length = util::SafeLoadAs<int32_t>(buffer->data() + 4);\n \n Review comment:\n   Will add check\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-08-28T14:39:42.111+0000",
                    "updated": "2019-08-28T14:39:42.111+0000",
                    "started": "2019-08-28T14:39:42.110+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "302921",
                    "issueId": "13252258"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13252258/worklog/302942",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on pull request #5211: ARROW-6314: [C++] Implement IPC message format alignment changes, provide backwards compatibility and \"legacy\" option to emit old message format\nURL: https://github.com/apache/arrow/pull/5211#discussion_r318637476\n \n \n\n ##########\n File path: cpp/src/arrow/ipc/writer.cc\n ##########\n @@ -1046,23 +1036,27 @@ class PayloadStreamWriter : public internal::IpcPayloadWriter,\n #endif\n \n     int32_t metadata_length = 0;  // unused\n-    RETURN_NOT_OK(WriteIpcPayload(payload, sink_, &metadata_length));\n+    RETURN_NOT_OK(WriteIpcPayload(payload, options_, sink_, &metadata_length));\n     RETURN_NOT_OK(UpdatePositionCheckAligned());\n     return Status::OK();\n   }\n \n   Status Close() override {\n     // Write 0 EOS message\n-    return Write(&kEos, sizeof(int32_t));\n+    return Write(&kEos, sizeof(int64_t));\n \n Review comment:\n   It does work\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-08-28T15:10:54.110+0000",
                    "updated": "2019-08-28T15:10:54.110+0000",
                    "started": "2019-08-28T15:10:54.110+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "302942",
                    "issueId": "13252258"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13252258/worklog/302943",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on pull request #5211: ARROW-6314: [C++] Implement IPC message format alignment changes, provide backwards compatibility and \"legacy\" option to emit old message format\nURL: https://github.com/apache/arrow/pull/5211#discussion_r318637561\n \n \n\n ##########\n File path: cpp/src/arrow/ipc/writer.cc\n ##########\n @@ -1107,7 +1101,7 @@ class PayloadFileWriter : public internal::IpcPayloadWriter, protected StreamBoo\n \n   Status Close() override {\n     // Write 0 EOS message for compatibility with sequential readers\n-    RETURN_NOT_OK(Write(&kEos, sizeof(int32_t)));\n+    RETURN_NOT_OK(Write(&kEos, sizeof(int64_t)));\n \n Review comment:\n   Done\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-08-28T15:11:03.760+0000",
                    "updated": "2019-08-28T15:11:03.760+0000",
                    "started": "2019-08-28T15:11:03.760+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "302943",
                    "issueId": "13252258"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13252258/worklog/302958",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on pull request #5211: ARROW-6314: [C++] Implement IPC message format alignment changes, provide backwards compatibility and \"legacy\" option to emit old message format\nURL: https://github.com/apache/arrow/pull/5211#discussion_r318646290\n \n \n\n ##########\n File path: cpp/src/arrow/ipc/message.cc\n ##########\n @@ -237,15 +241,31 @@ Status ReadMessage(int64_t offset, int32_t metadata_length, io::RandomAccessFile\n                            \" metadata bytes but got \", buffer->size());\n   }\n \n-  int32_t flatbuffer_size = *reinterpret_cast<const int32_t*>(buffer->data());\n+  const int32_t continuation = util::SafeLoadAs<int32_t>(buffer->data());\n+  int32_t message_length = 0;\n+  int32_t prefix_size = -1;\n+  if (continuation == kIpcContinuationToken) {\n+    // Valid IPC message, parse the message length now\n+    message_length = util::SafeLoadAs<int32_t>(buffer->data() + 4);\n+    prefix_size = 8;\n+  } else if (continuation == 0) {\n+    // EOS\n+    *message = nullptr;\n+    return Status::OK();\n+  } else {\n+    // ARROW-6314: Backwards compatibility for reading old IPC\n+    // messages produced prior to version 0.15.0\n+    message_length = continuation;\n+    prefix_size = 4;\n+  }\n \n-  if (flatbuffer_size + static_cast<int>(sizeof(int32_t)) > metadata_length) {\n-    return Status::Invalid(\"flatbuffer size \", metadata_length,\n+  if (message_length + prefix_size != metadata_length) {\n+    return Status::Invalid(\"flatbuffer size \", message_length,\n                            \" invalid. File offset: \", offset,\n                            \", metadata length: \", metadata_length);\n   }\n \n-  auto metadata = SliceBuffer(buffer, 4, buffer->size() - 4);\n+  auto metadata = SliceBuffer(buffer, prefix_size, buffer->size() - prefix_size);\n \n Review comment:\n   Done. Also adding debug assertions about the Flatbuffer memory address alignment\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-08-28T15:26:46.210+0000",
                    "updated": "2019-08-28T15:26:46.210+0000",
                    "started": "2019-08-28T15:26:46.209+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "302958",
                    "issueId": "13252258"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13252258/worklog/302961",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on pull request #5211: ARROW-6314: [C++] Implement IPC message format alignment changes, provide backwards compatibility and \"legacy\" option to emit old message format\nURL: https://github.com/apache/arrow/pull/5211#discussion_r318648085\n \n \n\n ##########\n File path: cpp/src/arrow/ipc/message.cc\n ##########\n @@ -227,7 +231,7 @@ std::string FormatMessageType(Message::Type type) {\n Status ReadMessage(int64_t offset, int32_t metadata_length, io::RandomAccessFile* file,\n                    std::unique_ptr<Message>* message) {\n   ARROW_CHECK_GT(static_cast<size_t>(metadata_length), sizeof(int32_t))\n-      << \"metadata_length should be at least 4\";\n+      << \"metadata_length should be at least 8\";\n \n Review comment:\n   Fixed\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-08-28T15:30:05.337+0000",
                    "updated": "2019-08-28T15:30:05.337+0000",
                    "started": "2019-08-28T15:30:05.336+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "302961",
                    "issueId": "13252258"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13252258/worklog/302963",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on pull request #5211: ARROW-6314: [C++] Implement IPC message format alignment changes, provide backwards compatibility and \"legacy\" option to emit old message format\nURL: https://github.com/apache/arrow/pull/5211#discussion_r318648264\n \n \n\n ##########\n File path: cpp/src/arrow/ipc/message.cc\n ##########\n @@ -237,15 +241,31 @@ Status ReadMessage(int64_t offset, int32_t metadata_length, io::RandomAccessFile\n                            \" metadata bytes but got \", buffer->size());\n   }\n \n-  int32_t flatbuffer_size = *reinterpret_cast<const int32_t*>(buffer->data());\n+  const int32_t continuation = util::SafeLoadAs<int32_t>(buffer->data());\n+  int32_t message_length = 0;\n+  int32_t prefix_size = -1;\n+  if (continuation == kIpcContinuationToken) {\n+    // Valid IPC message, parse the message length now\n+    message_length = util::SafeLoadAs<int32_t>(buffer->data() + 4);\n \n Review comment:\n   I'm adding a check. Pretty sure you could get a segfault here with fuzzers\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-08-28T15:30:25.739+0000",
                    "updated": "2019-08-28T15:30:25.739+0000",
                    "started": "2019-08-28T15:30:25.739+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "302963",
                    "issueId": "13252258"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/7",
            "id": "7",
            "description": "The sub-task of the issue",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21146&avatarType=issuetype",
            "name": "Sub-task",
            "subtask": true,
            "avatarId": 21146
        },
        "timespent": 27600,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@22e333a4[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@4c58fd21[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@4891407f[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@432b0db9[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@1a68a7d7[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@4873ce9b[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@a23ed52[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@117e7f6a[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@4ef7248d[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@18263cde[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@dfa1bf5[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@6f1db00f[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 27600,
        "customfield_12312520": null,
        "customfield_12312521": "Wed Aug 28 16:59:06 UTC 2019",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2019-08-28T16:59:06.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-6314/watchers",
            "watchCount": 1,
            "isWatching": false
        },
        "created": "2019-08-22T03:34:22.000+0000",
        "updated": "2019-09-12T23:14:38.000+0000",
        "timeoriginalestimate": null,
        "description": null,
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "7h 40m",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 27600
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[C++] Implement changes to ensure flatbuffer alignment.",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13252258/comment/16917924",
                    "id": "16917924",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "Issue resolved by pull request 5211\n[https://github.com/apache/arrow/pull/5211]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2019-08-28T16:59:06.410+0000",
                    "updated": "2019-08-28T16:59:06.410+0000"
                }
            ],
            "maxResults": 1,
            "total": 1,
            "startAt": 0
        },
        "customfield_12311820": "0|z05wqo:",
        "customfield_12314139": null
    }
}