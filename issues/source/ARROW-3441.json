{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13189448",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13189448",
    "key": "ARROW-3441",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12343858",
                "id": "12343858",
                "description": "",
                "name": "0.12.0",
                "archived": false,
                "released": true,
                "releaseDate": "2019-01-20"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "name": "Major",
            "id": "3"
        },
        "labels": [
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
            "name": "wesm",
            "key": "wesmckinn",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
            },
            "displayName": "Wes McKinney",
            "active": true,
            "timeZone": "America/New_York"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12328935",
                "id": "12328935",
                "name": "C++"
            },
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12334626",
                "id": "12334626",
                "name": "C++ - Gandiva"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
            "name": "wesm",
            "key": "wesmckinn",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
            },
            "displayName": "Wes McKinney",
            "active": true,
            "timeZone": "America/New_York"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
            "name": "wesm",
            "key": "wesmckinn",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
            },
            "displayName": "Wes McKinney",
            "active": true,
            "timeZone": "America/New_York"
        },
        "aggregateprogress": {
            "progress": 4200,
            "total": 4200,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 4200,
            "total": 4200,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-3441/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 7,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13189448/worklog/172067",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm opened a new pull request #3091: ARROW-3441: [Gandiva] Use common unit test creation facilities, do not produce multiple executables for the same unit tests\nURL: https://github.com/apache/arrow/pull/3091\n \n \n   This also adds a \"gandiva\" CMake target so you can run `ninja gandiva`. Additionally, all unit tests now have a `gandiva-` prefix.\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-12-04T22:02:15.607+0000",
                    "updated": "2018-12-04T22:02:15.607+0000",
                    "started": "2018-12-04T22:02:15.606+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "172067",
                    "issueId": "13189448"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13189448/worklog/172068",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on issue #3091: ARROW-3441: [Gandiva] Use common unit test creation facilities, do not produce multiple executables for the same unit tests\nURL: https://github.com/apache/arrow/pull/3091#issuecomment-444276018\n \n \n   Sample run:\r\n   \r\n   ```\r\n   $ ctest -L gandiva -j4\r\n   Test project /home/wesm/code/arrow/cpp/build\r\n         Start 107: gandiva-projector_test\r\n         Start 118: gandiva-projector_test_static\r\n         Start 113: gandiva-date_time_test\r\n         Start 109: gandiva-if_expr_test\r\n    1/34 Test #109: gandiva-if_expr_test ......................   Passed    0.25 sec\r\n         Start 111: gandiva-boolean_expr_test\r\n    2/34 Test #113: gandiva-date_time_test ....................   Passed    0.29 sec\r\n         Start 110: gandiva-literal_test\r\n    3/34 Test #111: gandiva-boolean_expr_test .................   Passed    0.20 sec\r\n         Start 108: gandiva-projector_build_validation_test\r\n    4/34 Test #110: gandiva-literal_test ......................   Passed    0.17 sec\r\n         Start 106: gandiva-filter_test\r\n    5/34 Test #108: gandiva-projector_build_validation_test ...   Passed    0.15 sec\r\n         Start 117: gandiva-null_validity_test\r\n    6/34 Test #106: gandiva-filter_test .......................   Passed    0.15 sec\r\n         Start 115: gandiva-hash_test\r\n    7/34 Test #118: gandiva-projector_test_static .............   Passed    0.71 sec\r\n         Start 116: gandiva-in_expr_test\r\n    8/34 Test #117: gandiva-null_validity_test ................   Passed    0.11 sec\r\n         Start  86: gandiva-engine_llvm_test\r\n    9/34 Test #115: gandiva-hash_test .........................   Passed    0.11 sec\r\n         Start  90: gandiva-llvm_generator_test\r\n   10/34 Test #107: gandiva-projector_test ....................   Passed    0.78 sec\r\n         Start 112: gandiva-binary_test\r\n   11/34 Test  #86: gandiva-engine_llvm_test ..................   Passed    0.09 sec\r\n         Start  94: gandiva-expression_registry_test\r\n   12/34 Test  #90: gandiva-llvm_generator_test ...............   Passed    0.09 sec\r\n         Start  88: gandiva-function_registry_test\r\n   13/34 Test #116: gandiva-in_expr_test ......................   Passed    0.11 sec\r\n         Start  96: gandiva-lru_cache_test\r\n   14/34 Test  #88: gandiva-function_registry_test ............   Passed    0.05 sec\r\n         Start  85: gandiva-bitmap_accumulator_test\r\n   15/34 Test  #94: gandiva-expression_registry_test ..........   Passed    0.06 sec\r\n         Start  89: gandiva-llvm_types_test\r\n   16/34 Test #112: gandiva-binary_test .......................   Passed    0.09 sec\r\n         Start  93: gandiva-expr_decomposer_test\r\n   17/34 Test  #96: gandiva-lru_cache_test ....................   Passed    0.06 sec\r\n         Start  87: gandiva-function_signature_test\r\n   18/34 Test  #85: gandiva-bitmap_accumulator_test ...........   Passed    0.05 sec\r\n         Start  97: gandiva-to_date_holder_test\r\n   19/34 Test  #89: gandiva-llvm_types_test ...................   Passed    0.05 sec\r\n         Start  98: gandiva-simple_arena_test\r\n   20/34 Test  #93: gandiva-expr_decomposer_test ..............   Passed    0.05 sec\r\n         Start  95: gandiva-selection_vector_test\r\n   21/34 Test  #87: gandiva-function_signature_test ...........   Passed    0.06 sec\r\n         Start  91: gandiva-annotator_test\r\n   22/34 Test  #97: gandiva-to_date_holder_test ...............   Passed    0.05 sec\r\n         Start  92: gandiva-tree_expr_test\r\n   23/34 Test  #98: gandiva-simple_arena_test .................   Passed    0.05 sec\r\n         Start 114: gandiva-to_string_test\r\n   24/34 Test  #95: gandiva-selection_vector_test .............   Passed    0.05 sec\r\n         Start 103: string_ops_test\r\n   25/34 Test #103: string_ops_test ...........................   Passed    0.00 sec\r\n         Start 101: time_test\r\n   26/34 Test  #91: gandiva-annotator_test ....................   Passed    0.05 sec\r\n         Start  99: bitmap_test\r\n   27/34 Test #101: time_test .................................   Passed    0.01 sec\r\n         Start 100: epoch_time_point_test\r\n   28/34 Test  #99: bitmap_test ...............................   Passed    0.01 sec\r\n         Start 104: arithmetic_ops_test\r\n   29/34 Test #104: arithmetic_ops_test .......................   Passed    0.00 sec\r\n         Start 105: extended_math_ops_test\r\n   30/34 Test #100: epoch_time_point_test .....................   Passed    0.01 sec\r\n         Start 102: hash_test\r\n   31/34 Test #105: extended_math_ops_test ....................   Passed    0.00 sec\r\n   32/34 Test #102: hash_test .................................   Passed    0.01 sec\r\n   33/34 Test  #92: gandiva-tree_expr_test ....................   Passed    0.05 sec\r\n   34/34 Test #114: gandiva-to_string_test ....................   Passed    0.05 sec\r\n   \r\n   100% tests passed, 0 tests failed out of 34\r\n   \r\n   Label Time Summary:\r\n   arithmetic_ops_test       =   0.00 sec*proc (1 test)\r\n   bitmap_test               =   0.01 sec*proc (1 test)\r\n   epoch_time_point_test     =   0.01 sec*proc (1 test)\r\n   extended_math_ops_test    =   0.00 sec*proc (1 test)\r\n   gandiva                   =   3.98 sec*proc (27 tests)\r\n   gandiva,unittest          =   0.04 sec*proc (7 tests)\r\n   hash_test                 =   0.01 sec*proc (1 test)\r\n   string_ops_test           =   0.00 sec*proc (1 test)\r\n   time_test                 =   0.01 sec*proc (1 test)\r\n   unittest                  =   3.98 sec*proc (27 tests)\r\n   \r\n   Total Test time (real) =   1.02 sec\r\n   ```\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-12-04T22:02:44.078+0000",
                    "updated": "2018-12-04T22:02:44.078+0000",
                    "started": "2018-12-04T22:02:44.077+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "172068",
                    "issueId": "13189448"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13189448/worklog/172069",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on issue #3091: ARROW-3441: [Gandiva] Use common unit test creation facilities, do not produce multiple executables for the same unit tests\nURL: https://github.com/apache/arrow/pull/3091#issuecomment-444276889\n \n \n   I'm going to add the precompiled tests to the target, too, just a few minutes\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-12-04T22:05:37.633+0000",
                    "updated": "2018-12-04T22:05:37.633+0000",
                    "started": "2018-12-04T22:05:37.633+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "172069",
                    "issueId": "13189448"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13189448/worklog/172123",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "codecov-io commented on issue #3091: ARROW-3441: [Gandiva] Use common unit test creation facilities, do not produce multiple executables for the same unit tests\nURL: https://github.com/apache/arrow/pull/3091#issuecomment-444322961\n \n \n   # [Codecov](https://codecov.io/gh/apache/arrow/pull/3091?src=pr&el=h1) Report\n   > Merging [#3091](https://codecov.io/gh/apache/arrow/pull/3091?src=pr&el=desc) into [master](https://codecov.io/gh/apache/arrow/commit/4ac4eb569978b214e41c9d4254533b4b2ac09875?src=pr&el=desc) will **increase** coverage by `1.03%`.\n   > The diff coverage is `n/a`.\n   \n   [![Impacted file tree graph](https://codecov.io/gh/apache/arrow/pull/3091/graphs/tree.svg?width=650&token=LpTCFbqVT1&height=150&src=pr)](https://codecov.io/gh/apache/arrow/pull/3091?src=pr&el=tree)\n   \n   ```diff\n   @@            Coverage Diff             @@\n   ##           master    #3091      +/-   ##\n   ==========================================\n   + Coverage   87.12%   88.15%   +1.03%     \n   ==========================================\n     Files         492      434      -58     \n     Lines       69104    65339    -3765     \n   ==========================================\n   - Hits        60204    57601    -2603     \n   + Misses       8801     7738    -1063     \n   + Partials       99        0      -99\n   ```\n   \n   \n   | [Impacted Files](https://codecov.io/gh/apache/arrow/pull/3091?src=pr&el=tree) | Coverage \u0394 | |\n   |---|---|---|\n   | [go/arrow/array/table.go](https://codecov.io/gh/apache/arrow/pull/3091/diff?src=pr&el=tree#diff-Z28vYXJyb3cvYXJyYXkvdGFibGUuZ28=) | | |\n   | [go/arrow/math/uint64\\_amd64.go](https://codecov.io/gh/apache/arrow/pull/3091/diff?src=pr&el=tree#diff-Z28vYXJyb3cvbWF0aC91aW50NjRfYW1kNjQuZ28=) | | |\n   | [go/arrow/internal/testing/tools/bool.go](https://codecov.io/gh/apache/arrow/pull/3091/diff?src=pr&el=tree#diff-Z28vYXJyb3cvaW50ZXJuYWwvdGVzdGluZy90b29scy9ib29sLmdv) | | |\n   | [go/arrow/internal/bitutil/bitutil.go](https://codecov.io/gh/apache/arrow/pull/3091/diff?src=pr&el=tree#diff-Z28vYXJyb3cvaW50ZXJuYWwvYml0dXRpbC9iaXR1dGlsLmdv) | | |\n   | [go/arrow/memory/memory\\_avx2\\_amd64.go](https://codecov.io/gh/apache/arrow/pull/3091/diff?src=pr&el=tree#diff-Z28vYXJyb3cvbWVtb3J5L21lbW9yeV9hdngyX2FtZDY0Lmdv) | | |\n   | [go/arrow/array/null.go](https://codecov.io/gh/apache/arrow/pull/3091/diff?src=pr&el=tree#diff-Z28vYXJyb3cvYXJyYXkvbnVsbC5nbw==) | | |\n   | [go/arrow/datatype\\_nested.go](https://codecov.io/gh/apache/arrow/pull/3091/diff?src=pr&el=tree#diff-Z28vYXJyb3cvZGF0YXR5cGVfbmVzdGVkLmdv) | | |\n   | [go/arrow/array/string.go](https://codecov.io/gh/apache/arrow/pull/3091/diff?src=pr&el=tree#diff-Z28vYXJyb3cvYXJyYXkvc3RyaW5nLmdv) | | |\n   | [go/arrow/math/uint64\\_avx2\\_amd64.go](https://codecov.io/gh/apache/arrow/pull/3091/diff?src=pr&el=tree#diff-Z28vYXJyb3cvbWF0aC91aW50NjRfYXZ4Ml9hbWQ2NC5nbw==) | | |\n   | [go/arrow/array/builder.go](https://codecov.io/gh/apache/arrow/pull/3091/diff?src=pr&el=tree#diff-Z28vYXJyb3cvYXJyYXkvYnVpbGRlci5nbw==) | | |\n   | ... and [48 more](https://codecov.io/gh/apache/arrow/pull/3091/diff?src=pr&el=tree-more) | |\n   \n   ------\n   \n   [Continue to review full report at Codecov](https://codecov.io/gh/apache/arrow/pull/3091?src=pr&el=continue).\n   > **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n   > `\u0394 = absolute <relative> (impact)`, `\u00f8 = not affected`, `? = missing data`\n   > Powered by [Codecov](https://codecov.io/gh/apache/arrow/pull/3091?src=pr&el=footer). Last update [4ac4eb5...d6f4703](https://codecov.io/gh/apache/arrow/pull/3091?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n   \n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-12-05T01:25:27.069+0000",
                    "updated": "2018-12-05T01:25:27.069+0000",
                    "started": "2018-12-05T01:25:27.068+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "172123",
                    "issueId": "13189448"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13189448/worklog/172395",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on issue #3091: ARROW-3441: [Gandiva] Use common unit test creation facilities, do not produce multiple executables for the same unit tests\nURL: https://github.com/apache/arrow/pull/3091#issuecomment-444564666\n \n \n   cc @praveenbingo @pravindra \n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-12-05T17:09:42.817+0000",
                    "updated": "2018-12-05T17:09:42.817+0000",
                    "started": "2018-12-05T17:09:42.816+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "172395",
                    "issueId": "13189448"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13189448/worklog/172406",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pravindra commented on issue #3091: ARROW-3441: [Gandiva] Use common unit test creation facilities, do not produce multiple executables for the same unit tests\nURL: https://github.com/apache/arrow/pull/3091#issuecomment-444572563\n \n \n   lgtm. Thanks for fixing this !\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-12-05T17:32:25.210+0000",
                    "updated": "2018-12-05T17:32:25.210+0000",
                    "started": "2018-12-05T17:32:25.210+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "172406",
                    "issueId": "13189448"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13189448/worklog/172407",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm closed pull request #3091: ARROW-3441: [Gandiva] Use common unit test creation facilities, do not produce multiple executables for the same unit tests\nURL: https://github.com/apache/arrow/pull/3091\n \n \n   \n\nThis is a PR merged from a forked repository.\nAs GitHub hides the original diff on merge, it is displayed below for\nthe sake of provenance:\n\nAs this is a foreign pull request (from a fork), the diff is supplied\nbelow (as it won't show otherwise due to GitHub magic):\n\ndiff --git a/cpp/cmake_modules/BuildUtils.cmake b/cpp/cmake_modules/BuildUtils.cmake\nindex fb646dd6c1..916b9ebddb 100644\n--- a/cpp/cmake_modules/BuildUtils.cmake\n+++ b/cpp/cmake_modules/BuildUtils.cmake\n@@ -368,6 +368,7 @@ endfunction()\n #\n # Arguments after the test name will be passed to set_tests_properties().\n #\n+# \\arg ENABLED if passed, add this unit test even if ARROW_BUILD_TESTS is off\n # \\arg PREFIX a string to append to the name of the test executable. For\n # example, if you have src/arrow/foo/bar-test.cc, then PREFIX \"foo\" will create\n # test executable foo-bar-test\n@@ -377,7 +378,7 @@ endfunction()\n # groups using the syntax unittest;GROUP2;GROUP3. Custom targets for the group\n # names must exist\n function(ADD_ARROW_TEST REL_TEST_NAME)\n-  set(options NO_VALGRIND)\n+  set(options NO_VALGRIND ENABLED)\n   set(one_value_args)\n   set(multi_value_args SOURCES STATIC_LINK_LIBS EXTRA_LINK_LIBS EXTRA_INCLUDES\n       EXTRA_DEPENDENCIES LABELS PREFIX)\n@@ -398,7 +399,7 @@ function(ADD_ARROW_TEST REL_TEST_NAME)\n     endif()\n   endif()\n \n-  if (NO_TESTS)\n+  if (NO_TESTS AND NOT ARG_ENABLED)\n     return()\n   endif()\n   get_filename_component(TEST_NAME ${REL_TEST_NAME} NAME_WE)\n@@ -424,13 +425,13 @@ function(ADD_ARROW_TEST REL_TEST_NAME)\n \n   if (ARG_STATIC_LINK_LIBS)\n     # Customize link libraries\n-    target_link_libraries(${TEST_NAME} ${ARG_STATIC_LINK_LIBS})\n+    target_link_libraries(${TEST_NAME} PRIVATE ${ARG_STATIC_LINK_LIBS})\n   else()\n-    target_link_libraries(${TEST_NAME} ${ARROW_TEST_LINK_LIBS})\n+    target_link_libraries(${TEST_NAME} PRIVATE ${ARROW_TEST_LINK_LIBS})\n   endif()\n \n   if (ARG_EXTRA_LINK_LIBS)\n-    target_link_libraries(${TEST_NAME} ${ARG_EXTRA_LINK_LIBS})\n+    target_link_libraries(${TEST_NAME} PRIVATE ${ARG_EXTRA_LINK_LIBS})\n   endif()\n \n   if (ARG_EXTRA_INCLUDES)\ndiff --git a/cpp/cmake_modules/GandivaBuildUtils.cmake b/cpp/cmake_modules/GandivaBuildUtils.cmake\ndeleted file mode 100644\nindex 521d6976b5..0000000000\n--- a/cpp/cmake_modules/GandivaBuildUtils.cmake\n+++ /dev/null\n@@ -1,91 +0,0 @@\n-# Licensed to the Apache Software Foundation (ASF) under one\n-# or more contributor license agreements.  See the NOTICE file\n-# distributed with this work for additional information\n-# regarding copyright ownership.  The ASF licenses this file\n-# to you under the Apache License, Version 2.0 (the\n-# \"License\"); you may not use this file except in compliance\n-# with the License.  You may obtain a copy of the License at\n-#\n-#   http://www.apache.org/licenses/LICENSE-2.0\n-#\n-# Unless required by applicable law or agreed to in writing,\n-# software distributed under the License is distributed on an\n-# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n-# KIND, either express or implied.  See the License for the\n-# specific language governing permissions and limitations\n-# under the License.\n-\n-set(GANDIVA_TEST_LINK_LIBS\n-  gtest_static\n-  gtest_main_static\n-  ${RE2_LIBRARY})\n-\n-if (PTHREAD_LIBRARY)\n-  set(GANDIVA_TEST_LINK_LIBS\n-    ${GANDIVA_TEST_LINK_LIBS}\n-    ${PTHREAD_LIBRARY})\n-endif()\n-\n-# Add a unittest executable, with its dependencies.\n-function(add_gandiva_unit_test REL_TEST_NAME)\n-  get_filename_component(TEST_NAME ${REL_TEST_NAME} NAME_WE)\n-\n-  add_executable(${TEST_NAME} ${REL_TEST_NAME} ${ARGN})\n-  if(${REL_TEST_NAME} MATCHES \"llvm\" OR\n-     ${REL_TEST_NAME} MATCHES \"expression_registry\")\n-    # If the unit test has llvm in its name, include llvm.\n-    add_dependencies(${TEST_NAME} LLVM::LLVM_INTERFACE)\n-    target_link_libraries(${TEST_NAME} PRIVATE LLVM::LLVM_INTERFACE)\n-  endif()\n-\n-  # Require toolchain to be built\n-  add_dependencies(${TEST_NAME} arrow_dependencies)\n-\n-  target_include_directories(${TEST_NAME} PRIVATE\n-    ${CMAKE_SOURCE_DIR}/include\n-    ${CMAKE_SOURCE_DIR}/src\n-  )\n-  target_link_libraries(${TEST_NAME}\n-    PRIVATE arrow_shared ${GANDIVA_TEST_LINK_LIBS}\n-  )\n-  add_test(NAME ${TEST_NAME} COMMAND ${TEST_NAME})\n-  set_property(TEST ${TEST_NAME} PROPERTY LABELS gandiva,unittest ${TEST_NAME})\n-endfunction(add_gandiva_unit_test REL_TEST_NAME)\n-\n-# Add a unittest executable for a precompiled file (used to generate IR)\n-function(add_precompiled_unit_test REL_TEST_NAME)\n-  get_filename_component(TEST_NAME ${REL_TEST_NAME} NAME_WE)\n-\n-  add_executable(${TEST_NAME} ${REL_TEST_NAME} ${ARGN})\n-  # Require toolchain to be built\n-  add_dependencies(${TEST_NAME} arrow_dependencies)\n-  target_include_directories(${TEST_NAME} PRIVATE ${CMAKE_SOURCE_DIR}/src)\n-  target_link_libraries(${TEST_NAME}\n-    PRIVATE arrow_shared ${GANDIVA_TEST_LINK_LIBS}\n-  )\n-  target_compile_definitions(${TEST_NAME} PRIVATE GANDIVA_UNIT_TEST=1)\n-  add_test(NAME ${TEST_NAME} COMMAND ${TEST_NAME})\n-  set_property(TEST ${TEST_NAME} PROPERTY LABELS gandiva,unittest ${TEST_NAME})\n-endfunction(add_precompiled_unit_test REL_TEST_NAME)\n-\n-# Add an integ executable, with its dependencies.\n-function(add_gandiva_integ_test REL_TEST_NAME GANDIVA_LIB)\n-  get_filename_component(TEST_NAME ${REL_TEST_NAME} NAME_WE)\n-\n-  add_executable(${TEST_NAME}_${GANDIVA_LIB} ${REL_TEST_NAME} ${ARGN})\n-  target_include_directories(${TEST_NAME}_${GANDIVA_LIB} PRIVATE ${CMAKE_SOURCE_DIR})\n-  target_link_libraries(${TEST_NAME}_${GANDIVA_LIB} PRIVATE\n-    ${GANDIVA_LIB}\n-    ${GANDIVA_TEST_LINK_LIBS}\n-  )\n-\n-  add_test(NAME ${TEST_NAME}_${GANDIVA_LIB} COMMAND ${TEST_NAME}_${GANDIVA_LIB})\n-  set_property(TEST ${TEST_NAME}_${GANDIVA_LIB} PROPERTY LABELS gandiva,integ ${TEST_NAME}_${GANDIVA_LIB})\n-endfunction(add_gandiva_integ_test REL_TEST_NAME)\n-\n-function(prevent_in_source_builds)\n- file(TO_CMAKE_PATH \"${PROJECT_BINARY_DIR}/CMakeLists.txt\" LOC_PATH)\n- if(EXISTS \"${LOC_PATH}\")\n-   message(FATAL_ERROR \"Gandiva does not support in-source builds\")\n- endif()\n-endfunction(prevent_in_source_builds)\ndiff --git a/cpp/src/arrow/ipc/CMakeLists.txt b/cpp/src/arrow/ipc/CMakeLists.txt\nindex 13ed9b9e58..9c384c3e99 100644\n--- a/cpp/src/arrow/ipc/CMakeLists.txt\n+++ b/cpp/src/arrow/ipc/CMakeLists.txt\n@@ -33,8 +33,7 @@ if (NOT ARROW_BOOST_HEADER_ONLY)\n         set_target_properties(json-integration-test\n           PROPERTIES LINK_FLAGS \"-undefined dynamic_lookup\")\n       else()\n-        target_link_libraries(json-integration-test\n-          pthread)\n+        target_link_libraries(json-integration-test PRIVATE pthread)\n       endif()\n     endif()\n   endif()\ndiff --git a/cpp/src/gandiva/CMakeLists.txt b/cpp/src/gandiva/CMakeLists.txt\nindex b71313e019..bd497dcb92 100644\n--- a/cpp/src/gandiva/CMakeLists.txt\n+++ b/cpp/src/gandiva/CMakeLists.txt\n@@ -20,10 +20,11 @@ cmake_minimum_required(VERSION 3.11)\n \n project(gandiva)\n \n-include(GandivaBuildUtils)\n-\n find_package(LLVM)\n \n+# For \"make gandiva\" to build everything Gandiva-related\n+add_custom_target(gandiva)\n+\n # Set the path where the byte-code files will be installed.\n set(GANDIVA_BC_INSTALL_DIR\n   ${CMAKE_INSTALL_PREFIX}/${CMAKE_INSTALL_INCLUDEDIR}/gandiva)\n@@ -92,6 +93,8 @@ ADD_ARROW_LIB(gandiva\n   SHARED_PRIVATE_LINK_LIBS ${GANDIVA_SHARED_PRIVATE_LINK_LIBS}\n   STATIC_LINK_LIBS ${GANDIVA_STATIC_LINK_LIBS})\n \n+add_dependencies(gandiva ${GANDIVA_LIBRARIES})\n+\n # install for gandiva\n include(GNUInstallDirs)\n \n@@ -125,28 +128,62 @@ install(\n   FILES \"${CMAKE_CURRENT_BINARY_DIR}/gandiva.pc\"\n   DESTINATION \"${CMAKE_INSTALL_LIBDIR}/pkgconfig/\")\n \n+set(GANDIVA_STATIC_TEST_LINK_LIBS\n+  gandiva_static\n+  ${RE2_LIBRARY}\n+  ${ARROW_TEST_LINK_LIBS})\n+set(GANDIVA_SHARED_TEST_LINK_LIBS\n+  gandiva_shared\n+  ${RE2_LIBRARY}\n+  ${ARROW_TEST_LINK_LIBS})\n+\n+function(ADD_GANDIVA_TEST REL_TEST_NAME)\n+  set(options USE_STATIC_LINKING)\n+  set(one_value_args)\n+  set(multi_value_args)\n+  cmake_parse_arguments(ARG \"${options}\" \"${one_value_args}\" \"${multi_value_args}\" ${ARGN})\n+\n+  set(TEST_ARGUMENTS\n+    ENABLED\n+    PREFIX \"gandiva\"\n+    LABELS \"unittest;gandiva\"\n+    ${ARG_UNPARSED_ARGUMENTS})\n+\n+  # and uses less disk space, but in some cases we need to force static\n+  # linking (see rationale below).\n+  if (ARG_USE_STATIC_LINKING)\n+    ADD_ARROW_TEST(${REL_TEST_NAME}\n+      ${TEST_ARGUMENTS}\n+      STATIC_LINK_LIBS ${GANDIVA_STATIC_TEST_LINK_LIBS})\n+  else()\n+    ADD_ARROW_TEST(${REL_TEST_NAME}\n+      ${TEST_ARGUMENTS}\n+      STATIC_LINK_LIBS ${GANDIVA_SHARED_TEST_LINK_LIBS})\n+  endif()\n+\n+  if(${REL_TEST_NAME} MATCHES \"llvm\" OR\n+     ${REL_TEST_NAME} MATCHES \"expression_registry\")\n+    # If the unit test has llvm in its name, include llvm.\n+    add_dependencies(gandiva-${REL_TEST_NAME} LLVM::LLVM_INTERFACE)\n+    target_link_libraries(gandiva-${REL_TEST_NAME} PRIVATE LLVM::LLVM_INTERFACE)\n+  endif()\n+endfunction()\n+\n if (ARROW_GANDIVA_BUILD_TESTS)\n-  #args: label test-file src-files\n-  add_gandiva_unit_test(bitmap_accumulator_test.cc bitmap_accumulator.cc)\n-  add_gandiva_unit_test(engine_llvm_test.cc engine.cc llvm_types.cc configuration.cc\n-      gdv_function_stubs.cc context_helper.cc to_date_holder.cc date_utils.cc\n-      exported_funcs_registry.cc ${BC_FILE_PATH_CC})\n-  add_gandiva_unit_test(function_signature_test.cc function_signature.cc)\n-  add_gandiva_unit_test(function_registry_test.cc function_registry.cc function_signature.cc)\n-  add_gandiva_unit_test(llvm_types_test.cc llvm_types.cc)\n-  add_gandiva_unit_test(llvm_generator_test.cc llvm_generator.cc regex_util.cc engine.cc\n-      llvm_types.cc expr_decomposer.cc function_registry.cc annotator.cc\n-      bitmap_accumulator.cc configuration.cc  function_signature.cc like_holder.cc\n-      to_date_holder.cc date_utils.cc regex_util.cc gdv_function_stubs.cc context_helper.cc\n-      exported_funcs_registry.cc ${BC_FILE_PATH_CC})\n-  add_gandiva_unit_test(annotator_test.cc annotator.cc function_signature.cc)\n-  add_gandiva_unit_test(tree_expr_test.cc tree_expr_builder.cc expr_decomposer.cc annotator.cc function_registry.cc function_signature.cc like_holder.cc regex_util.cc to_date_holder.cc date_utils.cc)\n-  add_gandiva_unit_test(expr_decomposer_test.cc expr_decomposer.cc tree_expr_builder.cc annotator.cc function_registry.cc function_signature.cc like_holder.cc regex_util.cc to_date_holder.cc date_utils.cc)\n-  add_gandiva_unit_test(expression_registry_test.cc llvm_types.cc expression_registry.cc function_signature.cc function_registry.cc)\n-  add_gandiva_unit_test(selection_vector_test.cc selection_vector.cc)\n-  add_gandiva_unit_test(lru_cache_test.cc)\n-  add_gandiva_unit_test(to_date_holder_test.cc to_date_holder.cc date_utils.cc)\n-  add_gandiva_unit_test(simple_arena_test.cc)\n+  ADD_GANDIVA_TEST(bitmap_accumulator_test)\n+  ADD_GANDIVA_TEST(engine_llvm_test)\n+  ADD_GANDIVA_TEST(function_signature_test)\n+  ADD_GANDIVA_TEST(function_registry_test)\n+  ADD_GANDIVA_TEST(llvm_types_test)\n+  ADD_GANDIVA_TEST(llvm_generator_test)\n+  ADD_GANDIVA_TEST(annotator_test)\n+  ADD_GANDIVA_TEST(tree_expr_test)\n+  ADD_GANDIVA_TEST(expr_decomposer_test)\n+  ADD_GANDIVA_TEST(expression_registry_test)\n+  ADD_GANDIVA_TEST(selection_vector_test)\n+  ADD_GANDIVA_TEST(lru_cache_test)\n+  ADD_GANDIVA_TEST(to_date_holder_test)\n+  ADD_GANDIVA_TEST(simple_arena_test)\n endif()\n \n if (ARROW_GANDIVA_JAVA)\ndiff --git a/cpp/src/gandiva/jni/CMakeLists.txt b/cpp/src/gandiva/jni/CMakeLists.txt\nindex 8684fe8723..9f7bc526db 100644\n--- a/cpp/src/gandiva/jni/CMakeLists.txt\n+++ b/cpp/src/gandiva/jni/CMakeLists.txt\n@@ -61,6 +61,7 @@ set(GANDIVA_JNI_SOURCES config_builder.cc\n #   cpp/src\n ADD_ARROW_LIB(gandiva_jni\n   SOURCES ${GANDIVA_JNI_SOURCES}\n+  OUTPUTS GANDIVA_JNI_LIBRARIES\n   SHARED_PRIVATE_LINK_LIBS ${GANDIVA_LINK_LIBS}\n   STATIC_LINK_LIBS ${GANDIVA_LINK_LIBS}\n   DEPENDENCIES gandiva_java gandiva_jni_proto\n@@ -69,6 +70,8 @@ ADD_ARROW_LIB(gandiva_jni\n   ${JNI_HEADERS_DIR}\n   PRIVATE_INCLUDES ${JNI_INCLUDE_DIRS} ${CMAKE_CURRENT_BINARY_DIR})\n \n+add_dependencies(gandiva ${GANDIVA_JNI_LIBRARIES})\n+\n # filter out everything that is not needed for the jni bridge\n # statically linked stdc++ has conflicts with stdc++ loaded by other libraries.\n if (NOT APPLE)\ndiff --git a/cpp/src/gandiva/precompiled/CMakeLists.txt b/cpp/src/gandiva/precompiled/CMakeLists.txt\nindex 46e80d52dd..886fdced88 100644\n--- a/cpp/src/gandiva/precompiled/CMakeLists.txt\n+++ b/cpp/src/gandiva/precompiled/CMakeLists.txt\n@@ -51,6 +51,23 @@ add_custom_command(\n \n add_custom_target(precompiled ALL DEPENDS ${GANDIVA_BC_OUTPUT_PATH})\n \n+# Add a unittest executable for a precompiled file (used to generate IR)\n+function(add_precompiled_unit_test REL_TEST_NAME)\n+  get_filename_component(TEST_NAME ${REL_TEST_NAME} NAME_WE)\n+\n+  set(TEST_NAME \"gandiva-precompiled-${TEST_NAME}\")\n+\n+  add_executable(${TEST_NAME} ${REL_TEST_NAME} ${ARGN})\n+  add_dependencies(gandiva ${TEST_NAME})\n+  target_include_directories(${TEST_NAME} PRIVATE ${CMAKE_SOURCE_DIR}/src)\n+  target_link_libraries(${TEST_NAME}\n+    PRIVATE ${ARROW_TEST_LINK_LIBS} ${RE2_LIBRARY}\n+  )\n+  target_compile_definitions(${TEST_NAME} PRIVATE GANDIVA_UNIT_TEST=1)\n+  add_test(NAME ${TEST_NAME} COMMAND ${TEST_NAME})\n+  set_property(TEST ${TEST_NAME} PROPERTY LABELS gandiva;unittest ${TEST_NAME})\n+endfunction(add_precompiled_unit_test REL_TEST_NAME)\n+\n # testing\n if (ARROW_GANDIVA_BUILD_TESTS)\n   add_precompiled_unit_test(bitmap_test.cc bitmap.cc)\ndiff --git a/cpp/src/gandiva/tests/CMakeLists.txt b/cpp/src/gandiva/tests/CMakeLists.txt\nindex ae600634e7..1fd30aac49 100644\n--- a/cpp/src/gandiva/tests/CMakeLists.txt\n+++ b/cpp/src/gandiva/tests/CMakeLists.txt\n@@ -15,28 +15,23 @@\n # specific language governing permissions and limitations\n # under the License.\n \n-project(gandiva)\n+ADD_GANDIVA_TEST(filter_test)\n+ADD_GANDIVA_TEST(projector_test)\n+ADD_GANDIVA_TEST(projector_build_validation_test)\n+ADD_GANDIVA_TEST(if_expr_test)\n+ADD_GANDIVA_TEST(literal_test)\n+ADD_GANDIVA_TEST(boolean_expr_test)\n+ADD_GANDIVA_TEST(binary_test)\n+ADD_GANDIVA_TEST(date_time_test)\n+ADD_GANDIVA_TEST(to_string_test)\n+ADD_GANDIVA_TEST(hash_test)\n+ADD_GANDIVA_TEST(in_expr_test)\n+ADD_GANDIVA_TEST(null_validity_test)\n \n-foreach(lib_type \"shared\" \"static\")\n-  add_gandiva_integ_test(filter_test.cc gandiva_${lib_type})\n-  add_gandiva_integ_test(projector_test.cc gandiva_${lib_type})\n-  add_gandiva_integ_test(if_expr_test.cc gandiva_${lib_type})\n-  add_gandiva_integ_test(literal_test.cc gandiva_${lib_type})\n-  add_gandiva_integ_test(projector_build_validation_test.cc gandiva_${lib_type})\n-  add_gandiva_integ_test(boolean_expr_test.cc gandiva_${lib_type})\n-  add_gandiva_integ_test(utf8_test.cc gandiva_${lib_type})\n-  add_gandiva_integ_test(binary_test.cc gandiva_${lib_type})\n-  add_gandiva_integ_test(date_time_test.cc gandiva_${lib_type})\n-  add_gandiva_integ_test(to_string_test.cc gandiva_${lib_type})\n-  add_gandiva_integ_test(hash_test.cc gandiva_${lib_type})\n-  add_gandiva_integ_test(in_expr_test.cc gandiva_${lib_type})\n-  add_gandiva_integ_test(null_validity_test.cc gandiva_${lib_type})\n-endforeach(lib_type)\n-\n-set(GANDIVA_BENCHMARK_LINK_LIBRARIES\n-  gandiva_static\n-)\n+ADD_GANDIVA_TEST(projector_test_static\n+  SOURCES projector_test.cc\n+  USE_STATIC_LINKING)\n \n ADD_ARROW_BENCHMARK(micro_benchmarks\n   PREFIX \"gandiva\"\n-  EXTRA_LINK_LIBS ${GANDIVA_BENCHMARK_LINK_LIBRARIES})\n+  EXTRA_LINK_LIBS gandiva_static)\n\n\n \n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-12-05T17:33:59.333+0000",
                    "updated": "2018-12-05T17:33:59.333+0000",
                    "started": "2018-12-05T17:33:59.332+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "172407",
                    "issueId": "13189448"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
            "id": "4",
            "description": "An improvement or enhancement to an existing feature or task.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
            "name": "Improvement",
            "subtask": false,
            "avatarId": 21140
        },
        "timespent": 4200,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@51d96a9c[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@8007a73[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@4d1940d[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@f09b506[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@5cde9a56[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@76b45986[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@7ecddaa1[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@3caef1fb[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@140ac012[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@40a6d37c[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@50ae011b[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@1b4413dc[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 4200,
        "customfield_12312520": null,
        "customfield_12312521": "Wed Dec 05 17:33:47 UTC 2018",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2018-12-05T17:33:47.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-3441/watchers",
            "watchCount": 2,
            "isWatching": false
        },
        "created": "2018-10-04T14:55:40.000+0000",
        "updated": "2018-12-05T17:33:59.000+0000",
        "timeoriginalestimate": null,
        "description": "In ARROW-3254, I am adding the functionality to create test executables from multiple files that use googletest. So we can continue to have relatively small unit test files, but combine unit tests into groups of semantically-related functionality. ",
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "1h 10m",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 4200
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[Gandiva][C++] Produce fewer test executables",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13189448/comment/16641431",
                    "id": "16641431",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=pravindra",
                        "name": "pravindra",
                        "key": "pravindra",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34055",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34055",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34055",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34055"
                        },
                        "displayName": "Pindikura Ravindra",
                        "active": true,
                        "timeZone": "Asia/Kolkata"
                    },
                    "body": "Also, we are creating two sets of test executables for each test - one for static and one shared library. We should instead do :\r\n * build only executables for the shared library, by default\r\n * build only one or two test executables for the static library (micro_benchmarks, projector_test)",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=pravindra",
                        "name": "pravindra",
                        "key": "pravindra",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34055",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34055",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34055",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34055"
                        },
                        "displayName": "Pindikura Ravindra",
                        "active": true,
                        "timeZone": "Asia/Kolkata"
                    },
                    "created": "2018-10-08T06:55:59.822+0000",
                    "updated": "2018-10-08T06:55:59.822+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13189448/comment/16692340",
                    "id": "16692340",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "We can revisit this after ARROW-3254. Moved to 0.13",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2018-11-19T22:02:40.078+0000",
                    "updated": "2018-11-19T22:02:40.078+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13189448/comment/16710383",
                    "id": "16710383",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "Issue resolved by pull request 3091\n[https://github.com/apache/arrow/pull/3091]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2018-12-05T17:33:47.531+0000",
                    "updated": "2018-12-05T17:33:47.531+0000"
                }
            ],
            "maxResults": 3,
            "total": 3,
            "startAt": 0
        },
        "customfield_12311820": "0|i3yu1r:",
        "customfield_12314139": null
    }
}