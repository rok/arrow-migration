{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13097194",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13097194",
    "key": "ARROW-1409",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12341352",
                "id": "12341352",
                "name": "0.8.0",
                "archived": false,
                "released": true,
                "releaseDate": "2017-12-18"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "name": "Major",
            "id": "3"
        },
        "labels": [
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": null,
        "customfield_12312330": null,
        "versions": [],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
            "name": "wesm",
            "key": "wesmckinn",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
            },
            "displayName": "Wes McKinney",
            "active": true,
            "timeZone": "America/New_York"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12328932",
                "id": "12328932",
                "name": "Format"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": null,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
            "name": "wesm",
            "key": "wesmckinn",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
            },
            "displayName": "Wes McKinney",
            "active": true,
            "timeZone": "America/New_York"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
            "name": "wesm",
            "key": "wesmckinn",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
            },
            "displayName": "Wes McKinney",
            "active": true,
            "timeZone": "America/New_York"
        },
        "aggregateprogress": {
            "progress": 0,
            "total": 0
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 0,
            "total": 0
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-1409/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 0,
            "worklogs": []
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
            "id": "1",
            "description": "A problem which impairs or prevents the functions of the product.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
            "name": "Bug",
            "subtask": false,
            "avatarId": 21133
        },
        "timespent": null,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@53b437bb[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@6ab3d0f5[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@593ba66f[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@2dfbf1c5[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@6230d5d9[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@4bf37e81[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@4fffb14e[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@3d7804ad[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@598280c6[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@9d5fa01[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@3b924fb4[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@46327907[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": null,
        "customfield_12312520": null,
        "customfield_12312521": "Mon Oct 30 19:21:21 UTC 2017",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2017-10-30T19:00:16.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-1409/watchers",
            "watchCount": 2,
            "isWatching": false
        },
        "created": "2017-08-24T02:19:15.000+0000",
        "updated": "2017-10-30T19:21:21.000+0000",
        "timeoriginalestimate": null,
        "description": "This attribute is currently unused in any Arrow implementation. I think the original idea is that the \"page\" might indicate a particular shared memory page, so that a record batch could be spread across multiple memory regions.\n\nThe downside of this unused attribute is that Buffer metadata takes 24 bytes instead of 16 due to padding. ",
        "customfield_10010": null,
        "timetracking": {},
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[Format] Use for \"page\" attribute in Buffer in metadata",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13097194/comment/16213630",
                    "id": "16213630",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "GitHub user wesm opened a pull request:\n\n    https://github.com/apache/arrow/pull/1225\n\n    ARROW-1409: [Format] Remove page id from Buffer metadata, increment metadata version number\n\n    This is a breaking metadata change per discussion on the mailing list. I expect this kind of truly breaking changes to be exceedingly rare going forward, and when we make a 1.0.0 release we should document expectations around metadata / memory format stability. \r\n    \r\n    This could be made backwards compatible with some effort (we would have to add `RecordBatchV3` and `BufferV3` types). \n\nYou can merge this pull request into a Git repository by running:\n\n    $ git pull https://github.com/wesm/arrow ARROW-1409\n\nAlternatively you can review and apply these changes as the patch at:\n\n    https://github.com/apache/arrow/pull/1225.patch\n\nTo close this pull request, make a commit to your master/trunk branch\nwith (at least) the following in the commit message:\n\n    This closes #1225\n    \n----\ncommit c6fb115e75a452aa73478874013f691693c8c9ec\nAuthor: Wes McKinney <wes.mckinney@twosigma.com>\nDate:   2017-10-21T01:13:16Z\n\n    Remove page id from Buffer metadata, increment metadata version number\n    \n    Change-Id: I731fa4c54a597fa48eefe88fb47755077b159114\n\ncommit 316a50bd51c36cc84e6c691e72a31f4928316f2a\nAuthor: Wes McKinney <wes.mckinney@twosigma.com>\nDate:   2017-10-21T01:20:18Z\n\n    Bump metadata version in Java, add check for V4\n    \n    Change-Id: Ie41bf47bcc81f5f27dc441988aa19fc94e7bb047\n\n----\n",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2017-10-21T01:23:20.181+0000",
                    "updated": "2017-10-21T01:23:20.181+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13097194/comment/16215555",
                    "id": "16215555",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "wesm commented on issue #1225: ARROW-1409: [Format] Remove page id from Buffer metadata, increment metadata version number\nURL: https://github.com/apache/arrow/pull/1225#issuecomment-338748162\n \n \n   @trxcllnt @TheNeuralBit this patch change the Arrow binary format in a non-backwards compatible way. This is the peril of having binary files in the repo, and the sooner we can eradicate these from our development workflow, the better\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2017-10-23T18:11:41.475+0000",
                    "updated": "2017-10-23T18:11:41.475+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13097194/comment/16215866",
                    "id": "16215866",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "wesm commented on issue #1225: ARROW-1409: [Format] Remove page id from Buffer metadata, increment metadata version number\nURL: https://github.com/apache/arrow/pull/1225#issuecomment-338800008\n \n \n   How should we address the JS test failures?\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2017-10-23T21:19:41.158+0000",
                    "updated": "2017-10-23T21:19:41.158+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13097194/comment/16215925",
                    "id": "16215925",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "trxcllnt commented on issue #1225: ARROW-1409: [Format] Remove page id from Buffer metadata, increment metadata version number\nURL: https://github.com/apache/arrow/pull/1225#issuecomment-338809021\n \n \n   @wesm I think we should disable the JS tests in CI for now, then re-enable when the tests use the JSON->Arrow writer\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2017-10-23T21:57:54.155+0000",
                    "updated": "2017-10-23T21:57:54.155+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13097194/comment/16215931",
                    "id": "16215931",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "wesm commented on issue #1225: ARROW-1409: [Format] Remove page id from Buffer metadata, increment metadata version number\nURL: https://github.com/apache/arrow/pull/1225#issuecomment-338809456\n \n \n   OK, no problem\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2017-10-23T22:00:00.853+0000",
                    "updated": "2017-10-23T22:00:00.853+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13097194/comment/16217843",
                    "id": "16217843",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "BryanCutler commented on issue #1225: ARROW-1409: [Format] Remove page id from Buffer metadata, increment metadata version number\nURL: https://github.com/apache/arrow/pull/1225#issuecomment-339160655\n \n \n   +1\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2017-10-24T22:54:15.474+0000",
                    "updated": "2017-10-24T22:54:15.474+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13097194/comment/16221010",
                    "id": "16221010",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "wesm commented on issue #1225: ARROW-1409: [Format] Remove page id from Buffer metadata, increment metadata version number\nURL: https://github.com/apache/arrow/pull/1225#issuecomment-339764294\n \n \n   @jacques-n @siddharthteotia could you let me know if this change is OK? What impact will the 0.7.1 -> 0.8.0 upgrade with breaking metadata change have on Dremio?\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2017-10-26T18:54:46.568+0000",
                    "updated": "2017-10-26T18:54:46.568+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13097194/comment/16221024",
                    "id": "16221024",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "jacques-n commented on issue #1225: ARROW-1409: [Format] Remove page id from Buffer metadata, increment metadata version number\nURL: https://github.com/apache/arrow/pull/1225#issuecomment-339765464\n \n \n   As far as I know, we don't persist this data (ephemeral only) so I think we'll be fine. @StevenMPhillips, you see any problems we'll hit with this change?\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2017-10-26T18:58:43.252+0000",
                    "updated": "2017-10-26T18:58:43.252+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13097194/comment/16225057",
                    "id": "16225057",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "wesm commented on issue #1225: ARROW-1409: [Format] Remove page id from Buffer metadata, increment metadata version number\nURL: https://github.com/apache/arrow/pull/1225#issuecomment-340468033\n \n \n   @StevenMPhillips could you comment? I will merge this sometime today if I don't hear back, hopefully it will be OK\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2017-10-30T14:51:14.311+0000",
                    "updated": "2017-10-30T14:51:14.311+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13097194/comment/16225546",
                    "id": "16225546",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "StevenMPhillips commented on issue #1225: ARROW-1409: [Format] Remove page id from Buffer metadata, increment metadata version number\nURL: https://github.com/apache/arrow/pull/1225#issuecomment-340549310\n \n \n   Yes, it should be fine to merge this. Jacques is correct that we don't persist this data.\r\n   +1\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2017-10-30T18:57:55.946+0000",
                    "updated": "2017-10-30T18:57:55.946+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13097194/comment/16225547",
                    "id": "16225547",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "wesm commented on issue #1225: ARROW-1409: [Format] Remove page id from Buffer metadata, increment metadata version number\nURL: https://github.com/apache/arrow/pull/1225#issuecomment-340549414\n \n \n   sweet, thanks!\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2017-10-30T18:58:19.461+0000",
                    "updated": "2017-10-30T18:58:19.461+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13097194/comment/16225548",
                    "id": "16225548",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "wesm commented on issue #1225: ARROW-1409: [Format] Remove page id from Buffer metadata, increment metadata version number\nURL: https://github.com/apache/arrow/pull/1225#issuecomment-340549734\n \n \n   @BryanCutler @icexelloss @holdenk just a heads up that this patch means that Spark will need to upgrade to Arrow 0.8.0 as soon as pyarrow 0.8.0 lands\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2017-10-30T18:59:31.359+0000",
                    "updated": "2017-10-30T18:59:31.359+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13097194/comment/16225550",
                    "id": "16225550",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "Issue resolved by pull request 1225\n[https://github.com/apache/arrow/pull/1225]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2017-10-30T19:00:16.666+0000",
                    "updated": "2017-10-30T19:00:16.666+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13097194/comment/16225551",
                    "id": "16225551",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "wesm closed pull request #1225: ARROW-1409: [Format] Remove page id from Buffer metadata, increment metadata version number\nURL: https://github.com/apache/arrow/pull/1225\n \n \n   \n\nThis is a PR merged from a forked repository.\nAs GitHub hides the original diff on merge, it is displayed below for\nthe sake of provenance:\n\nAs this is a foreign pull request (from a fork), the diff is supplied\nbelow (as it won't show otherwise due to GitHub magic):\n\ndiff --git a/.travis.yml b/.travis.yml\nindex c682a9d9d..e752c9acc 100644\n--- a/.travis.yml\n+++ b/.travis.yml\n@@ -110,13 +110,14 @@ matrix:\n     - $TRAVIS_BUILD_DIR/ci/travis_before_script_cpp.sh\n     script:\n     - $TRAVIS_BUILD_DIR/ci/travis_script_integration.sh\n-  - language: node_js\n-    os: linux\n-    node_js: node\n-    before_script:\n-    - $TRAVIS_BUILD_DIR/ci/travis_before_script_js.sh\n-    script:\n-    - $TRAVIS_BUILD_DIR/ci/travis_script_js.sh\n+  # TODO(wesm): Re-enable after issues in ARROW-1409 resolved\n+  # - language: node_js\n+  #   os: linux\n+  #   node_js: node\n+  #   before_script:\n+  #   - $TRAVIS_BUILD_DIR/ci/travis_before_script_js.sh\n+  #   script:\n+  #   - $TRAVIS_BUILD_DIR/ci/travis_script_js.sh\n   - compiler: gcc\n     language: cpp\n     os: linux\ndiff --git a/cpp/src/arrow/ipc/ipc-read-write-test.cc b/cpp/src/arrow/ipc/ipc-read-write-test.cc\nindex adf34a9eb..6f2f5cf85 100644\n--- a/cpp/src/arrow/ipc/ipc-read-write-test.cc\n+++ b/cpp/src/arrow/ipc/ipc-read-write-test.cc\n@@ -243,7 +243,7 @@ TEST_F(TestIpcRoundTrip, MetadataVersion) {\n   std::unique_ptr<Message> message;\n   ASSERT_OK(ReadMessage(0, metadata_length, mmap_.get(), &message));\n \n-  ASSERT_EQ(MetadataVersion::V3, message->metadata_version());\n+  ASSERT_EQ(MetadataVersion::V4, message->metadata_version());\n }\n \n TEST_P(TestIpcRoundTrip, SliceRoundTrip) {\ndiff --git a/cpp/src/arrow/ipc/message.cc b/cpp/src/arrow/ipc/message.cc\nindex 0dd5c72e5..21d6a69a2 100644\n--- a/cpp/src/arrow/ipc/message.cc\n+++ b/cpp/src/arrow/ipc/message.cc\n@@ -67,20 +67,7 @@ class Message::MessageImpl {\n   }\n \n   MetadataVersion version() const {\n-    switch (message_->version()) {\n-      case flatbuf::MetadataVersion_V1:\n-        // Arrow 0.1\n-        return MetadataVersion::V1;\n-      case flatbuf::MetadataVersion_V2:\n-        // Arrow 0.2\n-        return MetadataVersion::V2;\n-      case flatbuf::MetadataVersion_V3:\n-        // Arrow >= 0.3\n-        return MetadataVersion::V3;\n-      // Add cases as other versions become available\n-      default:\n-        return MetadataVersion::V3;\n-    }\n+    return internal::GetMetadataVersion(message_->version());\n   }\n \n   const void* header() const { return message_->header(); }\ndiff --git a/cpp/src/arrow/ipc/message.h b/cpp/src/arrow/ipc/message.h\nindex 67a95c7d2..ba9dece4c 100644\n--- a/cpp/src/arrow/ipc/message.h\n+++ b/cpp/src/arrow/ipc/message.h\n@@ -42,7 +42,19 @@ class RandomAccessFile;\n \n namespace ipc {\n \n-enum class MetadataVersion : char { V1, V2, V3 };\n+enum class MetadataVersion : char {\n+  /// 0.1.0\n+  V1,\n+\n+  /// 0.2.0\n+  V2,\n+\n+  /// 0.3.0 to 0.7.1\n+  V3,\n+\n+  /// >= 0.8.0\n+  V4\n+};\n \n // ARROW-109: We set this number arbitrarily to help catch user mistakes. For\n // deeply nested schemas, it is expected the user will indicate explicitly the\ndiff --git a/cpp/src/arrow/ipc/metadata-internal.cc b/cpp/src/arrow/ipc/metadata-internal.cc\nindex ad00cfb6c..f04e9b05a 100644\n--- a/cpp/src/arrow/ipc/metadata-internal.cc\n+++ b/cpp/src/arrow/ipc/metadata-internal.cc\n@@ -33,6 +33,7 @@\n #include \"arrow/ipc/Message_generated.h\"\n #include \"arrow/ipc/Tensor_generated.h\"\n #include \"arrow/ipc/dictionary.h\"\n+#include \"arrow/ipc/message.h\"\n #include \"arrow/ipc/util.h\"\n #include \"arrow/status.h\"\n #include \"arrow/tensor.h\"\n@@ -57,6 +58,26 @@ using VectorLayoutOffset = flatbuffers::Offset<arrow::flatbuf::VectorLayout>;\n using Offset = flatbuffers::Offset<void>;\n using FBString = flatbuffers::Offset<flatbuffers::String>;\n \n+MetadataVersion GetMetadataVersion(flatbuf::MetadataVersion version) {\n+  switch (version) {\n+    case flatbuf::MetadataVersion_V1:\n+      // Arrow 0.1\n+      return MetadataVersion::V1;\n+    case flatbuf::MetadataVersion_V2:\n+      // Arrow 0.2\n+      return MetadataVersion::V2;\n+    case flatbuf::MetadataVersion_V3:\n+      // Arrow 0.3 to 0.7.1\n+      return MetadataVersion::V4;\n+    case flatbuf::MetadataVersion_V4:\n+      // Arrow >= 0.8\n+      return MetadataVersion::V4;\n+      // Add cases as other versions become available\n+    default:\n+      return MetadataVersion::V4;\n+  }\n+}\n+\n static Status IntFromFlatbuffer(const flatbuf::Int* int_data,\n                                 std::shared_ptr<DataType>* out) {\n   if (int_data->bitWidth() > 64) {\n@@ -700,7 +721,7 @@ static Status WriteBuffers(FBB& fbb, const std::vector<BufferMetadata>& buffers,\n \n   for (size_t i = 0; i < buffers.size(); ++i) {\n     const BufferMetadata& buffer = buffers[i];\n-    fb_buffers.emplace_back(buffer.page, buffer.offset, buffer.length);\n+    fb_buffers.emplace_back(buffer.offset, buffer.length);\n   }\n   *out = fbb.CreateVectorOfStructs(fb_buffers);\n   return Status::OK();\n@@ -751,7 +772,7 @@ Status WriteTensorMessage(const Tensor& tensor, int64_t buffer_start_offset,\n   auto fb_shape = fbb.CreateVector(dims);\n   auto fb_strides = fbb.CreateVector(tensor.strides());\n   int64_t body_length = tensor.data()->size();\n-  flatbuf::Buffer buffer(-1, buffer_start_offset, body_length);\n+  flatbuf::Buffer buffer(buffer_start_offset, body_length);\n \n   TensorOffset fb_tensor =\n       flatbuf::CreateTensor(fbb, fb_type_type, fb_type, fb_shape, fb_strides, &buffer);\ndiff --git a/cpp/src/arrow/ipc/metadata-internal.h b/cpp/src/arrow/ipc/metadata-internal.h\nindex 309e7587a..380f3c9eb 100644\n--- a/cpp/src/arrow/ipc/metadata-internal.h\n+++ b/cpp/src/arrow/ipc/metadata-internal.h\n@@ -27,6 +27,7 @@\n \n #include \"arrow/ipc/Schema_generated.h\"\n #include \"arrow/ipc/dictionary.h\"\n+#include \"arrow/ipc/message.h\"\n \n namespace arrow {\n \n@@ -48,10 +49,12 @@ namespace ipc {\n namespace internal {\n \n static constexpr flatbuf::MetadataVersion kCurrentMetadataVersion =\n-    flatbuf::MetadataVersion_V3;\n+    flatbuf::MetadataVersion_V4;\n \n static constexpr flatbuf::MetadataVersion kMinMetadataVersion =\n-    flatbuf::MetadataVersion_V3;\n+    flatbuf::MetadataVersion_V4;\n+\n+MetadataVersion GetMetadataVersion(flatbuf::MetadataVersion version);\n \n static constexpr const char* kArrowMagicBytes = \"ARROW1\";\n \n@@ -62,9 +65,6 @@ struct FieldMetadata {\n };\n \n struct BufferMetadata {\n-  /// The shared memory page id where to find this. Set to -1 if unused\n-  int32_t page;\n-\n   /// The relative offset into the memory page to the starting byte of the buffer\n   int64_t offset;\n \ndiff --git a/cpp/src/arrow/ipc/reader.cc b/cpp/src/arrow/ipc/reader.cc\nindex 50eb9039c..8e10d7d66 100644\n--- a/cpp/src/arrow/ipc/reader.cc\n+++ b/cpp/src/arrow/ipc/reader.cc\n@@ -550,20 +550,7 @@ class RecordBatchFileReader::RecordBatchFileReaderImpl {\n   int num_record_batches() const { return footer_->recordBatches()->size(); }\n \n   MetadataVersion version() const {\n-    switch (footer_->version()) {\n-      case flatbuf::MetadataVersion_V1:\n-        // Arrow 0.1\n-        return MetadataVersion::V1;\n-      case flatbuf::MetadataVersion_V2:\n-        // Arrow 0.2\n-        return MetadataVersion::V2;\n-      case flatbuf::MetadataVersion_V3:\n-        // Arrow 0.3\n-        return MetadataVersion::V3;\n-      // Add cases as other versions become available\n-      default:\n-        return MetadataVersion::V3;\n-    }\n+    return internal::GetMetadataVersion(footer_->version());\n   }\n \n   FileBlock record_batch(int i) const {\ndiff --git a/cpp/src/arrow/ipc/writer.cc b/cpp/src/arrow/ipc/writer.cc\nindex 279a69544..5598cc682 100644\n--- a/cpp/src/arrow/ipc/writer.cc\n+++ b/cpp/src/arrow/ipc/writer.cc\n@@ -149,8 +149,6 @@ class RecordBatchSerializer : public ArrayVisitor {\n \n     buffer_meta_.reserve(buffers_.size());\n \n-    const int32_t kNoPageId = -1;\n-\n     // Construct the buffer metadata for the record batch header\n     for (size_t i = 0; i < buffers_.size(); ++i) {\n       const Buffer* buffer = buffers_[i].get();\n@@ -163,15 +161,7 @@ class RecordBatchSerializer : public ArrayVisitor {\n         padding = BitUtil::RoundUpToMultipleOf8(size) - size;\n       }\n \n-      // TODO(wesm): We currently have no notion of shared memory page id's,\n-      // but we've included it in the metadata IDL for when we have it in the\n-      // future. Use page = -1 for now\n-      //\n-      // Note that page ids are a bespoke notion for Arrow and not a feature we\n-      // are using from any OS-level shared memory. The thought is that systems\n-      // may (in the future) associate integer page id's with physical memory\n-      // pages (according to whatever is the desired shared memory mechanism)\n-      buffer_meta_.push_back({kNoPageId, offset, size + padding});\n+      buffer_meta_.push_back({offset, size + padding});\n       offset += size + padding;\n     }\n \ndiff --git a/format/Schema.fbs b/format/Schema.fbs\nindex 186f8e362..6021e92b8 100644\n--- a/format/Schema.fbs\n+++ b/format/Schema.fbs\n@@ -20,9 +20,17 @@\n namespace org.apache.arrow.flatbuf;\n \n enum MetadataVersion:short {\n+  /// 0.1.0\n   V1,\n+\n+  /// 0.2.0\n   V2,\n-  V3\n+\n+  /// 0.3.0 -> 0.7.1\n+  V3,\n+\n+  /// >= 0.8.0\n+  V4\n }\n \n /// These are stored in the flatbuffer in the Type union below\n@@ -293,10 +301,6 @@ enum Endianness:short { Little, Big }\n /// ----------------------------------------------------------------------\n /// A Buffer represents a single contiguous memory segment\n struct Buffer {\n-  /// The shared memory page id where this buffer is located. Currently this is\n-  /// not used\n-  page: int;\n-\n   /// The relative offset into the shared memory page where the bytes for this\n   /// buffer starts\n   offset: long;\ndiff --git a/java/vector/src/main/java/org/apache/arrow/vector/schema/ArrowBuffer.java b/java/vector/src/main/java/org/apache/arrow/vector/schema/ArrowBuffer.java\nindex d8c9e3001..4e0187e79 100644\n--- a/java/vector/src/main/java/org/apache/arrow/vector/schema/ArrowBuffer.java\n+++ b/java/vector/src/main/java/org/apache/arrow/vector/schema/ArrowBuffer.java\n@@ -24,21 +24,15 @@\n \n public class ArrowBuffer implements FBSerializable {\n \n-  private int page;\n   private long offset;\n   private long size;\n \n-  public ArrowBuffer(int page, long offset, long size) {\n+  public ArrowBuffer(long offset, long size) {\n     super();\n-    this.page = page;\n     this.offset = offset;\n     this.size = size;\n   }\n \n-  public int getPage() {\n-    return page;\n-  }\n-\n   public long getOffset() {\n     return offset;\n   }\n@@ -52,7 +46,6 @@ public int hashCode() {\n     final int prime = 31;\n     int result = 1;\n     result = prime * result + (int) (offset ^ (offset >>> 32));\n-    result = prime * result + page;\n     result = prime * result + (int) (size ^ (size >>> 32));\n     return result;\n   }\n@@ -72,9 +65,6 @@ public boolean equals(Object obj) {\n     if (offset != other.offset) {\n       return false;\n     }\n-    if (page != other.page) {\n-      return false;\n-    }\n     if (size != other.size) {\n       return false;\n     }\n@@ -83,12 +73,12 @@ public boolean equals(Object obj) {\n \n   @Override\n   public int writeTo(FlatBufferBuilder builder) {\n-    return Buffer.createBuffer(builder, page, offset, size);\n+    return Buffer.createBuffer(builder, offset, size);\n   }\n \n   @Override\n   public String toString() {\n-    return \"ArrowBuffer [page=\" + page + \", offset=\" + offset + \", size=\" + size + \"]\";\n+    return \"ArrowBuffer [offset=\" + offset + \", size=\" + size + \"]\";\n   }\n \n }\ndiff --git a/java/vector/src/main/java/org/apache/arrow/vector/schema/ArrowRecordBatch.java b/java/vector/src/main/java/org/apache/arrow/vector/schema/ArrowRecordBatch.java\nindex c842d4c3f..bf0967a27 100644\n--- a/java/vector/src/main/java/org/apache/arrow/vector/schema/ArrowRecordBatch.java\n+++ b/java/vector/src/main/java/org/apache/arrow/vector/schema/ArrowRecordBatch.java\n@@ -72,7 +72,7 @@ public ArrowRecordBatch(int length, List<ArrowFieldNode> nodes, List<ArrowBuf> b\n     for (ArrowBuf arrowBuf : buffers) {\n       arrowBuf.retain();\n       long size = arrowBuf.readableBytes();\n-      arrowBuffers.add(new ArrowBuffer(0, offset, size));\n+      arrowBuffers.add(new ArrowBuffer(offset, size));\n       LOGGER.debug(String.format(\"Buffer in RecordBatch at %d, length: %d\", offset, size));\n       offset += size;\n       if (alignBuffers && offset % 8 != 0) { // align on 8 byte boundaries\ndiff --git a/java/vector/src/main/java/org/apache/arrow/vector/stream/MessageSerializer.java b/java/vector/src/main/java/org/apache/arrow/vector/stream/MessageSerializer.java\nindex f69aa41e7..c397cec72 100644\n--- a/java/vector/src/main/java/org/apache/arrow/vector/stream/MessageSerializer.java\n+++ b/java/vector/src/main/java/org/apache/arrow/vector/stream/MessageSerializer.java\n@@ -385,6 +385,10 @@ public static ArrowMessage deserializeMessageBatch(ReadChannel in, BufferAllocat\n       throw new IOException(\"Cannot currently deserialize record batches over 2GB\");\n     }\n \n+    if (message.version() != MetadataVersion.V4) {\n+      throw new IOException(\"Received metadata with an incompatible version number\");\n+    }\n+\n     switch (message.headerType()) {\n       case MessageHeader.RecordBatch:\n         return deserializeRecordBatch(in, message, alloc);\n@@ -409,7 +413,7 @@ public static ByteBuffer serializeMessage(FlatBufferBuilder builder, byte header\n     Message.startMessage(builder);\n     Message.addHeaderType(builder, headerType);\n     Message.addHeader(builder, headerOffset);\n-    Message.addVersion(builder, MetadataVersion.V3);\n+    Message.addVersion(builder, MetadataVersion.V4);\n     Message.addBodyLength(builder, bodyLength);\n     builder.finish(Message.endMessage(builder));\n     return builder.dataBuffer();\ndiff --git a/js/src/format/Schema_generated.ts b/js/src/format/Schema_generated.ts\nindex 65493b7f6..c5b3e5011 100644\n--- a/js/src/format/Schema_generated.ts\n+++ b/js/src/format/Schema_generated.ts\n@@ -2028,23 +2028,13 @@ export namespace org.apache.arrow.flatbuf {\n     }\n \n     /**\n-     * The shared memory page id where this buffer is located. Currently this is\n-     * not used\n-     *\n-     * @returns {number}\n-     */\n-    page(): number {\n-      return this.bb.readInt32(this.bb_pos);\n-    }\n-\n-    /**\n      * The relative offset into the shared memory page where the bytes for this\n      * buffer starts\n      *\n      * @returns {flatbuffers.Long}\n      */\n     offset(): flatbuffers.Long {\n-      return this.bb.readInt64(this.bb_pos + 8);\n+      return this.bb.readInt64(this.bb_pos);\n     }\n \n     /**\n@@ -2054,7 +2044,7 @@ export namespace org.apache.arrow.flatbuf {\n      * @returns {flatbuffers.Long}\n      */\n     length(): flatbuffers.Long {\n-      return this.bb.readInt64(this.bb_pos + 16);\n+      return this.bb.readInt64(this.bb_pos + 8);\n     }\n \n     /**\n@@ -2064,12 +2054,10 @@ export namespace org.apache.arrow.flatbuf {\n      * @param {flatbuffers.Long} length\n      * @returns {flatbuffers.Offset}\n      */\n-    static createBuffer(builder: flatbuffers.Builder, page: number, offset: flatbuffers.Long, length: flatbuffers.Long): flatbuffers.Offset {\n-      builder.prep(8, 24);\n+    static createBuffer(builder: flatbuffers.Builder, offset: flatbuffers.Long, length: flatbuffers.Long): flatbuffers.Offset {\n+      builder.prep(8, 16);\n       builder.writeInt64(length);\n       builder.writeInt64(offset);\n-      builder.pad(4);\n-      builder.writeInt32(page);\n       return builder.offset();\n     }\n \n\n\n \n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2017-10-30T19:00:18.523+0000",
                    "updated": "2017-10-30T19:00:18.523+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13097194/comment/16225553",
                    "id": "16225553",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "holdenk commented on issue #1225: ARROW-1409: [Format] Remove page id from Buffer metadata, increment metadata version number\nURL: https://github.com/apache/arrow/pull/1225#issuecomment-340550462\n \n \n   Since we don\u2019t persist it though is that really necessary? I think it\u2019s still a good idea to upgrade, but our Jenkins infra still has some difficulty with changing Python library versions so it might take a little bit.\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2017-10-30T19:02:01.391+0000",
                    "updated": "2017-10-30T19:02:01.391+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13097194/comment/16225596",
                    "id": "16225596",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "wesm commented on issue #1225: ARROW-1409: [Format] Remove page id from Buffer metadata, increment metadata version number\nURL: https://github.com/apache/arrow/pull/1225#issuecomment-340555574\n \n \n   As long as the JAR version and the Python version are the same, it's okay, but if users have pyarrow 0.8.0 and connect to a Spark cluster running an older JAR there will be problems. I don't expect this to become a regular occurrence -- I don't anticipate the need to break the metadata format again anytime soon \n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2017-10-30T19:21:21.775+0000",
                    "updated": "2017-10-30T19:21:21.775+0000"
                }
            ],
            "maxResults": 16,
            "total": 16,
            "startAt": 0
        },
        "customfield_12311820": "0|i3j7xr:",
        "customfield_12314139": null
    }
}