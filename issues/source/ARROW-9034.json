{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13309466",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13309466",
    "key": "ARROW-9034",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12347769",
                "id": "12347769",
                "description": "",
                "name": "1.0.0",
                "archived": false,
                "released": true,
                "releaseDate": "2020-07-24"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "name": "Major",
            "id": "3"
        },
        "labels": [
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
            "name": "wesm",
            "key": "wesmckinn",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
            },
            "displayName": "Wes McKinney",
            "active": true,
            "timeZone": "America/New_York"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12328935",
                "id": "12328935",
                "name": "C++"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
            "name": "wesm",
            "key": "wesmckinn",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
            },
            "displayName": "Wes McKinney",
            "active": true,
            "timeZone": "America/New_York"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
            "name": "wesm",
            "key": "wesmckinn",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
            },
            "displayName": "Wes McKinney",
            "active": true,
            "timeZone": "America/New_York"
        },
        "aggregateprogress": {
            "progress": 9600,
            "total": 9600,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 9600,
            "total": 9600,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-9034/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 16,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13309466/worklog/441848",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm opened a new pull request #7356:\nURL: https://github.com/apache/arrow/pull/7356\n\n\n   BinaryBitBlockCounter computes the popcount of the bitwise-and of each corresponding bit-run (with target of 64 bits at a time) of two bitmaps. This permits iterating through two validity bitmaps that don't have a lot of nulls much more quickly than using two BitmapReaders.\r\n   \r\n   I also added an inline-able BitBlockCounter::NextWordInline for 64-bits at a time for a single bitmap. It seems like this may be preferable to the four word version. Now we have `NextWord` and `NextFourWords` so the developer can choose either variant. \r\n   \r\n   Benchmarks and tests covering all this are included. I'll post the benchmarks on my machine as a comment.\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-06-05T14:53:09.779+0000",
                    "updated": "2020-06-05T14:53:09.779+0000",
                    "started": "2020-06-05T14:53:09.779+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "441848",
                    "issueId": "13309466"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13309466/worklog/441853",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on pull request #7356:\nURL: https://github.com/apache/arrow/pull/7356#issuecomment-639547819\n\n\n   Benchmarks\r\n   \r\n   ```\r\n   BitBlockCounterSum/8                           1687631 ns    1687634 ns        407   592.545M items/s\r\n   BitBlockCounterSum/64                           730805 ns     730798 ns        970    1.3363G items/s\r\n   BitBlockCounterSum/512                          179964 ns     179949 ns       3923   5.42689G items/s\r\n   BitBlockCounterSum/4096                          75167 ns      75165 ns       9461   12.9922G items/s\r\n   BitBlockCounterSum/32768                         58679 ns      58679 ns      12065   16.6425G items/s\r\n   BitBlockCounterSum/65536                         57921 ns      57922 ns      12311     16.86G items/s\r\n   BitBlockCounterSumWithOffset/8                 1672146 ns    1672131 ns        419   598.039M items/s\r\n   BitBlockCounterSumWithOffset/64                 735521 ns     735515 ns        944   1.32773G items/s\r\n   BitBlockCounterSumWithOffset/512                186470 ns     186468 ns       3782   5.23716G items/s\r\n   BitBlockCounterSumWithOffset/4096                82928 ns      82928 ns       8544    11.776G items/s\r\n   BitBlockCounterSumWithOffset/32768               66855 ns      66855 ns      10402   14.6072G items/s\r\n   BitBlockCounterSumWithOffset/65536               66821 ns      66822 ns      10131   14.6145G items/s\r\n   BitBlockCounterInlineSum/8                     1563707 ns    1563716 ns        448   639.502M items/s\r\n   BitBlockCounterInlineSum/64                     596145 ns     596143 ns       1166   1.63813G items/s\r\n   BitBlockCounterInlineSum/512                    122461 ns     122461 ns       5554    7.9745G items/s\r\n   BitBlockCounterInlineSum/4096                    30327 ns      30327 ns      22765   32.2007G items/s\r\n   BitBlockCounterInlineSum/32768                   16484 ns      16484 ns      40881   59.2429G items/s\r\n   BitBlockCounterInlineSum/65536                   16145 ns      16145 ns      43742   60.4885G items/s\r\n   BitBlockCounterInlineSumWithOffset/8           1577564 ns    1577548 ns        441   633.895M items/s\r\n   BitBlockCounterInlineSumWithOffset/64           609330 ns     609319 ns       1091   1.60271G items/s\r\n   BitBlockCounterInlineSumWithOffset/512          126930 ns     126931 ns       5580   7.69365G items/s\r\n   BitBlockCounterInlineSumWithOffset/4096          33720 ns      33720 ns      20848   28.9608G items/s\r\n   BitBlockCounterInlineSumWithOffset/32768         20190 ns      20190 ns      34575   48.3693G items/s\r\n   BitBlockCounterInlineSumWithOffset/65536         19914 ns      19914 ns      35329   49.0382G items/s\r\n   BitBlockCounterFourWordsSum/8                  1557230 ns    1557208 ns        456   642.175M items/s\r\n   BitBlockCounterFourWordsSum/64                  755518 ns     755523 ns        936   1.29257G items/s\r\n   BitBlockCounterFourWordsSum/512                 314926 ns     314928 ns       2237   3.10091G items/s\r\n   BitBlockCounterFourWordsSum/4096                 62012 ns      62011 ns      10790   15.7483G items/s\r\n   BitBlockCounterFourWordsSum/32768                18307 ns      18307 ns      38225   53.3436G items/s\r\n   BitBlockCounterFourWordsSum/65536                16755 ns      16755 ns      42106   58.2835G items/s\r\n   BitBlockCounterFourWordsSumWithOffset/8        1554037 ns    1554017 ns        455   643.494M items/s\r\n   BitBlockCounterFourWordsSumWithOffset/64        771938 ns     771925 ns        878    1.2651G items/s\r\n   BitBlockCounterFourWordsSumWithOffset/512       311751 ns     311753 ns       2200   3.13249G items/s\r\n   BitBlockCounterFourWordsSumWithOffset/4096       65821 ns      65821 ns      10635   14.8366G items/s\r\n   BitBlockCounterFourWordsSumWithOffset/32768      21528 ns      21528 ns      32434    45.362G items/s\r\n   BitBlockCounterFourWordsSumWithOffset/65536      20499 ns      20499 ns      35251   47.6401G items/s\r\n   BinaryBitBlockCounterSum/8                     1369784 ns    1369771 ns        529   730.048M items/s\r\n   BinaryBitBlockCounterSum/64                      75780 ns      75780 ns       9360   12.8867G items/s\r\n   BinaryBitBlockCounterSum/512                     56490 ns      56491 ns      12401   17.2871G items/s\r\n   BinaryBitBlockCounterSum/4096                    55213 ns      55213 ns      12094   17.6871G items/s\r\n   BinaryBitBlockCounterSum/32768                   56260 ns      56260 ns      12740    17.358G items/s\r\n   BinaryBitBlockCounterSum/65536                   57650 ns      57650 ns      12731   16.9394G items/s\r\n   BinaryBitBlockCounterSumWithOffset/8           1433256 ns    1433222 ns        479   697.728M items/s\r\n   BinaryBitBlockCounterSumWithOffset/64            96996 ns      96996 ns       7346    10.068G items/s\r\n   BinaryBitBlockCounterSumWithOffset/512           75189 ns      75188 ns       9420   12.9882G items/s\r\n   BinaryBitBlockCounterSumWithOffset/4096          74190 ns      74191 ns       9414   13.1628G items/s\r\n   BinaryBitBlockCounterSumWithOffset/32768         74885 ns      74885 ns       9362   13.0409G items/s\r\n   BinaryBitBlockCounterSumWithOffset/65536         74462 ns      74462 ns       9425   13.1148G items/s\r\n   ```\r\n   \r\n   I'm surprised that the binary sum (BinaryBitBlockCounterSum) seems faster than the unary sum (BitBlockCounterSum). I'm going to scrutinize the benchmark to check whether I've implemented something incorrectly. \n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-06-05T14:57:51.161+0000",
                    "updated": "2020-06-05T14:57:51.161+0000",
                    "started": "2020-06-05T14:57:51.161+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "441853",
                    "issueId": "13309466"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13309466/worklog/441859",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm removed a comment on pull request #7356:\nURL: https://github.com/apache/arrow/pull/7356#issuecomment-639547819\n\n\n   Benchmarks\r\n   \r\n   ```\r\n   BitBlockCounterSum/8                           1687631 ns    1687634 ns        407   592.545M items/s\r\n   BitBlockCounterSum/64                           730805 ns     730798 ns        970    1.3363G items/s\r\n   BitBlockCounterSum/512                          179964 ns     179949 ns       3923   5.42689G items/s\r\n   BitBlockCounterSum/4096                          75167 ns      75165 ns       9461   12.9922G items/s\r\n   BitBlockCounterSum/32768                         58679 ns      58679 ns      12065   16.6425G items/s\r\n   BitBlockCounterSum/65536                         57921 ns      57922 ns      12311     16.86G items/s\r\n   BitBlockCounterSumWithOffset/8                 1672146 ns    1672131 ns        419   598.039M items/s\r\n   BitBlockCounterSumWithOffset/64                 735521 ns     735515 ns        944   1.32773G items/s\r\n   BitBlockCounterSumWithOffset/512                186470 ns     186468 ns       3782   5.23716G items/s\r\n   BitBlockCounterSumWithOffset/4096                82928 ns      82928 ns       8544    11.776G items/s\r\n   BitBlockCounterSumWithOffset/32768               66855 ns      66855 ns      10402   14.6072G items/s\r\n   BitBlockCounterSumWithOffset/65536               66821 ns      66822 ns      10131   14.6145G items/s\r\n   BitBlockCounterInlineSum/8                     1563707 ns    1563716 ns        448   639.502M items/s\r\n   BitBlockCounterInlineSum/64                     596145 ns     596143 ns       1166   1.63813G items/s\r\n   BitBlockCounterInlineSum/512                    122461 ns     122461 ns       5554    7.9745G items/s\r\n   BitBlockCounterInlineSum/4096                    30327 ns      30327 ns      22765   32.2007G items/s\r\n   BitBlockCounterInlineSum/32768                   16484 ns      16484 ns      40881   59.2429G items/s\r\n   BitBlockCounterInlineSum/65536                   16145 ns      16145 ns      43742   60.4885G items/s\r\n   BitBlockCounterInlineSumWithOffset/8           1577564 ns    1577548 ns        441   633.895M items/s\r\n   BitBlockCounterInlineSumWithOffset/64           609330 ns     609319 ns       1091   1.60271G items/s\r\n   BitBlockCounterInlineSumWithOffset/512          126930 ns     126931 ns       5580   7.69365G items/s\r\n   BitBlockCounterInlineSumWithOffset/4096          33720 ns      33720 ns      20848   28.9608G items/s\r\n   BitBlockCounterInlineSumWithOffset/32768         20190 ns      20190 ns      34575   48.3693G items/s\r\n   BitBlockCounterInlineSumWithOffset/65536         19914 ns      19914 ns      35329   49.0382G items/s\r\n   BitBlockCounterFourWordsSum/8                  1557230 ns    1557208 ns        456   642.175M items/s\r\n   BitBlockCounterFourWordsSum/64                  755518 ns     755523 ns        936   1.29257G items/s\r\n   BitBlockCounterFourWordsSum/512                 314926 ns     314928 ns       2237   3.10091G items/s\r\n   BitBlockCounterFourWordsSum/4096                 62012 ns      62011 ns      10790   15.7483G items/s\r\n   BitBlockCounterFourWordsSum/32768                18307 ns      18307 ns      38225   53.3436G items/s\r\n   BitBlockCounterFourWordsSum/65536                16755 ns      16755 ns      42106   58.2835G items/s\r\n   BitBlockCounterFourWordsSumWithOffset/8        1554037 ns    1554017 ns        455   643.494M items/s\r\n   BitBlockCounterFourWordsSumWithOffset/64        771938 ns     771925 ns        878    1.2651G items/s\r\n   BitBlockCounterFourWordsSumWithOffset/512       311751 ns     311753 ns       2200   3.13249G items/s\r\n   BitBlockCounterFourWordsSumWithOffset/4096       65821 ns      65821 ns      10635   14.8366G items/s\r\n   BitBlockCounterFourWordsSumWithOffset/32768      21528 ns      21528 ns      32434    45.362G items/s\r\n   BitBlockCounterFourWordsSumWithOffset/65536      20499 ns      20499 ns      35251   47.6401G items/s\r\n   BinaryBitBlockCounterSum/8                     1369784 ns    1369771 ns        529   730.048M items/s\r\n   BinaryBitBlockCounterSum/64                      75780 ns      75780 ns       9360   12.8867G items/s\r\n   BinaryBitBlockCounterSum/512                     56490 ns      56491 ns      12401   17.2871G items/s\r\n   BinaryBitBlockCounterSum/4096                    55213 ns      55213 ns      12094   17.6871G items/s\r\n   BinaryBitBlockCounterSum/32768                   56260 ns      56260 ns      12740    17.358G items/s\r\n   BinaryBitBlockCounterSum/65536                   57650 ns      57650 ns      12731   16.9394G items/s\r\n   BinaryBitBlockCounterSumWithOffset/8           1433256 ns    1433222 ns        479   697.728M items/s\r\n   BinaryBitBlockCounterSumWithOffset/64            96996 ns      96996 ns       7346    10.068G items/s\r\n   BinaryBitBlockCounterSumWithOffset/512           75189 ns      75188 ns       9420   12.9882G items/s\r\n   BinaryBitBlockCounterSumWithOffset/4096          74190 ns      74191 ns       9414   13.1628G items/s\r\n   BinaryBitBlockCounterSumWithOffset/32768         74885 ns      74885 ns       9362   13.0409G items/s\r\n   BinaryBitBlockCounterSumWithOffset/65536         74462 ns      74462 ns       9425   13.1148G items/s\r\n   ```\r\n   \r\n   I'm surprised that the binary sum (BinaryBitBlockCounterSum) seems faster than the unary sum (BitBlockCounterSum). I'm going to scrutinize the benchmark to check whether I've implemented something incorrectly. \n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-06-05T15:02:06.411+0000",
                    "updated": "2020-06-05T15:02:06.411+0000",
                    "started": "2020-06-05T15:02:06.411+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "441859",
                    "issueId": "13309466"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13309466/worklog/441860",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on pull request #7356:\nURL: https://github.com/apache/arrow/pull/7356#issuecomment-639550537\n\n\n   There are some issues with the benchmarks, I'll fix them and repost numbers\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-06-05T15:02:19.654+0000",
                    "updated": "2020-06-05T15:02:19.654+0000",
                    "started": "2020-06-05T15:02:19.653+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "441860",
                    "issueId": "13309466"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13309466/worklog/441869",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "github-actions[bot] commented on pull request #7356:\nURL: https://github.com/apache/arrow/pull/7356#issuecomment-639553741\n\n\n   https://issues.apache.org/jira/browse/ARROW-9034\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-06-05T15:07:49.021+0000",
                    "updated": "2020-06-05T15:07:49.021+0000",
                    "started": "2020-06-05T15:07:49.021+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "441869",
                    "issueId": "13309466"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13309466/worklog/441874",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on pull request #7356:\nURL: https://github.com/apache/arrow/pull/7356#issuecomment-639555962\n\n\n   OK here are the fixed benchmarks. These match my intuition now. This shows that there is very little downside and nearly always upside to using `BitBlockCounter` over `BitmapReader`. There isn't a benchmark showing the naive double-BitmapReader for the binary case but that could be added too\r\n   \r\n   ```\r\n   -----------------------------------------------------------------------------------\r\n   Benchmark                                            Time           CPU Iterations\r\n   -----------------------------------------------------------------------------------\r\n   BitBlockCounterSum/8                           1732025 ns    1732026 ns        400   577.358M items/s\r\n   BitBlockCounterSum/64                           832029 ns     832025 ns        836   1.17372G items/s\r\n   BitBlockCounterSum/512                          265104 ns     265105 ns       2666   3.68368G items/s\r\n   BitBlockCounterSum/4096                         151056 ns     151056 ns       4647   6.46488G items/s\r\n   BitBlockCounterSum/32768                        138635 ns     138632 ns       5081    7.0443G items/s\r\n   BitBlockCounterSum/65536                        137021 ns     137019 ns       4977    7.1272G items/s\r\n   BitBlockCounterSumWithOffset/8                 1779549 ns    1779525 ns        395   561.948M items/s\r\n   BitBlockCounterSumWithOffset/64                 855158 ns     855149 ns        823   1.14198G items/s\r\n   BitBlockCounterSumWithOffset/512                273883 ns     273874 ns       2578   3.56574G items/s\r\n   BitBlockCounterSumWithOffset/4096               154422 ns     154422 ns       4499   6.32397G items/s\r\n   BitBlockCounterSumWithOffset/32768              141266 ns     141265 ns       4887   6.91299G items/s\r\n   BitBlockCounterSumWithOffset/65536              140049 ns     140048 ns       5024   6.97305G items/s\r\n   BitBlockCounterInlineSum/8                     1714554 ns    1714564 ns        410   583.239M items/s\r\n   BitBlockCounterInlineSum/64                     802222 ns     802227 ns        878   1.21731G items/s\r\n   BitBlockCounterInlineSum/512                    239832 ns     239831 ns       2897   4.07188G items/s\r\n   BitBlockCounterInlineSum/4096                   129035 ns     129031 ns       5384   7.56842G items/s\r\n   BitBlockCounterInlineSum/32768                  116983 ns     116981 ns       6003   8.34801G items/s\r\n   BitBlockCounterInlineSum/65536                  116078 ns     116079 ns       6085    8.4129G items/s\r\n   BitBlockCounterInlineSumWithOffset/8           1682920 ns    1682911 ns        414   594.209M items/s\r\n   BitBlockCounterInlineSumWithOffset/64           809214 ns     809211 ns        874   1.20681G items/s\r\n   BitBlockCounterInlineSumWithOffset/512          251953 ns     251951 ns       2756     3.876G items/s\r\n   BitBlockCounterInlineSumWithOffset/4096         139827 ns     139826 ns       4988   6.98414G items/s\r\n   BitBlockCounterInlineSumWithOffset/32768        127648 ns     127648 ns       5498   7.65041G items/s\r\n   BitBlockCounterInlineSumWithOffset/65536        126759 ns     126756 ns       5551   7.70425G items/s\r\n   BitBlockCounterFourWordsSum/8                  1655902 ns    1655861 ns        423   603.916M items/s\r\n   BitBlockCounterFourWordsSum/64                 1000517 ns    1000507 ns        692   999.493M items/s\r\n   BitBlockCounterFourWordsSum/512                 441463 ns     441466 ns       1595   2.21209G items/s\r\n   BitBlockCounterFourWordsSum/4096                128194 ns     128193 ns       5484   7.61788G items/s\r\n   BitBlockCounterFourWordsSum/32768                85335 ns      85334 ns       8050    11.444G items/s\r\n   BitBlockCounterFourWordsSum/65536                82101 ns      82101 ns       8498   11.8947G items/s\r\n   BitBlockCounterFourWordsSumWithOffset/8        1647208 ns    1647201 ns        422   607.091M items/s\r\n   BitBlockCounterFourWordsSumWithOffset/64       1025215 ns    1025183 ns        700   975.436M items/s\r\n   BitBlockCounterFourWordsSumWithOffset/512       462082 ns     462074 ns       1572   2.11343G items/s\r\n   BitBlockCounterFourWordsSumWithOffset/4096      132541 ns     132540 ns       5257   7.36808G items/s\r\n   BitBlockCounterFourWordsSumWithOffset/32768      92098 ns      92098 ns       7651   10.6035G items/s\r\n   BitBlockCounterFourWordsSumWithOffset/65536      87406 ns      87406 ns       7908   11.1727G items/s\r\n   BitmapReaderSum/8                              1600625 ns    1600619 ns        442   624.758M items/s\r\n   BitmapReaderSum/64                              885446 ns     885445 ns        789   1.10291G items/s\r\n   BitmapReaderSum/512                             805230 ns     805219 ns        862   1.21279G items/s\r\n   BitmapReaderSum/4096                            794678 ns     794676 ns        870   1.22888G items/s\r\n   BitmapReaderSum/32768                           793758 ns     793749 ns        869   1.23032G items/s\r\n   BitmapReaderSum/65536                           794828 ns     794812 ns        879   1.22867G items/s\r\n   BitmapReaderSumWithOffset/8                    1667559 ns    1667514 ns        419   599.695M items/s\r\n   BitmapReaderSumWithOffset/64                    930337 ns     930335 ns        755   1074.88M items/s\r\n   BitmapReaderSumWithOffset/512                   841240 ns     841236 ns        841   1.16087G items/s\r\n   BitmapReaderSumWithOffset/4096                  840091 ns     840087 ns        853   1.16245G items/s\r\n   BitmapReaderSumWithOffset/32768                 828098 ns     828103 ns        846   1.17928G items/s\r\n   BitmapReaderSumWithOffset/65536                 831186 ns     831191 ns        854    1.1749G items/s\r\n   BinaryBitBlockCounterSum/8                     2974962 ns    2974893 ns        235   336.146M items/s\r\n   BinaryBitBlockCounterSum/64                    1697417 ns    1697403 ns        414   589.135M items/s\r\n   BinaryBitBlockCounterSum/512                    622981 ns     622973 ns       1165   1.56758G items/s\r\n   BinaryBitBlockCounterSum/4096                   251586 ns     251582 ns       2831   3.88168G items/s\r\n   BinaryBitBlockCounterSum/32768                  202682 ns     202683 ns       3345   4.81817G items/s\r\n   BinaryBitBlockCounterSum/65536                  192151 ns     192150 ns       3653    5.0823G items/s\r\n   BinaryBitBlockCounterSumWithOffset/8           3178632 ns    3178625 ns        224   314.601M items/s\r\n   BinaryBitBlockCounterSumWithOffset/64          1713947 ns    1713944 ns        404   583.449M items/s\r\n   BinaryBitBlockCounterSumWithOffset/512          605481 ns     605476 ns       1158   1.61288G items/s\r\n   BinaryBitBlockCounterSumWithOffset/4096         258490 ns     258489 ns       2716   3.77796G items/s\r\n   BinaryBitBlockCounterSumWithOffset/32768        212582 ns     212577 ns       3273   4.59393G items/s\r\n   BinaryBitBlockCounterSumWithOffset/65536        208857 ns     208857 ns       3357   4.67575G items/s\r\n   ```\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-06-05T15:11:53.366+0000",
                    "updated": "2020-06-05T15:11:53.366+0000",
                    "started": "2020-06-05T15:11:53.366+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "441874",
                    "issueId": "13309466"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13309466/worklog/441878",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm edited a comment on pull request #7356:\nURL: https://github.com/apache/arrow/pull/7356#issuecomment-639555962\n\n\n   OK here are the fixed benchmarks. These match my intuition now. This shows that there is very little downside and nearly always upside to using `BitBlockCounter` over `BitmapReader` (at least when there is 1% nulls or less, when there is a higher percentage you don't drop that much performance for using it). There isn't a benchmark showing the naive double-BitmapReader for the binary case but that could be added too\r\n   \r\n   ```\r\n   -----------------------------------------------------------------------------------\r\n   Benchmark                                            Time           CPU Iterations\r\n   -----------------------------------------------------------------------------------\r\n   BitBlockCounterSum/8                           1732025 ns    1732026 ns        400   577.358M items/s\r\n   BitBlockCounterSum/64                           832029 ns     832025 ns        836   1.17372G items/s\r\n   BitBlockCounterSum/512                          265104 ns     265105 ns       2666   3.68368G items/s\r\n   BitBlockCounterSum/4096                         151056 ns     151056 ns       4647   6.46488G items/s\r\n   BitBlockCounterSum/32768                        138635 ns     138632 ns       5081    7.0443G items/s\r\n   BitBlockCounterSum/65536                        137021 ns     137019 ns       4977    7.1272G items/s\r\n   BitBlockCounterSumWithOffset/8                 1779549 ns    1779525 ns        395   561.948M items/s\r\n   BitBlockCounterSumWithOffset/64                 855158 ns     855149 ns        823   1.14198G items/s\r\n   BitBlockCounterSumWithOffset/512                273883 ns     273874 ns       2578   3.56574G items/s\r\n   BitBlockCounterSumWithOffset/4096               154422 ns     154422 ns       4499   6.32397G items/s\r\n   BitBlockCounterSumWithOffset/32768              141266 ns     141265 ns       4887   6.91299G items/s\r\n   BitBlockCounterSumWithOffset/65536              140049 ns     140048 ns       5024   6.97305G items/s\r\n   BitBlockCounterInlineSum/8                     1714554 ns    1714564 ns        410   583.239M items/s\r\n   BitBlockCounterInlineSum/64                     802222 ns     802227 ns        878   1.21731G items/s\r\n   BitBlockCounterInlineSum/512                    239832 ns     239831 ns       2897   4.07188G items/s\r\n   BitBlockCounterInlineSum/4096                   129035 ns     129031 ns       5384   7.56842G items/s\r\n   BitBlockCounterInlineSum/32768                  116983 ns     116981 ns       6003   8.34801G items/s\r\n   BitBlockCounterInlineSum/65536                  116078 ns     116079 ns       6085    8.4129G items/s\r\n   BitBlockCounterInlineSumWithOffset/8           1682920 ns    1682911 ns        414   594.209M items/s\r\n   BitBlockCounterInlineSumWithOffset/64           809214 ns     809211 ns        874   1.20681G items/s\r\n   BitBlockCounterInlineSumWithOffset/512          251953 ns     251951 ns       2756     3.876G items/s\r\n   BitBlockCounterInlineSumWithOffset/4096         139827 ns     139826 ns       4988   6.98414G items/s\r\n   BitBlockCounterInlineSumWithOffset/32768        127648 ns     127648 ns       5498   7.65041G items/s\r\n   BitBlockCounterInlineSumWithOffset/65536        126759 ns     126756 ns       5551   7.70425G items/s\r\n   BitBlockCounterFourWordsSum/8                  1655902 ns    1655861 ns        423   603.916M items/s\r\n   BitBlockCounterFourWordsSum/64                 1000517 ns    1000507 ns        692   999.493M items/s\r\n   BitBlockCounterFourWordsSum/512                 441463 ns     441466 ns       1595   2.21209G items/s\r\n   BitBlockCounterFourWordsSum/4096                128194 ns     128193 ns       5484   7.61788G items/s\r\n   BitBlockCounterFourWordsSum/32768                85335 ns      85334 ns       8050    11.444G items/s\r\n   BitBlockCounterFourWordsSum/65536                82101 ns      82101 ns       8498   11.8947G items/s\r\n   BitBlockCounterFourWordsSumWithOffset/8        1647208 ns    1647201 ns        422   607.091M items/s\r\n   BitBlockCounterFourWordsSumWithOffset/64       1025215 ns    1025183 ns        700   975.436M items/s\r\n   BitBlockCounterFourWordsSumWithOffset/512       462082 ns     462074 ns       1572   2.11343G items/s\r\n   BitBlockCounterFourWordsSumWithOffset/4096      132541 ns     132540 ns       5257   7.36808G items/s\r\n   BitBlockCounterFourWordsSumWithOffset/32768      92098 ns      92098 ns       7651   10.6035G items/s\r\n   BitBlockCounterFourWordsSumWithOffset/65536      87406 ns      87406 ns       7908   11.1727G items/s\r\n   BitmapReaderSum/8                              1600625 ns    1600619 ns        442   624.758M items/s\r\n   BitmapReaderSum/64                              885446 ns     885445 ns        789   1.10291G items/s\r\n   BitmapReaderSum/512                             805230 ns     805219 ns        862   1.21279G items/s\r\n   BitmapReaderSum/4096                            794678 ns     794676 ns        870   1.22888G items/s\r\n   BitmapReaderSum/32768                           793758 ns     793749 ns        869   1.23032G items/s\r\n   BitmapReaderSum/65536                           794828 ns     794812 ns        879   1.22867G items/s\r\n   BitmapReaderSumWithOffset/8                    1667559 ns    1667514 ns        419   599.695M items/s\r\n   BitmapReaderSumWithOffset/64                    930337 ns     930335 ns        755   1074.88M items/s\r\n   BitmapReaderSumWithOffset/512                   841240 ns     841236 ns        841   1.16087G items/s\r\n   BitmapReaderSumWithOffset/4096                  840091 ns     840087 ns        853   1.16245G items/s\r\n   BitmapReaderSumWithOffset/32768                 828098 ns     828103 ns        846   1.17928G items/s\r\n   BitmapReaderSumWithOffset/65536                 831186 ns     831191 ns        854    1.1749G items/s\r\n   BinaryBitBlockCounterSum/8                     2974962 ns    2974893 ns        235   336.146M items/s\r\n   BinaryBitBlockCounterSum/64                    1697417 ns    1697403 ns        414   589.135M items/s\r\n   BinaryBitBlockCounterSum/512                    622981 ns     622973 ns       1165   1.56758G items/s\r\n   BinaryBitBlockCounterSum/4096                   251586 ns     251582 ns       2831   3.88168G items/s\r\n   BinaryBitBlockCounterSum/32768                  202682 ns     202683 ns       3345   4.81817G items/s\r\n   BinaryBitBlockCounterSum/65536                  192151 ns     192150 ns       3653    5.0823G items/s\r\n   BinaryBitBlockCounterSumWithOffset/8           3178632 ns    3178625 ns        224   314.601M items/s\r\n   BinaryBitBlockCounterSumWithOffset/64          1713947 ns    1713944 ns        404   583.449M items/s\r\n   BinaryBitBlockCounterSumWithOffset/512          605481 ns     605476 ns       1158   1.61288G items/s\r\n   BinaryBitBlockCounterSumWithOffset/4096         258490 ns     258489 ns       2716   3.77796G items/s\r\n   BinaryBitBlockCounterSumWithOffset/32768        212582 ns     212577 ns       3273   4.59393G items/s\r\n   BinaryBitBlockCounterSumWithOffset/65536        208857 ns     208857 ns       3357   4.67575G items/s\r\n   ```\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-06-05T15:18:37.202+0000",
                    "updated": "2020-06-05T15:18:37.202+0000",
                    "started": "2020-06-05T15:18:37.202+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "441878",
                    "issueId": "13309466"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13309466/worklog/441961",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on pull request #7356:\nURL: https://github.com/apache/arrow/pull/7356#issuecomment-639685965\n\n\n   I'm adding a BitmapReader-based comparison for the binary case. Stay tuned\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-06-05T18:21:36.638+0000",
                    "updated": "2020-06-05T18:21:36.638+0000",
                    "started": "2020-06-05T18:21:36.637+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "441961",
                    "issueId": "13309466"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13309466/worklog/441981",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on pull request #7356:\nURL: https://github.com/apache/arrow/pull/7356#issuecomment-639697297\n\n\n   OK, here are the binary benchmarks:\r\n   \r\n   ```\r\n   --------------------------------------------------------------------------------\r\n   Benchmark                                         Time           CPU Iterations\r\n   --------------------------------------------------------------------------------\r\n   BinaryBitBlockCounterSum/8                  3189138 ns    3189079 ns        216    313.57M items/s\r\n   BinaryBitBlockCounterSum/64                 1839419 ns    1839359 ns        390   543.668M items/s\r\n   BinaryBitBlockCounterSum/512                 630842 ns     630808 ns       1121   1.54811G items/s\r\n   BinaryBitBlockCounterSum/4096                256330 ns     256332 ns       2746   3.80976G items/s\r\n   BinaryBitBlockCounterSum/32768               204388 ns     204383 ns       3454   4.77809G items/s\r\n   BinaryBitBlockCounterSum/65536               201268 ns     201260 ns       3428   4.85225G items/s\r\n   BinaryBitBlockCounterSumWithOffset/8        3313859 ns    3313805 ns        206   301.768M items/s\r\n   BinaryBitBlockCounterSumWithOffset/64       1966957 ns    1966805 ns        360   508.439M items/s\r\n   BinaryBitBlockCounterSumWithOffset/512       672431 ns     672434 ns       1088   1.45228G items/s\r\n   BinaryBitBlockCounterSumWithOffset/4096      286651 ns     286643 ns       2469   3.40689G items/s\r\n   BinaryBitBlockCounterSumWithOffset/32768     228652 ns     228648 ns       3048   4.27103G items/s\r\n   BinaryBitBlockCounterSumWithOffset/65536     228191 ns     228188 ns       3171   4.27964G items/s\r\n   BinaryBitmapReaderSum/8                     3803716 ns    3803704 ns        183   262.902M items/s\r\n   BinaryBitmapReaderSum/64                    2184717 ns    2184728 ns        316   457.723M items/s\r\n   BinaryBitmapReaderSum/512                   2018442 ns    2018421 ns        344   495.437M items/s\r\n   BinaryBitmapReaderSum/4096                  1997782 ns    1997729 ns        349   500.568M items/s\r\n   BinaryBitmapReaderSum/32768                 2024333 ns    2024318 ns        367   493.994M items/s\r\n   BinaryBitmapReaderSum/65536                 2018332 ns    2018340 ns        346   495.457M items/s\r\n   BinaryBitmapReaderSumWithOffset/8           3926170 ns    3926185 ns        181     254.7M items/s\r\n   BinaryBitmapReaderSumWithOffset/64          2198425 ns    2198417 ns        323   454.873M items/s\r\n   BinaryBitmapReaderSumWithOffset/512         2001917 ns    2001864 ns        352   499.535M items/s\r\n   BinaryBitmapReaderSumWithOffset/4096        1980845 ns    1980853 ns        351   504.833M items/s\r\n   BinaryBitmapReaderSumWithOffset/32768       1979394 ns    1979403 ns        365   505.203M items/s\r\n   BinaryBitmapReaderSumWithOffset/65536       2029335 ns    2029347 ns        345   492.769M items/s\r\n   ```\r\n   \r\n   It seems that it is never a good idea to use BitmapReader for the binary case, even when the incidence of nulls is high, that even in that case naively using `BitUtil::GetBit` is better. \n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-06-05T18:39:40.985+0000",
                    "updated": "2020-06-05T18:39:40.985+0000",
                    "started": "2020-06-05T18:39:40.985+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "441981",
                    "issueId": "13309466"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13309466/worklog/442076",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on pull request #7356:\nURL: https://github.com/apache/arrow/pull/7356#issuecomment-639899415\n\n\n   I'm going to be basing some patches on top of this, I can rebase whenever this gets reviewed/merged\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-06-05T23:43:58.246+0000",
                    "updated": "2020-06-05T23:43:58.246+0000",
                    "started": "2020-06-05T23:43:58.246+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "442076",
                    "issueId": "13309466"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13309466/worklog/442959",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on a change in pull request #7356:\nURL: https://github.com/apache/arrow/pull/7356#discussion_r436753353\n\n\n\n##########\nFile path: cpp/src/arrow/util/bit_block_counter.h\n##########\n@@ -19,37 +19,108 @@\n \n #include <cstdint>\n \n+#include \"arrow/util/bit_util.h\"\n+#include \"arrow/util/bitmap_ops.h\"\n+#include \"arrow/util/ubsan.h\"\n #include \"arrow/util/visibility.h\"\n \n namespace arrow {\n namespace internal {\n \n-/// \\brief A class that scans through a true/false bitmap to yield blocks of up\n-/// to 256 bits at a time along with their popcount. This is used to accelerate\n-/// processing of mostly-not-null array data.\n+/// \\brief Return value from bit block counters: the total number of bits and\n+/// the number of set bits.\n+struct BitBlockCount {\n+  int16_t length;\n+  int16_t popcount;\n+};\n+\n+/// \\brief A class that scans through a true/false bitmap to compute popcounts\n+/// 64 or 256 bits at a time. This is used to accelerate processing of\n+/// mostly-not-null array data.\n class ARROW_EXPORT BitBlockCounter {\n  public:\n-  struct Block {\n-    int16_t length;\n-    int16_t popcount;\n-  };\n-\n-  static constexpr int16_t kTargetBlockLength = 256;\n-\n   BitBlockCounter(const uint8_t* bitmap, int64_t start_offset, int64_t length)\n       : bitmap_(bitmap + start_offset / 8),\n         bits_remaining_(length),\n         offset_(start_offset % 8) {}\n \n-  /// \\brief Return the next run of available bits, up to 256. The returned\n-  /// pair contains the size of run and the number of true values\n-  Block NextBlock();\n+  /// \\brief Return the next run of available bits, usually 256. The returned\n+  /// pair contains the size of run and the number of true values. When the\n+  /// offset is greater than zero, the last block may be longer than 256.\n\nReview comment:\n       \"Longer than 256\" (or \"longer than 64\") doesn't sound like a great idea, if the calling code can rely for the length limit to optimize a bit better.\n\n##########\nFile path: cpp/src/arrow/util/bit_block_counter.h\n##########\n@@ -19,37 +19,108 @@\n \n #include <cstdint>\n \n+#include \"arrow/util/bit_util.h\"\n+#include \"arrow/util/bitmap_ops.h\"\n+#include \"arrow/util/ubsan.h\"\n #include \"arrow/util/visibility.h\"\n \n namespace arrow {\n namespace internal {\n \n-/// \\brief A class that scans through a true/false bitmap to yield blocks of up\n-/// to 256 bits at a time along with their popcount. This is used to accelerate\n-/// processing of mostly-not-null array data.\n+/// \\brief Return value from bit block counters: the total number of bits and\n+/// the number of set bits.\n+struct BitBlockCount {\n+  int16_t length;\n+  int16_t popcount;\n+};\n+\n+/// \\brief A class that scans through a true/false bitmap to compute popcounts\n+/// 64 or 256 bits at a time. This is used to accelerate processing of\n+/// mostly-not-null array data.\n class ARROW_EXPORT BitBlockCounter {\n  public:\n-  struct Block {\n-    int16_t length;\n-    int16_t popcount;\n-  };\n-\n-  static constexpr int16_t kTargetBlockLength = 256;\n-\n   BitBlockCounter(const uint8_t* bitmap, int64_t start_offset, int64_t length)\n       : bitmap_(bitmap + start_offset / 8),\n         bits_remaining_(length),\n         offset_(start_offset % 8) {}\n \n-  /// \\brief Return the next run of available bits, up to 256. The returned\n-  /// pair contains the size of run and the number of true values\n-  Block NextBlock();\n+  /// \\brief Return the next run of available bits, usually 256. The returned\n+  /// pair contains the size of run and the number of true values. When the\n+  /// offset is greater than zero, the last block may be longer than 256.\n+  BitBlockCount NextFourWords();\n+\n+  /// \\brief Return the next run of available bits, usually 64. The returned\n+  /// pair contains the size of run and the number of true values. When the\n+  /// offset is greater than zero, the last block may be longer than 64.\n+  BitBlockCount NextWord();\n+\n+  /// \\brief Inlineable implementation of NextWord\n\nReview comment:\n       Is it worth keeping both inlined and non-inlined versions or was is just for the sake of benchmarking this PR?\n\n##########\nFile path: cpp/src/arrow/util/bit_block_counter.h\n##########\n@@ -19,37 +19,108 @@\n \n #include <cstdint>\n \n+#include \"arrow/util/bit_util.h\"\n+#include \"arrow/util/bitmap_ops.h\"\n+#include \"arrow/util/ubsan.h\"\n #include \"arrow/util/visibility.h\"\n \n namespace arrow {\n namespace internal {\n \n-/// \\brief A class that scans through a true/false bitmap to yield blocks of up\n-/// to 256 bits at a time along with their popcount. This is used to accelerate\n-/// processing of mostly-not-null array data.\n+/// \\brief Return value from bit block counters: the total number of bits and\n+/// the number of set bits.\n+struct BitBlockCount {\n+  int16_t length;\n+  int16_t popcount;\n+};\n+\n+/// \\brief A class that scans through a true/false bitmap to compute popcounts\n+/// 64 or 256 bits at a time. This is used to accelerate processing of\n+/// mostly-not-null array data.\n class ARROW_EXPORT BitBlockCounter {\n  public:\n-  struct Block {\n-    int16_t length;\n-    int16_t popcount;\n-  };\n-\n-  static constexpr int16_t kTargetBlockLength = 256;\n-\n   BitBlockCounter(const uint8_t* bitmap, int64_t start_offset, int64_t length)\n       : bitmap_(bitmap + start_offset / 8),\n         bits_remaining_(length),\n         offset_(start_offset % 8) {}\n \n-  /// \\brief Return the next run of available bits, up to 256. The returned\n-  /// pair contains the size of run and the number of true values\n-  Block NextBlock();\n+  /// \\brief Return the next run of available bits, usually 256. The returned\n+  /// pair contains the size of run and the number of true values. When the\n+  /// offset is greater than zero, the last block may be longer than 256.\n+  BitBlockCount NextFourWords();\n+\n+  /// \\brief Return the next run of available bits, usually 64. The returned\n+  /// pair contains the size of run and the number of true values. When the\n+  /// offset is greater than zero, the last block may be longer than 64.\n+  BitBlockCount NextWord();\n+\n+  /// \\brief Inlineable implementation of NextWord\n\nReview comment:\n       Agreed. I suppose most uses will be less trivial than a simple sum.\n\n##########\nFile path: cpp/src/arrow/util/bit_block_counter.h\n##########\n@@ -19,37 +19,108 @@\n \n #include <cstdint>\n \n+#include \"arrow/util/bit_util.h\"\n+#include \"arrow/util/bitmap_ops.h\"\n+#include \"arrow/util/ubsan.h\"\n #include \"arrow/util/visibility.h\"\n \n namespace arrow {\n namespace internal {\n \n-/// \\brief A class that scans through a true/false bitmap to yield blocks of up\n-/// to 256 bits at a time along with their popcount. This is used to accelerate\n-/// processing of mostly-not-null array data.\n+/// \\brief Return value from bit block counters: the total number of bits and\n+/// the number of set bits.\n+struct BitBlockCount {\n+  int16_t length;\n+  int16_t popcount;\n+};\n+\n+/// \\brief A class that scans through a true/false bitmap to compute popcounts\n+/// 64 or 256 bits at a time. This is used to accelerate processing of\n+/// mostly-not-null array data.\n class ARROW_EXPORT BitBlockCounter {\n  public:\n-  struct Block {\n-    int16_t length;\n-    int16_t popcount;\n-  };\n-\n-  static constexpr int16_t kTargetBlockLength = 256;\n-\n   BitBlockCounter(const uint8_t* bitmap, int64_t start_offset, int64_t length)\n       : bitmap_(bitmap + start_offset / 8),\n         bits_remaining_(length),\n         offset_(start_offset % 8) {}\n \n-  /// \\brief Return the next run of available bits, up to 256. The returned\n-  /// pair contains the size of run and the number of true values\n-  Block NextBlock();\n+  /// \\brief Return the next run of available bits, usually 256. The returned\n+  /// pair contains the size of run and the number of true values. When the\n+  /// offset is greater than zero, the last block may be longer than 256.\n\nReview comment:\n       That would sound better to me, yes.\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-06-09T16:16:27.469+0000",
                    "updated": "2020-06-09T16:16:27.469+0000",
                    "started": "2020-06-09T16:16:27.469+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "442959",
                    "issueId": "13309466"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13309466/worklog/442966",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on pull request #7356:\nURL: https://github.com/apache/arrow/pull/7356#issuecomment-640673030\n\n\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-06-09T16:16:58.458+0000",
                    "updated": "2020-06-09T16:16:58.458+0000",
                    "started": "2020-06-09T16:16:58.458+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "442966",
                    "issueId": "13309466"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13309466/worklog/443051",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm closed pull request #7356:\nURL: https://github.com/apache/arrow/pull/7356\n\n\n   \n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-06-09T16:26:15.992+0000",
                    "updated": "2020-06-09T16:26:15.992+0000",
                    "started": "2020-06-09T16:26:15.992+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "443051",
                    "issueId": "13309466"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13309466/worklog/443059",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on pull request #7356:\nURL: https://github.com/apache/arrow/pull/7356#issuecomment-640664623\n\n\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-06-09T16:27:03.329+0000",
                    "updated": "2020-06-09T16:27:03.329+0000",
                    "started": "2020-06-09T16:27:03.328+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "443059",
                    "issueId": "13309466"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13309466/worklog/443137",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on a change in pull request #7356:\nURL: https://github.com/apache/arrow/pull/7356#discussion_r436764326\n\n\n\n##########\nFile path: cpp/src/arrow/util/bit_block_counter.h\n##########\n@@ -19,37 +19,108 @@\n \n #include <cstdint>\n \n+#include \"arrow/util/bit_util.h\"\n+#include \"arrow/util/bitmap_ops.h\"\n+#include \"arrow/util/ubsan.h\"\n #include \"arrow/util/visibility.h\"\n \n namespace arrow {\n namespace internal {\n \n-/// \\brief A class that scans through a true/false bitmap to yield blocks of up\n-/// to 256 bits at a time along with their popcount. This is used to accelerate\n-/// processing of mostly-not-null array data.\n+/// \\brief Return value from bit block counters: the total number of bits and\n+/// the number of set bits.\n+struct BitBlockCount {\n+  int16_t length;\n+  int16_t popcount;\n+};\n+\n+/// \\brief A class that scans through a true/false bitmap to compute popcounts\n+/// 64 or 256 bits at a time. This is used to accelerate processing of\n+/// mostly-not-null array data.\n class ARROW_EXPORT BitBlockCounter {\n  public:\n-  struct Block {\n-    int16_t length;\n-    int16_t popcount;\n-  };\n-\n-  static constexpr int16_t kTargetBlockLength = 256;\n-\n   BitBlockCounter(const uint8_t* bitmap, int64_t start_offset, int64_t length)\n       : bitmap_(bitmap + start_offset / 8),\n         bits_remaining_(length),\n         offset_(start_offset % 8) {}\n \n-  /// \\brief Return the next run of available bits, up to 256. The returned\n-  /// pair contains the size of run and the number of true values\n-  Block NextBlock();\n+  /// \\brief Return the next run of available bits, usually 256. The returned\n+  /// pair contains the size of run and the number of true values. When the\n+  /// offset is greater than zero, the last block may be longer than 256.\n+  BitBlockCount NextFourWords();\n+\n+  /// \\brief Return the next run of available bits, usually 64. The returned\n+  /// pair contains the size of run and the number of true values. When the\n+  /// offset is greater than zero, the last block may be longer than 64.\n+  BitBlockCount NextWord();\n+\n+  /// \\brief Inlineable implementation of NextWord\n\nReview comment:\n       It was largely for the sake of benchmarking. I don't think it's worth keeping the inline version, agreed? \n\n##########\nFile path: cpp/src/arrow/util/bit_block_counter.h\n##########\n@@ -19,37 +19,108 @@\n \n #include <cstdint>\n \n+#include \"arrow/util/bit_util.h\"\n+#include \"arrow/util/bitmap_ops.h\"\n+#include \"arrow/util/ubsan.h\"\n #include \"arrow/util/visibility.h\"\n \n namespace arrow {\n namespace internal {\n \n-/// \\brief A class that scans through a true/false bitmap to yield blocks of up\n-/// to 256 bits at a time along with their popcount. This is used to accelerate\n-/// processing of mostly-not-null array data.\n+/// \\brief Return value from bit block counters: the total number of bits and\n+/// the number of set bits.\n+struct BitBlockCount {\n+  int16_t length;\n+  int16_t popcount;\n+};\n+\n+/// \\brief A class that scans through a true/false bitmap to compute popcounts\n+/// 64 or 256 bits at a time. This is used to accelerate processing of\n+/// mostly-not-null array data.\n class ARROW_EXPORT BitBlockCounter {\n  public:\n-  struct Block {\n-    int16_t length;\n-    int16_t popcount;\n-  };\n-\n-  static constexpr int16_t kTargetBlockLength = 256;\n-\n   BitBlockCounter(const uint8_t* bitmap, int64_t start_offset, int64_t length)\n       : bitmap_(bitmap + start_offset / 8),\n         bits_remaining_(length),\n         offset_(start_offset % 8) {}\n \n-  /// \\brief Return the next run of available bits, up to 256. The returned\n-  /// pair contains the size of run and the number of true values\n-  Block NextBlock();\n+  /// \\brief Return the next run of available bits, usually 256. The returned\n+  /// pair contains the size of run and the number of true values. When the\n+  /// offset is greater than zero, the last block may be longer than 256.\n\nReview comment:\n       Well, I can alter the code to yield two blocks at the end rather than a single overfull block like now. You think that is preferable? \n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-06-09T16:34:45.473+0000",
                    "updated": "2020-06-09T16:34:45.473+0000",
                    "started": "2020-06-09T16:34:45.473+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "443137",
                    "issueId": "13309466"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13309466/worklog/443167",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm edited a comment on pull request #7356:\nURL: https://github.com/apache/arrow/pull/7356#issuecomment-640673030\n\n\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-06-09T16:37:44.088+0000",
                    "updated": "2020-06-09T16:37:44.088+0000",
                    "started": "2020-06-09T16:37:44.088+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "443167",
                    "issueId": "13309466"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/2",
            "id": "2",
            "description": "A new feature of the product, which has yet to be developed.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21141&avatarType=issuetype",
            "name": "New Feature",
            "subtask": false,
            "avatarId": 21141
        },
        "timespent": 9600,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@58756bea[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@5501fa42[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@776551a1[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@2d6c76e5[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@4bb92972[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@2d64631a[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@7051c74e[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@3ec44cff[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@3c3400ec[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@32c6c8c3[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@4c530262[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@50ec1ca3[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 9600,
        "customfield_12312520": null,
        "customfield_12312521": "Tue Jun 09 03:08:23 UTC 2020",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2020-06-09T03:08:23.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-9034/watchers",
            "watchCount": 1,
            "isWatching": false
        },
        "created": "2020-06-04T14:14:18.000+0000",
        "updated": "2020-06-09T16:37:45.000+0000",
        "timeoriginalestimate": null,
        "description": "The current BitBlockCounter from ARROW-9029 is useful for unary operations. Some operations involve multiple bitmaps and so it's useful to be able to determine the block popcounts of the AND of the respective words in the bitmaps. So each returned block would contain the number of bits that are set in both bitmaps at the same locations",
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "2h 40m",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 9600
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[C++] Implement binary (two bitmap) version of BitBlockCounter",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13309466/comment/17128802",
                    "id": "17128802",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "Issue resolved by pull request 7356\n[https://github.com/apache/arrow/pull/7356]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2020-06-09T03:08:23.413+0000",
                    "updated": "2020-06-09T03:08:23.413+0000"
                }
            ],
            "maxResults": 1,
            "total": 1,
            "startAt": 0
        },
        "customfield_12311820": "0|z0figw:",
        "customfield_12314139": null
    }
}