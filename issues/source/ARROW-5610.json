{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13239533",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13239533",
    "key": "ARROW-5610",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12345978",
                "id": "12345978",
                "description": "",
                "name": "0.15.0",
                "archived": false,
                "released": true,
                "releaseDate": "2019-10-05"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "name": "Major",
            "id": "3"
        },
        "labels": [
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [
            {
                "id": "12563266",
                "self": "https://issues.apache.org/jira/rest/api/2/issueLink/12563266",
                "type": {
                    "id": "10030",
                    "name": "Reference",
                    "inward": "is related to",
                    "outward": "relates to",
                    "self": "https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"
                },
                "outwardIssue": {
                    "id": "13064305",
                    "key": "ARROW-840",
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13064305",
                    "fields": {
                        "summary": "[Python] Provide Python API for creating user-defined data types that can survive Arrow IPC",
                        "status": {
                            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
                            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
                            "name": "Resolved",
                            "id": "5",
                            "statusCategory": {
                                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                                "id": 3,
                                "key": "done",
                                "colorName": "green",
                                "name": "Done"
                            }
                        },
                        "priority": {
                            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
                            "name": "Major",
                            "id": "3"
                        },
                        "issuetype": {
                            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/2",
                            "id": "2",
                            "description": "A new feature of the product, which has yet to be developed.",
                            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21141&avatarType=issuetype",
                            "name": "New Feature",
                            "subtask": false,
                            "avatarId": 21141
                        }
                    }
                }
            }
        ],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=jorisvandenbossche",
            "name": "jorisvandenbossche",
            "key": "jorisvandenbossche",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
            },
            "displayName": "Joris Van den Bossche",
            "active": true,
            "timeZone": "Europe/Brussels"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12328936",
                "id": "12328936",
                "name": "Python"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
            "name": "wesm",
            "key": "wesmckinn",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
            },
            "displayName": "Wes McKinney",
            "active": true,
            "timeZone": "America/New_York"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
            "name": "wesm",
            "key": "wesmckinn",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
            },
            "displayName": "Wes McKinney",
            "active": true,
            "timeZone": "America/New_York"
        },
        "aggregateprogress": {
            "progress": 37800,
            "total": 37800,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 37800,
            "total": 37800,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-5610/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 85,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13239533/worklog/295515",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jorisvandenbossche commented on pull request #5094: [WIP] ARROW-5610: [Python] define extension types in Python\nURL: https://github.com/apache/arrow/pull/5094\n \n \n   https://issues.apache.org/jira/browse/ARROW-5610\r\n   \r\n   Note: this is very much work in progress right now.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-08-15T15:51:45.299+0000",
                    "updated": "2019-08-15T15:51:45.299+0000",
                    "started": "2019-08-15T15:51:45.298+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "295515",
                    "issueId": "13239533"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13239533/worklog/295516",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jorisvandenbossche commented on pull request #5094: [WIP] ARROW-5610: [Python] define extension types in Python\nURL: https://github.com/apache/arrow/pull/5094#discussion_r314377166\n \n \n\n ##########\n File path: cpp/src/arrow/python/extension_type.cc\n ##########\n @@ -193,5 +193,105 @@ Status UnregisterPyExtensionType() { return UnregisterExtensionType(kExtensionNa\n \n std::string PyExtensionName() { return kExtensionName; }\n \n+\n+// Define a generic extension type class that takes the name as constructor\n+// parameter\n+\n+GenericExtensionType::GenericExtensionType(std::shared_ptr<DataType> storage_type,\n \n Review comment:\n   This (and below) is mostly the same as the code above for `PyExtensionType` with only a few changes (if we decide to keep both, I should look into deduplicating the code)\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-08-15T15:53:22.598+0000",
                    "updated": "2019-08-15T15:53:22.598+0000",
                    "started": "2019-08-15T15:53:22.597+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "295516",
                    "issueId": "13239533"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13239533/worklog/295517",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jorisvandenbossche commented on pull request #5094: [WIP] ARROW-5610: [Python] define extension types in Python\nURL: https://github.com/apache/arrow/pull/5094#discussion_r314378119\n \n \n\n ##########\n File path: python/pyarrow/tests/test_extension_type.py\n ##########\n @@ -217,3 +217,50 @@ def test_ipc_unknown_type():\n     batch = ipc_read_batch(buf2)\n     arr = check_example_batch(batch)\n     assert arr.type == ParamExtType(3)\n+\n+\n+class PeriodType(pa.GenericExtensionType):\n \n Review comment:\n   this is an example of how the API would look like for people implementing an extension type in Python.\r\n   \r\n   Here, as initial example, I took the \"period\" type from pandas (which is currently not supported by pyarrow out of the box), which is basically integer values with a frequency.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-08-15T15:55:13.772+0000",
                    "updated": "2019-08-15T15:55:13.772+0000",
                    "started": "2019-08-15T15:55:13.771+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "295517",
                    "issueId": "13239533"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13239533/worklog/295518",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jorisvandenbossche commented on pull request #5094: [WIP] ARROW-5610: [Python] define extension types in Python\nURL: https://github.com/apache/arrow/pull/5094#discussion_r314379234\n \n \n\n ##########\n File path: python/pyarrow/public-api.pxi\n ##########\n @@ -96,6 +98,9 @@ cdef api object pyarrow_wrap_data_type(\n         if ext_type.extension_name() == PyExtensionName():\n             cpy_ext_type = <const CPyExtensionType*> ext_type\n             return cpy_ext_type.GetInstance()\n+        # elif ext_type.extension_name() == period_ext_name:\n+        #     cgen_ext_type = <const CGenericExtensionType*> ext_type\n+        #     return cgen_ext_type.GetInstance()\n \n Review comment:\n   For some reason, this doesn't work yet to get an actual instance back (it gives `None`). \r\n   Also, I would need a way to check that the C type is actually a GenericExtensionType in the `elif` check.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-08-15T15:57:22.821+0000",
                    "updated": "2019-08-15T15:57:22.821+0000",
                    "started": "2019-08-15T15:57:22.820+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "295518",
                    "issueId": "13239533"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13239533/worklog/296204",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jorisvandenbossche commented on pull request #5094: [WIP] ARROW-5610: [Python] define extension types in Python\nURL: https://github.com/apache/arrow/pull/5094#discussion_r314379234\n \n \n\n ##########\n File path: python/pyarrow/public-api.pxi\n ##########\n @@ -96,6 +98,9 @@ cdef api object pyarrow_wrap_data_type(\n         if ext_type.extension_name() == PyExtensionName():\n             cpy_ext_type = <const CPyExtensionType*> ext_type\n             return cpy_ext_type.GetInstance()\n+        # elif ext_type.extension_name() == period_ext_name:\n+        #     cgen_ext_type = <const CGenericExtensionType*> ext_type\n+        #     return cgen_ext_type.GetInstance()\n \n Review comment:\n   ~~For some reason, this doesn't work yet to get an actual instance back (it gives `None`).~~\r\n   Also, I would need a way to check that the C type is actually a GenericExtensionType in the `elif` check.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-08-16T10:05:20.808+0000",
                    "updated": "2019-08-16T10:05:20.808+0000",
                    "started": "2019-08-16T10:05:20.808+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "296204",
                    "issueId": "13239533"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13239533/worklog/298319",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "BryanCutler commented on pull request #5094: [WIP] ARROW-5610: [Python] define extension types in Python\nURL: https://github.com/apache/arrow/pull/5094#discussion_r315948859\n \n \n\n ##########\n File path: python/pyarrow/types.pxi\n ##########\n @@ -614,6 +614,76 @@ cdef class UnknownExtensionType(ExtensionType):\n         return self.serialized\n \n \n+cdef class GenericExtensionType(BaseExtensionType):\n+    \"\"\"\n+    Concrete base class for Python-defined extension types.\n+    \"\"\"\n+\n+    def __cinit__(self):\n+        if type(self) is GenericExtensionType:\n+            raise TypeError(\"Can only instantiate subclasses of \"\n+                            \"GenericExtensionType\")\n+\n+    def __init__(self, DataType storage_type, extension_name):\n+        cdef:\n+            shared_ptr[CExtensionType] cgen_ext_type\n+            c_string c_extension_name\n+\n+        c_extension_name = tobytes(extension_name)\n+        assert storage_type is not None\n+        # cgen_ext_type = CGenericExtensionType(\n+        #     storage_type.sp_type, c_extension_name)\n+        check_status(CGenericExtensionType.FromClass(\n+            storage_type.sp_type, c_extension_name, type(self),\n+            &cgen_ext_type))\n+        self.init(<shared_ptr[CDataType]> cgen_ext_type)\n+\n+    cdef void init(self, const shared_ptr[CDataType]& type) except *:\n+        BaseExtensionType.init(self, type)\n+        self.cgen_ext_type = <const CGenericExtensionType*> type.get()\n+        # Store weakref on C++ type instance\n+        check_status(self.cgen_ext_type.SetInstance(self))\n+\n+    def __arrow_ext_serialize__(self):\n \n Review comment:\n   is there a reason why not to use `def serialize()` and `def deserialize()`? It would be a little nicer for the end user to override\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-08-20T23:53:18.412+0000",
                    "updated": "2019-08-20T23:53:18.412+0000",
                    "started": "2019-08-20T23:53:18.411+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "298319",
                    "issueId": "13239533"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13239533/worklog/298320",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "BryanCutler commented on pull request #5094: [WIP] ARROW-5610: [Python] define extension types in Python\nURL: https://github.com/apache/arrow/pull/5094#discussion_r315948480\n \n \n\n ##########\n File path: python/pyarrow/types.pxi\n ##########\n @@ -614,6 +614,76 @@ cdef class UnknownExtensionType(ExtensionType):\n         return self.serialized\n \n \n+cdef class GenericExtensionType(BaseExtensionType):\n+    \"\"\"\n+    Concrete base class for Python-defined extension types.\n+    \"\"\"\n+\n+    def __cinit__(self):\n+        if type(self) is GenericExtensionType:\n+            raise TypeError(\"Can only instantiate subclasses of \"\n+                            \"GenericExtensionType\")\n+\n+    def __init__(self, DataType storage_type, extension_name):\n+        cdef:\n+            shared_ptr[CExtensionType] cgen_ext_type\n+            c_string c_extension_name\n+\n+        c_extension_name = tobytes(extension_name)\n+        assert storage_type is not None\n+        # cgen_ext_type = CGenericExtensionType(\n+        #     storage_type.sp_type, c_extension_name)\n+        check_status(CGenericExtensionType.FromClass(\n+            storage_type.sp_type, c_extension_name, type(self),\n+            &cgen_ext_type))\n+        self.init(<shared_ptr[CDataType]> cgen_ext_type)\n+\n+    cdef void init(self, const shared_ptr[CDataType]& type) except *:\n+        BaseExtensionType.init(self, type)\n+        self.cgen_ext_type = <const CGenericExtensionType*> type.get()\n+        # Store weakref on C++ type instance\n+        check_status(self.cgen_ext_type.SetInstance(self))\n+\n+    def __arrow_ext_serialize__(self):\n+        # default for non-paramtrized type is to have no metadata\n \n Review comment:\n   can it default to use pickle format?\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-08-20T23:53:18.449+0000",
                    "updated": "2019-08-20T23:53:18.449+0000",
                    "started": "2019-08-20T23:53:18.449+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "298320",
                    "issueId": "13239533"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13239533/worklog/298321",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "BryanCutler commented on pull request #5094: [WIP] ARROW-5610: [Python] define extension types in Python\nURL: https://github.com/apache/arrow/pull/5094#discussion_r315946855\n \n \n\n ##########\n File path: cpp/src/arrow/python/extension_type.h\n ##########\n @@ -73,5 +73,61 @@ ARROW_PYTHON_EXPORT Status RegisterPyExtensionType(const std::shared_ptr<DataTyp\n \n ARROW_PYTHON_EXPORT Status UnregisterPyExtensionType();\n \n+\n+// A GenericExtensionType where the extension_name is a variable and thus\n+// multiple instances of it can be registered\n+\n+class ARROW_PYTHON_EXPORT GenericExtensionType : public ExtensionType {\n+ public:\n+  // GenericExtensionType() : ExtensionType(arrow::null()) {}\n+  // GenericExtensionType(std::shared_ptr<DataType> storage_type, std::string extension_name)\n+  //  : ExtensionType(storage_type), extension_name_(extension_name) {}\n+\n+  std::string extension_name() const override { return extension_name_; }\n+\n+  bool ExtensionEquals(const ExtensionType& other) const override {\n+    const auto& other_ext = static_cast<const ExtensionType&>(other);\n+    if (other_ext.extension_name() != this->extension_name()) {\n+      return false;\n+    }\n+    if (other_ext.storage_type() != this->storage_type()) {\n+      return false;\n+    }\n+    return true;\n \n Review comment:\n   could this call a Python method to compare type parameters? That way the user could override the Python method and check parameters, so that they could register the extension once but have multiple parametrized types. The default would to just return True.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-08-20T23:53:18.536+0000",
                    "updated": "2019-08-20T23:53:18.536+0000",
                    "started": "2019-08-20T23:53:18.536+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "298321",
                    "issueId": "13239533"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13239533/worklog/298322",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "BryanCutler commented on pull request #5094: [WIP] ARROW-5610: [Python] define extension types in Python\nURL: https://github.com/apache/arrow/pull/5094#discussion_r315949236\n \n \n\n ##########\n File path: python/pyarrow/types.pxi\n ##########\n @@ -614,6 +614,76 @@ cdef class UnknownExtensionType(ExtensionType):\n         return self.serialized\n \n \n+cdef class GenericExtensionType(BaseExtensionType):\n+    \"\"\"\n+    Concrete base class for Python-defined extension types.\n+    \"\"\"\n+\n+    def __cinit__(self):\n+        if type(self) is GenericExtensionType:\n+            raise TypeError(\"Can only instantiate subclasses of \"\n+                            \"GenericExtensionType\")\n+\n+    def __init__(self, DataType storage_type, extension_name):\n+        cdef:\n+            shared_ptr[CExtensionType] cgen_ext_type\n+            c_string c_extension_name\n+\n+        c_extension_name = tobytes(extension_name)\n+        assert storage_type is not None\n+        # cgen_ext_type = CGenericExtensionType(\n+        #     storage_type.sp_type, c_extension_name)\n+        check_status(CGenericExtensionType.FromClass(\n+            storage_type.sp_type, c_extension_name, type(self),\n+            &cgen_ext_type))\n+        self.init(<shared_ptr[CDataType]> cgen_ext_type)\n+\n+    cdef void init(self, const shared_ptr[CDataType]& type) except *:\n+        BaseExtensionType.init(self, type)\n+        self.cgen_ext_type = <const CGenericExtensionType*> type.get()\n+        # Store weakref on C++ type instance\n+        check_status(self.cgen_ext_type.SetInstance(self))\n+\n+    def __arrow_ext_serialize__(self):\n+        # default for non-paramtrized type is to have no metadata\n+        return b''\n+\n+    @classmethod\n+    def __arrow_ext_deserialize__(self, storage_type, serialized):\n+        return NotImplementedError\n+        # if not serialized == b'':\n+        #     raise TypeError\n+        # return self\n+\n+\n+_PYTHON_EXTENSION_TYPES_REGISTRY = []\n+\n+\n+def register_extension_type(gen_ext_type):\n+    \"\"\"\n+    Register a Python extension type.\n+\n+    \"\"\"\n+    cdef:\n+        DataType _type = ensure_type(gen_ext_type, allow_none=False)\n+\n+    if not isinstance(_type, BaseExtensionType):\n+        raise TypeError(\"Only extension types can be registered\")\n+\n+    # register on the python side\n+    _PYTHON_EXTENSION_TYPES_REGISTRY.append(gen_ext_type)\n+\n+    # register on the C++ side\n+    check_status(\n+        RegisterGenericExtensionType(<shared_ptr[CDataType]> _type.sp_type))\n+\n+\n+def unregister_extension_type(type_name):\n+    cdef:\n+        c_string c_type_name = tobytes(type_name)\n+    check_status(UnregisterGenericExtensionType(c_type_name))\n \n Review comment:\n   do you need to unregister on the python side?\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-08-20T23:53:18.539+0000",
                    "updated": "2019-08-20T23:53:18.539+0000",
                    "started": "2019-08-20T23:53:18.539+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "298322",
                    "issueId": "13239533"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13239533/worklog/298323",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "BryanCutler commented on pull request #5094: [WIP] ARROW-5610: [Python] define extension types in Python\nURL: https://github.com/apache/arrow/pull/5094#discussion_r315950088\n \n \n\n ##########\n File path: cpp/src/arrow/python/extension_type.cc\n ##########\n @@ -193,5 +193,105 @@ Status UnregisterPyExtensionType() { return UnregisterExtensionType(kExtensionNa\n \n std::string PyExtensionName() { return kExtensionName; }\n \n+\n+// Define a generic extension type class that takes the name as constructor\n+// parameter\n+\n+GenericExtensionType::GenericExtensionType(std::shared_ptr<DataType> storage_type,\n \n Review comment:\n   Is it necessary to have the `GenericExtensionType` also? My initial thoughts were that `PyExtensionType` could be modified to use other names and use the registry\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-08-20T23:53:18.539+0000",
                    "updated": "2019-08-20T23:53:18.539+0000",
                    "started": "2019-08-20T23:53:18.539+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "298323",
                    "issueId": "13239533"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13239533/worklog/298535",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jorisvandenbossche commented on pull request #5094: [WIP] ARROW-5610: [Python] define extension types in Python\nURL: https://github.com/apache/arrow/pull/5094#discussion_r316049293\n \n \n\n ##########\n File path: cpp/src/arrow/python/extension_type.h\n ##########\n @@ -73,5 +73,61 @@ ARROW_PYTHON_EXPORT Status RegisterPyExtensionType(const std::shared_ptr<DataTyp\n \n ARROW_PYTHON_EXPORT Status UnregisterPyExtensionType();\n \n+\n+// A GenericExtensionType where the extension_name is a variable and thus\n+// multiple instances of it can be registered\n+\n+class ARROW_PYTHON_EXPORT GenericExtensionType : public ExtensionType {\n+ public:\n+  // GenericExtensionType() : ExtensionType(arrow::null()) {}\n+  // GenericExtensionType(std::shared_ptr<DataType> storage_type, std::string extension_name)\n+  //  : ExtensionType(storage_type), extension_name_(extension_name) {}\n+\n+  std::string extension_name() const override { return extension_name_; }\n+\n+  bool ExtensionEquals(const ExtensionType& other) const override {\n+    const auto& other_ext = static_cast<const ExtensionType&>(other);\n+    if (other_ext.extension_name() != this->extension_name()) {\n+      return false;\n+    }\n+    if (other_ext.storage_type() != this->storage_type()) {\n+      return false;\n+    }\n+    return true;\n \n Review comment:\n   > could this call a Python method to compare type parameters? Th\r\n   \r\n   Yes, that is also what `PyExtensionType` currently does. I basically didn't bother about this function yet, as I first wanted to get the more essential parts right.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-08-21T09:18:11.243+0000",
                    "updated": "2019-08-21T09:18:11.243+0000",
                    "started": "2019-08-21T09:18:11.243+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "298535",
                    "issueId": "13239533"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13239533/worklog/298536",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jorisvandenbossche commented on pull request #5094: [WIP] ARROW-5610: [Python] define extension types in Python\nURL: https://github.com/apache/arrow/pull/5094#discussion_r316050789\n \n \n\n ##########\n File path: python/pyarrow/types.pxi\n ##########\n @@ -614,6 +614,76 @@ cdef class UnknownExtensionType(ExtensionType):\n         return self.serialized\n \n \n+cdef class GenericExtensionType(BaseExtensionType):\n+    \"\"\"\n+    Concrete base class for Python-defined extension types.\n+    \"\"\"\n+\n+    def __cinit__(self):\n+        if type(self) is GenericExtensionType:\n+            raise TypeError(\"Can only instantiate subclasses of \"\n+                            \"GenericExtensionType\")\n+\n+    def __init__(self, DataType storage_type, extension_name):\n+        cdef:\n+            shared_ptr[CExtensionType] cgen_ext_type\n+            c_string c_extension_name\n+\n+        c_extension_name = tobytes(extension_name)\n+        assert storage_type is not None\n+        # cgen_ext_type = CGenericExtensionType(\n+        #     storage_type.sp_type, c_extension_name)\n+        check_status(CGenericExtensionType.FromClass(\n+            storage_type.sp_type, c_extension_name, type(self),\n+            &cgen_ext_type))\n+        self.init(<shared_ptr[CDataType]> cgen_ext_type)\n+\n+    cdef void init(self, const shared_ptr[CDataType]& type) except *:\n+        BaseExtensionType.init(self, type)\n+        self.cgen_ext_type = <const CGenericExtensionType*> type.get()\n+        # Store weakref on C++ type instance\n+        check_status(self.cgen_ext_type.SetInstance(self))\n+\n+    def __arrow_ext_serialize__(self):\n \n Review comment:\n   The main reason I used it here is because it is already used in the previous PyExtensionType. Of course we could still change that I think, if we prefer `serialize`/`deserialize` (although the initial version is already release in 0.14, so would need to keep some compatibility). \r\n   \r\n   Because the methods are not really meant for end-users (users of the custom type should in principle never have to call them), I personally think it is fine use a \"dunder\" method instead of a public method.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-08-21T09:18:11.246+0000",
                    "updated": "2019-08-21T09:18:11.246+0000",
                    "started": "2019-08-21T09:18:11.246+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "298536",
                    "issueId": "13239533"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13239533/worklog/298539",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jorisvandenbossche commented on pull request #5094: [WIP] ARROW-5610: [Python] define extension types in Python\nURL: https://github.com/apache/arrow/pull/5094#discussion_r316077693\n \n \n\n ##########\n File path: cpp/src/arrow/python/extension_type.cc\n ##########\n @@ -193,5 +193,105 @@ Status UnregisterPyExtensionType() { return UnregisterExtensionType(kExtensionNa\n \n std::string PyExtensionName() { return kExtensionName; }\n \n+\n+// Define a generic extension type class that takes the name as constructor\n+// parameter\n+\n+GenericExtensionType::GenericExtensionType(std::shared_ptr<DataType> storage_type,\n \n Review comment:\n   There are some differences that I initially thought might be difficult to combine in a single class. But looking at it now again, I see the main difference is (apart from some checks of the constant name):\r\n   \r\n   - `Serialize` always calls the instance (as it could be parametrized, so the serialization could be different for each instance), while in the current PyExtensionType this is a constant (a pickle of the class, which does not depend on the instance, only on the subclass). I suppose always calling it is not problematic here, also in the case where it would not be needed.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-08-21T09:18:11.246+0000",
                    "updated": "2019-08-21T09:18:11.246+0000",
                    "started": "2019-08-21T09:18:11.246+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "298539",
                    "issueId": "13239533"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13239533/worklog/298538",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jorisvandenbossche commented on pull request #5094: [WIP] ARROW-5610: [Python] define extension types in Python\nURL: https://github.com/apache/arrow/pull/5094#discussion_r316079311\n \n \n\n ##########\n File path: python/pyarrow/types.pxi\n ##########\n @@ -614,6 +614,76 @@ cdef class UnknownExtensionType(ExtensionType):\n         return self.serialized\n \n \n+cdef class GenericExtensionType(BaseExtensionType):\n+    \"\"\"\n+    Concrete base class for Python-defined extension types.\n+    \"\"\"\n+\n+    def __cinit__(self):\n+        if type(self) is GenericExtensionType:\n+            raise TypeError(\"Can only instantiate subclasses of \"\n+                            \"GenericExtensionType\")\n+\n+    def __init__(self, DataType storage_type, extension_name):\n+        cdef:\n+            shared_ptr[CExtensionType] cgen_ext_type\n+            c_string c_extension_name\n+\n+        c_extension_name = tobytes(extension_name)\n+        assert storage_type is not None\n+        # cgen_ext_type = CGenericExtensionType(\n+        #     storage_type.sp_type, c_extension_name)\n+        check_status(CGenericExtensionType.FromClass(\n+            storage_type.sp_type, c_extension_name, type(self),\n+            &cgen_ext_type))\n+        self.init(<shared_ptr[CDataType]> cgen_ext_type)\n+\n+    cdef void init(self, const shared_ptr[CDataType]& type) except *:\n+        BaseExtensionType.init(self, type)\n+        self.cgen_ext_type = <const CGenericExtensionType*> type.get()\n+        # Store weakref on C++ type instance\n+        check_status(self.cgen_ext_type.SetInstance(self))\n+\n+    def __arrow_ext_serialize__(self):\n+        # default for non-paramtrized type is to have no metadata\n \n Review comment:\n   > can it default to use pickle format?\r\n   \r\n   In order to combine it with the other class? (which already uses pickle)\r\n   \r\n   I personally don't really like pickle as default (as it makes it python specific), but if we want to combine both approaches in a single class, then yes that might be the default\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-08-21T09:18:11.246+0000",
                    "updated": "2019-08-21T09:18:11.246+0000",
                    "started": "2019-08-21T09:18:11.246+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "298538",
                    "issueId": "13239533"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13239533/worklog/298537",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jorisvandenbossche commented on pull request #5094: [WIP] ARROW-5610: [Python] define extension types in Python\nURL: https://github.com/apache/arrow/pull/5094#discussion_r316080367\n \n \n\n ##########\n File path: python/pyarrow/types.pxi\n ##########\n @@ -614,6 +614,76 @@ cdef class UnknownExtensionType(ExtensionType):\n         return self.serialized\n \n \n+cdef class GenericExtensionType(BaseExtensionType):\n+    \"\"\"\n+    Concrete base class for Python-defined extension types.\n+    \"\"\"\n+\n+    def __cinit__(self):\n+        if type(self) is GenericExtensionType:\n+            raise TypeError(\"Can only instantiate subclasses of \"\n+                            \"GenericExtensionType\")\n+\n+    def __init__(self, DataType storage_type, extension_name):\n+        cdef:\n+            shared_ptr[CExtensionType] cgen_ext_type\n+            c_string c_extension_name\n+\n+        c_extension_name = tobytes(extension_name)\n+        assert storage_type is not None\n+        # cgen_ext_type = CGenericExtensionType(\n+        #     storage_type.sp_type, c_extension_name)\n+        check_status(CGenericExtensionType.FromClass(\n+            storage_type.sp_type, c_extension_name, type(self),\n+            &cgen_ext_type))\n+        self.init(<shared_ptr[CDataType]> cgen_ext_type)\n+\n+    cdef void init(self, const shared_ptr[CDataType]& type) except *:\n+        BaseExtensionType.init(self, type)\n+        self.cgen_ext_type = <const CGenericExtensionType*> type.get()\n+        # Store weakref on C++ type instance\n+        check_status(self.cgen_ext_type.SetInstance(self))\n+\n+    def __arrow_ext_serialize__(self):\n+        # default for non-paramtrized type is to have no metadata\n+        return b''\n+\n+    @classmethod\n+    def __arrow_ext_deserialize__(self, storage_type, serialized):\n+        return NotImplementedError\n+        # if not serialized == b'':\n+        #     raise TypeError\n+        # return self\n+\n+\n+_PYTHON_EXTENSION_TYPES_REGISTRY = []\n+\n+\n+def register_extension_type(gen_ext_type):\n+    \"\"\"\n+    Register a Python extension type.\n+\n+    \"\"\"\n+    cdef:\n+        DataType _type = ensure_type(gen_ext_type, allow_none=False)\n+\n+    if not isinstance(_type, BaseExtensionType):\n+        raise TypeError(\"Only extension types can be registered\")\n+\n+    # register on the python side\n+    _PYTHON_EXTENSION_TYPES_REGISTRY.append(gen_ext_type)\n+\n+    # register on the C++ side\n+    check_status(\n+        RegisterGenericExtensionType(<shared_ptr[CDataType]> _type.sp_type))\n+\n+\n+def unregister_extension_type(type_name):\n+    cdef:\n+        c_string c_type_name = tobytes(type_name)\n+    check_status(UnregisterGenericExtensionType(c_type_name))\n \n Review comment:\n   Strictly speaking it is not needed for the reason I started the registry (to ensure we unregister it on the C++ side), as we do that in a try except, but it's probably a good idea to do that anyway, yes. That seems cleaner.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-08-21T09:18:11.246+0000",
                    "updated": "2019-08-21T09:18:11.246+0000",
                    "started": "2019-08-21T09:18:11.246+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "298537",
                    "issueId": "13239533"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13239533/worklog/298704",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jorisvandenbossche commented on issue #5094: ARROW-5610: [Python] define extension types in Python\nURL: https://github.com/apache/arrow/pull/5094#issuecomment-523467199\n \n \n   @BryanCutler I updated the pull request, and now removed the C++ GenericExtensionType (moved the needed functionality into the existing C++ PyExtesionType). \r\n   \r\n   On the python side, for now I kept the two concrete base classes `ExtensionType` (based on pickle to (de)serialize, with fixed name, no need to manually register) and `GenericExtensionType` (with variable name and custom serialize, need to register). They give some different functionality to the user subclassing them, and not fully sure if or how to unify them. \r\n   (but if we keep them separate, a better name for \"GenericExtensionType\" would be welcome)\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-08-21T13:55:41.056+0000",
                    "updated": "2019-08-21T13:55:41.056+0000",
                    "started": "2019-08-21T13:55:41.056+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "298704",
                    "issueId": "13239533"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13239533/worklog/298705",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jorisvandenbossche commented on issue #5094: ARROW-5610: [Python] define extension types in Python\nURL: https://github.com/apache/arrow/pull/5094#issuecomment-523467199\n \n \n   @BryanCutler I updated the pull request, and now removed the C++ GenericExtensionType (moved the needed functionality into the existing C++ PyExtesionType). \r\n   \r\n   On the python side, for now I kept the two concrete base classes `ExtensionType` (based on pickle to (de)serialize, with fixed name, no need to manually register) and `GenericExtensionType` (with variable name and custom serialize, need to register). They give some different functionality to the user subclassing them, and not fully sure if or how to unify them. \r\n   (but if we keep them separate, a better name for \"GenericExtensionType\" would be welcome)\r\n   \r\n   I could also still look into \"autmatically\" registering using a metaclass.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-08-21T13:56:07.546+0000",
                    "updated": "2019-08-21T13:56:07.546+0000",
                    "started": "2019-08-21T13:56:07.545+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "298705",
                    "issueId": "13239533"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13239533/worklog/300101",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jorisvandenbossche commented on issue #5094: ARROW-5610: [Python] define extension types in Python\nURL: https://github.com/apache/arrow/pull/5094#issuecomment-524198242\n \n \n   cc @pitrou if you some time, a review would always be welcome since you wrote the original version\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-08-23T07:01:20.794+0000",
                    "updated": "2019-08-23T07:01:20.794+0000",
                    "started": "2019-08-23T07:01:20.793+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "300101",
                    "issueId": "13239533"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13239533/worklog/300471",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on pull request #5094: ARROW-5610: [Python] define extension types in Python\nURL: https://github.com/apache/arrow/pull/5094#discussion_r317282451\n \n \n\n ##########\n File path: python/pyarrow/public-api.pxi\n ##########\n @@ -93,8 +98,8 @@ cdef api object pyarrow_wrap_data_type(\n         out = Decimal128Type.__new__(Decimal128Type)\n     elif type.get().id() == _Type_EXTENSION:\n         ext_type = <const CExtensionType*> type.get()\n-        if ext_type.extension_name() == PyExtensionName():\n-            cpy_ext_type = <const CPyExtensionType*> ext_type\n+        cpy_ext_type = dynamic_cast[_CPyExtensionTypePtr](ext_type)\n+        if cpy_ext_type != nullptr:\n \n Review comment:\n   I didn't realize you could use `nullptr` in Cython is that new?\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-08-23T20:07:20.497+0000",
                    "updated": "2019-08-23T20:07:20.497+0000",
                    "started": "2019-08-23T20:07:20.497+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "300471",
                    "issueId": "13239533"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13239533/worklog/300472",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on pull request #5094: ARROW-5610: [Python] define extension types in Python\nURL: https://github.com/apache/arrow/pull/5094#discussion_r317279849\n \n \n\n ##########\n File path: cpp/src/arrow/python/extension_type.cc\n ##########\n @@ -72,9 +72,13 @@ static const char* kExtensionName = \"arrow.py_extension_type\";\n \n PyExtensionType::PyExtensionType(std::shared_ptr<DataType> storage_type, PyObject* typ,\n                                  PyObject* inst)\n-    : ExtensionType(storage_type), type_class_(typ), type_instance_(inst) {}\n+    : ExtensionType(storage_type), extension_name_(kExtensionName),\n+      type_class_(typ), type_instance_(inst) {}\n \n-std::string PyExtensionType::extension_name() const { return kExtensionName; }\n+PyExtensionType::PyExtensionType(std::shared_ptr<DataType> storage_type, std::string extension_name,\n+                                 PyObject* typ, PyObject* inst)\n+    : ExtensionType(storage_type), extension_name_(extension_name),\n \n Review comment:\n   Use `std::move(extension_name)` here to prevent copy\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-08-23T20:07:20.648+0000",
                    "updated": "2019-08-23T20:07:20.648+0000",
                    "started": "2019-08-23T20:07:20.647+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "300472",
                    "issueId": "13239533"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
            "id": "4",
            "description": "An improvement or enhancement to an existing feature or task.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
            "name": "Improvement",
            "subtask": false,
            "avatarId": 21140
        },
        "timespent": 37800,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@7c19863c[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@37c680[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@88b728e[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@3636b6d9[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@65d60678[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@443a4c0f[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@17764904[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@14f5a54d[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@41c5946d[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@5789f26e[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@7292aff2[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@4b74b320[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 37800,
        "customfield_12312520": null,
        "customfield_12312521": "Tue Sep 03 11:46:55 UTC 2019",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2019-09-03T11:46:55.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-5610/watchers",
            "watchCount": 3,
            "isWatching": false
        },
        "created": "2019-06-14T13:22:03.000+0000",
        "updated": "2019-09-03T11:47:07.000+0000",
        "timeoriginalestimate": null,
        "description": "In work in ARROW-840, a static {{arrow.py_extension_type}} name is used. There will be cases where an extension type is coming from another programming language (e.g. Java), so it would be useful to be able to \"plug in\" a Python extension type subclass that will be used to deserialize the extension type coming over the wire. This has some different API requirements since the serialized representation of the type will not have knowledge of Python pickling, etc. ",
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "10.5h",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 37800
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[Python] Define extension type API in Python to \"receive\" or \"send\" a foreign extension type",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13239533/comment/16864148",
                    "id": "16864148",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "body": "Is it the extension type that must be customized or just the array subclass?",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "created": "2019-06-14T14:40:34.705+0000",
                    "updated": "2019-06-14T14:40:34.705+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13239533/comment/16864364",
                    "id": "16864364",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "Suppose that Java sends an extension type with name {{orgname.special_type}}. We want to be able to write:\r\n\r\n{code}\r\nclass OrgSpecialType(pa.ExtensionType):\r\n    ...\r\n\r\nclass OrgSpecialArray(pa.ExtensionArray):\r\n    ...\r\n{code}\r\n\r\nand some API for registering these Python types as the landing zone for the {{orgname.special_type}} data. ",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2019-06-14T19:08:15.616+0000",
                    "updated": "2019-06-14T19:08:15.616+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13239533/comment/16867170",
                    "id": "16867170",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "Given everything else needed for the release, I moved this to the 1.0.0 milestone",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2019-06-19T02:27:25.918+0000",
                    "updated": "2019-06-19T02:27:25.918+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13239533/comment/16876438",
                    "id": "16876438",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "cc [~jorisvandenbossche]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2019-07-01T19:26:31.060+0000",
                    "updated": "2019-07-01T19:26:31.060+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13239533/comment/16876439",
                    "id": "16876439",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "I updated the issue title to indicate that we should be able to _send_ extension type metadata outside of the current {{arrow.py_extension_type}}. A more general serialization API will be called for",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2019-07-01T19:27:05.893+0000",
                    "updated": "2019-07-01T19:27:05.893+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13239533/comment/16881581",
                    "id": "16881581",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=jorisvandenbossche",
                        "name": "jorisvandenbossche",
                        "key": "jorisvandenbossche",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Joris Van den Bossche",
                        "active": true,
                        "timeZone": "Europe/Brussels"
                    },
                    "body": "I am trying to wrap my head around what is needed here. For the \"send\" part, we want to create a RecordBatch with an array that has an ExtensionType with a custom name. Currently, in C++ to have an ExtensionType with a custom name, you need to create and register a subclass (eg the {{UUIDType}} in the tests).  \r\n\r\nSo if we want to create and register such a subclass from python, does that mean we need to make a new C++ subclass from cython (not sure if that is actually possible) ? Or, are there ways to circumvent the need of a new class in C++ per extension type? Eg by having a single C++ class that takes the name as constructor argument (so where the {{extension_name}} attribute is not a constant), and then register an instance of that?\r\n\r\nCurrently, the Python types can be constructed from the C++ type because the pickled type is stored as the serialized metadata. For such a generic extension type that can be send to or come from other languages, we can't use pickle. Would we then need some *python-specific* registry (different from the C++ registry of extension types) for mapping extension names to a python constructor?",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=jorisvandenbossche",
                        "name": "jorisvandenbossche",
                        "key": "jorisvandenbossche",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Joris Van den Bossche",
                        "active": true,
                        "timeZone": "Europe/Brussels"
                    },
                    "created": "2019-07-09T21:54:34.435+0000",
                    "updated": "2019-07-09T21:54:34.435+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13239533/comment/16881941",
                    "id": "16881941",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "body": "I don't understand what Wes means either (\"\"\"_send_ extension type metadata outside of the current {{arrow.py_extension_type}}. A more general serialization API will be called for\"\"\").",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "created": "2019-07-10T10:35:30.373+0000",
                    "updated": "2019-07-10T10:35:30.373+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13239533/comment/16881990",
                    "id": "16881990",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=lidavidm",
                        "name": "lidavidm",
                        "key": "lidavidm",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "David Li",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "Right now, if you define an extension type in Java whose type name is not \"arrow.py_extension_type\", you have no way of writing the Python equivalent. I think what's needed is a C++ extension type whose implementation dispatches to Python callbacks, which can be instantiated and registered with an arbitrary name. Basically, what Joris suggests with the extension type that can be parameterized with a name.\r\n\r\nI think the implementation would be similar to Flight, where you have a C++ subclass that contains a set of function pointers and a Python object, and invokes those functions by passing them the Python object and the C++ arguments. The functions would be defined in Cython and take care of bridging between the two.\r\n\r\nI don't think there needs to be a Python-specific registry, just a way to hook arbitrary Python into the extension type metadata (de)serialization. Right now, the C++ subclass calls a specific classmethod that tries to unpickle the metadata, but there's no reason why it has to be pickle.",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=lidavidm",
                        "name": "lidavidm",
                        "key": "lidavidm",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "David Li",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2019-07-10T12:17:14.282+0000",
                    "updated": "2019-07-10T12:21:54.089+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13239533/comment/16882018",
                    "id": "16882018",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "body": "I don't understand what it means to \"write the Python equivalent\". Your extension type is implemented in Java: why would you reimplement it in Python?\r\n\r\nYou can already implement extension types in Python, and you can already use in Python extension types defined in other languages (though the latter is currently not tested, because we first need to expose libarrow_testing in a Cython module). What's missing exactly?\r\n\r\n\u00a0",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "created": "2019-07-10T12:50:59.457+0000",
                    "updated": "2019-07-10T12:50:59.457+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13239533/comment/16882027",
                    "id": "16882027",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=lidavidm",
                        "name": "lidavidm",
                        "key": "lidavidm",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "David Li",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "Say in Java, you have an extension type representing an IP address. Its type name is \"ip\" and its metadata indicates whether it's IPv4 or IPv6. You want to transfer a table containing a column of that type to and from Python. Right now, you can read that data from Python, but you can't create a table with that type. You could implement an extension type that behaves the same, but Java wouldn't recognize it, because the type name has to be \"arrow.py_extension_type\". You also can't deserialize the metadata written by Java or write metadata that Java can read, as it's not in pickle format.",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=lidavidm",
                        "name": "lidavidm",
                        "key": "lidavidm",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "David Li",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2019-07-10T12:58:35.507+0000",
                    "updated": "2019-07-10T12:58:35.507+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13239533/comment/16882035",
                    "id": "16882035",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=jorisvandenbossche",
                        "name": "jorisvandenbossche",
                        "key": "jorisvandenbossche",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Joris Van den Bossche",
                        "active": true,
                        "timeZone": "Europe/Brussels"
                    },
                    "body": "> You can already implement extension types in Python, and you can already use in Python extension types defined in other languages\r\n\r\nSo assume a UUIDType extension type is implemented in Java or Spark, and it is send to a Python process with arrow's communication layer. How would it look like with the current functionality in Python? \r\nAs I understand, you can only have a Python extension type with the name {{arrow.py_extension_type}} (although it can have a different serialisation), so how can you preserve the name of the UUIDType?\r\n\r\n(sorry, posted without seeing the previous response. It's duplicative of [~lidavidm]'s comment)",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=jorisvandenbossche",
                        "name": "jorisvandenbossche",
                        "key": "jorisvandenbossche",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Joris Van den Bossche",
                        "active": true,
                        "timeZone": "Europe/Brussels"
                    },
                    "created": "2019-07-10T13:06:29.431+0000",
                    "updated": "2019-07-10T13:08:04.231+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13239533/comment/16882036",
                    "id": "16882036",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "body": "> You want to transfer a table containing a column of that type to and from Python. Right now, you can read that data from Python, but you can't create a table with that type\r\n\r\nI'm curious, which error do you get when trying to do so?\r\n\r\n> You also can't deserialize the metadata written by Java or write metadata that Java can read, as it's not in pickle format.\r\n\r\nI think you're mixing up extension types defined *in Python* and extension types defined in other languages. I don't remember if the Python BaseExtensionType class lets you access the raw unserialized metadata. But if it doesn't, it's just a single property to add to that class ;)\r\n\r\nAs for _writing_ arbitrary metadata in the name of an existing ExtensionType, C++ doesn't allow you to do that IIRC, and Python just wraps the C++ class. So when you're complaining about a missing facility in Python, it seems you're actually complaining about a missing facility in C++.",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "created": "2019-07-10T13:09:26.126+0000",
                    "updated": "2019-07-10T13:09:26.126+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13239533/comment/16882039",
                    "id": "16882039",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=lidavidm",
                        "name": "lidavidm",
                        "key": "lidavidm",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "David Li",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "Hmm, to be frank, I haven't gotten a chance to evaluate the API yet, I'm just going off of reading the implementation. I'll follow up once I do get a chance to try it out. But I'm still not sure why the language that the type is defined in should matter - I thought the idea is there is an abstract type, and you implement it for each language, and right now the main limitation is that you can't implement a Python type with an arbitrary name. (i.e. I want a java UuidType, which uses java's UUID class, to map seamlessly to a Python UuidType using the uuid module).\r\n\r\nBut I suppose I should put up some code before I keep talking!",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=lidavidm",
                        "name": "lidavidm",
                        "key": "lidavidm",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "David Li",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2019-07-10T13:14:32.537+0000",
                    "updated": "2019-07-10T13:14:32.537+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13239533/comment/16882049",
                    "id": "16882049",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "body": "I see. My assumption was that any non-Python extension type used in Python would have to be implemented in C++, and that a \"Python extension type\" would simply be an extension type whose single implementation would be in Python.\r\n\r\nApparently there was a misunderstanding on the overall design of this... I'll let you guys figure this out and unsubscribe from this issue.",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "created": "2019-07-10T13:21:14.228+0000",
                    "updated": "2019-07-10T13:21:14.228+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13239533/comment/16882059",
                    "id": "16882059",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=jorisvandenbossche",
                        "name": "jorisvandenbossche",
                        "key": "jorisvandenbossche",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Joris Van den Bossche",
                        "active": true,
                        "timeZone": "Europe/Brussels"
                    },
                    "body": "> I see. My assumption was that any non-Python extension type used in Python would have to be implemented in C++\r\n\r\nI think this was indeed the misunderstanding between us in this thread, why we were talking past each other. I (and I think David as well) was assuming this issue is about figuring out how to do that _without_ needing to write custom C++ for each extension type defined in another language.",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=jorisvandenbossche",
                        "name": "jorisvandenbossche",
                        "key": "jorisvandenbossche",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Joris Van den Bossche",
                        "active": true,
                        "timeZone": "Europe/Brussels"
                    },
                    "created": "2019-07-10T13:30:24.567+0000",
                    "updated": "2019-07-10T13:30:24.567+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13239533/comment/16882082",
                    "id": "16882082",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "Right, one purpose of extension types is to communicate proprietary type metadata across language boundaries. I think we need to allow people to create an implementation of a type entirely in Python that can communicate with other languages (either receive something defined elsewhere, or be understood by another language).\r\n\r\nIf someone isn't up to the task of doing this, I can make some time in my schedule for it in the next 6-8 weeks. Let me know",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2019-07-10T13:56:37.836+0000",
                    "updated": "2019-07-10T13:57:12.279+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13239533/comment/16885281",
                    "id": "16885281",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=lidavidm",
                        "name": "lidavidm",
                        "key": "lidavidm",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "David Li",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "[~wesmckinn] I'll try to take a pass this week, if time permits; we would like this functionality. (By the way, is there a Jira explicitly for being able to hook into to_pandas, or a suggested way to efficiently do a custom Pandas conversion?)",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=lidavidm",
                        "name": "lidavidm",
                        "key": "lidavidm",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "David Li",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2019-07-15T14:30:03.671+0000",
                    "updated": "2019-07-15T14:30:03.671+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13239533/comment/16898927",
                    "id": "16898927",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=jorisvandenbossche",
                        "name": "jorisvandenbossche",
                        "key": "jorisvandenbossche",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Joris Van den Bossche",
                        "active": true,
                        "timeZone": "Europe/Brussels"
                    },
                    "body": "{quote}I'll try to take a pass this week, if time permits; we would like this functionality{quote}\r\n\r\n[~lidavidm] Did you further look at this?\r\n\r\n{quote}\r\nBy the way, is there a Jira explicitly for being able to hook into to_pandas, or a suggested way to efficiently do a custom Pandas conversion?)\r\n{quote}\r\n\r\nThere is ARROW-2428 for this about a hook into {{to_pandas}} to specify a custom conversion (there is also ARROW-5271 for the other way around: be able to specify the final arrow array in pandas -> arrow conversion).",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=jorisvandenbossche",
                        "name": "jorisvandenbossche",
                        "key": "jorisvandenbossche",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Joris Van den Bossche",
                        "active": true,
                        "timeZone": "Europe/Brussels"
                    },
                    "created": "2019-08-02T14:47:52.552+0000",
                    "updated": "2019-08-02T14:48:14.251+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13239533/comment/16898956",
                    "id": "16898956",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=lidavidm",
                        "name": "lidavidm",
                        "key": "lidavidm",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "David Li",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "My apologies, I ended up being too busy to look at this.\r\n\r\nThanks for the issue pointers.",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=lidavidm",
                        "name": "lidavidm",
                        "key": "lidavidm",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "David Li",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2019-08-02T14:52:32.397+0000",
                    "updated": "2019-08-02T14:52:32.397+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13239533/comment/16902129",
                    "id": "16902129",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=jorisvandenbossche",
                        "name": "jorisvandenbossche",
                        "key": "jorisvandenbossche",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Joris Van den Bossche",
                        "active": true,
                        "timeZone": "Europe/Brussels"
                    },
                    "body": "[~lidavidm] no apologies needed, it was just a question to check the status :)\r\n\r\n> > You want to transfer a table containing a column of that type to and from Python. Right now, you can read that data from Python, but you can't create a table with that type\r\n>\r\n> I'm curious, which error do you get when trying to do so?\r\n\r\nI tried this out, and so if you have an IPC message that contains an extension type unknown to Python / C++, and you read that into a (pyarrow) Table, you don't get an error at the moment, but it falls back to the storage type. But which also means that you loose all information about the extension type defined elsewhere (as discussed above).\r\n\r\nTo me, it seems that we would need some way to have an \"unknown extension type\" in C++ that can have arbitrary name and metadata to be able to receive such data.",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=jorisvandenbossche",
                        "name": "jorisvandenbossche",
                        "key": "jorisvandenbossche",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Joris Van den Bossche",
                        "active": true,
                        "timeZone": "Europe/Brussels"
                    },
                    "created": "2019-08-07T14:53:37.429+0000",
                    "updated": "2019-08-07T14:53:37.429+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13239533/comment/16902176",
                    "id": "16902176",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=jorisvandenbossche",
                        "name": "jorisvandenbossche",
                        "key": "jorisvandenbossche",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Joris Van den Bossche",
                        "active": true,
                        "timeZone": "Europe/Brussels"
                    },
                    "body": "> But which also means that you loose all information about the extension type defined elsewhere (as discussed above).\r\n\r\nCorrecting myself: this is not fully True. The _type_ is no longer an extension type (but the storage type), but the _field_ in the schema still has the metadata. \r\n\r\nFor example, reading an IPC file with python for an not-registered type (created from C++ where the 'ext' column was a Uuid type as defined in the tests):\r\n\r\n{code}\r\nIn [31]: f_ext = pa.ipc.open_stream(\"repos/arrow/cpp/build/examples/arrow/arrow-example-ipc-extension.arrow\")\r\n\r\nIn [32]: table = f_ext.read_all() \r\n\r\nIn [33]: table\r\nOut[33]: \r\npyarrow.Table\r\nint: int64\r\next: int64\r\n\r\nIn [35]: table.schema.field_by_name('ext')                                                                                                                                                                         \r\nOut[35]: pyarrow.Field<ext: int64>\r\n\r\nIn [36]: table.schema.field_by_name('ext').metadata                                                                                                                                                                \r\nOut[36]: \r\n{b'ARROW:extension:metadata': b'uuid-type-unique-code',\r\n b'ARROW:extension:name': b'uuid'}\r\n{code}\r\n\r\n",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=jorisvandenbossche",
                        "name": "jorisvandenbossche",
                        "key": "jorisvandenbossche",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Joris Van den Bossche",
                        "active": true,
                        "timeZone": "Europe/Brussels"
                    },
                    "created": "2019-08-07T15:39:38.430+0000",
                    "updated": "2019-08-07T15:39:38.430+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13239533/comment/16905256",
                    "id": "16905256",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=jorisvandenbossche",
                        "name": "jorisvandenbossche",
                        "key": "jorisvandenbossche",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Joris Van den Bossche",
                        "active": true,
                        "timeZone": "Europe/Brussels"
                    },
                    "body": "After looking at this some more, my idea to tackle this would be as follows:\r\n\r\nImplement a \"generic\" ExtensionType subclass in C++ (ARROW-6179) that allows a variable \"extension_name\" (and optionally metadata) as argument, and thus doesn't need to be subclassed to create a custom instance.   \r\nFrom Python, we can provide a class to interact with this (a class the user can further subclass, or by directly creating an instance of it) to have an extension type which name and metadata is used in IPC.\r\n\r\nThis is mainly for the sending part, and it wouldn't be registered as extension type in C++ . So for the receiving end, it would come back as an \"UnknownExtensionType\" (something already exists in the Python interface). In this design, if we want to have it come back as a specific ExtensionType subclass (without having it registered in C++), we might need a separate Python-specific registry.\r\n\r\nThe above approach seems doable to me. And also seems simpler as some C++ -> Python callbacks to have code in C++ interact with a custom Python class. \r\n\r\nThoughts on this?",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=jorisvandenbossche",
                        "name": "jorisvandenbossche",
                        "key": "jorisvandenbossche",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Joris Van den Bossche",
                        "active": true,
                        "timeZone": "Europe/Brussels"
                    },
                    "created": "2019-08-12T14:31:54.999+0000",
                    "updated": "2019-08-13T13:03:29.513+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13239533/comment/16905428",
                    "id": "16905428",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=lidavidm",
                        "name": "lidavidm",
                        "key": "lidavidm",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "David Li",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "[~jorisvandenbossche] the approach makes sense to me. I assume the generic ExtensionType would have a Python \"vtable\" for Python subclasses to implement the C++ methods, and that each Python subclass would somehow register a new instance of the C++ type (with corresponding Python method references) with the extension type registry? The registration method would need to support parameterized types as well (i.e. registering multiple instances of the same type with different parameters).\r\n\r\nThere's still the reference loop between C++ and Python. In this case, since you have no way of re-instantiating the Python instance if the weak reference is dropped, you'd need some other way - so you might have to make the Python-side registry, as a way to get around the reference loop. (Then, during interpreter shutdown, you would drop all the C++ extension type instance references, then drop the Python references.)\r\n\r\nI think then, on the C++ side, the generic extension type instance would get instantiated, but there would be no way to instantiate the corresponding Python class without a separate registry, as you mention. So the unknown extension type then comes into play. Alternatively, Python subclasses could be required to register a factory method that takes the extension type name and metadata.",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=lidavidm",
                        "name": "lidavidm",
                        "key": "lidavidm",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "David Li",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2019-08-12T17:44:18.888+0000",
                    "updated": "2019-08-12T17:44:18.888+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13239533/comment/16908131",
                    "id": "16908131",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=jorisvandenbossche",
                        "name": "jorisvandenbossche",
                        "key": "jorisvandenbossche",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Joris Van den Bossche",
                        "active": true,
                        "timeZone": "Europe/Brussels"
                    },
                    "body": "OK, I am making some progress on this (I initially was disregarding the parametrized type case, so we indeed need C++ <-> Python interaction). I have basic roundtripping with a parametrized type working. Eg in Python an implementor can do:\r\n{code:java}\r\nclass PeriodType(pa.GenericExtensionType):\r\n\r\n    def __init__(self, freq):\r\n        # attributes need to be set first before calling super init (as that calls serialize)\r\n        self.freq = freq\r\n        pa.lib.GenericExtensionType.__init__(self, pa.int64(), 'pandas.period')\r\n        \r\n    def __arrow_ext_serialize__(self):\r\n        return \"freq={}\".format(self.freq).encode()\r\n    \r\n    @classmethod\r\n    def __arrow_ext_deserialize__(cls, storage_type, serialized):\r\n        serialized = serialized.decode()\r\n        assert serialized.startswith(\"freq=\")\r\n        freq = serialized.split('=')[1]\r\n        return PeriodType(freq)\r\n\r\nperiod_type = PeriodType('D')\r\npa.lib.register(period_type)\r\n{code}\r\nand that can roundtrip IPC with the \"pandas.period\" extension name (so not a generic \"arrow.py_extension\").\r\n\r\nI based the above interface (the {{__arrow_ext_serialize_}} _and {{}}_{{_arrow_ext_deserialize__}} methods to implement) on the existing {{PyExtensionType}} that Antoine implemented.\r\n{quote}> I assume the generic ExtensionType would have a Python \"vtable\" for Python subclasses to implement the C++ methods\r\n{quote}\r\nSo currently I based myself on the existing {{PyExtensionType}} and copied the approach there to store a weakref to an instance and the class of the Python subclass the user defines. \r\n That seems to work, but I am not familiar enough with this to judge if the vtable approach (as used in PyFlightServer) would be better.\r\n{quote}> The registration method would need to support parameterized types as well (i.e. registering multiple instances of the same type with different parameters).\r\n{quote}\r\nIs that needed? My current idea is that you would register a certain type once (with _some_ parametrization, so you don't have to register each possible parametrization). Because we register in C++ based on the name, so otherwise the name would need to include the parameter. Actually, writing this down now, that could also be an option (currently I use the serialized metadata for storing the parametrization).\r\n\r\nOther questions I still need to answer:\r\n - What to do with registration and unregistration? It would be nice if a user didn't need to register a type manually (in python that could be done with a metaclass to register the subclass on definition, but not sure that is possible in cython)\r\n Also for unregistering, since that is needed to avoid segfaults on shutdown, we probably need to keep a python side registry of the C++-registered types to ensure we unregister them on shutdown.\r\n - Do we want to keep the current {{PyExtensionType}} based on pickle? I think the main advantage compared to the new implementation is that when reading an IPC message, the type does not need to be registered to be recognized (for the unpickling, it is enough that the module is importable, but does not need to be imported manually by the user). But on the other hand it gives two largely overlapping alternatives.\r\n\r\nI will try to clean up and push to a draft PR, which will be easier to get an idea. \r\n\r\n\u00a0",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=jorisvandenbossche",
                        "name": "jorisvandenbossche",
                        "key": "jorisvandenbossche",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Joris Van den Bossche",
                        "active": true,
                        "timeZone": "Europe/Brussels"
                    },
                    "created": "2019-08-15T14:16:40.434+0000",
                    "updated": "2019-08-15T14:16:40.434+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13239533/comment/16921362",
                    "id": "16921362",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "body": "Issue resolved by pull request 5094\n[https://github.com/apache/arrow/pull/5094]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "created": "2019-09-03T11:46:55.294+0000",
                    "updated": "2019-09-03T11:46:55.294+0000"
                }
            ],
            "maxResults": 25,
            "total": 25,
            "startAt": 0
        },
        "customfield_12311820": "0|z03r08:",
        "customfield_12314139": null
    }
}