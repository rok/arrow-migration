{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13319309",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13319309",
    "key": "ARROW-9557",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12345977",
                "id": "12345977",
                "description": "",
                "name": "2.0.0",
                "archived": false,
                "released": true,
                "releaseDate": "2020-10-19"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/4",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
            "name": "Minor",
            "id": "4"
        },
        "labels": [
            "performance",
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "1.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12347769",
                "id": "12347769",
                "description": "",
                "name": "1.0.0",
                "archived": false,
                "released": true,
                "releaseDate": "2020-07-24"
            }
        ],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=romainfrancois",
            "name": "romainfrancois",
            "key": "romainfrancois",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=romainfrancois&avatarId=35092",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=romainfrancois&avatarId=35092",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=romainfrancois&avatarId=35092",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=romainfrancois&avatarId=35092"
            },
            "displayName": "Romain Francois",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12333008",
                "id": "12333008",
                "name": "R"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=karldw",
            "name": "karldw",
            "key": "karldw",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=karldw&avatarId=39070",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=karldw&avatarId=39070",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=karldw&avatarId=39070",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=karldw&avatarId=39070"
            },
            "displayName": "Karl Dunkle Werner",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=karldw",
            "name": "karldw",
            "key": "karldw",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=karldw&avatarId=39070",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=karldw&avatarId=39070",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=karldw&avatarId=39070",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=karldw&avatarId=39070"
            },
            "displayName": "Karl Dunkle Werner",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "aggregateprogress": {
            "progress": 8400,
            "total": 8400,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 8400,
            "total": 8400,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-9557/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 14,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13319309/worklog/479577",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "romainfrancois opened a new pull request #8122:\nURL: https://github.com/apache/arrow/pull/8122\n\n\n   I don't think this is about `shared_ptr_is_null()` as indicated in the jira issue: https://issues.apache.org/jira/browse/ARROW-9557 I guess profvis (or probably the underlying profiler) struggles with that case. \r\n   \r\n   What happens though is that `$ReadTable()` first calls `$GetSchema()`: \r\n   \r\n   ```r\r\n   ReadTable = function(col_select = NULL) {\r\n         col_select <- enquo(col_select)\r\n         if (quo_is_null(col_select)) {\r\n           shared_ptr(Table, parquet___arrow___FileReader__ReadTable1(self))\r\n         } else {\r\n           all_vars <- shared_ptr(Schema, parquet___arrow___FileReader__GetSchema(self))$names\r\n           indices <- match(vars_select(all_vars, !!col_select), all_vars) - 1L\r\n           shared_ptr(Table, parquet___arrow___FileReader__ReadTable2(self, indices))\r\n         }\r\n       }\r\n   ```\r\n   \r\n   and that's expensive for some reason: \r\n   \r\n   ``` r\r\n   library(arrow)\r\n   #> \r\n   #> Attaching package: 'arrow'\r\n   #> The following object is masked from 'package:utils':\r\n   #> \r\n   #>     timestamp\r\n   library(vctrs)\r\n   #> \r\n   #> Attaching package: 'vctrs'\r\n   #> The following objects are masked from 'package:arrow':\r\n   #> \r\n   #>     field, list_of\r\n   library(purrr)\r\n   \r\n   df <- new_data_frame(\r\n     map(set_names(1:4000), ~rnorm(50000))\r\n   )\r\n   tf <- tempfile()\r\n   write_parquet(df, tf)\r\n   \r\n   reader <- ParquetFileReader$create(tf)\r\n   \r\n   parquet___arrow___FileReader__GetSchema <- arrow:::parquet___arrow___FileReader__GetSchema\r\n   parquet___arrow___FileReader__ReadColumn <- arrow:::parquet___arrow___FileReader__ReadColumn\r\n   \r\n   system.time({\r\n     for (i in 1:4000) {\r\n       parquet___arrow___FileReader__GetSchema(reader)\r\n     }\r\n   })\r\n   #>    user  system elapsed \r\n   #>  43.809   1.744  47.962\r\n   \r\n   system.time({\r\n     for (i in 1:4000) {\r\n       parquet___arrow___FileReader__ReadColumn(reader, i)\r\n     }\r\n   })\r\n   #>    user  system elapsed \r\n   #>   3.035   2.448  10.606\r\n   ```\r\n   \r\n   <sup>Created on 2020-09-07 by the [reprex package](https://reprex.tidyverse.org) (v0.3.0.9001)</sup>\r\n   \r\n   So we probably need a more complete R6 wrapper around `parquet::arrow::FileReader`. https://github.com/apache/arrow/blob/master/cpp/src/parquet/arrow/reader.h#L107\r\n   \r\n   As a start, here is `$GetColumn()`\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-09-07T10:52:21.759+0000",
                    "updated": "2020-09-07T10:52:21.759+0000",
                    "started": "2020-09-07T10:52:21.758+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "479577",
                    "issueId": "13319309"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13319309/worklog/479585",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "github-actions[bot] commented on pull request #8122:\nURL: https://github.com/apache/arrow/pull/8122#issuecomment-688252332\n\n\n   https://issues.apache.org/jira/browse/ARROW-9557\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-09-07T11:05:38.688+0000",
                    "updated": "2020-09-07T11:05:38.688+0000",
                    "started": "2020-09-07T11:05:38.688+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "479585",
                    "issueId": "13319309"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13319309/worklog/479618",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "romainfrancois commented on pull request #8122:\nURL: https://github.com/apache/arrow/pull/8122#issuecomment-688284689\n\n\n   also, I guess `$ReadTable()` could either be simplified to only use column indices (as in the C++ function)\r\n   \r\n   ```cpp\r\n   virtual ::arrow::Status ReadTable(const std::vector<int>& column_indices,\r\n                                       std::shared_ptr<::arrow::Table>* out) = 0;\r\n   ```\r\n   \r\n   or maybe have some arguments to turn off potentially expensive tidyselect logic, that has to retrieve the schema ...\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-09-07T12:11:03.098+0000",
                    "updated": "2020-09-07T12:11:03.098+0000",
                    "started": "2020-09-07T12:11:03.098+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "479618",
                    "issueId": "13319309"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13319309/worklog/488099",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "romainfrancois commented on pull request #8122:\nURL: https://github.com/apache/arrow/pull/8122#issuecomment-696593899\n\n\n   The methods of `ParquetFileReader` no longer use tidyselect, i.e. you can use `$ReadTable()` or `$ReadTable(column_indices)` with an 0-based integer vector so this does not have to pay for retrieving the schema (which appears to be expensive) and invoke tidy selection. \r\n   \r\n   `read_parquet(col_select=<tidy selection spec>)` is still supported though, and does call `$GetSchema()`. \r\n   \r\n   In addition, methods `ReadRowGroup()` and `$ReadRowGroups()` have been added. \n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-09-22T08:55:08.948+0000",
                    "updated": "2020-09-22T08:55:08.948+0000",
                    "started": "2020-09-22T08:55:08.947+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "488099",
                    "issueId": "13319309"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13319309/worklog/488372",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nealrichardson commented on a change in pull request #8122:\nURL: https://github.com/apache/arrow/pull/8122#discussion_r492850251\n\n\n\n##########\nFile path: r/R/parquet.R\n##########\n@@ -409,10 +420,20 @@ ParquetFileWriter$create <- function(schema,\n #'\n #' @section Methods:\n #'\n-#' - `$ReadTable(col_select)`: get an `arrow::Table` from the file, possibly\n-#'    with columns filtered by a character vector of column names or a\n-#'    `tidyselect` specification.\n+#' - `$ReadTable(column_indices)`: get an `arrow::Table` from the file. The optional\n+#'    `column_indices=` argument is a 0-based integer vector indicating which columns to retain.\n+#' - `$ReadRowGroup(i, column_indices)`: get an `arrow::Table` by reading the `i`th row group.\n\nReview comment:\n       Is `i` also 0-based?\n\n##########\nFile path: r/R/parquet.R\n##########\n@@ -409,10 +420,20 @@ ParquetFileWriter$create <- function(schema,\n #'\n #' @section Methods:\n #'\n-#' - `$ReadTable(col_select)`: get an `arrow::Table` from the file, possibly\n-#'    with columns filtered by a character vector of column names or a\n-#'    `tidyselect` specification.\n+#' - `$ReadTable(column_indices)`: get an `arrow::Table` from the file. The optional\n+#'    `column_indices=` argument is a 0-based integer vector indicating which columns to retain.\n+#' - `$ReadRowGroup(i, column_indices)`: get an `arrow::Table` by reading the `i`th row group.\n+#'    The optional `column_indices=` argument is a 0-based integer vector indicating which columns to retain.\n+#' - `$ReadRowGroups(row_groups, column_indices)`: get an `arrow::Table` by reading several row groups.\n\nReview comment:\n       are `row_groups` also integers? 0-based?\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-09-22T15:59:13.056+0000",
                    "updated": "2020-09-22T15:59:13.056+0000",
                    "started": "2020-09-22T15:59:13.056+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "488372",
                    "issueId": "13319309"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13319309/worklog/488825",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nealrichardson commented on a change in pull request #8122:\nURL: https://github.com/apache/arrow/pull/8122#discussion_r492850251\n\n\n\n##########\nFile path: r/R/parquet.R\n##########\n@@ -409,10 +420,20 @@ ParquetFileWriter$create <- function(schema,\n #'\n #' @section Methods:\n #'\n-#' - `$ReadTable(col_select)`: get an `arrow::Table` from the file, possibly\n-#'    with columns filtered by a character vector of column names or a\n-#'    `tidyselect` specification.\n+#' - `$ReadTable(column_indices)`: get an `arrow::Table` from the file. The optional\n+#'    `column_indices=` argument is a 0-based integer vector indicating which columns to retain.\n+#' - `$ReadRowGroup(i, column_indices)`: get an `arrow::Table` by reading the `i`th row group.\n\nReview comment:\n       Is `i` also 0-based?\n\n##########\nFile path: r/R/parquet.R\n##########\n@@ -409,10 +420,20 @@ ParquetFileWriter$create <- function(schema,\n #'\n #' @section Methods:\n #'\n-#' - `$ReadTable(col_select)`: get an `arrow::Table` from the file, possibly\n-#'    with columns filtered by a character vector of column names or a\n-#'    `tidyselect` specification.\n+#' - `$ReadTable(column_indices)`: get an `arrow::Table` from the file. The optional\n+#'    `column_indices=` argument is a 0-based integer vector indicating which columns to retain.\n+#' - `$ReadRowGroup(i, column_indices)`: get an `arrow::Table` by reading the `i`th row group.\n+#'    The optional `column_indices=` argument is a 0-based integer vector indicating which columns to retain.\n+#' - `$ReadRowGroups(row_groups, column_indices)`: get an `arrow::Table` by reading several row groups.\n\nReview comment:\n       are `row_groups` also integers? 0-based?\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-09-23T04:12:31.829+0000",
                    "updated": "2020-09-23T04:12:31.829+0000",
                    "started": "2020-09-23T04:12:31.829+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "488825",
                    "issueId": "13319309"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13319309/worklog/488897",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "romainfrancois commented on pull request #8122:\nURL: https://github.com/apache/arrow/pull/8122#issuecomment-696593899\n\n\n   The methods of `ParquetFileReader` no longer use tidyselect, i.e. you can use `$ReadTable()` or `$ReadTable(column_indices)` with an 0-based integer vector so this does not have to pay for retrieving the schema (which appears to be expensive) and invoke tidy selection. \r\n   \r\n   `read_parquet(col_select=<tidy selection spec>)` is still supported though, and does call `$GetSchema()`. \r\n   \r\n   In addition, methods `ReadRowGroup()` and `$ReadRowGroups()` have been added. \n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-09-23T04:17:54.969+0000",
                    "updated": "2020-09-23T04:17:54.969+0000",
                    "started": "2020-09-23T04:17:54.969+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "488897",
                    "issueId": "13319309"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13319309/worklog/489481",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "romainfrancois commented on pull request #8122:\nURL: https://github.com/apache/arrow/pull/8122#issuecomment-697227723\n\n\n   I added some tests for `ReadRowGroup(s)()` and clarified about 0-based. \r\n   \r\n   I'm getting a weird error in some cases with `ReadRowGroups()`: \r\n   \r\n   ``` r\r\n   library(arrow, warn.conflicts = FALSE)\r\n   \r\n   tab <- Table$create(x = 1:100)\r\n   tf <- tempfile()\r\n   write_parquet(tab, tf, chunk_size = 10)\r\n   \r\n   reader <- ParquetFileReader$create(tf)\r\n   # sensible error\r\n   reader$ReadRowGroups(-2)\r\n   #> Error in parquet___arrow___FileReader__ReadRowGroups1(self, row_groups): Invalid: Some index in row_group_indices is -2, which is either < 0 or >= num_row_groups(10)\r\n   #> In /Users/romainfrancois/git/apache/arrow/cpp/src/parquet/arrow/reader.cc, line 842, code: BoundsCheck(row_groups, column_indices)\r\n   \r\n   # weird error\r\n   reader$ReadRowGroups(c(0, -2))\r\n   #> Error in parquet___arrow___FileReader__ReadRowGroups1(self, row_groups): IOError: The file only has 0 columns, requested metadata for column: 0\r\n   #> In /Users/romainfrancois/git/apache/arrow/cpp/src/parquet/arrow/reader.cc, line 873, code: final_status\r\n   ```\r\n   \r\n   <sup>Created on 2020-09-23 by the [reprex package](https://reprex.tidyverse.org) (v0.3.0.9001)</sup>\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-09-23T08:51:41.134+0000",
                    "updated": "2020-09-23T08:51:41.134+0000",
                    "started": "2020-09-23T08:51:41.133+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "489481",
                    "issueId": "13319309"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13319309/worklog/489484",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "romainfrancois commented on pull request #8122:\nURL: https://github.com/apache/arrow/pull/8122#issuecomment-697232130\n\n\n   This returns too early, I believe this needs to be `RETURN_NOT_OK` instead of `return`: \r\n   https://github.com/apache/arrow/blob/master/cpp/src/parquet/arrow/reader.cc#L185\r\n   \r\n   ```cpp\r\n     Status BoundsCheck(const std::vector<int>& row_groups,\r\n                        const std::vector<int>& column_indices) {\r\n       for (int i : row_groups) {\r\n         return BoundsCheckRowGroup(i);\r\n       }\r\n       for (int i : column_indices) {\r\n         return BoundsCheckColumn(i);\r\n       }\r\n       return Status::OK();\r\n     }\r\n   ```\r\n   \r\n   \r\n   \n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-09-23T08:59:41.823+0000",
                    "updated": "2020-09-23T08:59:41.823+0000",
                    "started": "2020-09-23T08:59:41.823+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "489484",
                    "issueId": "13319309"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13319309/worklog/489489",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "romainfrancois commented on a change in pull request #8122:\nURL: https://github.com/apache/arrow/pull/8122#discussion_r493346352\n\n\n\n##########\nFile path: cpp/src/parquet/arrow/reader.cc\n##########\n@@ -174,10 +174,10 @@ class FileReaderImpl : public FileReader {\n   Status BoundsCheck(const std::vector<int>& row_groups,\n                      const std::vector<int>& column_indices) {\n     for (int i : row_groups) {\n-      return BoundsCheckRowGroup(i);\n+      RETURN_NOT_OK(BoundsCheckRowGroup(i));\n\nReview comment:\n       ping @bkietz I'm happy to revert this commit and have another pr if preferred. \n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-09-23T09:08:26.771+0000",
                    "updated": "2020-09-23T09:08:26.771+0000",
                    "started": "2020-09-23T09:08:26.771+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "489489",
                    "issueId": "13319309"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13319309/worklog/489639",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nealrichardson commented on a change in pull request #8122:\nURL: https://github.com/apache/arrow/pull/8122#discussion_r493703796\n\n\n\n##########\nFile path: r/R/parquet.R\n##########\n@@ -432,19 +453,45 @@ ParquetFileReader <- R6Class(\"ParquetFileReader\",\n   active = list(\n     num_rows = function() {\n       as.integer(parquet___arrow___FileReader__num_rows(self))\n+    },\n+    num_columns = function() {\n+      parquet___arrow___FileReader__num_columns(self)\n+    },\n+    num_row_groups = function() {\n+      parquet___arrow___FileReader__num_row_groups(self)\n     }\n   ),\n   public = list(\n-    ReadTable = function(col_select = NULL) {\n-      col_select <- enquo(col_select)\n-      if (quo_is_null(col_select)) {\n+    ReadTable = function(column_indices = NULL) {\n+      if (is.null(column_indices)) {\n         shared_ptr(Table, parquet___arrow___FileReader__ReadTable1(self))\n+      } else if (is_integerish(column_indices)) {\n\nReview comment:\n       Hmm, the others don't check is_integerish, and if you do check that here, you have a missing `else` case to add. Presumably `vec_cast` will error for you if you give it something that isn't reasonably an integer?\r\n   \r\n   ```suggestion\r\n         } else {\r\n   ```\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-09-23T15:54:38.884+0000",
                    "updated": "2020-09-23T15:54:38.884+0000",
                    "started": "2020-09-23T15:54:38.884+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "489639",
                    "issueId": "13319309"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13319309/worklog/489732",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "bkietz commented on a change in pull request #8122:\nURL: https://github.com/apache/arrow/pull/8122#discussion_r493791622\n\n\n\n##########\nFile path: cpp/src/parquet/arrow/reader.cc\n##########\n@@ -174,10 +174,10 @@ class FileReaderImpl : public FileReader {\n   Status BoundsCheck(const std::vector<int>& row_groups,\n                      const std::vector<int>& column_indices) {\n     for (int i : row_groups) {\n-      return BoundsCheckRowGroup(i);\n+      RETURN_NOT_OK(BoundsCheckRowGroup(i));\n\nReview comment:\n       No need to wait. That's an embarrassing bug, thanks for catching it\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-09-23T18:11:32.914+0000",
                    "updated": "2020-09-23T18:11:32.914+0000",
                    "started": "2020-09-23T18:11:32.913+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "489732",
                    "issueId": "13319309"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13319309/worklog/490287",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nealrichardson closed pull request #8122:\nURL: https://github.com/apache/arrow/pull/8122\n\n\n   \n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-09-24T15:39:59.000+0000",
                    "updated": "2020-09-24T15:39:59.000+0000",
                    "started": "2020-09-24T15:39:58.999+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "490287",
                    "issueId": "13319309"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13319309/worklog/491122",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nealrichardson closed pull request #8122:\nURL: https://github.com/apache/arrow/pull/8122\n\n\n   \n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-09-25T13:44:19.418+0000",
                    "updated": "2020-09-25T13:44:19.418+0000",
                    "started": "2020-09-25T13:44:19.418+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "491122",
                    "issueId": "13319309"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
            "id": "4",
            "description": "An improvement or enhancement to an existing feature or task.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
            "name": "Improvement",
            "subtask": false,
            "avatarId": 21140
        },
        "timespent": 8400,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@4f6b3edc[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@70285b63[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@215452df[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@1395f6d5[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@7674f9e6[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@39dd2639[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@3a1c4977[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@60333bf[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@57694150[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@755596a[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@5fdaff06[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@405bb189[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 8400,
        "customfield_12312520": null,
        "customfield_12312521": "Thu Sep 24 15:40:02 UTC 2020",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2020-09-24T15:40:02.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-9557/watchers",
            "watchCount": 2,
            "isWatching": false
        },
        "created": "2020-07-25T20:42:09.000+0000",
        "updated": "2020-09-25T13:44:20.000+0000",
        "timeoriginalestimate": null,
        "description": "I've found that reading in a parquet file one column at a time is slow in R \u2013 much slower than reading the whole all at once in R, or reading one column at a time in Python.\r\n\r\nAn example is below, though it's certainly possible I've done my benchmarking incorrectly.\r\n\r\n\u00a0\r\n\r\nPython setup and benchmarking:\r\n{code:python}\r\nimport numpy as np\r\nimport pyarrow\r\nimport pyarrow.parquet as pq\r\nfrom numpy.random import default_rng\r\nfrom time import time\r\n\r\n# Create a large, random array to save. ~1.5 GB.\r\nrng = default_rng(seed = 1)\r\nn_col = 4000\r\nn_row = 50000\r\n\r\nmat = rng.standard_normal((n_col, n_row))\r\ncol_names = [str(nm) for nm in range(n_col)]\r\ntab = pyarrow.Table.from_arrays(mat, names=col_names)\r\n\r\npq.write_table(tab, \"test_tab.parquet\", use_dictionary=False)\r\n\r\n# How long does it take to read the whole thing in python?\r\ntime_start = time()\r\n_ = pq.read_table(\"test_tab.parquet\") # edit: corrected filename\r\nelapsed = time() - time_start\r\nprint(elapsed) # under 1 second on my computer\r\n\r\n\r\ntime_start = time()\r\nf = pq.ParquetFile(\"test_tab.parquet\")\r\nfor one_col in col_names:\r\n    _ = f.read(one_col).column(0)\r\n\r\nelapsed = time() - time_start\r\nprint(elapsed) # about 2 seconds\r\n\r\n\r\n{code}\r\nR benchmarking, using the same {{test_tab.parquet}} file\r\n{code:r}\r\nlibrary(arrow)\r\n\r\nread_by_column <- function(f) {\r\n    table = ParquetFileReader$create(f)\r\n    cols <- as.character(0:3999)\r\n    purrr::walk(cols, ~table$ReadTable(.)$column(0))\r\n}\r\n\r\nbench::mark(\r\n    read_parquet(\"test_tab.parquet\", as_data_frame=FALSE), #   0.6 s\r\n    read_parquet(\"test_tab.parquet\", as_data_frame=TRUE),  #   1 s\r\n    read_by_column(\"test_tab.parquet\"),                    # 100 s\r\n    check=FALSE\r\n)\r\n\r\n{code}",
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "2h 20m",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 8400
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/attachment/13008606",
                "id": "13008606",
                "filename": "profile_screenshot.png",
                "author": {
                    "self": "https://issues.apache.org/jira/rest/api/2/user?username=karldw",
                    "name": "karldw",
                    "key": "karldw",
                    "avatarUrls": {
                        "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=karldw&avatarId=39070",
                        "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=karldw&avatarId=39070",
                        "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=karldw&avatarId=39070",
                        "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=karldw&avatarId=39070"
                    },
                    "displayName": "Karl Dunkle Werner",
                    "active": true,
                    "timeZone": "Etc/UTC"
                },
                "created": "2020-07-28T15:07:48.955+0000",
                "size": 109095,
                "mimeType": "image/png",
                "content": "https://issues.apache.org/jira/secure/attachment/13008606/profile_screenshot.png"
            }
        ],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[R] Iterating over parquet columns is slow in R",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13319309/comment/17165797",
                    "id": "17165797",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=npr",
                        "name": "npr",
                        "key": "npr",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
                        },
                        "displayName": "Neal Richardson",
                        "active": true,
                        "timeZone": "America/Los_Angeles"
                    },
                    "body": "Hmm, I wouldn't expect that big of a difference. Reading through the source, the Python and R bindings look like they're doing about the same thing, but there must be something they're doing differently (assuming that {{\"test_tab.pq\"}} in your faster Python example is a typo and not secretly a much smaller file ;)\r\n\r\nWould you mind profiling the read_by_column function to see what it's doing in that 100 seconds? My guess is that there's something it's doing inside the loop that seems cheap enough but adds up when you call it 4000 times.",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=npr",
                        "name": "npr",
                        "key": "npr",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
                        },
                        "displayName": "Neal Richardson",
                        "active": true,
                        "timeZone": "America/Los_Angeles"
                    },
                    "created": "2020-07-27T15:28:42.850+0000",
                    "updated": "2020-07-27T15:28:42.850+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13319309/comment/17166497",
                    "id": "17166497",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=karldw",
                        "name": "karldw",
                        "key": "karldw",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=karldw&avatarId=39070",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=karldw&avatarId=39070",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=karldw&avatarId=39070",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=karldw&avatarId=39070"
                        },
                        "displayName": "Karl Dunkle Werner",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "It looks like {{shared_ptr_is_null}} is taking half the time, and {{vars_select_eval}} is taking another third.\r\n\r\nI attached a screenshot of benchmark results from running the code below. (No difference from the original code I posted, except {{read_one}} is broken out into its own function.)\r\n{code:r}\r\nlibrary(arrow)\r\n\r\nread_one <- function(col, table) {\r\n  x = table$ReadTable(col)\r\n  x$column(0)\r\n}\r\n\r\nread_by_column <- function(f) {\r\n  table = ParquetFileReader$create(f)\r\n  cols <- as.character(0:3999)\r\n  purrr::walk(cols, read_one, table=table)\r\n}\r\n\r\nread_by_column(\"test_tab.parquet\")\r\n\r\n{code}",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=karldw",
                        "name": "karldw",
                        "key": "karldw",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=karldw&avatarId=39070",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=karldw&avatarId=39070",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=karldw&avatarId=39070",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=karldw&avatarId=39070"
                        },
                        "displayName": "Karl Dunkle Werner",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2020-07-28T15:16:43.745+0000",
                    "updated": "2020-07-28T15:16:43.745+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13319309/comment/17166611",
                    "id": "17166611",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=npr",
                        "name": "npr",
                        "key": "npr",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
                        },
                        "displayName": "Neal Richardson",
                        "active": true,
                        "timeZone": "America/Los_Angeles"
                    },
                    "body": "Interesting, thanks for sharing. Will definitely take a look.\r\n\r\nFYI [~romainfrancois]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=npr",
                        "name": "npr",
                        "key": "npr",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
                        },
                        "displayName": "Neal Richardson",
                        "active": true,
                        "timeZone": "America/Los_Angeles"
                    },
                    "created": "2020-07-28T18:12:33.137+0000",
                    "updated": "2020-07-28T18:12:33.137+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13319309/comment/17201599",
                    "id": "17201599",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=npr",
                        "name": "npr",
                        "key": "npr",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
                        },
                        "displayName": "Neal Richardson",
                        "active": true,
                        "timeZone": "America/Los_Angeles"
                    },
                    "body": "Issue resolved by pull request 8122\n[https://github.com/apache/arrow/pull/8122]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=npr",
                        "name": "npr",
                        "key": "npr",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
                        },
                        "displayName": "Neal Richardson",
                        "active": true,
                        "timeZone": "America/Los_Angeles"
                    },
                    "created": "2020-09-24T15:40:02.344+0000",
                    "updated": "2020-09-24T15:40:02.344+0000"
                }
            ],
            "maxResults": 4,
            "total": 4,
            "startAt": 0
        },
        "customfield_12311820": "0|z0h6x4:",
        "customfield_12314139": null
    }
}