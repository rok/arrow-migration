{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13225633",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13225633",
    "key": "ARROW-5092",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12344925",
                "id": "12344925",
                "description": "",
                "name": "0.14.0",
                "archived": false,
                "released": true,
                "releaseDate": "2019-07-04"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "name": "Major",
            "id": "3"
        },
        "labels": [
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12343937",
                "id": "12343937",
                "description": "",
                "name": "0.13.0",
                "archived": false,
                "released": true,
                "releaseDate": "2019-04-01"
            }
        ],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=shiro615",
            "name": "shiro615",
            "key": "shiro615",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34043",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34043",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34043",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34043"
            },
            "displayName": "Yosuke Shiro",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12334712",
                "id": "12334712",
                "name": "C#"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=eerhardt",
            "name": "eerhardt",
            "key": "eerhardt",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=eerhardt&avatarId=37925",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=eerhardt&avatarId=37925",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=eerhardt&avatarId=37925",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=eerhardt&avatarId=37925"
            },
            "displayName": "Eric Erhardt",
            "active": true,
            "timeZone": "America/North_Dakota/New_Salem"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=eerhardt",
            "name": "eerhardt",
            "key": "eerhardt",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=eerhardt&avatarId=37925",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=eerhardt&avatarId=37925",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=eerhardt&avatarId=37925",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=eerhardt&avatarId=37925"
            },
            "displayName": "Eric Erhardt",
            "active": true,
            "timeZone": "America/North_Dakota/New_Salem"
        },
        "aggregateprogress": {
            "progress": 27000,
            "total": 27000,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 27000,
            "total": 27000,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-5092/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 47,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13225633/worklog/255112",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "shiro615 commented on pull request #4488: ARROW-5092: [C#] Create a dummy .git directory to download the source files from GitHub with Source Link\nURL: https://github.com/apache/arrow/pull/4488\n \n \n   \n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-06-06T14:08:09.172+0000",
                    "updated": "2019-06-06T14:08:09.172+0000",
                    "started": "2019-06-06T14:08:09.171+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "255112",
                    "issueId": "13225633"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13225633/worklog/255198",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "eerhardt commented on pull request #4488: ARROW-5092: [C#] Create a dummy .git directory to download the source files from GitHub with Source Link\nURL: https://github.com/apache/arrow/pull/4488#discussion_r291247481\n \n \n\n ##########\n File path: dev/release/post-06-csharp.sh\n ##########\n @@ -44,6 +44,16 @@ curl \\\n rm -rf ${archive_name}\n tar xf ${tar_gz}\n pushd ${archive_name}/csharp\n+\n+# Create a dummy .git/ directory to download the source files from GitHub with Source Link.\n+mkdir .git && cd $_\n \n Review comment:\n   I think this `.git` directory needs to be one directory up, above the `csharp` directory. Basically, it needs to match what a \"normal\" git repo would look like.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-06-06T15:40:27.718+0000",
                    "updated": "2019-06-06T15:40:27.718+0000",
                    "started": "2019-06-06T15:40:27.717+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "255198",
                    "issueId": "13225633"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13225633/worklog/255205",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "eerhardt commented on pull request #4488: ARROW-5092: [C#] Create a dummy .git directory to download the source files from GitHub with Source Link\nURL: https://github.com/apache/arrow/pull/4488#discussion_r291252286\n \n \n\n ##########\n File path: dev/release/post-06-csharp.sh\n ##########\n @@ -44,6 +44,16 @@ curl \\\n rm -rf ${archive_name}\n tar xf ${tar_gz}\n pushd ${archive_name}/csharp\n+\n+# Create a dummy .git/ directory to download the source files from GitHub with Source Link.\n+mkdir .git && cd $_\n+curl \\\n+  https://api.github.com/repos/apache/arrow/tags | \\\n+  jq \".[] | select(.name==\\\"${archive_name}\\\") | .commit.sha\" >> HEAD\n+sed -i -e \"s/\\\"//g\" HEAD\n+echo '[remote \"origin\"] url = https://github.com/apache/arrow.git' >> config\n+mkdir objects refs\n+\n dotnet pack -c Release\n \n Review comment:\n   When `dotnet pack` is executed, it needs to be executed from the `${archive_name}/csharp` directory. But it looks like the script is currently in the `${archive_name}/csharp/.git` directory. Make sure you change to the correct directory before running `dotnet pack`.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-06-06T15:50:43.005+0000",
                    "updated": "2019-06-06T15:50:43.005+0000",
                    "started": "2019-06-06T15:50:43.004+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "255205",
                    "issueId": "13225633"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13225633/worklog/255444",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "kou commented on issue #4488: ARROW-5092: [C#] Create a dummy .git directory to download the source files from GitHub with Source Link\nURL: https://github.com/apache/arrow/pull/4488#issuecomment-499668802\n \n \n   Dummy `.git/` in release archive may break Python package because it check `.git/` directory...\r\n   https://github.com/apache/arrow/blob/master/python/setup.py#L512\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-06-06T21:10:14.605+0000",
                    "updated": "2019-06-06T21:10:14.605+0000",
                    "started": "2019-06-06T21:10:14.604+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "255444",
                    "issueId": "13225633"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13225633/worklog/256033",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "shiro615 commented on issue #4488: ARROW-5092: [C#] Create a dummy .git directory to download the source files from GitHub with Source Link\nURL: https://github.com/apache/arrow/pull/4488#issuecomment-499951461\n \n \n   @eerhardt Thank you for pointing out. I'll fix them.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-06-07T16:28:38.704+0000",
                    "updated": "2019-06-07T16:28:38.704+0000",
                    "started": "2019-06-07T16:28:38.704+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "256033",
                    "issueId": "13225633"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13225633/worklog/256087",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "shiro615 commented on issue #4488: ARROW-5092: [C#] Create a dummy .git directory to download the source files from GitHub with Source Link\nURL: https://github.com/apache/arrow/pull/4488#issuecomment-499969077\n \n \n   > Can we do this in dev/release/02-source.sh? Then we can verify this in release vote process.\r\n   \r\n   Yes. I've moved  the script to create a dummy `.git` directory to `dev/release/02-source.sh`.\r\n   \r\n   > Dummy .git/ in release archive may break Python package because it check .git/ directory...\r\n   \r\n   How about checking files that do not exist in the dummy `.git` directory such as `.git/index`?\r\n   \r\n   ```\r\n   --- a/python/setup.py\r\n   +++ b/python/setup.py\r\n   @@ -509,7 +509,7 @@ def _move_shared_libs_unix(build_prefix, build_lib, lib_name):\r\n    # If the event of not running from a git clone (e.g. from a git archive\r\n    # or a Python sdist), see if we can set the version number ourselves\r\n    default_version = '0.14.0-SNAPSHOT'\r\n   -if (not os.path.exists('../.git')\r\n   +if (not os.path.exists('../.git/index')\r\n            and not os.environ.get('SETUPTOOLS_SCM_PRETEND_VERSION')):\r\n   ```\r\n   \n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-06-07T17:22:41.875+0000",
                    "updated": "2019-06-07T17:22:41.875+0000",
                    "started": "2019-06-07T17:22:41.874+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "256087",
                    "issueId": "13225633"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13225633/worklog/256092",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "shiro615 commented on issue #4488: ARROW-5092: [C#] Create a dummy .git directory to download the source files from GitHub with Source Link\nURL: https://github.com/apache/arrow/pull/4488#issuecomment-499969077\n \n \n   > Can we do this in dev/release/02-source.sh? Then we can verify this in release vote process.\r\n   \r\n   Yes. I've moved  the script to create a dummy `.git` directory to `dev/release/02-source.sh`.\r\n   \r\n   > Dummy .git/ in release archive may break Python package because it check .git/ directory...\r\n   \r\n   How about checking files that do not exist in the dummy `.git` directory such as `.git/index`?\r\n   \r\n   ```diff\r\n   --- a/python/setup.py\r\n   +++ b/python/setup.py\r\n   @@ -509,7 +509,7 @@ def _move_shared_libs_unix(build_prefix, build_lib, lib_name):\r\n    # If the event of not running from a git clone (e.g. from a git archive\r\n    # or a Python sdist), see if we can set the version number ourselves\r\n    default_version = '0.14.0-SNAPSHOT'\r\n   -if (not os.path.exists('../.git')\r\n   +if (not os.path.exists('../.git/index')\r\n            and not os.environ.get('SETUPTOOLS_SCM_PRETEND_VERSION')):\r\n   ```\r\n   \n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-06-07T17:28:56.734+0000",
                    "updated": "2019-06-07T17:28:56.734+0000",
                    "started": "2019-06-07T17:28:56.734+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "256092",
                    "issueId": "13225633"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13225633/worklog/257213",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "kou commented on pull request #4488: ARROW-5092: [C#] Create a dummy .git directory to download the source files from GitHub with Source Link\nURL: https://github.com/apache/arrow/pull/4488#discussion_r292197033\n \n \n\n ##########\n File path: dev/release/02-source.sh\n ##########\n @@ -74,6 +74,16 @@ mv ${tag} ${tag}.tmp\n cp -r -L ${tag}.tmp ${tag}\n rm -rf ${tag}.tmp\n \n+# Create a dummy .git/ directory to download the source files from GitHub with Source Link in C#.\n+mkdir ${tag}/.git && cd $_\n+curl \\\n+  https://api.github.com/repos/apache/arrow/tags | \\\n+  jq \".[] | select(.name==\\\"${tag}\\\") | .commit.sha\" >> HEAD\n \n Review comment:\n   Can we `release_hash` here?\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-06-10T21:22:08.341+0000",
                    "updated": "2019-06-10T21:22:08.341+0000",
                    "started": "2019-06-10T21:22:08.341+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "257213",
                    "issueId": "13225633"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13225633/worklog/257604",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "shiro615 commented on pull request #4488: ARROW-5092: [C#] Create a dummy .git directory to download the source files from GitHub with Source Link\nURL: https://github.com/apache/arrow/pull/4488#discussion_r292395225\n \n \n\n ##########\n File path: dev/release/02-source.sh\n ##########\n @@ -74,6 +74,16 @@ mv ${tag} ${tag}.tmp\n cp -r -L ${tag}.tmp ${tag}\n rm -rf ${tag}.tmp\n \n+# Create a dummy .git/ directory to download the source files from GitHub with Source Link in C#.\n+mkdir ${tag}/.git && cd $_\n+curl \\\n+  https://api.github.com/repos/apache/arrow/tags | \\\n+  jq \".[] | select(.name==\\\"${tag}\\\") | .commit.sha\" >> HEAD\n \n Review comment:\n   I've used `${release_hash}`.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-06-11T10:54:19.059+0000",
                    "updated": "2019-06-11T10:54:19.059+0000",
                    "started": "2019-06-11T10:54:19.058+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "257604",
                    "issueId": "13225633"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13225633/worklog/261018",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "shiro615 commented on issue #4488: WIP ARROW-5092: [C#] Create a dummy .git directory to download the source files from GitHub with Source Link\nURL: https://github.com/apache/arrow/pull/4488#issuecomment-502447764\n \n \n   @eerhardt \r\n   \r\n   Is there any way to check if the Source Link information is set correctly in the symbol file?\r\n   For example, the following information.\r\n   \r\n   ```\r\n   1: '/home/kou/work/cpp/arrow.kou/apache-arrow-0.13.0/csharp/src/Apache.Arrow/Flatbuf/FlatBuffers/ByteBuffer.cs' (#19c)            C# (#3)   SHA-1 (#2)     04-64-A0-48-82-EA-F5-B5-50-EC-CA-9F-85-75-E2-95-A4-EC-AB-B3 (#1b7)   \r\n   2: '/home/kou/work/cpp/arrow.kou/apache-arrow-0.13.0/csharp/src/Apache.Arrow/Flatbuf/FlatBuffers/ByteBufferUtil.cs' (#68f)        C# (#3)   SHA-1 (#2)     F0-4F-28-53-88-A4-E0-6E-F1-1F-17-F6-CD-FE-0E-64-AB-0B-C2-95 (#6aa)   \r\n   ```\r\n   \r\n   I'm trying to add a test that the following information is set correctly in `csharp/artifacts/Apache.Arrow/Release/Apache.Arrow.nuspec`.\r\n   \r\n    ```\r\n   <repository type=\"git\" url=\"https://github.com/apache/arrow\" commit=\"...\" \r\n   ```\r\n   If we can check the Source Link information I want to add the test too.\r\n   \r\n   \n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-06-16T12:27:37.377+0000",
                    "updated": "2019-06-16T12:27:37.377+0000",
                    "started": "2019-06-16T12:27:37.376+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "261018",
                    "issueId": "13225633"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13225633/worklog/261412",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "eerhardt commented on issue #4488: WIP ARROW-5092: [C#] Create a dummy .git directory to download the source files from GitHub with Source Link\nURL: https://github.com/apache/arrow/pull/4488#issuecomment-502717439\n \n \n   > Is there any way to check if the Source Link information is set correctly in the symbol file?\r\n   \r\n   Yes you can with the following steps:\r\n   \r\n   ```\r\n   dotnet tool install -g sourcelink\r\n   \r\n   sourcelink test $(RepoRoot)/csharp/artifacts/Apache.Arrow/Release/netstandard1.3/Apache.Arrow.pdb\r\n   sourcelink test $(RepoRoot)/csharp/artifacts/Apache.Arrow/Release/netcoreapp2.1/Apache.Arrow.pdb\r\n   ```\r\n   \r\n   See https://github.com/ctaggart/SourceLink#test\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-06-17T14:54:28.146+0000",
                    "updated": "2019-06-17T14:54:28.146+0000",
                    "started": "2019-06-17T14:54:28.145+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "261412",
                    "issueId": "13225633"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13225633/worklog/261658",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "shiro615 commented on issue #4488: WIP ARROW-5092: [C#] Create a dummy .git directory to download the source files from GitHub with Source Link\nURL: https://github.com/apache/arrow/pull/4488#issuecomment-502802968\n \n \n   Thanks! It worked. I'll add the test for `dev/02-source-test.rb`.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-06-17T18:41:10.363+0000",
                    "updated": "2019-06-17T18:41:10.363+0000",
                    "started": "2019-06-17T18:41:10.362+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "261658",
                    "issueId": "13225633"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13225633/worklog/262498",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "shiro615 commented on pull request #4488: WIP ARROW-5092: [C#] Create a dummy .git directory to download the source files from GitHub with Source Link\nURL: https://github.com/apache/arrow/pull/4488#discussion_r294935095\n \n \n\n ##########\n File path: dev/release/02-source-test.rb\n ##########\n @@ -0,0 +1,85 @@\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#   http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing,\n+# software distributed under the License is distributed on an\n+# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+# KIND, either express or implied.  See the License for the\n+# specific language governing permissions and limitations\n+# under the License.\n+\n+require \"rexml/document\"\n+\n+class SourceTest < Test::Unit::TestCase\n+  include GitRunnable\n+\n+  def setup\n+    @current_commit = git_current_commit\n+    top_dir = Pathname(__dir__).parent.parent\n+    @original_git_repository = top_dir + \".git\"\n+    cpp_cmake_lists = top_dir + \"cpp\" + \"CMakeLists.txt\"\n+    @current_version = cpp_cmake_lists.read[/ARROW_VERSION \"(.+?)\"/, 1]\n+    @tag_name = \"apache-arrow-#{@current_version}\"\n+\n+    Dir.mktmpdir do |dir|\n+      @test_git_repository = Pathname(dir) + \"arrow\"\n+      git(\"clone\", @original_git_repository.to_s, @test_git_repository.to_s)\n+      Dir.chdir(@test_git_repository) do\n+        sh(\"git archive #{@current_commit} --prefix #{@tag_name} | tar xf -\")\n+        yield\n+      end\n+    end\n+  end\n+\n+  def package_csharp\n+    sh(\"dev/release/create-dummy-git.sh #{@tag_name} #{@current_commit}\")\n \n Review comment:\n   @kou I divided this file into a separate file to test only this script.\r\n   How do you think about this?\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-06-18T17:16:03.723+0000",
                    "updated": "2019-06-18T17:16:03.723+0000",
                    "started": "2019-06-18T17:16:03.722+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "262498",
                    "issueId": "13225633"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13225633/worklog/262681",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "kou commented on pull request #4488: WIP ARROW-5092: [C#] Create a dummy .git directory to download the source files from GitHub with Source Link\nURL: https://github.com/apache/arrow/pull/4488#discussion_r295080486\n \n \n\n ##########\n File path: dev/release/02-source-test.rb\n ##########\n @@ -0,0 +1,85 @@\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#   http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing,\n+# software distributed under the License is distributed on an\n+# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+# KIND, either express or implied.  See the License for the\n+# specific language governing permissions and limitations\n+# under the License.\n+\n+require \"rexml/document\"\n+\n+class SourceTest < Test::Unit::TestCase\n+  include GitRunnable\n+\n+  def setup\n+    @current_commit = git_current_commit\n+    top_dir = Pathname(__dir__).parent.parent\n+    @original_git_repository = top_dir + \".git\"\n+    cpp_cmake_lists = top_dir + \"cpp\" + \"CMakeLists.txt\"\n+    @current_version = cpp_cmake_lists.read[/ARROW_VERSION \"(.+?)\"/, 1]\n+    @tag_name = \"apache-arrow-#{@current_version}\"\n+\n+    Dir.mktmpdir do |dir|\n+      @test_git_repository = Pathname(dir) + \"arrow\"\n+      git(\"clone\", @original_git_repository.to_s, @test_git_repository.to_s)\n+      Dir.chdir(@test_git_repository) do\n+        sh(\"git archive #{@current_commit} --prefix #{@tag_name} | tar xf -\")\n+        yield\n+      end\n+    end\n+  end\n+\n+  def package_csharp\n+    sh(\"dev/release/create-dummy-git.sh #{@tag_name} #{@current_commit}\")\n \n Review comment:\n   Selecting target logics by environment variable is better than splitting a script.\r\n   See also:\r\n   \r\n     * https://github.com/apache/arrow/blob/master/dev/release/00-prepare.sh#L159-L165\r\n     * https://github.com/apache/arrow/blob/master/dev/release/verify-release-candidate.sh#L423-L434\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-06-19T00:32:01.090+0000",
                    "updated": "2019-06-19T00:32:01.090+0000",
                    "started": "2019-06-19T00:32:01.089+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "262681",
                    "issueId": "13225633"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13225633/worklog/263423",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "shiro615 commented on pull request #4488: WIP ARROW-5092: [C#] Create a dummy .git directory to download the source files from GitHub with Source Link\nURL: https://github.com/apache/arrow/pull/4488#discussion_r295570828\n \n \n\n ##########\n File path: dev/release/02-source-test.rb\n ##########\n @@ -0,0 +1,85 @@\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#   http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing,\n+# software distributed under the License is distributed on an\n+# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+# KIND, either express or implied.  See the License for the\n+# specific language governing permissions and limitations\n+# under the License.\n+\n+require \"rexml/document\"\n+\n+class SourceTest < Test::Unit::TestCase\n+  include GitRunnable\n+\n+  def setup\n+    @current_commit = git_current_commit\n+    top_dir = Pathname(__dir__).parent.parent\n+    @original_git_repository = top_dir + \".git\"\n+    cpp_cmake_lists = top_dir + \"cpp\" + \"CMakeLists.txt\"\n+    @current_version = cpp_cmake_lists.read[/ARROW_VERSION \"(.+?)\"/, 1]\n+    @tag_name = \"apache-arrow-#{@current_version}\"\n+\n+    Dir.mktmpdir do |dir|\n+      @test_git_repository = Pathname(dir) + \"arrow\"\n+      git(\"clone\", @original_git_repository.to_s, @test_git_repository.to_s)\n+      Dir.chdir(@test_git_repository) do\n+        sh(\"git archive #{@current_commit} --prefix #{@tag_name} | tar xf -\")\n+        yield\n+      end\n+    end\n+  end\n+\n+  def package_csharp\n+    sh(\"dev/release/create-dummy-git.sh #{@tag_name} #{@current_commit}\")\n \n Review comment:\n   Thanks! I will run `dev/release/02-source.sh` in test cases.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-06-20T00:09:02.536+0000",
                    "updated": "2019-06-20T00:09:02.536+0000",
                    "started": "2019-06-20T00:09:02.536+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "263423",
                    "issueId": "13225633"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13225633/worklog/264331",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "codecov-io commented on issue #4488: WIP ARROW-5092: [C#] Create a dummy .git directory to download the source files from GitHub with Source Link\nURL: https://github.com/apache/arrow/pull/4488#issuecomment-504273768\n \n \n   # [Codecov](https://codecov.io/gh/apache/arrow/pull/4488?src=pr&el=h1) Report\n   > Merging [#4488](https://codecov.io/gh/apache/arrow/pull/4488?src=pr&el=desc) into [master](https://codecov.io/gh/apache/arrow/commit/961927af56b83d0dbca91132c3f07aa06d69fc63?src=pr&el=desc) will **increase** coverage by `<.01%`.\n   > The diff coverage is `n/a`.\n   \n   [![Impacted file tree graph](https://codecov.io/gh/apache/arrow/pull/4488/graphs/tree.svg?width=650&token=LpTCFbqVT1&height=150&src=pr)](https://codecov.io/gh/apache/arrow/pull/4488?src=pr&el=tree)\n   \n   ```diff\n   @@            Coverage Diff             @@\n   ##           master    #4488      +/-   ##\n   ==========================================\n   + Coverage   88.49%   88.49%   +<.01%     \n   ==========================================\n     Files         890      890              \n     Lines      110406   110406              \n     Branches     1418     1418              \n   ==========================================\n   + Hits        97701    97708       +7     \n   + Misses      12424    12417       -7     \n     Partials      281      281\n   ```\n   \n   \n   | [Impacted Files](https://codecov.io/gh/apache/arrow/pull/4488?src=pr&el=tree) | Coverage \u0394 | |\n   |---|---|---|\n   | [cpp/src/arrow/csv/column-builder.cc](https://codecov.io/gh/apache/arrow/pull/4488/diff?src=pr&el=tree#diff-Y3BwL3NyYy9hcnJvdy9jc3YvY29sdW1uLWJ1aWxkZXIuY2M=) | `95.29% <0%> (-1.77%)` | :arrow_down: |\n   | [js/src/data.ts](https://codecov.io/gh/apache/arrow/pull/4488/diff?src=pr&el=tree#diff-anMvc3JjL2RhdGEudHM=) | `97.7% <0%> (+0.76%)` | :arrow_up: |\n   | [cpp/src/plasma/thirdparty/ae/ae.c](https://codecov.io/gh/apache/arrow/pull/4488/diff?src=pr&el=tree#diff-Y3BwL3NyYy9wbGFzbWEvdGhpcmRwYXJ0eS9hZS9hZS5j) | `71.69% <0%> (+0.94%)` | :arrow_up: |\n   | [cpp/src/arrow/json/chunked-builder.cc](https://codecov.io/gh/apache/arrow/pull/4488/diff?src=pr&el=tree#diff-Y3BwL3NyYy9hcnJvdy9qc29uL2NodW5rZWQtYnVpbGRlci5jYw==) | `81.58% <0%> (+1.67%)` | :arrow_up: |\n   | [cpp/src/arrow/json/converter.cc](https://codecov.io/gh/apache/arrow/pull/4488/diff?src=pr&el=tree#diff-Y3BwL3NyYy9hcnJvdy9qc29uL2NvbnZlcnRlci5jYw==) | `92.3% <0%> (+1.77%)` | :arrow_up: |\n   \n   ------\n   \n   [Continue to review full report at Codecov](https://codecov.io/gh/apache/arrow/pull/4488?src=pr&el=continue).\n   > **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n   > `\u0394 = absolute <relative> (impact)`, `\u00f8 = not affected`, `? = missing data`\n   > Powered by [Codecov](https://codecov.io/gh/apache/arrow/pull/4488?src=pr&el=footer). Last update [961927a...e3db57e](https://codecov.io/gh/apache/arrow/pull/4488?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n   \n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-06-21T03:19:15.769+0000",
                    "updated": "2019-06-21T03:19:15.769+0000",
                    "started": "2019-06-21T03:19:15.768+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "264331",
                    "issueId": "13225633"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13225633/worklog/264729",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "shiro615 commented on issue #4488: ARROW-5092: [C#] Create a dummy .git directory to download the source files from GitHub with Source Link\nURL: https://github.com/apache/arrow/pull/4488#issuecomment-504474759\n \n \n   @kou  Can you review this?\r\n   CI failure is unrelated.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-06-21T15:48:36.570+0000",
                    "updated": "2019-06-21T15:48:36.570+0000",
                    "started": "2019-06-21T15:48:36.570+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "264729",
                    "issueId": "13225633"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13225633/worklog/265053",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "kou commented on pull request #4488: ARROW-5092: [C#] Create a dummy .git directory to download the source files from GitHub with Source Link\nURL: https://github.com/apache/arrow/pull/4488#discussion_r296411687\n \n \n\n ##########\n File path: dev/release/02-source.sh\n ##########\n @@ -17,6 +17,10 @@\n # specific language governing permissions and limitations\n # under the License.\n #\n+: ${PREPARE_DEFAULT:=1}\n \n Review comment:\n   Could you put all codes after `set -e` to check all codes by `set -e`?\r\n   \n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-06-21T22:54:19.731+0000",
                    "updated": "2019-06-21T22:54:19.731+0000",
                    "started": "2019-06-21T22:54:19.730+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "265053",
                    "issueId": "13225633"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13225633/worklog/265054",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "kou commented on pull request #4488: ARROW-5092: [C#] Create a dummy .git directory to download the source files from GitHub with Source Link\nURL: https://github.com/apache/arrow/pull/4488#discussion_r296411970\n \n \n\n ##########\n File path: dev/release/02-source.sh\n ##########\n @@ -34,11 +38,17 @@ tagrc=${tag}-rc${rc}\n \n echo \"Preparing source for tag ${tag}\"\n \n-: ${release_hash:=`git rev-list $tag 2> /dev/null | head -n 1 `}\n+if [ ${PREPARE_RELEASE_TAG} -gt 0 ]; then\n+  : ${release_hash:=`git rev-list $tag 2> /dev/null | head -n 1 `}\n+else\n+  : ${release_hash:=`git rev-parse HEAD `}\n+fi\n \n Review comment:\n   We can already override `release_hash` by `release_hash=XXX dev/release/02-prepare.sh`. So we don't need this.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-06-21T22:54:19.731+0000",
                    "updated": "2019-06-21T22:54:19.731+0000",
                    "started": "2019-06-21T22:54:19.731+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "265054",
                    "issueId": "13225633"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13225633/worklog/265055",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "kou commented on pull request #4488: ARROW-5092: [C#] Create a dummy .git directory to download the source files from GitHub with Source Link\nURL: https://github.com/apache/arrow/pull/4488#discussion_r296414863\n \n \n\n ##########\n File path: dev/release/02-source.sh\n ##########\n @@ -17,6 +17,10 @@\n # specific language governing permissions and limitations\n # under the License.\n #\n+: ${PREPARE_DEFAULT:=1}\n \n Review comment:\n   `SOURCE_` prefix is better.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-06-21T22:54:19.742+0000",
                    "updated": "2019-06-21T22:54:19.742+0000",
                    "started": "2019-06-21T22:54:19.741+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "265055",
                    "issueId": "13225633"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
            "id": "1",
            "description": "A problem which impairs or prevents the functions of the product.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
            "name": "Bug",
            "subtask": false,
            "avatarId": 21133
        },
        "timespent": 27000,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@3bf26611[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@4423ae0[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@27784031[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@3278eb04[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@4c60f79f[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@500788a2[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@359b235b[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@40cece27[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@b5915ae[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@67f7ceff[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@b9aa8a1[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@3d13e003[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 27000,
        "customfield_12312520": null,
        "customfield_12312521": "Sun Jun 23 09:46:26 UTC 2019",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2019-06-23T09:46:26.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-5092/watchers",
            "watchCount": 2,
            "isWatching": false
        },
        "created": "2019-04-02T20:34:05.000+0000",
        "updated": "2019-06-24T18:59:00.000+0000",
        "timeoriginalestimate": null,
        "description": "With the 0.13.0 C# NuGet package,\u00a0[Source Link|https://docs.microsoft.com/en-us/dotnet/standard/library-guidance/sourcelink] doesn't work. The symbols can be downloaded from nuget.org correctly, but when\u00a0Visual Studio tries to download the code, it cannot find the correct files.\r\n\r\nThe following is why it doesn't work:\r\n\r\nThe .NET tooling expects the build of an official release to happen in the context of a\u00a0{{git}}\u00a0repository. This does 2 things to the produced assets:\r\n # In the\u00a0{{.nupkg}}\u00a0file that is generated, the .NET tooling will encode the current git commit's SHA hash into both the\u00a0{{Apache.Arrow.nuspec}}\u00a0file, and into the compiled\u00a0{{Apache.Arrow.dll}}\u00a0assembly. Looking at the released version that was published over the weekend:\u00a0[https://www.nuget.org/packages/Apache.Arrow/0.13.0], this information made it into the\u00a0{{.nuspec}}\u00a0and the\u00a0{{.dll}}:\r\n\r\n{code}\r\n[assembly: AssemblyInformationalVersion(\"0.13.0+57de5c3adffe526f37366bb15c3ff0d4a2e84655\")]\r\n\r\n<repository type=\"git\" url=\"https://github.com/apache/arrow\" commit=\"57de5c3adffe526f37366bb15c3ff0d4a2e84655\" />\r\n{code}\r\n\r\nHowever, I don't see how the [C# release script|https://github.com/apache/arrow/blob/master/dev/release/post-06-csharp.sh] could have done that. \r\n\r\n # Also, .NET has a feature called \"Source Link\", which allows for the source code to be automatically downloaded from GitHub when debugging into this library. The way the tooling works today, it requires that the git repository's\u00a0{{origin}}\u00a0remote is set to\u00a0[https://github.com/apache/arrow.git]. The tooling reads uses the `origin` git remote to encode the GitHub URL into the symbols file in the\u00a0{{.snupkg}}\u00a0file.\r\n\r\nThis, however, doesn't work with the 0.13.0 release that occurred over the weekend. I tried using the Source Link feature, and it didn't automatically download the source files from GitHub.\r\n\r\nLooking into the symbols file, I see the Source Link information that was embedded:\r\n\r\n\r\n{code}\r\n1: '/home/kou/work/cpp/arrow.kou/apache-arrow-0.13.0/csharp/src/Apache.Arrow/Flatbuf/FlatBuffers/ByteBuffer.cs' (#19c)            C# (#3)   SHA-1 (#2)     04-64-A0-48-82-EA-F5-B5-50-EC-CA-9F-85-75-E2-95-A4-EC-AB-B3 (#1b7)   \r\n2: '/home/kou/work/cpp/arrow.kou/apache-arrow-0.13.0/csharp/src/Apache.Arrow/Flatbuf/FlatBuffers/ByteBufferUtil.cs' (#68f)        C# (#3)   SHA-1 (#2)     F0-4F-28-53-88-A4-E0-6E-F1-1F-17-F6-CD-FE-0E-64-AB-0B-C2-95 (#6aa)   \r\n{code}\r\n\r\n{code:json}\r\n{\r\n    \"documents\": {\r\n        \"/home/kou/work/cpp/arrow.kou/*\": \"https://raw.githubusercontent.com/kou/arrow/57de5c3adffe526f37366bb15c3ff0d4a2e84655/*\",\r\n        \"/home/kou/work/cpp/arrow.kou/cpp/submodules/parquet-testing/*\": \"https://raw.githubusercontent.com/apache/parquet-testing/bb7b6abbb3fbeff845646364a4286142127be04c/*\"\r\n    }\r\n}\r\n{code}\r\n\r\nHere it appears the {{origin}}\u00a0remote was set to\u00a0{{kou/arrow}}, and not\u00a0{{apache/arrow}}. Also, it appears the\u00a0{{apache-arrow-0.13.0}}\u00a0folder was under a git repository, and so the sources aren't matched up with the git repository. (Basically that folder shouldn't have appeared in the Documents list that has the\u00a0{{.cs}}\u00a0file path.) I think this explains how (1) above happened - the build was under a git repository - but this script downloaded an extra copy of the sources into that git repository.\r\n\r\nI'm wondering how we can fix either this script, or the .NET Tooling, or both, to make this experience better for the next release. I think we need to ensure two things:\r\n # The git commit information is set correctly in the\u00a0{{.nuspec}}\u00a0and the\u00a0{{.dll}}\u00a0when the release build is run. I think it just happened by pure luck this time. It just so happened that the script was executed in an already established repo, and it just so happened to be on the right commit (or maybe it wasn't the right commit?).\r\n # The source link information is set correctly in the symbols file.\r\n\r\n[~wesmckinn] [~kou]",
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "7.5h",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 27000
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[C#] Source Link doesn't work with the C# release script",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13225633/comment/16808182",
                    "id": "16808182",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=kou",
                        "name": "kou",
                        "key": "kou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=kou&avatarId=30762",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kou&avatarId=30762",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kou&avatarId=30762",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kou&avatarId=30762"
                        },
                        "displayName": "Kouhei Sutou",
                        "active": true,
                        "timeZone": "Asia/Tokyo"
                    },
                    "body": "Thanks for the description.\r\nCan we specify the followings explicitly instead of auto detection?\r\n* The repository URL (https://github.com/apacha/arrow.git)\r\n* The commit hash (I hope that we can use tag name such as {{apache-arrow-0.13.0}} for it)\r\n* The relative source directory path ({{/csharp}})",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=kou",
                        "name": "kou",
                        "key": "kou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=kou&avatarId=30762",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kou&avatarId=30762",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kou&avatarId=30762",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kou&avatarId=30762"
                        },
                        "displayName": "Kouhei Sutou",
                        "active": true,
                        "timeZone": "Asia/Tokyo"
                    },
                    "created": "2019-04-02T21:56:28.603+0000",
                    "updated": "2019-04-02T21:56:28.603+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13225633/comment/16808212",
                    "id": "16808212",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=eerhardt",
                        "name": "eerhardt",
                        "key": "eerhardt",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=eerhardt&avatarId=37925",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=eerhardt&avatarId=37925",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=eerhardt&avatarId=37925",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=eerhardt&avatarId=37925"
                        },
                        "displayName": "Eric Erhardt",
                        "active": true,
                        "timeZone": "America/North_Dakota/New_Salem"
                    },
                    "body": "I've asked the same things to\u00a0tmat on GitHub (I don't think he is on JIRA), who\u00a0works on the .NET tools here:\u00a0[https://github.com/dotnet/sourcelink/issues/187#issuecomment-479193633].\u00a0It appears others have similar problems building in Docker containers when the git repo isn't present.\r\n\r\nAs for tag name, I am not sure. I'll ask him as well.",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=eerhardt",
                        "name": "eerhardt",
                        "key": "eerhardt",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=eerhardt&avatarId=37925",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=eerhardt&avatarId=37925",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=eerhardt&avatarId=37925",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=eerhardt&avatarId=37925"
                        },
                        "displayName": "Eric Erhardt",
                        "active": true,
                        "timeZone": "America/North_Dakota/New_Salem"
                    },
                    "created": "2019-04-02T22:44:33.975+0000",
                    "updated": "2019-04-02T22:44:33.975+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13225633/comment/16808219",
                    "id": "16808219",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=eerhardt",
                        "name": "eerhardt",
                        "key": "eerhardt",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=eerhardt&avatarId=37925",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=eerhardt&avatarId=37925",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=eerhardt&avatarId=37925",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=eerhardt&avatarId=37925"
                        },
                        "displayName": "Eric Erhardt",
                        "active": true,
                        "timeZone": "America/North_Dakota/New_Salem"
                    },
                    "body": "tmat\u00a0replied to my question (cross-posting it here):\r\n\r\n[https://github.com/dotnet/sourcelink/issues/187#issuecomment-479245030]\r\n\u00a0\r\n{noformat}\r\nCan you use tag names instead of commit hashes?\r\n\r\nNo, we need a commit hash.{noformat}",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=eerhardt",
                        "name": "eerhardt",
                        "key": "eerhardt",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=eerhardt&avatarId=37925",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=eerhardt&avatarId=37925",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=eerhardt&avatarId=37925",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=eerhardt&avatarId=37925"
                        },
                        "displayName": "Eric Erhardt",
                        "active": true,
                        "timeZone": "America/North_Dakota/New_Salem"
                    },
                    "created": "2019-04-02T23:05:30.347+0000",
                    "updated": "2019-04-02T23:05:30.347+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13225633/comment/16808257",
                    "id": "16808257",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=kou",
                        "name": "kou",
                        "key": "kou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=kou&avatarId=30762",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kou&avatarId=30762",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kou&avatarId=30762",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kou&avatarId=30762"
                        },
                        "displayName": "Kouhei Sutou",
                        "active": true,
                        "timeZone": "Asia/Tokyo"
                    },
                    "body": "Thanks.\r\nOK. We should get the commit hash from tag by {{curl https://api.github.com/repos/apache/arrow/tags | jq '.[] | select(.name==\"apache-arrow-0.13.0\") | .commit.sha'}}.",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=kou",
                        "name": "kou",
                        "key": "kou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=kou&avatarId=30762",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kou&avatarId=30762",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kou&avatarId=30762",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kou&avatarId=30762"
                        },
                        "displayName": "Kouhei Sutou",
                        "active": true,
                        "timeZone": "Asia/Tokyo"
                    },
                    "created": "2019-04-03T00:33:04.401+0000",
                    "updated": "2019-04-03T00:33:04.401+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13225633/comment/16814017",
                    "id": "16814017",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=kou",
                        "name": "kou",
                        "key": "kou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=kou&avatarId=30762",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kou&avatarId=30762",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kou&avatarId=30762",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kou&avatarId=30762"
                        },
                        "displayName": "Kouhei Sutou",
                        "active": true,
                        "timeZone": "Asia/Tokyo"
                    },
                    "body": "We need to create a dummy {{.git/}} directory in release script.\r\nSee also: https://github.com/dotnet/sourcelink/issues/187#issuecomment-481328742\r\n\r\n{quote}\r\ncreate directory {{.git}} in the root and in it\r\n  1. file {{HEAD}} that contains the commit SHA\r\n  2. file {{config}} that contains {{[remote \"origin\"] url = \\{URL\\}}}.\r\n  3. empty directories {{objects}} and {{refs}}?\r\n{quote}\r\n",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=kou",
                        "name": "kou",
                        "key": "kou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=kou&avatarId=30762",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kou&avatarId=30762",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kou&avatarId=30762",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kou&avatarId=30762"
                        },
                        "displayName": "Kouhei Sutou",
                        "active": true,
                        "timeZone": "Asia/Tokyo"
                    },
                    "created": "2019-04-10T03:48:40.290+0000",
                    "updated": "2019-04-10T03:49:31.631+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13225633/comment/16870509",
                    "id": "16870509",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=shiro615",
                        "name": "shiro615",
                        "key": "shiro615",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34043",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34043",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34043",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34043"
                        },
                        "displayName": "Yosuke Shiro",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "Issue resolved by pull request 4488\n[https://github.com/apache/arrow/pull/4488]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=shiro615",
                        "name": "shiro615",
                        "key": "shiro615",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34043",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34043",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34043",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34043"
                        },
                        "displayName": "Yosuke Shiro",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2019-06-23T09:46:26.587+0000",
                    "updated": "2019-06-23T09:46:26.587+0000"
                }
            ],
            "maxResults": 6,
            "total": 6,
            "startAt": 0
        },
        "customfield_12311820": "0|z01dso:",
        "customfield_12314139": null
    }
}