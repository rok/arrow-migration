{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13411313",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13411313",
    "key": "ARROW-14677",
    "fields": {
        "fixVersions": [],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "name": "Major",
            "id": "3"
        },
        "labels": [],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": null,
        "customfield_12312330": null,
        "versions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12350323",
                "id": "12350323",
                "description": "",
                "name": "6.0.0",
                "archived": false,
                "released": true,
                "releaseDate": "2021-10-26"
            }
        ],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [],
        "customfield_12313825": null,
        "assignee": null,
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12328935",
                "id": "12328935",
                "name": "C++"
            },
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12333008",
                "id": "12333008",
                "name": "R"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": null,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=mtmorgan",
            "name": "mtmorgan",
            "key": "JIRAUSER280077",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
            },
            "displayName": "Martin Morgan",
            "active": true,
            "timeZone": "America/New_York"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=mtmorgan",
            "name": "mtmorgan",
            "key": "JIRAUSER280077",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
            },
            "displayName": "Martin Morgan",
            "active": true,
            "timeZone": "America/New_York"
        },
        "aggregateprogress": {
            "progress": 0,
            "total": 0
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 0,
            "total": 0
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-14677/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 0,
            "worklogs": []
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
            "id": "1",
            "description": "A problem which impairs or prevents the functions of the product.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
            "name": "Bug",
            "subtask": false,
            "avatarId": 21133
        },
        "timespent": null,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@f3f2c2f[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@4521d997[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@5ab19a49[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@11970de9[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@1fbf16ae[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@7febbcf5[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@29de1293[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@8fba04[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@6762d6dd[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@45ccd2d0[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@1cdf1a70[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@61fddc75[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": null,
        "customfield_12312520": null,
        "customfield_12312521": "Wed Dec 22 12:48:53 UTC 2021",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2021-12-23T10:36:47.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-14677/watchers",
            "watchCount": 3,
            "isWatching": false
        },
        "created": "2021-11-11T16:03:41.000+0000",
        "updated": "2021-12-23T10:36:47.000+0000",
        "timeoriginalestimate": null,
        "description": "Following a slack post (https://ropensci.slack.com/archives/C026GCWKA/p1636588933095400), accessing a public bucket with the R client\r\n{code:java}\r\ndf <- arrow::open_dataset(\"s3://gbif-open-data-af-south-1/occurrence/2021-11-01/occurrence.parquet/\")\r\n{code}\r\nleads to a segfault\r\n{code:java}\r\n\u00a0 *** caught segfault ***\r\naddress 0x0, cause 'unknown'\r\nTraceback:\r\n1: dataset__DatasetFactory_Finish1(self, unify_schemas)\r\n2: factory$Finish(schema, isTRUE(unify_schemas))\r\n3: doTryCatch(return(expr), name, parentenv, handler)\r\n4: tryCatchOne(expr, names, parentenv, handlers[[1L]])\r\n5: tryCatchList(expr, classes, parentenv, handlers)\r\n6: tryCatch(factory$Finish(schema, isTRUE(unify_schemas)), error = function(e)\r\n{ handle_parquet_io_error(e, format)}\r\n)\r\n7: arrow::open_dataset(\"s3://gbif-open-data-af-south-1/occurrence/2021-11-01/occurrence.parquet/\")\r\n\u00a0\r\n{code}\r\nThe arrow portion of the lldb traceback is\r\n{code:java}\r\n(lldb) thread backtrace\r\n\r\nthread #1, queue = 'com.apple.main-thread', stop reason = EXC_BAD_ACCESS (code=EXC_I386_GPFLT) frame #0: 0x000000012ab2029c libthrift-0.15.0.dylib`std::__1::shared_ptr<apache::thrift::async::TAsyncProcessor>::~shared_ptr() + 46\r\nframe #1: 0x0000000128bb6ac2 arrow.so`void parquet::DeserializeThriftUnencryptedMsg<parquet::format::FileMetaData>(unsigned char const*, unsigned int*, parquet::format::FileMetaData*) + 309\r\nframe #2: 0x0000000128bb5f49 arrow.so`parquet::FileMetaData::FileMetaDataImpl::FileMetaDataImpl(void const*, unsigned int*, std::__1::shared_ptr<parquet::InternalFileDecryptor>) + 517\r\nframe #3: 0x0000000128bace0d arrow.so`parquet::FileMetaData::FileMetaData(void const*, unsigned int*, std::__1::shared_ptr<parquet::InternalFileDecryptor>) + 85\r\nframe #4: 0x0000000128bacd1b arrow.so`parquet::FileMetaData::Make(void const*, unsigned int*, std::__1::shared_ptr<parquet::InternalFileDecryptor>) + 89\r\nframe #5: 0x0000000128b9cb4a arrow.so`parquet::SerializedFile::ParseUnencryptedFileMetadata(std::__1::shared_ptr<arrow::Buffer> const&, unsigned int) + 118\r\nframe #6: 0x0000000128b9df43 arrow.so`parquet::SerializedFile::ParseMetaData() + 607\r\nframe #7: 0x0000000128b9dc6c arrow.so`parquet::ParquetFileReader::Contents::Open(std::_1::shared_ptr<arrow::io::RandomAccessFile>, parquet::ReaderProperties const&, std::_1::shared_ptr<parquet::FileMetaData>) + 214\r\nframe #8: 0x0000000128b9eb72 arrow.so`parquet::ParquetFileReader::Open(std::_1::shared_ptr<arrow::io::RandomAccessFile>, parquet::ReaderProperties const&, std::_1::shared_ptr<parquet::FileMetaData>) + 58\r\nframe #9: 0x0000000128c8a988 arrow.so`arrow::dataset::ParquetFileFormat::GetReader(arrow::dataset::FileSource const&, arrow::dataset::ScanOptions*) const + 286\r\nframe #10: 0x0000000128c8a72e arrow.so`arrow::dataset::ParquetFileFormat::Inspect(arrow::dataset::FileSource const&) const + 44\r\nframe #11: 0x0000000128c0b994 arrow.so`arrow::dataset::FileSystemDatasetFactory::InspectSchemas(arrow::dataset::InspectOptions) + 336\r\nframe #12: 0x0000000128c09079 arrow.so`arrow::dataset::DatasetFactory::Inspect(arrow::dataset::InspectOptions) + 43\r\nframe #13: 0x0000000128c0c1cf arrow.so`arrow::dataset::FileSystemDatasetFactory::Finish(arrow::dataset::FinishOptions) + 541\r\nframe #14: 0x0000000128a66805 arrow.so`dataset__DatasetFactoryFinish1(std::_1::shared_ptr<arrow::dataset::DatasetFactory> const&, bool) + 69\r\nframe #15: 0x0000000128a105aa arrow.so`arrow_dataset_DatasetFactory_Finish1 + 154 {code}\r\narrow was installed from source on\r\n{code:java}\r\n> sessionInfo()\r\nR Under development (unstable) (2021-10-28 r81109)\r\nPlatform: x86_64-apple-darwin19.6.0 (64-bit)\r\nRunning under: macOS Catalina 10.15.7\r\nMatrix products: default\r\nBLAS: /Users/ma38727/bin/R-devel/lib/libRblas.dylib\r\nLAPACK: /Users/ma38727/bin/R-devel/lib/libRlapack.dylib\r\nlocale:\r\n[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8\r\nattached base packages:\r\n[1] stats graphics grDevices utils datasets methods base\r\nother attached packages:\r\n[1] arrow_6.0.0.2\r\nloaded via a namespace (and not attached):\r\n[1] tidyselect_1.1.1 bit_4.0.4 compiler_4.2.0\r\n[4] BiocManager_1.30.16 magrittr_2.0.1 assertthat_0.2.1\r\n[7] R6_2.5.1 glue_1.5.0 bit64_4.0.5\r\n[10] vctrs_0.3.8 rlang_0.4.12 purrr_0.3.4\r\n{code}\r\nDuring package installation, the one step that was 'new' to me was the use of autobrew\r\n{code:java}\r\n*** Downloading apache-arrow\r\nUsing autobrew bundle: apache-arrow-6.0.0-high_sierra.tar.xz{code}\r\nI'm not sure how to validate that this use is consistent with my brew installation.",
        "customfield_10010": null,
        "timetracking": {},
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[R][C++] macOS R package arrow segfault on `open_dataset()`",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13411313/comment/17442342",
                    "id": "17442342",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=npr",
                        "name": "npr",
                        "key": "npr",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
                        },
                        "displayName": "Neal Richardson",
                        "active": true,
                        "timeZone": "America/Los_Angeles"
                    },
                    "body": "Thanks for the report! autobrew pulls a bundle of static libraries. I'm not sure how it would clash with your local {{brew}} itself; the only thing I could think of would be if there were an issue with system/brew libcurl or openssl, which are not bundled and are required by the aws-sdk-cpp that reads from S3. Some thoughts:\r\n\r\n1. Is there a reason you can't use the binary package from CRAN? (That is built with autobrew too, for what it's worth.)\r\n2. You could try a source install and set the env var FORCE_BUNDLED_BUILD=true. This would build libarrow from source instead of using the prebuilt autobrew bundle. (I'd also recommend setting ARROW_R_DEV=true to get some output from the libarrow build, if for no other reason than to see that it is progressing.)\r\n3. Can you download one or two of those parquet files from S3 and try to open_dataset() on them on your local filesystem? The backtrace points at thrift but I'm wondering if that's misleading.\r\n\r\nIt would be interesting to know if any/all of those segfault for you.",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=npr",
                        "name": "npr",
                        "key": "npr",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
                        },
                        "displayName": "Neal Richardson",
                        "active": true,
                        "timeZone": "America/Los_Angeles"
                    },
                    "created": "2021-11-11T16:22:43.612+0000",
                    "updated": "2021-11-11T16:22:43.612+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13411313/comment/17442942",
                    "id": "17442942",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=mtmorgan",
                        "name": "mtmorgan",
                        "key": "JIRAUSER280077",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Martin Morgan",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "I build my own R (force of habit, really...) so can't use the CRAN binaries. I do have a CRAN-built R, and installing the CRAN binary did NOT segfault. Also, setting both environmental flags and re-installing arrow did NOT segfault.\r\n\r\nRe-installing arrow without environment variables set lead to a slightly different error but at the same code location\r\n{code:java}\r\n> df <- arrow::open_dataset(\"s3://gbif-open-data-af-south-1/occurrence/2021-11-01/occurrence.parquet/\")\r\nR(45419,0x1000dbdc0) malloc: *** error for object 0x3: pointer being freed was not allocated\r\nR(45419,0x1000dbdc0) malloc: *** set a breakpoint in malloc_error_break to debug\r\nProcess 45419 stopped\r\n* thread #1, queue = 'com.apple.main-thread', stop reason = signal SIGABRT\r\n\u00a0 \u00a0 frame #0: 0x00007fff6e34e33a libsystem_kernel.dylib`__pthread_kill + 10\r\nlibsystem_kernel.dylib`__pthread_kill:\r\n-> \u00a00x7fff6e34e33a <+10>: jae \u00a0 \u00a00x7fff6e34e344 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0; <+20>\r\n\u00a0 \u00a0 0x7fff6e34e33c <+12>: movq \u00a0 %rax, %rdi\r\n\u00a0 \u00a0 0x7fff6e34e33f <+15>: jmp \u00a0 \u00a00x7fff6e348629 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0; cerror_nocancel\r\n\u00a0 \u00a0 0x7fff6e34e344 <+20>: retq\r\nTarget 0: (R) stopped.\r\n(lldb) thread backtrace\r\n* thread #1, queue = 'com.apple.main-thread', stop reason = signal SIGABRT\r\n\u00a0 * frame #0: 0x00007fff6e34e33a libsystem_kernel.dylib`__pthread_kill + 10\r\n\u00a0 \u00a0 frame #1: 0x00007fff6e40ae60 libsystem_pthread.dylib`pthread_kill + 430\r\n\u00a0 \u00a0 frame #2: 0x00007fff6e2d5808 libsystem_c.dylib`abort + 120\r\n\u00a0 \u00a0 frame #3: 0x00007fff6e3cb50b libsystem_malloc.dylib`malloc_vreport + 548\r\n\u00a0 \u00a0 frame #4: 0x00007fff6e3ce40f libsystem_malloc.dylib`malloc_report + 151\r\n\u00a0 \u00a0 frame #5: 0x0000000138377c2e libthrift-0.15.0.dylib`apache::thrift::transport::TMemoryBuffer::~TMemoryBuffer() + 34\r\n\u00a0 \u00a0 frame #6: 0x00000001391d4ac2 arrow.so`void parquet::DeserializeThriftUnencryptedMsg<parquet::format::FileMetaData>(unsigned char const*, unsigned int*, parquet::format::FileMetaData*) + 309{code}",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=mtmorgan",
                        "name": "mtmorgan",
                        "key": "JIRAUSER280077",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Martin Morgan",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2021-11-12T21:50:37.550+0000",
                    "updated": "2021-11-12T21:50:37.550+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13411313/comment/17442944",
                    "id": "17442944",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=npr",
                        "name": "npr",
                        "key": "npr",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
                        },
                        "displayName": "Neal Richardson",
                        "active": true,
                        "timeZone": "America/Los_Angeles"
                    },
                    "body": "Great, thank you, that's very helpful. [~jeroenooms] any ideas here?\r\n\r\nI may have an old macbook still on 10.15, if so I'll see if I can reproduce too.",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=npr",
                        "name": "npr",
                        "key": "npr",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
                        },
                        "displayName": "Neal Richardson",
                        "active": true,
                        "timeZone": "America/Los_Angeles"
                    },
                    "created": "2021-11-12T21:55:26.294+0000",
                    "updated": "2021-11-12T21:55:26.294+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13411313/comment/17443083",
                    "id": "17443083",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=jeroenooms",
                        "name": "jeroenooms",
                        "key": "jeroenooms",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Jeroen",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "I can't reproduce this; it works for me both when buiding the R package against arrow from homebrew and from autobrew.\r\n\r\nIt looks like some mix up of libraries on the local machine. If you build against apache-arrow from homebrew, it is important to `brew upgrade` first to make sure the arrow and all dependencies (quite a lot) are in sync and up-to-date.\r\n\r\nI am mostly surprised you get the crash when using the autobrew bundle. This should be the most reliable method because that is what we use on CRAN. Can you maybe have a look to see if the R package was linked against local libs instead of the ones from the bundle?\u00a0\r\n\r\n{{\u00a0 \u00a0 system2('otool', c('-L', system.file('libs/arrow.so', package='arrow')))}}\r\n\r\n\u00a0\r\n\r\n\u00a0\r\n\r\n\u00a0\r\n\r\n\u00a0",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=jeroenooms",
                        "name": "jeroenooms",
                        "key": "jeroenooms",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Jeroen",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2021-11-13T11:11:22.991+0000",
                    "updated": "2021-11-13T11:11:22.991+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13411313/comment/17443430",
                    "id": "17443430",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=mtmorgan",
                        "name": "mtmorgan",
                        "key": "JIRAUSER280077",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Martin Morgan",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "This is what I have, both before and after upgrading brew (there were a number of out-of-date packages)\r\n{code:java}\r\n> system2('otool', c('-L', system.file('libs/arrow.so', package='arrow')))\r\n/Users/ma38727/Library/R/4.2/Bioc/3.15/library/arrow/libs/arrow.so:\r\n\u00a0 \u00a0 arrow.so (compatibility version 0.0.0, current version 0.0.0)\r\n\u00a0 \u00a0 /usr/local/opt/thrift/lib/libthrift-0.15.0.dylib (compatibility version 0.0.0, current version 0.0.0)\r\n\u00a0 \u00a0 /usr/local/opt/lz4/lib/liblz4.1.dylib (compatibility version 1.0.0, current version 1.9.3)\r\n\u00a0 \u00a0 /usr/local/opt/snappy/lib/libsnappy.1.dylib (compatibility version 1.0.0, current version 1.1.7)\r\n\u00a0 \u00a0 /usr/local/opt/zstd/lib/libzstd.1.dylib (compatibility version 1.0.0, current version 1.5.0)\r\n\u00a0 \u00a0 /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1281.100.1)\r\n\u00a0 \u00a0 /usr/lib/libcurl.4.dylib (compatibility version 7.0.0, current version 9.0.0)\r\n\u00a0 \u00a0 libR.dylib (compatibility version 4.2.0, current version 4.2.0)\r\n\u00a0 \u00a0 /usr/local/opt/gettext/lib/libintl.8.dylib (compatibility version 11.0.0, current version 11.0.0)\r\n\u00a0 \u00a0 /System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation (compatibility version 150.0.0, current version 1677.104.0)\r\n\u00a0 \u00a0 /usr/lib/libc++.1.dylib (compatibility version 1.0.0, current version 902.1.0){code}",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=mtmorgan",
                        "name": "mtmorgan",
                        "key": "JIRAUSER280077",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Martin Morgan",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2021-11-14T19:26:54.015+0000",
                    "updated": "2021-11-14T19:26:54.015+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13411313/comment/17445361",
                    "id": "17445361",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=mtmorgan",
                        "name": "mtmorgan",
                        "key": "JIRAUSER280077",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Martin Morgan",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "To be a bit more complete, when I look at libraries in the package installed from CRAN I see\r\n{code:java}\r\n> system2('otool', c('-L', system.file('libs/arrow.so', package='arrow')))\r\n/Users/ma38727/Library/R/x86_64/4.1/library/arrow/libs/arrow.so:\r\n\u00a0 \u00a0 arrow.so (compatibility version 0.0.0, current version 0.0.0)\r\n\u00a0 \u00a0 /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1252.50.4)\r\n\u00a0 \u00a0 /usr/lib/libcurl.4.dylib (compatibility version 7.0.0, current version 9.0.0)\r\n\u00a0 \u00a0 /Library/Frameworks/R.framework/Versions/4.1/Resources/lib/libR.dylib (compatibility version 4.1.0, current version 4.1.0)\r\n\u00a0 \u00a0 /System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation (compatibility version 150.0.0, current version 1452.23.0)\r\n  \u00a0 /usr/lib/libc++.1.dylib (compatibility version 1.0.0, current version 400.9.0){code}\r\nWhen installing, here's what I see\r\n{code:java}\r\nUsing autobrew bundle: apache-arrow-6.0.0-high_sierra.tar.xz\r\nPKG_CFLAGS=-I/private/var/folders/yn/gmsh_22s2c55v816r6d51fx1tnyl61/T/RtmpTkKYB6/R.INSTALL4c0b3a2ebab4/arrow/.deps/include -DARROW_R_WITH_PARQUET -DARROW_R_WITH_DATASET -DARROW_R_WITH_JSON -DARROW_R_WITH_S3 -DARROW_R_WITH_ARROW\r\nPKG_LIBS=-L/private/var/folders/yn/gmsh_22s2c55v816r6d51fx1tnyl61/T/RtmpTkKYB6/R.INSTALL4c0b3a2ebab4/arrow/.deps/lib -lparquet -larrow_dataset -larrow -larrow_bundled_dependencies -lthrift -llz4 -lsnappy -lzstd -laws-cpp-sdk-config -laws-cpp-sdk-transfer -laws-cpp-sdk-identity-management -laws-cpp-sdk-cognito-identity -laws-cpp-sdk-sts -laws-cpp-sdk-s3 -laws-cpp-sdk-core -laws-c-event-stream -laws-checksums -laws-c-common -lpthread -lcurl{code}\r\nIn compile, I see lines like\r\n{code:java}\r\ng++ -std=gnu++11 -I\"/Users/ma38727/bin/R-devel/include\" -DNDEBUG -I/private/var/folders/yn/gmsh_22s2c55v816r6d51fx1tnyl61/T/RtmpTkKYB6/R.INSTALL4c0b3a2ebab4/arrow/.deps/include -DARROW_R_WITH_PARQUET -DARROW_R_WITH_DATASET -DARROW_R_WITH_JSON -DARROW_R_WITH_S3 -DARROW_R_WITH_ARROW -I../inst/include/ \u00a0-I/usr/local/include \u00a0 -fPIC \u00a0-g -O2 \u00a0-c RTasks.cpp -o RTasks.o{code}\r\nAt linking, I see\r\n{code:java}\r\ng++ -std=gnu++11 -dynamiclib -Wl,-headerpad_max_install_names -undefined dynamic_lookup -single_module -multiply_defined suppress -L/Users/ma38727/bin/R-devel/lib -L/usr/local/lib -o arrow.so RTasks.o altrep.o array.o array_to_vector.o arraydata.o arrowExports.o buffer.o chunkedarray.o compression.o compute-exec.o compute.o config.o csv.o dataset.o datatype.o expression.o feather.o field.o filesystem.o imports.o io.o json.o memorypool.o message.o parquet.o py-to-r.o r_to_arrow.o recordbatch.o recordbatchreader.o recordbatchwriter.o scalar.o schema.o symbols.o table.o threadpool.o type_infer.o -L/private/var/folders/yn/gmsh_22s2c55v816r6d51fx1tnyl61/T/RtmpTkKYB6/R.INSTALL4c0b3a2ebab4/arrow/.deps/lib -lparquet -larrow_dataset -larrow -larrow_bundled_dependencies -lthrift -llz4 -lsnappy -lzstd -laws-cpp-sdk-config -laws-cpp-sdk-transfer -laws-cpp-sdk-identity-management -laws-cpp-sdk-cognito-identity -laws-cpp-sdk-sts -laws-cpp-sdk-s3 -laws-cpp-sdk-core -laws-c-event-stream -laws-checksums -laws-c-common -lpthread -lcurl -L/Users/ma38727/bin/R-devel/lib -lR -lintl -Wl,-framework -Wl,CoreFoundation{code}\r\nA promising commit (unrelated to autobrew) is [https://github.com/apache/arrow/commit/225d9547d2363bd0eb8c85bdd0dd98a6014069d7] but trying to install a nightly build lead to\r\n\r\n\u00a0\r\n{code:java}\r\n\u00a0install.packages(\"arrow\", repos = \"https://arrow-r-nightly.s3.amazonaws.com\")\r\nInstalling package into '/Users/ma38727/Library/R/4.2/Bioc/3.15/library'\r\n(as 'lib' is unspecified)\r\ntrying URL 'https://arrow-r-nightly.s3.amazonaws.com/src/contrib/arrow_6.0.0.20211116.tar.gz'\r\nContent type 'binary/octet-stream' length 4562535 bytes (4.4 MB)\r\n==================================================\r\ndownloaded 4.4 MB\r\n* installing *source* package 'arrow' ...\r\n** using staged installation\r\n*** Downloading apache-arrow\r\n**** Using local manifest for apache-arrow\r\nWed Nov 17 11:51:53 EST 2021: Auto-brewing apache-arrow in /var/folders/yn/gmsh_22s2c55v816r6d51fx1tnyl61/T//build-apache-arrow...\r\n==> Tapping autobrew/core from https://github.com/autobrew/homebrew-core\r\nTapped 2 commands and 4636 formulae (4,885 files, 12.7MB).\r\naws-sdk-cpp\r\nlz4\r\nsnappy\r\nopenssl\r\nthrift\r\nzstd\r\n==> Downloading https://autobrew.github.io/bottles/aws-sdk-cpp-1.7.364.high_sierra.bottle.2.tar.gz\r\nAlready downloaded: /var/folders/yn/gmsh_22s2c55v816r6d51fx1tnyl61/T/downloads/f34d7866b963ebd58ba2d413affc720463646a52887fc411e7cbe697b8267e2d--aws-sdk-cpp-1.7.364.high_sierra.bottle.2.tar.gz\r\n==> Pouring aws-sdk-cpp-1.7.364.high_sierra.bottle.2.tar.gz\r\n==> Skipping post_install step for autobrew...\r\n\ud83c\udf7a \u00a0/private/var/folders/yn/gmsh_22s2c55v816r6d51fx1tnyl61/T/build-apache-arrow/Cellar/aws-sdk-cpp/1.7.364: 967 files, 21.8MB\r\n==> Downloading https://bintray-archive.github.io/bottles/lz4-1.8.3.high_sierra.bottle.tar.gz\r\nAlready downloaded: /var/folders/yn/gmsh_22s2c55v816r6d51fx1tnyl61/T/downloads/0a946e5671f0e86faaeef98ebbf6a7f2fba9b7bbf042a5783ffd363c98f3c4bd--lz4-1.8.3.high_sierra.bottle.tar.gz\r\n==> Pouring lz4-1.8.3.high_sierra.bottle.tar.gz\r\n==> Skipping post_install step for autobrew...\r\n\ud83c\udf7a \u00a0/private/var/folders/yn/gmsh_22s2c55v816r6d51fx1tnyl61/T/build-apache-arrow/Cellar/lz4/1.8.3: 22 files, 487.9KB\r\n==> Downloading https://bintray-archive.github.io/bottles/snappy-1.1.7_1.high_sierra.bottle.tar.gz\r\nAlready downloaded: /var/folders/yn/gmsh_22s2c55v816r6d51fx1tnyl61/T/downloads/9387790272f8e7c54155bbc01c0babe956c7a1636780e8f0bd53d8a6bfc37494--snappy-1.1.7_1.high_sierra.bottle.tar.gz\r\n==> Pouring snappy-1.1.7_1.high_sierra.bottle.tar.gz\r\n==> Skipping post_install step for autobrew...\r\n\ud83c\udf7a \u00a0/private/var/folders/yn/gmsh_22s2c55v816r6d51fx1tnyl61/T/build-apache-arrow/Cellar/snappy/1.1.7_1: 18 files, 118.1KB\r\n==> Downloading https://bintray-archive.github.io/bottles/openssl-1.0.2p.high_sierra.bottle.tar.gz\r\nAlready downloaded: /var/folders/yn/gmsh_22s2c55v816r6d51fx1tnyl61/T/downloads/c284b406ac6052e9bf10cb9a91525c50697aee845f612f95ccb2fef66f906244--openssl-1.0.2p.high_sierra.bottle.tar.gz\r\n==> Pouring openssl-1.0.2p.high_sierra.bottle.tar.gz\r\n==> Skipping post_install step for autobrew...\r\n\ud83c\udf7a \u00a0/private/var/folders/yn/gmsh_22s2c55v816r6d51fx1tnyl61/T/build-apache-arrow/Cellar/openssl/1.0.2p: 1,793 files, 12.3MB\r\n==> Downloading https://bintray-archive.github.io/bottles/thrift-0.11.0.high_sierra.bottle.tar.gz\r\nAlready downloaded: /var/folders/yn/gmsh_22s2c55v816r6d51fx1tnyl61/T/downloads/eb661987039a17dd353cf11bcd67ec1c6bfafd8cf3f59657ef1e54b7880e796f--thrift-0.11.0.high_sierra.bottle.tar.gz\r\n==> Pouring thrift-0.11.0.high_sierra.bottle.tar.gz\r\n==> Skipping post_install step for autobrew...\r\n\ud83c\udf7a \u00a0/private/var/folders/yn/gmsh_22s2c55v816r6d51fx1tnyl61/T/build-apache-arrow/Cellar/thrift/0.11.0: 102 files, 7MB\r\n==> Downloading https://autobrew.github.io/bottles/zstd-1.5.0.high_sierra.bottle.tar.gz\r\nAlready downloaded: /var/folders/yn/gmsh_22s2c55v816r6d51fx1tnyl61/T/downloads/32a33d7fff1ab256be5045c729d6311a3e0258a97f47717cbbf240b5aec07be4--zstd-1.5.0.high_sierra.bottle.tar.gz\r\n==> Pouring zstd-1.5.0.high_sierra.bottle.tar.gz\r\n==> Skipping post_install step for autobrew...\r\n\ud83c\udf7a \u00a0/private/var/folders/yn/gmsh_22s2c55v816r6d51fx1tnyl61/T/build-apache-arrow/Cellar/zstd/1.5.0: 26 files, 4.4MB\r\nError: The following flags:\r\n\u00a0 --HEAD, --build-from-source\r\nrequire building tools, but none are installed.\r\nInstall the Command Line Tools:\r\n\u00a0 xcode-select --install\r\ncreated /var/folders/yn/gmsh_22s2c55v816r6d51fx1tnyl61/T//build-apache-arrow/lib/libbrewaws-c-common.a\r\ncreated /var/folders/yn/gmsh_22s2c55v816r6d51fx1tnyl61/T//build-apache-arrow/lib/libbrewaws-c-event-stream.a\r\ncreated /var/folders/yn/gmsh_22s2c55v816r6d51fx1tnyl61/T//build-apache-arrow/lib/libbrewaws-checksums.a\r\ncreated /var/folders/yn/gmsh_22s2c55v816r6d51fx1tnyl61/T//build-apache-arrow/lib/libbrewaws-cpp-sdk-cognito-identity.a\r\ncreated /var/folders/yn/gmsh_22s2c55v816r6d51fx1tnyl61/T//build-apache-arrow/lib/libbrewaws-cpp-sdk-config.a\r\ncreated /var/folders/yn/gmsh_22s2c55v816r6d51fx1tnyl61/T//build-apache-arrow/lib/libbrewaws-cpp-sdk-core.a\r\ncreated /var/folders/yn/gmsh_22s2c55v816r6d51fx1tnyl61/T//build-apache-arrow/lib/libbrewaws-cpp-sdk-identity-management.a\r\ncreated /var/folders/yn/gmsh_22s2c55v816r6d51fx1tnyl61/T//build-apache-arrow/lib/libbrewaws-cpp-sdk-s3.a\r\ncreated /var/folders/yn/gmsh_22s2c55v816r6d51fx1tnyl61/T//build-apache-arrow/lib/libbrewaws-cpp-sdk-sts.a\r\ncreated /var/folders/yn/gmsh_22s2c55v816r6d51fx1tnyl61/T//build-apache-arrow/lib/libbrewaws-cpp-sdk-transfer.a\r\ncreated /var/folders/yn/gmsh_22s2c55v816r6d51fx1tnyl61/T//build-apache-arrow/lib/libbrewtesting-resources.a\r\ncreated /var/folders/yn/gmsh_22s2c55v816r6d51fx1tnyl61/T//build-apache-arrow/lib/libbrewlz4.a\r\ncreated /var/folders/yn/gmsh_22s2c55v816r6d51fx1tnyl61/T//build-apache-arrow/lib/libbrewcrypto.a\r\ncreated /var/folders/yn/gmsh_22s2c55v816r6d51fx1tnyl61/T//build-apache-arrow/lib/libbrewssl.a\r\ncreated /var/folders/yn/gmsh_22s2c55v816r6d51fx1tnyl61/T//build-apache-arrow/lib/libbrewsnappy.a\r\ncreated /var/folders/yn/gmsh_22s2c55v816r6d51fx1tnyl61/T//build-apache-arrow/lib/libbrewthrift.a\r\ncreated /var/folders/yn/gmsh_22s2c55v816r6d51fx1tnyl61/T//build-apache-arrow/lib/libbrewthriftz.a\r\ncreated /var/folders/yn/gmsh_22s2c55v816r6d51fx1tnyl61/T//build-apache-arrow/lib/libbrewzstd.a\r\n------------------------- NOTE ---------------------------\r\nThere was an issue preparing the Arrow C++ libraries.\r\nSee https://arrow.apache.org/docs/r/articles/install.html\r\n---------------------------------------------------------\r\nERROR: configuration failed for package 'arrow'\r\n* removing '/Users/ma38727/Library/R/4.2/Bioc/3.15/library/arrow'\r\n* restoring previous '/Users/ma38727/Library/R/4.2/Bioc/3.15/library/arrow'\r\nThe downloaded source packages are in\r\n\u00a0 \u00a0 '/private/var/folders/yn/gmsh_22s2c55v816r6d51fx1tnyl61/T/RtmpDFwn98/downloaded_packages'\r\nWarning message:\r\nIn install.packages(\"arrow\", repos = \"https://arrow-r-nightly.s3.amazonaws.com\") :\r\n\u00a0 installation of package 'arrow' had non-zero exit status\r\n{code}\r\nbut xcode command line tools are installed and current.",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=mtmorgan",
                        "name": "mtmorgan",
                        "key": "JIRAUSER280077",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Martin Morgan",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2021-11-17T16:53:42.129+0000",
                    "updated": "2021-11-17T16:53:42.129+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13411313/comment/17463767",
                    "id": "17463767",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=jeroenooms",
                        "name": "jeroenooms",
                        "key": "jeroenooms",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Jeroen",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "Sorry for the late response.\r\n\r\nI think the crash here is caused by the fact that your installation seems to mix autobrew libraries and dynamic libraries from homebrew in `/usr/local/opt`. This again is likely a result of your custom R configuration passing `-L/usr/local/lib` when compiling R packages, and thereby if you have homebrew libraries installed with the same name as the ones from the autobrew bundle, the former mask the latter.\r\n\r\nThis is probably a rare situation with custom builds of R, but I have added a workaround in the autobrew download script to rename the static libraries before linking, such that they won't get masked by the ones `/usr/local/lib`: [https://github.com/autobrew/scripts/commit/08d8af36ada522b5a79aadfe77c43f798fe600ef]\r\n\r\nCan you try again to build the release version of arrow from source using autobrew? I.e. just `install.packages(\"arrow\", type = \"source\")` should do that.\r\n\r\nThanks!\r\n\r\n\u00a0\r\n\r\n\u00a0",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=jeroenooms",
                        "name": "jeroenooms",
                        "key": "jeroenooms",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Jeroen",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2021-12-22T12:03:56.727+0000",
                    "updated": "2021-12-22T12:03:56.727+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13411313/comment/17463782",
                    "id": "17463782",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=mtmorgan",
                        "name": "mtmorgan",
                        "key": "JIRAUSER280077",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Martin Morgan",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "This seems to have fixed the issue, thanks. FWIW this is what I see now\r\n{code:java}\r\n> system2('otool', c('-L', system.file('libs/arrow.so', package='arrow')))\r\n/Users/ma38727/Library/R/4.2/Bioc/3.15/library/arrow/libs/arrow.so:\r\n\u00a0 \u00a0 arrow.so (compatibility version 0.0.0, current version 0.0.0)\r\n\u00a0 \u00a0 /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1281.100.1)\r\n\u00a0 \u00a0 /usr/lib/libcurl.4.dylib (compatibility version 7.0.0, current version 9.0.0)\r\n\u00a0 \u00a0 libR.dylib (compatibility version 4.2.0, current version 4.2.0)\r\n\u00a0 \u00a0 /usr/local/opt/gettext/lib/libintl.8.dylib (compatibility version 11.0.0, current version 11.0.0)\r\n\u00a0 \u00a0 /System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation (compatibility version 150.0.0, current version 1677.104.0)\r\n\u00a0 \u00a0 /usr/lib/libc++.1.dylib (compatibility version 1.0.0, current version 902.1.0){code}",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=mtmorgan",
                        "name": "mtmorgan",
                        "key": "JIRAUSER280077",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Martin Morgan",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2021-12-22T12:40:46.253+0000",
                    "updated": "2021-12-22T12:40:46.253+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13411313/comment/17463785",
                    "id": "17463785",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=jeroenooms",
                        "name": "jeroenooms",
                        "key": "jeroenooms",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Jeroen",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "Thanks for confirming.\r\n\r\nYes this is the expected output, if you build with static libraries from autobrew there should be no links to\u00a0 homebrew libs under `/usr/local/lib`. (the reference to libintl in your new output is not actually a dependency of arrow, I am not sure why it shows up. Perhaps as a dependency of R itself, that gets hardcoded as a linker flag in your custom R build)\r\n\r\n\u00a0",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=jeroenooms",
                        "name": "jeroenooms",
                        "key": "jeroenooms",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Jeroen",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2021-12-22T12:48:53.921+0000",
                    "updated": "2021-12-22T12:48:53.921+0000"
                }
            ],
            "maxResults": 9,
            "total": 9,
            "startAt": 0
        },
        "customfield_12311820": "0|z0wnmg:",
        "customfield_12314139": null
    }
}