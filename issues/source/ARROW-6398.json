{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13253979",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13253979",
    "key": "ARROW-6398",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12340948",
                "id": "12340948",
                "description": "",
                "name": "0.16.0",
                "archived": false,
                "released": true,
                "releaseDate": "2020-02-07"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/2",
            "id": "2",
            "description": "The problem described is an issue which will never be fixed.",
            "name": "Won't Fix"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/4",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
            "name": "Minor",
            "id": "4"
        },
        "labels": [
            "dataset"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=bkietz",
            "name": "bkietz",
            "key": "bkietz",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=bkietz&avatarId=37277",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bkietz&avatarId=37277",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bkietz&avatarId=37277",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bkietz&avatarId=37277"
            },
            "displayName": "Ben Kietzman",
            "active": true,
            "timeZone": "America/New_York"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/6",
            "description": "The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/closed.png",
            "name": "Closed",
            "id": "6",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12328935",
                "id": "12328935",
                "name": "C++"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=bkietz",
            "name": "bkietz",
            "key": "bkietz",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=bkietz&avatarId=37277",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bkietz&avatarId=37277",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bkietz&avatarId=37277",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bkietz&avatarId=37277"
            },
            "displayName": "Ben Kietzman",
            "active": true,
            "timeZone": "America/New_York"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=bkietz",
            "name": "bkietz",
            "key": "bkietz",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=bkietz&avatarId=37277",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bkietz&avatarId=37277",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bkietz&avatarId=37277",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bkietz&avatarId=37277"
            },
            "displayName": "Ben Kietzman",
            "active": true,
            "timeZone": "America/New_York"
        },
        "aggregateprogress": {
            "progress": 11400,
            "total": 11400,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 11400,
            "total": 11400,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-6398/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 19,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13253979/worklog/304403",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "bkietz commented on pull request #5239: ARROW-6398: [C++] consolidate ScanOptions and ScanContext\nURL: https://github.com/apache/arrow/pull/5239\n \n \n   Currently ScanOptions has two distinct responsibilities: it contains the data selector (and eventually projection schema) for the current scan and it serves as the base class for format specific scan options. This makes providing scan options for more than a single format impossible (as the resulting merged options would for example need to inherit both JsonScanOptions and ParquetScanOptions).\r\n   \r\n   This patch removes ScanOptions and promotes FileScanOptions to the abstract base class for format specific scan options.\r\n   \r\n   ScanContext is now the root container of scan state: contains the data selector, projection schema, and a vector of FileScanOptions\r\n   \n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-08-30T17:17:27.561+0000",
                    "updated": "2019-08-30T17:17:27.561+0000",
                    "started": "2019-08-30T17:17:27.561+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "304403",
                    "issueId": "13253979"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13253979/worklog/304628",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "codecov-io commented on issue #5239: ARROW-6398: [C++] Consolidate ScanOptions and ScanContext\nURL: https://github.com/apache/arrow/pull/5239#issuecomment-526761351\n \n \n   # [Codecov](https://codecov.io/gh/apache/arrow/pull/5239?src=pr&el=h1) Report\n   > Merging [#5239](https://codecov.io/gh/apache/arrow/pull/5239?src=pr&el=desc) into [master](https://codecov.io/gh/apache/arrow/commit/beea8f93984f0cde15d22925a1119d3a0ebfdbfd?src=pr&el=desc) will **increase** coverage by `1.56%`.\n   > The diff coverage is `92.68%`.\n   \n   [![Impacted file tree graph](https://codecov.io/gh/apache/arrow/pull/5239/graphs/tree.svg?width=650&token=LpTCFbqVT1&height=150&src=pr)](https://codecov.io/gh/apache/arrow/pull/5239?src=pr&el=tree)\n   \n   ```diff\n   @@            Coverage Diff             @@\n   ##           master    #5239      +/-   ##\n   ==========================================\n   + Coverage   87.64%    89.2%   +1.56%     \n   ==========================================\n     Files        1033      750     -283     \n     Lines      148463   107583   -40880     \n     Branches     1437        0    -1437     \n   ==========================================\n   - Hits       130118    95969   -34149     \n   + Misses      17983    11614    -6369     \n   + Partials      362        0     -362\n   ```\n   \n   \n   | [Impacted Files](https://codecov.io/gh/apache/arrow/pull/5239?src=pr&el=tree) | Coverage \u0394 | |\n   |---|---|---|\n   | [cpp/src/arrow/dataset/dataset.h](https://codecov.io/gh/apache/arrow/pull/5239/diff?src=pr&el=tree#diff-Y3BwL3NyYy9hcnJvdy9kYXRhc2V0L2RhdGFzZXQuaA==) | `76.92% <0%> (\u00f8)` | :arrow_up: |\n   | [cpp/src/arrow/dataset/file\\_base.cc](https://codecov.io/gh/apache/arrow/pull/5239/diff?src=pr&el=tree#diff-Y3BwL3NyYy9hcnJvdy9kYXRhc2V0L2ZpbGVfYmFzZS5jYw==) | `92.85% <100%> (-0.33%)` | :arrow_down: |\n   | [cpp/src/arrow/dataset/file\\_parquet\\_test.cc](https://codecov.io/gh/apache/arrow/pull/5239/diff?src=pr&el=tree#diff-Y3BwL3NyYy9hcnJvdy9kYXRhc2V0L2ZpbGVfcGFycXVldF90ZXN0LmNj) | `93.75% <100%> (-0.1%)` | :arrow_down: |\n   | [cpp/src/arrow/dataset/dataset.cc](https://codecov.io/gh/apache/arrow/pull/5239/diff?src=pr&el=tree#diff-Y3BwL3NyYy9hcnJvdy9kYXRhc2V0L2RhdGFzZXQuY2M=) | `100% <100%> (\u00f8)` | :arrow_up: |\n   | [cpp/src/arrow/dataset/file\\_parquet.cc](https://codecov.io/gh/apache/arrow/pull/5239/diff?src=pr&el=tree#diff-Y3BwL3NyYy9hcnJvdy9kYXRhc2V0L2ZpbGVfcGFycXVldC5jYw==) | `100% <100%> (\u00f8)` | :arrow_up: |\n   | [cpp/src/arrow/dataset/scanner.h](https://codecov.io/gh/apache/arrow/pull/5239/diff?src=pr&el=tree#diff-Y3BwL3NyYy9hcnJvdy9kYXRhc2V0L3NjYW5uZXIuaA==) | `100% <100%> (\u00f8)` | :arrow_up: |\n   | [cpp/src/arrow/dataset/file\\_parquet.h](https://codecov.io/gh/apache/arrow/pull/5239/diff?src=pr&el=tree#diff-Y3BwL3NyYy9hcnJvdy9kYXRhc2V0L2ZpbGVfcGFycXVldC5o) | `87.5% <100%> (\u00f8)` | :arrow_up: |\n   | [cpp/src/arrow/dataset/file\\_base.h](https://codecov.io/gh/apache/arrow/pull/5239/diff?src=pr&el=tree#diff-Y3BwL3NyYy9hcnJvdy9kYXRhc2V0L2ZpbGVfYmFzZS5o) | `86.66% <50%> (-0.84%)` | :arrow_down: |\n   | [cpp/src/arrow/dataset/test\\_util.h](https://codecov.io/gh/apache/arrow/pull/5239/diff?src=pr&el=tree#diff-Y3BwL3NyYy9hcnJvdy9kYXRhc2V0L3Rlc3RfdXRpbC5o) | `94.36% <91.66%> (+0.08%)` | :arrow_up: |\n   | [cpp/src/arrow/json/converter.cc](https://codecov.io/gh/apache/arrow/pull/5239/diff?src=pr&el=tree#diff-Y3BwL3NyYy9hcnJvdy9qc29uL2NvbnZlcnRlci5jYw==) | `90.05% <0%> (-1.76%)` | :arrow_down: |\n   | ... and [286 more](https://codecov.io/gh/apache/arrow/pull/5239/diff?src=pr&el=tree-more) | |\n   \n   ------\n   \n   [Continue to review full report at Codecov](https://codecov.io/gh/apache/arrow/pull/5239?src=pr&el=continue).\n   > **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n   > `\u0394 = absolute <relative> (impact)`, `\u00f8 = not affected`, `? = missing data`\n   > Powered by [Codecov](https://codecov.io/gh/apache/arrow/pull/5239?src=pr&el=footer). Last update [beea8f9...709ea62](https://codecov.io/gh/apache/arrow/pull/5239?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n   \n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-08-30T21:53:19.308+0000",
                    "updated": "2019-08-30T21:53:19.308+0000",
                    "started": "2019-08-30T21:53:19.307+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "304628",
                    "issueId": "13253979"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13253979/worklog/305166",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on pull request #5239: ARROW-6398: [C++] Consolidate ScanOptions and ScanContext\nURL: https://github.com/apache/arrow/pull/5239#discussion_r319943213\n \n \n\n ##########\n File path: cpp/src/arrow/dataset/scanner.h\n ##########\n @@ -29,26 +29,61 @@\n namespace arrow {\n namespace dataset {\n \n-/// \\brief Shared state for a Scan operation\n-struct ARROW_DS_EXPORT ScanContext {\n-  MemoryPool* pool = arrow::default_memory_pool();\n-};\n+/// \\brief Base class for file scanning options\n+class ARROW_DS_EXPORT FileScanOptions {\n+ public:\n+  /// \\brief The file format this options corresponds to\n+  virtual std::shared_ptr<FileFormat> file_format() const = 0;\n \n-// TODO(wesm): API for handling of post-materialization filters. For\n-// example, if the user requests [$col1 > 0, $col2 > 0] and $col1 is a\n-// partition key, but $col2 is not, then the filter \"$col2 > 0\" must\n-// be evaluated in-memory against the RecordBatch objects resulting\n-// from the Scan\n+  virtual ~FileScanOptions() = default;\n+};\n \n-class ARROW_DS_EXPORT ScanOptions {\n+struct ARROW_DS_EXPORT ScanContext final {\n \n Review comment:\n   I think this should still be named `ScanOptions`. Perhaps you can use `ScanContext` for some opaque internal state (if necessary).\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-09-02T12:45:47.231+0000",
                    "updated": "2019-09-02T12:45:47.231+0000",
                    "started": "2019-09-02T12:45:47.230+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "305166",
                    "issueId": "13253979"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13253979/worklog/305168",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on pull request #5239: ARROW-6398: [C++] Consolidate ScanOptions and ScanContext\nURL: https://github.com/apache/arrow/pull/5239#discussion_r319943445\n \n \n\n ##########\n File path: cpp/src/arrow/dataset/scanner.h\n ##########\n @@ -29,26 +29,61 @@\n namespace arrow {\n namespace dataset {\n \n-/// \\brief Shared state for a Scan operation\n-struct ARROW_DS_EXPORT ScanContext {\n-  MemoryPool* pool = arrow::default_memory_pool();\n-};\n+/// \\brief Base class for file scanning options\n+class ARROW_DS_EXPORT FileScanOptions {\n+ public:\n+  /// \\brief The file format this options corresponds to\n+  virtual std::shared_ptr<FileFormat> file_format() const = 0;\n \n-// TODO(wesm): API for handling of post-materialization filters. For\n-// example, if the user requests [$col1 > 0, $col2 > 0] and $col1 is a\n-// partition key, but $col2 is not, then the filter \"$col2 > 0\" must\n-// be evaluated in-memory against the RecordBatch objects resulting\n-// from the Scan\n+  virtual ~FileScanOptions() = default;\n+};\n \n-class ARROW_DS_EXPORT ScanOptions {\n+struct ARROW_DS_EXPORT ScanContext final {\n  public:\n-  virtual ~ScanOptions() = default;\n+  ScanContext() = default;\n \n+  /// Filters\n   const std::shared_ptr<DataSelector>& selector() const { return selector_; }\n \n+  ScanContext& selector(std::shared_ptr<DataSelector> s) {\n+    selector_ = std::move(s);\n+    return *this;\n+  }\n+\n+  /// Schema to which record batches will be projected\n+  const std::shared_ptr<Schema>& schema() const { return schema_; }\n+\n+  ScanContext& schema(std::shared_ptr<Schema> s) {\n+    schema_ = std::move(s);\n+    return *this;\n+  }\n+\n+  /// MemoryPool used for allocating temporary memory and yielded record batches\n+  MemoryPool* pool() const { return pool_; }\n+\n+  ScanContext& pool(MemoryPool* p) {\n+    pool_ = p;\n+    return *this;\n+  }\n+\n+  /// format specific options\n+  const std::vector<std::shared_ptr<FileScanOptions>>& options() const {\n+    return options_;\n+  }\n+\n+  ScanContext& AddFileScanOptions(std::shared_ptr<FileScanOptions> opts) {\n \n Review comment:\n   `file_options`?\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-09-02T12:46:23.187+0000",
                    "updated": "2019-09-02T12:46:23.187+0000",
                    "started": "2019-09-02T12:46:23.187+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "305168",
                    "issueId": "13253979"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13253979/worklog/305296",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "bkietz commented on pull request #5239: ARROW-6398: [C++] Consolidate ScanOptions and ScanContext\nURL: https://github.com/apache/arrow/pull/5239#discussion_r320024584\n \n \n\n ##########\n File path: cpp/src/arrow/dataset/scanner.h\n ##########\n @@ -29,26 +29,61 @@\n namespace arrow {\n namespace dataset {\n \n-/// \\brief Shared state for a Scan operation\n-struct ARROW_DS_EXPORT ScanContext {\n-  MemoryPool* pool = arrow::default_memory_pool();\n-};\n+/// \\brief Base class for file scanning options\n+class ARROW_DS_EXPORT FileScanOptions {\n+ public:\n+  /// \\brief The file format this options corresponds to\n+  virtual std::shared_ptr<FileFormat> file_format() const = 0;\n \n-// TODO(wesm): API for handling of post-materialization filters. For\n-// example, if the user requests [$col1 > 0, $col2 > 0] and $col1 is a\n-// partition key, but $col2 is not, then the filter \"$col2 > 0\" must\n-// be evaluated in-memory against the RecordBatch objects resulting\n-// from the Scan\n+  virtual ~FileScanOptions() = default;\n+};\n \n-class ARROW_DS_EXPORT ScanOptions {\n+struct ARROW_DS_EXPORT ScanContext final {\n \n Review comment:\n   Why should it be named ScanOptions? It isn't optional, unlike the potentially absent FileScanOptions. Furthermore that name implies that FileScanOptions inherits ScanOptions, which is no longer the case. If ScanContext isn't a good name then what about ScanState?\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-09-02T17:30:42.094+0000",
                    "updated": "2019-09-02T17:30:42.094+0000",
                    "started": "2019-09-02T17:30:42.094+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "305296",
                    "issueId": "13253979"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13253979/worklog/305297",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "bkietz commented on pull request #5239: ARROW-6398: [C++] Consolidate ScanOptions and ScanContext\nURL: https://github.com/apache/arrow/pull/5239#discussion_r320024589\n \n \n\n ##########\n File path: cpp/src/arrow/dataset/scanner.h\n ##########\n @@ -29,26 +29,61 @@\n namespace arrow {\n namespace dataset {\n \n-/// \\brief Shared state for a Scan operation\n-struct ARROW_DS_EXPORT ScanContext {\n-  MemoryPool* pool = arrow::default_memory_pool();\n-};\n+/// \\brief Base class for file scanning options\n+class ARROW_DS_EXPORT FileScanOptions {\n+ public:\n+  /// \\brief The file format this options corresponds to\n+  virtual std::shared_ptr<FileFormat> file_format() const = 0;\n \n-// TODO(wesm): API for handling of post-materialization filters. For\n-// example, if the user requests [$col1 > 0, $col2 > 0] and $col1 is a\n-// partition key, but $col2 is not, then the filter \"$col2 > 0\" must\n-// be evaluated in-memory against the RecordBatch objects resulting\n-// from the Scan\n+  virtual ~FileScanOptions() = default;\n+};\n \n-class ARROW_DS_EXPORT ScanOptions {\n+struct ARROW_DS_EXPORT ScanContext final {\n  public:\n-  virtual ~ScanOptions() = default;\n+  ScanContext() = default;\n \n+  /// Filters\n   const std::shared_ptr<DataSelector>& selector() const { return selector_; }\n \n+  ScanContext& selector(std::shared_ptr<DataSelector> s) {\n+    selector_ = std::move(s);\n+    return *this;\n+  }\n+\n+  /// Schema to which record batches will be projected\n+  const std::shared_ptr<Schema>& schema() const { return schema_; }\n+\n+  ScanContext& schema(std::shared_ptr<Schema> s) {\n+    schema_ = std::move(s);\n+    return *this;\n+  }\n+\n+  /// MemoryPool used for allocating temporary memory and yielded record batches\n+  MemoryPool* pool() const { return pool_; }\n+\n+  ScanContext& pool(MemoryPool* p) {\n+    pool_ = p;\n+    return *this;\n+  }\n+\n+  /// format specific options\n+  const std::vector<std::shared_ptr<FileScanOptions>>& options() const {\n+    return options_;\n+  }\n+\n+  ScanContext& AddFileScanOptions(std::shared_ptr<FileScanOptions> opts) {\n \n Review comment:\n   Alright\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-09-02T17:30:44.730+0000",
                    "updated": "2019-09-02T17:30:44.730+0000",
                    "started": "2019-09-02T17:30:44.730+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "305297",
                    "issueId": "13253979"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13253979/worklog/305298",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on pull request #5239: ARROW-6398: [C++] Consolidate ScanOptions and ScanContext\nURL: https://github.com/apache/arrow/pull/5239#discussion_r320024942\n \n \n\n ##########\n File path: cpp/src/arrow/dataset/scanner.h\n ##########\n @@ -29,26 +29,61 @@\n namespace arrow {\n namespace dataset {\n \n-/// \\brief Shared state for a Scan operation\n-struct ARROW_DS_EXPORT ScanContext {\n-  MemoryPool* pool = arrow::default_memory_pool();\n-};\n+/// \\brief Base class for file scanning options\n+class ARROW_DS_EXPORT FileScanOptions {\n+ public:\n+  /// \\brief The file format this options corresponds to\n+  virtual std::shared_ptr<FileFormat> file_format() const = 0;\n \n-// TODO(wesm): API for handling of post-materialization filters. For\n-// example, if the user requests [$col1 > 0, $col2 > 0] and $col1 is a\n-// partition key, but $col2 is not, then the filter \"$col2 > 0\" must\n-// be evaluated in-memory against the RecordBatch objects resulting\n-// from the Scan\n+  virtual ~FileScanOptions() = default;\n+};\n \n-class ARROW_DS_EXPORT ScanOptions {\n+struct ARROW_DS_EXPORT ScanContext final {\n \n Review comment:\n   Because those are options, simply.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-09-02T17:33:47.434+0000",
                    "updated": "2019-09-02T17:33:47.434+0000",
                    "started": "2019-09-02T17:33:47.434+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "305298",
                    "issueId": "13253979"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13253979/worklog/305299",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on pull request #5239: ARROW-6398: [C++] Consolidate ScanOptions and ScanContext\nURL: https://github.com/apache/arrow/pull/5239#discussion_r320024942\n \n \n\n ##########\n File path: cpp/src/arrow/dataset/scanner.h\n ##########\n @@ -29,26 +29,61 @@\n namespace arrow {\n namespace dataset {\n \n-/// \\brief Shared state for a Scan operation\n-struct ARROW_DS_EXPORT ScanContext {\n-  MemoryPool* pool = arrow::default_memory_pool();\n-};\n+/// \\brief Base class for file scanning options\n+class ARROW_DS_EXPORT FileScanOptions {\n+ public:\n+  /// \\brief The file format this options corresponds to\n+  virtual std::shared_ptr<FileFormat> file_format() const = 0;\n \n-// TODO(wesm): API for handling of post-materialization filters. For\n-// example, if the user requests [$col1 > 0, $col2 > 0] and $col1 is a\n-// partition key, but $col2 is not, then the filter \"$col2 > 0\" must\n-// be evaluated in-memory against the RecordBatch objects resulting\n-// from the Scan\n+  virtual ~FileScanOptions() = default;\n+};\n \n-class ARROW_DS_EXPORT ScanOptions {\n+struct ARROW_DS_EXPORT ScanContext final {\n \n Review comment:\n   Because those are options, simply. Other options classes in Arrow are called SomethingOptions.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-09-02T17:35:12.918+0000",
                    "updated": "2019-09-02T17:35:12.918+0000",
                    "started": "2019-09-02T17:35:12.917+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "305299",
                    "issueId": "13253979"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13253979/worklog/305302",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "bkietz commented on pull request #5239: ARROW-6398: [C++] Consolidate ScanOptions and ScanContext\nURL: https://github.com/apache/arrow/pull/5239#discussion_r320026858\n \n \n\n ##########\n File path: cpp/src/arrow/dataset/scanner.h\n ##########\n @@ -29,26 +29,61 @@\n namespace arrow {\n namespace dataset {\n \n-/// \\brief Shared state for a Scan operation\n-struct ARROW_DS_EXPORT ScanContext {\n-  MemoryPool* pool = arrow::default_memory_pool();\n-};\n+/// \\brief Base class for file scanning options\n+class ARROW_DS_EXPORT FileScanOptions {\n+ public:\n+  /// \\brief The file format this options corresponds to\n+  virtual std::shared_ptr<FileFormat> file_format() const = 0;\n \n-// TODO(wesm): API for handling of post-materialization filters. For\n-// example, if the user requests [$col1 > 0, $col2 > 0] and $col1 is a\n-// partition key, but $col2 is not, then the filter \"$col2 > 0\" must\n-// be evaluated in-memory against the RecordBatch objects resulting\n-// from the Scan\n+  virtual ~FileScanOptions() = default;\n+};\n \n-class ARROW_DS_EXPORT ScanOptions {\n+struct ARROW_DS_EXPORT ScanContext final {\n \n Review comment:\n   But we also have `compute::FunctionContext` which is required by the kernels, and may optionally be configured with a different memory pool\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-09-02T17:50:43.468+0000",
                    "updated": "2019-09-02T17:50:43.468+0000",
                    "started": "2019-09-02T17:50:43.467+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "305302",
                    "issueId": "13253979"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13253979/worklog/305307",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on pull request #5239: ARROW-6398: [C++] Consolidate ScanOptions and ScanContext\nURL: https://github.com/apache/arrow/pull/5239#discussion_r320034879\n \n \n\n ##########\n File path: cpp/src/arrow/dataset/scanner.h\n ##########\n @@ -29,26 +29,61 @@\n namespace arrow {\n namespace dataset {\n \n-/// \\brief Shared state for a Scan operation\n-struct ARROW_DS_EXPORT ScanContext {\n-  MemoryPool* pool = arrow::default_memory_pool();\n-};\n+/// \\brief Base class for file scanning options\n+class ARROW_DS_EXPORT FileScanOptions {\n+ public:\n+  /// \\brief The file format this options corresponds to\n+  virtual std::shared_ptr<FileFormat> file_format() const = 0;\n \n-// TODO(wesm): API for handling of post-materialization filters. For\n-// example, if the user requests [$col1 > 0, $col2 > 0] and $col1 is a\n-// partition key, but $col2 is not, then the filter \"$col2 > 0\" must\n-// be evaluated in-memory against the RecordBatch objects resulting\n-// from the Scan\n+  virtual ~FileScanOptions() = default;\n+};\n \n-class ARROW_DS_EXPORT ScanOptions {\n+struct ARROW_DS_EXPORT ScanContext final {\n \n Review comment:\n   Lots of things can be configured with a memory pool. But `FunctionContext` doesn't hold any other options; it's a container for kernel state execution, not user-provided preferences.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-09-02T19:07:35.471+0000",
                    "updated": "2019-09-02T19:07:35.471+0000",
                    "started": "2019-09-02T19:07:35.471+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "305307",
                    "issueId": "13253979"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13253979/worklog/305587",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "fsaintjacques commented on pull request #5239: ARROW-6398: [C++] Consolidate ScanOptions and ScanContext\nURL: https://github.com/apache/arrow/pull/5239#discussion_r320262852\n \n \n\n ##########\n File path: cpp/src/arrow/dataset/scanner.h\n ##########\n @@ -29,26 +29,61 @@\n namespace arrow {\n namespace dataset {\n \n-/// \\brief Shared state for a Scan operation\n-struct ARROW_DS_EXPORT ScanContext {\n-  MemoryPool* pool = arrow::default_memory_pool();\n-};\n+/// \\brief Base class for file scanning options\n+class ARROW_DS_EXPORT FileScanOptions {\n+ public:\n+  /// \\brief The file format this options corresponds to\n+  virtual std::shared_ptr<FileFormat> file_format() const = 0;\n \n-// TODO(wesm): API for handling of post-materialization filters. For\n-// example, if the user requests [$col1 > 0, $col2 > 0] and $col1 is a\n-// partition key, but $col2 is not, then the filter \"$col2 > 0\" must\n-// be evaluated in-memory against the RecordBatch objects resulting\n-// from the Scan\n+  virtual ~FileScanOptions() = default;\n+};\n \n-class ARROW_DS_EXPORT ScanOptions {\n+struct ARROW_DS_EXPORT ScanContext final {\n \n Review comment:\n   Both argument are valid, it holds a MemoryPool like FunctionContext, but it has options like other kernel. I'm biased toward ScanOptions as it holds important options like the projected schema and the filters. \n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-09-03T13:11:39.683+0000",
                    "updated": "2019-09-03T13:11:39.683+0000",
                    "started": "2019-09-03T13:11:39.683+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "305587",
                    "issueId": "13253979"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13253979/worklog/305591",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "bkietz commented on pull request #5239: ARROW-6398: [C++] Consolidate ScanOptions and ScanContext\nURL: https://github.com/apache/arrow/pull/5239#discussion_r320267725\n \n \n\n ##########\n File path: cpp/src/arrow/dataset/scanner.h\n ##########\n @@ -29,26 +29,61 @@\n namespace arrow {\n namespace dataset {\n \n-/// \\brief Shared state for a Scan operation\n-struct ARROW_DS_EXPORT ScanContext {\n-  MemoryPool* pool = arrow::default_memory_pool();\n-};\n+/// \\brief Base class for file scanning options\n+class ARROW_DS_EXPORT FileScanOptions {\n+ public:\n+  /// \\brief The file format this options corresponds to\n+  virtual std::shared_ptr<FileFormat> file_format() const = 0;\n \n-// TODO(wesm): API for handling of post-materialization filters. For\n-// example, if the user requests [$col1 > 0, $col2 > 0] and $col1 is a\n-// partition key, but $col2 is not, then the filter \"$col2 > 0\" must\n-// be evaluated in-memory against the RecordBatch objects resulting\n-// from the Scan\n+  virtual ~FileScanOptions() = default;\n+};\n \n-class ARROW_DS_EXPORT ScanOptions {\n+struct ARROW_DS_EXPORT ScanContext final {\n \n Review comment:\n   Alright, I'll rename back to ScanOptions.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-09-03T13:21:39.715+0000",
                    "updated": "2019-09-03T13:21:39.715+0000",
                    "started": "2019-09-03T13:21:39.714+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "305591",
                    "issueId": "13253979"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13253979/worklog/310591",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on pull request #5239: ARROW-6398: [C++] Consolidate ScanOptions and ScanContext\nURL: https://github.com/apache/arrow/pull/5239#discussion_r323243232\n \n \n\n ##########\n File path: cpp/src/arrow/dataset/scanner.h\n ##########\n @@ -29,31 +29,73 @@\n namespace arrow {\n namespace dataset {\n \n-/// \\brief Shared state for a Scan operation\n-struct ARROW_DS_EXPORT ScanContext {\n-  MemoryPool* pool = arrow::default_memory_pool();\n-};\n-\n-// TODO(wesm): API for handling of post-materialization filters. For\n-// example, if the user requests [$col1 > 0, $col2 > 0] and $col1 is a\n-// partition key, but $col2 is not, then the filter \"$col2 > 0\" must\n-// be evaluated in-memory against the RecordBatch objects resulting\n-// from the Scan\n-\n-class ARROW_DS_EXPORT ScanOptions {\n+/// Container for scan state\n+struct ARROW_DS_EXPORT ScanOptions final {\n  public:\n-  virtual ~ScanOptions() = default;\n+  ScanOptions() = default;\n \n+  /// Filters\n   const std::shared_ptr<DataSelector>& selector() const { return selector_; }\n \n+  ScanOptions& selector(std::shared_ptr<DataSelector> s) {\n \n Review comment:\n   Not sure about the naming. Should this kind of method be called `set_selector`? @wesm \n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-09-11T13:33:43.208+0000",
                    "updated": "2019-09-11T13:33:43.208+0000",
                    "started": "2019-09-11T13:33:43.207+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "310591",
                    "issueId": "13253979"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13253979/worklog/310592",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on issue #5239: ARROW-6398: [C++] Consolidate ScanOptions and ScanContext\nURL: https://github.com/apache/arrow/pull/5239#issuecomment-530382531\n \n \n   Can you rebase in order to fix the GLib / C issues?\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-09-11T13:33:58.895+0000",
                    "updated": "2019-09-11T13:33:58.895+0000",
                    "started": "2019-09-11T13:33:58.894+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "310592",
                    "issueId": "13253979"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13253979/worklog/311490",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on pull request #5239: ARROW-6398: [C++] Consolidate ScanOptions and ScanContext\nURL: https://github.com/apache/arrow/pull/5239#discussion_r323826983\n \n \n\n ##########\n File path: cpp/src/arrow/dataset/scanner.h\n ##########\n @@ -29,31 +29,73 @@\n namespace arrow {\n namespace dataset {\n \n-/// \\brief Shared state for a Scan operation\n-struct ARROW_DS_EXPORT ScanContext {\n-  MemoryPool* pool = arrow::default_memory_pool();\n-};\n-\n-// TODO(wesm): API for handling of post-materialization filters. For\n-// example, if the user requests [$col1 > 0, $col2 > 0] and $col1 is a\n-// partition key, but $col2 is not, then the filter \"$col2 > 0\" must\n-// be evaluated in-memory against the RecordBatch objects resulting\n-// from the Scan\n-\n-class ARROW_DS_EXPORT ScanOptions {\n+/// Container for scan state\n+struct ARROW_DS_EXPORT ScanOptions final {\n  public:\n-  virtual ~ScanOptions() = default;\n+  ScanOptions() = default;\n \n+  /// Filters\n   const std::shared_ptr<DataSelector>& selector() const { return selector_; }\n \n+  ScanOptions& selector(std::shared_ptr<DataSelector> s) {\n \n Review comment:\n   Or `add_selector`\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-09-12T16:08:47.715+0000",
                    "updated": "2019-09-12T16:08:47.715+0000",
                    "started": "2019-09-12T16:08:47.715+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "311490",
                    "issueId": "13253979"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13253979/worklog/311508",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on issue #5239: ARROW-6398: [C++] Consolidate ScanOptions and ScanContext\nURL: https://github.com/apache/arrow/pull/5239#issuecomment-530904687\n \n \n   @fsaintjacques Is it `DataSourceOptions` or `DiscoveryOptions`?\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-09-12T16:32:03.713+0000",
                    "updated": "2019-09-12T16:32:03.713+0000",
                    "started": "2019-09-12T16:32:03.712+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "311508",
                    "issueId": "13253979"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13253979/worklog/311548",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "bkietz commented on issue #5239: ARROW-6398: [C++] Consolidate ScanOptions and ScanContext\nURL: https://github.com/apache/arrow/pull/5239#issuecomment-530930160\n \n \n   I think `DataSourceOptions` makes more sense; the options are determined during discovery but they primarily impact the behavior of a data source.\r\n   \r\n   For example the reconciliation schema declares which columns in a data source will be available and the type to which they will be cast. This would be generated when a discovered source's inferred schema does not match that of other discovered sources, for example when an older data file doesn't include columns present in newer files\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-09-12T17:40:45.548+0000",
                    "updated": "2019-09-12T17:40:45.548+0000",
                    "started": "2019-09-12T17:40:45.547+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "311548",
                    "issueId": "13253979"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13253979/worklog/318445",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "bkietz commented on issue #5239: ARROW-6398: [C++] Consolidate ScanOptions and ScanContext\nURL: https://github.com/apache/arrow/pull/5239#issuecomment-535105043\n \n \n   Closing for now, will try again later\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-09-25T16:32:47.233+0000",
                    "updated": "2019-09-25T16:32:47.233+0000",
                    "started": "2019-09-25T16:32:47.232+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "318445",
                    "issueId": "13253979"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13253979/worklog/318446",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "bkietz commented on pull request #5239: ARROW-6398: [C++] Consolidate ScanOptions and ScanContext\nURL: https://github.com/apache/arrow/pull/5239\n \n \n   \n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-09-25T16:32:47.345+0000",
                    "updated": "2019-09-25T16:32:47.345+0000",
                    "started": "2019-09-25T16:32:47.344+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "318446",
                    "issueId": "13253979"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
            "id": "4",
            "description": "An improvement or enhancement to an existing feature or task.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
            "name": "Improvement",
            "subtask": false,
            "avatarId": 21140
        },
        "timespent": 11400,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@e2c2f5a[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@5ae5ba8b[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@7d31c6ff[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@af71a30[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@5208da05[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@33915ea[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@70cc3d4c[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@42d88fff[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@5694ad53[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@1d49642e[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@c7e0c96[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@a5fcd91[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 11400,
        "customfield_12312520": null,
        "customfield_12312521": "2019-08-30 16:14:53.0",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2020-01-14T17:01:52.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-6398/watchers",
            "watchCount": 1,
            "isWatching": false
        },
        "created": "2019-08-30T16:14:53.000+0000",
        "updated": "2020-04-10T15:32:56.000+0000",
        "timeoriginalestimate": null,
        "description": "Currently ScanOptions has two distinct responsibilities: it contains the data selector (and eventually projection schema) for the current scan and it serves as the base class for format specific scan options.\r\n\r\nIn addition, we have ScanContext which holds the memory pool for the current scan.\r\n\r\nI think these classes should be rearranged as follows: ScanOptions will be removed and FileScanOptions will be the abstract base class for format specific scan options. ScanContext will be a concrete struct and contain the data selector, projection schema, a vector of FileScanOptions, and any other shared scan state.",
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "3h 10m",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 11400
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[C++] Consolidate ScanOptions and ScanContext",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [],
            "maxResults": 0,
            "total": 0,
            "startAt": 0
        },
        "customfield_12311820": "0|z067cg:",
        "customfield_12314139": null
    }
}