{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13324749",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13324749",
    "key": "ARROW-9873",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12345977",
                "id": "12345977",
                "description": "",
                "name": "2.0.0",
                "archived": false,
                "released": true,
                "releaseDate": "2020-10-19"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "name": "Major",
            "id": "3"
        },
        "labels": [
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "1.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=yibocai",
            "name": "yibocai",
            "key": "yibo",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=yibo&avatarId=47542",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=yibo&avatarId=47542",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=yibo&avatarId=47542",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=yibo&avatarId=47542"
            },
            "displayName": "Yibo Cai",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12328935",
                "id": "12328935",
                "name": "C++"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=yibocai",
            "name": "yibocai",
            "key": "yibo",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=yibo&avatarId=47542",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=yibo&avatarId=47542",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=yibo&avatarId=47542",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=yibo&avatarId=47542"
            },
            "displayName": "Yibo Cai",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=yibocai",
            "name": "yibocai",
            "key": "yibo",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=yibo&avatarId=47542",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=yibo&avatarId=47542",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=yibo&avatarId=47542",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=yibo&avatarId=47542"
            },
            "displayName": "Yibo Cai",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "aggregateprogress": {
            "progress": 6000,
            "total": 6000,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 6000,
            "total": 6000,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-9873/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 10,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13324749/worklog/477101",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "cyb70289 opened a new pull request #8091:\nURL: https://github.com/apache/arrow/pull/8091\n\n\n   \u2026 value range\r\n   \r\n   For int16/32/64 arrays with reasonable length, scan the array to find\r\n   min/max values first. If (max-min) is within some threshold, instead\r\n   of general hashmap, using a value indexed array can improve performance\r\n   significantly.\r\n   \r\n   To be compatible with chunked array, value count array is transferred to\r\n   hashmap before merging with others. This is an overhead for short array.\r\n   Finding min/max may also introduce performance penalty in some cases.\r\n   \r\n   Please note it's hard to benefit all use cases. By applying this patch:\r\n   - about 2x performance uplift for integers in small value range\r\n   - no obvious performance drop for normal cases\r\n   - non-trivial performance drop in some cases\r\n     * 40% drop for short int8 array (8k length)\r\n     * 10% drop for sparse array (few distinct values, big value gap)\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-09-01T09:32:37.676+0000",
                    "updated": "2020-09-01T09:32:37.676+0000",
                    "started": "2020-09-01T09:32:37.675+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "477101",
                    "issueId": "13324749"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13324749/worklog/477103",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "cyb70289 commented on pull request #8091:\nURL: https://github.com/apache/arrow/pull/8091#issuecomment-684666816\n\n\n   Tested on skylake (knight landing).\r\n   Removed unrelated tests for clarity.\r\n   100% null benchmark is not stable, can be ignored.\r\n   \r\n   ```\r\n   $ archery benchmark diff --suite-filter=\"arrow-compute-aggregate-benchmark\" --cc=clang-9 --cxx=clang++-9\r\n   \r\n                             benchmark         baseline        contender  change %\r\n   1        ModeKernelInt16/1048576/10  122.148 MiB/sec  364.273 MiB/sec   198.222  {'null_percent': 10.0}\r\n   24    ModeKernelInt32/1048576/10000  227.845 MiB/sec  676.265 MiB/sec   196.809  {'null_percent': 0.01}\r\n   14      ModeKernelInt16/1048576/100  116.265 MiB/sec  342.747 MiB/sec   194.798  {'null_percent': 1.0}\r\n   23      ModeKernelInt32/1048576/100  229.216 MiB/sec  669.534 MiB/sec   192.098  {'null_percent': 1.0}\r\n   17       ModeKernelInt32/1048576/10  241.768 MiB/sec  700.500 MiB/sec   189.740  {'null_percent': 10.0}\r\n   16    ModeKernelInt16/1048576/10000  115.484 MiB/sec  324.841 MiB/sec   181.287  {'null_percent': 0.01}\r\n   8     ModeKernelInt64/1048576/10000  481.374 MiB/sec    1.308 GiB/sec   178.214  {'null_percent': 0.01}\r\n   10      ModeKernelInt64/1048576/100  485.696 MiB/sec    1.313 GiB/sec   176.807  {'null_percent': 1.0}\r\n   20       ModeKernelInt64/1048576/10  527.967 MiB/sec    1.383 GiB/sec   168.292  {'null_percent': 10.0}\r\n   12        ModeKernelInt32/1048576/0  257.092 MiB/sec  687.083 MiB/sec   167.251  {'null_percent': 0.0}\r\n   15        ModeKernelInt16/1048576/0  128.398 MiB/sec  342.670 MiB/sec   166.880  {'null_percent': 0.0}\r\n   11        ModeKernelInt64/1048576/0  513.891 MiB/sec    1.325 GiB/sec   164.088  {'null_percent': 0.0}\r\n   4         ModeKernelInt16/1048576/2  162.258 MiB/sec  384.148 MiB/sec   136.752  {'null_percent': 50.0}\r\n   25        ModeKernelInt32/1048576/2  320.094 MiB/sec  650.958 MiB/sec   103.365  {'null_percent': 50.0}\r\n   2         ModeKernelInt64/1048576/2  811.335 MiB/sec    1.403 GiB/sec    77.111  {'null_percent': 50.0}\r\n   0         ModeKernelInt64/1048576/1    7.906 GiB/sec    7.888 GiB/sec    -0.230  {'null_percent': 100.0}\r\n   9       ModeKernelBoolean/1048576/0   26.502 MiB/sec   26.148 MiB/sec    -1.337  {'null_percent': 0.0}\r\n   19      ModeKernelBoolean/1048576/2   27.081 MiB/sec   26.518 MiB/sec    -2.078  {'null_percent': 50.0}\r\n   18  ModeKernelBoolean/1048576/10000   26.126 MiB/sec   25.361 MiB/sec    -2.927  {'null_percent': 0.01}\r\n   5      ModeKernelBoolean/1048576/10   27.987 MiB/sec   27.111 MiB/sec    -3.131  {'null_percent': 10.0}\r\n   27    ModeKernelBoolean/1048576/100   25.729 MiB/sec   24.911 MiB/sec    -3.181  {'null_percent': 1.0}\r\n   28      ModeKernelBoolean/1048576/1  123.582 MiB/sec  118.548 MiB/sec    -4.074  {'null_percent': 100.0}\r\n   6      ModeKernelInt8/1048576/10000  248.084 MiB/sec  232.688 MiB/sec    -6.206  {'null_percent': 0.01}\r\n   21       ModeKernelInt8/1048576/100  253.614 MiB/sec  230.012 MiB/sec    -9.306  {'null_percent': 1.0}\r\n   26         ModeKernelInt8/1048576/0  270.337 MiB/sec  244.879 MiB/sec    -9.417  {'null_percent': 0.0}\r\n   3         ModeKernelInt8/1048576/10  247.946 MiB/sec  223.306 MiB/sec    -9.938  {'null_percent': 10.0}\r\n   13         ModeKernelInt8/1048576/2  198.628 MiB/sec  178.205 MiB/sec   -10.282  {'null_percent': 50.0}\r\n   29         ModeKernelInt8/1048576/1  948.757 MiB/sec  828.408 MiB/sec   -12.685  {'null_percent': 100.0}\r\n   22        ModeKernelInt16/1048576/1    2.852 GiB/sec    2.265 GiB/sec   -20.587  {'null_percent': 100.0}\r\n   7         ModeKernelInt32/1048576/1    5.714 GiB/sec    3.430 GiB/sec   -39.976  {'null_percent': 100.0}\r\n   ```\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-09-01T09:36:26.740+0000",
                    "updated": "2020-09-01T09:36:26.740+0000",
                    "started": "2020-09-01T09:36:26.740+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "477103",
                    "issueId": "13324749"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13324749/worklog/477109",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "github-actions[bot] commented on pull request #8091:\nURL: https://github.com/apache/arrow/pull/8091#issuecomment-684681790\n\n\n   https://issues.apache.org/jira/browse/ARROW-9873\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-09-01T09:46:42.960+0000",
                    "updated": "2020-09-01T09:46:42.960+0000",
                    "started": "2020-09-01T09:46:42.960+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "477109",
                    "issueId": "13324749"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13324749/worklog/477313",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on a change in pull request #8091:\nURL: https://github.com/apache/arrow/pull/8091#discussion_r481275863\n\n\n\n##########\nFile path: cpp/src/arrow/compute/kernels/aggregate_mode.cc\n##########\n@@ -26,95 +26,187 @@ namespace aggregate {\n \n namespace {\n \n+// Count values and return value:count map\n+template <typename T>\n+struct ValueCounter {\n+  virtual void CountOne(T value) = 0;\n\nReview comment:\n       I don't think polymorphism is a good idea for performance. Instead, you should probably use templated code.\r\n   Also, when `null_count == length`, the implementation can be trivial.\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-09-01T16:25:21.251+0000",
                    "updated": "2020-09-01T16:25:21.251+0000",
                    "started": "2020-09-01T16:25:21.251+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "477313",
                    "issueId": "13324749"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13324749/worklog/477646",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "cyb70289 commented on a change in pull request #8091:\nURL: https://github.com/apache/arrow/pull/8091#discussion_r481789852\n\n\n\n##########\nFile path: cpp/src/arrow/compute/kernels/aggregate_mode.cc\n##########\n@@ -26,95 +26,187 @@ namespace aggregate {\n \n namespace {\n \n+// Count values and return value:count map\n+template <typename T>\n+struct ValueCounter {\n+  virtual void CountOne(T value) = 0;\n\nReview comment:\n       Changed to template. Did get better performance. Thanks.\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-09-02T06:37:03.160+0000",
                    "updated": "2020-09-02T06:37:03.160+0000",
                    "started": "2020-09-02T06:37:03.160+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "477646",
                    "issueId": "13324749"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13324749/worklog/477647",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "cyb70289 removed a comment on pull request #8091:\nURL: https://github.com/apache/arrow/pull/8091#issuecomment-684666816\n\n\n   Tested on skylake (knight landing).\r\n   Removed unrelated tests for clarity.\r\n   100% null benchmark is not stable, can be ignored.\r\n   \r\n   ```\r\n   $ archery benchmark diff --suite-filter=\"arrow-compute-aggregate-benchmark\" --cc=clang-9 --cxx=clang++-9\r\n   \r\n                             benchmark         baseline        contender  change %\r\n   1        ModeKernelInt16/1048576/10  122.148 MiB/sec  364.273 MiB/sec   198.222  {'null_percent': 10.0}\r\n   24    ModeKernelInt32/1048576/10000  227.845 MiB/sec  676.265 MiB/sec   196.809  {'null_percent': 0.01}\r\n   14      ModeKernelInt16/1048576/100  116.265 MiB/sec  342.747 MiB/sec   194.798  {'null_percent': 1.0}\r\n   23      ModeKernelInt32/1048576/100  229.216 MiB/sec  669.534 MiB/sec   192.098  {'null_percent': 1.0}\r\n   17       ModeKernelInt32/1048576/10  241.768 MiB/sec  700.500 MiB/sec   189.740  {'null_percent': 10.0}\r\n   16    ModeKernelInt16/1048576/10000  115.484 MiB/sec  324.841 MiB/sec   181.287  {'null_percent': 0.01}\r\n   8     ModeKernelInt64/1048576/10000  481.374 MiB/sec    1.308 GiB/sec   178.214  {'null_percent': 0.01}\r\n   10      ModeKernelInt64/1048576/100  485.696 MiB/sec    1.313 GiB/sec   176.807  {'null_percent': 1.0}\r\n   20       ModeKernelInt64/1048576/10  527.967 MiB/sec    1.383 GiB/sec   168.292  {'null_percent': 10.0}\r\n   12        ModeKernelInt32/1048576/0  257.092 MiB/sec  687.083 MiB/sec   167.251  {'null_percent': 0.0}\r\n   15        ModeKernelInt16/1048576/0  128.398 MiB/sec  342.670 MiB/sec   166.880  {'null_percent': 0.0}\r\n   11        ModeKernelInt64/1048576/0  513.891 MiB/sec    1.325 GiB/sec   164.088  {'null_percent': 0.0}\r\n   4         ModeKernelInt16/1048576/2  162.258 MiB/sec  384.148 MiB/sec   136.752  {'null_percent': 50.0}\r\n   25        ModeKernelInt32/1048576/2  320.094 MiB/sec  650.958 MiB/sec   103.365  {'null_percent': 50.0}\r\n   2         ModeKernelInt64/1048576/2  811.335 MiB/sec    1.403 GiB/sec    77.111  {'null_percent': 50.0}\r\n   0         ModeKernelInt64/1048576/1    7.906 GiB/sec    7.888 GiB/sec    -0.230  {'null_percent': 100.0}\r\n   9       ModeKernelBoolean/1048576/0   26.502 MiB/sec   26.148 MiB/sec    -1.337  {'null_percent': 0.0}\r\n   19      ModeKernelBoolean/1048576/2   27.081 MiB/sec   26.518 MiB/sec    -2.078  {'null_percent': 50.0}\r\n   18  ModeKernelBoolean/1048576/10000   26.126 MiB/sec   25.361 MiB/sec    -2.927  {'null_percent': 0.01}\r\n   5      ModeKernelBoolean/1048576/10   27.987 MiB/sec   27.111 MiB/sec    -3.131  {'null_percent': 10.0}\r\n   27    ModeKernelBoolean/1048576/100   25.729 MiB/sec   24.911 MiB/sec    -3.181  {'null_percent': 1.0}\r\n   28      ModeKernelBoolean/1048576/1  123.582 MiB/sec  118.548 MiB/sec    -4.074  {'null_percent': 100.0}\r\n   6      ModeKernelInt8/1048576/10000  248.084 MiB/sec  232.688 MiB/sec    -6.206  {'null_percent': 0.01}\r\n   21       ModeKernelInt8/1048576/100  253.614 MiB/sec  230.012 MiB/sec    -9.306  {'null_percent': 1.0}\r\n   26         ModeKernelInt8/1048576/0  270.337 MiB/sec  244.879 MiB/sec    -9.417  {'null_percent': 0.0}\r\n   3         ModeKernelInt8/1048576/10  247.946 MiB/sec  223.306 MiB/sec    -9.938  {'null_percent': 10.0}\r\n   13         ModeKernelInt8/1048576/2  198.628 MiB/sec  178.205 MiB/sec   -10.282  {'null_percent': 50.0}\r\n   29         ModeKernelInt8/1048576/1  948.757 MiB/sec  828.408 MiB/sec   -12.685  {'null_percent': 100.0}\r\n   22        ModeKernelInt16/1048576/1    2.852 GiB/sec    2.265 GiB/sec   -20.587  {'null_percent': 100.0}\r\n   7         ModeKernelInt32/1048576/1    5.714 GiB/sec    3.430 GiB/sec   -39.976  {'null_percent': 100.0}\r\n   ```\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-09-02T06:37:06.438+0000",
                    "updated": "2020-09-02T06:37:06.438+0000",
                    "started": "2020-09-02T06:37:06.437+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "477647",
                    "issueId": "13324749"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13324749/worklog/477651",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "cyb70289 commented on pull request #8091:\nURL: https://github.com/apache/arrow/pull/8091#issuecomment-685348952\n\n\n   Latest benchmark result after re-implementation.\r\n   \r\n   ```\r\n   # Tested on skylake (knight landing)\r\n   $ archery benchmark diff --suite-filter=\"arrow-compute-aggregate-benchmark\" --benchmark-filter=\"^Mode\" --cc=clang-9 --cxx=clang++-9\r\n   \r\n                         benchmark         baseline        contender    change %\r\n   // igonre these 100% cases, huge boost due to a simple trick, not very useful\r\n       ModeKernelBoolean/1048576/1  123.216 MiB/sec  847.125 GiB/sec  703915.356 null_percent': 100.0\r\n          ModeKernelInt8/1048576/1  896.330 MiB/sec  617.997 GiB/sec   70502.192 null_percent': 100.0\r\n         ModeKernelInt16/1048576/1    2.886 GiB/sec  965.237 GiB/sec   33340.541 null_percent': 100.0\r\n         ModeKernelInt32/1048576/1    5.732 GiB/sec  960.476 GiB/sec   16657.027 null_percent': 100.0\r\n         ModeKernelInt64/1048576/1    7.925 GiB/sec  974.705 GiB/sec   12198.487 null_percent': 100.0\r\n   \r\n   // big improvement for int16/32/64 with limited value range \r\n         ModeKernelInt16/1048576/0  128.522 MiB/sec  495.771 MiB/sec     285.749  'null_percent': 0.0\r\n         ModeKernelInt32/1048576/0  257.694 MiB/sec  953.232 MiB/sec     269.909  'null_percent': 0.0\r\n         ModeKernelInt64/1048576/0  516.624 MiB/sec    1.715 GiB/sec     240.027  'null_percent': 0.0\r\n     ModeKernelInt32/1048576/10000  227.404 MiB/sec  690.032 MiB/sec     203.439 'null_percent': 0.01\r\n     ModeKernelInt16/1048576/10000  115.419 MiB/sec  349.055 MiB/sec     202.425 'null_percent': 0.01\r\n       ModeKernelInt32/1048576/100  229.661 MiB/sec  684.149 MiB/sec     197.895  'null_percent': 1.0\r\n       ModeKernelInt16/1048576/100  116.084 MiB/sec  342.620 MiB/sec     195.148  'null_percent': 1.0\r\n     ModeKernelInt64/1048576/10000  481.409 MiB/sec    1.302 GiB/sec     176.913 'null_percent': 0.01\r\n       ModeKernelInt64/1048576/100  486.266 MiB/sec    1.297 GiB/sec     173.114  'null_percent': 1.0\r\n        ModeKernelInt16/1048576/10  121.865 MiB/sec  315.932 MiB/sec     159.247 'null_percent': 10.0\r\n        ModeKernelInt32/1048576/10  242.074 MiB/sec  625.162 MiB/sec     158.252 'null_percent': 10.0\r\n        ModeKernelInt64/1048576/10  527.976 MiB/sec    1.199 GiB/sec     132.580 'null_percent': 10.0\r\n         ModeKernelInt32/1048576/2  320.156 MiB/sec  429.196 MiB/sec      34.058 'null_percent': 50.0\r\n         ModeKernelInt16/1048576/2  162.121 MiB/sec  196.310 MiB/sec      21.089 'null_percent': 50.0\r\n   \r\n   // no obvious difference for bool/int8\r\n        ModeKernelInt8/1048576/100  234.422 MiB/sec  251.464 MiB/sec       7.270  'null_percent': 1.0\r\n         ModeKernelInt8/1048576/10  246.324 MiB/sec  258.110 MiB/sec       4.785 'null_percent': 10.0\r\n      ModeKernelInt8/1048576/10000  239.496 MiB/sec  250.469 MiB/sec       4.582 'null_percent': 0.01\r\n         ModeKernelInt64/1048576/2  812.020 MiB/sec  832.610 MiB/sec       2.536 'null_percent': 50.0\r\n   ModeKernelBoolean/1048576/10000   26.318 MiB/sec   26.509 MiB/sec       0.728 'null_percent': 0.01\r\n     ModeKernelBoolean/1048576/100   26.510 MiB/sec   26.597 MiB/sec       0.327  'null_percent': 1.0\r\n       ModeKernelBoolean/1048576/0   28.271 MiB/sec   28.274 MiB/sec       0.009  'null_percent': 0.0\r\n          ModeKernelInt8/1048576/0  270.401 MiB/sec  269.025 MiB/sec      -0.509  'null_percent': 0.0\r\n          ModeKernelInt8/1048576/2  190.410 MiB/sec  187.876 MiB/sec      -1.331 'null_percent': 50.0\r\n      ModeKernelBoolean/1048576/10   28.007 MiB/sec   27.599 MiB/sec      -1.455 'null_percent': 10.0\r\n       ModeKernelBoolean/1048576/2   27.157 MiB/sec   24.209 MiB/sec     -10.857 'null_percent': 50.0\r\n   ```\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-09-02T06:38:39.568+0000",
                    "updated": "2020-09-02T06:38:39.568+0000",
                    "started": "2020-09-02T06:38:39.568+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "477651",
                    "issueId": "13324749"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13324749/worklog/477719",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "cyb70289 commented on pull request #8091:\nURL: https://github.com/apache/arrow/pull/8091#issuecomment-685472515\n\n\n   \"RTools 35\" CI failure is not related\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-09-02T09:15:07.517+0000",
                    "updated": "2020-09-02T09:15:07.517+0000",
                    "started": "2020-09-02T09:15:07.517+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "477719",
                    "issueId": "13324749"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13324749/worklog/477747",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on pull request #8091:\nURL: https://github.com/apache/arrow/pull/8091#issuecomment-685539220\n\n\n   I get similar speedups on AMD Ryzen.\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-09-02T10:01:53.223+0000",
                    "updated": "2020-09-02T10:01:53.223+0000",
                    "started": "2020-09-02T10:01:53.222+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "477747",
                    "issueId": "13324749"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13324749/worklog/478018",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou closed pull request #8091:\nURL: https://github.com/apache/arrow/pull/8091\n\n\n   \n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-09-02T18:01:22.139+0000",
                    "updated": "2020-09-02T18:01:22.139+0000",
                    "started": "2020-09-02T18:01:22.139+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "478018",
                    "issueId": "13324749"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
            "id": "4",
            "description": "An improvement or enhancement to an existing feature or task.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
            "name": "Improvement",
            "subtask": false,
            "avatarId": 21140
        },
        "timespent": 6000,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@59f7aba6[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@5946e8c[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@205e68c3[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@618824a[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@38af6f8f[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@7e7242c7[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@2db935ba[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@6ff1e895[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@2c6121f3[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@40693ac2[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@2499c390[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@44cc22d6[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 6000,
        "customfield_12312520": null,
        "customfield_12312521": "Wed Sep 02 18:01:08 UTC 2020",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2020-09-02T18:01:08.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-9873/watchers",
            "watchCount": 3,
            "isWatching": false
        },
        "created": "2020-08-27T03:32:03.000+0000",
        "updated": "2020-09-02T18:01:23.000+0000",
        "timeoriginalestimate": null,
        "description": "It's possible to improve mode kernel performance for integers within limited value range by using a value indexed array instead of general hash table.\r\n Similar trick is used in sorting kernel ARROW-1571.",
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "1h 40m",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 6000
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/attachment/13010594",
                "id": "13010594",
                "filename": "mode-range-skylake.png",
                "author": {
                    "self": "https://issues.apache.org/jira/rest/api/2/user?username=yibocai",
                    "name": "yibocai",
                    "key": "yibo",
                    "avatarUrls": {
                        "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=yibo&avatarId=47542",
                        "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=yibo&avatarId=47542",
                        "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=yibo&avatarId=47542",
                        "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=yibo&avatarId=47542"
                    },
                    "displayName": "Yibo Cai",
                    "active": true,
                    "timeZone": "Etc/UTC"
                },
                "created": "2020-08-27T04:44:41.358+0000",
                "size": 148945,
                "mimeType": "image/png",
                "content": "https://issues.apache.org/jira/secure/attachment/13010594/mode-range-skylake.png"
            }
        ],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[C++][Compute] Improve mode kernel for intergers within limited value range",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13324749/comment/17185599",
                    "id": "17185599",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=yibocai",
                        "name": "yibocai",
                        "key": "yibo",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=yibo&avatarId=47542",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=yibo&avatarId=47542",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=yibo&avatarId=47542",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=yibo&avatarId=47542"
                        },
                        "displayName": "Yibo Cai",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "Did some benchmarks on skylake, i7 and arm64 cpu with similar result: we can get big performance improvement with this approach. *A possible threshold is for arrays with at least 1024 elements, and with value range smaller than 16384.*\r\n\r\nBelow graph is tested on skylake. Y axis plots speed comparison of this counting method .vs. hash table, above 1 means better. X axis is array size. Difference lines means different value range. See [test code|https://github.com/cyb70289/mytests/blob/master/cpp/mode-range.cc] for details.\r\n\r\n !mode-range-skylake.png! ",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=yibocai",
                        "name": "yibocai",
                        "key": "yibo",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=yibo&avatarId=47542",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=yibo&avatarId=47542",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=yibo&avatarId=47542",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=yibo&avatarId=47542"
                        },
                        "displayName": "Yibo Cai",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2020-08-27T04:45:29.425+0000",
                    "updated": "2020-08-27T04:45:29.425+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13324749/comment/17185601",
                    "id": "17185601",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=yibocai",
                        "name": "yibocai",
                        "key": "yibo",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=yibo&avatarId=47542",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=yibo&avatarId=47542",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=yibo&avatarId=47542",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=yibo&avatarId=47542"
                        },
                        "displayName": "Yibo Cai",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "*NOTE: this approach will cause performance regression in certain conditions.*\r\nWe need to find min/max values before deciding if we can use this counting method. If we finally find (max-min) is too large, that step is wasted and causes performance drop. This drop is trivial normally.\r\nBut it can be big in certain conditions: there are few distinct values, but sparsely distributed(max-min is big). In this condition, hash table will be very fast, so the penalty of finding min/max is non-trivial. Above 10% performance drop is observed per my test, see [test code|https://github.com/cyb70289/mytests/blob/master/cpp/minmax-penalty.cc].",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=yibocai",
                        "name": "yibocai",
                        "key": "yibo",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=yibo&avatarId=47542",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=yibo&avatarId=47542",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=yibo&avatarId=47542",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=yibo&avatarId=47542"
                        },
                        "displayName": "Yibo Cai",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2020-08-27T04:57:35.895+0000",
                    "updated": "2020-08-27T04:57:35.895+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13324749/comment/17185744",
                    "id": "17185744",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "body": "> A possible threshold is for arrays with at least 1024 elements, and with value range smaller than 16384.\r\n\r\nThat sounds ok to me.",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "created": "2020-08-27T09:32:56.464+0000",
                    "updated": "2020-08-27T09:32:56.464+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13324749/comment/17185760",
                    "id": "17185760",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=yibocai",
                        "name": "yibocai",
                        "key": "yibo",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=yibo&avatarId=47542",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=yibo&avatarId=47542",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=yibo&avatarId=47542",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=yibo&avatarId=47542"
                        },
                        "displayName": "Yibo Cai",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "Hi [~apitrou], aggregation kernel should implement MergeFrom operation, kind of confused what it does.\r\n\r\n[Consume|https://github.com/apache/arrow/blob/7ce498e3db6bd755cf2fd5a1b532a0d7276496de/cpp/src/arrow/compute/kernels/aggregate_mode.cc#L117-L135] can creates map or counting based \"state\" object per (max - min).\r\n[MergeFrom|https://github.com/apache/arrow/blob/7ce498e3db6bd755cf2fd5a1b532a0d7276496de/cpp/src/arrow/compute/kernels/aggregate_mode.cc#L137-L140] merges this \"state\" with another \"state\", so they must be the same type.\r\n\r\nI'm not sure if below situation will happen:\r\n- In Consume, int32, max-min is small, so we created counting based \"state\"\r\n- In MergeFrom, int32, the input \"state\" is map based, so they cannot merge",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=yibocai",
                        "name": "yibocai",
                        "key": "yibo",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=yibo&avatarId=47542",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=yibo&avatarId=47542",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=yibo&avatarId=47542",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=yibo&avatarId=47542"
                        },
                        "displayName": "Yibo Cai",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2020-08-27T10:16:28.484+0000",
                    "updated": "2020-08-27T10:16:28.484+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13324749/comment/17185923",
                    "id": "17185923",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "body": "If the input is a ChunkedArray (not sure that's possible now), you could have a chunk with a small range and another chunk with a large range.",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "created": "2020-08-27T15:35:10.566+0000",
                    "updated": "2020-08-27T15:35:10.566+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13324749/comment/17186213",
                    "id": "17186213",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=yibocai",
                        "name": "yibocai",
                        "key": "yibo",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=yibo&avatarId=47542",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=yibo&avatarId=47542",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=yibo&avatarId=47542",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=yibo&avatarId=47542"
                        },
                        "displayName": "Yibo Cai",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "Maybe we can use counting method as first step, then scan the counter array and insert into a map finally. Guess there won't cause much performance loss as the map is small, and we can reserve buckets first. Will do some tests.\r\n\r\nTest result with current arrow benchmark (values within -100~100, array size 1M in bytes):\r\n- Small performance drop (< 10%) for Boolean and Int8.\r\n- About 2x performance improvement for Int16/32/64 with limited value range.\r\n\r\nAdjusting value range and array size leads to consistent performance uplift.",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=yibocai",
                        "name": "yibocai",
                        "key": "yibo",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=yibo&avatarId=47542",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=yibo&avatarId=47542",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=yibo&avatarId=47542",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=yibo&avatarId=47542"
                        },
                        "displayName": "Yibo Cai",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2020-08-28T02:25:51.320+0000",
                    "updated": "2020-09-01T05:10:48.739+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13324749/comment/17188142",
                    "id": "17188142",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=yibocai",
                        "name": "yibocai",
                        "key": "yibo",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=yibo&avatarId=47542",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=yibo&avatarId=47542",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=yibo&avatarId=47542",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=yibo&avatarId=47542"
                        },
                        "displayName": "Yibo Cai",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "Array size in bytes looks a more reasonable crossover point than array size in items. Tested with int32/int64, int32 needs more items than int64 to benefit from this optimization.\r\nSo the threshold is:\r\n- array size in bytes >= 8192\r\n- array value range <= 16384",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=yibocai",
                        "name": "yibocai",
                        "key": "yibo",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=yibo&avatarId=47542",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=yibo&avatarId=47542",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=yibo&avatarId=47542",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=yibo&avatarId=47542"
                        },
                        "displayName": "Yibo Cai",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2020-09-01T05:10:01.269+0000",
                    "updated": "2020-09-01T05:10:01.269+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13324749/comment/17189606",
                    "id": "17189606",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "body": "Issue resolved by pull request 8091\n[https://github.com/apache/arrow/pull/8091]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "created": "2020-09-02T18:01:08.394+0000",
                    "updated": "2020-09-02T18:01:08.394+0000"
                }
            ],
            "maxResults": 8,
            "total": 8,
            "startAt": 0
        },
        "customfield_12311820": "0|z0i4co:",
        "customfield_12314139": null
    }
}