{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13424814",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13424814",
    "key": "ARROW-15459",
    "fields": {
        "fixVersions": [],
        "resolution": null,
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": "2022-09-28T17:57:31.116+0000",
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "name": "Major",
            "id": "3"
        },
        "labels": [
            "osx-arm64"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "1.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": null,
        "customfield_12312330": null,
        "versions": [],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [],
        "customfield_12313825": null,
        "assignee": null,
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/4",
            "description": "This issue was once resolved, but the resolution was deemed incorrect. From here issues are either marked assigned or resolved.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/reopened.png",
            "name": "Reopened",
            "id": "4",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2",
                "id": 2,
                "key": "new",
                "colorName": "blue-gray",
                "name": "To Do"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12328935",
                "id": "12328935",
                "name": "C++"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": null,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=elena%40ursacomputing.com",
            "name": "elena@ursacomputing.com",
            "key": "elena@ursacomputing.com",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
            },
            "displayName": "Elena Henderson",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=elena%40ursacomputing.com",
            "name": "elena@ursacomputing.com",
            "key": "elena@ursacomputing.com",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
            },
            "displayName": "Elena Henderson",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "aggregateprogress": {
            "progress": 0,
            "total": 0
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 0,
            "total": 0
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-15459/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 0,
            "worklogs": []
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
            "id": "1",
            "description": "A problem which impairs or prevents the functions of the product.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
            "name": "Bug",
            "subtask": false,
            "avatarId": 21133
        },
        "timespent": null,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@33843479[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@2251530[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@758d6845[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@5f2b6f51[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@65fb6926[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@47983339[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@59c9b4cf[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@5d1c1940[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@6390f99c[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@65170f2c[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@71ecb08d[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@4c8771e9[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": null,
        "customfield_12312520": null,
        "customfield_12312521": "Tue Sep 27 16:50:23 UTC 2022",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": null,
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-15459/watchers",
            "watchCount": 7,
            "isWatching": true
        },
        "created": "2022-01-26T03:02:32.000+0000",
        "updated": "2022-09-27T16:50:23.000+0000",
        "timeoriginalestimate": null,
        "description": "Steps to reproduce this issue on osx arm64:\r\n{code:bash}\r\ngit clone https://github.com/apache/arrow.git\r\n\r\ncd arrow/cpp\r\nbrew update && brew install node && brew bundle --file=Brewfile\r\n\r\ncd ..\r\nmamba create -y -n arrow-commit -c conda-forge \\\r\n  --file ci/conda_env_unix.txt \\\r\n  --file ci/conda_env_cpp.txt \\\r\n  --file ci/conda_env_python.txt \\\r\n  compilers \\\r\n  python=3.8 \\\r\n  pandas \\\r\n  aws-sdk-cpp \\\r\n  r\r\n\r\nmamba activate arrow-commit\r\npip install -r python/requirements-build.txt -r python/requirements-test.txt\r\n\r\nexport ARROW_BUILD_TESTS=OFF\r\nexport ARROW_BUILD_TYPE=release\r\nexport ARROW_DEPENDENCY_SOURCE=AUTO\r\nexport ARROW_DATASET=ON\r\nexport ARROW_DEFAULT_MEMORY_POOL=mimalloc\r\nexport ARROW_ENABLE_UNSAFE_MEMORY_ACCESS=true\r\nexport ARROW_ENABLE_NULL_CHECK_FOR_GET=false\r\nexport ARROW_FLIGHT=OFF\r\nexport ARROW_GANDIVA=OFF\r\nexport ARROW_HDFS=ON\r\nexport ARROW_HOME=$CONDA_PREFIX\r\nexport ARROW_INSTALL_NAME_RPATH=OFF\r\nexport ARROW_MIMALLOC=ON\r\nexport ARROW_NO_DEPRECATED_API=ON\r\nexport ARROW_ORC=ON\r\nexport ARROW_PARQUET=ON\r\nexport ARROW_PLASMA=ON\r\nexport ARROW_PYTHON=ON\r\nexport ARROW_S3=ON\r\nexport ARROW_USE_ASAN=OFF\r\nexport ARROW_USE_CCACHE=ON\r\nexport ARROW_USE_UBSAN=OFF\r\nexport ARROW_WITH_BROTLI=ON\r\nexport ARROW_WITH_BZ2=ON\r\nexport ARROW_WITH_LZ4=ON\r\nexport ARROW_WITH_SNAPPY=ON\r\nexport ARROW_WITH_ZLIB=ON\r\nexport ARROW_WITH_ZSTD=ON\r\nexport GTest_SOURCE=BUNDLED\r\nexport ORC_SOURCE=BUNDLED\r\nexport PARQUET_BUILD_EXAMPLES=ON\r\nexport PARQUET_BUILD_EXECUTABLES=ON\r\nexport PYTHON=python\r\nexport LD_LIBRARY_PATH=$CONDA_PREFIX/lib:$LD_LIBRARY_PATH\r\n\r\nci/scripts/cpp_build.sh $(pwd) $(pwd) \r\n\r\n\r\n{code}\r\n\u00a0\r\n\r\nError (full logs are attached):\r\n{code:java}\r\n...\r\nchecking size of void *... 8\r\nchecking size of int... 4\r\nchecking size of long... 8\r\nchecking size of long long... 8\r\nchecking size of intmax_t... 8\r\nchecking build system type... \r\n-- stderr output is:\r\nInvalid configuration `arm64-apple-darwin20.0.0': machine `arm64-apple' not recognized\r\nconfigure: error: /bin/sh build-aux/config.sub arm64-apple-darwin20.0.0 failed\r\n\r\n\r\nCMake Error at /Users/voltrondata/arrow/cpp/jemalloc_ep-prefix/src/jemalloc_ep-stamp/jemalloc_ep-configure-RELEASE.cmake:47 (message):\r\n\u00a0 Stopping after outputting logs.\r\n\r\n\r\n\r\n\r\n[31/380] Performing configure step for 'orc_ep'\r\nninja: build stopped: subcommand failed. {code}\r\n\u00a0\r\n\r\n\u00a0",
        "customfield_10010": null,
        "timetracking": {},
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/attachment/13039350",
                "id": "13039350",
                "filename": "logs",
                "author": {
                    "self": "https://issues.apache.org/jira/rest/api/2/user?username=elena%40ursacomputing.com",
                    "name": "elena@ursacomputing.com",
                    "key": "elena@ursacomputing.com",
                    "avatarUrls": {
                        "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                        "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                        "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                        "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                    },
                    "displayName": "Elena Henderson",
                    "active": true,
                    "timeZone": "Etc/UTC"
                },
                "created": "2022-01-26T03:00:03.121+0000",
                "size": 90734,
                "mimeType": "text/html",
                "content": "https://issues.apache.org/jira/secure/attachment/13039350/logs"
            }
        ],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[C++] Unable to build Arrow C++ on osx arm64 inside conda env because of Invalid configuration `arm64-apple-darwin20.0.0': machine `arm64-apple' not recognized and arrow/cpp/arm64-apple-darwin20.0.0-ar: No such file or directory",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13424814/comment/17482201",
                    "id": "17482201",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=elena%40ursacomputing.com",
                        "name": "elena@ursacomputing.com",
                        "key": "elena@ursacomputing.com",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Elena Henderson",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "Hello [~uwe] ,\r\n\r\nIs this something you know a workaround for?\r\n\r\nI can see that you ran into a similar issue in your blog post [https://uwekorn.com/2021/01/11/apache-arrow-on-the-apple-m1.html]\r\nand I can see that you fixed it on jemalloc side [https://github.com/jemalloc/jemalloc/pull/2012|https://github.com/jemalloc/jemalloc/pull/2012/files]\r\nbut when I build arrow C++, it is still using jemalloc from 2016 release.\r\n{code:java}\r\n$ cat cpp/jemalloc_ep-prefix/src/jemalloc_ep/build-aux/config.guess| grep Copyright\r\n# \u00a0 Copyright 1992-2016 Free Software Foundation, Inc.\r\nCopyright 1992-2016 Free Software Foundation, Inc.\r\n{code}\r\nIs there something I need to do in order to use latest jemalloc?\r\n\r\n\u00a0\r\n\r\nThanks a lot!\r\n\r\n\u00a0\r\n\r\ncc [~npr] [~apitrou] [~jonkeane]\r\n\r\n\u00a0\r\n\r\n\u00a0\r\n\r\n\u00a0",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=elena%40ursacomputing.com",
                        "name": "elena@ursacomputing.com",
                        "key": "elena@ursacomputing.com",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Elena Henderson",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2022-01-26T03:11:38.431+0000",
                    "updated": "2022-01-26T03:12:24.669+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13424814/comment/17482368",
                    "id": "17482368",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=rokm",
                        "name": "rokm",
                        "key": "rokm",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34044",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34044",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34044",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34044"
                        },
                        "displayName": "Rok Mihevc",
                        "active": true,
                        "timeZone": "Europe/Amsterdam"
                    },
                    "body": "Try disabling jemalloc if you're on rosetta ( arch in terminal returns i386 if you are).\r\n\r\nI also found brew python instead easier to setup than conda.",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=rokm",
                        "name": "rokm",
                        "key": "rokm",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34044",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34044",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34044",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34044"
                        },
                        "displayName": "Rok Mihevc",
                        "active": true,
                        "timeZone": "Europe/Amsterdam"
                    },
                    "created": "2022-01-26T10:01:35.586+0000",
                    "updated": "2022-01-26T10:01:35.586+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13424814/comment/17482819",
                    "id": "17482819",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=elena%40ursacomputing.com",
                        "name": "elena@ursacomputing.com",
                        "key": "elena@ursacomputing.com",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Elena Henderson",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "Is it some kind of compiler issues?\r\n\r\n\u00a0\r\n\r\nI am getting `Linking C static library ../bin/sh: /Users/voltrondata/arrow/cpp/arm64-apple-darwin20.0.0-ar: No such file or directory` errors.\u00a0\r\n\r\nWhen I disable jemalloc, I get this error for mimalloc:\r\n{code:java}\r\n$ export ARROW_JEMALLOC=OFF\r\n$ ci/scripts/cpp_build.sh $(pwd) $(pwd)\r\n\r\n...\r\n[15/15] Linking C static library libmimalloc.a\r\nFAILED: libmimalloc.a\u00a0\r\n: && /Users/voltrondata/miniconda3/envs/arrow-commit/bin/cmake -E rm -f libmimalloc.a && /Users/voltrondata/arrow/cpp/arm64-apple-darwin20.0.0-ar qc libmimalloc.a \u00a0CMakeFiles/mimalloc-static.dir/src/stats.c.o CMakeFiles/mimalloc-static.dir/src/random.c.o CMakeFiles/mimalloc-static.dir/src/os.c.o CMakeFiles/mimalloc-static.dir/src/bitmap.c.o CMakeFiles/mimalloc-static.dir/src/arena.c.o CMakeFiles/mimalloc-static.dir/src/region.c.o CMakeFiles/mimalloc-static.dir/src/segment.c.o CMakeFiles/mimalloc-static.dir/src/page.c.o CMakeFiles/mimalloc-static.dir/src/alloc.c.o CMakeFiles/mimalloc-static.dir/src/alloc-aligned.c.o CMakeFiles/mimalloc-static.dir/src/alloc-posix.c.o CMakeFiles/mimalloc-static.dir/src/heap.c.o CMakeFiles/mimalloc-static.dir/src/options.c.o CMakeFiles/mimalloc-static.dir/src/init.c.o && /Users/voltrondata/arrow/cpp/arm64-apple-darwin20.0.0-ranlib libmimalloc.a && /Users/voltrondata/miniconda3/envs/arrow-commit/bin/cmake -E touch libmimalloc.a && :\r\n/bin/sh: /Users/voltrondata/arrow/cpp/arm64-apple-darwin20.0.0-ar: No such file or directory\r\nninja: build stopped: subcommand failed.{code}\r\nWhen I disable mimalloc, I get this error for orc:\r\n{code:java}\r\n$ export ARROW_MIMALLOC=OFF\r\n$ ci/scripts/cpp_build.sh $(pwd) $(pwd)\r\n\r\n...\r\n[1/1] Linking C static library libmimalloc.a\r\n[40/40] Linking CXX static library c++/src/liborc.a\r\nFAILED: c++/src/liborc.a\u00a0\r\n: && /Users/voltrondata/miniconda3/envs/arrow-commit/bin/cmake -E rm -f c++/src/liborc.a && /Users/voltrondata/arrow/cpp/arm64-apple-darwin20.0.0-ar qc c++/src/liborc.a \u00a0c++/src/CMakeFiles/orc.dir/io/InputStream.cc.o c++/src/CMakeFiles/orc.dir/io/OutputStream.cc.o c++/src/CMakeFiles/orc.dir/sargs/ExpressionTree.cc.o c++/src/CMakeFiles/orc.dir/sargs/Literal.cc.o c++/src/CMakeFiles/orc.dir/sargs/PredicateLeaf.cc.o c++/src/CMakeFiles/orc.dir/sargs/SargsApplier.cc.o c++/src/CMakeFiles/orc.dir/sargs/SearchArgument.cc.o c++/src/CMakeFiles/orc.dir/sargs/TruthValue.cc.o c++/src/CMakeFiles/orc.dir/wrap/orc-proto-wrapper.cc.o c++/src/CMakeFiles/orc.dir/Adaptor.cc.o c++/src/CMakeFiles/orc.dir/BloomFilter.cc.o c++/src/CMakeFiles/orc.dir/ByteRLE.cc.o c++/src/CMakeFiles/orc.dir/ColumnPrinter.cc.o c++/src/CMakeFiles/orc.dir/ColumnReader.cc.o c++/src/CMakeFiles/orc.dir/ColumnWriter.cc.o c++/src/CMakeFiles/orc.dir/Common.cc.o c++/src/CMakeFiles/orc.dir/Compression.cc.o c++/src/CMakeFiles/orc.dir/Exceptions.cc.o c++/src/CMakeFiles/orc.dir/Int128.cc.o c++/src/CMakeFiles/orc.dir/LzoDecompressor.cc.o c++/src/CMakeFiles/orc.dir/MemoryPool.cc.o c++/src/CMakeFiles/orc.dir/Murmur3.cc.o c++/src/CMakeFiles/orc.dir/OrcFile.cc.o c++/src/CMakeFiles/orc.dir/Reader.cc.o c++/src/CMakeFiles/orc.dir/RLEv1.cc.o c++/src/CMakeFiles/orc.dir/RLEV2Util.cc.o c++/src/CMakeFiles/orc.dir/RleDecoderV2.cc.o c++/src/CMakeFiles/orc.dir/RleEncoderV2.cc.o c++/src/CMakeFiles/orc.dir/RLE.cc.o c++/src/CMakeFiles/orc.dir/Statistics.cc.o c++/src/CMakeFiles/orc.dir/StripeStream.cc.o c++/src/CMakeFiles/orc.dir/Timezone.cc.o c++/src/CMakeFiles/orc.dir/TypeImpl.cc.o c++/src/CMakeFiles/orc.dir/Vector.cc.o c++/src/CMakeFiles/orc.dir/Writer.cc.o && /Users/voltrondata/arrow/cpp/arm64-apple-darwin20.0.0-ranlib c++/src/liborc.a && /Users/voltrondata/miniconda3/envs/arrow-commit/bin/cmake -E touch c++/src/liborc.a && :\r\n/bin/sh: /Users/voltrondata/arrow/cpp/arm64-apple-darwin20.0.0-ar: No such file or directory\r\nninja: build stopped: subcommand failed.\r\n... {code}\r\nWhen I disable orc, I get similar error for arrow_python\r\n\r\n\u00a0\r\n{code:java}\r\n$ export ARROW_ORC=OFF\r\n$ ci/scripts/cpp_build.sh $(pwd) $(pwd)\r\n\r\n...\r\n[271/343] Linking CXX static library build/release/libarrow_python.a\r\nFAILED: build/release/libarrow_python.a\u00a0\r\n: && /Users/voltrondata/miniconda3/envs/arrow-commit/bin/ccache /Users/voltrondata/miniconda3/envs/arrow-commit/bin/cmake -E rm -f build/release/libarrow_python.a && /Users/voltrondata/miniconda3/envs/arrow-commit/bin/ccache /Users/voltrondata/arrow/cpp/arm64-apple-darwin20.0.0-ar qc build/release/libarrow_python.a \u00a0src/arrow/python/CMakeFiles/arrow_python_objlib.dir/arrow_to_pandas.cc.o src/arrow/python/CMakeFiles/arrow_python_objlib.dir/benchmark.cc.o src/arrow/python/CMakeFiles/arrow_python_objlib.dir/common.cc.o src/arrow/python/CMakeFiles/arrow_python_objlib.dir/datetime.cc.o src/arrow/python/CMakeFiles/arrow_python_objlib.dir/decimal.cc.o src/arrow/python/CMakeFiles/arrow_python_objlib.dir/deserialize.cc.o src/arrow/python/CMakeFiles/arrow_python_objlib.dir/extension_type.cc.o src/arrow/python/CMakeFiles/arrow_python_objlib.dir/gdb.cc.o src/arrow/python/CMakeFiles/arrow_python_objlib.dir/helpers.cc.o src/arrow/python/CMakeFiles/arrow_python_objlib.dir/inference.cc.o src/arrow/python/CMakeFiles/arrow_python_objlib.dir/init.cc.o src/arrow/python/CMakeFiles/arrow_python_objlib.dir/io.cc.o src/arrow/python/CMakeFiles/arrow_python_objlib.dir/ipc.cc.o src/arrow/python/CMakeFiles/arrow_python_objlib.dir/numpy_convert.cc.o src/arrow/python/CMakeFiles/arrow_python_objlib.dir/numpy_to_arrow.cc.o src/arrow/python/CMakeFiles/arrow_python_objlib.dir/python_to_arrow.cc.o src/arrow/python/CMakeFiles/arrow_python_objlib.dir/pyarrow.cc.o src/arrow/python/CMakeFiles/arrow_python_objlib.dir/serialize.cc.o src/arrow/python/CMakeFiles/arrow_python_objlib.dir/csv.cc.o src/arrow/python/CMakeFiles/arrow_python_objlib.dir/filesystem.cc.o && /Users/voltrondata/miniconda3/envs/arrow-commit/bin/ccache /Users/voltrondata/arrow/cpp/arm64-apple-darwin20.0.0-ranlib build/release/libarrow_python.a && /Users/voltrondata/miniconda3/envs/arrow-commit/bin/ccache /Users/voltrondata/miniconda3/envs/arrow-commit/bin/cmake -E touch build/release/libarrow_python.a && :\r\nccache: error: execute_noreturn of /Users/voltrondata/arrow/cpp/arm64-apple-darwin20.0.0-ar failed: No such file or directory\r\n[279/343] Building CXX object src/arrow/CMakeFiles/arrow_objlib.dir/compute/kernels/vector_sort.cc.o\r\nninja: build stopped: subcommand failed {code}\r\n\u00a0",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=elena%40ursacomputing.com",
                        "name": "elena@ursacomputing.com",
                        "key": "elena@ursacomputing.com",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Elena Henderson",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2022-01-27T00:54:00.272+0000",
                    "updated": "2022-01-27T00:54:51.089+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13424814/comment/17483018",
                    "id": "17483018",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=rokm",
                        "name": "rokm",
                        "key": "rokm",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34044",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34044",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34044",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34044"
                        },
                        "displayName": "Rok Mihevc",
                        "active": true,
                        "timeZone": "Europe/Amsterdam"
                    },
                    "body": "Yeah this looks familiar. Try using homebrew instead of miniconda for your environment setup and compilers: https://arrow.apache.org/docs/developers/python.html#using-pip.",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=rokm",
                        "name": "rokm",
                        "key": "rokm",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34044",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34044",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34044",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34044"
                        },
                        "displayName": "Rok Mihevc",
                        "active": true,
                        "timeZone": "Europe/Amsterdam"
                    },
                    "created": "2022-01-27T09:53:23.541+0000",
                    "updated": "2022-01-27T09:53:23.541+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13424814/comment/17483945",
                    "id": "17483945",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=elena%40ursacomputing.com",
                        "name": "elena@ursacomputing.com",
                        "key": "elena@ursacomputing.com",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Elena Henderson",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "Thanks a lot [~rokm] .\r\n\r\n\u00a0\r\n\r\nI am able to build Arrow C++ and Arrow Python without *conda* and also using {*}virtualenv{*}.\r\n\r\n\u00a0\r\n\r\nI really need to build Arrow in conda env though. Please let me know if there is something I can do to make this work.",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=elena%40ursacomputing.com",
                        "name": "elena@ursacomputing.com",
                        "key": "elena@ursacomputing.com",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Elena Henderson",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2022-01-28T19:53:30.880+0000",
                    "updated": "2022-01-28T19:53:30.880+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13424814/comment/17483947",
                    "id": "17483947",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=rokm",
                        "name": "rokm",
                        "key": "rokm",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34044",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34044",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34044",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34044"
                        },
                        "displayName": "Rok Mihevc",
                        "active": true,
                        "timeZone": "Europe/Amsterdam"
                    },
                    "body": "So the errors seem compiler related .. perhaps you can try removing those from conda env so you fall back to homebrew ones? Guessing.",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=rokm",
                        "name": "rokm",
                        "key": "rokm",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34044",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34044",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34044",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34044"
                        },
                        "displayName": "Rok Mihevc",
                        "active": true,
                        "timeZone": "Europe/Amsterdam"
                    },
                    "created": "2022-01-28T19:58:13.649+0000",
                    "updated": "2022-01-28T19:58:13.649+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13424814/comment/17484995",
                    "id": "17484995",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=willjones127",
                        "name": "willjones127",
                        "key": "willjones127",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34058",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34058",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34058",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34058"
                        },
                        "displayName": "Will Jones",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "Something I'm noticing in the log you attached on line 671:\r\n{code:java}\r\n+ export 'CMAKE_ARGS=-DCMAKE_AR=/Users/voltrondata/miniconda3/envs/arrow-commit/bin/arm64-apple-darwin20.0.0-ar -DCMAKE_CXX_COMPILER_AR=/Users/voltrondata/miniconda3/envs/arrow-commit/bin/arm64-apple-darwin20.0.0-ar -DCMAKE_C_COMPILER_AR=/Users/voltrondata/miniconda3/envs/arrow-commit/bin/arm64-apple-darwin20.0.0-ar -DCMAKE_RANLIB=/Users/voltrondata/miniconda3/envs/arrow-commit/bin/arm64-apple-darwin20.0.0-ranlib -DCMAKE_CXX_COMPILER_RANLIB=/Users/voltrondata/miniconda3/envs/arrow-commit/bin/arm64-apple-darwin20.0.0-ranlib -DCMAKE_C_COMPILER_RANLIB=/Users/voltrondata/miniconda3/envs/arrow-commit/bin/arm64-apple-darwin20.0.0-ranlib -DCMAKE_LINKER=/Users/voltrondata/miniconda3/envs/arrow-commit/bin/arm64-apple-darwin20.0.0-ld -DCMAKE_STRIP=/Users/voltrondata/miniconda3/envs/arrow-commit/bin/arm64-apple-darwin20.0.0-strip -DCMAKE_INSTALL_NAME_TOOL=/Users/voltrondata/miniconda3/envs/arrow-commit/bin/arm64-apple-darwin20.0.0-install_name_tool -DCMAKE_LIBTOOL=/Users/voltrondata/miniconda3/envs/arrow-commit/bin/arm64-apple-darwin20.0.0-libtool -DCMAKE_OSX_DEPLOYMENT_TARGET= -DCMAKE_BUILD_TYPE=Release -DCMAKE_OSX_SYSROOT=/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk -DCMAKE_AR=arm64-apple-darwin20.0.0-ar -DCMAKE_RANLIB=arm64-apple-darwin20.0.0-ranlib'\r\n{code}\r\n{{DCMAKE_AR}} is being set twice, once with an absolute path and then later with a relative (the first and second-to-last entries in the args). I think that's making it look in the wrong place for the compiler.\r\n\r\nPerhaps you should invoke the cmake commands yourself instead of using that CI script?",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=willjones127",
                        "name": "willjones127",
                        "key": "willjones127",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34058",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34058",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34058",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34058"
                        },
                        "displayName": "Will Jones",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2022-01-31T23:10:35.301+0000",
                    "updated": "2022-01-31T23:10:35.301+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13424814/comment/17486106",
                    "id": "17486106",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=elena%40ursacomputing.com",
                        "name": "elena@ursacomputing.com",
                        "key": "elena@ursacomputing.com",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Elena Henderson",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "[~rokm] Removing *compilers* from conda env did not fix the issue.\r\n\r\n[~willjones127] Good catch! The issue is with -DCMAKE_AR=arm64-apple-darwin20.0.0-ar -DCMAKE_RANLIB=arm64-apple-darwin20.0.0-ranlib'",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=elena%40ursacomputing.com",
                        "name": "elena@ursacomputing.com",
                        "key": "elena@ursacomputing.com",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Elena Henderson",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2022-02-02T21:13:10.880+0000",
                    "updated": "2022-02-02T21:13:10.880+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13424814/comment/17486111",
                    "id": "17486111",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=elena%40ursacomputing.com",
                        "name": "elena@ursacomputing.com",
                        "key": "elena@ursacomputing.com",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Elena Henderson",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "My colleague [~joosthooz] found a workaround that works with conda and mamba for this issue:\r\n\r\nSet these env vars\r\n\r\n\u00a0\r\n{code:java}\r\nexport RANLIB=`which $RANLIB`\r\nexport AR=`which $AR`\r\nexport ARROW_JEMALLOC=OFF {code}\r\n\u00a0\r\n\r\nbefore building Arrow C++ using this script:\r\n\r\n\u00a0\r\n{code:java}\r\nci/scripts/cpp_build.sh $(pwd) $(pwd)  {code}\r\n\u00a0\r\n\r\n\u00a0\r\n\r\nWorkarounds for conda and mamba envs:\r\n\r\n\u00a0\r\n{code:java}\r\n# with mamba\r\n\r\ngit clone https://github.com/apache/arrow.git\r\n\r\ncd arrow\r\n\r\nmamba create -y -n arrow-commit -c conda-forge \\\r\n\u00a0 --file ci/conda_env_cpp.txt \\\r\n\u00a0 --file ci/conda_env_python.txt \\\r\n\u00a0 python=3.8 \\\r\n\u00a0 pandas \\\r\n\u00a0 r\r\n\r\nmamba activate arrow-commit\r\n\r\npip install -r python/requirements-build.txt -r python/requirements-test.txt\r\n\r\nsource dev/conbench_envs/hooks.sh set_arrow_build_and_run_env_vars\r\n\r\nexport RANLIB=`which $RANLIB`\r\nexport AR=`which $AR`\r\nexport ARROW_JEMALLOC=OFF\r\n\r\nci/scripts/cpp_build.sh $(pwd) $(pwd)\r\nci/scripts/python_build.sh $(pwd) $(pwd)\r\n{code}\r\n{code:java}\r\n# with conda\r\ngit clone https://github.com/apache/arrow.git\r\n\r\ncd arrow\r\n\r\nconda create -y -n arrow-commit -c conda-forge \\\r\n\u00a0 --file ci/conda_env_unix.txt \\\r\n\u00a0 --file ci/conda_env_cpp.txt \\\r\n\u00a0 --file ci/conda_env_python.txt \\\r\n\u00a0 compilers \\\r\n\u00a0 python=3.8 \\\r\n\u00a0 pandas \\\r\n\u00a0 aws-sdk-cpp \\\r\n\u00a0 r\r\n\r\nconda activate arrow-commit\r\n\r\n\r\npip install -r python/requirements-build.txt -r python/requirements-test.txt\r\n\r\nsource dev/conbench_envs/hooks.sh set_arrow_build_and_run_env_vars\r\n\r\nexport RANLIB=`which $RANLIB`\r\nexport AR=`which $AR`\r\nexport ARROW_JEMALLOC=OFF\r\n\r\nci/scripts/cpp_build.sh $(pwd) $(pwd)\r\nci/scripts/python_build.sh $(pwd) $(pwd){code}\r\n\u00a0\r\n\r\n\u00a0",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=elena%40ursacomputing.com",
                        "name": "elena@ursacomputing.com",
                        "key": "elena@ursacomputing.com",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Elena Henderson",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2022-02-02T21:27:11.605+0000",
                    "updated": "2022-02-02T21:33:21.337+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13424814/comment/17486287",
                    "id": "17486287",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=jorisvandenbossche",
                        "name": "jorisvandenbossche",
                        "key": "jorisvandenbossche",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Joris Van den Bossche",
                        "active": true,
                        "timeZone": "Europe/Brussels"
                    },
                    "body": "Is this is a general issue for building Arrow using conda on M1? Or specific for the cpp_build.sh script? \r\n\r\nBecause if it is a general issue, we should document the workaround in our development docs?",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=jorisvandenbossche",
                        "name": "jorisvandenbossche",
                        "key": "jorisvandenbossche",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Joris Van den Bossche",
                        "active": true,
                        "timeZone": "Europe/Brussels"
                    },
                    "created": "2022-02-03T08:31:33.165+0000",
                    "updated": "2022-02-03T08:31:33.165+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13424814/comment/17486441",
                    "id": "17486441",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=rokm",
                        "name": "rokm",
                        "key": "rokm",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34044",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34044",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34044",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34044"
                        },
                        "displayName": "Rok Mihevc",
                        "active": true,
                        "timeZone": "Europe/Amsterdam"
                    },
                    "body": "I think it's general. [~alenkaf] did you experience this?",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=rokm",
                        "name": "rokm",
                        "key": "rokm",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34044",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34044",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34044",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34044"
                        },
                        "displayName": "Rok Mihevc",
                        "active": true,
                        "timeZone": "Europe/Amsterdam"
                    },
                    "created": "2022-02-03T12:50:57.950+0000",
                    "updated": "2022-02-03T12:50:57.950+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13424814/comment/17486464",
                    "id": "17486464",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=alenka",
                        "name": "alenka",
                        "key": "alenkaf",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34058",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34058",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34058",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34058"
                        },
                        "displayName": "Alenka Frim",
                        "active": true,
                        "timeZone": "Europe/Ljubljana"
                    },
                    "body": "I also had trouble building with conda on my M1 and am using Homebrew and pip due to that.\r\n\r\nCould try building again with conda to give more concrete feedback (don't remember the final error anymore, but I think I got it to build at the end and had errors when running tests or importing pyarrow in python console).",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=alenka",
                        "name": "alenka",
                        "key": "alenkaf",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34058",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34058",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34058",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34058"
                        },
                        "displayName": "Alenka Frim",
                        "active": true,
                        "timeZone": "Europe/Ljubljana"
                    },
                    "created": "2022-02-03T13:14:00.905+0000",
                    "updated": "2022-02-03T13:14:00.905+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13424814/comment/17512708",
                    "id": "17512708",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=xzeng",
                        "name": "xzeng",
                        "key": "JIRAUSER282793",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34050",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34050",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34050",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34050"
                        },
                        "displayName": "Xinyu Zeng",
                        "active": true,
                        "timeZone": "Asia/Shanghai"
                    },
                    "body": "Following the Python development doc and the conda cpp build still fails. The error comes from jemalloc_ep-configure and the error log includes:\r\n\r\n{code:java}\r\nInvalid configuration `arm64-apple-darwin20.0.0': machine `arm64-apple' not recognized\r\nconfigure: error: /bin/sh build-aux/config.sub arm64-apple-darwin20.0.0 failed\r\n{code}\r\n\r\n\r\n\r\n\r\n\r\n",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=xzeng",
                        "name": "xzeng",
                        "key": "JIRAUSER282793",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34050",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34050",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34050",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34050"
                        },
                        "displayName": "Xinyu Zeng",
                        "active": true,
                        "timeZone": "Asia/Shanghai"
                    },
                    "created": "2022-03-26T09:53:56.151+0000",
                    "updated": "2022-03-28T08:22:48.968+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13424814/comment/17513137",
                    "id": "17513137",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=alenka",
                        "name": "alenka",
                        "key": "alenkaf",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34058",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34058",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34058",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34058"
                        },
                        "displayName": "Alenka Frim",
                        "active": true,
                        "timeZone": "Europe/Ljubljana"
                    },
                    "body": "C++ and PyArrow builds successfully on my M1 inside conda with :\r\n{code:java}\r\nexport ARROW_HOME=$CONDA_PREFIX\r\nexport ARROW_BUILD_TYPE=debug\r\nexport PYARROW_WITH_FLIGHT=0\r\nexport PYARROW_WITH_GANDIVA=0\r\nexport PYARROW_WITH_ORC=0\r\nexport PYARROW_WITH_PARQUET=1\r\nexport PYARROW_WITH_DATASET=0\r\nexport PYARROW_WITH_S3=0\r\nexport PYARROW_PARALLEL=4\r\nexport PYARROW_WITH_PLASMA=0\r\n\r\ncmake -DCMAKE_INSTALL_PREFIX=$ARROW_HOME \\\r\n      -DCMAKE_BUILD_TYPE=debug \\\r\n      -DCMAKE_INSTALL_LIBDIR=lib \\\r\n      -DARROW_WITH_BZ2=ON \\\r\n      -DARROW_WITH_ZLIB=ON \\\r\n      -DARROW_WITH_ZSTD=ON \\\r\n      -DARROW_WITH_LZ4=ON \\\r\n      -DARROW_WITH_SNAPPY=ON \\\r\n      -DARROW_WITH_BROTLI=ON \\\r\n      -DARROW_PLASMA=OFF \\\r\n      -DARROW_PARQUET=ON \\\r\n      -DARROW_PYTHON=ON \\\r\n      -DARROW_JEMALLOC=OFF \\\r\n      -DARROW_MEMALLOC=OFF \\\r\n      -DARROW_BUILD_TESTS=ON \\\r\n      -DARROW_DEPENDENCY_SOURCE=CONDA \\\r\n      -DPython3_EXECUTABLE=/opt/anaconda3/envs/pyarrow-dev-conda/bin/python \\\r\n      -DARROW_INSTALL_NAME_RPATH=OFF \\\r\n      -GNinja \\\r\n      ..\r\n{code}\r\n\u00a0",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=alenka",
                        "name": "alenka",
                        "key": "alenkaf",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34058",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34058",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34058",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34058"
                        },
                        "displayName": "Alenka Frim",
                        "active": true,
                        "timeZone": "Europe/Ljubljana"
                    },
                    "created": "2022-03-28T04:52:59.125+0000",
                    "updated": "2022-03-28T04:53:28.765+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13424814/comment/17513158",
                    "id": "17513158",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=xzeng",
                        "name": "xzeng",
                        "key": "JIRAUSER282793",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34050",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34050",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34050",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34050"
                        },
                        "displayName": "Xinyu Zeng",
                        "active": true,
                        "timeZone": "Asia/Shanghai"
                    },
                    "body": "Thanks [~alenkaf]. The workaround for me is \"-DARROW_JEMALLOC=OFF\". This is the only extra option I add compared to the doc. Probably the development docs need to be updated.",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=xzeng",
                        "name": "xzeng",
                        "key": "JIRAUSER282793",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34050",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34050",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34050",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34050"
                        },
                        "displayName": "Xinyu Zeng",
                        "active": true,
                        "timeZone": "Asia/Shanghai"
                    },
                    "created": "2022-03-28T06:03:53.934+0000",
                    "updated": "2022-03-28T06:05:23.699+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13424814/comment/17513165",
                    "id": "17513165",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=alenka",
                        "name": "alenka",
                        "key": "alenkaf",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34058",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34058",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34058",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34058"
                        },
                        "displayName": "Alenka Frim",
                        "active": true,
                        "timeZone": "Europe/Ljubljana"
                    },
                    "body": "Opened an issue: https://issues.apache.org/jira/browse/ARROW-16040\r\n\r\nIt would be good to add a note about jemalloc and M1, agree. A contribution to the documentation is very much welcome!",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=alenka",
                        "name": "alenka",
                        "key": "alenkaf",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34058",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34058",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34058",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34058"
                        },
                        "displayName": "Alenka Frim",
                        "active": true,
                        "timeZone": "Europe/Ljubljana"
                    },
                    "created": "2022-03-28T06:17:30.319+0000",
                    "updated": "2022-03-28T06:17:30.319+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13424814/comment/17513233",
                    "id": "17513233",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=xzeng",
                        "name": "xzeng",
                        "key": "JIRAUSER282793",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34050",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34050",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34050",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34050"
                        },
                        "displayName": "Xinyu Zeng",
                        "active": true,
                        "timeZone": "Asia/Shanghai"
                    },
                    "body": "To reproduce on my machine osx arm64 Monterey 12.2.1:\r\n{code:bash}\r\ngit clone https://github.com/apache/arrow.git\r\npushd arrow\r\ngit submodule init\r\ngit submodule update\r\nexport PARQUET_TEST_DATA=\"${PWD}/cpp/submodules/parquet-testing/data\"\r\nexport ARROW_TEST_DATA=\"${PWD}/testing/data\"\r\npopd\r\nconda create -y -n pyarrow-test -c conda-forge \\\r\n    --file arrow/ci/conda_env_unix.txt \\\r\n    --file arrow/ci/conda_env_cpp.txt \\\r\n    --file arrow/ci/conda_env_python.txt \\\r\n    --file arrow/ci/conda_env_gandiva.txt \\\r\n    compilers \\\r\n    python=3.9 \\\r\n    pandas\r\nconda activate pyarrow-test\r\nexport ARROW_HOME=$CONDA_PREFIX\r\nmkdir arrow/cpp/build\r\npushd arrow/cpp/build\r\n\r\ncmake -DCMAKE_INSTALL_PREFIX=$ARROW_HOME \\\r\n      -DCMAKE_INSTALL_LIBDIR=lib \\\r\n      -DCMAKE_BUILD_TYPE=debug \\\r\n      -DARROW_WITH_BZ2=ON \\\r\n      -DARROW_WITH_ZLIB=ON \\\r\n      -DARROW_WITH_ZSTD=ON \\\r\n      -DARROW_WITH_LZ4=ON \\\r\n      -DARROW_WITH_SNAPPY=ON \\\r\n      -DARROW_WITH_BROTLI=ON \\\r\n      -DARROW_PARQUET=ON \\\r\n      -DARROW_PYTHON=ON \\\r\n      -DARROW_BUILD_TESTS=ON \\\r\n      ..\r\nmake -j8\r\n{code}\r\n\r\nError during make:\r\n{code:bash}\r\n[  3%] Performing configure step for 'jemalloc_ep'\r\nCMake Error at /Users/xinyu/Code/jira-test/arrow/cpp/build/jemalloc_ep-prefix/src/jemalloc_ep-stamp/jemalloc_ep-configure-DEBUG.cmake:36 (if):\r\n  if given arguments:\r\n\r\n    \"1\" \"--enable-debug\"\r\n\r\n  Unknown arguments specified\r\n{code}",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=xzeng",
                        "name": "xzeng",
                        "key": "JIRAUSER282793",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34050",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34050",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34050",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34050"
                        },
                        "displayName": "Xinyu Zeng",
                        "active": true,
                        "timeZone": "Asia/Shanghai"
                    },
                    "created": "2022-03-28T08:22:06.817+0000",
                    "updated": "2022-03-28T08:31:03.759+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13424814/comment/17610151",
                    "id": "17610151",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=toddfarmer",
                        "name": "toddfarmer",
                        "key": "JIRAUSER288796",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=39935",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=39935",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=39935",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=39935"
                        },
                        "displayName": "Todd Farmer",
                        "active": true,
                        "timeZone": "America/Boise"
                    },
                    "body": "This issue was last updated over 90 days ago, which may be an indication it is no longer being actively worked. To better reflect the current state, the issue is being unassigned per [project policy|https://arrow.apache.org/docs/dev/developers/bug_reports.html#issue-assignment]. Please feel free to re-take assignment of the issue if it is being actively worked, or if you plan to start that work soon.",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=toddfarmer",
                        "name": "toddfarmer",
                        "key": "JIRAUSER288796",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=39935",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=39935",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=39935",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=39935"
                        },
                        "displayName": "Todd Farmer",
                        "active": true,
                        "timeZone": "America/Boise"
                    },
                    "created": "2022-09-27T16:50:23.139+0000",
                    "updated": "2022-09-27T16:50:23.139+0000"
                }
            ],
            "maxResults": 18,
            "total": 18,
            "startAt": 0
        },
        "customfield_12311820": "0|z0yybc:",
        "customfield_12314139": null
    }
}