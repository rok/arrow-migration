{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13340383",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13340383",
    "key": "ARROW-10574",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12348823",
                "id": "12348823",
                "description": "",
                "name": "3.0.0",
                "archived": false,
                "released": true,
                "releaseDate": "2021-01-25"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "name": "Major",
            "id": "3"
        },
        "labels": [
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=wyzhao",
            "name": "wyzhao",
            "key": "wyzhao",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34055",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34055",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34055",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34055"
            },
            "displayName": "Weiyang Zhao",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12328936",
                "id": "12328936",
                "name": "Python"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=wyzhao",
            "name": "wyzhao",
            "key": "wyzhao",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34055",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34055",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34055",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34055"
            },
            "displayName": "Weiyang Zhao",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=wyzhao",
            "name": "wyzhao",
            "key": "wyzhao",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34055",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34055",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34055",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34055"
            },
            "displayName": "Weiyang Zhao",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "aggregateprogress": {
            "progress": 11400,
            "total": 11400,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 11400,
            "total": 11400,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-10574/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 19,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13340383/worklog/512018",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wyzhao opened a new pull request #8672:\nURL: https://github.com/apache/arrow/pull/8672\n\n\n   I would like to enhance partition filters in methods such as:\r\n   \r\n   pyarrow.parquet.ParquetDataset(path, filters)\r\n   \r\n   I am proposing the below enhancements:\r\n   \r\n   1. for operator \"in\", \"not in\", the value should be any typing.Iteratable (also a container). But currently only set\u00a0is supported while other iteratable, such as list, tuple cannot function correctly. I would like to change it to accept any iteratable.\r\n   \r\n   2. Enhance the documents about the partition filters.\r\n   \r\n   3. Check when no partition can satisfy the filters, raise an exception with meaningful error message.\r\n   \r\n   I see there is a new version implemented with\u00a0_ParquetDatasetV2 which passed my tests with an iterable for \"in\" and \"not in\". So the documentation update is fine for the new version as well.\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-11-15T19:24:55.009+0000",
                    "updated": "2020-11-15T19:24:55.009+0000",
                    "started": "2020-11-15T19:24:55.009+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "512018",
                    "issueId": "13340383"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13340383/worklog/512022",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "github-actions[bot] commented on pull request #8672:\nURL: https://github.com/apache/arrow/pull/8672#issuecomment-727623661\n\n\n   https://issues.apache.org/jira/browse/ARROW-10574\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-11-15T19:31:59.129+0000",
                    "updated": "2020-11-15T19:31:59.129+0000",
                    "started": "2020-11-15T19:31:59.128+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "512022",
                    "issueId": "13340383"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13340383/worklog/514200",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jorisvandenbossche commented on a change in pull request #8672:\nURL: https://github.com/apache/arrow/pull/8672#discussion_r527019353\n\n\n\n##########\nFile path: python/pyarrow/parquet.py\n##########\n@@ -114,7 +115,24 @@ def _check_filters(filters, check_null_strings=True):\n \n     Predicates may also be passed as List[Tuple]. This form is interpreted\n     as a single conjunction. To express OR in predicates, one must\n-    use the (preferred) List[List[Tuple]] notation.\"\"\"\n+    use the (preferred) List[List[Tuple]] notation.\n+\n+    Each tuple has format: (``key``, ``op``, ``value``) and compares the\n+    ``key`` with the ``value``.\n+    The supported ``op`` are:  ``=`` or ``==``, ``!=``, ``<``, ``>``, ``<=``,\n+    ``>=``, ``in`` and ``not in``. If the ``op`` is ``in`` or ``not in``, the\n+    ``value`` must be an iterable such as a ``list``, a ``set`` or a ``tuple``.\n+\n+    Examples:\n+\n+    .. code-block:: python\n+\n+        ('x', '=', 0)\n+        ('y', 'in', ['a', 'b', 'c'])\n+        ('z', 'not in', {'a','b'})\n+\n+\n\nReview comment:\n       A small nit: you can remove a blank line here\n\n##########\nFile path: python/pyarrow/parquet.py\n##########\n@@ -871,21 +889,34 @@ def filter_accepts_partition(self, part_key, filter, level):\n         if p_column != f_column:\n             return True\n \n-        f_type = type(f_value)\n+        p_value = self.levels[level].dictionary[p_value_index].as_py()\n \n-        if isinstance(f_value, set):\n+        if op in {'in', 'not in'}:\n+            if not (isinstance(f_value, Container) and\n+                    isinstance(f_value, Iterable)):\n\nReview comment:\n       Can you use the abstract types from `collections.abc` ?  \r\n   Also, we need to ensure we don't accidentally allow a single string value this way (`(\"part\", \"in\", \"abc\")` would then be interpreted like `(\"part\", \"in\", [\"a\", \"b\", \"c\"])`, which I don't think we should do)\n\n##########\nFile path: python/pyarrow/parquet.py\n##########\n@@ -871,21 +889,34 @@ def filter_accepts_partition(self, part_key, filter, level):\n         if p_column != f_column:\n             return True\n \n-        f_type = type(f_value)\n+        p_value = self.levels[level].dictionary[p_value_index].as_py()\n \n-        if isinstance(f_value, set):\n+        if op in {'in', 'not in'}:\n+            if not (isinstance(f_value, Container) and\n+                    isinstance(f_value, Iterable)):\n+                raise ValueError(\"Op '%s' requires an iterable such as list,\"\n+                                 \" set or tuple\", op)\n             if not f_value:\n-                raise ValueError(\"Cannot use empty set as filter value\")\n-            if op not in {'in', 'not in'}:\n-                raise ValueError(\"Op '%s' not supported with set value\",\n-                                 op)\n+                raise ValueError(\"Cannot use empty iterable as filter value\")\n+\n             if len({type(item) for item in f_value}) != 1:\n-                raise ValueError(\"All elements of set '%s' must be of\"\n+                raise ValueError(\"All elements of the iterable '%s' must be of\"\n                                  \" same type\", f_value)\n             f_type = type(next(iter(f_value)))\n \n-        p_value = f_type(self.levels[level]\n-                         .dictionary[p_value_index].as_py())\n+            p_value = f_type(p_value)\n+\n+            if op == 'in':\n+                return p_value in f_value\n+            else:\n+                return p_value not in f_value\n\nReview comment:\n       Could you only do the `f_value` checking and `p_value` preparation in this `if` branch, but keep the actual check below?\n\n##########\nFile path: python/pyarrow/parquet.py\n##########\n@@ -1237,6 +1264,8 @@ def validate_schemas(self):\n             if self.common_metadata is not None:\n                 self.schema = self.common_metadata.schema\n             else:\n+                if not self.pieces:\n+                    raise ValueError('No partition is found.')\n\nReview comment:\n       Is this a related change? Why was it needed?\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-11-19T16:37:33.215+0000",
                    "updated": "2020-11-19T16:37:33.215+0000",
                    "started": "2020-11-19T16:37:33.215+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "514200",
                    "issueId": "13340383"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13340383/worklog/514202",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jorisvandenbossche commented on a change in pull request #8672:\nURL: https://github.com/apache/arrow/pull/8672#discussion_r527031173\n\n\n\n##########\nFile path: python/pyarrow/tests/test_parquet.py\n##########\n@@ -2008,6 +2008,19 @@ def test_filters_inclusive_set(tempdir, use_legacy_dataset):\n     assert 'c' not in result_df['string'].values\n     assert False not in result_df['boolean'].values\n \n+    dataset = pq.ParquetDataset(\n+        base_path, filesystem=fs,\n+        filters=[('integer', 'in', [1]), ('string', 'in', ('a', 'b')),\n+                 ('boolean', 'not in', {False})],\n+        use_legacy_dataset=use_legacy_dataset\n+    )\n+    table = dataset.read()\n+    result_df = (table.to_pandas().reset_index(drop=True))\n+\n+    assert 0 not in result_df['integer'].values\n+    assert 'c' not in result_df['string'].values\n+    assert False not in result_df['boolean'].values\n+\n\nReview comment:\n       Can you also add a test to assert the error you get when passing an invalid \"in\" filter (like `(\"col\", \"in\", 4)`)\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-11-19T16:38:49.414+0000",
                    "updated": "2020-11-19T16:38:49.414+0000",
                    "started": "2020-11-19T16:38:49.413+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "514202",
                    "issueId": "13340383"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13340383/worklog/514257",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wyzhao commented on a change in pull request #8672:\nURL: https://github.com/apache/arrow/pull/8672#discussion_r527096473\n\n\n\n##########\nFile path: python/pyarrow/parquet.py\n##########\n@@ -1237,6 +1264,8 @@ def validate_schemas(self):\n             if self.common_metadata is not None:\n                 self.schema = self.common_metadata.schema\n             else:\n+                if not self.pieces:\n+                    raise ValueError('No partition is found.')\n\nReview comment:\n       If no partition satisfies the filters, the next line will throw IndexOutOfRange error:\r\n                   self.schema = self.pieces[0].get_metadata().schema\r\n   I add the two lines to make the error more meaningful.\r\n   \n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-11-19T18:11:54.612+0000",
                    "updated": "2020-11-19T18:11:54.612+0000",
                    "started": "2020-11-19T18:11:54.612+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "514257",
                    "issueId": "13340383"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13340383/worklog/514292",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jorisvandenbossche commented on a change in pull request #8672:\nURL: https://github.com/apache/arrow/pull/8672#discussion_r527139269\n\n\n\n##########\nFile path: python/pyarrow/parquet.py\n##########\n@@ -1237,6 +1264,8 @@ def validate_schemas(self):\n             if self.common_metadata is not None:\n                 self.schema = self.common_metadata.schema\n             else:\n+                if not self.pieces:\n+                    raise ValueError('No partition is found.')\n\nReview comment:\n       Is there a test that covers this?\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-11-19T19:22:23.612+0000",
                    "updated": "2020-11-19T19:22:23.612+0000",
                    "started": "2020-11-19T19:22:23.612+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "514292",
                    "issueId": "13340383"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13340383/worklog/515446",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jorisvandenbossche commented on a change in pull request #8672:\nURL: https://github.com/apache/arrow/pull/8672#discussion_r528586857\n\n\n\n##########\nFile path: python/pyarrow/parquet.py\n##########\n@@ -877,17 +894,22 @@ def filter_accepts_partition(self, part_key, filter, level):\n \n         f_type = type(f_value)\n \n-        if isinstance(f_value, set):\n+        if op in {'in', 'not in'}:\n+            if not (isinstance(f_value, Container) and\n+                    isinstance(f_value, Iterable)):\n\nReview comment:\n       Could maybe also check for `Collection` instead of the combination of Container and Iterable? \n\n##########\nFile path: python/pyarrow/tests/test_parquet.py\n##########\n@@ -2009,6 +2021,37 @@ def test_filters_inclusive_set(tempdir, use_legacy_dataset):\n     assert False not in result_df['boolean'].values\n \n \n+@pytest.mark.pandas\n+@parametrize_legacy_dataset\n+def test_filters_no_partition_found(tempdir, use_legacy_dataset):\n+    fs = LocalFileSystem._get_instance()\n+    base_path = tempdir\n+\n+    integer_keys = [0, 1]\n+    string_keys = ['a', 'b', 'c']\n+    boolean_keys = [True, False]\n+    partition_spec = [\n+        ['integer', integer_keys],\n+        ['string', string_keys],\n+        ['boolean', boolean_keys]\n+    ]\n+\n+    df = pd.DataFrame({\n+        'integer': np.array(integer_keys, dtype='i4').repeat(15),\n+        'string': np.tile(np.tile(np.array(string_keys, dtype=object), 5), 2),\n+        'boolean': np.tile(np.tile(np.array(boolean_keys, dtype='bool'), 5),\n+                           3),\n+    }, columns=['integer', 'string', 'boolean'])\n+\n+    _generate_partition_directories(fs, base_path, partition_spec, df)\n+\n+    with pytest.raises(ValueError, match=r\"No partition is found.\"):\n\nReview comment:\n       This only raises an error for the legacy dataset, for the new implementation, we return an empty table. So you will need to add a `if use_legacy_dataset: ...` here (see a similar case in the `test_filters_invalid_pred_op` test just below)\n\n##########\nFile path: python/pyarrow/tests/test_parquet.py\n##########\n@@ -1997,8 +1997,20 @@ def test_filters_inclusive_set(tempdir, use_legacy_dataset):\n \n     dataset = pq.ParquetDataset(\n         base_path, filesystem=fs,\n-        filters=[('integer', 'in', {1}), ('string', 'in', {'a', 'b'}),\n-                 ('boolean', 'in', {True})],\n+        filters=[('string', 'in', 'ab')],\n\nReview comment:\n       I am wondering, should we raise an error here instead? Because now this is interpreted as `(\"string\", \"in\", {\"a\", \"b\"})`, which I am not sure we should \"silently\" do (it's not very explicit for the user)\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-11-23T10:14:39.467+0000",
                    "updated": "2020-11-23T10:14:39.467+0000",
                    "started": "2020-11-23T10:14:39.467+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "515446",
                    "issueId": "13340383"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13340383/worklog/515818",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wyzhao commented on a change in pull request #8672:\nURL: https://github.com/apache/arrow/pull/8672#discussion_r529060879\n\n\n\n##########\nFile path: python/pyarrow/parquet.py\n##########\n@@ -1237,6 +1264,8 @@ def validate_schemas(self):\n             if self.common_metadata is not None:\n                 self.schema = self.common_metadata.schema\n             else:\n+                if not self.pieces:\n+                    raise ValueError('No partition is found.')\n\nReview comment:\n       I have remove this change from this JIRA/pull request. I will create another pull request for this particular issue.\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-11-23T23:23:32.346+0000",
                    "updated": "2020-11-23T23:23:32.346+0000",
                    "started": "2020-11-23T23:23:32.346+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "515818",
                    "issueId": "13340383"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13340383/worklog/515822",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wyzhao commented on a change in pull request #8672:\nURL: https://github.com/apache/arrow/pull/8672#discussion_r529065377\n\n\n\n##########\nFile path: python/pyarrow/parquet.py\n##########\n@@ -871,21 +889,34 @@ def filter_accepts_partition(self, part_key, filter, level):\n         if p_column != f_column:\n             return True\n \n-        f_type = type(f_value)\n+        p_value = self.levels[level].dictionary[p_value_index].as_py()\n \n-        if isinstance(f_value, set):\n+        if op in {'in', 'not in'}:\n+            if not (isinstance(f_value, Container) and\n+                    isinstance(f_value, Iterable)):\n\nReview comment:\n       Now ('part', 'in', 'abc') will be True for 'a', 'b', 'ab' or 'abc'. There is a new test case.\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-11-23T23:35:39.855+0000",
                    "updated": "2020-11-23T23:35:39.855+0000",
                    "started": "2020-11-23T23:35:39.855+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "515822",
                    "issueId": "13340383"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13340383/worklog/515824",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wyzhao commented on a change in pull request #8672:\nURL: https://github.com/apache/arrow/pull/8672#discussion_r529065886\n\n\n\n##########\nFile path: python/pyarrow/tests/test_parquet.py\n##########\n@@ -2008,6 +2008,19 @@ def test_filters_inclusive_set(tempdir, use_legacy_dataset):\n     assert 'c' not in result_df['string'].values\n     assert False not in result_df['boolean'].values\n \n+    dataset = pq.ParquetDataset(\n+        base_path, filesystem=fs,\n+        filters=[('integer', 'in', [1]), ('string', 'in', ('a', 'b')),\n+                 ('boolean', 'not in', {False})],\n+        use_legacy_dataset=use_legacy_dataset\n+    )\n+    table = dataset.read()\n+    result_df = (table.to_pandas().reset_index(drop=True))\n+\n+    assert 0 not in result_df['integer'].values\n+    assert 'c' not in result_df['string'].values\n+    assert False not in result_df['boolean'].values\n+\n\nReview comment:\n       There is a test case: [('integers', 'in', 3), ]. It will raise a TypeError as in the new dataset API.\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-11-23T23:36:58.291+0000",
                    "updated": "2020-11-23T23:36:58.291+0000",
                    "started": "2020-11-23T23:36:58.290+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "515824",
                    "issueId": "13340383"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13340383/worklog/515826",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wyzhao commented on a change in pull request #8672:\nURL: https://github.com/apache/arrow/pull/8672#discussion_r529066887\n\n\n\n##########\nFile path: python/pyarrow/tests/test_parquet.py\n##########\n@@ -1997,8 +1997,20 @@ def test_filters_inclusive_set(tempdir, use_legacy_dataset):\n \n     dataset = pq.ParquetDataset(\n         base_path, filesystem=fs,\n-        filters=[('integer', 'in', {1}), ('string', 'in', {'a', 'b'}),\n-                 ('boolean', 'in', {True})],\n+        filters=[('string', 'in', 'ab')],\n\nReview comment:\n       ('string', 'in', 'ab') will check if the partition in 'ab', so 'ab' will be accepted.\r\n   ('string', 'in', {'a', 'b'})  will check if the partition in  {'a', 'b'}. And  'ab' will not be accepted.\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-11-23T23:39:38.070+0000",
                    "updated": "2020-11-23T23:39:38.070+0000",
                    "started": "2020-11-23T23:39:38.070+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "515826",
                    "issueId": "13340383"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13340383/worklog/515827",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wyzhao commented on a change in pull request #8672:\nURL: https://github.com/apache/arrow/pull/8672#discussion_r529067072\n\n\n\n##########\nFile path: python/pyarrow/tests/test_parquet.py\n##########\n@@ -2009,6 +2021,37 @@ def test_filters_inclusive_set(tempdir, use_legacy_dataset):\n     assert False not in result_df['boolean'].values\n \n \n+@pytest.mark.pandas\n+@parametrize_legacy_dataset\n+def test_filters_no_partition_found(tempdir, use_legacy_dataset):\n+    fs = LocalFileSystem._get_instance()\n+    base_path = tempdir\n+\n+    integer_keys = [0, 1]\n+    string_keys = ['a', 'b', 'c']\n+    boolean_keys = [True, False]\n+    partition_spec = [\n+        ['integer', integer_keys],\n+        ['string', string_keys],\n+        ['boolean', boolean_keys]\n+    ]\n+\n+    df = pd.DataFrame({\n+        'integer': np.array(integer_keys, dtype='i4').repeat(15),\n+        'string': np.tile(np.tile(np.array(string_keys, dtype=object), 5), 2),\n+        'boolean': np.tile(np.tile(np.array(boolean_keys, dtype='bool'), 5),\n+                           3),\n+    }, columns=['integer', 'string', 'boolean'])\n+\n+    _generate_partition_directories(fs, base_path, partition_spec, df)\n+\n+    with pytest.raises(ValueError, match=r\"No partition is found.\"):\n\nReview comment:\n       I removed this change. Will have a separate JIRA.\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-11-23T23:40:01.152+0000",
                    "updated": "2020-11-23T23:40:01.152+0000",
                    "started": "2020-11-23T23:40:01.152+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "515827",
                    "issueId": "13340383"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13340383/worklog/515828",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wyzhao commented on a change in pull request #8672:\nURL: https://github.com/apache/arrow/pull/8672#discussion_r529069224\n\n\n\n##########\nFile path: python/pyarrow/parquet.py\n##########\n@@ -877,17 +894,22 @@ def filter_accepts_partition(self, part_key, filter, level):\n \n         f_type = type(f_value)\n \n-        if isinstance(f_value, set):\n+        if op in {'in', 'not in'}:\n+            if not (isinstance(f_value, Container) and\n+                    isinstance(f_value, Iterable)):\n\nReview comment:\n       Good idea. \n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-11-23T23:45:49.636+0000",
                    "updated": "2020-11-23T23:45:49.636+0000",
                    "started": "2020-11-23T23:45:49.636+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "515828",
                    "issueId": "13340383"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13340383/worklog/515833",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wyzhao commented on a change in pull request #8672:\nURL: https://github.com/apache/arrow/pull/8672#discussion_r529077937\n\n\n\n##########\nFile path: python/pyarrow/parquet.py\n##########\n@@ -877,17 +894,22 @@ def filter_accepts_partition(self, part_key, filter, level):\n \n         f_type = type(f_value)\n \n-        if isinstance(f_value, set):\n+        if op in {'in', 'not in'}:\n+            if not (isinstance(f_value, Container) and\n+                    isinstance(f_value, Iterable)):\n\nReview comment:\n       Hi Joris. I changed to use Collection. But the build failed for python 3.5 which does not support Collection.\r\n   What is your take on this?\r\n   Thanks.\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-11-24T00:11:46.936+0000",
                    "updated": "2020-11-24T00:11:46.936+0000",
                    "started": "2020-11-24T00:11:46.936+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "515833",
                    "issueId": "13340383"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13340383/worklog/517762",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wyzhao commented on a change in pull request #8672:\nURL: https://github.com/apache/arrow/pull/8672#discussion_r532378480\n\n\n\n##########\nFile path: python/pyarrow/parquet.py\n##########\n@@ -877,17 +894,22 @@ def filter_accepts_partition(self, part_key, filter, level):\n \n         f_type = type(f_value)\n \n-        if isinstance(f_value, set):\n+        if op in {'in', 'not in'}:\n+            if not (isinstance(f_value, Container) and\n+                    isinstance(f_value, Iterable)):\n\nReview comment:\n       Collection is not supported in python 3.5, so roll back to Container and Iterable. \n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-11-30T06:50:48.380+0000",
                    "updated": "2020-11-30T06:50:48.380+0000",
                    "started": "2020-11-30T06:50:48.380+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "517762",
                    "issueId": "13340383"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13340383/worklog/520592",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wyzhao commented on pull request #8672:\nURL: https://github.com/apache/arrow/pull/8672#issuecomment-739440882\n\n\n   Hi Joris,\r\n   \r\n   Thank you for reviewing my work. I saw that python 3.5 is not supported any more, so I changed back to use \"Collection\" as you suggested. I believe everything is taken care of. Please review.\r\n   Thanks and best regards,\r\n   \r\n   Weiyang \n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-12-06T01:30:41.255+0000",
                    "updated": "2020-12-06T01:30:41.255+0000",
                    "started": "2020-12-06T01:30:41.255+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "520592",
                    "issueId": "13340383"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13340383/worklog/522739",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jorisvandenbossche commented on pull request #8672:\nURL: https://github.com/apache/arrow/pull/8672#issuecomment-742543077\n\n\n   @wyzhao thanks for the update! I am waiting until https://github.com/apache/arrow/pull/8816 gets merged, and then will get back to this PR (this will give a merge conflict, but I can handle that)\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-12-10T14:08:15.212+0000",
                    "updated": "2020-12-10T14:08:15.212+0000",
                    "started": "2020-12-10T14:08:15.212+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "522739",
                    "issueId": "13340383"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13340383/worklog/526870",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jorisvandenbossche closed pull request #8672:\nURL: https://github.com/apache/arrow/pull/8672\n\n\n   \n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-12-21T16:44:52.085+0000",
                    "updated": "2020-12-21T16:44:52.085+0000",
                    "started": "2020-12-21T16:44:52.085+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "526870",
                    "issueId": "13340383"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13340383/worklog/526871",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jorisvandenbossche commented on pull request #8672:\nURL: https://github.com/apache/arrow/pull/8672#issuecomment-749071136\n\n\n   Thanks @wyzhao !\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-12-21T16:45:25.073+0000",
                    "updated": "2020-12-21T16:45:25.073+0000",
                    "started": "2020-12-21T16:45:25.072+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "526871",
                    "issueId": "13340383"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
            "id": "4",
            "description": "An improvement or enhancement to an existing feature or task.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
            "name": "Improvement",
            "subtask": false,
            "avatarId": 21140
        },
        "timespent": 11400,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@17a6db7c[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@4135e40b[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@20ea68a7[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@4e91c50d[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@5d949f72[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@6d644a08[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@1eb8a853[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@5ec1af24[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@27d7c481[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@682cfe79[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@338d291f[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@606608c5[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 11400,
        "customfield_12312520": null,
        "customfield_12312521": "Mon Dec 21 16:44:48 UTC 2020",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2020-12-21T16:44:48.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-10574/watchers",
            "watchCount": 2,
            "isWatching": false
        },
        "created": "2020-11-13T00:45:37.000+0000",
        "updated": "2020-12-21T16:45:26.000+0000",
        "timeoriginalestimate": null,
        "description": "I would like to enhance partition filters in methods such as:\r\n\r\n{{pyarrow.parquet.ParquetDataset(path, filters)}}\r\n\r\nI am proposing the below enhancements:\r\n # for operator \"in\", \"not in\", the value should be any typing.Iteratable (also a container). But currently only set\u00a0is supported while other iteratable, such as list, tuple cannot function correctly. I would like to change it to accept any iteratable.\r\n # Enhance the documents about the partition filters.\r\n\r\nI see there is a new version implemented with\u00a0\r\n _ParquetDatasetV2 which already accepts an iterable. So the documentation update is fine for the new version as well.\r\n \u00a0",
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "3h 10m",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 11400
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[Python][Parquet] Allow collections for 'in' / 'not in' filter (in addition to sets)",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13340383/comment/17231438",
                    "id": "17231438",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=jorisvandenbossche",
                        "name": "jorisvandenbossche",
                        "key": "jorisvandenbossche",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Joris Van den Bossche",
                        "active": true,
                        "timeZone": "Europe/Brussels"
                    },
                    "body": "Could you already push a branch with your changes to GitHub? Seeing the code might help in understanding what you are proposing.\r\n\r\nbq. for operator \"in\", \"not in\", the value currently must be a set. \r\n\r\nI would think we already support other iterable that support the \"in\" python operator. Do you have an example where it fails? \r\nBut I agree that converting it to a set might be good anyway.\r\n\r\nbq. I would like to add a 'like' operator which has a semantics of a sql \"like\". Alternatively, a regular expression can be used. I prefer sql like semantics for reasons to achieve sql consistency. \r\n\r\nThe ParquetDataset code is being replaced with a {{pyarrow.dataset}} based implementation. So any significant enhancement or new feature should probably target this new implementation. Currently, we do not yet support general filter expressions, but there is work ongoing on allowing this (I can't directly find the correct JIRA, but see eg ARROW-10305 for similar discussion)\r\n",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=jorisvandenbossche",
                        "name": "jorisvandenbossche",
                        "key": "jorisvandenbossche",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Joris Van den Bossche",
                        "active": true,
                        "timeZone": "Europe/Brussels"
                    },
                    "created": "2020-11-13T13:02:10.518+0000",
                    "updated": "2020-11-13T13:02:10.518+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13340383/comment/17232387",
                    "id": "17232387",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wyzhao",
                        "name": "wyzhao",
                        "key": "wyzhao",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34055",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34055",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34055",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34055"
                        },
                        "displayName": "Weiyang Zhao",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "Hi,\u00a0[~jorisvandenbossche]\r\n\r\nJust saw your comments. I don't know where Jira sent me the notification email.\r\n\r\nCurrently if I pass in a filter like this:\r\n\r\n('x', 'in', ['a', 'b'])\r\n\r\nIt will not work because of line 876 in parquet.py:\r\n {{if isinstance(f_value, set)}}\r\n You see that it only checks 'set'.\r\n\r\nI also enhanced the documents to make it clear.\r\n\r\nI dropped the 'like' enhancement because it is not supported in the cython version and I am unfamiliar with cython.\r\n\r\nI have submitted a pull request. You can see the details there.\r\n\r\nThanks.",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wyzhao",
                        "name": "wyzhao",
                        "key": "wyzhao",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34055",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34055",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34055",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34055"
                        },
                        "displayName": "Weiyang Zhao",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2020-11-15T20:01:16.148+0000",
                    "updated": "2020-11-15T20:16:51.306+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13340383/comment/17252960",
                    "id": "17252960",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=jorisvandenbossche",
                        "name": "jorisvandenbossche",
                        "key": "jorisvandenbossche",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Joris Van den Bossche",
                        "active": true,
                        "timeZone": "Europe/Brussels"
                    },
                    "body": "Issue resolved by pull request 8672\n[https://github.com/apache/arrow/pull/8672]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=jorisvandenbossche",
                        "name": "jorisvandenbossche",
                        "key": "jorisvandenbossche",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Joris Van den Bossche",
                        "active": true,
                        "timeZone": "Europe/Brussels"
                    },
                    "created": "2020-12-21T16:44:48.120+0000",
                    "updated": "2020-12-21T16:44:48.120+0000"
                }
            ],
            "maxResults": 3,
            "total": 3,
            "startAt": 0
        },
        "customfield_12311820": "0|z0kjs0:",
        "customfield_12314139": null
    }
}