{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13294165",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13294165",
    "key": "ARROW-8230",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12347769",
                "id": "12347769",
                "description": "",
                "name": "1.0.0",
                "archived": false,
                "released": true,
                "releaseDate": "2020-07-24"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "name": "Major",
            "id": "3"
        },
        "labels": [
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [
            {
                "id": "12584091",
                "self": "https://issues.apache.org/jira/rest/api/2/issueLink/12584091",
                "type": {
                    "id": "12310460",
                    "name": "Child-Issue",
                    "inward": "is a child of",
                    "outward": "is a parent of",
                    "self": "https://issues.apache.org/jira/rest/api/2/issueLinkType/12310460"
                },
                "inwardIssue": {
                    "id": "13214915",
                    "key": "ARROW-4526",
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13214915",
                    "fields": {
                        "summary": "[Java] Remove Netty references from ArrowBuf and move Allocator out of vector package",
                        "status": {
                            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
                            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
                            "name": "Resolved",
                            "id": "5",
                            "statusCategory": {
                                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                                "id": 3,
                                "key": "done",
                                "colorName": "green",
                                "name": "Done"
                            }
                        },
                        "priority": {
                            "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
                            "name": "Critical",
                            "id": "2"
                        },
                        "issuetype": {
                            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
                            "id": "4",
                            "description": "An improvement or enhancement to an existing feature or task.",
                            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
                            "name": "Improvement",
                            "subtask": false,
                            "avatarId": 21140
                        }
                    }
                }
            }
        ],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=rymurr",
            "name": "rymurr",
            "key": "rymurr",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
            },
            "displayName": "Ryan Murray",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12328933",
                "id": "12328933",
                "name": "Java"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=fan_li_ya",
            "name": "fan_li_ya",
            "key": "fan_li_ya",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
            },
            "displayName": "Liya Fan",
            "active": true,
            "timeZone": "Asia/Shanghai"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=fan_li_ya",
            "name": "fan_li_ya",
            "key": "fan_li_ya",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
            },
            "displayName": "Liya Fan",
            "active": true,
            "timeZone": "Asia/Shanghai"
        },
        "aggregateprogress": {
            "progress": 25800,
            "total": 25800,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 25800,
            "total": 25800,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-8230/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 43,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13294165/worklog/413170",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "rymurr commented on pull request #6782: ARROW-8230 [WIP][Java] Move Netty memory manager into a separate module\nURL: https://github.com/apache/arrow/pull/6782\n \n \n   This attempts to complete ARROW-8230. However pulling Netty out of `arrow-memory` is much harder than I had anticipated.\r\n   \r\n   The code changes are extensive and not altogether nice. I personally think we have to break down the task of removing Netty even further and I am posting this PR to get some feedback\r\n   \r\n   This PR:\r\n   * removes trivial dependencies on netty eg: `PlatformDependent` from `arrow-memory`\r\n   * creates a new module `arrow-memory-netty` and moves netty specific stuff there\r\n   * a number of methods were recently deprecated, they have been removed here but I think its too early\r\n   * add a `TrivialAllocationManager` for when Netty isn't available\r\n   * attempt to deal with instantiating a NettyAllocationManager when available and falling back to TrivialAllocationManager when it isn't\r\n   * attempt to deal with the as yet outstanding hard references to Netty objects\r\n   \r\n   I am not overly happy with this approach and would love some feedback about how to break this down further. @liyafan82 and @jacques-n especially as they are the reporters of this issue and its parent.\r\n   \r\n   __Note__: most `arrow-memory` tests are broken on this branch and a number of other modules are not compiling either\r\n   __Note__: I have left `ArrowBuf` under `io.netty.buffer` as this will be moved out by #6729 \n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-03-31T13:52:13.010+0000",
                    "updated": "2020-03-31T13:52:13.010+0000",
                    "started": "2020-03-31T13:52:13.009+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "413170",
                    "issueId": "13294165"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13294165/worklog/413172",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "github-actions[bot] commented on issue #6782: ARROW-8230 [WIP][Java] Move Netty memory manager into a separate module\nURL: https://github.com/apache/arrow/pull/6782#issuecomment-606647306\n \n \n   https://issues.apache.org/jira/browse/ARROW-8230\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-03-31T14:02:26.269+0000",
                    "updated": "2020-03-31T14:02:26.269+0000",
                    "started": "2020-03-31T14:02:26.269+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "413172",
                    "issueId": "13294165"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13294165/worklog/413679",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "liyafan82 commented on issue #6782: ARROW-8230 [WIP][Java] Move Netty memory manager into a separate module\nURL: https://github.com/apache/arrow/pull/6782#issuecomment-606986823\n \n \n   Hi @rymurr Thanks for the quick response.\r\n   I briefly looked at the PR, and have some high-level comments:\r\n   \r\n   1. Maybe there is no need to remove the netty dependency from the memory module in this PR, as it is not ready yet (IMO), and lots of changes are required.\r\n   2. Maybe there is no need for the TrivialAllocationManager, as we are in the process of providing another allocator independent of netty and capable of supporting 64-bit buffers (https://github.com/apache/arrow/pull/6323/files#diff-26fb642f66a09df6024fa977ac762199)\r\n   \r\n   IMO, this PR should perform the following tasks\r\n   1. Create a separate module (arrow-memory-netty), and make it depend on arrow-memory. \r\n   2. Move netty related classes to the new module. This may cause some cyclic dependencies, and we can work around this by leaving the old classes there, and make them deprecated. They should be removed in a future PR.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-04-01T02:17:02.143+0000",
                    "updated": "2020-04-01T02:17:02.143+0000",
                    "started": "2020-04-01T02:17:02.143+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "413679",
                    "issueId": "13294165"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13294165/worklog/414575",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "rymurr commented on issue #6782: ARROW-8230 [WIP][Java] Move Netty memory manager into a separate module\nURL: https://github.com/apache/arrow/pull/6782#issuecomment-607748354\n \n \n   hey @liyafan82 I appreciate the feedback!\r\n   \r\n   I agree, I will open a ticket for the removal of netty from `arrow-memory` for another PR. I had not seen the `UnsafeAllocationManager`and it definitely makes more sense than mine. I will wait till that PR is merged and rebase against it. \r\n   \r\n   As for the cyclic dependencies maven **won't allow** `arrow-memory` and `arrow-memory-netty` to directly depend on each other directly so the separation into a new module can't happen until we are able to cut the netty dependency completely. This means removing anything referencing Netty Buffers completely from things like `BaseAllocator`.\r\n   \r\n   One way forward would be to introduce two new modules `arrow-memory-netty` and `arrow-memory-base`. Then `arrow-memory-netty` would depend on `arrow-memory-base` and `arrow-memory` would depend on both. We could separate out the netty specific stuff more easily and once the break is complete we would delete `arrrow-memory-base` and just have `arrow-memory-netty` depend on `arrow-memory`. I think this is a bit much for such a change though and am not a huge fan.\r\n   \r\n   My best way forward is to:\r\n   1. Raise a PR to remove direct netty references from everything but the classes under the `io.netty.buffer` package, `NettyAllocationManager` and `ArrowByteBufAllocator`.\r\n   2. Remove `NettyAllocationManager` hard references from `BaseAllocator` and other classes that don't require netty and aren't already marked `@Deprecated`\r\n   3. Wait until the `@Deprecated` methods have been publicly deprecated for long enough (I believe they were deprecated only recently and were not in the 0.16.0 release). Perhaps just 0.17.0 is enough and we can remove them for 1.0.0? Otherwise we can wait longer, however there is something nice about removing the hard netty requirement before we release 1.0.0.\r\n   4. Remove `@Deprecated` methods, create `arrow-memory-netty` and remove netty dependencies from `arrow-memory`\r\n   5. Celebrate :tada: \r\n   \r\n   What do you think @liyafan82 ? If you agree I will close this PR and begin on 1. from above.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-04-02T10:03:44.938+0000",
                    "updated": "2020-04-02T10:03:44.938+0000",
                    "started": "2020-04-02T10:03:44.937+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "414575",
                    "issueId": "13294165"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13294165/worklog/414696",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "liyafan82 commented on issue #6782: ARROW-8230 [WIP][Java] Move Netty memory manager into a separate module\nURL: https://github.com/apache/arrow/pull/6782#issuecomment-607867187\n \n \n   @rymurr Your plan sounds reasonable. \r\n   I mostly agree with your points, with some minor concerns:\r\n   \r\n   1. I am not sure if we need to create the arrow-memory-base module. However, to choose between different allocators, we need some code that has access to both arrow-memory and arrow-memory-netty. Maybe we can have a discussion by then.\r\n   \r\n   2. I am not sure how long should we wait before completely removing the depecated stuffs. \r\n   \r\n   Anyway, it is ok to start removing netty references now.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-04-02T14:05:15.780+0000",
                    "updated": "2020-04-02T14:05:15.780+0000",
                    "started": "2020-04-02T14:05:15.780+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "414696",
                    "issueId": "13294165"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13294165/worklog/415573",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "rymurr commented on issue #6782: ARROW-8230 [WIP][Java] Move Netty memory manager into a separate module\nURL: https://github.com/apache/arrow/pull/6782#issuecomment-608536553\n \n \n   Hey @liyafan82  thanks for the comments. I agree, I don't think we should create the `arrow-memory-base` module. I think the simplest (maybe not the best) way to choose between allocators is via reflection. Something more elegant than, but along the same lines as how I instantiated different allocators in the `RootAllocator` in this PR.\r\n   \r\n   In the meantime I will close this PR and start one to minimize Netty usage in `arrow-memory` and we can revisit when we feel the `@Deprecated` methods have been around long enough,\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-04-03T16:27:19.301+0000",
                    "updated": "2020-04-03T16:27:19.301+0000",
                    "started": "2020-04-03T16:27:19.301+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "415573",
                    "issueId": "13294165"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13294165/worklog/415574",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "rymurr commented on pull request #6782: ARROW-8230 [WIP][Java] Move Netty memory manager into a separate module\nURL: https://github.com/apache/arrow/pull/6782\n \n \n   \n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-04-03T16:27:38.333+0000",
                    "updated": "2020-04-03T16:27:38.333+0000",
                    "started": "2020-04-03T16:27:38.332+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "415574",
                    "issueId": "13294165"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13294165/worklog/416344",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "liyafan82 commented on issue #6782: ARROW-8230 [WIP][Java] Move Netty memory manager into a separate module\nURL: https://github.com/apache/arrow/pull/6782#issuecomment-609561085\n \n \n   > Hey @liyafan82 thanks for the comments. I agree, I don't think we should create the `arrow-memory-base` module. I think the simplest (maybe not the best) way to choose between allocators is via reflection. Something more elegant than, but along the same lines as how I instantiated different allocators in the `RootAllocator` in this PR.\r\n   > \r\n   > In the meantime I will close this PR and start one to minimize Netty usage in `arrow-memory` and we can revisit when we feel the `@Deprecated` methods have been around long enough,\r\n   \r\n   Sure, reflection is a feasible solution. Please go ahead with minimizing netty usage.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-04-06T04:38:56.208+0000",
                    "updated": "2020-04-06T04:38:56.208+0000",
                    "started": "2020-04-06T04:38:56.208+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "416344",
                    "issueId": "13294165"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13294165/worklog/441202",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "rymurr opened a new pull request #7347:\nURL: https://github.com/apache/arrow/pull/7347\n\n\n   This commit moves all Netty specific calls into a few classes.\r\n   This is the precursor to splitting the netty and unsafe allocatorsout to their own modules\r\n   \r\n   \n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-06-04T09:49:01.188+0000",
                    "updated": "2020-06-04T09:49:01.188+0000",
                    "started": "2020-06-04T09:49:01.188+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "441202",
                    "issueId": "13294165"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13294165/worklog/441209",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "github-actions[bot] commented on pull request #7347:\nURL: https://github.com/apache/arrow/pull/7347#issuecomment-638752095\n\n\n   https://issues.apache.org/jira/browse/ARROW-8230\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-06-04T10:03:32.314+0000",
                    "updated": "2020-06-04T10:03:32.314+0000",
                    "started": "2020-06-04T10:03:32.314+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "441209",
                    "issueId": "13294165"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13294165/worklog/443101",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "liyafan82 commented on a change in pull request #7347:\nURL: https://github.com/apache/arrow/pull/7347#discussion_r437116925\n\n\n\n##########\nFile path: java/memory/src/main/java/io/netty/buffer/NettyArrowBuf.java\n##########\n@@ -404,7 +407,7 @@ protected int _getUnsignedMediumLE(int index) {\n     this.chk(index, 3);\n     long addr = this.addr(index);\n     return PlatformDependent.getByte(addr) & 255 |\n-            (Short.reverseBytes(PlatformDependent.getShort(addr + 1L)) & '\\uffff') << 8;\n+        (Short.reverseBytes(PlatformDependent.getShort(addr + 1L)) & '\\uffff') << 8;\n\nReview comment:\n       (Maybe it is irrelavant to this PR). Here a single call to PlatformDependent.getShort should be sufficient?\r\n   It seems reverseBytes and then shift left amounts to directly getting the lower bits?\n\n##########\nFile path: java/memory/src/main/java/org/apache/arrow/memory/util/MemoryUtil.java\n##########\n@@ -78,6 +77,55 @@ public Object run() {\n       Field addressField = java.nio.Buffer.class.getDeclaredField(\"address\");\n       addressField.setAccessible(true);\n       BYTE_BUFFER_ADDRESS_OFFSET = UNSAFE.objectFieldOffset(addressField);\n+\n+      Constructor<?> directBufferConstructor;\n+      long address = -1;\n+      final ByteBuffer direct = ByteBuffer.allocateDirect(1);\n+      try {\n+\n+        final Object maybeDirectBufferConstructor =\n+            AccessController.doPrivileged(new PrivilegedAction<Object>() {\n+              @Override\n+              public Object run() {\n+                try {\n+                  final Constructor<?> constructor =\n+                      direct.getClass().getDeclaredConstructor(long.class, int.class);\n+                  constructor.setAccessible(true);\n+                  return constructor;\n+                } catch (NoSuchMethodException e) {\n+                  return e;\n+                } catch (SecurityException e) {\n+                  return e;\n+                }\n+              }\n+            });\n+\n+        if (maybeDirectBufferConstructor instanceof Constructor<?>) {\n+          address = UNSAFE.allocateMemory(1);\n+          // try to use the constructor now\n+          try {\n+            ((Constructor<?>) maybeDirectBufferConstructor).newInstance(address, 1);\n+            directBufferConstructor = (Constructor<?>) maybeDirectBufferConstructor;\n+            logger.debug(\"direct buffer constructor: available\");\n+          } catch (InstantiationException e) {\n+            directBufferConstructor = null;\n\nReview comment:\n       we should print some logs here?\n\n##########\nFile path: java/memory/src/main/java/org/apache/arrow/memory/util/MemoryUtil.java\n##########\n@@ -78,6 +77,55 @@ public Object run() {\n       Field addressField = java.nio.Buffer.class.getDeclaredField(\"address\");\n       addressField.setAccessible(true);\n       BYTE_BUFFER_ADDRESS_OFFSET = UNSAFE.objectFieldOffset(addressField);\n+\n+      Constructor<?> directBufferConstructor;\n+      long address = -1;\n+      final ByteBuffer direct = ByteBuffer.allocateDirect(1);\n+      try {\n+\n+        final Object maybeDirectBufferConstructor =\n+            AccessController.doPrivileged(new PrivilegedAction<Object>() {\n+              @Override\n+              public Object run() {\n+                try {\n+                  final Constructor<?> constructor =\n+                      direct.getClass().getDeclaredConstructor(long.class, int.class);\n+                  constructor.setAccessible(true);\n+                  return constructor;\n+                } catch (NoSuchMethodException e) {\n+                  return e;\n\nReview comment:\n       It would be helpful for problem diagnostic, if we could print some logs here?\n\n##########\nFile path: java/memory/src/main/java/org/apache/arrow/memory/rounding/DefaultRoundingPolicy.java\n##########\n@@ -31,19 +28,18 @@\n \n   public final long chunkSize;\n \n+  /**\n+   * default chunk size from Netty.\n+   */\n+  private static final long DEFAULT_CHUNK_SIZE = 16777216L;\n\nReview comment:\n       Is it possible that this value changes from Netty code base?\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-06-09T16:32:01.932+0000",
                    "updated": "2020-06-09T16:32:01.932+0000",
                    "started": "2020-06-09T16:32:01.932+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "443101",
                    "issueId": "13294165"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13294165/worklog/446545",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "rymurr commented on a change in pull request #7347:\nURL: https://github.com/apache/arrow/pull/7347#discussion_r440896771\n\n\n\n##########\nFile path: java/memory/src/main/java/org/apache/arrow/memory/util/MemoryUtil.java\n##########\n@@ -78,6 +77,55 @@ public Object run() {\n       Field addressField = java.nio.Buffer.class.getDeclaredField(\"address\");\n       addressField.setAccessible(true);\n       BYTE_BUFFER_ADDRESS_OFFSET = UNSAFE.objectFieldOffset(addressField);\n+\n+      Constructor<?> directBufferConstructor;\n+      long address = -1;\n+      final ByteBuffer direct = ByteBuffer.allocateDirect(1);\n+      try {\n+\n+        final Object maybeDirectBufferConstructor =\n+            AccessController.doPrivileged(new PrivilegedAction<Object>() {\n+              @Override\n+              public Object run() {\n+                try {\n+                  final Constructor<?> constructor =\n+                      direct.getClass().getDeclaredConstructor(long.class, int.class);\n+                  constructor.setAccessible(true);\n+                  return constructor;\n+                } catch (NoSuchMethodException e) {\n+                  return e;\n+                } catch (SecurityException e) {\n+                  return e;\n+                }\n+              }\n+            });\n+\n+        if (maybeDirectBufferConstructor instanceof Constructor<?>) {\n+          address = UNSAFE.allocateMemory(1);\n+          // try to use the constructor now\n+          try {\n+            ((Constructor<?>) maybeDirectBufferConstructor).newInstance(address, 1);\n+            directBufferConstructor = (Constructor<?>) maybeDirectBufferConstructor;\n+            logger.debug(\"direct buffer constructor: available\");\n+          } catch (InstantiationException e) {\n+            directBufferConstructor = null;\n\nReview comment:\n       sure, any suggestions where? Note: This is taken from PlatformDependent0 in netty (logs and all).\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-06-16T14:31:07.949+0000",
                    "updated": "2020-06-16T14:31:07.949+0000",
                    "started": "2020-06-16T14:31:07.949+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "446545",
                    "issueId": "13294165"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13294165/worklog/446547",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "rymurr commented on a change in pull request #7347:\nURL: https://github.com/apache/arrow/pull/7347#discussion_r440899130\n\n\n\n##########\nFile path: java/memory/src/main/java/org/apache/arrow/memory/util/MemoryUtil.java\n##########\n@@ -78,6 +77,55 @@ public Object run() {\n       Field addressField = java.nio.Buffer.class.getDeclaredField(\"address\");\n       addressField.setAccessible(true);\n       BYTE_BUFFER_ADDRESS_OFFSET = UNSAFE.objectFieldOffset(addressField);\n+\n+      Constructor<?> directBufferConstructor;\n+      long address = -1;\n+      final ByteBuffer direct = ByteBuffer.allocateDirect(1);\n+      try {\n+\n+        final Object maybeDirectBufferConstructor =\n+            AccessController.doPrivileged(new PrivilegedAction<Object>() {\n+              @Override\n+              public Object run() {\n+                try {\n+                  final Constructor<?> constructor =\n+                      direct.getClass().getDeclaredConstructor(long.class, int.class);\n+                  constructor.setAccessible(true);\n+                  return constructor;\n+                } catch (NoSuchMethodException e) {\n+                  return e;\n\nReview comment:\n       done! thanks!\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-06-16T14:34:08.712+0000",
                    "updated": "2020-06-16T14:34:08.712+0000",
                    "started": "2020-06-16T14:34:08.711+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "446547",
                    "issueId": "13294165"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13294165/worklog/446553",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "rymurr commented on a change in pull request #7347:\nURL: https://github.com/apache/arrow/pull/7347#discussion_r440906089\n\n\n\n##########\nFile path: java/memory/src/main/java/org/apache/arrow/memory/rounding/DefaultRoundingPolicy.java\n##########\n@@ -31,19 +28,18 @@\n \n   public final long chunkSize;\n \n+  /**\n+   * default chunk size from Netty.\n+   */\n+  private static final long DEFAULT_CHUNK_SIZE = 16777216L;\n\nReview comment:\n       It is possible that it changes. It was a bit involved to copy the Netty code to get chunk size into the arrow codebase so I left it at a likely value for x86-64 machines. I am happy to replace this with the Netty value or have chunk size taken from the actual allocator directly if you thikn that is better than a single static value?\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-06-16T14:42:56.774+0000",
                    "updated": "2020-06-16T14:42:56.774+0000",
                    "started": "2020-06-16T14:42:56.773+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "446553",
                    "issueId": "13294165"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13294165/worklog/446554",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "rymurr commented on a change in pull request #7347:\nURL: https://github.com/apache/arrow/pull/7347#discussion_r440907579\n\n\n\n##########\nFile path: java/memory/src/main/java/io/netty/buffer/NettyArrowBuf.java\n##########\n@@ -404,7 +407,7 @@ protected int _getUnsignedMediumLE(int index) {\n     this.chk(index, 3);\n     long addr = this.addr(index);\n     return PlatformDependent.getByte(addr) & 255 |\n-            (Short.reverseBytes(PlatformDependent.getShort(addr + 1L)) & '\\uffff') << 8;\n+        (Short.reverseBytes(PlatformDependent.getShort(addr + 1L)) & '\\uffff') << 8;\n\nReview comment:\n       I have added https://issues.apache.org/jira/browse/ARROW-9148 to address this\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-06-16T14:44:59.838+0000",
                    "updated": "2020-06-16T14:44:59.838+0000",
                    "started": "2020-06-16T14:44:59.838+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "446554",
                    "issueId": "13294165"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13294165/worklog/447604",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "liyafan82 commented on a change in pull request #7347:\nURL: https://github.com/apache/arrow/pull/7347#discussion_r441929412\n\n\n\n##########\nFile path: java/memory/src/main/java/io/netty/buffer/NettyArrowBuf.java\n##########\n@@ -404,7 +407,7 @@ protected int _getUnsignedMediumLE(int index) {\n     this.chk(index, 3);\n     long addr = this.addr(index);\n     return PlatformDependent.getByte(addr) & 255 |\n-            (Short.reverseBytes(PlatformDependent.getShort(addr + 1L)) & '\\uffff') << 8;\n+        (Short.reverseBytes(PlatformDependent.getShort(addr + 1L)) & '\\uffff') << 8;\n\nReview comment:\n       Thanks for your effort. \n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-06-18T02:13:33.463+0000",
                    "updated": "2020-06-18T02:13:33.463+0000",
                    "started": "2020-06-18T02:13:33.463+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "447604",
                    "issueId": "13294165"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13294165/worklog/447605",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "liyafan82 commented on a change in pull request #7347:\nURL: https://github.com/apache/arrow/pull/7347#discussion_r441930746\n\n\n\n##########\nFile path: java/memory/src/main/java/org/apache/arrow/memory/util/MemoryUtil.java\n##########\n@@ -78,6 +77,55 @@ public Object run() {\n       Field addressField = java.nio.Buffer.class.getDeclaredField(\"address\");\n       addressField.setAccessible(true);\n       BYTE_BUFFER_ADDRESS_OFFSET = UNSAFE.objectFieldOffset(addressField);\n+\n+      Constructor<?> directBufferConstructor;\n+      long address = -1;\n+      final ByteBuffer direct = ByteBuffer.allocateDirect(1);\n+      try {\n+\n+        final Object maybeDirectBufferConstructor =\n+            AccessController.doPrivileged(new PrivilegedAction<Object>() {\n+              @Override\n+              public Object run() {\n+                try {\n+                  final Constructor<?> constructor =\n+                      direct.getClass().getDeclaredConstructor(long.class, int.class);\n+                  constructor.setAccessible(true);\n+                  return constructor;\n+                } catch (NoSuchMethodException e) {\n+                  return e;\n+                } catch (SecurityException e) {\n+                  return e;\n+                }\n+              }\n+            });\n+\n+        if (maybeDirectBufferConstructor instanceof Constructor<?>) {\n+          address = UNSAFE.allocateMemory(1);\n+          // try to use the constructor now\n+          try {\n+            ((Constructor<?>) maybeDirectBufferConstructor).newInstance(address, 1);\n+            directBufferConstructor = (Constructor<?>) maybeDirectBufferConstructor;\n+            logger.debug(\"direct buffer constructor: available\");\n+          } catch (InstantiationException e) {\n+            directBufferConstructor = null;\n\nReview comment:\n       looks good. thanks.\r\n   since the exception handling logic is identical, does it make the code conciser to use the following semantics?\r\n   ```\r\n   catch (InstantiationException | IllegalAccessException | InvocationTargetException e) {\r\n     ...\r\n   }\r\n   ```\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-06-18T02:19:14.661+0000",
                    "updated": "2020-06-18T02:19:14.661+0000",
                    "started": "2020-06-18T02:19:14.661+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "447605",
                    "issueId": "13294165"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13294165/worklog/447608",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "liyafan82 commented on a change in pull request #7347:\nURL: https://github.com/apache/arrow/pull/7347#discussion_r441931433\n\n\n\n##########\nFile path: java/memory/src/main/java/org/apache/arrow/memory/rounding/DefaultRoundingPolicy.java\n##########\n@@ -31,19 +28,18 @@\n \n   public final long chunkSize;\n \n+  /**\n+   * default chunk size from Netty.\n+   */\n+  private static final long DEFAULT_CHUNK_SIZE = 16777216L;\n\nReview comment:\n       Maybe it is beneficial to add above discussion to the JavaDoc\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-06-18T02:22:23.747+0000",
                    "updated": "2020-06-18T02:22:23.747+0000",
                    "started": "2020-06-18T02:22:23.746+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "447608",
                    "issueId": "13294165"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13294165/worklog/450848",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "rymurr commented on a change in pull request #7347:\nURL: https://github.com/apache/arrow/pull/7347#discussion_r445373657\n\n\n\n##########\nFile path: java/memory/src/main/java/org/apache/arrow/memory/util/MemoryUtil.java\n##########\n@@ -78,6 +77,55 @@ public Object run() {\n       Field addressField = java.nio.Buffer.class.getDeclaredField(\"address\");\n       addressField.setAccessible(true);\n       BYTE_BUFFER_ADDRESS_OFFSET = UNSAFE.objectFieldOffset(addressField);\n+\n+      Constructor<?> directBufferConstructor;\n+      long address = -1;\n+      final ByteBuffer direct = ByteBuffer.allocateDirect(1);\n+      try {\n+\n+        final Object maybeDirectBufferConstructor =\n+            AccessController.doPrivileged(new PrivilegedAction<Object>() {\n+              @Override\n+              public Object run() {\n+                try {\n+                  final Constructor<?> constructor =\n+                      direct.getClass().getDeclaredConstructor(long.class, int.class);\n+                  constructor.setAccessible(true);\n+                  return constructor;\n+                } catch (NoSuchMethodException e) {\n+                  return e;\n+                } catch (SecurityException e) {\n+                  return e;\n+                }\n+              }\n+            });\n+\n+        if (maybeDirectBufferConstructor instanceof Constructor<?>) {\n+          address = UNSAFE.allocateMemory(1);\n+          // try to use the constructor now\n+          try {\n+            ((Constructor<?>) maybeDirectBufferConstructor).newInstance(address, 1);\n+            directBufferConstructor = (Constructor<?>) maybeDirectBufferConstructor;\n+            logger.debug(\"direct buffer constructor: available\");\n+          } catch (InstantiationException e) {\n+            directBufferConstructor = null;\n\nReview comment:\n       done\n\n##########\nFile path: java/memory/src/main/java/org/apache/arrow/memory/rounding/DefaultRoundingPolicy.java\n##########\n@@ -31,19 +28,18 @@\n \n   public final long chunkSize;\n \n+  /**\n+   * default chunk size from Netty.\n+   */\n+  private static final long DEFAULT_CHUNK_SIZE = 16777216L;\n\nReview comment:\n       done\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-06-25T07:54:45.006+0000",
                    "updated": "2020-06-25T07:54:45.006+0000",
                    "started": "2020-06-25T07:54:45.006+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "450848",
                    "issueId": "13294165"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13294165/worklog/450861",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "rymurr commented on a change in pull request #7347:\nURL: https://github.com/apache/arrow/pull/7347#discussion_r445373746\n\n\n\n##########\nFile path: java/memory/src/main/java/org/apache/arrow/memory/rounding/DefaultRoundingPolicy.java\n##########\n@@ -31,19 +28,18 @@\n \n   public final long chunkSize;\n \n+  /**\n+   * default chunk size from Netty.\n+   */\n+  private static final long DEFAULT_CHUNK_SIZE = 16777216L;\n\nReview comment:\n       I ended up taking the implementation from Netty rather than the static value here. I thought it was a bit safer.\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-06-25T08:30:25.162+0000",
                    "updated": "2020-06-25T08:30:25.162+0000",
                    "started": "2020-06-25T08:30:25.162+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "450861",
                    "issueId": "13294165"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
            "id": "4",
            "description": "An improvement or enhancement to an existing feature or task.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
            "name": "Improvement",
            "subtask": false,
            "avatarId": 21140
        },
        "timespent": 25800,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@364173a2[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@961b3b0[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@1b7961dd[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@1f01bd31[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@527968af[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@32578e1d[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@62706603[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@708aa749[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@692f95e7[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@6706d9b9[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@627eb24[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@2332b446[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 25800,
        "customfield_12312520": null,
        "customfield_12312521": "Thu Jul 02 02:09:22 UTC 2020",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2020-07-02T02:09:22.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-8230/watchers",
            "watchCount": 2,
            "isWatching": false
        },
        "created": "2020-03-26T10:17:10.000+0000",
        "updated": "2020-07-14T12:21:21.000+0000",
        "timeoriginalestimate": null,
        "description": "Move Netty memory manager into a separate module such that the basic allocator does not depend on it.",
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "7h 10m",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 25800
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[Java] Move Netty memory manager into a separate module",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13294165/comment/17067574",
                    "id": "17067574",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=fan_li_ya",
                        "name": "fan_li_ya",
                        "key": "fan_li_ya",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
                        },
                        "displayName": "Liya Fan",
                        "active": true,
                        "timeZone": "Asia/Shanghai"
                    },
                    "body": "[~rymurr] Please feel free to assign it to yourself, if you are interested",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=fan_li_ya",
                        "name": "fan_li_ya",
                        "key": "fan_li_ya",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
                        },
                        "displayName": "Liya Fan",
                        "active": true,
                        "timeZone": "Asia/Shanghai"
                    },
                    "created": "2020-03-26T10:19:20.293+0000",
                    "updated": "2020-03-26T10:19:20.293+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13294165/comment/17070919",
                    "id": "17070919",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=rymurr",
                        "name": "rymurr",
                        "key": "rymurr",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Ryan Murray",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "Hey [~fan_li_ya],\r\n\r\nI have had a look and I *think* I understand what the ticket wants, I thought it would be useful to double check before going into implementation.\r\n\r\nThe end goal of ARROW-4526 is to remove all the dependencies on Netty from arrow-memory. Correct?\r\n\r\nThis particular ticket is meant to create a new module (eg arrow-memory-netty) and remove all netty dependencies from arrow-memory. arrow-memory-netty will depend on arrow-memory but not the other way around. Does this sound roughly correct?\r\n\r\nAt first glance there are still a few references to netty in arrow-memory, including: ArrowBuf, BaseAllocator, BufferAllocator, BufferLedger as well as some usages of PlatformDependent in the Hasher classes. Some of which have already been marked Deprecated. Is the goal of this ticket to reconcile all of these references? I assume that given the deprecated flag was added by you only recently we only want to mark some things as deprecated rather than outright remove them",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=rymurr",
                        "name": "rymurr",
                        "key": "rymurr",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Ryan Murray",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2020-03-30T12:04:14.709+0000",
                    "updated": "2020-03-30T12:57:28.396+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13294165/comment/17071018",
                    "id": "17071018",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=fan_li_ya",
                        "name": "fan_li_ya",
                        "key": "fan_li_ya",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
                        },
                        "displayName": "Liya Fan",
                        "active": true,
                        "timeZone": "Asia/Shanghai"
                    },
                    "body": "[~rymurr] \r\nI think my understanding is close to yours. \r\n\r\nHowever, it may not be feasible to remove the netty dependency completely in a single PR, as some refactoring work is required before we are ready to remove it completely.\r\n\r\nSo I think in this issue, we need to create the new module, move some classes there, mark some as deprecated, and leave the rest as future work. ",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=fan_li_ya",
                        "name": "fan_li_ya",
                        "key": "fan_li_ya",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
                        },
                        "displayName": "Liya Fan",
                        "active": true,
                        "timeZone": "Asia/Shanghai"
                    },
                    "created": "2020-03-30T14:16:10.777+0000",
                    "updated": "2020-03-30T14:16:10.777+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13294165/comment/17071146",
                    "id": "17071146",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=rymurr",
                        "name": "rymurr",
                        "key": "rymurr",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Ryan Murray",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "Thanks [~fan_li_ya]!\r\n\r\nI am thinking the same. Will post a patch soon. I think we will end up with a circular dependency between arrow-memory and arrow-memory-netty which I don't like but its temporary. Can discuss further once I post the PR",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=rymurr",
                        "name": "rymurr",
                        "key": "rymurr",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Ryan Murray",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2020-03-30T16:59:38.588+0000",
                    "updated": "2020-03-30T16:59:38.588+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13294165/comment/17071382",
                    "id": "17071382",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=fan_li_ya",
                        "name": "fan_li_ya",
                        "key": "fan_li_ya",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
                        },
                        "displayName": "Liya Fan",
                        "active": true,
                        "timeZone": "Asia/Shanghai"
                    },
                    "body": "[~rymurr] Sounds good to me. Please go ahead with your PR. ",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=fan_li_ya",
                        "name": "fan_li_ya",
                        "key": "fan_li_ya",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
                        },
                        "displayName": "Liya Fan",
                        "active": true,
                        "timeZone": "Asia/Shanghai"
                    },
                    "created": "2020-03-31T01:45:09.328+0000",
                    "updated": "2020-03-31T01:45:09.328+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13294165/comment/17149775",
                    "id": "17149775",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=fan_li_ya",
                        "name": "fan_li_ya",
                        "key": "fan_li_ya",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
                        },
                        "displayName": "Liya Fan",
                        "active": true,
                        "timeZone": "Asia/Shanghai"
                    },
                    "body": "Fixed by https://issues.apache.org/jira/browse/ARROW-9236",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=fan_li_ya",
                        "name": "fan_li_ya",
                        "key": "fan_li_ya",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
                        },
                        "displayName": "Liya Fan",
                        "active": true,
                        "timeZone": "Asia/Shanghai"
                    },
                    "created": "2020-07-02T02:09:22.150+0000",
                    "updated": "2020-07-02T02:09:22.150+0000"
                }
            ],
            "maxResults": 6,
            "total": 6,
            "startAt": 0
        },
        "customfield_12311820": "0|z0cxkw:",
        "customfield_12314139": null
    }
}