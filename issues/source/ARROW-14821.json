{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13413611",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413611",
    "key": "ARROW-14821",
    "fields": {
        "parent": {
            "id": "13450423",
            "key": "ARROW-16841",
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13450423",
            "fields": {
                "summary": "[R] Additional Lubridate Capabilities",
                "status": {
                    "self": "https://issues.apache.org/jira/rest/api/2/status/1",
                    "description": "The issue is open and ready for the assignee to start work on it.",
                    "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/open.png",
                    "name": "Open",
                    "id": "1",
                    "statusCategory": {
                        "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2",
                        "id": 2,
                        "key": "new",
                        "colorName": "blue-gray",
                        "name": "To Do"
                    }
                },
                "priority": {
                    "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
                    "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
                    "name": "Major",
                    "id": "3"
                },
                "issuetype": {
                    "self": "https://issues.apache.org/jira/rest/api/2/issuetype/5",
                    "id": "5",
                    "description": "General wishlist item.",
                    "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
                    "name": "Wish",
                    "subtask": false,
                    "avatarId": 21140
                }
            }
        },
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12351550",
                "id": "12351550",
                "name": "9.0.0",
                "archived": false,
                "released": true,
                "releaseDate": "2022-08-03"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "name": "Major",
            "id": "3"
        },
        "labels": [
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [
            {
                "id": "12633739",
                "self": "https://issues.apache.org/jira/rest/api/2/issueLink/12633739",
                "type": {
                    "id": "10032",
                    "name": "Blocker",
                    "inward": "is blocked by",
                    "outward": "blocks",
                    "self": "https://issues.apache.org/jira/rest/api/2/issueLinkType/10032"
                },
                "inwardIssue": {
                    "id": "13428407",
                    "key": "ARROW-15680",
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13428407",
                    "fields": {
                        "summary": "[C++] Temporal floor/ceil/round  should accept week_starts_monday when rounding to multiple of week",
                        "status": {
                            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
                            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
                            "name": "Resolved",
                            "id": "5",
                            "statusCategory": {
                                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                                "id": 3,
                                "key": "done",
                                "colorName": "green",
                                "name": "Done"
                            }
                        },
                        "priority": {
                            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
                            "name": "Major",
                            "id": "3"
                        },
                        "issuetype": {
                            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
                            "id": "4",
                            "description": "An improvement or enhancement to an existing feature or task.",
                            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
                            "name": "Improvement",
                            "subtask": false,
                            "avatarId": 21140
                        }
                    }
                }
            },
            {
                "id": "12643448",
                "self": "https://issues.apache.org/jira/rest/api/2/issueLink/12643448",
                "type": {
                    "id": "12310000",
                    "name": "Duplicate",
                    "inward": "is duplicated by",
                    "outward": "duplicates",
                    "self": "https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"
                },
                "inwardIssue": {
                    "id": "13441540",
                    "key": "ARROW-16316",
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13441540",
                    "fields": {
                        "summary": "[R] How to round the timestamps in a mutate statement?",
                        "status": {
                            "self": "https://issues.apache.org/jira/rest/api/2/status/6",
                            "description": "The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/closed.png",
                            "name": "Closed",
                            "id": "6",
                            "statusCategory": {
                                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                                "id": 3,
                                "key": "done",
                                "colorName": "green",
                                "name": "Done"
                            }
                        },
                        "priority": {
                            "self": "https://issues.apache.org/jira/rest/api/2/priority/4",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
                            "name": "Minor",
                            "id": "4"
                        },
                        "issuetype": {
                            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/5",
                            "id": "5",
                            "description": "General wishlist item.",
                            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
                            "name": "Wish",
                            "subtask": false,
                            "avatarId": 21140
                        }
                    }
                }
            },
            {
                "id": "12638640",
                "self": "https://issues.apache.org/jira/rest/api/2/issueLink/12638640",
                "type": {
                    "id": "10030",
                    "name": "Reference",
                    "inward": "is related to",
                    "outward": "relates to",
                    "self": "https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"
                },
                "outwardIssue": {
                    "id": "13441540",
                    "key": "ARROW-16316",
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13441540",
                    "fields": {
                        "summary": "[R] How to round the timestamps in a mutate statement?",
                        "status": {
                            "self": "https://issues.apache.org/jira/rest/api/2/status/6",
                            "description": "The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/closed.png",
                            "name": "Closed",
                            "id": "6",
                            "statusCategory": {
                                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                                "id": 3,
                                "key": "done",
                                "colorName": "green",
                                "name": "Done"
                            }
                        },
                        "priority": {
                            "self": "https://issues.apache.org/jira/rest/api/2/priority/4",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
                            "name": "Minor",
                            "id": "4"
                        },
                        "issuetype": {
                            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/5",
                            "id": "5",
                            "description": "General wishlist item.",
                            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
                            "name": "Wish",
                            "subtask": false,
                            "avatarId": 21140
                        }
                    }
                }
            },
            {
                "id": "12627215",
                "self": "https://issues.apache.org/jira/rest/api/2/issueLink/12627215",
                "type": {
                    "id": "12310040",
                    "name": "Required",
                    "inward": "is required by",
                    "outward": "requires",
                    "self": "https://issues.apache.org/jira/rest/api/2/issueLinkType/12310040"
                },
                "outwardIssue": {
                    "id": "13413613",
                    "key": "ARROW-14822",
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413613",
                    "fields": {
                        "summary": "[C++] Implement floor/ceil/round for temporal objects",
                        "status": {
                            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
                            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
                            "name": "Resolved",
                            "id": "5",
                            "statusCategory": {
                                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                                "id": 3,
                                "key": "done",
                                "colorName": "green",
                                "name": "Done"
                            }
                        },
                        "priority": {
                            "self": "https://issues.apache.org/jira/rest/api/2/priority/4",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
                            "name": "Minor",
                            "id": "4"
                        },
                        "issuetype": {
                            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/2",
                            "id": "2",
                            "description": "A new feature of the product, which has yet to be developed.",
                            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21141&avatarType=issuetype",
                            "name": "New Feature",
                            "subtask": false,
                            "avatarId": 21141
                        }
                    }
                }
            },
            {
                "id": "12627216",
                "self": "https://issues.apache.org/jira/rest/api/2/issueLink/12627216",
                "type": {
                    "id": "12310040",
                    "name": "Required",
                    "inward": "is required by",
                    "outward": "requires",
                    "self": "https://issues.apache.org/jira/rest/api/2/issueLinkType/12310040"
                },
                "inwardIssue": {
                    "id": "13413608",
                    "key": "ARROW-14819",
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413608",
                    "fields": {
                        "summary": "[R] Binding for lubridate::qday",
                        "status": {
                            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
                            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
                            "name": "Resolved",
                            "id": "5",
                            "statusCategory": {
                                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                                "id": 3,
                                "key": "done",
                                "colorName": "green",
                                "name": "Done"
                            }
                        },
                        "priority": {
                            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
                            "name": "Major",
                            "id": "3"
                        },
                        "issuetype": {
                            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/7",
                            "id": "7",
                            "description": "The sub-task of the issue",
                            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21146&avatarType=issuetype",
                            "name": "Sub-task",
                            "subtask": true,
                            "avatarId": 21146
                        }
                    }
                }
            }
        ],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=djnavarro",
            "name": "djnavarro",
            "key": "JIRAUSER283377",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=JIRAUSER283377&avatarId=49058",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=JIRAUSER283377&avatarId=49058",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=JIRAUSER283377&avatarId=49058",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=JIRAUSER283377&avatarId=49058"
            },
            "displayName": "Danielle Navarro",
            "active": true,
            "timeZone": "Australia/Sydney"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12333008",
                "id": "12333008",
                "name": "R"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=thisisnic",
            "name": "thisisnic",
            "key": "thisisnic",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=39937",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=39937",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=39937",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=39937"
            },
            "displayName": "Nicola Crane",
            "active": true,
            "timeZone": "Africa/Casablanca"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=thisisnic",
            "name": "thisisnic",
            "key": "thisisnic",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=39937",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=39937",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=39937",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=39937"
            },
            "displayName": "Nicola Crane",
            "active": true,
            "timeZone": "Africa/Casablanca"
        },
        "aggregateprogress": {
            "progress": 132600,
            "total": 132600,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 132600,
            "total": 132600,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-14821/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 221,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413611/worklog/709669",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "github-actions[bot] commented on pull request #12154:\nURL: https://github.com/apache/arrow/pull/12154#issuecomment-1013957694\n\n\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-01-16T21:40:47.786+0000",
                    "updated": "2022-01-16T21:40:47.786+0000",
                    "started": "2022-01-16T21:40:47.786+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "709669",
                    "issueId": "13413611"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413611/worklog/709672",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "djnavarro commented on a change in pull request #12154:\nURL: https://github.com/apache/arrow/pull/12154#discussion_r785513228\n\n\n\n##########\nFile path: r/tests/testthat/test-dplyr-funcs-datetime.R\n##########\n@@ -616,3 +616,292 @@ test_that(\"extract yday from date\", {\n     test_df\n   )\n })\n+\n+test_that(\"round/floor/ceiling on datetime (to nearest second)\", {\n+  compare_dplyr_binding(\n+    .input %>%\n+      mutate(\n+        out_1 = round_date(datetime),\n+        out_2 = floor_date(datetime),\n+        out_3 = ceiling_date(datetime),\n+      ) %>%\n+      collect(),\n+    test_df\n+  )\n+})\n+\n+test_that(\"period unit abbreviation\", {\n+  compare_dplyr_binding(\n+    .input %>%\n+      mutate(\n+        out_1 = round_date(datetime, \"minute\"),\n+        out_2 = round_date(datetime, \"minutes\"),\n+        out_3 = round_date(datetime, \"mins\"),\n+      ) %>%\n+      collect(),\n+    test_df\n+  )\n+})\n+\n+test_that(\"period unit extracts integer multiples\", {\n+  compare_dplyr_binding(\n+    .input %>%\n+      mutate(\n+        out_1 = round_date(datetime, \"1 minute\"),\n+        out_2 = round_date(datetime, \"2 minutes\"),\n+        out_3 = round_date(datetime, \"10 minutes\")\n+      ) %>%\n+      collect(),\n+    test_df\n+  )\n+})\n+\n+# lubridate errors when 60 sec/60 min/24 hour thresholds exceeded.\n+# this test checks that arrow does too.\n+test_that(\"period unit maxima are enforced\", {\n+\n+  expect_error(suppressWarnings( # <- hack\n+    test_df %>%\n+      arrow_table() %>%\n+      mutate(out = round_date(datetime, \"61 seconds\")) %>%\n+      collect()\n+  ))\n\nReview comment:\n       Nice! I hadn't realised `call_binding()` existed \ud83e\udd26\ud83c\udffb\u200d\u2640\ufe0f \ud83d\ude01 \n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-01-16T22:08:35.845+0000",
                    "updated": "2022-01-16T22:08:35.845+0000",
                    "started": "2022-01-16T22:08:35.845+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "709672",
                    "issueId": "13413611"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413611/worklog/709674",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "thisisnic commented on a change in pull request #12154:\nURL: https://github.com/apache/arrow/pull/12154#discussion_r785521592\n\n\n\n##########\nFile path: r/R/util.R\n##########\n@@ -209,3 +209,74 @@ handle_csv_read_error <- function(e, schema) {\n \n   abort(e)\n }\n+\n+\n+parse_period_unit <- function(x) {\n+\n+  # the regexp matches against fractional units, but per lubridate\n+  # supports integer multiples of a known unit only\n+  match_info <- regexpr(\n+    pattern = \" *(?<multiple>[0-9.,]+)? *(?<unit>[^ \\t\\n]+)\",\n+    text = x[[1]],\n+    perl = TRUE\n+  )\n+\n+  capture_start <- attr(match_info, \"capture.start\")\n+  capture_length <- attr(match_info, \"capture.length\")\n+  capture_end <- capture_start + capture_length - 1L\n+\n+  str_unit <- substr(x, capture_start[[2]], capture_end[[2]])\n+  str_multiple <- substr(x, capture_start[[1]], capture_end[[1]])\n+\n+  known_units <- c(\"nanosecond\", \"microsecond\", \"millisecond\", \"second\",\n+                   \"minute\", \"hour\", \"day\", \"week\", \"month\", \"quarter\", \"year\")\n+\n+  # match the period unit\n+  str_unit_start <- substr(str_unit, 1, 3)\n+  unit <- as.integer(pmatch(str_unit_start, known_units)) - 1L\n+\n+  if(any(is.na(unit))) {\n+    abort(sprintf(\"Unknown unit '%s'\", str_unit))\n+  }\n+\n+  # empty string in multiple interpreted as 1\n+  if(capture_length[[1]] == 0) {\n+    multiple <- 1L\n+\n+  } else {\n+\n+    # special cases: interpret fractions of 1 second as integer\n+    # multiples of nanoseconds, microseconds, or milliseconds\n+    # to mirror lubridate syntax\n+    multiple <- as.numeric(str_multiple)\n+\n+    if(unit == 3L & multiple < 10^-6) {\n+      unit <- 0L\n+      multiple <- 10^9 * multiple\n+    }\n+    if(unit == 3L & multiple < 10^-3) {\n+      unit <- 1L\n+      multiple <- 10^6 * multiple\n+    }\n+    if(unit == 3L & multiple < 1) {\n+      unit <- 2L\n+      multiple <- 10^3 * multiple\n+    }\n+\n+    multiple <- as.integer(multiple)\n+  }\n+\n+  # more special cases: lubridate imposes sensible maximum\n+  # values on the number of seconds, minutes and hours\n+  if(unit == 3L & multiple > 60) {\n+    abort(\"Rounding with second > 60 is not supported\")\n+  }\n\nReview comment:\n       I can see where you are coming from here.  I guess, generally, the aim when implementing the functions for non-standard evaluation code blocks is to (as closely as possible unless there's good reason not to!) replicate the original.  However, there are some rare cases when I've seen us not do that; for example, our mapping to `lubridate::second()` supports nanoseconds as we didn't see the harm in having more precise results, and so the unit test for that binding looks like this: https://github.com/apache/arrow/blob/0c1fd88953585485b772dfd405bbc5b1b5417324/r/tests/testthat/test-dplyr-funcs-datetime.R#L474-L483 \r\n   \r\n   That said, I also can't think of a reason someone else's code would depend on raising an error *but* I'm not confident that that would mean it won't - people have all sorts of unusual workflows.  \r\n   \r\n   There are multiple ways of calling Arrow C++ compute functions from R via the `dplyr`/non-standard evaluation code - either using the bindings to the `lubridate` etc equivalent, or calling the Arrow C++ compute function directly by prefixing the function name with `arrow_` (so in this case it'd be `arrow_round_temporal`; if you've not come across this before, check it out here: https://arrow.apache.org/cookbook/r/manipulating-data---tables.html#use-arrow-functions-in-dplyr-verbs-in-arrow).\r\n   \r\n   So if people use that directly they'd still have access to the full functionality. I'm not sure what to suggest here - would be good to get input from @jonkeane or @nealrichardson \n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-01-16T22:29:41.601+0000",
                    "updated": "2022-01-16T22:29:41.601+0000",
                    "started": "2022-01-16T22:29:41.601+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "709674",
                    "issueId": "13413611"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413611/worklog/709675",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "djnavarro commented on a change in pull request #12154:\nURL: https://github.com/apache/arrow/pull/12154#discussion_r785525181\n\n\n\n##########\nFile path: r/R/util.R\n##########\n@@ -209,3 +209,74 @@ handle_csv_read_error <- function(e, schema) {\n \n   abort(e)\n }\n+\n+\n+parse_period_unit <- function(x) {\n+\n+  # the regexp matches against fractional units, but per lubridate\n+  # supports integer multiples of a known unit only\n+  match_info <- regexpr(\n+    pattern = \" *(?<multiple>[0-9.,]+)? *(?<unit>[^ \\t\\n]+)\",\n+    text = x[[1]],\n+    perl = TRUE\n+  )\n+\n+  capture_start <- attr(match_info, \"capture.start\")\n+  capture_length <- attr(match_info, \"capture.length\")\n+  capture_end <- capture_start + capture_length - 1L\n+\n+  str_unit <- substr(x, capture_start[[2]], capture_end[[2]])\n+  str_multiple <- substr(x, capture_start[[1]], capture_end[[1]])\n+\n+  known_units <- c(\"nanosecond\", \"microsecond\", \"millisecond\", \"second\",\n+                   \"minute\", \"hour\", \"day\", \"week\", \"month\", \"quarter\", \"year\")\n+\n+  # match the period unit\n+  str_unit_start <- substr(str_unit, 1, 3)\n+  unit <- as.integer(pmatch(str_unit_start, known_units)) - 1L\n+\n+  if(any(is.na(unit))) {\n+    abort(sprintf(\"Unknown unit '%s'\", str_unit))\n+  }\n+\n+  # empty string in multiple interpreted as 1\n+  if(capture_length[[1]] == 0) {\n+    multiple <- 1L\n+\n+  } else {\n+\n+    # special cases: interpret fractions of 1 second as integer\n+    # multiples of nanoseconds, microseconds, or milliseconds\n+    # to mirror lubridate syntax\n+    multiple <- as.numeric(str_multiple)\n+\n+    if(unit == 3L & multiple < 10^-6) {\n+      unit <- 0L\n+      multiple <- 10^9 * multiple\n+    }\n+    if(unit == 3L & multiple < 10^-3) {\n+      unit <- 1L\n+      multiple <- 10^6 * multiple\n+    }\n+    if(unit == 3L & multiple < 1) {\n+      unit <- 2L\n+      multiple <- 10^3 * multiple\n+    }\n+\n+    multiple <- as.integer(multiple)\n+  }\n+\n+  # more special cases: lubridate imposes sensible maximum\n+  # values on the number of seconds, minutes and hours\n+  if(unit == 3L & multiple > 60) {\n+    abort(\"Rounding with second > 60 is not supported\")\n+  }\n\nReview comment:\n       That's a really good point. Maybe erring on the side of caution and mirroring lubridate as closely as possible would be best? It's going to come up again as an issue once I try to sort out the issue associated with the `change_on_boundary` argument, actually\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-01-16T22:39:25.248+0000",
                    "updated": "2022-01-16T22:39:25.248+0000",
                    "started": "2022-01-16T22:39:25.248+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "709675",
                    "issueId": "13413611"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413611/worklog/709678",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "thisisnic commented on a change in pull request #12154:\nURL: https://github.com/apache/arrow/pull/12154#discussion_r785535430\n\n\n\n##########\nFile path: r/R/util.R\n##########\n@@ -209,3 +209,74 @@ handle_csv_read_error <- function(e, schema) {\n \n   abort(e)\n }\n+\n+\n+parse_period_unit <- function(x) {\n+\n+  # the regexp matches against fractional units, but per lubridate\n+  # supports integer multiples of a known unit only\n+  match_info <- regexpr(\n+    pattern = \" *(?<multiple>[0-9.,]+)? *(?<unit>[^ \\t\\n]+)\",\n+    text = x[[1]],\n+    perl = TRUE\n+  )\n+\n+  capture_start <- attr(match_info, \"capture.start\")\n+  capture_length <- attr(match_info, \"capture.length\")\n+  capture_end <- capture_start + capture_length - 1L\n+\n+  str_unit <- substr(x, capture_start[[2]], capture_end[[2]])\n+  str_multiple <- substr(x, capture_start[[1]], capture_end[[1]])\n+\n+  known_units <- c(\"nanosecond\", \"microsecond\", \"millisecond\", \"second\",\n+                   \"minute\", \"hour\", \"day\", \"week\", \"month\", \"quarter\", \"year\")\n+\n+  # match the period unit\n+  str_unit_start <- substr(str_unit, 1, 3)\n+  unit <- as.integer(pmatch(str_unit_start, known_units)) - 1L\n+\n+  if(any(is.na(unit))) {\n+    abort(sprintf(\"Unknown unit '%s'\", str_unit))\n+  }\n+\n+  # empty string in multiple interpreted as 1\n+  if(capture_length[[1]] == 0) {\n+    multiple <- 1L\n+\n+  } else {\n+\n+    # special cases: interpret fractions of 1 second as integer\n+    # multiples of nanoseconds, microseconds, or milliseconds\n+    # to mirror lubridate syntax\n+    multiple <- as.numeric(str_multiple)\n+\n+    if(unit == 3L & multiple < 10^-6) {\n+      unit <- 0L\n+      multiple <- 10^9 * multiple\n+    }\n+    if(unit == 3L & multiple < 10^-3) {\n+      unit <- 1L\n+      multiple <- 10^6 * multiple\n+    }\n+    if(unit == 3L & multiple < 1) {\n+      unit <- 2L\n+      multiple <- 10^3 * multiple\n+    }\n+\n+    multiple <- as.integer(multiple)\n+  }\n+\n+  # more special cases: lubridate imposes sensible maximum\n+  # values on the number of seconds, minutes and hours\n+  if(unit == 3L & multiple > 60) {\n+    abort(\"Rounding with second > 60 is not supported\")\n+  }\n\nReview comment:\n       Personally I'd err on the side of caution but I can see the argument for it not mattering - let's see what the more experienced R devs say!\r\n   \r\n   Just to check; what's the issue with `change_on_boundary`?  If it's the fact that it's not supported in the C++ yet, it's fine to open a C++ ticket for that to be implemented, raise an error in the R code saying that parameter is not yet supported, and open an R ticket for implementing it later once the C++ functionality is in place.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-01-16T23:04:42.175+0000",
                    "updated": "2022-01-16T23:04:42.175+0000",
                    "started": "2022-01-16T23:04:42.174+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "709678",
                    "issueId": "13413611"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413611/worklog/709681",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "rok commented on a change in pull request #12154:\nURL: https://github.com/apache/arrow/pull/12154#discussion_r785547111\n\n\n\n##########\nFile path: r/R/util.R\n##########\n@@ -209,3 +209,74 @@ handle_csv_read_error <- function(e, schema) {\n \n   abort(e)\n }\n+\n+\n+parse_period_unit <- function(x) {\n+\n+  # the regexp matches against fractional units, but per lubridate\n+  # supports integer multiples of a known unit only\n+  match_info <- regexpr(\n+    pattern = \" *(?<multiple>[0-9.,]+)? *(?<unit>[^ \\t\\n]+)\",\n+    text = x[[1]],\n+    perl = TRUE\n+  )\n+\n+  capture_start <- attr(match_info, \"capture.start\")\n+  capture_length <- attr(match_info, \"capture.length\")\n+  capture_end <- capture_start + capture_length - 1L\n+\n+  str_unit <- substr(x, capture_start[[2]], capture_end[[2]])\n+  str_multiple <- substr(x, capture_start[[1]], capture_end[[1]])\n+\n+  known_units <- c(\"nanosecond\", \"microsecond\", \"millisecond\", \"second\",\n+                   \"minute\", \"hour\", \"day\", \"week\", \"month\", \"quarter\", \"year\")\n+\n+  # match the period unit\n+  str_unit_start <- substr(str_unit, 1, 3)\n+  unit <- as.integer(pmatch(str_unit_start, known_units)) - 1L\n+\n+  if(any(is.na(unit))) {\n+    abort(sprintf(\"Unknown unit '%s'\", str_unit))\n+  }\n+\n+  # empty string in multiple interpreted as 1\n+  if(capture_length[[1]] == 0) {\n+    multiple <- 1L\n+\n+  } else {\n+\n+    # special cases: interpret fractions of 1 second as integer\n+    # multiples of nanoseconds, microseconds, or milliseconds\n+    # to mirror lubridate syntax\n+    multiple <- as.numeric(str_multiple)\n+\n+    if(unit == 3L & multiple < 10^-6) {\n+      unit <- 0L\n+      multiple <- 10^9 * multiple\n+    }\n+    if(unit == 3L & multiple < 10^-3) {\n+      unit <- 1L\n+      multiple <- 10^6 * multiple\n+    }\n+    if(unit == 3L & multiple < 1) {\n+      unit <- 2L\n+      multiple <- 10^3 * multiple\n+    }\n+\n+    multiple <- as.integer(multiple)\n+  }\n+\n+  # more special cases: lubridate imposes sensible maximum\n+  # values on the number of seconds, minutes and hours\n+  if(unit == 3L & multiple > 60) {\n+    abort(\"Rounding with second > 60 is not supported\")\n+  }\n\nReview comment:\n       [Asking over at lubridate](https://github.com/tidyverse/lubridate/issues/661)\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-01-16T23:31:35.528+0000",
                    "updated": "2022-01-16T23:31:35.528+0000",
                    "started": "2022-01-16T23:31:35.528+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "709681",
                    "issueId": "13413611"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413611/worklog/709682",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "djnavarro commented on a change in pull request #12154:\nURL: https://github.com/apache/arrow/pull/12154#discussion_r785547887\n\n\n\n##########\nFile path: r/R/util.R\n##########\n@@ -209,3 +209,74 @@ handle_csv_read_error <- function(e, schema) {\n \n   abort(e)\n }\n+\n+\n+parse_period_unit <- function(x) {\n+\n+  # the regexp matches against fractional units, but per lubridate\n+  # supports integer multiples of a known unit only\n+  match_info <- regexpr(\n+    pattern = \" *(?<multiple>[0-9.,]+)? *(?<unit>[^ \\t\\n]+)\",\n+    text = x[[1]],\n+    perl = TRUE\n+  )\n+\n+  capture_start <- attr(match_info, \"capture.start\")\n+  capture_length <- attr(match_info, \"capture.length\")\n+  capture_end <- capture_start + capture_length - 1L\n+\n+  str_unit <- substr(x, capture_start[[2]], capture_end[[2]])\n+  str_multiple <- substr(x, capture_start[[1]], capture_end[[1]])\n+\n+  known_units <- c(\"nanosecond\", \"microsecond\", \"millisecond\", \"second\",\n+                   \"minute\", \"hour\", \"day\", \"week\", \"month\", \"quarter\", \"year\")\n+\n+  # match the period unit\n+  str_unit_start <- substr(str_unit, 1, 3)\n+  unit <- as.integer(pmatch(str_unit_start, known_units)) - 1L\n+\n+  if(any(is.na(unit))) {\n+    abort(sprintf(\"Unknown unit '%s'\", str_unit))\n+  }\n+\n+  # empty string in multiple interpreted as 1\n+  if(capture_length[[1]] == 0) {\n+    multiple <- 1L\n+\n+  } else {\n+\n+    # special cases: interpret fractions of 1 second as integer\n+    # multiples of nanoseconds, microseconds, or milliseconds\n+    # to mirror lubridate syntax\n+    multiple <- as.numeric(str_multiple)\n+\n+    if(unit == 3L & multiple < 10^-6) {\n+      unit <- 0L\n+      multiple <- 10^9 * multiple\n+    }\n+    if(unit == 3L & multiple < 10^-3) {\n+      unit <- 1L\n+      multiple <- 10^6 * multiple\n+    }\n+    if(unit == 3L & multiple < 1) {\n+      unit <- 2L\n+      multiple <- 10^3 * multiple\n+    }\n+\n+    multiple <- as.integer(multiple)\n+  }\n+\n+  # more special cases: lubridate imposes sensible maximum\n+  # values on the number of seconds, minutes and hours\n+  if(unit == 3L & multiple > 60) {\n+    abort(\"Rounding with second > 60 is not supported\")\n+  }\n\nReview comment:\n       @thisisnic: So yeah... I haven't finished my dive into the lubridate code on the `change_on_boundary` issue, but (I think!) the TL;DR is that it's an edge case for how `ceiling_date()` handles time points that sit at the start of a day. Should the ceiling of `2022-01-17 00:00:00` be `2022-01-18 00:00` or `2022-01-17 00:00`? Conceptually, \"January 17\" is an interval of time that starts at 00:00 and ends at 23:59, so a strict interpretation suggests that all time points within that interval should ceiling to midnight of January 18. That's what lubridate currently does, but...\r\n   \r\n   Prior to lubridate 1.6.0 `ceiling_date()` took a different approach, and AFAICT the C++ `round_temporal()` function does the same thing. If we were to ignore the strict interpretation of ISO 8601, we can think of \"midnight moments\" as analogous to integer values spaced along the real line, and round accordingly. Under this approach, which I think is more intuitive but does violate ISO 8601, we don't ceiling an integer up to the next integer, and so `2022-01-17 00:00` stays `2022-01-17 00:00` because it's already an \"integer valued date\".\r\n   \r\n   The downside to violating ISO 8601 -- in addition to the obvious problem that it violates ISO 8601 -- is that it means we're no longer in agreement with lubridate. The downside to adhering to it is that you get counterintuitive result that taking a ceiling of a Date object always returns the next day:\r\n   \r\n   ```r\r\n   ceiling_date(ymd(\"2022-01-17\"), \"day\") # returns 2022-01-18\r\n   ```\r\n   \r\n   Long story short, the `change_on_boundary` argument exists so that lubridate can revert to its older behaviour. Given that the C++ `round_temporal()` only matches the older lubridate behaviour (again, assuming I've understood the code properly), I'll need to write a shim that supports the `change_on_boundary` anyway. If I don't we're not mirroring lubridate.\r\n   \r\n   I think the right approach is probably the same one @rok suggested for `week_start`. Short term the solution is to write a shim to support it on the R side, and open a JIRA ticket for the C++ library\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-01-16T23:33:38.602+0000",
                    "updated": "2022-01-16T23:33:38.602+0000",
                    "started": "2022-01-16T23:33:38.602+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "709682",
                    "issueId": "13413611"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413611/worklog/709713",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "djnavarro commented on pull request #12154:\nURL: https://github.com/apache/arrow/pull/12154#issuecomment-1014161114\n\n\n   I think I've taken this as far as I can right now? I had been hoping to write shims to support the `week_start` and `change_on_boundary` arguments but I'm not sure if that's possible right now. My original thought was to try something like this:\r\n   \r\n   ```r\r\n   week_start_shim <- function(function_name, x, week_start, opts) {\r\n     offset <- Expression$create(Scalar$create(as.difftime(week_start - 4, units = \"days\")))\r\n     x <- Expression$create(\"add\", x, offset)\r\n     x <- Expression$create(function_name, x, options = opts)\r\n     return(Expression$create(\"subtract\", x, offset)\r\n   } \r\n   ```\r\n   \r\n   I can't get anything like this to work because (as far as I can tell) we don't currently have the ability to add or subtract durations from date/time in Arrow. I imagine I'm missing something obvious here! \r\n   \r\n   \n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-01-17T05:42:54.562+0000",
                    "updated": "2022-01-17T05:42:54.562+0000",
                    "started": "2022-01-17T05:42:54.561+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "709713",
                    "issueId": "13413611"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413611/worklog/709714",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "djnavarro edited a comment on pull request #12154:\nURL: https://github.com/apache/arrow/pull/12154#issuecomment-1014161114\n\n\n   I think I've taken this as far as I can right now? I had been hoping to write shims to support the `week_start` and `change_on_boundary` arguments but I'm not sure if that's possible right now. My original thought was to try something like this:\r\n   \r\n   ```r\r\n   week_start_shim <- function(function_name, x, week_start, opts) {\r\n     offset <- Expression$create(Scalar$create(as.difftime(week_start - 4, units = \"days\")))\r\n     x <- Expression$create(\"add\", x, offset)\r\n     x <- Expression$create(function_name, x, options = opts)\r\n     return(Expression$create(\"subtract\", x, offset))\r\n   } \r\n   ```\r\n   \r\n   I can't get anything like this to work because (as far as I can tell) we don't currently have the ability to add or subtract durations from date/time in Arrow. I imagine I'm missing something obvious here! \r\n   \r\n   \n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-01-17T05:43:17.245+0000",
                    "updated": "2022-01-17T05:43:17.245+0000",
                    "started": "2022-01-17T05:43:17.245+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "709714",
                    "issueId": "13413611"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413611/worklog/709715",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "djnavarro edited a comment on pull request #12154:\nURL: https://github.com/apache/arrow/pull/12154#issuecomment-1014161114\n\n\n   I think I've taken this as far as I can right now? I had been hoping to write shims to support the `week_start` and `change_on_boundary` arguments but I'm not sure if that's possible right now. My original thought was to try something like this:\r\n   \r\n   ```r\r\n   week_start_shim <- function(function_name, x, week_start, opts) {\r\n     offset <- Expression$create(Scalar$create(as.difftime(week_start - 4, units = \"days\")))\r\n     x <- Expression$create(\"add\", x, offset)\r\n     x <- Expression$create(function_name, x, options = opts)\r\n     return(Expression$create(\"subtract\", x, offset))\r\n   } \r\n   ```\r\n   \r\n   I can't get anything like this to work because (as far as I can tell) we don't currently have the ability to add or subtract durations from date/time data in Arrow. I imagine I'm missing something obvious here! \r\n   \r\n   \n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-01-17T05:43:50.069+0000",
                    "updated": "2022-01-17T05:43:50.069+0000",
                    "started": "2022-01-17T05:43:50.069+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "709715",
                    "issueId": "13413611"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413611/worklog/709855",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "thisisnic commented on a change in pull request #12154:\nURL: https://github.com/apache/arrow/pull/12154#discussion_r785872219\n\n\n\n##########\nFile path: r/R/util.R\n##########\n@@ -209,3 +209,74 @@ handle_csv_read_error <- function(e, schema) {\n \n   abort(e)\n }\n+\n+\n+parse_period_unit <- function(x) {\n+\n+  # the regexp matches against fractional units, but per lubridate\n+  # supports integer multiples of a known unit only\n+  match_info <- regexpr(\n+    pattern = \" *(?<multiple>[0-9.,]+)? *(?<unit>[^ \\t\\n]+)\",\n+    text = x[[1]],\n+    perl = TRUE\n+  )\n+\n+  capture_start <- attr(match_info, \"capture.start\")\n+  capture_length <- attr(match_info, \"capture.length\")\n+  capture_end <- capture_start + capture_length - 1L\n+\n+  str_unit <- substr(x, capture_start[[2]], capture_end[[2]])\n+  str_multiple <- substr(x, capture_start[[1]], capture_end[[1]])\n+\n+  known_units <- c(\"nanosecond\", \"microsecond\", \"millisecond\", \"second\",\n+                   \"minute\", \"hour\", \"day\", \"week\", \"month\", \"quarter\", \"year\")\n+\n+  # match the period unit\n+  str_unit_start <- substr(str_unit, 1, 3)\n+  unit <- as.integer(pmatch(str_unit_start, known_units)) - 1L\n+\n+  if(any(is.na(unit))) {\n+    abort(sprintf(\"Unknown unit '%s'\", str_unit))\n+  }\n+\n+  # empty string in multiple interpreted as 1\n+  if(capture_length[[1]] == 0) {\n+    multiple <- 1L\n+\n+  } else {\n+\n+    # special cases: interpret fractions of 1 second as integer\n+    # multiples of nanoseconds, microseconds, or milliseconds\n+    # to mirror lubridate syntax\n+    multiple <- as.numeric(str_multiple)\n+\n+    if(unit == 3L & multiple < 10^-6) {\n+      unit <- 0L\n+      multiple <- 10^9 * multiple\n+    }\n+    if(unit == 3L & multiple < 10^-3) {\n+      unit <- 1L\n+      multiple <- 10^6 * multiple\n+    }\n+    if(unit == 3L & multiple < 1) {\n+      unit <- 2L\n+      multiple <- 10^3 * multiple\n+    }\n+\n+    multiple <- as.integer(multiple)\n+  }\n+\n+  # more special cases: lubridate imposes sensible maximum\n+  # values on the number of seconds, minutes and hours\n+  if(unit == 3L & multiple > 60) {\n+    abort(\"Rounding with second > 60 is not supported\")\n+  }\n\nReview comment:\n       Sounds good!\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-01-17T11:16:58.223+0000",
                    "updated": "2022-01-17T11:16:58.223+0000",
                    "started": "2022-01-17T11:16:58.223+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "709855",
                    "issueId": "13413611"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413611/worklog/709884",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "rok commented on pull request #12154:\nURL: https://github.com/apache/arrow/pull/12154#issuecomment-1014440937\n\n\n   > I think I've taken this as far as I can right now? I had been hoping to write shims to support the `week_start` and `change_on_boundary` arguments but I'm not sure if that's possible right now. My original thought was to try something like this:\r\n   > \r\n   > ```r\r\n   > week_start_shim <- function(function_name, x, week_start, opts) {\r\n   >   offset <- Expression$create(Scalar$create(as.difftime(week_start - 4, units = \"days\")))\r\n   >   x <- Expression$create(\"add\", x, offset)\r\n   >   x <- Expression$create(function_name, x, options = opts)\r\n   >   return(Expression$create(\"subtract\", x, offset))\r\n   > } \r\n   > ```\r\n   > \r\n   > I can't get anything like this to work because (as far as I can tell) we don't currently have the ability to add or subtract durations from date/time data in Arrow. I imagine I'm missing something obvious here!\r\n   \r\n   Would it make sense for the shims to be in R?\r\n   For add/subtract in arrow see [ARROW-11090](https://issues.apache.org/jira/browse/ARROW-11090).\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-01-17T11:54:58.761+0000",
                    "updated": "2022-01-17T11:54:58.761+0000",
                    "started": "2022-01-17T11:54:58.760+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "709884",
                    "issueId": "13413611"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413611/worklog/710136",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "thisisnic commented on pull request #12154:\nURL: https://github.com/apache/arrow/pull/12154#issuecomment-1014860401\n\n\n   > I think I've taken this as far as I can right now? I had been hoping to write shims to support the `week_start` and `change_on_boundary` arguments but I'm not sure if that's possible right now. My original thought was to try something like this:\r\n   > \r\n   > ```r\r\n   > week_start_shim <- function(function_name, x, week_start, opts) {\r\n   >   offset <- Expression$create(Scalar$create(as.difftime(week_start - 4, units = \"days\")))\r\n   >   x <- Expression$create(\"add\", x, offset)\r\n   >   x <- Expression$create(function_name, x, options = opts)\r\n   >   return(Expression$create(\"subtract\", x, offset))\r\n   > } \r\n   > ```\r\n   > \r\n   > I can't get anything like this to work because (as far as I can tell) we don't currently have the ability to add or subtract durations from date/time data in Arrow. I imagine I'm missing something obvious here!\r\n   \r\n   If the functionality isn't there, I'd be tempted to put this PR aside for the moment - we're aiming to have a larger number of the `lubridate` and `stringr` functions implemented for the 8.0.0 release (i.e. ~mid-April) anyway, so there's no rush with this and there's no need to spend ages working around the missing functionality (unless you particularly want to!) when it's totally fine to wait for it to be implemented in C++ anyway.  Sorry though, I can imagine that's a little frustrating on the first ticket you've picked up!\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-01-17T20:18:09.219+0000",
                    "updated": "2022-01-17T20:18:09.219+0000",
                    "started": "2022-01-17T20:18:09.219+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "710136",
                    "issueId": "13413611"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413611/worklog/710166",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "djnavarro commented on pull request #12154:\nURL: https://github.com/apache/arrow/pull/12154#issuecomment-1014916566\n\n\n   My thinking at this point is that (if this is consistent with the general etiquette here!) I'd like to (1) work out why the build is failing two checks and fix those, (2) merge the passing version, (3) open tickets for the missing functionality, one for the C++ side and one for the R side (and assign myself to the R one \ud83d\ude01 ).\r\n   \r\n   My reasons for suggesting this are: \r\n   \r\n   - The current version does work for most use cases. The `week_start` issue only applies when the rounding unit is \"week\". As it stands we can round to \"7 days\" or indeed any time unit except \"week\" and have it mirror lubridate almost exactly. I've modified the PR so that we abandon ship if the user specifies \"week\" as the rounding unit, and falls back on lubridate. \r\n   - It gives me an excuse to do a deeper dive on timezones before merging the current version: if I'm going to write more lubridate bindings later this is something I'm going to need to know anyway! \r\n   - Once it's merged it would be clearer what modifications are needed to supply the missing functionality, so I can write the JIRA tickets a bit more precisely\r\n   - A little selfishly... I presume that once I am no longer a first-time contributor I won't need to constantly bug maintainers to enable the GH actions workflows\r\n   - Slightly less selfishly, it would be mildly convenient for writing blog content about the process. I think there's value in highlighting that a PR can still be useful when surfaces issues pertaining to missing functionality and in doing so immediately triggers new issues? \r\n   \r\n   Possible reasons not to:\r\n   \r\n   - As flagged above I'm not sure of the etiquette here. If it's not considered appropriate I'm totally happy to leave this hanging!\r\n   - The `change_on_boundary` issue does mean that the Arrow binding for `ceiling_date()` introduces a minor discrepancy. We're currently mirroring a slightly older lubridate default. I'm not sure that's currently a big issue, but it's something we'd definitely want to revisit before this appears in a release\r\n   \r\n   I'm happy to follow advice here. I'm totally find with whatever approach more experienced folks think is best! \ud83d\ude42 \n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-01-17T22:06:08.225+0000",
                    "updated": "2022-01-17T22:06:08.225+0000",
                    "started": "2022-01-17T22:06:08.225+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "710166",
                    "issueId": "13413611"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413611/worklog/710167",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "djnavarro edited a comment on pull request #12154:\nURL: https://github.com/apache/arrow/pull/12154#issuecomment-1014916566\n\n\n   My thinking at this point is that (if this is consistent with the general etiquette here!) I'd like to (1) work out why the build is failing two checks and fix those, (2) merge the passing version, (3) open tickets for the missing functionality, one for the C++ side and one for the R side (and assign myself to the R one \ud83d\ude01 ).\r\n   \r\n   My reasons for suggesting this are: \r\n   \r\n   - The current version does work for most use cases. The `week_start` issue only applies when the rounding unit is \"week\". As it stands we can round to \"7 days\" or indeed any time unit except \"week\" and have it mirror lubridate almost exactly. I've modified the PR so that we abandon ship if the user specifies \"week\" as the rounding unit, and falls back on lubridate. \r\n   - It gives me an excuse to do a deeper dive on timezones before merging the current version: if I'm going to write more lubridate bindings later this is something I'm going to need to know anyway! \r\n   - Once it's merged it would be clearer what modifications are needed to supply the missing functionality, so I can write the JIRA tickets a bit more precisely\r\n   - A little selfishly... I presume that once I am no longer a first-time contributor I won't need to constantly bug maintainers to enable the GH actions workflows\r\n   - Slightly less selfishly, it would be mildly convenient for writing blog content about the process. I think there's value in highlighting that a PR can still be useful when surfaces issues pertaining to missing functionality and in doing so immediately triggers new issues? \r\n   \r\n   Possible reasons not to:\r\n   \r\n   - As flagged above I'm not sure of the etiquette here. If it's not considered appropriate I'm totally happy to leave this hanging!\r\n   - The `change_on_boundary` issue does mean that the Arrow binding for `ceiling_date()` introduces a minor discrepancy. We're currently mirroring a slightly older lubridate default. I'm not sure that's currently a big issue, but it's something we'd definitely want to revisit before this appears in a release\r\n   \r\n   I'm happy to follow advice here. I'm totally fine with whatever approach more experienced folks think is best! \ud83d\ude42 \n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-01-17T22:08:21.075+0000",
                    "updated": "2022-01-17T22:08:21.075+0000",
                    "started": "2022-01-17T22:08:21.075+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "710167",
                    "issueId": "13413611"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413611/worklog/710184",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "thisisnic commented on pull request #12154:\nURL: https://github.com/apache/arrow/pull/12154#issuecomment-1014947633\n\n\n   In case it helps, you could try searching for \"ARROW-13168\" in the test files as there are some tests we skip on Windows because of [ARROW-13168](https://issues.apache.org/jira/browse/ARROW-13168) - not sure if this is related or not though.\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-01-17T23:17:12.028+0000",
                    "updated": "2022-01-17T23:17:12.028+0000",
                    "started": "2022-01-17T23:17:12.027+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "710184",
                    "issueId": "13413611"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413611/worklog/710185",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "thisisnic edited a comment on pull request #12154:\nURL: https://github.com/apache/arrow/pull/12154#issuecomment-1014947633\n\n\n   In case it helps, you could try searching for \"ARROW-13168\" in the test files as there are some tests we skip on Windows because of that issue - not sure if this is related or not though.\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-01-17T23:17:34.683+0000",
                    "updated": "2022-01-17T23:17:34.683+0000",
                    "started": "2022-01-17T23:17:34.683+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "710185",
                    "issueId": "13413611"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413611/worklog/710186",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "thisisnic edited a comment on pull request #12154:\nURL: https://github.com/apache/arrow/pull/12154#issuecomment-1014947633\n\n\n   In case it helps, you could try searching for \"ARROW-13168\" in the test files as there are some tests we skip on Windows because of the issue mentioned in that ticket - not sure if this is related or not though.\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-01-17T23:17:47.291+0000",
                    "updated": "2022-01-17T23:17:47.291+0000",
                    "started": "2022-01-17T23:17:47.290+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "710186",
                    "issueId": "13413611"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413611/worklog/710523",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jonkeane commented on a change in pull request #12154:\nURL: https://github.com/apache/arrow/pull/12154#discussion_r786790257\n\n\n\n##########\nFile path: r/R/util.R\n##########\n@@ -209,3 +209,74 @@ handle_csv_read_error <- function(e, schema) {\n \n   abort(e)\n }\n+\n+\n+parse_period_unit <- function(x) {\n+\n+  # the regexp matches against fractional units, but per lubridate\n+  # supports integer multiples of a known unit only\n+  match_info <- regexpr(\n+    pattern = \" *(?<multiple>[0-9.,]+)? *(?<unit>[^ \\t\\n]+)\",\n+    text = x[[1]],\n+    perl = TRUE\n+  )\n+\n+  capture_start <- attr(match_info, \"capture.start\")\n+  capture_length <- attr(match_info, \"capture.length\")\n+  capture_end <- capture_start + capture_length - 1L\n+\n+  str_unit <- substr(x, capture_start[[2]], capture_end[[2]])\n+  str_multiple <- substr(x, capture_start[[1]], capture_end[[1]])\n+\n+  known_units <- c(\"nanosecond\", \"microsecond\", \"millisecond\", \"second\",\n+                   \"minute\", \"hour\", \"day\", \"week\", \"month\", \"quarter\", \"year\")\n+\n+  # match the period unit\n+  str_unit_start <- substr(str_unit, 1, 3)\n+  unit <- as.integer(pmatch(str_unit_start, known_units)) - 1L\n+\n+  if(any(is.na(unit))) {\n+    abort(sprintf(\"Unknown unit '%s'\", str_unit))\n+  }\n+\n+  # empty string in multiple interpreted as 1\n+  if(capture_length[[1]] == 0) {\n+    multiple <- 1L\n+\n+  } else {\n+\n+    # special cases: interpret fractions of 1 second as integer\n+    # multiples of nanoseconds, microseconds, or milliseconds\n+    # to mirror lubridate syntax\n+    multiple <- as.numeric(str_multiple)\n+\n+    if(unit == 3L & multiple < 10^-6) {\n+      unit <- 0L\n+      multiple <- 10^9 * multiple\n+    }\n+    if(unit == 3L & multiple < 10^-3) {\n+      unit <- 1L\n+      multiple <- 10^6 * multiple\n+    }\n+    if(unit == 3L & multiple < 1) {\n+      unit <- 2L\n+      multiple <- 10^3 * multiple\n+    }\n+\n+    multiple <- as.integer(multiple)\n+  }\n+\n+  # more special cases: lubridate imposes sensible maximum\n+  # values on the number of seconds, minutes and hours\n+  if(unit == 3L & multiple > 60) {\n+    abort(\"Rounding with second > 60 is not supported\")\n+  }\n\nReview comment:\n       What y'all have already said is great, and totally agree with this being an edge case for if extending just a bit is fine or if we should error in the same way.\r\n   \r\n   How easy/hard would it be to construct the `arrow_round_temporal()` call if someone did want to do that?\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-01-18T14:05:40.701+0000",
                    "updated": "2022-01-18T14:05:40.701+0000",
                    "started": "2022-01-18T14:05:40.701+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "710523",
                    "issueId": "13413611"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413611/worklog/710537",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jonkeane commented on a change in pull request #12154:\nURL: https://github.com/apache/arrow/pull/12154#discussion_r786804593\n\n\n\n##########\nFile path: r/tests/testthat/test-dplyr-funcs-datetime.R\n##########\n@@ -616,3 +616,292 @@ test_that(\"extract yday from date\", {\n     test_df\n   )\n })\n+\n+test_that(\"round/floor/ceiling on datetime (to nearest second)\", {\n+  compare_dplyr_binding(\n+    .input %>%\n+      mutate(\n+        out_1 = round_date(datetime),\n+        out_2 = floor_date(datetime),\n+        out_3 = ceiling_date(datetime),\n+      ) %>%\n+      collect(),\n+    test_df\n+  )\n+})\n+\n+test_that(\"period unit abbreviation\", {\n+  compare_dplyr_binding(\n+    .input %>%\n+      mutate(\n+        out_1 = round_date(datetime, \"minute\"),\n+        out_2 = round_date(datetime, \"minutes\"),\n+        out_3 = round_date(datetime, \"mins\"),\n+      ) %>%\n+      collect(),\n+    test_df\n+  )\n+})\n+\n+test_that(\"period unit extracts integer multiples\", {\n+  compare_dplyr_binding(\n+    .input %>%\n+      mutate(\n+        out_1 = round_date(datetime, \"1 minute\"),\n+        out_2 = round_date(datetime, \"2 minutes\"),\n+        out_3 = round_date(datetime, \"10 minutes\")\n+      ) %>%\n+      collect(),\n+    test_df\n+  )\n+})\n+\n+# lubridate errors when 60 sec/60 min/24 hour thresholds exceeded.\n+# this test checks that arrow does too.\n+test_that(\"period unit maxima are enforced\", {\n+\n+  expect_error(suppressWarnings( # <- hack\n+    test_df %>%\n+      arrow_table() %>%\n+      mutate(out = round_date(datetime, \"61 seconds\")) %>%\n+      collect()\n+  ))\n+\n+  expect_error(suppressWarnings(\n+    test_df %>%\n+      arrow_table() %>%\n+      mutate(out = round_date(datetime, \"61 minutes\")) %>%\n+      collect()\n+  ))\n+\n+  expect_error(suppressWarnings(\n+    test_df %>%\n+      arrow_table() %>%\n+      mutate(out = round_date(datetime, \"25 hours\")) %>%\n+      collect()\n+  ))\n+\n+})\n+\n+test_that(\"datetime rounding between 1sec and 1day\", {\n+  compare_dplyr_binding(\n+    .input %>%\n+      mutate(\n+        out_1 = round_date(datetime, \"second\"),\n+        out_2 = round_date(datetime, \"minute\"),\n+        out_3 = round_date(datetime, \"hour\"),\n+        out_4 = round_date(datetime, \"day\")\n+      ) %>%\n+      collect(),\n+    test_df\n+  )\n+})\n+\n+# lubridate doesn't accept millisecond, microsecond or nanosecond descriptors:\n+# instead it supports corresponding fractions of 1 second. these tests added to\n+# that arrow verify that fractional second inputs to arrow mirror lubridate\n+\n+test_that(\"datetime rounding below 1sec\", {\n+\n+  expect_equal(\n+    test_df %>%\n+      arrow_table() %>%\n+      mutate(out = round_date(datetime, \".001 second\")) %>%\n+      collect(),\n+\n+    test_df %>%\n+      arrow_table() %>%\n+      mutate(out = round_date(datetime, \"1 millisecond\")) %>%\n+      collect()\n+  )\n+\n+  expect_equal(\n+    test_df %>%\n+      arrow_table() %>%\n+      mutate(out = round_date(datetime, \".000001 second\")) %>%\n+      collect(),\n+\n+    test_df %>%\n+      arrow_table() %>%\n+      mutate(out = round_date(datetime, \"1 microsecond\")) %>%\n+      collect()\n+  )\n+\n+  expect_equal(\n+    test_df %>%\n+      arrow_table() %>%\n+      mutate(out = round_date(datetime, \".000000001 second\")) %>%\n+      collect(),\n+\n+    test_df %>%\n+      arrow_table() %>%\n+      mutate(out = round_date(datetime, \"1 nanosecond\")) %>%\n+      collect()\n+  )\n+\n+  compare_dplyr_binding(\n+    .input %>%\n+      mutate(\n+        out_1 = round_date(datetime, \".01 second\"),\n+        out_2 = round_date(datetime, \".001 second\"),\n+        out_3 = round_date(datetime, \".00001 second\")\n+      ) %>%\n+      collect(),\n+    test_df\n+  )\n+})\n+\n+\n+# a simplified test case using UTC timezone only\n+test_df_v2 <- tibble::tibble(\n+  datetime = c(as.POSIXct(\"2017-01-01 00:00:11.3456789\", tz = \"UTC\"), NA),\n+  date = c(as.Date(\"2021-09-09\"), NA),\n+  integer = 1:2\n+)\n+\n+test_that(\"datetime round/floor/ceil to month/quarter/year\", {\n+\n+  compare_dplyr_binding(\n+    .input %>%\n+      mutate(\n+        out_1 = round_date(datetime, \"month\"),\n+        out_2 = round_date(datetime, \"quarter\"),\n+        out_3 = round_date(datetime, \"year\"),\n+      ) %>%\n+      collect(),\n+    test_df_v2\n+  )\n+\n+  compare_dplyr_binding(\n+    .input %>%\n+      mutate(\n+        out_1 = floor_date(datetime, \"month\"),\n+        out_2 = floor_date(datetime, \"quarter\"),\n+        out_3 = floor_date(datetime, \"year\"),\n+      ) %>%\n+      collect(),\n+    test_df_v2\n+  )\n+\n+  compare_dplyr_binding(\n+    .input %>%\n+      mutate(\n+        out_1 = ceiling_date(datetime, \"month\"),\n+        out_2 = ceiling_date(datetime, \"quarter\"),\n+        out_3 = ceiling_date(datetime, \"year\"),\n+      ) %>%\n+      collect(),\n+    test_df_v2\n+  )\n+})\n+\n+# NOTE: the hard coding of week_starts = 4 needs to be fixed. round_temporal()\n+# treats 1970-01-01 as the beginning of week 1, i.e., week_starts on a Thursday\n+\n+# NOTE: arrow dplyr binding for ceiling_date() does not force dates up to the\n+# next date. the logic mirrors lubridate prior to v1.6.0 (change_on_boundary = FALSE).\n+# I'm not 100% sold on this implementation, but it's not obviously terrible\n+\n+test_that(\"datetime round/floor/ceil to week\", {\n+\n+  expect_equal(\n+    test_df_v2 %>%\n+      arrow_table() %>%\n+      mutate(out = round_date(datetime, \"1 week\")) %>%\n+      collect(),\n+    test_df_v2 %>%\n+      mutate(out = round_date(datetime, \"1 week\", week_start = 4))\n+  )\n+\n+  expect_equal(\n+    test_df_v2 %>%\n+      arrow_table() %>%\n+      mutate(out = ceiling_date(datetime, \"1 week\")) %>%\n+      collect(),\n+    test_df_v2 %>%\n+      mutate(out = ceiling_date(datetime, \"1 week\", week_start = 4, change_on_boundary = FALSE))\n+  )\n+\n+  expect_equal(\n+    test_df_v2 %>%\n+      arrow_table() %>%\n+      mutate(out = floor_date(datetime, \"1 week\")) %>%\n+      collect(),\n+    test_df_v2 %>%\n+      mutate(out = floor_date(datetime, \"1 week\", week_start = 4))\n+  )\n+})\n+\n+# NOTE: lubridate::round_date() sometimes coerces output from Date to POSIXct.\n+# this is not the default for the round_temporal() function in libarrow, which\n+# is type stable: timestamps stay timestamps, and date32 stays date32. the\n+# current implementation preserves the type stability property. consequently\n+# there are edge cases where the arrow dplyr binding will not precisely mirror\n+# the lubridate original. with that in mind, all tests for date32 rounding coerce\n+# the lubridate equivalent back to Date\n\nReview comment:\n       Yup, I agree here. It might be nice to add a small comment in those test cases about this (so future-us remembers why we have `as.Date()` at the end there\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-01-18T14:21:08.749+0000",
                    "updated": "2022-01-18T14:21:08.749+0000",
                    "started": "2022-01-18T14:21:08.748+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "710537",
                    "issueId": "13413611"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/7",
            "id": "7",
            "description": "The sub-task of the issue",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21146&avatarType=issuetype",
            "name": "Sub-task",
            "subtask": true,
            "avatarId": 21146
        },
        "timespent": 132600,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@3d2948a5[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@68f85227[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@3c6225fa[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@16a1213b[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@3a44f4ed[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@383db8d5[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@155d07dd[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@a6a54b4[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@17943a88[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@42bac3bf[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@3f2447da[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@67336b7e[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 132600,
        "customfield_12312520": null,
        "customfield_12312521": "Thu Jul 21 22:31:07 UTC 2022",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2022-07-21T22:31:07.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-14821/watchers",
            "watchCount": 4,
            "isWatching": true
        },
        "created": "2021-11-24T12:14:51.000+0000",
        "updated": "2022-07-22T23:21:38.000+0000",
        "timeoriginalestimate": null,
        "description": null,
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "36h 50m",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 132600
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[R] Implement bindings for lubridate's floor_date, ceiling_date, and round_date",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413611/comment/17469856",
                    "id": "17469856",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=rokm",
                        "name": "rokm",
                        "key": "rokm",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34044",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34044",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34044",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34044"
                        },
                        "displayName": "Rok Mihevc",
                        "active": true,
                        "timeZone": "Europe/Amsterdam"
                    },
                    "body": "ARROW-14822 is done so this can now be tackled.",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=rokm",
                        "name": "rokm",
                        "key": "rokm",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34044",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34044",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34044",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34044"
                        },
                        "displayName": "Rok Mihevc",
                        "active": true,
                        "timeZone": "Europe/Amsterdam"
                    },
                    "created": "2022-01-06T11:18:49.842+0000",
                    "updated": "2022-01-06T11:18:49.842+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413611/comment/17472422",
                    "id": "17472422",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=djnavarro",
                        "name": "djnavarro",
                        "key": "JIRAUSER283377",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=JIRAUSER283377&avatarId=49058",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=JIRAUSER283377&avatarId=49058",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=JIRAUSER283377&avatarId=49058",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=JIRAUSER283377&avatarId=49058"
                        },
                        "displayName": "Danielle Navarro",
                        "active": true,
                        "timeZone": "Australia/Sydney"
                    },
                    "body": "I'd be happy to make an attempt at this one!",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=djnavarro",
                        "name": "djnavarro",
                        "key": "JIRAUSER283377",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=JIRAUSER283377&avatarId=49058",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=JIRAUSER283377&avatarId=49058",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=JIRAUSER283377&avatarId=49058",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=JIRAUSER283377&avatarId=49058"
                        },
                        "displayName": "Danielle Navarro",
                        "active": true,
                        "timeZone": "Australia/Sydney"
                    },
                    "created": "2022-01-11T02:54:37.850+0000",
                    "updated": "2022-01-11T02:54:47.550+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413611/comment/17472634",
                    "id": "17472634",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=thisisnic",
                        "name": "thisisnic",
                        "key": "thisisnic",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=39937",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=39937",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=39937",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=39937"
                        },
                        "displayName": "Nicola Crane",
                        "active": true,
                        "timeZone": "Africa/Casablanca"
                    },
                    "body": "[~djnavarro] Awesome!\u00a0 Give us a shout if you need anything - also, if you have time (but feel free to skip it as like, it's your first week and I'm sure you're busy!), would you mind taking a look at the new docs we have on writing bindings and giving some feedback on them?\u00a0 They're at a sort of \"here's my first attempt to get something merged to iterate on later\" state, so totally fine if the feedback is \"change everything!\"\r\n\r\nThe nightly build of the docs are here: [https://ursalabs.org/arrow-r-nightly/articles/developers/bindings.html]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=thisisnic",
                        "name": "thisisnic",
                        "key": "thisisnic",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=39937",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=39937",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=39937",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=39937"
                        },
                        "displayName": "Nicola Crane",
                        "active": true,
                        "timeZone": "Africa/Casablanca"
                    },
                    "created": "2022-01-11T10:22:54.117+0000",
                    "updated": "2022-01-11T10:22:54.117+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413611/comment/17472654",
                    "id": "17472654",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=rokm",
                        "name": "rokm",
                        "key": "rokm",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34044",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34044",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34044",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34044"
                        },
                        "displayName": "Rok Mihevc",
                        "active": true,
                        "timeZone": "Europe/Amsterdam"
                    },
                    "body": "[~djnavarro] nice! :)\r\nPlease note c++ currently doesn't accept frequency strings and there's an open discussion about that here: ARROW-15250.",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=rokm",
                        "name": "rokm",
                        "key": "rokm",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34044",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34044",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34044",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34044"
                        },
                        "displayName": "Rok Mihevc",
                        "active": true,
                        "timeZone": "Europe/Amsterdam"
                    },
                    "created": "2022-01-11T10:57:37.000+0000",
                    "updated": "2022-01-11T10:57:37.000+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413611/comment/17472658",
                    "id": "17472658",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=rokm",
                        "name": "rokm",
                        "key": "rokm",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34044",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34044",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34044",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34044"
                        },
                        "displayName": "Rok Mihevc",
                        "active": true,
                        "timeZone": "Europe/Amsterdam"
                    },
                    "body": "Oh and another thing - c++ currently only tests round/ceil/floor for timestamps but it should also work for dates and times. So this ticket could be expanded to do date/time/timestamp or split into more tickets.",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=rokm",
                        "name": "rokm",
                        "key": "rokm",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34044",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34044",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34044",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34044"
                        },
                        "displayName": "Rok Mihevc",
                        "active": true,
                        "timeZone": "Europe/Amsterdam"
                    },
                    "created": "2022-01-11T11:03:41.282+0000",
                    "updated": "2022-01-11T11:03:41.282+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413611/comment/17473211",
                    "id": "17473211",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=djnavarro",
                        "name": "djnavarro",
                        "key": "JIRAUSER283377",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=JIRAUSER283377&avatarId=49058",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=JIRAUSER283377&avatarId=49058",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=JIRAUSER283377&avatarId=49058",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=JIRAUSER283377&avatarId=49058"
                        },
                        "displayName": "Danielle Navarro",
                        "active": true,
                        "timeZone": "Australia/Sydney"
                    },
                    "body": "[~thisisnic] I'll definitely take a look! I may not have any useful feedback until I've managed to orient myself, but I'll keep notes on my process as a first time contributor and see if I notice pain points or think of anything :) \r\n\r\n[~rokm] Thanks!",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=djnavarro",
                        "name": "djnavarro",
                        "key": "JIRAUSER283377",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=JIRAUSER283377&avatarId=49058",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=JIRAUSER283377&avatarId=49058",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=JIRAUSER283377&avatarId=49058",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=JIRAUSER283377&avatarId=49058"
                        },
                        "displayName": "Danielle Navarro",
                        "active": true,
                        "timeZone": "Australia/Sydney"
                    },
                    "created": "2022-01-11T23:49:39.759+0000",
                    "updated": "2022-01-11T23:49:39.759+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413611/comment/17476086",
                    "id": "17476086",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=djnavarro",
                        "name": "djnavarro",
                        "key": "JIRAUSER283377",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=JIRAUSER283377&avatarId=49058",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=JIRAUSER283377&avatarId=49058",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=JIRAUSER283377&avatarId=49058",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=JIRAUSER283377&avatarId=49058"
                        },
                        "displayName": "Danielle Navarro",
                        "active": true,
                        "timeZone": "Australia/Sydney"
                    },
                    "body": "Okay there's a first pass at this here: [https://github.com/apache/arrow/pull/12154]\r\n\r\nIt's still missing some of key functionality from the lubridate equivalents. The two that are bugging me are (1) it doesn't support the week_start argument, so any attempt to round to the nearest week will assume that the week starts on Thursday, and (2) I'm having some difficulties with how timezones are handled, and not sure if the problem is in my code or if the C++ round_temporal function needs something extra?\r\n\r\nIn any case, I think it's at the point where I'd benefit from someone taking a look, in case I am doing something terribly wrong :)",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=djnavarro",
                        "name": "djnavarro",
                        "key": "JIRAUSER283377",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=JIRAUSER283377&avatarId=49058",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=JIRAUSER283377&avatarId=49058",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=JIRAUSER283377&avatarId=49058",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=JIRAUSER283377&avatarId=49058"
                        },
                        "displayName": "Danielle Navarro",
                        "active": true,
                        "timeZone": "Australia/Sydney"
                    },
                    "created": "2022-01-14T11:47:38.947+0000",
                    "updated": "2022-01-14T11:47:38.947+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413611/comment/17499098",
                    "id": "17499098",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=dragosmg",
                        "name": "dragosmg",
                        "key": "dragosmg",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34061",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34061",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34061",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34061"
                        },
                        "displayName": "Drago\u0219 Moldovan-Gr\u00fcnfeld",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "[~rokm] :D has just resolved the C++ issue blocking this. ",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=dragosmg",
                        "name": "dragosmg",
                        "key": "dragosmg",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34061",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34061",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34061",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34061"
                        },
                        "displayName": "Drago\u0219 Moldovan-Gr\u00fcnfeld",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2022-02-28T18:11:23.874+0000",
                    "updated": "2022-02-28T18:11:23.874+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413611/comment/17545466",
                    "id": "17545466",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "body": "Issue resolved by pull request 12657\n[https://github.com/apache/arrow/pull/12657]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "created": "2022-06-02T12:55:49.140+0000",
                    "updated": "2022-06-02T12:55:49.140+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413611/comment/17555090",
                    "id": "17555090",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=toddfarmer",
                        "name": "toddfarmer",
                        "key": "JIRAUSER288796",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=39935",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=39935",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=39935",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=39935"
                        },
                        "displayName": "Todd Farmer",
                        "active": true,
                        "timeZone": "America/Boise"
                    },
                    "body": "Still has open second PR: [https://github.com/apache/arrow/pull/12154] so reopening.",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=toddfarmer",
                        "name": "toddfarmer",
                        "key": "JIRAUSER288796",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=39935",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=39935",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=39935",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=39935"
                        },
                        "displayName": "Todd Farmer",
                        "active": true,
                        "timeZone": "America/Boise"
                    },
                    "created": "2022-06-16T13:42:20.521+0000",
                    "updated": "2022-06-16T13:42:20.521+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413611/comment/17569710",
                    "id": "17569710",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=npr",
                        "name": "npr",
                        "key": "npr",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
                        },
                        "displayName": "Neal Richardson",
                        "active": true,
                        "timeZone": "America/Los_Angeles"
                    },
                    "body": "Issue resolved by pull request 12154\n[https://github.com/apache/arrow/pull/12154]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=npr",
                        "name": "npr",
                        "key": "npr",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
                        },
                        "displayName": "Neal Richardson",
                        "active": true,
                        "timeZone": "America/Los_Angeles"
                    },
                    "created": "2022-07-21T22:31:07.941+0000",
                    "updated": "2022-07-21T22:31:07.941+0000"
                }
            ],
            "maxResults": 11,
            "total": 11,
            "startAt": 0
        },
        "customfield_12311820": "0|z0x1s8:",
        "customfield_12314139": null
    }
}