{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13290804",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13290804",
    "key": "ARROW-8058",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12346687",
                "id": "12346687",
                "description": "",
                "name": "0.17.0",
                "archived": false,
                "released": true,
                "releaseDate": "2020-04-20"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "name": "Major",
            "id": "3"
        },
        "labels": [
            "dataset",
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12340948",
                "id": "12340948",
                "description": "",
                "name": "0.16.0",
                "archived": false,
                "released": true,
                "releaseDate": "2020-02-07"
            }
        ],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [
            {
                "id": "12590704",
                "self": "https://issues.apache.org/jira/rest/api/2/issueLink/12590704",
                "type": {
                    "id": "10030",
                    "name": "Reference",
                    "inward": "is related to",
                    "outward": "relates to",
                    "self": "https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"
                },
                "outwardIssue": {
                    "id": "13281423",
                    "key": "ARROW-7673",
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13281423",
                    "fields": {
                        "summary": "[C++][Dataset] Revisit File discovery failure mode",
                        "status": {
                            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
                            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
                            "name": "Resolved",
                            "id": "5",
                            "statusCategory": {
                                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                                "id": 3,
                                "key": "done",
                                "colorName": "green",
                                "name": "Done"
                            }
                        },
                        "priority": {
                            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
                            "name": "Major",
                            "id": "3"
                        },
                        "issuetype": {
                            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
                            "id": "4",
                            "description": "An improvement or enhancement to an existing feature or task.",
                            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
                            "name": "Improvement",
                            "subtask": false,
                            "avatarId": 21140
                        }
                    }
                }
            }
        ],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=fsaintjacques",
            "name": "fsaintjacques",
            "key": "fsaintjacques",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fsaintjacques&avatarId=37276",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fsaintjacques&avatarId=37276",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fsaintjacques&avatarId=37276",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fsaintjacques&avatarId=37276"
            },
            "displayName": "Francois Saint-Jacques",
            "active": true,
            "timeZone": "America/New_York"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12328935",
                "id": "12328935",
                "name": "C++"
            },
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12328936",
                "id": "12328936",
                "name": "Python"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=bkietz",
            "name": "bkietz",
            "key": "bkietz",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=bkietz&avatarId=37277",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bkietz&avatarId=37277",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bkietz&avatarId=37277",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bkietz&avatarId=37277"
            },
            "displayName": "Ben Kietzman",
            "active": true,
            "timeZone": "America/New_York"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=bkietz",
            "name": "bkietz",
            "key": "bkietz",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=bkietz&avatarId=37277",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bkietz&avatarId=37277",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bkietz&avatarId=37277",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bkietz&avatarId=37277"
            },
            "displayName": "Ben Kietzman",
            "active": true,
            "timeZone": "America/New_York"
        },
        "aggregateprogress": {
            "progress": 12600,
            "total": 12600,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 12600,
            "total": 12600,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-8058/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 28,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13290804/worklog/407955",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "fsaintjacques commented on pull request #6687: ARROW-8058: [Dataset] Relax DatasetFactory discovery validation\nURL: https://github.com/apache/arrow/pull/6687\n \n \n   This PR aims to improve the latency of the discovery process. Notably, it selects \"fast\" defaults over \"safe\" defaults.\r\n   \r\n   - Add `InspectOptions` which limits the number of fragments inspected to infer the schema, it defaults to one fragment.\r\n   - Add `FinishOptions` which toggles if validation of the optional schema and also controls the number of fragments it validates with. It defaults to disabling validation.\r\n   \r\n   This gives a noticeable speedup when the fragments have a uniform schema.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-03-23T15:10:28.978+0000",
                    "updated": "2020-03-23T15:10:28.978+0000",
                    "started": "2020-03-23T15:10:28.978+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "407955",
                    "issueId": "13290804"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13290804/worklog/407961",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "github-actions[bot] commented on issue #6687: ARROW-8058: [Dataset] Relax DatasetFactory discovery validation\nURL: https://github.com/apache/arrow/pull/6687#issuecomment-602666308\n \n \n   https://issues.apache.org/jira/browse/ARROW-8058\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-03-23T15:16:34.719+0000",
                    "updated": "2020-03-23T15:16:34.719+0000",
                    "started": "2020-03-23T15:16:34.718+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "407961",
                    "issueId": "13290804"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13290804/worklog/408017",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "bkietz commented on pull request #6687: ARROW-8058: [Dataset] Relax DatasetFactory discovery validation\nURL: https://github.com/apache/arrow/pull/6687#discussion_r396536974\n \n \n\n ##########\n File path: cpp/src/arrow/dataset/discovery.h\n ##########\n @@ -37,22 +37,54 @@\n namespace arrow {\n namespace dataset {\n \n-/// \\brief SourceFactory provides a way to inspect/discover a Source's expected\n-/// schema before materializing said Source.\n+struct InspectOptions {\n+  /// See `fragments` property.\n+  static constexpr int kInspectAllFragments = -1;\n+\n+  /// Indicate how many fragments' schema should be inspected. This limits the\n+  /// number of fragment accessed to inquire their schemas, thus improving the\n+  /// latency of the discovery process when dealing with a high number of fragment\n+  /// and/or high latency file systems.\n+  ///\n+  /// The default value of `1` inspect the schema of the first fragment only,\n+  /// in no particular order. If the dataset has a uniform schema for all fragments,\n+  /// this default is the optimal value. In order to inspect all fragments, set\n+  /// this option to `kInspectAllFragments`. A value of `0` disable inspection\n+  /// of fragments.\n+  int fragments = 1;\n+};\n+\n+struct FinishOptions {\n+  /// Finalize the dataset with this given schema. If the schema is not\n+  /// provided, infer the schema via the Inspect, see the `inspect_options`\n+  /// property.\n+  std::shared_ptr<Schema> schema = NULLPTR;\n+\n+  /// If the schema is not provided, it will be discovered by passing the\n+  /// following options to `DatasetDiscovery::Inspect`.\n+  InspectOptions inspect_options{};\n \n Review comment:\n   If these options are mutually exclusive then they should be wrapped in a `variant`\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-03-23T16:14:14.814+0000",
                    "updated": "2020-03-23T16:14:14.814+0000",
                    "started": "2020-03-23T16:14:14.814+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "408017",
                    "issueId": "13290804"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13290804/worklog/408018",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "bkietz commented on pull request #6687: ARROW-8058: [Dataset] Relax DatasetFactory discovery validation\nURL: https://github.com/apache/arrow/pull/6687#discussion_r396545643\n \n \n\n ##########\n File path: cpp/src/arrow/dataset/discovery.h\n ##########\n @@ -37,22 +37,54 @@\n namespace arrow {\n namespace dataset {\n \n-/// \\brief SourceFactory provides a way to inspect/discover a Source's expected\n-/// schema before materializing said Source.\n+struct InspectOptions {\n+  /// See `fragments` property.\n+  static constexpr int kInspectAllFragments = -1;\n+\n+  /// Indicate how many fragments' schema should be inspected. This limits the\n+  /// number of fragment accessed to inquire their schemas, thus improving the\n+  /// latency of the discovery process when dealing with a high number of fragment\n+  /// and/or high latency file systems.\n+  ///\n+  /// The default value of `1` inspect the schema of the first fragment only,\n+  /// in no particular order. If the dataset has a uniform schema for all fragments,\n+  /// this default is the optimal value. In order to inspect all fragments, set\n+  /// this option to `kInspectAllFragments`. A value of `0` disable inspection\n+  /// of fragments.\n \n Review comment:\n   ```suggestion\r\n     /// Indicate how many fragments should be inspected to infer the unified dataset schema.\r\n     /// Limiting the number of fragments accessed improves the\r\n     /// latency of the discovery process when dealing with a high number of fragments\r\n     /// and/or high latency file systems.\r\n     ///\r\n     /// The default value of `1` inspects the schema of the first (in no particular order)\r\n     /// fragment only. If the dataset has a uniform schema for all fragments,\r\n     /// this default is the optimal value. In order to inspect all fragments and robustly unify\r\n     /// their potentially varying schemas, set this option to `kInspectAllFragments`. A value\r\n     /// of `0` disables inspection of fragments altogether so only the partitioning schema will\r\n     /// be inspected.\r\n   ```\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-03-23T16:14:14.977+0000",
                    "updated": "2020-03-23T16:14:14.977+0000",
                    "started": "2020-03-23T16:14:14.976+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "408018",
                    "issueId": "13290804"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13290804/worklog/408019",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "bkietz commented on pull request #6687: ARROW-8058: [Dataset] Relax DatasetFactory discovery validation\nURL: https://github.com/apache/arrow/pull/6687#discussion_r396548842\n \n \n\n ##########\n File path: cpp/src/arrow/dataset/discovery.cc\n ##########\n @@ -236,17 +244,19 @@ Result<std::vector<std::shared_ptr<Schema>>> FileSystemDatasetFactory::InspectSc\n   return schemas;\n }\n \n-Result<std::shared_ptr<Dataset>> DatasetFactory::Finish() {\n-  ARROW_ASSIGN_OR_RAISE(auto schema, Inspect());\n-  return Finish(schema);\n-}\n+Result<std::shared_ptr<Dataset>> FileSystemDatasetFactory::Finish(FinishOptions options) {\n+  std::shared_ptr<Schema> schema = options.schema;\n+  bool schema_missing = schema == nullptr;\n+  if (schema_missing) {\n+    ARROW_ASSIGN_OR_RAISE(schema, Inspect(options.inspect_options));\n+  }\n \n-Result<std::shared_ptr<Dataset>> FileSystemDatasetFactory::Finish(\n-    const std::shared_ptr<Schema>& schema) {\n-  // This validation can be costly, but better safe than sorry.\n-  ARROW_ASSIGN_OR_RAISE(auto schemas, InspectSchemas());\n-  for (const auto& s : schemas) {\n-    RETURN_NOT_OK(SchemaBuilder::AreCompatible({schema, s}));\n+  if (options.validate_fragments && !schema_missing) {\n+    // If the schema is not provided, the unification will implicitly valid\n \n Review comment:\n   ```suggestion\r\n       // If the schema was not explicitly provided we don't need to validate\r\n       // since Inspect has already succeeded in producing a valid unified schema.\r\n   ```\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-03-23T16:14:14.990+0000",
                    "updated": "2020-03-23T16:14:14.990+0000",
                    "started": "2020-03-23T16:14:14.990+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "408019",
                    "issueId": "13290804"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13290804/worklog/408020",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "bkietz commented on pull request #6687: ARROW-8058: [Dataset] Relax DatasetFactory discovery validation\nURL: https://github.com/apache/arrow/pull/6687#discussion_r396558056\n \n \n\n ##########\n File path: cpp/src/arrow/dataset/discovery.cc\n ##########\n @@ -62,42 +73,36 @@ Result<std::shared_ptr<DatasetFactory>> UnionDatasetFactory::Make(\n       new UnionDatasetFactory(std::move(factories))};\n }\n \n-Result<std::vector<std::shared_ptr<Schema>>> UnionDatasetFactory::InspectSchemas() {\n+Result<std::vector<std::shared_ptr<Schema>>> UnionDatasetFactory::InspectSchemas(\n+    InspectOptions options) {\n   std::vector<std::shared_ptr<Schema>> schemas;\n \n   for (const auto& child_factory : factories_) {\n-    ARROW_ASSIGN_OR_RAISE(auto schema, child_factory->Inspect());\n-    schemas.emplace_back(schema);\n+    // Instead of applying options globally, apply it at each child factory.\n+    // This will not respect `options.fragments` exactly, but will respect the\n+    // spirit of peeking the first fragments or all of them.\n+    ARROW_ASSIGN_OR_RAISE(auto child_schemas, child_factory->InspectSchemas(options));\n+    ARROW_ASSIGN_OR_RAISE(auto child_schema, UnifySchemas(child_schemas));\n+    schemas.emplace_back(child_schema);\n   }\n \n   return schemas;\n }\n \n-Result<std::shared_ptr<Schema>> UnionDatasetFactory::Inspect() {\n-  ARROW_ASSIGN_OR_RAISE(auto schemas, InspectSchemas());\n+Result<std::shared_ptr<Dataset>> UnionDatasetFactory::Finish(FinishOptions options) {\n+  std::vector<std::shared_ptr<Dataset>> children;\n \n-  if (schemas.empty()) {\n-    return arrow::schema({});\n+  if (options.schema == nullptr) {\n+    // Set the schema in the option directly for the next `child_factory->Finish()`\n \n Review comment:\n   ```suggestion\r\n       // Set the schema in the option directly for use in `child_factory->Finish()`\r\n   ```\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-03-23T16:14:15.070+0000",
                    "updated": "2020-03-23T16:14:15.070+0000",
                    "started": "2020-03-23T16:14:15.069+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "408020",
                    "issueId": "13290804"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13290804/worklog/408021",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "bkietz commented on pull request #6687: ARROW-8058: [Dataset] Relax DatasetFactory discovery validation\nURL: https://github.com/apache/arrow/pull/6687#discussion_r396567096\n \n \n\n ##########\n File path: cpp/src/arrow/dataset/discovery.cc\n ##########\n @@ -36,16 +36,27 @@ namespace dataset {\n \n DatasetFactory::DatasetFactory() : root_partition_(scalar(true)) {}\n \n-Result<std::shared_ptr<Schema>> DatasetFactory::Inspect() {\n-  ARROW_ASSIGN_OR_RAISE(auto schemas, InspectSchemas());\n+Result<std::shared_ptr<Schema>> DatasetFactory::Inspect(InspectOptions options) {\n+  ARROW_ASSIGN_OR_RAISE(auto schemas, InspectSchemas(std::move(options)));\n \n   if (schemas.empty()) {\n-    schemas.push_back(arrow::schema({}));\n+    return arrow::schema({});\n   }\n \n   return UnifySchemas(schemas);\n }\n \n+Result<std::shared_ptr<Dataset>> DatasetFactory::Finish() {\n+  FinishOptions options;\n+  return Finish(options);\n+}\n+\n+Result<std::shared_ptr<Dataset>> DatasetFactory::Finish(std::shared_ptr<Schema> schema) {\n+  FinishOptions options;\n+  options.schema = schema;\n+  return Finish(options);\n \n Review comment:\n   ```suggestion\r\n     return Finish(std::move(options));\r\n   ```\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-03-23T16:14:15.070+0000",
                    "updated": "2020-03-23T16:14:15.070+0000",
                    "started": "2020-03-23T16:14:15.069+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "408021",
                    "issueId": "13290804"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13290804/worklog/408022",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "bkietz commented on pull request #6687: ARROW-8058: [Dataset] Relax DatasetFactory discovery validation\nURL: https://github.com/apache/arrow/pull/6687#discussion_r396539768\n \n \n\n ##########\n File path: cpp/src/arrow/dataset/discovery.cc\n ##########\n @@ -220,11 +225,14 @@ Result<std::shared_ptr<Schema>> FileSystemDatasetFactory::PartitionSchema() {\n   return options_.partitioning.factory()->Inspect(paths);\n }\n \n-Result<std::vector<std::shared_ptr<Schema>>> FileSystemDatasetFactory::InspectSchemas() {\n+Result<std::vector<std::shared_ptr<Schema>>> FileSystemDatasetFactory::InspectSchemas(\n+    InspectOptions options) {\n   std::vector<std::shared_ptr<Schema>> schemas;\n \n+  int fragments = options.fragments;\n   for (const auto& f : forest_.infos()) {\n     if (!f.IsFile()) continue;\n+    if (options.fragments >= 0 && fragments-- == 0) break;\n \n Review comment:\n   I'd prefer to see an explicit case for `options.fragments == 0` outside the loop. Behavior is not obvious here\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-03-23T16:14:15.070+0000",
                    "updated": "2020-03-23T16:14:15.070+0000",
                    "started": "2020-03-23T16:14:15.069+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "408022",
                    "issueId": "13290804"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13290804/worklog/408023",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "bkietz commented on pull request #6687: ARROW-8058: [Dataset] Relax DatasetFactory discovery validation\nURL: https://github.com/apache/arrow/pull/6687#discussion_r396550818\n \n \n\n ##########\n File path: cpp/src/arrow/dataset/discovery_test.cc\n ##########\n @@ -172,46 +176,56 @@ TEST_F(FileSystemDatasetFactoryTest, Selector) {\n   factory_options_.partition_base_dir = \"A/A\";\n   MakeFactory({fs::File(\"0\"), fs::File(\"A/a\"), fs::File(\"A/A/a\")});\n   // partition_base_dir should not affect filtered files, only the applied partition\n-  AssertInspect({});\n+  AssertInspect(schema({}));\n   AssertFinishWithPaths({\"A/a\", \"A/A/a\"});\n }\n \n TEST_F(FileSystemDatasetFactoryTest, ExplicitPartition) {\n   selector_.base_dir = \"a=ignored/base\";\n+  auto part_field = field(\"a\", int32());\n   factory_options_.partitioning =\n-      std::make_shared<HivePartitioning>(schema({field(\"a\", float64())}));\n+      std::make_shared<HivePartitioning>(schema({part_field}));\n \n-  MakeFactory(\n-      {fs::File(selector_.base_dir + \"/a=1\"), fs::File(selector_.base_dir + \"/a=2\")});\n+  auto a_1 = \"a=ignored/base/a=1\";\n+  MakeFactory({fs::File(a_1)});\n \n-  AssertInspect({field(\"a\", float64())});\n-  AssertFinishWithPaths({selector_.base_dir + \"/a=1\", selector_.base_dir + \"/a=2\"});\n+  InspectOptions options;\n+  // Should inspect the Schema even if no files are inspected.\n \n Review comment:\n   ```suggestion\r\n     // Should inspect the partition schema even if no files are inspected.\r\n   ```\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-03-23T16:14:15.073+0000",
                    "updated": "2020-03-23T16:14:15.073+0000",
                    "started": "2020-03-23T16:14:15.073+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "408023",
                    "issueId": "13290804"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13290804/worklog/408024",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "bkietz commented on pull request #6687: ARROW-8058: [Dataset] Relax DatasetFactory discovery validation\nURL: https://github.com/apache/arrow/pull/6687#discussion_r396566800\n \n \n\n ##########\n File path: cpp/src/arrow/dataset/discovery.cc\n ##########\n @@ -62,42 +73,36 @@ Result<std::shared_ptr<DatasetFactory>> UnionDatasetFactory::Make(\n       new UnionDatasetFactory(std::move(factories))};\n }\n \n-Result<std::vector<std::shared_ptr<Schema>>> UnionDatasetFactory::InspectSchemas() {\n+Result<std::vector<std::shared_ptr<Schema>>> UnionDatasetFactory::InspectSchemas(\n+    InspectOptions options) {\n   std::vector<std::shared_ptr<Schema>> schemas;\n \n   for (const auto& child_factory : factories_) {\n-    ARROW_ASSIGN_OR_RAISE(auto schema, child_factory->Inspect());\n-    schemas.emplace_back(schema);\n+    // Instead of applying options globally, apply it at each child factory.\n+    // This will not respect `options.fragments` exactly, but will respect the\n+    // spirit of peeking the first fragments or all of them.\n \n Review comment:\n   Move this to the doccomment\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-03-23T16:14:15.077+0000",
                    "updated": "2020-03-23T16:14:15.077+0000",
                    "started": "2020-03-23T16:14:15.077+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "408024",
                    "issueId": "13290804"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13290804/worklog/408184",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jorisvandenbossche commented on pull request #6687: ARROW-8058: [Dataset] Relax DatasetFactory discovery validation\nURL: https://github.com/apache/arrow/pull/6687#discussion_r396694731\n \n \n\n ##########\n File path: cpp/src/arrow/dataset/discovery.h\n ##########\n @@ -37,22 +37,54 @@\n namespace arrow {\n namespace dataset {\n \n-/// \\brief SourceFactory provides a way to inspect/discover a Source's expected\n-/// schema before materializing said Source.\n+struct InspectOptions {\n+  /// See `fragments` property.\n+  static constexpr int kInspectAllFragments = -1;\n+\n+  /// Indicate how many fragments' schema should be inspected. This limits the\n+  /// number of fragment accessed to inquire their schemas, thus improving the\n+  /// latency of the discovery process when dealing with a high number of fragment\n+  /// and/or high latency file systems.\n+  ///\n+  /// The default value of `1` inspect the schema of the first fragment only,\n+  /// in no particular order. If the dataset has a uniform schema for all fragments,\n+  /// this default is the optimal value. In order to inspect all fragments, set\n+  /// this option to `kInspectAllFragments`. A value of `0` disable inspection\n+  /// of fragments.\n+  int fragments = 1;\n+};\n+\n+struct FinishOptions {\n+  /// Finalize the dataset with this given schema. If the schema is not\n+  /// provided, infer the schema via the Inspect, see the `inspect_options`\n+  /// property.\n+  std::shared_ptr<Schema> schema = NULLPTR;\n+\n+  /// If the schema is not provided, it will be discovered by passing the\n+  /// following options to `DatasetDiscovery::Inspect`.\n+  InspectOptions inspect_options{};\n+\n+  /// Indicate if the given Schema (when inferred), should be validated against\n+  /// the fragments' schemas. `inspect_options` will control how many fragments\n+  /// are checked.\n+  bool validate_fragments = false;\n \n Review comment:\n   Naively, for an end user API, I might expect that if you do `validate_fragments`, it will validate all fragments (now, this can still be done on the python side, if that's something we want.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-03-23T19:17:34.232+0000",
                    "updated": "2020-03-23T19:17:34.232+0000",
                    "started": "2020-03-23T19:17:34.231+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "408184",
                    "issueId": "13290804"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13290804/worklog/408185",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jorisvandenbossche commented on pull request #6687: ARROW-8058: [Dataset] Relax DatasetFactory discovery validation\nURL: https://github.com/apache/arrow/pull/6687#discussion_r396693184\n \n \n\n ##########\n File path: cpp/src/arrow/dataset/discovery.h\n ##########\n @@ -37,22 +37,54 @@\n namespace arrow {\n namespace dataset {\n \n-/// \\brief SourceFactory provides a way to inspect/discover a Source's expected\n-/// schema before materializing said Source.\n+struct InspectOptions {\n+  /// See `fragments` property.\n+  static constexpr int kInspectAllFragments = -1;\n+\n+  /// Indicate how many fragments' schema should be inspected. This limits the\n+  /// number of fragment accessed to inquire their schemas, thus improving the\n+  /// latency of the discovery process when dealing with a high number of fragment\n+  /// and/or high latency file systems.\n+  ///\n+  /// The default value of `1` inspect the schema of the first fragment only,\n+  /// in no particular order. If the dataset has a uniform schema for all fragments,\n+  /// this default is the optimal value. In order to inspect all fragments, set\n+  /// this option to `kInspectAllFragments`. A value of `0` disable inspection\n+  /// of fragments.\n+  int fragments = 1;\n+};\n+\n+struct FinishOptions {\n+  /// Finalize the dataset with this given schema. If the schema is not\n+  /// provided, infer the schema via the Inspect, see the `inspect_options`\n+  /// property.\n+  std::shared_ptr<Schema> schema = NULLPTR;\n+\n+  /// If the schema is not provided, it will be discovered by passing the\n+  /// following options to `DatasetDiscovery::Inspect`.\n+  InspectOptions inspect_options{};\n+\n+  /// Indicate if the given Schema (when inferred), should be validated against\n \n Review comment:\n   \"when specified\" instead of \"when inferred\" ?\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-03-23T19:17:34.232+0000",
                    "updated": "2020-03-23T19:17:34.232+0000",
                    "started": "2020-03-23T19:17:34.231+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "408185",
                    "issueId": "13290804"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13290804/worklog/408186",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jorisvandenbossche commented on pull request #6687: ARROW-8058: [Dataset] Relax DatasetFactory discovery validation\nURL: https://github.com/apache/arrow/pull/6687#discussion_r396692707\n \n \n\n ##########\n File path: cpp/src/arrow/dataset/discovery.h\n ##########\n @@ -37,22 +37,54 @@\n namespace arrow {\n namespace dataset {\n \n-/// \\brief SourceFactory provides a way to inspect/discover a Source's expected\n-/// schema before materializing said Source.\n+struct InspectOptions {\n+  /// See `fragments` property.\n+  static constexpr int kInspectAllFragments = -1;\n+\n+  /// Indicate how many fragments' schema should be inspected. This limits the\n+  /// number of fragment accessed to inquire their schemas, thus improving the\n+  /// latency of the discovery process when dealing with a high number of fragment\n+  /// and/or high latency file systems.\n+  ///\n+  /// The default value of `1` inspect the schema of the first fragment only,\n+  /// in no particular order. If the dataset has a uniform schema for all fragments,\n+  /// this default is the optimal value. In order to inspect all fragments, set\n+  /// this option to `kInspectAllFragments`. A value of `0` disable inspection\n+  /// of fragments.\n+  int fragments = 1;\n+};\n+\n+struct FinishOptions {\n+  /// Finalize the dataset with this given schema. If the schema is not\n+  /// provided, infer the schema via the Inspect, see the `inspect_options`\n+  /// property.\n+  std::shared_ptr<Schema> schema = NULLPTR;\n+\n+  /// If the schema is not provided, it will be discovered by passing the\n+  /// following options to `DatasetDiscovery::Inspect`.\n+  InspectOptions inspect_options{};\n \n Review comment:\n   I understand that InspectOptions can still be used depending on `validate_fragments` ?\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-03-23T19:17:34.236+0000",
                    "updated": "2020-03-23T19:17:34.236+0000",
                    "started": "2020-03-23T19:17:34.235+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "408186",
                    "issueId": "13290804"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13290804/worklog/408811",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "fsaintjacques commented on pull request #6687: ARROW-8058: [Dataset] Relax DatasetFactory discovery validation\nURL: https://github.com/apache/arrow/pull/6687#discussion_r397207697\n \n \n\n ##########\n File path: cpp/src/arrow/dataset/discovery.h\n ##########\n @@ -37,22 +37,54 @@\n namespace arrow {\n namespace dataset {\n \n-/// \\brief SourceFactory provides a way to inspect/discover a Source's expected\n-/// schema before materializing said Source.\n+struct InspectOptions {\n+  /// See `fragments` property.\n+  static constexpr int kInspectAllFragments = -1;\n+\n+  /// Indicate how many fragments' schema should be inspected. This limits the\n+  /// number of fragment accessed to inquire their schemas, thus improving the\n+  /// latency of the discovery process when dealing with a high number of fragment\n+  /// and/or high latency file systems.\n+  ///\n+  /// The default value of `1` inspect the schema of the first fragment only,\n+  /// in no particular order. If the dataset has a uniform schema for all fragments,\n+  /// this default is the optimal value. In order to inspect all fragments, set\n+  /// this option to `kInspectAllFragments`. A value of `0` disable inspection\n+  /// of fragments.\n+  int fragments = 1;\n+};\n+\n+struct FinishOptions {\n+  /// Finalize the dataset with this given schema. If the schema is not\n+  /// provided, infer the schema via the Inspect, see the `inspect_options`\n+  /// property.\n+  std::shared_ptr<Schema> schema = NULLPTR;\n+\n+  /// If the schema is not provided, it will be discovered by passing the\n+  /// following options to `DatasetDiscovery::Inspect`.\n+  InspectOptions inspect_options{};\n \n Review comment:\n   Correct.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-03-24T14:44:25.486+0000",
                    "updated": "2020-03-24T14:44:25.486+0000",
                    "started": "2020-03-24T14:44:25.486+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "408811",
                    "issueId": "13290804"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13290804/worklog/408815",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "fsaintjacques commented on pull request #6687: ARROW-8058: [Dataset] Relax DatasetFactory discovery validation\nURL: https://github.com/apache/arrow/pull/6687#discussion_r397207697\n \n \n\n ##########\n File path: cpp/src/arrow/dataset/discovery.h\n ##########\n @@ -37,22 +37,54 @@\n namespace arrow {\n namespace dataset {\n \n-/// \\brief SourceFactory provides a way to inspect/discover a Source's expected\n-/// schema before materializing said Source.\n+struct InspectOptions {\n+  /// See `fragments` property.\n+  static constexpr int kInspectAllFragments = -1;\n+\n+  /// Indicate how many fragments' schema should be inspected. This limits the\n+  /// number of fragment accessed to inquire their schemas, thus improving the\n+  /// latency of the discovery process when dealing with a high number of fragment\n+  /// and/or high latency file systems.\n+  ///\n+  /// The default value of `1` inspect the schema of the first fragment only,\n+  /// in no particular order. If the dataset has a uniform schema for all fragments,\n+  /// this default is the optimal value. In order to inspect all fragments, set\n+  /// this option to `kInspectAllFragments`. A value of `0` disable inspection\n+  /// of fragments.\n+  int fragments = 1;\n+};\n+\n+struct FinishOptions {\n+  /// Finalize the dataset with this given schema. If the schema is not\n+  /// provided, infer the schema via the Inspect, see the `inspect_options`\n+  /// property.\n+  std::shared_ptr<Schema> schema = NULLPTR;\n+\n+  /// If the schema is not provided, it will be discovered by passing the\n+  /// following options to `DatasetDiscovery::Inspect`.\n+  InspectOptions inspect_options{};\n \n Review comment:\n   Correct. It's schema and validate_fragments that are mutually exclusive, but I don't want to create a variant class just for this. I prefer making validate_fragments a noop when the schema is not given.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-03-24T14:45:45.521+0000",
                    "updated": "2020-03-24T14:45:45.521+0000",
                    "started": "2020-03-24T14:45:45.520+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "408815",
                    "issueId": "13290804"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13290804/worklog/408817",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "bkietz commented on pull request #6687: ARROW-8058: [Dataset] Relax DatasetFactory discovery validation\nURL: https://github.com/apache/arrow/pull/6687#discussion_r397209896\n \n \n\n ##########\n File path: cpp/src/arrow/dataset/discovery.h\n ##########\n @@ -37,22 +37,54 @@\n namespace arrow {\n namespace dataset {\n \n-/// \\brief SourceFactory provides a way to inspect/discover a Source's expected\n-/// schema before materializing said Source.\n+struct InspectOptions {\n+  /// See `fragments` property.\n+  static constexpr int kInspectAllFragments = -1;\n+\n+  /// Indicate how many fragments' schema should be inspected. This limits the\n+  /// number of fragment accessed to inquire their schemas, thus improving the\n+  /// latency of the discovery process when dealing with a high number of fragment\n+  /// and/or high latency file systems.\n+  ///\n+  /// The default value of `1` inspect the schema of the first fragment only,\n+  /// in no particular order. If the dataset has a uniform schema for all fragments,\n+  /// this default is the optimal value. In order to inspect all fragments, set\n+  /// this option to `kInspectAllFragments`. A value of `0` disable inspection\n+  /// of fragments.\n+  int fragments = 1;\n+};\n+\n+struct FinishOptions {\n+  /// Finalize the dataset with this given schema. If the schema is not\n+  /// provided, infer the schema via the Inspect, see the `inspect_options`\n+  /// property.\n+  std::shared_ptr<Schema> schema = NULLPTR;\n+\n+  /// If the schema is not provided, it will be discovered by passing the\n+  /// following options to `DatasetDiscovery::Inspect`.\n+  InspectOptions inspect_options{};\n \n Review comment:\n   Alright, +1\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-03-24T14:47:11.124+0000",
                    "updated": "2020-03-24T14:47:11.124+0000",
                    "started": "2020-03-24T14:47:11.124+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "408817",
                    "issueId": "13290804"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13290804/worklog/408824",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "fsaintjacques commented on pull request #6687: ARROW-8058: [Dataset] Relax DatasetFactory discovery validation\nURL: https://github.com/apache/arrow/pull/6687#discussion_r397216898\n \n \n\n ##########\n File path: cpp/src/arrow/dataset/discovery.h\n ##########\n @@ -37,22 +37,54 @@\n namespace arrow {\n namespace dataset {\n \n-/// \\brief SourceFactory provides a way to inspect/discover a Source's expected\n-/// schema before materializing said Source.\n+struct InspectOptions {\n+  /// See `fragments` property.\n+  static constexpr int kInspectAllFragments = -1;\n+\n+  /// Indicate how many fragments' schema should be inspected. This limits the\n+  /// number of fragment accessed to inquire their schemas, thus improving the\n+  /// latency of the discovery process when dealing with a high number of fragment\n+  /// and/or high latency file systems.\n+  ///\n+  /// The default value of `1` inspect the schema of the first fragment only,\n+  /// in no particular order. If the dataset has a uniform schema for all fragments,\n+  /// this default is the optimal value. In order to inspect all fragments, set\n+  /// this option to `kInspectAllFragments`. A value of `0` disable inspection\n+  /// of fragments.\n+  int fragments = 1;\n+};\n+\n+struct FinishOptions {\n+  /// Finalize the dataset with this given schema. If the schema is not\n+  /// provided, infer the schema via the Inspect, see the `inspect_options`\n+  /// property.\n+  std::shared_ptr<Schema> schema = NULLPTR;\n+\n+  /// If the schema is not provided, it will be discovered by passing the\n+  /// following options to `DatasetDiscovery::Inspect`.\n+  InspectOptions inspect_options{};\n+\n+  /// Indicate if the given Schema (when inferred), should be validated against\n+  /// the fragments' schemas. `inspect_options` will control how many fragments\n+  /// are checked.\n+  bool validate_fragments = false;\n \n Review comment:\n   Possibly yes.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-03-24T14:55:50.068+0000",
                    "updated": "2020-03-24T14:55:50.068+0000",
                    "started": "2020-03-24T14:55:50.068+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "408824",
                    "issueId": "13290804"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13290804/worklog/409557",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "fsaintjacques commented on issue #6687: ARROW-8058: [Dataset] Relax DatasetFactory discovery validation\nURL: https://github.com/apache/arrow/pull/6687#issuecomment-603892597\n \n \n   I don't think the c/glib failure is related.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-03-25T15:05:02.599+0000",
                    "updated": "2020-03-25T15:05:02.599+0000",
                    "started": "2020-03-25T15:05:02.599+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "409557",
                    "issueId": "13290804"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13290804/worklog/409645",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "bkietz commented on pull request #6687: ARROW-8058: [Dataset] Relax DatasetFactory discovery validation\nURL: https://github.com/apache/arrow/pull/6687\n \n \n   \n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-03-25T17:01:19.718+0000",
                    "updated": "2020-03-25T17:01:19.718+0000",
                    "started": "2020-03-25T17:01:19.718+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "409645",
                    "issueId": "13290804"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13290804/worklog/409769",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jorisvandenbossche commented on pull request #6687: ARROW-8058: [Dataset] Relax DatasetFactory discovery validation\nURL: https://github.com/apache/arrow/pull/6687#discussion_r398125545\n \n \n\n ##########\n File path: python/pyarrow/tests/test_dataset.py\n ##########\n @@ -482,7 +482,7 @@ def test_filesystem_factory(mockfs, paths_or_selector):\n     )\n     assert options.partition_base_dir == 'subdir'\n     assert options.ignore_prefixes == ['.', '_']\n-    assert options.exclude_invalid_files is True\n+    assert options.exclude_invalid_files is False\n \n Review comment:\n   the default changed here?\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-03-25T19:48:24.230+0000",
                    "updated": "2020-03-25T19:48:24.230+0000",
                    "started": "2020-03-25T19:48:24.230+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "409769",
                    "issueId": "13290804"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
            "id": "4",
            "description": "An improvement or enhancement to an existing feature or task.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
            "name": "Improvement",
            "subtask": false,
            "avatarId": 21140
        },
        "timespent": 12600,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@564a257[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@3a00b7ff[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@7e63df10[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@4163206c[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@b0eeba8[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@780c7b32[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@18f7a07c[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@404f934e[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@3c606344[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@272e5a11[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@2fffac8[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@3e16dc3a[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 12600,
        "customfield_12312520": null,
        "customfield_12312521": "Wed Mar 25 17:01:24 UTC 2020",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2020-03-25T17:01:24.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-8058/watchers",
            "watchCount": 2,
            "isWatching": false
        },
        "created": "2020-03-10T13:21:00.000+0000",
        "updated": "2020-06-08T15:56:12.000+0000",
        "timeoriginalestimate": null,
        "description": "This can be costly and is not always necessary.\r\n\r\nAt the same time we could move file validation into the scan tasks; currently all files are inspected as the dataset is constructed, which can be expensive if the filesystem is slow. We'll be performing the validation multiple times but the check will be cheap since at scan time we'll be reading the file into memory anyway.",
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "3.5h",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 12600
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[C++][Python][Dataset] Provide an option to toggle validation and schema inference in FileSystemDatasetFactoryOptions",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13290804/comment/17066863",
                    "id": "17066863",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=bkietz",
                        "name": "bkietz",
                        "key": "bkietz",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=bkietz&avatarId=37277",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bkietz&avatarId=37277",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bkietz&avatarId=37277",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bkietz&avatarId=37277"
                        },
                        "displayName": "Ben Kietzman",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "Issue resolved by pull request 6687\n[https://github.com/apache/arrow/pull/6687]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=bkietz",
                        "name": "bkietz",
                        "key": "bkietz",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=bkietz&avatarId=37277",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bkietz&avatarId=37277",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bkietz&avatarId=37277",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bkietz&avatarId=37277"
                        },
                        "displayName": "Ben Kietzman",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2020-03-25T17:01:24.677+0000",
                    "updated": "2020-03-25T17:01:24.677+0000"
                }
            ],
            "maxResults": 1,
            "total": 1,
            "startAt": 0
        },
        "customfield_12311820": "0|z0cdhs:",
        "customfield_12314139": null
    }
}