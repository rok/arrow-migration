{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13195046",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13195046",
    "key": "ARROW-3648",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12343858",
                "id": "12343858",
                "description": "",
                "name": "0.12.0",
                "archived": false,
                "released": true,
                "releaseDate": "2019-01-20"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "name": "Major",
            "id": "3"
        },
        "labels": [
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=guoyuhong85",
            "name": "guoyuhong85",
            "key": "guoyuhong85",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=guoyuhong85&avatarId=36251",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=guoyuhong85&avatarId=36251",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=guoyuhong85&avatarId=36251",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=guoyuhong85&avatarId=36251"
            },
            "displayName": "Yuhong Guo",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12328933",
                "id": "12328933",
                "name": "Java"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=guoyuhong85",
            "name": "guoyuhong85",
            "key": "guoyuhong85",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=guoyuhong85&avatarId=36251",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=guoyuhong85&avatarId=36251",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=guoyuhong85&avatarId=36251",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=guoyuhong85&avatarId=36251"
            },
            "displayName": "Yuhong Guo",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=guoyuhong85",
            "name": "guoyuhong85",
            "key": "guoyuhong85",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=guoyuhong85&avatarId=36251",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=guoyuhong85&avatarId=36251",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=guoyuhong85&avatarId=36251",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=guoyuhong85&avatarId=36251"
            },
            "displayName": "Yuhong Guo",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "aggregateprogress": {
            "progress": 8400,
            "total": 8400,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 8400,
            "total": 8400,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-3648/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 14,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13195046/worklog/160679",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "guoyuhong commented on issue #2862: ARROW-3648: [Plasma][Java] Add API to get metadata and data at the same time\nURL: https://github.com/apache/arrow/pull/2862#issuecomment-434348842\n \n \n   @wesm I have add the dependency to POM, but the CI failed with `Exception in thread \"main\" java.lang.NoClassDefFoundError: org/apache/commons/lang3/tuple/Pair`. Do you know how solve the problem?\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-10-30T15:31:56.011+0000",
                    "updated": "2018-10-30T15:31:56.011+0000",
                    "started": "2018-10-30T15:31:56.010+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "160679",
                    "issueId": "13195046"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13195046/worklog/161086",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "codecov-io commented on issue #2862: ARROW-3648: [Plasma][Java] Add API to get metadata and data at the same time\nURL: https://github.com/apache/arrow/pull/2862#issuecomment-434628926\n \n \n   # [Codecov](https://codecov.io/gh/apache/arrow/pull/2862?src=pr&el=h1) Report\n   > Merging [#2862](https://codecov.io/gh/apache/arrow/pull/2862?src=pr&el=desc) into [master](https://codecov.io/gh/apache/arrow/commit/85fd54c1f19896bec4e99fa6dd70b41b0d4dc957?src=pr&el=desc) will **increase** coverage by `0.88%`.\n   > The diff coverage is `n/a`.\n   \n   [![Impacted file tree graph](https://codecov.io/gh/apache/arrow/pull/2862/graphs/tree.svg?width=650&token=LpTCFbqVT1&height=150&src=pr)](https://codecov.io/gh/apache/arrow/pull/2862?src=pr&el=tree)\n   \n   ```diff\n   @@            Coverage Diff             @@\n   ##           master    #2862      +/-   ##\n   ==========================================\n   + Coverage   87.56%   88.45%   +0.88%     \n   ==========================================\n     Files         411      348      -63     \n     Lines       63818    59583    -4235     \n   ==========================================\n   - Hits        55884    52703    -3181     \n   + Misses       7864     6880     -984     \n   + Partials       70        0      -70\n   ```\n   \n   \n   | [Impacted Files](https://codecov.io/gh/apache/arrow/pull/2862?src=pr&el=tree) | Coverage \u0394 | |\n   |---|---|---|\n   | [cpp/src/arrow/csv/column-builder.cc](https://codecov.io/gh/apache/arrow/pull/2862/diff?src=pr&el=tree#diff-Y3BwL3NyYy9hcnJvdy9jc3YvY29sdW1uLWJ1aWxkZXIuY2M=) | `94.92% <0%> (-2.18%)` | :arrow_down: |\n   | [rust/src/record\\_batch.rs](https://codecov.io/gh/apache/arrow/pull/2862/diff?src=pr&el=tree#diff-cnVzdC9zcmMvcmVjb3JkX2JhdGNoLnJz) | | |\n   | [go/arrow/array/table.go](https://codecov.io/gh/apache/arrow/pull/2862/diff?src=pr&el=tree#diff-Z28vYXJyb3cvYXJyYXkvdGFibGUuZ28=) | | |\n   | [rust/src/util/bit\\_util.rs](https://codecov.io/gh/apache/arrow/pull/2862/diff?src=pr&el=tree#diff-cnVzdC9zcmMvdXRpbC9iaXRfdXRpbC5ycw==) | | |\n   | [go/arrow/math/uint64\\_amd64.go](https://codecov.io/gh/apache/arrow/pull/2862/diff?src=pr&el=tree#diff-Z28vYXJyb3cvbWF0aC91aW50NjRfYW1kNjQuZ28=) | | |\n   | [go/arrow/internal/testing/tools/bool.go](https://codecov.io/gh/apache/arrow/pull/2862/diff?src=pr&el=tree#diff-Z28vYXJyb3cvaW50ZXJuYWwvdGVzdGluZy90b29scy9ib29sLmdv) | | |\n   | [go/arrow/internal/bitutil/bitutil.go](https://codecov.io/gh/apache/arrow/pull/2862/diff?src=pr&el=tree#diff-Z28vYXJyb3cvaW50ZXJuYWwvYml0dXRpbC9iaXR1dGlsLmdv) | | |\n   | [go/arrow/memory/memory\\_avx2\\_amd64.go](https://codecov.io/gh/apache/arrow/pull/2862/diff?src=pr&el=tree#diff-Z28vYXJyb3cvbWVtb3J5L21lbW9yeV9hdngyX2FtZDY0Lmdv) | | |\n   | [go/arrow/array/null.go](https://codecov.io/gh/apache/arrow/pull/2862/diff?src=pr&el=tree#diff-Z28vYXJyb3cvYXJyYXkvbnVsbC5nbw==) | | |\n   | [go/arrow/datatype\\_nested.go](https://codecov.io/gh/apache/arrow/pull/2862/diff?src=pr&el=tree#diff-Z28vYXJyb3cvZGF0YXR5cGVfbmVzdGVkLmdv) | | |\n   | ... and [54 more](https://codecov.io/gh/apache/arrow/pull/2862/diff?src=pr&el=tree-more) | |\n   \n   ------\n   \n   [Continue to review full report at Codecov](https://codecov.io/gh/apache/arrow/pull/2862?src=pr&el=continue).\n   > **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n   > `\u0394 = absolute <relative> (impact)`, `\u00f8 = not affected`, `? = missing data`\n   > Powered by [Codecov](https://codecov.io/gh/apache/arrow/pull/2862?src=pr&el=footer). Last update [85fd54c...bd10550](https://codecov.io/gh/apache/arrow/pull/2862?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n   \n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-10-31T10:02:55.486+0000",
                    "updated": "2018-10-31T10:02:55.486+0000",
                    "started": "2018-10-31T10:02:55.486+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "161086",
                    "issueId": "13195046"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13195046/worklog/161121",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "xhochy commented on issue #2862: ARROW-3648: [Plasma][Java] Add API to get metadata and data at the same time\nURL: https://github.com/apache/arrow/pull/2862#issuecomment-434666538\n \n \n   > @wesm I have add the dependency to POM, but the CI failed with `Exception in thread \"main\" java.lang.NoClassDefFoundError: org/apache/commons/lang3/tuple/Pair`. Do you know how solve the problem?\r\n   \r\n   @guoyuhong Which dependency did you add to the POM? The current diff only shows some whitespace corrections.\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-10-31T12:21:36.268+0000",
                    "updated": "2018-10-31T12:21:36.268+0000",
                    "started": "2018-10-31T12:21:36.267+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "161121",
                    "issueId": "13195046"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13195046/worklog/161142",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "praveenbingo commented on issue #2862: ARROW-3648: [Plasma][Java] Add API to get metadata and data at the same time\nURL: https://github.com/apache/arrow/pull/2862#issuecomment-434681964\n \n \n   > @wesm I have add the dependency to POM, but the CI failed with `Exception in thread \"main\" java.lang.NoClassDefFoundError: org/apache/commons/lang3/tuple/Pair`. Do you know how solve the problem?\r\n   \r\n   Hi,\r\n   \r\n   It looks like you hand managing the class path in the [ci](https://github.com/apache/arrow/blob/master/ci/travis_script_plasma_java_client.sh#L36), i guess that is the reason the pair class was not showing up.\r\n   \r\n   Can you make [this](https://github.com/apache/arrow/blob/master/java/plasma/src/test/java/org/apache/arrow/plasma/PlasmaClientTest.java) a java test instead (using @Test annotation) and let maven manage the test execution?\r\n   \r\n   \n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-10-31T13:15:17.733+0000",
                    "updated": "2018-10-31T13:15:17.733+0000",
                    "started": "2018-10-31T13:15:17.732+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "161142",
                    "issueId": "13195046"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13195046/worklog/161145",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "praveenbingo commented on a change in pull request #2862: ARROW-3648: [Plasma][Java] Add API to get metadata and data at the same time\nURL: https://github.com/apache/arrow/pull/2862#discussion_r229689564\n \n \n\n ##########\n File path: java/plasma/src/main/java/org/apache/arrow/plasma/PlasmaClient.java\n ##########\n @@ -110,6 +109,33 @@ public void fetch(byte[][] objectIds) {\n     PlasmaClientJNI.fetch(conn, objectIds);\n   }\n \n+  @Override\n+  public List<ObjectStoreData> get(byte[][] objectIds, int timeoutMs) {\n+    ByteBuffer[][] bufs = PlasmaClientJNI.get(conn, objectIds, timeoutMs);\n+    assert bufs.length == objectIds.length;\n+\n+    List<ObjectStoreData> ret = new ArrayList<>();\n+    for (int i = 0; i < bufs.length; i++) {\n+      ByteBuffer databuf = bufs[i][0];\n+      ByteBuffer metabuf = bufs[i][1];\n+      if (databuf == null) {\n+        ret.add(new ObjectStoreData(null, null));\n+      } else {\n+        byte[] data = new byte[databuf.remaining()];\n+        databuf.get(data);\n \n Review comment:\n   [just for my understanding] is there a reason we are making a copy of the data? do we want them to immutable by the caller?\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-10-31T13:22:56.837+0000",
                    "updated": "2018-10-31T13:22:56.837+0000",
                    "started": "2018-10-31T13:22:56.836+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "161145",
                    "issueId": "13195046"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13195046/worklog/161421",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "guoyuhong commented on issue #2862: ARROW-3648: [Plasma][Java] Add API to get metadata and data at the same time\nURL: https://github.com/apache/arrow/pull/2862#issuecomment-434916330\n \n \n   @xhochy I tried to add the `Pair` package:\r\n   ```xml\r\n            <dependency>\r\n                <groupId>org.apache.commons</groupId>\r\n                <artifactId>commons-lang3</artifactId>\r\n                <version>3.4</version>\r\n            </dependency>\r\n   ```\r\n   I looks like there are some version conflict. So I discarded `Pair` and use the self-defined class `ObjectStoreData`.\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-11-01T03:08:53.896+0000",
                    "updated": "2018-11-01T03:08:53.896+0000",
                    "started": "2018-11-01T03:08:53.895+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "161421",
                    "issueId": "13195046"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13195046/worklog/161426",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "guoyuhong commented on a change in pull request #2862: ARROW-3648: [Plasma][Java] Add API to get metadata and data at the same time\nURL: https://github.com/apache/arrow/pull/2862#discussion_r229930106\n \n \n\n ##########\n File path: java/plasma/src/main/java/org/apache/arrow/plasma/PlasmaClient.java\n ##########\n @@ -110,6 +109,33 @@ public void fetch(byte[][] objectIds) {\n     PlasmaClientJNI.fetch(conn, objectIds);\n   }\n \n+  @Override\n+  public List<ObjectStoreData> get(byte[][] objectIds, int timeoutMs) {\n+    ByteBuffer[][] bufs = PlasmaClientJNI.get(conn, objectIds, timeoutMs);\n+    assert bufs.length == objectIds.length;\n+\n+    List<ObjectStoreData> ret = new ArrayList<>();\n+    for (int i = 0; i < bufs.length; i++) {\n+      ByteBuffer databuf = bufs[i][0];\n+      ByteBuffer metabuf = bufs[i][1];\n+      if (databuf == null) {\n+        ret.add(new ObjectStoreData(null, null));\n+      } else {\n+        byte[] data = new byte[databuf.remaining()];\n+        databuf.get(data);\n \n Review comment:\n   In my understanding, the buffer is from Plasma shared memory. It is safe to make a copy and the user can release the shared buffer.  Add @pcmoritz to make sure whether my understanding is correct.\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-11-01T03:30:03.358+0000",
                    "updated": "2018-11-01T03:30:03.358+0000",
                    "started": "2018-11-01T03:30:03.358+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "161426",
                    "issueId": "13195046"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13195046/worklog/161428",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "guoyuhong commented on a change in pull request #2862: ARROW-3648: [Plasma][Java] Add API to get metadata and data at the same time\nURL: https://github.com/apache/arrow/pull/2862#discussion_r229930363\n \n \n\n ##########\n File path: java/plasma/src/main/java/org/apache/arrow/plasma/PlasmaClient.java\n ##########\n @@ -110,6 +109,33 @@ public void fetch(byte[][] objectIds) {\n     PlasmaClientJNI.fetch(conn, objectIds);\n   }\n \n+  @Override\n+  public List<ObjectStoreData> get(byte[][] objectIds, int timeoutMs) {\n+    ByteBuffer[][] bufs = PlasmaClientJNI.get(conn, objectIds, timeoutMs);\n+    assert bufs.length == objectIds.length;\n+\n+    List<ObjectStoreData> ret = new ArrayList<>();\n+    for (int i = 0; i < bufs.length; i++) {\n+      ByteBuffer databuf = bufs[i][0];\n+      ByteBuffer metabuf = bufs[i][1];\n+      if (databuf == null) {\n+        ret.add(new ObjectStoreData(null, null));\n+      } else {\n+        byte[] data = new byte[databuf.remaining()];\n+        databuf.get(data);\n \n Review comment:\n   I notice that the other `get` function has the same copy operation.\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-11-01T03:32:32.689+0000",
                    "updated": "2018-11-01T03:32:32.689+0000",
                    "started": "2018-11-01T03:32:32.688+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "161428",
                    "issueId": "13195046"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13195046/worklog/161476",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "guoyuhong commented on issue #2862: ARROW-3648: [Plasma][Java] Add API to get metadata and data at the same time\nURL: https://github.com/apache/arrow/pull/2862#issuecomment-434954367\n \n \n   @praveenbingo I tried to make this a java unit test. But test failed with `java.lang.Exception: Please set plasma store path in env PLASMA_STORE`. If I set the Plasma Store path, there will \r\n   be `PlasmaClientTest.start:50 \u00bb UnsatisfiedLink no plasma_java in java.library.path`. The dynamic lib is not installed yet. I think that is the reason why this test is not a java unit test. Can I keep this test as it is?\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-11-01T07:18:52.545+0000",
                    "updated": "2018-11-01T07:18:52.545+0000",
                    "started": "2018-11-01T07:18:52.545+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "161476",
                    "issueId": "13195046"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13195046/worklog/161513",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "praveenbingo commented on issue #2862: ARROW-3648: [Plasma][Java] Add API to get metadata and data at the same time\nURL: https://github.com/apache/arrow/pull/2862#issuecomment-435013339\n \n \n   > @praveenbingo I tried to make this a java unit test. But test failed with `java.lang.Exception: Please set plasma store path in env PLASMA_STORE`. If I set the Plasma Store path, there will\r\n   > be `PlasmaClientTest.start:50 \u00bb UnsatisfiedLink no plasma_java in java.library.path`. The dynamic lib is not installed yet. I think that is the reason why this test is not a java unit test. Can I keep this test as it is?\r\n   \r\n   Sure either ways is ok, but if you want to pass the library path that can be passed as an arg to mvn too as described [here.](https://stackoverflow.com/questions/35366035/set-java-library-path-for-testing)\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-11-01T11:32:37.777+0000",
                    "updated": "2018-11-01T11:32:37.777+0000",
                    "started": "2018-11-01T11:32:37.777+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "161513",
                    "issueId": "13195046"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13195046/worklog/161561",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "guoyuhong commented on issue #2862: ARROW-3648: [Plasma][Java] Add API to get metadata and data at the same time\nURL: https://github.com/apache/arrow/pull/2862#issuecomment-435047687\n \n \n   @praveenbingo Thanks for the information!\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-11-01T13:54:13.480+0000",
                    "updated": "2018-11-01T13:54:13.480+0000",
                    "started": "2018-11-01T13:54:13.478+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "161561",
                    "issueId": "13195046"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13195046/worklog/161605",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "guoyuhong commented on issue #2862: ARROW-3648: [Plasma][Java] Add API to get metadata and data at the same time\nURL: https://github.com/apache/arrow/pull/2862#issuecomment-435082850\n \n \n   @xhochy Do you have any comment?\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-11-01T15:41:34.346+0000",
                    "updated": "2018-11-01T15:41:34.346+0000",
                    "started": "2018-11-01T15:41:34.345+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "161605",
                    "issueId": "13195046"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13195046/worklog/162204",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "guoyuhong commented on issue #2862: ARROW-3648: [Plasma][Java] Add API to get metadata and data at the same time\nURL: https://github.com/apache/arrow/pull/2862#issuecomment-435572720\n \n \n   @robertnishihara Hi, Robert, could you take a look at this PR?\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-11-03T09:10:03.394+0000",
                    "updated": "2018-11-03T09:10:03.394+0000",
                    "started": "2018-11-03T09:10:03.394+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "162204",
                    "issueId": "13195046"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13195046/worklog/162255",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "robertnishihara closed pull request #2862: ARROW-3648: [Plasma][Java] Add API to get metadata and data at the same time\nURL: https://github.com/apache/arrow/pull/2862\n \n \n   \n\nThis is a PR merged from a forked repository.\nAs GitHub hides the original diff on merge, it is displayed below for\nthe sake of provenance:\n\nAs this is a foreign pull request (from a fork), the diff is supplied\nbelow (as it won't show otherwise due to GitHub magic):\n\ndiff --git a/java/plasma/pom.xml b/java/plasma/pom.xml\nindex be0d700db0..d50171a309 100644\n--- a/java/plasma/pom.xml\n+++ b/java/plasma/pom.xml\n@@ -18,16 +18,16 @@\n     </parent>\n     <artifactId>arrow-plasma</artifactId>\n     <name>Arrow Plasma Client</name>\n-    <build>  \n-        <plugins>  \n-            <plugin>  \n-                <groupId>org.apache.maven.plugins</groupId>  \n-                <artifactId>maven-compiler-plugin</artifactId>  \n-                <configuration>  \n-                    <source>1.8</source>  \n-                    <target>1.8</target>  \n-                </configuration>  \n-            </plugin>  \n-        </plugins>  \n+    <build>\n+        <plugins>\n+            <plugin>\n+                <groupId>org.apache.maven.plugins</groupId>\n+                <artifactId>maven-compiler-plugin</artifactId>\n+                <configuration>\n+                    <source>1.8</source>\n+                    <target>1.8</target>\n+                </configuration>\n+            </plugin>\n+        </plugins>\n     </build>\n </project>\ndiff --git a/java/plasma/src/main/java/org/apache/arrow/plasma/ObjectStoreLink.java b/java/plasma/src/main/java/org/apache/arrow/plasma/ObjectStoreLink.java\nindex a328eec306..d4371d202f 100644\n--- a/java/plasma/src/main/java/org/apache/arrow/plasma/ObjectStoreLink.java\n+++ b/java/plasma/src/main/java/org/apache/arrow/plasma/ObjectStoreLink.java\n@@ -24,6 +24,17 @@\n  */\n public interface ObjectStoreLink {\n \n+  class ObjectStoreData {\n+\n+    ObjectStoreData(byte[] metadata, byte[] data) {\n+      this.data = data;\n+      this.metadata = metadata;\n+    }\n+\n+    public final byte[] metadata;\n+    public final byte[] data;\n+  }\n+\n   /**\n    * Put value in the local plasma store with object ID <tt>objectId</tt>.\n    *\n@@ -34,7 +45,7 @@\n   void put(byte[] objectId, byte[] value, byte[] metadata);\n \n   /**\n-   * Create a buffer from the PlasmaStore based on the <tt>objectId</tt>.\n+   * Get a buffer from the PlasmaStore based on the <tt>objectId</tt>.\n    *\n    * @param objectId The object ID used to identify the object.\n    * @param timeoutMs The number of milliseconds that the get call should block before timing out\n@@ -48,7 +59,7 @@\n   }\n \n   /**\n-   * Create buffers from the PlasmaStore based on <tt>objectIds</tt>.\n+   * Get buffers from the PlasmaStore based on <tt>objectIds</tt>.\n    *\n    * @param objectIds List of object IDs used to identify some objects.\n    * @param timeoutMs The number of milliseconds that the get call should block before timing out\n@@ -58,6 +69,16 @@\n    */\n   List<byte[]> get(byte[][] objectIds, int timeoutMs, boolean isMetadata);\n \n+  /**\n+   * Get buffer pairs (data & metadata) from the PlasmaStore based on <tt>objectIds</tt>.\n+   *\n+   * @param objectIds List of object IDs used to identify some objects.\n+   * @param timeoutMs The number of milliseconds that the get call should block before timing out\n+   * and returning. Pass -1 if the call should block and 0 if the call should return immediately.\n+   * @return List of Pairs of PlasmaBuffer wrapping objects and its metadata.\n+   */\n+  List<ObjectStoreData> get(byte[][] objectIds, int timeoutMs);\n+\n   /**\n    * Wait until <tt>numReturns</tt> objects in <tt>objectIds</tt> are ready.\n    *\ndiff --git a/java/plasma/src/main/java/org/apache/arrow/plasma/PlasmaClient.java b/java/plasma/src/main/java/org/apache/arrow/plasma/PlasmaClient.java\nindex 3388dedc18..8257c9a5fa 100644\n--- a/java/plasma/src/main/java/org/apache/arrow/plasma/PlasmaClient.java\n+++ b/java/plasma/src/main/java/org/apache/arrow/plasma/PlasmaClient.java\n@@ -23,7 +23,6 @@\n import java.util.List;\n \n \n-\n /**\n  * The PlasmaClient is used to interface with a plasma store and manager.\n  *\n@@ -110,6 +109,33 @@ public void fetch(byte[][] objectIds) {\n     PlasmaClientJNI.fetch(conn, objectIds);\n   }\n \n+  @Override\n+  public List<ObjectStoreData> get(byte[][] objectIds, int timeoutMs) {\n+    ByteBuffer[][] bufs = PlasmaClientJNI.get(conn, objectIds, timeoutMs);\n+    assert bufs.length == objectIds.length;\n+\n+    List<ObjectStoreData> ret = new ArrayList<>();\n+    for (int i = 0; i < bufs.length; i++) {\n+      ByteBuffer databuf = bufs[i][0];\n+      ByteBuffer metabuf = bufs[i][1];\n+      if (databuf == null) {\n+        ret.add(new ObjectStoreData(null, null));\n+      } else {\n+        byte[] data = new byte[databuf.remaining()];\n+        databuf.get(data);\n+        byte[] meta;\n+        if (metabuf != null) {\n+          meta = new byte[metabuf.remaining()];\n+          metabuf.get(meta);\n+        } else {\n+          meta = null;\n+        }\n+        ret.add(new ObjectStoreData(data, meta));\n+      }\n+    }\n+    return ret;\n+  }\n+\n   @Override\n   public long evict(long numBytes) {\n     return PlasmaClientJNI.evict(conn, numBytes);\ndiff --git a/java/plasma/src/test/java/org/apache/arrow/plasma/PlasmaClientTest.java b/java/plasma/src/test/java/org/apache/arrow/plasma/PlasmaClientTest.java\nindex 8b42952f62..a4f8f86a4f 100644\n--- a/java/plasma/src/test/java/org/apache/arrow/plasma/PlasmaClientTest.java\n+++ b/java/plasma/src/test/java/org/apache/arrow/plasma/PlasmaClientTest.java\n@@ -155,6 +155,41 @@ public void doTest() {\n     boolean notExsit = pLink.contains(id3);\n     assert !notExsit;\n     System.out.println(\"Plasma java client contains test success.\");\n+\n+    byte[] id4 =  new byte[20];\n+    Arrays.fill(id4, (byte)4);\n+    byte[] value4 =  new byte[20];\n+    byte[] meta4 = \"META4\".getBytes();\n+    Arrays.fill(value4, (byte)14);\n+    pLink.put(id4, value4, meta4);\n+\n+    byte[] id5 =  new byte[20];\n+    Arrays.fill(id5, (byte)5);\n+    byte[] value5 =  new byte[20];\n+    byte[] meta5 = \"META5\".getBytes();\n+    Arrays.fill(value5, (byte)15);\n+    pLink.put(id5, value5, meta5);\n+\n+    byte[] getMeta4 = pLink.get(id4, timeoutMs, true);\n+    assert Arrays.equals(meta4, getMeta4);\n+    byte[] getValue4 = pLink.get(id4, timeoutMs, false);\n+    assert Arrays.equals(value4, getValue4);\n+    byte[][] ids4 = new byte[1][];\n+    ids4[0] = id4;\n+    ObjectStoreLink.ObjectStoreData fullData4 = pLink.get(ids4, timeoutMs).get(0);\n+    assert Arrays.equals(meta4, fullData4.metadata);\n+    assert Arrays.equals(value4, fullData4.data);\n+\n+    byte[] getMeta5 = pLink.get(id5, timeoutMs, true);\n+    assert Arrays.equals(meta5, getMeta5);\n+    byte[] getValue5 = pLink.get(id5, timeoutMs, false);\n+    assert Arrays.equals(value5, getValue5);\n+    byte[][] ids5 = new byte[1][];\n+    ids5[0] = id5;\n+    ObjectStoreLink.ObjectStoreData fullData5 = pLink.get(ids5, timeoutMs).get(0);\n+    assert Arrays.equals(meta5, fullData5.metadata);\n+    assert Arrays.equals(value5, fullData5.data);\n+    System.out.println(\"Plasma java client metadata get test success.\");\n     cleanup();\n     System.out.println(\"All test success.\");\n \n\n\n \n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-11-03T21:29:03.224+0000",
                    "updated": "2018-11-03T21:29:03.224+0000",
                    "started": "2018-11-03T21:29:03.223+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "162255",
                    "issueId": "13195046"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
            "id": "4",
            "description": "An improvement or enhancement to an existing feature or task.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
            "name": "Improvement",
            "subtask": false,
            "avatarId": 21140
        },
        "timespent": 8400,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@1d43fcd9[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@fc41b4[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@64192287[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@68a3e51[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@38199317[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@2b49107e[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@6e9028a[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@51c6dcb0[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@25b36cb4[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@461a429c[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@829e587[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@6fed8b6e[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 8400,
        "customfield_12312520": null,
        "customfield_12312521": "Sat Nov 03 21:28:50 UTC 2018",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2018-11-03T21:28:50.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-3648/watchers",
            "watchCount": 1,
            "isWatching": false
        },
        "created": "2018-10-30T07:32:30.000+0000",
        "updated": "2018-11-03T21:29:03.000+0000",
        "timeoriginalestimate": null,
        "description": "Current Arrow Java Plasma client has no API to get the metadata and data together in one API call. If we split this process into two API calls, the object status could be different. Current observation shows that the first call could be empty(object not stored yet) while the second call will success but the metadata and data does not match.\r\n",
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "2h 20m",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 8400
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[Plasma] Add API to get metadata and data at the same time",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13195046/comment/16674218",
                    "id": "16674218",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=robertnishihara",
                        "name": "robertnishihara",
                        "key": "robertnishihara",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Robert Nishihara",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "Issue resolved by pull request 2862\n[https://github.com/apache/arrow/pull/2862]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=robertnishihara",
                        "name": "robertnishihara",
                        "key": "robertnishihara",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Robert Nishihara",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2018-11-03T21:28:50.129+0000",
                    "updated": "2018-11-03T21:28:50.129+0000"
                }
            ],
            "maxResults": 1,
            "total": 1,
            "startAt": 0
        },
        "customfield_12311820": "0|i3zsen:",
        "customfield_12314139": null
    }
}