{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13204058",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13204058",
    "key": "ARROW-4008",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12343858",
                "id": "12343858",
                "description": "",
                "name": "0.12.0",
                "archived": false,
                "released": true,
                "releaseDate": "2019-01-20"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "name": "Major",
            "id": "3"
        },
        "labels": [
            "ci-failure",
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
            "name": "wesm",
            "key": "wesmckinn",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
            },
            "displayName": "Wes McKinney",
            "active": true,
            "timeZone": "America/New_York"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12328935",
                "id": "12328935",
                "name": "C++"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
            "name": "wesm",
            "key": "wesmckinn",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
            },
            "displayName": "Wes McKinney",
            "active": true,
            "timeZone": "America/New_York"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
            "name": "wesm",
            "key": "wesmckinn",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
            },
            "displayName": "Wes McKinney",
            "active": true,
            "timeZone": "America/New_York"
        },
        "aggregateprogress": {
            "progress": 2400,
            "total": 2400,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 2400,
            "total": 2400,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-4008/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 4,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13204058/worklog/174672",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm opened a new pull request #3166: ARROW-4008: [C++] Work around /tmp instability in Travis CI when running integration tests\nURL: https://github.com/apache/arrow/pull/3166\n \n \n   My best guess is that /tmp can swallow files. I found bug reports from a few years ago, but not much definitive guidance: https://github.com/travis-ci/travis-ci/issues/4549. \r\n   \r\n   Here's an example of a failing build: https://travis-ci.org/apache/arrow/jobs/467092615#L2567. I could expect the file to not exist rather than being 0 size, but hard to say what's going on. I ran the integration tests hundreds of times in a loop locally and did not reproduce the issue. \r\n   \r\n   I also added an `integration` target with the intent of eventually speeding up this build by building only the targets needed for the protocol integration tests. I opened https://issues.apache.org/jira/browse/ARROW-4010 about making this possible\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-12-12T20:58:14.795+0000",
                    "updated": "2018-12-12T20:58:14.795+0000",
                    "started": "2018-12-12T20:58:14.795+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "174672",
                    "issueId": "13204058"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13204058/worklog/174676",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on issue #3166: ARROW-4008: [C++] Work around /tmp instability in Travis CI when running integration tests\nURL: https://github.com/apache/arrow/pull/3166#issuecomment-446748175\n \n \n   Doh, the problem is simpler than that:\r\n   \r\n   ```\r\n   sh: 1: /home/travis/build/apache/arrow/cpp-build/debug/arrow-file-to-stream: not found\r\n   cat /home/travis/build/apache/arrow/integration_temp/0183f25f_struct_example.producer_file_as_stream | /home/travis/build/apache/arrow/cpp-build/debug/arrow-stream-to-file > /home/travis/build/apache/arrow/integration_temp/0183f25f_struct_example.consumer_stream_as_file\r\n   sh: 1: /home/travis/build/apache/arrow/cpp-build/debug/arrow-stream-to-file: not found\r\n   ```\r\n   \r\n   The utilities aren't being built...\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-12-12T21:20:11.298+0000",
                    "updated": "2018-12-12T21:20:11.298+0000",
                    "started": "2018-12-12T21:20:11.298+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "174676",
                    "issueId": "13204058"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13204058/worklog/174684",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on issue #3166: ARROW-4008: [C++] Restore ARROW_BUILD_UTILITIES to fix integration tests\nURL: https://github.com/apache/arrow/pull/3166#issuecomment-446763586\n \n \n   +1. Merging this so we get more passing CI builds\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-12-12T22:11:00.408+0000",
                    "updated": "2018-12-12T22:11:00.408+0000",
                    "started": "2018-12-12T22:11:00.407+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "174684",
                    "issueId": "13204058"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13204058/worklog/174685",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm closed pull request #3166: ARROW-4008: [C++] Restore ARROW_BUILD_UTILITIES to fix integration tests\nURL: https://github.com/apache/arrow/pull/3166\n \n \n   \n\nThis is a PR merged from a forked repository.\nAs GitHub hides the original diff on merge, it is displayed below for\nthe sake of provenance:\n\nAs this is a foreign pull request (from a fork), the diff is supplied\nbelow (as it won't show otherwise due to GitHub magic):\n\ndiff --git a/ci/travis_before_script_cpp.sh b/ci/travis_before_script_cpp.sh\nindex a77fcd8749..5f398e8c6e 100755\n--- a/ci/travis_before_script_cpp.sh\n+++ b/ci/travis_before_script_cpp.sh\n@@ -68,7 +68,7 @@ $CMAKE_COMMON_FLAGS \\\n -DARROW_BUILD_BENCHMARKS=ON \\\n -DARROW_BUILD_TESTS=ON \\\n -DARROW_BUILD_EXAMPLES=ON \\\n--DARROW_BUILD_UTILITIES=OFF \\\n+-DARROW_BUILD_UTILITIES=ON \\\n -DARROW_INSTALL_NAME_RPATH=OFF\"\n fi\n \ndiff --git a/ci/travis_script_integration.sh b/ci/travis_script_integration.sh\nindex 286acacd74..9c2786282b 100755\n--- a/ci/travis_script_integration.sh\n+++ b/ci/travis_script_integration.sh\n@@ -52,7 +52,12 @@ conda install -y nomkl\n # Expensive dependencies install from Continuum package repo\n conda install -y pip numpy six\n \n-python integration_test.py --debug\n+# ARROW-4008: Create a directory to write temporary files since /tmp can be\n+# unstable in Travis CI\n+INTEGRATION_TEMPDIR=$TRAVIS_BUILD_DIR/integration_temp\n+mkdir -p $INTEGRATION_TEMPDIR\n+\n+python integration_test.py --debug --tempdir=$INTEGRATION_TEMPDIR\n \n popd\n \ndiff --git a/cpp/src/arrow/ipc/CMakeLists.txt b/cpp/src/arrow/ipc/CMakeLists.txt\nindex bda4ef3e41..44c56f0332 100644\n--- a/cpp/src/arrow/ipc/CMakeLists.txt\n+++ b/cpp/src/arrow/ipc/CMakeLists.txt\n@@ -15,6 +15,10 @@\n # specific language governing permissions and limitations\n # under the License.\n \n+# Targets required for protocol integration testing\n+add_custom_target(integration)\n+add_dependencies(arrow integration)\n+\n #######################################\n # Messaging and interprocess communication\n \n@@ -31,13 +35,14 @@ if (NOT ARROW_BOOST_HEADER_ONLY)\n     EXTRA_LINK_LIBS gflags_static)\n \n   # Test is being built\n-  if (TARGET json-integration-test)\n+  if (TARGET arrow-json-integration-test)\n+    add_dependencies(integration arrow-json-integration-test)\n     if (UNIX)\n       if (APPLE)\n-        set_target_properties(json-integration-test\n+        set_target_properties(arrow-json-integration-test\n           PROPERTIES LINK_FLAGS \"-undefined dynamic_lookup\")\n       else()\n-        target_link_libraries(json-integration-test PRIVATE pthread)\n+        target_link_libraries(arrow-json-integration-test PRIVATE pthread)\n       endif()\n     endif()\n   endif()\n@@ -113,10 +118,13 @@ if(NOT WIN32)\n endif()\n \n if (ARROW_BUILD_UTILITIES)\n-  add_executable(file-to-stream file-to-stream.cc)\n-  target_link_libraries(file-to-stream ${UTIL_LINK_LIBS})\n-  add_executable(stream-to-file stream-to-file.cc)\n-  target_link_libraries(stream-to-file ${UTIL_LINK_LIBS})\n+  add_executable(arrow-file-to-stream file-to-stream.cc)\n+  target_link_libraries(arrow-file-to-stream ${UTIL_LINK_LIBS})\n+  add_executable(arrow-stream-to-file stream-to-file.cc)\n+  target_link_libraries(arrow-stream-to-file ${UTIL_LINK_LIBS})\n+\n+  add_dependencies(integration arrow-file-to-stream)\n+  add_dependencies(integration arrow-stream-to-file)\n endif()\n \n ADD_ARROW_BENCHMARK(read-write-benchmark\ndiff --git a/integration/integration_test.py b/integration/integration_test.py\nindex 3bd37bdd80..7101af2516 100644\n--- a/integration/integration_test.py\n+++ b/integration/integration_test.py\n@@ -893,8 +893,8 @@ def generate_dictionary_case():\n                           dictionaries=[dict1, dict2])\n \n \n-def get_generated_json_files():\n-    temp_dir = tempfile.mkdtemp()\n+def get_generated_json_files(tempdir=None):\n+    tempdir = tempdir or tempfile.mkdtemp()\n \n     def _temp_path():\n         return\n@@ -910,7 +910,7 @@ def _temp_path():\n \n     generated_paths = []\n     for file_obj in file_objs:\n-        out_path = os.path.join(temp_dir, 'generated_' +\n+        out_path = os.path.join(tempdir, 'generated_' +\n                                 file_obj.name + '.json')\n         file_obj.write(out_path)\n         generated_paths.append(out_path)\n@@ -924,10 +924,10 @@ def _temp_path():\n \n class IntegrationRunner(object):\n \n-    def __init__(self, json_files, testers, debug=False):\n+    def __init__(self, json_files, testers, tempdir=None, debug=False):\n         self.json_files = json_files\n         self.testers = testers\n-        self.temp_dir = tempfile.mkdtemp()\n+        self.temp_dir = tempdir or tempfile.mkdtemp()\n         self.debug = debug\n \n     def run(self):\n@@ -950,10 +950,12 @@ def _compare_implementations(self, producer, consumer):\n \n             name = os.path.splitext(os.path.basename(json_path))[0]\n \n+            file_id = guid()[:8]\n+\n             # Make the random access file\n             print('-- Creating binary inputs')\n-            producer_file_path = os.path.join(self.temp_dir, guid() + '_' +\n-                                              name + '.json_to_arrow')\n+            producer_file_path = os.path.join(self.temp_dir, file_id + '_' +\n+                                              name + '.json_as_file')\n             producer.json_to_file(json_path, producer_file_path)\n \n             # Validate the file\n@@ -961,10 +963,12 @@ def _compare_implementations(self, producer, consumer):\n             consumer.validate(json_path, producer_file_path)\n \n             print('-- Validating stream')\n-            producer_stream_path = os.path.join(self.temp_dir, guid() + '_' +\n-                                                name + '.arrow_to_stream')\n-            consumer_file_path = os.path.join(self.temp_dir, guid() + '_' +\n-                                              name + '.stream_to_arrow')\n+            producer_stream_path = os.path.join(self.temp_dir, file_id + '_' +\n+                                                name +\n+                                                '.producer_file_as_stream')\n+            consumer_file_path = os.path.join(self.temp_dir, file_id + '_' +\n+                                              name +\n+                                              '.consumer_stream_as_file')\n             producer.file_to_stream(producer_file_path,\n                                     producer_stream_path)\n             consumer.stream_to_file(producer_stream_path,\n@@ -1054,8 +1058,8 @@ class CPPTester(Tester):\n         os.path.join(ARROW_HOME, 'cpp/build/debug'))\n \n     CPP_INTEGRATION_EXE = os.path.join(EXE_PATH, 'arrow-json-integration-test')\n-    STREAM_TO_FILE = os.path.join(EXE_PATH, 'stream-to-file')\n-    FILE_TO_STREAM = os.path.join(EXE_PATH, 'file-to-stream')\n+    STREAM_TO_FILE = os.path.join(EXE_PATH, 'arrow-stream-to-file')\n+    FILE_TO_STREAM = os.path.join(EXE_PATH, 'arrow-file-to-stream')\n \n     name = 'C++'\n \n@@ -1162,15 +1166,16 @@ def get_static_json_files():\n     return glob.glob(glob_pattern)\n \n \n-def run_all_tests(debug=False):\n+def run_all_tests(debug=False, tempdir=None):\n     testers = [CPPTester(debug=debug),\n                JavaTester(debug=debug),\n                JSTester(debug=debug)]\n     static_json_files = get_static_json_files()\n-    generated_json_files = get_generated_json_files()\n+    generated_json_files = get_generated_json_files(tempdir=tempdir)\n     json_files = static_json_files + generated_json_files\n \n-    runner = IntegrationRunner(json_files, testers, debug=debug)\n+    runner = IntegrationRunner(json_files, testers,\n+                               tempdir=tempdir, debug=debug)\n     runner.run()\n     print('-- All tests passed!')\n \n@@ -1195,6 +1200,10 @@ def write_js_test_json(directory):\n     parser.add_argument('--debug', dest='debug', action='store_true',\n                         default=False,\n                         help='Run executables in debug mode as relevant')\n+    parser.add_argument('--tempdir', dest='tempdir',\n+                        default=tempfile.mkdtemp(),\n+                        help=('Directory to use for writing '\n+                              'integration test temporary files'))\n     args = parser.parse_args()\n     if args.generated_json_path:\n         try:\n@@ -1204,4 +1213,4 @@ def write_js_test_json(directory):\n                 raise\n         write_js_test_json(args.generated_json_path)\n     else:\n-        run_all_tests(debug=args.debug)\n+        run_all_tests(debug=args.debug, tempdir=args.tempdir)\n\n\n \n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-12-12T22:11:26.427+0000",
                    "updated": "2018-12-12T22:11:26.427+0000",
                    "started": "2018-12-12T22:11:26.426+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "174685",
                    "issueId": "13204058"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
            "id": "1",
            "description": "A problem which impairs or prevents the functions of the product.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
            "name": "Bug",
            "subtask": false,
            "avatarId": 21133
        },
        "timespent": 2400,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@30950b38[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@7500b0ea[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@1d74a9ba[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@6d03cd1e[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@5d1dc1bf[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@5d4acb27[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@65cb904d[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@1653cad7[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@25f0f19b[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@2e6815f1[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@1718b189[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@1f15d4cf[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 2400,
        "customfield_12312520": null,
        "customfield_12312521": "Wed Dec 12 22:11:17 UTC 2018",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2018-12-12T22:11:17.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-4008/watchers",
            "watchCount": 1,
            "isWatching": false
        },
        "created": "2018-12-12T17:58:28.000+0000",
        "updated": "2019-03-01T23:33:42.000+0000",
        "timeoriginalestimate": null,
        "description": "See consistent CI failures:\r\n\r\n{code}\r\n-- Creating binary inputs\r\n/home/travis/build/apache/arrow/cpp-build/debug/arrow-json-integration-test --integration --arrow=/tmp/tmpx3363_ef/ffd61e898f66410093235f7b3edc0b8f_struct_example.json_to_arrow --json=/home/travis/build/apache/arrow/integration/data/struct_example.json --mode=JSON_TO_ARROW\r\n-- Validating file\r\n/home/travis/build/apache/arrow/cpp-build/debug/arrow-json-integration-test --integration --arrow=/tmp/tmpx3363_ef/ffd61e898f66410093235f7b3edc0b8f_struct_example.json_to_arrow --json=/home/travis/build/apache/arrow/integration/data/struct_example.json --mode=VALIDATE\r\n-- Validating stream\r\n/home/travis/build/apache/arrow/cpp-build/debug/file-to-stream /tmp/tmpx3363_ef/ffd61e898f66410093235f7b3edc0b8f_struct_example.json_to_arrow > /tmp/tmpx3363_ef/d9968e28006f42ee9df239f50c71231a_struct_example.arrow_to_stream\r\ncat /tmp/tmpx3363_ef/d9968e28006f42ee9df239f50c71231a_struct_example.arrow_to_stream | /home/travis/build/apache/arrow/cpp-build/debug/stream-to-file > /tmp/tmpx3363_ef/eaf061ea34e64a08bf38800d4fe5a9be_struct_example.stream_to_arrow\r\n/home/travis/build/apache/arrow/cpp-build/debug/arrow-json-integration-test --integration --arrow=/tmp/tmpx3363_ef/eaf061ea34e64a08bf38800d4fe5a9be_struct_example.stream_to_arrow --json=/home/travis/build/apache/arrow/integration/data/struct_example.json --mode=VALIDATE\r\nCommand failed: /home/travis/build/apache/arrow/cpp-build/debug/arrow-json-integration-test --integration --arrow=/tmp/tmpx3363_ef/eaf061ea34e64a08bf38800d4fe5a9be_struct_example.stream_to_arrow --json=/home/travis/build/apache/arrow/integration/data/struct_example.json --mode=VALIDATE\r\nWith output:\r\n--------------\r\nError message: Invalid: /home/travis/build/apache/arrow/cpp/src/arrow/ipc/json-integration-test.cc:151 code: RecordBatchFileReader::Open(arrow_file.get(), &arrow_reader)\r\n/home/travis/build/apache/arrow/cpp/src/arrow/ipc/reader.cc:624 code: ReadFooter()\r\nFile is too small: 0\r\n{code}\r\n\r\nhttps://travis-ci.org/apache/arrow/jobs/467092615#L2567\r\n\r\n",
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "40m",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 2400
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[C++] Integration test executable failure",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13204058/comment/16719265",
                    "id": "16719265",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "I'm not sure what code changes could have caused this. I will investigate",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2018-12-12T17:58:52.010+0000",
                    "updated": "2018-12-12T17:58:52.010+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13204058/comment/16719505",
                    "id": "16719505",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "Issue resolved by pull request 3166\n[https://github.com/apache/arrow/pull/3166]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2018-12-12T22:11:17.984+0000",
                    "updated": "2018-12-12T22:11:17.984+0000"
                }
            ],
            "maxResults": 2,
            "total": 2,
            "startAt": 0
        },
        "customfield_12311820": "0|s01geg:",
        "customfield_12314139": null
    }
}