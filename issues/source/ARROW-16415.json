{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13442518",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13442518",
    "key": "ARROW-16415",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12351550",
                "id": "12351550",
                "name": "9.0.0",
                "archived": false,
                "released": true,
                "releaseDate": "2022-08-03"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "name": "Major",
            "id": "3"
        },
        "labels": [
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12350591",
                "id": "12350591",
                "description": "",
                "name": "7.0.0",
                "archived": false,
                "released": true,
                "releaseDate": "2022-02-03"
            }
        ],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [
            {
                "id": "12639059",
                "self": "https://issues.apache.org/jira/rest/api/2/issueLink/12639059",
                "type": {
                    "id": "12310460",
                    "name": "Child-Issue",
                    "inward": "is a child of",
                    "outward": "is a parent of",
                    "self": "https://issues.apache.org/jira/rest/api/2/issueLinkType/12310460"
                },
                "inwardIssue": {
                    "id": "13438633",
                    "key": "ARROW-16155",
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13438633",
                    "fields": {
                        "summary": "[R] lubridate functions for 9.0.0",
                        "status": {
                            "self": "https://issues.apache.org/jira/rest/api/2/status/6",
                            "description": "The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/closed.png",
                            "name": "Closed",
                            "id": "6",
                            "statusCategory": {
                                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                                "id": 3,
                                "key": "done",
                                "colorName": "green",
                                "name": "Done"
                            }
                        },
                        "priority": {
                            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
                            "name": "Major",
                            "id": "3"
                        },
                        "issuetype": {
                            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
                            "id": "4",
                            "description": "An improvement or enhancement to an existing feature or task.",
                            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
                            "name": "Improvement",
                            "subtask": false,
                            "avatarId": 21140
                        }
                    }
                }
            },
            {
                "id": "12639208",
                "self": "https://issues.apache.org/jira/rest/api/2/issueLink/12639208",
                "type": {
                    "id": "10030",
                    "name": "Reference",
                    "inward": "is related to",
                    "outward": "relates to",
                    "self": "https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"
                },
                "outwardIssue": {
                    "id": "13442926",
                    "key": "ARROW-16439",
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13442926",
                    "fields": {
                        "summary": "[R] Implement bindings for lubridate's fast_strptime",
                        "status": {
                            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
                            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
                            "name": "Resolved",
                            "id": "5",
                            "statusCategory": {
                                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                                "id": 3,
                                "key": "done",
                                "colorName": "green",
                                "name": "Done"
                            }
                        },
                        "priority": {
                            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
                            "name": "Major",
                            "id": "3"
                        },
                        "issuetype": {
                            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/7",
                            "id": "7",
                            "description": "The sub-task of the issue",
                            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21146&avatarType=issuetype",
                            "name": "Sub-task",
                            "subtask": true,
                            "avatarId": 21146
                        }
                    }
                }
            },
            {
                "id": "12639057",
                "self": "https://issues.apache.org/jira/rest/api/2/issueLink/12639057",
                "type": {
                    "id": "10001",
                    "name": "dependent",
                    "inward": "is depended upon by",
                    "outward": "depends upon",
                    "self": "https://issues.apache.org/jira/rest/api/2/issueLinkType/10001"
                },
                "outwardIssue": {
                    "id": "13379037",
                    "key": "ARROW-12820",
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13379037",
                    "fields": {
                        "summary": "[C++] Strptime ignores timezone information",
                        "status": {
                            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
                            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
                            "name": "Resolved",
                            "id": "5",
                            "statusCategory": {
                                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                                "id": 3,
                                "key": "done",
                                "colorName": "green",
                                "name": "Done"
                            }
                        },
                        "priority": {
                            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
                            "name": "Major",
                            "id": "3"
                        },
                        "issuetype": {
                            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
                            "id": "4",
                            "description": "An improvement or enhancement to an existing feature or task.",
                            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
                            "name": "Improvement",
                            "subtask": false,
                            "avatarId": 21140
                        }
                    }
                }
            }
        ],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=dragosmg",
            "name": "dragosmg",
            "key": "dragosmg",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34061",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34061",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34061",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34061"
            },
            "displayName": "Drago\u0219 Moldovan-Gr\u00fcnfeld",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12333008",
                "id": "12333008",
                "name": "R"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=dragosmg",
            "name": "dragosmg",
            "key": "dragosmg",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34061",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34061",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34061",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34061"
            },
            "displayName": "Drago\u0219 Moldovan-Gr\u00fcnfeld",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=dragosmg",
            "name": "dragosmg",
            "key": "dragosmg",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34061",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34061",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34061",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34061"
            },
            "displayName": "Drago\u0219 Moldovan-Gr\u00fcnfeld",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "aggregateprogress": {
            "progress": 7200,
            "total": 7200,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 7200,
            "total": 7200,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-16415/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 12,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13442518/worklog/772051",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "github-actions[bot] commented on PR #13190:\nURL: https://github.com/apache/arrow/pull/13190#issuecomment-1130294553\n\n   https://issues.apache.org/jira/browse/ARROW-16415\n\n\n",
                    "created": "2022-05-18T17:33:04.363+0000",
                    "updated": "2022-05-18T17:33:04.363+0000",
                    "started": "2022-05-18T17:33:04.363+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "772051",
                    "issueId": "13442518"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13442518/worklog/774989",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "thisisnic commented on code in PR #13190:\nURL: https://github.com/apache/arrow/pull/13190#discussion_r882560057\n\n\n##########\nr/tests/testthat/test-dplyr-funcs-datetime.R:\n##########\n@@ -50,49 +50,70 @@ test_df <- tibble::tibble(\n test_that(\"strptime\", {\n   t_string <- tibble(x = c(\"2018-10-07 19:04:05\", NA))\n   t_stamp <- tibble(x = c(lubridate::ymd_hms(\"2018-10-07 19:04:05\"), NA))\n+  t_stamp_with_pm_tz <- tibble(\n+    x = c(lubridate::ymd_hms(\"2018-10-07 19:04:05\", tz = \"Pacific/Marquesas\"), NA)\n+  )\n+\n+  withr::with_timezone(\"Pacific/Marquesas\", {\n\nReview Comment:\n   Please can you chuck in a comment above this set of tests as to why we're using `expect_equal()` and not `compare_dplyr_binding()`?\n\n\n\n",
                    "created": "2022-05-26T11:08:12.337+0000",
                    "updated": "2022-05-26T11:08:12.337+0000",
                    "started": "2022-05-26T11:08:12.337+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "774989",
                    "issueId": "13442518"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13442518/worklog/774992",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "dragosmg commented on code in PR #13190:\nURL: https://github.com/apache/arrow/pull/13190#discussion_r882564217\n\n\n##########\nr/tests/testthat/test-dplyr-funcs-datetime.R:\n##########\n@@ -50,49 +50,70 @@ test_df <- tibble::tibble(\n test_that(\"strptime\", {\n   t_string <- tibble(x = c(\"2018-10-07 19:04:05\", NA))\n   t_stamp <- tibble(x = c(lubridate::ymd_hms(\"2018-10-07 19:04:05\"), NA))\n+  t_stamp_with_pm_tz <- tibble(\n+    x = c(lubridate::ymd_hms(\"2018-10-07 19:04:05\", tz = \"Pacific/Marquesas\"), NA)\n+  )\n+\n+  withr::with_timezone(\"Pacific/Marquesas\", {\n\nReview Comment:\n   Done.\n\n\n\n",
                    "created": "2022-05-26T11:14:27.974+0000",
                    "updated": "2022-05-26T11:14:27.974+0000",
                    "started": "2022-05-26T11:14:27.974+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "774992",
                    "issueId": "13442518"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13442518/worklog/777209",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jonkeane commented on code in PR #13190:\nURL: https://github.com/apache/arrow/pull/13190#discussion_r887364317\n\n\n##########\nr/tests/testthat/test-dplyr-funcs-datetime.R:\n##########\n@@ -50,49 +50,72 @@ test_df <- tibble::tibble(\n test_that(\"strptime\", {\n   t_string <- tibble(x = c(\"2018-10-07 19:04:05\", NA))\n   t_stamp <- tibble(x = c(lubridate::ymd_hms(\"2018-10-07 19:04:05\"), NA))\n+  t_stamp_with_pm_tz <- tibble(\n+    x = c(lubridate::ymd_hms(\"2018-10-07 19:04:05\", tz = \"Pacific/Marquesas\"), NA)\n+  )\n+\n+  # base::strptime returns a POSIXlt (a list) => we cannot use compare_dplyr_binding\n+  # => we use expect_equal\n+  withr::with_timezone(\"Pacific/Marquesas\", {\n+    expect_equal(\n+      t_string %>%\n+        record_batch() %>%\n+        mutate(\n+          x = strptime(x, format = \"%Y-%m-%d %H:%M:%S\")\n+        ) %>%\n+        collect(),\n+      t_stamp_with_pm_tz\n+    )\n+  })\n+\n+  expect_equal(\n+    t_string %>%\n+      arrow_table() %>%\n+      mutate(\n+        x = strptime(x, format = \"%Y-%m-%d %H:%M:%S\", tz = \"Pacific/Marquesas\")\n+      ) %>%\n+      collect(),\n+    t_stamp_with_pm_tz\n+  )\n \n   expect_equal(\n     t_string %>%\n       Table$create() %>%\n       mutate(\n-        x = strptime(x)\n+        x = strptime(x, tz = \"UTC\")\n       ) %>%\n       collect(),\n-    t_stamp,\n-    ignore_attr = \"tzone\"\n+    t_stamp\n   )\n \n   expect_equal(\n     t_string %>%\n       Table$create() %>%\n       mutate(\n-        x = strptime(x, format = \"%Y-%m-%d %H:%M:%S\")\n+        x = strptime(x, format = \"%Y-%m-%d %H:%M:%S\", tz = \"UTC\")\n       ) %>%\n       collect(),\n-    t_stamp,\n-    ignore_attr = \"tzone\"\n+    t_stamp\n   )\n \n   expect_equal(\n     t_string %>%\n       Table$create() %>%\n       mutate(\n-        x = strptime(x, format = \"%Y-%m-%d %H:%M:%S\", unit = \"ns\")\n+        x = strptime(x, format = \"%Y-%m-%d %H:%M:%S\", unit = \"ns\", tz = \"UTC\")\n       ) %>%\n       collect(),\n-    t_stamp,\n-    ignore_attr = \"tzone\"\n+    t_stamp\n   )\n \n   expect_equal(\n     t_string %>%\n       Table$create() %>%\n       mutate(\n-        x = strptime(x, format = \"%Y-%m-%d %H:%M:%S\", unit = \"s\")\n+        x = strptime(x, format = \"%Y-%m-%d %H:%M:%S\", unit = \"s\", tz = \"UTC\")\n\nReview Comment:\n   It might be good to test a non-UTC, non-current timezone here too, just to make sure we're dealing with timezones the way we think we should.\n\n\n\n##########\nr/R/dplyr-funcs-datetime.R:\n##########\n@@ -28,25 +28,52 @@ register_bindings_datetime <- function() {\n }\n \n register_bindings_datetime_utility <- function() {\n-  register_binding(\"strptime\", function(x, format = \"%Y-%m-%d %H:%M:%S\", tz = NULL,\n+  register_binding(\"strptime\", function(x,\n+                                        format = \"%Y-%m-%d %H:%M:%S\",\n+                                        tz = \"\",\n                                         unit = \"ms\") {\n     # Arrow uses unit for time parsing, strptime() does not.\n     # Arrow has no default option for strptime (format, unit),\n     # we suggest following format = \"%Y-%m-%d %H:%M:%S\", unit = MILLI/1L/\"ms\",\n     # (ARROW-12809)\n \n-    # ParseTimestampStrptime currently ignores the timezone information (ARROW-12820).\n-    # Stop if tz is provided.\n-    if (is.character(tz)) {\n-      arrow_not_supported(\"Time zone argument\")\n-    }\n+    unit <- make_valid_time_unit(\n+      unit,\n+      c(valid_time64_units, valid_time32_units)\n+    )\n+\n+    output <- build_expr(\n+      \"strptime\",\n+      x,\n+      options =\n+        list(\n+          format = format,\n+          unit = unit,\n+          error_is_null = TRUE\n+        )\n+    )\n \n-    unit <- make_valid_time_unit(unit, c(valid_time64_units, valid_time32_units))\n+    if (tz == \"\") {\n+      tz <- Sys.timezone()\n+    }\n \n-    build_expr(\"strptime\", x, options = list(format = format, unit = unit, error_is_null = TRUE))\n+    if (!is.null(tz)) {\n+      output <- build_expr(\n+        \"assume_timezone\",\n+        output,\n+        options =\n+          list(\n+            timezone = tz\n+          )\n+      )\n+    }\n+    output\n\nReview Comment:\n   It might be helpful to add in a comment explaining why `assume_timezone` here is used instead of `cast`\n\n\n\n",
                    "created": "2022-06-01T22:59:55.144+0000",
                    "updated": "2022-06-01T22:59:55.144+0000",
                    "started": "2022-06-01T22:59:55.144+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "777209",
                    "issueId": "13442518"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13442518/worklog/778561",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "dragosmg commented on code in PR #13190:\nURL: https://github.com/apache/arrow/pull/13190#discussion_r889984990\n\n\n##########\nr/tests/testthat/test-dplyr-funcs-datetime.R:\n##########\n@@ -50,49 +50,72 @@ test_df <- tibble::tibble(\n test_that(\"strptime\", {\n   t_string <- tibble(x = c(\"2018-10-07 19:04:05\", NA))\n   t_stamp <- tibble(x = c(lubridate::ymd_hms(\"2018-10-07 19:04:05\"), NA))\n+  t_stamp_with_pm_tz <- tibble(\n+    x = c(lubridate::ymd_hms(\"2018-10-07 19:04:05\", tz = \"Pacific/Marquesas\"), NA)\n+  )\n+\n+  # base::strptime returns a POSIXlt (a list) => we cannot use compare_dplyr_binding\n+  # => we use expect_equal\n+  withr::with_timezone(\"Pacific/Marquesas\", {\n+    expect_equal(\n+      t_string %>%\n+        record_batch() %>%\n+        mutate(\n+          x = strptime(x, format = \"%Y-%m-%d %H:%M:%S\")\n+        ) %>%\n+        collect(),\n+      t_stamp_with_pm_tz\n+    )\n+  })\n+\n+  expect_equal(\n+    t_string %>%\n+      arrow_table() %>%\n+      mutate(\n+        x = strptime(x, format = \"%Y-%m-%d %H:%M:%S\", tz = \"Pacific/Marquesas\")\n+      ) %>%\n+      collect(),\n+    t_stamp_with_pm_tz\n+  )\n \n   expect_equal(\n     t_string %>%\n       Table$create() %>%\n       mutate(\n-        x = strptime(x)\n+        x = strptime(x, tz = \"UTC\")\n       ) %>%\n       collect(),\n-    t_stamp,\n-    ignore_attr = \"tzone\"\n+    t_stamp\n   )\n \n   expect_equal(\n     t_string %>%\n       Table$create() %>%\n       mutate(\n-        x = strptime(x, format = \"%Y-%m-%d %H:%M:%S\")\n+        x = strptime(x, format = \"%Y-%m-%d %H:%M:%S\", tz = \"UTC\")\n       ) %>%\n       collect(),\n-    t_stamp,\n-    ignore_attr = \"tzone\"\n+    t_stamp\n   )\n \n   expect_equal(\n     t_string %>%\n       Table$create() %>%\n       mutate(\n-        x = strptime(x, format = \"%Y-%m-%d %H:%M:%S\", unit = \"ns\")\n+        x = strptime(x, format = \"%Y-%m-%d %H:%M:%S\", unit = \"ns\", tz = \"UTC\")\n       ) %>%\n       collect(),\n-    t_stamp,\n-    ignore_attr = \"tzone\"\n+    t_stamp\n   )\n \n   expect_equal(\n     t_string %>%\n       Table$create() %>%\n       mutate(\n-        x = strptime(x, format = \"%Y-%m-%d %H:%M:%S\", unit = \"s\")\n+        x = strptime(x, format = \"%Y-%m-%d %H:%M:%S\", unit = \"s\", tz = \"UTC\")\n\nReview Comment:\n   Do you mean in addition to this test?\r\n   \r\n   https://github.com/dragosmg/arrow/blob/e34f552427f19903a163fa63326bd3adfd81b648/r/tests/testthat/test-dplyr-funcs-datetime.R#L71-L79 \n\n\n\n",
                    "created": "2022-06-06T09:38:51.631+0000",
                    "updated": "2022-06-06T09:38:51.631+0000",
                    "started": "2022-06-06T09:38:51.631+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "778561",
                    "issueId": "13442518"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13442518/worklog/778562",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "dragosmg commented on code in PR #13190:\nURL: https://github.com/apache/arrow/pull/13190#discussion_r889987812\n\n\n##########\nr/R/dplyr-funcs-datetime.R:\n##########\n@@ -28,25 +28,52 @@ register_bindings_datetime <- function() {\n }\n \n register_bindings_datetime_utility <- function() {\n-  register_binding(\"strptime\", function(x, format = \"%Y-%m-%d %H:%M:%S\", tz = NULL,\n+  register_binding(\"strptime\", function(x,\n+                                        format = \"%Y-%m-%d %H:%M:%S\",\n+                                        tz = \"\",\n                                         unit = \"ms\") {\n     # Arrow uses unit for time parsing, strptime() does not.\n     # Arrow has no default option for strptime (format, unit),\n     # we suggest following format = \"%Y-%m-%d %H:%M:%S\", unit = MILLI/1L/\"ms\",\n     # (ARROW-12809)\n \n-    # ParseTimestampStrptime currently ignores the timezone information (ARROW-12820).\n-    # Stop if tz is provided.\n-    if (is.character(tz)) {\n-      arrow_not_supported(\"Time zone argument\")\n-    }\n+    unit <- make_valid_time_unit(\n+      unit,\n+      c(valid_time64_units, valid_time32_units)\n+    )\n+\n+    output <- build_expr(\n+      \"strptime\",\n+      x,\n+      options =\n+        list(\n+          format = format,\n+          unit = unit,\n+          error_is_null = TRUE\n+        )\n+    )\n \n-    unit <- make_valid_time_unit(unit, c(valid_time64_units, valid_time32_units))\n+    if (tz == \"\") {\n+      tz <- Sys.timezone()\n+    }\n \n-    build_expr(\"strptime\", x, options = list(format = format, unit = unit, error_is_null = TRUE))\n+    if (!is.null(tz)) {\n+      output <- build_expr(\n+        \"assume_timezone\",\n+        output,\n+        options =\n+          list(\n+            timezone = tz\n+          )\n+      )\n+    }\n+    output\n\nReview Comment:\n   Done\n\n\n\n",
                    "created": "2022-06-06T09:42:46.876+0000",
                    "updated": "2022-06-06T09:42:46.876+0000",
                    "started": "2022-06-06T09:42:46.876+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "778562",
                    "issueId": "13442518"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13442518/worklog/778768",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jonkeane commented on code in PR #13190:\nURL: https://github.com/apache/arrow/pull/13190#discussion_r890584364\n\n\n##########\nr/tests/testthat/test-dplyr-funcs-datetime.R:\n##########\n@@ -50,49 +50,72 @@ test_df <- tibble::tibble(\n test_that(\"strptime\", {\n   t_string <- tibble(x = c(\"2018-10-07 19:04:05\", NA))\n   t_stamp <- tibble(x = c(lubridate::ymd_hms(\"2018-10-07 19:04:05\"), NA))\n+  t_stamp_with_pm_tz <- tibble(\n+    x = c(lubridate::ymd_hms(\"2018-10-07 19:04:05\", tz = \"Pacific/Marquesas\"), NA)\n+  )\n+\n+  # base::strptime returns a POSIXlt (a list) => we cannot use compare_dplyr_binding\n+  # => we use expect_equal\n+  withr::with_timezone(\"Pacific/Marquesas\", {\n+    expect_equal(\n+      t_string %>%\n+        record_batch() %>%\n+        mutate(\n+          x = strptime(x, format = \"%Y-%m-%d %H:%M:%S\")\n+        ) %>%\n+        collect(),\n+      t_stamp_with_pm_tz\n+    )\n+  })\n+\n+  expect_equal(\n+    t_string %>%\n+      arrow_table() %>%\n+      mutate(\n+        x = strptime(x, format = \"%Y-%m-%d %H:%M:%S\", tz = \"Pacific/Marquesas\")\n+      ) %>%\n+      collect(),\n+    t_stamp_with_pm_tz\n+  )\n \n   expect_equal(\n     t_string %>%\n       Table$create() %>%\n       mutate(\n-        x = strptime(x)\n+        x = strptime(x, tz = \"UTC\")\n       ) %>%\n       collect(),\n-    t_stamp,\n-    ignore_attr = \"tzone\"\n+    t_stamp\n   )\n \n   expect_equal(\n     t_string %>%\n       Table$create() %>%\n       mutate(\n-        x = strptime(x, format = \"%Y-%m-%d %H:%M:%S\")\n+        x = strptime(x, format = \"%Y-%m-%d %H:%M:%S\", tz = \"UTC\")\n       ) %>%\n       collect(),\n-    t_stamp,\n-    ignore_attr = \"tzone\"\n+    t_stamp\n   )\n \n   expect_equal(\n     t_string %>%\n       Table$create() %>%\n       mutate(\n-        x = strptime(x, format = \"%Y-%m-%d %H:%M:%S\", unit = \"ns\")\n+        x = strptime(x, format = \"%Y-%m-%d %H:%M:%S\", unit = \"ns\", tz = \"UTC\")\n       ) %>%\n       collect(),\n-    t_stamp,\n-    ignore_attr = \"tzone\"\n+    t_stamp\n   )\n \n   expect_equal(\n     t_string %>%\n       Table$create() %>%\n       mutate(\n-        x = strptime(x, format = \"%Y-%m-%d %H:%M:%S\", unit = \"s\")\n+        x = strptime(x, format = \"%Y-%m-%d %H:%M:%S\", unit = \"s\", tz = \"UTC\")\n\nReview Comment:\n   Nope, that's good. It might be worth adding a comment explaining the significance of that (along with some of the other tests around it). \n\n\n\n",
                    "created": "2022-06-06T21:27:25.412+0000",
                    "updated": "2022-06-06T21:27:25.412+0000",
                    "started": "2022-06-06T21:27:25.412+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "778768",
                    "issueId": "13442518"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13442518/worklog/778769",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jonkeane commented on code in PR #13190:\nURL: https://github.com/apache/arrow/pull/13190#discussion_r890584898\n\n\n##########\nr/R/dplyr-funcs-datetime.R:\n##########\n@@ -57,6 +57,7 @@ register_bindings_datetime_utility <- function() {\n       tz <- Sys.timezone()\n     }\n \n+    # convert a \"timezone-naive\" into a \"timezone-aware\" timestamp\n\nReview Comment:\n   Could you expand a little bit more here? What about these timestamps make them timezone-naive? And why is that important?\n\n\n\n",
                    "created": "2022-06-06T21:28:20.471+0000",
                    "updated": "2022-06-06T21:28:20.471+0000",
                    "started": "2022-06-06T21:28:20.471+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "778769",
                    "issueId": "13442518"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13442518/worklog/778921",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "dragosmg commented on code in PR #13190:\nURL: https://github.com/apache/arrow/pull/13190#discussion_r890926256\n\n\n##########\nr/R/dplyr-funcs-datetime.R:\n##########\n@@ -57,6 +57,7 @@ register_bindings_datetime_utility <- function() {\n       tz <- Sys.timezone()\n     }\n \n+    # convert a \"timezone-naive\" into a \"timezone-aware\" timestamp\n\nReview Comment:\n   Done. Hopefully that offers a bit more clarity.\n\n\n\n",
                    "created": "2022-06-07T08:25:31.550+0000",
                    "updated": "2022-06-07T08:25:31.550+0000",
                    "started": "2022-06-07T08:25:31.549+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "778921",
                    "issueId": "13442518"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13442518/worklog/778935",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "dragosmg commented on code in PR #13190:\nURL: https://github.com/apache/arrow/pull/13190#discussion_r890964832\n\n\n##########\nr/tests/testthat/test-dplyr-funcs-datetime.R:\n##########\n@@ -50,49 +50,72 @@ test_df <- tibble::tibble(\n test_that(\"strptime\", {\n   t_string <- tibble(x = c(\"2018-10-07 19:04:05\", NA))\n   t_stamp <- tibble(x = c(lubridate::ymd_hms(\"2018-10-07 19:04:05\"), NA))\n+  t_stamp_with_pm_tz <- tibble(\n+    x = c(lubridate::ymd_hms(\"2018-10-07 19:04:05\", tz = \"Pacific/Marquesas\"), NA)\n+  )\n+\n+  # base::strptime returns a POSIXlt (a list) => we cannot use compare_dplyr_binding\n+  # => we use expect_equal\n+  withr::with_timezone(\"Pacific/Marquesas\", {\n+    expect_equal(\n+      t_string %>%\n+        record_batch() %>%\n+        mutate(\n+          x = strptime(x, format = \"%Y-%m-%d %H:%M:%S\")\n+        ) %>%\n+        collect(),\n+      t_stamp_with_pm_tz\n+    )\n+  })\n+\n+  expect_equal(\n+    t_string %>%\n+      arrow_table() %>%\n+      mutate(\n+        x = strptime(x, format = \"%Y-%m-%d %H:%M:%S\", tz = \"Pacific/Marquesas\")\n+      ) %>%\n+      collect(),\n+    t_stamp_with_pm_tz\n+  )\n \n   expect_equal(\n     t_string %>%\n       Table$create() %>%\n       mutate(\n-        x = strptime(x)\n+        x = strptime(x, tz = \"UTC\")\n       ) %>%\n       collect(),\n-    t_stamp,\n-    ignore_attr = \"tzone\"\n+    t_stamp\n   )\n \n   expect_equal(\n     t_string %>%\n       Table$create() %>%\n       mutate(\n-        x = strptime(x, format = \"%Y-%m-%d %H:%M:%S\")\n+        x = strptime(x, format = \"%Y-%m-%d %H:%M:%S\", tz = \"UTC\")\n       ) %>%\n       collect(),\n-    t_stamp,\n-    ignore_attr = \"tzone\"\n+    t_stamp\n   )\n \n   expect_equal(\n     t_string %>%\n       Table$create() %>%\n       mutate(\n-        x = strptime(x, format = \"%Y-%m-%d %H:%M:%S\", unit = \"ns\")\n+        x = strptime(x, format = \"%Y-%m-%d %H:%M:%S\", unit = \"ns\", tz = \"UTC\")\n       ) %>%\n       collect(),\n-    t_stamp,\n-    ignore_attr = \"tzone\"\n+    t_stamp\n   )\n \n   expect_equal(\n     t_string %>%\n       Table$create() %>%\n       mutate(\n-        x = strptime(x, format = \"%Y-%m-%d %H:%M:%S\", unit = \"s\")\n+        x = strptime(x, format = \"%Y-%m-%d %H:%M:%S\", unit = \"s\", tz = \"UTC\")\n\nReview Comment:\n   I added a comment and renamed one of the test tibbles. Hopefully that helps.\n\n\n\n",
                    "created": "2022-06-07T09:02:10.005+0000",
                    "updated": "2022-06-07T09:02:10.005+0000",
                    "started": "2022-06-07T09:02:10.005+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "778935",
                    "issueId": "13442518"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13442518/worklog/779048",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jonkeane commented on code in PR #13190:\nURL: https://github.com/apache/arrow/pull/13190#discussion_r891147299\n\n\n##########\nr/tests/testthat/test-dplyr-funcs-datetime.R:\n##########\n@@ -49,50 +49,79 @@ test_df <- tibble::tibble(\n \n test_that(\"strptime\", {\n   t_string <- tibble(x = c(\"2018-10-07 19:04:05\", NA))\n-  t_stamp <- tibble(x = c(lubridate::ymd_hms(\"2018-10-07 19:04:05\"), NA))\n+  # lubridate defaults to \"UTC\" as timezone => t_stamp is in \"UTC\"\n+  t_stamp_with_utc_tz <- tibble(x = c(lubridate::ymd_hms(\"2018-10-07 19:04:05\"), NA))\n+  t_stamp_with_pm_tz <- tibble(\n+    x = c(lubridate::ymd_hms(\"2018-10-07 19:04:05\", tz = \"Pacific/Marquesas\"), NA)\n+  )\n+\n+  # base::strptime returns a POSIXlt (a list) => we cannot use compare_dplyr_binding\n+  # => we use expect_equal for the tests below\n+\n+  withr::with_timezone(\"Pacific/Marquesas\", {\n+    # the default value for strptime's `tz` argument is \"\", which is interpreted\n+    # as the current timezone. we test here if the strptime binding picks up\n+    # correctly the current timezone (similarly to the base R version)\n+    expect_equal(\n+      t_string %>%\n+        record_batch() %>%\n+        mutate(\n+          x = strptime(x, format = \"%Y-%m-%d %H:%M:%S\")\n+        ) %>%\n+        collect(),\n+      t_stamp_with_pm_tz\n+    )\n+  })\n+\n+  # adding a timezone to a timezone-naive timestamp works\n\nReview Comment:\n   ```suggestion\r\n     # adding a timezone to a timezone-naive timestamp works\r\n     # and since our TZ when running the test is (typically) Pacific/Marquesas\r\n     # this also tests that assigning a TZ different from the current session one\r\n     # works as expected\r\n   ```\n\n\n\n",
                    "created": "2022-06-07T12:20:43.975+0000",
                    "updated": "2022-06-07T12:20:43.975+0000",
                    "started": "2022-06-07T12:20:43.975+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "779048",
                    "issueId": "13442518"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13442518/worklog/779050",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jonkeane merged PR #13190:\nURL: https://github.com/apache/arrow/pull/13190\n\n\n",
                    "created": "2022-06-07T12:24:03.512+0000",
                    "updated": "2022-06-07T12:24:03.512+0000",
                    "started": "2022-06-07T12:24:03.512+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "779050",
                    "issueId": "13442518"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
            "id": "4",
            "description": "An improvement or enhancement to an existing feature or task.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
            "name": "Improvement",
            "subtask": false,
            "avatarId": 21140
        },
        "timespent": 7200,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@57ab3880[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@60f52336[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@59e0f53e[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@104581a7[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@427f18e3[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@18674a42[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@46700575[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@7a04fca5[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@40864b06[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@62912c0e[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@240cd684[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@79b0f774[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 7200,
        "customfield_12312520": null,
        "customfield_12312521": "Tue Jun 07 12:24:08 UTC 2022",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2022-06-07T12:24:08.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-16415/watchers",
            "watchCount": 1,
            "isWatching": false
        },
        "created": "2022-04-29T13:33:49.000+0000",
        "updated": "2022-06-07T12:24:08.000+0000",
        "timeoriginalestimate": null,
        "description": "{{strptime}} mentions it does not support {{tz}} - the timezone argument. ARROW-12820 has been addressed and the binding definition need updating.",
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "2h",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 7200
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[R] Update strptime bindings to use tz ",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13442518/comment/17550969",
                    "id": "17550969",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=jonkeane",
                        "name": "jonkeane",
                        "key": "jonkeane",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34057",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34057",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34057",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34057"
                        },
                        "displayName": "Jonathan Keane",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "Issue resolved by pull request 13190\n[https://github.com/apache/arrow/pull/13190]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=jonkeane",
                        "name": "jonkeane",
                        "key": "jonkeane",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34057",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34057",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34057",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34057"
                        },
                        "displayName": "Jonathan Keane",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2022-06-07T12:24:08.933+0000",
                    "updated": "2022-06-07T12:24:08.933+0000"
                }
            ],
            "maxResults": 1,
            "total": 1,
            "startAt": 0
        },
        "customfield_12311820": "0|z11y54:",
        "customfield_12314139": null
    }
}