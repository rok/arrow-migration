{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13415907",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13415907",
    "key": "ARROW-15016",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12351550",
                "id": "12351550",
                "name": "9.0.0",
                "archived": false,
                "released": true,
                "releaseDate": "2022-08-03"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "name": "Major",
            "id": "3"
        },
        "labels": [
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=dragosmg",
            "name": "dragosmg",
            "key": "dragosmg",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34061",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34061",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34061",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34061"
            },
            "displayName": "Drago\u0219 Moldovan-Gr\u00fcnfeld",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12333008",
                "id": "12333008",
                "name": "R"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=jonkeane",
            "name": "jonkeane",
            "key": "jonkeane",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34057",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34057",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34057",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34057"
            },
            "displayName": "Jonathan Keane",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "subtasks": [
            {
                "id": "13469678",
                "key": "ARROW-16957",
                "self": "https://issues.apache.org/jira/rest/api/2/issue/13469678",
                "fields": {
                    "summary": "[R] Read about ExecPlan and ExecPlan::ToString",
                    "status": {
                        "self": "https://issues.apache.org/jira/rest/api/2/status/6",
                        "description": "The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.",
                        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/closed.png",
                        "name": "Closed",
                        "id": "6",
                        "statusCategory": {
                            "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                            "id": 3,
                            "key": "done",
                            "colorName": "green",
                            "name": "Done"
                        }
                    },
                    "priority": {
                        "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
                        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
                        "name": "Major",
                        "id": "3"
                    },
                    "issuetype": {
                        "self": "https://issues.apache.org/jira/rest/api/2/issuetype/7",
                        "id": "7",
                        "description": "The sub-task of the issue",
                        "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21146&avatarType=issuetype",
                        "name": "Sub-task",
                        "subtask": true,
                        "avatarId": 21146
                    }
                }
            },
            {
                "id": "13469682",
                "key": "ARROW-16959",
                "self": "https://issues.apache.org/jira/rest/api/2/issue/13469682",
                "fields": {
                    "summary": "[R] Implement a $ToString() method for ExecPlan R6 class",
                    "status": {
                        "self": "https://issues.apache.org/jira/rest/api/2/status/6",
                        "description": "The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.",
                        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/closed.png",
                        "name": "Closed",
                        "id": "6",
                        "statusCategory": {
                            "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                            "id": 3,
                            "key": "done",
                            "colorName": "green",
                            "name": "Done"
                        }
                    },
                    "priority": {
                        "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
                        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
                        "name": "Major",
                        "id": "3"
                    },
                    "issuetype": {
                        "self": "https://issues.apache.org/jira/rest/api/2/issuetype/7",
                        "id": "7",
                        "description": "The sub-task of the issue",
                        "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21146&avatarType=issuetype",
                        "name": "Sub-task",
                        "subtask": true,
                        "avatarId": 21146
                    }
                }
            },
            {
                "id": "13469683",
                "key": "ARROW-16960",
                "self": "https://issues.apache.org/jira/rest/api/2/issue/13469683",
                "fields": {
                    "summary": "[R] Implement a print() method for the ExecPlan R6 class",
                    "status": {
                        "self": "https://issues.apache.org/jira/rest/api/2/status/6",
                        "description": "The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.",
                        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/closed.png",
                        "name": "Closed",
                        "id": "6",
                        "statusCategory": {
                            "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                            "id": 3,
                            "key": "done",
                            "colorName": "green",
                            "name": "Done"
                        }
                    },
                    "priority": {
                        "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
                        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
                        "name": "Major",
                        "id": "3"
                    },
                    "issuetype": {
                        "self": "https://issues.apache.org/jira/rest/api/2/issuetype/7",
                        "id": "7",
                        "description": "The sub-task of the issue",
                        "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21146&avatarType=issuetype",
                        "name": "Sub-task",
                        "subtask": true,
                        "avatarId": 21146
                    }
                }
            },
            {
                "id": "13469684",
                "key": "ARROW-16961",
                "self": "https://issues.apache.org/jira/rest/api/2/issue/13469684",
                "fields": {
                    "summary": "[R] Update print.arrow_dplyr_query",
                    "status": {
                        "self": "https://issues.apache.org/jira/rest/api/2/status/6",
                        "description": "The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.",
                        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/closed.png",
                        "name": "Closed",
                        "id": "6",
                        "statusCategory": {
                            "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                            "id": 3,
                            "key": "done",
                            "colorName": "green",
                            "name": "Done"
                        }
                    },
                    "priority": {
                        "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
                        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
                        "name": "Major",
                        "id": "3"
                    },
                    "issuetype": {
                        "self": "https://issues.apache.org/jira/rest/api/2/issuetype/7",
                        "id": "7",
                        "description": "The sub-task of the issue",
                        "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21146&avatarType=issuetype",
                        "name": "Sub-task",
                        "subtask": true,
                        "avatarId": 21146
                    }
                }
            },
            {
                "id": "13469685",
                "key": "ARROW-16962",
                "self": "https://issues.apache.org/jira/rest/api/2/issue/13469685",
                "fields": {
                    "summary": "[R] Implement `show_arrow_query()`",
                    "status": {
                        "self": "https://issues.apache.org/jira/rest/api/2/status/6",
                        "description": "The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.",
                        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/closed.png",
                        "name": "Closed",
                        "id": "6",
                        "statusCategory": {
                            "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                            "id": 3,
                            "key": "done",
                            "colorName": "green",
                            "name": "Done"
                        }
                    },
                    "priority": {
                        "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
                        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
                        "name": "Major",
                        "id": "3"
                    },
                    "issuetype": {
                        "self": "https://issues.apache.org/jira/rest/api/2/issuetype/7",
                        "id": "7",
                        "description": "The sub-task of the issue",
                        "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21146&avatarType=issuetype",
                        "name": "Sub-task",
                        "subtask": true,
                        "avatarId": 21146
                    }
                }
            },
            {
                "id": "13469686",
                "key": "ARROW-16963",
                "self": "https://issues.apache.org/jira/rest/api/2/issue/13469686",
                "fields": {
                    "summary": "[R][Doc] Document show_query() for arrow_dplyr_query ",
                    "status": {
                        "self": "https://issues.apache.org/jira/rest/api/2/status/6",
                        "description": "The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.",
                        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/closed.png",
                        "name": "Closed",
                        "id": "6",
                        "statusCategory": {
                            "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                            "id": 3,
                            "key": "done",
                            "colorName": "green",
                            "name": "Done"
                        }
                    },
                    "priority": {
                        "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
                        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
                        "name": "Major",
                        "id": "3"
                    },
                    "issuetype": {
                        "self": "https://issues.apache.org/jira/rest/api/2/issuetype/7",
                        "id": "7",
                        "description": "The sub-task of the issue",
                        "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21146&avatarType=issuetype",
                        "name": "Sub-task",
                        "subtask": true,
                        "avatarId": 21146
                    }
                }
            }
        ],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=jonkeane",
            "name": "jonkeane",
            "key": "jonkeane",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34057",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34057",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34057",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34057"
            },
            "displayName": "Jonathan Keane",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "aggregateprogress": {
            "progress": 67800,
            "total": 67800,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 67800,
            "total": 67800,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-15016/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 113,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13415907/worklog/788677",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "github-actions[bot] commented on PR #13541:\nURL: https://github.com/apache/arrow/pull/13541#issuecomment-1177938059\n\n   https://issues.apache.org/jira/browse/ARROW-15016\n\n\n",
                    "created": "2022-07-07T17:02:35.098+0000",
                    "updated": "2022-07-07T17:02:35.098+0000",
                    "started": "2022-07-07T17:02:35.097+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "788677",
                    "issueId": "13415907"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13415907/worklog/788682",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "dragosmg commented on code in PR #13541:\nURL: https://github.com/apache/arrow/pull/13541#discussion_r916107836\n\n\n##########\nr/src/arrowExports.cpp:\n##########\n@@ -4247,7 +4255,7 @@ BEGIN_CPP11\n END_CPP11\n }\n // recordbatch.cpp\n-int RecordBatch__num_rows(const std::shared_ptr<arrow::RecordBatch>& x);\n+r_vec_size RecordBatch__num_rows(const std::shared_ptr<arrow::RecordBatch>& x);\n\nReview Comment:\n   These changes (rows 4258 & 4853) were not added by me (arrowExports.cpp) is generated automatically. They are probably generated from code introduced sometime in the past.\n\n\n\n",
                    "created": "2022-07-07T17:14:36.603+0000",
                    "updated": "2022-07-07T17:14:36.603+0000",
                    "started": "2022-07-07T17:14:36.603+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "788682",
                    "issueId": "13415907"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13415907/worklog/788731",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nealrichardson commented on code in PR #13541:\nURL: https://github.com/apache/arrow/pull/13541#discussion_r916209171\n\n\n##########\nr/src/arrowExports.cpp:\n##########\n@@ -4247,7 +4255,7 @@ BEGIN_CPP11\n END_CPP11\n }\n // recordbatch.cpp\n-int RecordBatch__num_rows(const std::shared_ptr<arrow::RecordBatch>& x);\n+r_vec_size RecordBatch__num_rows(const std::shared_ptr<arrow::RecordBatch>& x);\n\nReview Comment:\n   https://github.com/apache/arrow/pull/13538\n\n\n\n",
                    "created": "2022-07-07T19:21:45.307+0000",
                    "updated": "2022-07-07T19:21:45.307+0000",
                    "started": "2022-07-07T19:21:45.306+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "788731",
                    "issueId": "13415907"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13415907/worklog/789748",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jonkeane commented on code in PR #13541:\nURL: https://github.com/apache/arrow/pull/13541#discussion_r918360302\n\n\n##########\nr/tests/testthat/test-dplyr-query.R:\n##########\n@@ -293,3 +293,23 @@ test_that(\"No duplicate field names are allowed in an arrow_dplyr_query\", {\n     )\n   )\n })\n+\n+test_that(\"show_exec_plan()\", {\n+  expect_snapshot(\n+    tbl %>%\n+      arrow_table() %>%\n+      filter(dbl > 2, chr != \"e\") %>%\n+      select(chr, int, lgl) %>%\n+      mutate(int_plus_ten = int + 10) %>%\n+      show_exec_plan()\n+  )\n+\n+  expect_snapshot(\n+    tbl %>%\n+      record_batch() %>%\n+      filter(dbl > 2, chr != \"e\") %>%\n+      select(chr, int, lgl) %>%\n+      mutate(int_plus_ten = int + 10) %>%\n+      show_exec_plan()\n+  )\n+})\n\nReview Comment:\n   It would be nice to have tests for the following as well (they might be somewhere overkill, see the paragraph below this, but those go through enough other machinery in R that it would be good to confirm that they don't fail):\r\n   \r\n   * a `summarise()`\r\n   * a join (it could even be a self join)\r\n   * a dataset querying multiple files (this one might be better in the datasets test file since the setup is already done there...)\r\n   \r\n   You also might consider asserting specific limited things about the output but not the whole output in a snapshot (e.g. does it include the columns referenced, does it have the boiler plate we expect won't change like `ExecPlan .* nodes`). The content of the output is more or less directly from C++, so if that were to change we would need to update these tests even if the C++ <-> R code hasn't changed at all.\n\n\n\n##########\nr/R/dplyr.R:\n##########\n@@ -219,6 +219,31 @@ tail.arrow_dplyr_query <- function(x, n = 6L, ...) {\n   x\n }\n \n+#' Show the details of an Arrow ExecPlan\n+#'\n+#' This is a function which gives more details about the `ExecPlan` of an\n+#' `arrow_dplyr_query` object. It is similar to `dplyr::show_query()`.\n+#'\n+#' @param x an `arrow_dplyr_query` to print the ExecPlan for.\n+#'\n+#' @return The argument, invisibly.\n+#' @export\n+#'\n+#' @examples\n\nReview Comment:\n   We probably want to mark this as: \r\n   \r\n   ```suggestion\r\n   #' @examplesIf arrow_with_dataset() & requireNamespace(\"dplyr\", quietly = TRUE)\r\n   ```\r\n   \r\n   But definitely the {dplyr} bit, since we don't depend on {dplyr} (only suggests) and CRAN will be upset if the example fails if {dplyr} isn't available.\n\n\n\n",
                    "created": "2022-07-11T21:33:25.833+0000",
                    "updated": "2022-07-11T21:33:25.833+0000",
                    "started": "2022-07-11T21:33:25.833+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "789748",
                    "issueId": "13415907"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13415907/worklog/789940",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "dragosmg commented on code in PR #13541:\nURL: https://github.com/apache/arrow/pull/13541#discussion_r918744975\n\n\n##########\nr/R/dplyr.R:\n##########\n@@ -219,6 +219,31 @@ tail.arrow_dplyr_query <- function(x, n = 6L, ...) {\n   x\n }\n \n+#' Show the details of an Arrow ExecPlan\n+#'\n+#' This is a function which gives more details about the `ExecPlan` of an\n+#' `arrow_dplyr_query` object. It is similar to `dplyr::show_query()`.\n+#'\n+#' @param x an `arrow_dplyr_query` to print the ExecPlan for.\n+#'\n+#' @return The argument, invisibly.\n+#' @export\n+#'\n+#' @examples\n\nReview Comment:\n   Thanks! Yep, there definitely were some things I wanted to finesse. Done.\n\n\n\n",
                    "created": "2022-07-12T09:19:21.809+0000",
                    "updated": "2022-07-12T09:19:21.809+0000",
                    "started": "2022-07-12T09:19:21.808+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "789940",
                    "issueId": "13415907"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13415907/worklog/790019",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "dragosmg commented on code in PR #13541:\nURL: https://github.com/apache/arrow/pull/13541#discussion_r918922055\n\n\n##########\nr/tests/testthat/test-dplyr-query.R:\n##########\n@@ -293,3 +293,23 @@ test_that(\"No duplicate field names are allowed in an arrow_dplyr_query\", {\n     )\n   )\n })\n+\n+test_that(\"show_exec_plan()\", {\n+  expect_snapshot(\n+    tbl %>%\n+      arrow_table() %>%\n+      filter(dbl > 2, chr != \"e\") %>%\n+      select(chr, int, lgl) %>%\n+      mutate(int_plus_ten = int + 10) %>%\n+      show_exec_plan()\n+  )\n+\n+  expect_snapshot(\n+    tbl %>%\n+      record_batch() %>%\n+      filter(dbl > 2, chr != \"e\") %>%\n+      select(chr, int, lgl) %>%\n+      mutate(int_plus_ten = int + 10) %>%\n+      show_exec_plan()\n+  )\n+})\n\nReview Comment:\n   Done\n\n\n\n",
                    "created": "2022-07-12T12:42:41.785+0000",
                    "updated": "2022-07-12T12:42:41.785+0000",
                    "started": "2022-07-12T12:42:41.785+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "790019",
                    "issueId": "13415907"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13415907/worklog/790073",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wjones127 commented on code in PR #13541:\nURL: https://github.com/apache/arrow/pull/13541#discussion_r919083216\n\n\n##########\nr/R/dplyr.R:\n##########\n@@ -219,6 +219,31 @@ tail.arrow_dplyr_query <- function(x, n = 6L, ...) {\n   x\n }\n \n+#' Show the details of an Arrow ExecPlan\n+#'\n+#' This is a function which gives more details about the `ExecPlan` of an\n\nReview Comment:\n   I feel like it might be helpful to spell the full name out at least once for clarity.\r\n   \r\n   ```suggestion\r\n   #' This is a function which gives more details about the Execution Plan of an\r\n   ```\n\n\n\n##########\nr/R/dplyr.R:\n##########\n@@ -219,6 +219,31 @@ tail.arrow_dplyr_query <- function(x, n = 6L, ...) {\n   x\n }\n \n+#' Show the details of an Arrow ExecPlan\n+#'\n+#' This is a function which gives more details about the `ExecPlan` of an\n+#' `arrow_dplyr_query` object. It is similar to `dplyr::show_query()`.\n\nReview Comment:\n   > It is similar to `dplyr::show_query()`.\r\n   \r\n   IMO, it feels more similar to `dplyr::explain()` to me, since we are essentially showing the logical plan of the query.\n\n\n\n",
                    "created": "2022-07-12T15:24:08.235+0000",
                    "updated": "2022-07-12T15:24:08.235+0000",
                    "started": "2022-07-12T15:24:08.234+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "790073",
                    "issueId": "13415907"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13415907/worklog/790074",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "dragosmg commented on code in PR #13541:\nURL: https://github.com/apache/arrow/pull/13541#discussion_r919127673\n\n\n##########\nr/R/dplyr.R:\n##########\n@@ -219,6 +219,31 @@ tail.arrow_dplyr_query <- function(x, n = 6L, ...) {\n   x\n }\n \n+#' Show the details of an Arrow ExecPlan\n+#'\n+#' This is a function which gives more details about the `ExecPlan` of an\n\nReview Comment:\n   Done.\n\n\n\n",
                    "created": "2022-07-12T15:43:11.145+0000",
                    "updated": "2022-07-12T15:43:11.145+0000",
                    "started": "2022-07-12T15:43:11.144+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "790074",
                    "issueId": "13415907"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13415907/worklog/790075",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "dragosmg commented on code in PR #13541:\nURL: https://github.com/apache/arrow/pull/13541#discussion_r919128257\n\n\n##########\nr/R/dplyr.R:\n##########\n@@ -219,6 +219,31 @@ tail.arrow_dplyr_query <- function(x, n = 6L, ...) {\n   x\n }\n \n+#' Show the details of an Arrow ExecPlan\n+#'\n+#' This is a function which gives more details about the `ExecPlan` of an\n+#' `arrow_dplyr_query` object. It is similar to `dplyr::show_query()`.\n\nReview Comment:\n   I think you are right. I've updated the roxygen header. \n\n\n\n",
                    "created": "2022-07-12T15:43:46.330+0000",
                    "updated": "2022-07-12T15:43:46.330+0000",
                    "started": "2022-07-12T15:43:46.330+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "790075",
                    "issueId": "13415907"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13415907/worklog/790076",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "dragosmg commented on PR #13541:\nURL: https://github.com/apache/arrow/pull/13541#issuecomment-1181929322\n\n   @wjones127 Thanks for the review. I definitely think we could expand this sort of functionality. Maybe we could keep `show_exec_plan()` as bare-bone and add an `explain.arrow_dplyr_query()` method with more bells and whistles (both in terms of information and formatting). What do you think?\n\n\n",
                    "created": "2022-07-12T15:43:47.550+0000",
                    "updated": "2022-07-12T15:43:47.550+0000",
                    "started": "2022-07-12T15:43:47.550+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "790076",
                    "issueId": "13415907"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13415907/worklog/790096",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wjones127 commented on PR #13541:\nURL: https://github.com/apache/arrow/pull/13541#issuecomment-1182014133\n\n   > Maybe we could keep show_exec_plan() as bare-bone and add an explain.arrow_dplyr_query() method with more bells and whistles (both in terms of information and formatting). What do you think?\r\n   \r\n   Yeah that makes sense to me \ud83d\udc4d \n\n\n",
                    "created": "2022-07-12T16:57:51.371+0000",
                    "updated": "2022-07-12T16:57:51.371+0000",
                    "started": "2022-07-12T16:57:51.370+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "790096",
                    "issueId": "13415907"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13415907/worklog/790127",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jonkeane commented on PR #13541:\nURL: https://github.com/apache/arrow/pull/13541#issuecomment-1182323939\n\n   > and add an explain.arrow_dplyr_query() method with more bells and whistles (both in terms of information and formatting). What do you think?\r\n   \r\n   I agree with this too \u2014 the current format is good cause it's _exactly what we get from C++_, so for the purposes of communicating with our colleagues working on Acero, that's fantastic. But I bet there are a few (maybe a bunch) of niceties that we would want to add that make them more relevant to R users.\n\n\n",
                    "created": "2022-07-12T19:15:53.734+0000",
                    "updated": "2022-07-12T19:15:53.734+0000",
                    "started": "2022-07-12T19:15:53.734+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "790127",
                    "issueId": "13415907"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13415907/worklog/790155",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nealrichardson commented on code in PR #13541:\nURL: https://github.com/apache/arrow/pull/13541#discussion_r919389871\n\n\n##########\nr/R/dplyr.R:\n##########\n@@ -219,6 +219,31 @@ tail.arrow_dplyr_query <- function(x, n = 6L, ...) {\n   x\n }\n \n+#' Show the details of an Arrow Execution Plan\n+#'\n+#' This is a function which gives more details about the Execution Plan (`ExecPlan`)\n+#' of an `arrow_dplyr_query` object. It is similar to `dplyr::explain()`.\n+#'\n+#' @param x an `arrow_dplyr_query` to print the `ExecPlan` for.\n+#'\n+#' @return The argument, invisibly.\n+#' @export\n+#'\n+#' @examplesIf arrow_with_dataset() & requireNamespace(\"dplyr\", quietly = TRUE)\n+#' library(dplyr)\n+#' mtcars %>%\n+#'   arrow_table() %>%\n+#'   filter(mpg > 20) %>%\n+#'   mutate(x = gear/carb) %>%\n+#'   show_exec_plan()\n+show_exec_plan <- function(x) {\n+  adq <- as_adq(x)\n+  plan <- ExecPlan$create()\n+  final_node <- plan$Build(x)\n+  cat(plan$ToString())\n\nReview Comment:\n   You're missing a few things here that get handled in ExecPlan_run: https://github.com/apache/arrow/blob/master/r/src/compute-exec.cpp#L67-L89\r\n   \r\n   So plan$ToString() will miss sorting and sorting + head/tail (topK). If you add some tests that include `arrange()`, you'll see they're not showing up. \r\n   \r\n   You could add a C++ function that does that first part of ExecPlan_run and creates the sink nodes, then calls ToString(). That would print everything.\n\n\n\n##########\nr/R/dplyr.R:\n##########\n@@ -219,6 +219,31 @@ tail.arrow_dplyr_query <- function(x, n = 6L, ...) {\n   x\n }\n \n+#' Show the details of an Arrow Execution Plan\n+#'\n+#' This is a function which gives more details about the Execution Plan (`ExecPlan`)\n+#' of an `arrow_dplyr_query` object. It is similar to `dplyr::explain()`.\n+#'\n+#' @param x an `arrow_dplyr_query` to print the `ExecPlan` for.\n+#'\n+#' @return The argument, invisibly.\n\nReview Comment:\n   ```suggestion\r\n   #' @return `x`, invisibly.\r\n   ```\n\n\n\n##########\nr/R/dplyr.R:\n##########\n@@ -219,6 +219,31 @@ tail.arrow_dplyr_query <- function(x, n = 6L, ...) {\n   x\n }\n \n+#' Show the details of an Arrow Execution Plan\n+#'\n+#' This is a function which gives more details about the Execution Plan (`ExecPlan`)\n+#' of an `arrow_dplyr_query` object. It is similar to `dplyr::explain()`.\n+#'\n+#' @param x an `arrow_dplyr_query` to print the `ExecPlan` for.\n+#'\n+#' @return The argument, invisibly.\n+#' @export\n+#'\n+#' @examplesIf arrow_with_dataset() & requireNamespace(\"dplyr\", quietly = TRUE)\n+#' library(dplyr)\n+#' mtcars %>%\n+#'   arrow_table() %>%\n+#'   filter(mpg > 20) %>%\n+#'   mutate(x = gear/carb) %>%\n+#'   show_exec_plan()\n+show_exec_plan <- function(x) {\n+  adq <- as_adq(x)\n\nReview Comment:\n   You aren't using `adq` below. Is it necessary?\n\n\n\n##########\nr/R/dplyr.R:\n##########\n@@ -219,6 +219,31 @@ tail.arrow_dplyr_query <- function(x, n = 6L, ...) {\n   x\n }\n \n+#' Show the details of an Arrow Execution Plan\n+#'\n+#' This is a function which gives more details about the Execution Plan (`ExecPlan`)\n+#' of an `arrow_dplyr_query` object. It is similar to `dplyr::explain()`.\n\nReview Comment:\n   ```suggestion\r\n   #' This is a function which gives more details about the logical query plan\r\n   #' that will be executed when evaluating an `arrow_dplyr_query` object.\r\n   #' It calls the C++ `ExecPlan` object's print method. \r\n   #' Functionally, it is similar to `dplyr::explain()`.\r\n   ```\n\n\n\n##########\nr/R/dplyr.R:\n##########\n@@ -219,6 +219,31 @@ tail.arrow_dplyr_query <- function(x, n = 6L, ...) {\n   x\n }\n \n+#' Show the details of an Arrow Execution Plan\n+#'\n+#' This is a function which gives more details about the Execution Plan (`ExecPlan`)\n+#' of an `arrow_dplyr_query` object. It is similar to `dplyr::explain()`.\n+#'\n+#' @param x an `arrow_dplyr_query` to print the `ExecPlan` for.\n+#'\n+#' @return The argument, invisibly.\n+#' @export\n+#'\n+#' @examplesIf arrow_with_dataset() & requireNamespace(\"dplyr\", quietly = TRUE)\n+#' library(dplyr)\n+#' mtcars %>%\n+#'   arrow_table() %>%\n+#'   filter(mpg > 20) %>%\n+#'   mutate(x = gear/carb) %>%\n+#'   show_exec_plan()\n+show_exec_plan <- function(x) {\n\nReview Comment:\n   I didn't follow the discussion: why not use show_query() or explain() here? I saw something about wanting to massage the output to make explain() prettier, but why not use this for explain() today since that's something people know, and it's about logical plans?\n\n\n\n",
                    "created": "2022-07-12T20:23:10.936+0000",
                    "updated": "2022-07-12T20:23:10.936+0000",
                    "started": "2022-07-12T20:23:10.935+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "790155",
                    "issueId": "13415907"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13415907/worklog/790351",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "dragosmg commented on code in PR #13541:\nURL: https://github.com/apache/arrow/pull/13541#discussion_r919899240\n\n\n##########\nr/R/dplyr.R:\n##########\n@@ -219,6 +219,31 @@ tail.arrow_dplyr_query <- function(x, n = 6L, ...) {\n   x\n }\n \n+#' Show the details of an Arrow Execution Plan\n+#'\n+#' This is a function which gives more details about the Execution Plan (`ExecPlan`)\n+#' of an `arrow_dplyr_query` object. It is similar to `dplyr::explain()`.\n+#'\n+#' @param x an `arrow_dplyr_query` to print the `ExecPlan` for.\n+#'\n+#' @return The argument, invisibly.\n+#' @export\n+#'\n+#' @examplesIf arrow_with_dataset() & requireNamespace(\"dplyr\", quietly = TRUE)\n+#' library(dplyr)\n+#' mtcars %>%\n+#'   arrow_table() %>%\n+#'   filter(mpg > 20) %>%\n+#'   mutate(x = gear/carb) %>%\n+#'   show_exec_plan()\n+show_exec_plan <- function(x) {\n\nReview Comment:\n   Here's a link to the [design doc](https://docs.google.com/document/d/1Ep8aV4jDsNCCy9uv1bjWY_JF17nzHQogv0EnGJvraQI/edit), also linked in the PR description and the Jira ticket.\r\n   \r\n   In short, in my opinion, a _first step_ would be to have `show_exec_plan()` as a function that outputs exactly what we get from C++. That's what I interpreted the scope of the [ticket](https://issues.apache.org/jira/browse/ARROW-15016) to be.\r\n   \r\n   My proposal rests on this point-of-view: I think we need, for accessibility reasons, 2 separate ways of surfacing details regarding the ExecPlan, for 2 separate audiences (one readable by the seasoned Arrow developer and one readable by the regular R user). \r\n   1. `show_exec_plan()` would cater to the first audience and, thus, focus on minimising cognitive load by keeping things the same across languages. \r\n   2. `explain()` should probably not aim to be both and would be targeted towards the second audience and do it well. By _well_ I understand here as in a way that makes sense to the regular R user, who expects arrow to just work. In this context, `explain()` would be a tool allowing them to inspect what is going on in a dplyr-like pipeline, but do so in a language they are familiar with. \r\n   \r\n   Having an `explain()` method would absolutely be super useful, but I do not think that is fully scoped out yet. Probably, before we start the implementation of `explain()`, we should flesh out what the output of `explain()` will look like. I strongly believe we should start from the description of the generic which says: \"gives more details about an object (...) and is more focused on _human readable_ output\" (my underlining). \r\n   \r\n   In this PR there are already some really good suggestions of stuff we could include in the output of a function like `explain()` (e.g. to cover `query_can_stream()`). \r\n   \r\n   If we add to the above the time constraint of the impending release, I do not think extending this PR to cover  `explain()` would be the best course of action.\n\n\n\n",
                    "created": "2022-07-13T10:12:00.845+0000",
                    "updated": "2022-07-13T10:12:00.845+0000",
                    "started": "2022-07-13T10:12:00.844+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "790351",
                    "issueId": "13415907"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13415907/worklog/790352",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "dragosmg commented on code in PR #13541:\nURL: https://github.com/apache/arrow/pull/13541#discussion_r919900287\n\n\n##########\nr/R/dplyr.R:\n##########\n@@ -219,6 +219,31 @@ tail.arrow_dplyr_query <- function(x, n = 6L, ...) {\n   x\n }\n \n+#' Show the details of an Arrow Execution Plan\n+#'\n+#' This is a function which gives more details about the Execution Plan (`ExecPlan`)\n+#' of an `arrow_dplyr_query` object. It is similar to `dplyr::explain()`.\n\nReview Comment:\n   Done. Thanks.\n\n\n\n",
                    "created": "2022-07-13T10:13:10.969+0000",
                    "updated": "2022-07-13T10:13:10.969+0000",
                    "started": "2022-07-13T10:13:10.969+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "790352",
                    "issueId": "13415907"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13415907/worklog/790353",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "dragosmg commented on code in PR #13541:\nURL: https://github.com/apache/arrow/pull/13541#discussion_r919900648\n\n\n##########\nr/R/dplyr.R:\n##########\n@@ -219,6 +219,31 @@ tail.arrow_dplyr_query <- function(x, n = 6L, ...) {\n   x\n }\n \n+#' Show the details of an Arrow Execution Plan\n+#'\n+#' This is a function which gives more details about the Execution Plan (`ExecPlan`)\n+#' of an `arrow_dplyr_query` object. It is similar to `dplyr::explain()`.\n+#'\n+#' @param x an `arrow_dplyr_query` to print the `ExecPlan` for.\n+#'\n+#' @return The argument, invisibly.\n\nReview Comment:\n   Done. \n\n\n\n",
                    "created": "2022-07-13T10:13:31.107+0000",
                    "updated": "2022-07-13T10:13:31.107+0000",
                    "started": "2022-07-13T10:13:31.107+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "790353",
                    "issueId": "13415907"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13415907/worklog/790354",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "dragosmg commented on code in PR #13541:\nURL: https://github.com/apache/arrow/pull/13541#discussion_r919903465\n\n\n##########\nr/R/dplyr.R:\n##########\n@@ -219,6 +219,31 @@ tail.arrow_dplyr_query <- function(x, n = 6L, ...) {\n   x\n }\n \n+#' Show the details of an Arrow Execution Plan\n+#'\n+#' This is a function which gives more details about the Execution Plan (`ExecPlan`)\n+#' of an `arrow_dplyr_query` object. It is similar to `dplyr::explain()`.\n+#'\n+#' @param x an `arrow_dplyr_query` to print the `ExecPlan` for.\n+#'\n+#' @return The argument, invisibly.\n+#' @export\n+#'\n+#' @examplesIf arrow_with_dataset() & requireNamespace(\"dplyr\", quietly = TRUE)\n+#' library(dplyr)\n+#' mtcars %>%\n+#'   arrow_table() %>%\n+#'   filter(mpg > 20) %>%\n+#'   mutate(x = gear/carb) %>%\n+#'   show_exec_plan()\n+show_exec_plan <- function(x) {\n+  adq <- as_adq(x)\n\nReview Comment:\n   No. Removed.\n\n\n\n",
                    "created": "2022-07-13T10:16:11.546+0000",
                    "updated": "2022-07-13T10:16:11.546+0000",
                    "started": "2022-07-13T10:16:11.546+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "790354",
                    "issueId": "13415907"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13415907/worklog/790357",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "dragosmg commented on code in PR #13541:\nURL: https://github.com/apache/arrow/pull/13541#discussion_r919903465\n\n\n##########\nr/R/dplyr.R:\n##########\n@@ -219,6 +219,31 @@ tail.arrow_dplyr_query <- function(x, n = 6L, ...) {\n   x\n }\n \n+#' Show the details of an Arrow Execution Plan\n+#'\n+#' This is a function which gives more details about the Execution Plan (`ExecPlan`)\n+#' of an `arrow_dplyr_query` object. It is similar to `dplyr::explain()`.\n+#'\n+#' @param x an `arrow_dplyr_query` to print the `ExecPlan` for.\n+#'\n+#' @return The argument, invisibly.\n+#' @export\n+#'\n+#' @examplesIf arrow_with_dataset() & requireNamespace(\"dplyr\", quietly = TRUE)\n+#' library(dplyr)\n+#' mtcars %>%\n+#'   arrow_table() %>%\n+#'   filter(mpg > 20) %>%\n+#'   mutate(x = gear/carb) %>%\n+#'   show_exec_plan()\n+show_exec_plan <- function(x) {\n+  adq <- as_adq(x)\n\nReview Comment:\n   Oversight, I should have used it inside `plan$Build(...)`.\n\n\n\n",
                    "created": "2022-07-13T10:28:27.159+0000",
                    "updated": "2022-07-13T10:28:27.159+0000",
                    "started": "2022-07-13T10:28:27.158+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "790357",
                    "issueId": "13415907"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13415907/worklog/790368",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "dragosmg commented on code in PR #13541:\nURL: https://github.com/apache/arrow/pull/13541#discussion_r919949383\n\n\n##########\nr/R/dplyr.R:\n##########\n@@ -219,6 +219,31 @@ tail.arrow_dplyr_query <- function(x, n = 6L, ...) {\n   x\n }\n \n+#' Show the details of an Arrow Execution Plan\n+#'\n+#' This is a function which gives more details about the Execution Plan (`ExecPlan`)\n+#' of an `arrow_dplyr_query` object. It is similar to `dplyr::explain()`.\n+#'\n+#' @param x an `arrow_dplyr_query` to print the `ExecPlan` for.\n+#'\n+#' @return The argument, invisibly.\n+#' @export\n+#'\n+#' @examplesIf arrow_with_dataset() & requireNamespace(\"dplyr\", quietly = TRUE)\n+#' library(dplyr)\n+#' mtcars %>%\n+#'   arrow_table() %>%\n+#'   filter(mpg > 20) %>%\n+#'   mutate(x = gear/carb) %>%\n+#'   show_exec_plan()\n+show_exec_plan <- function(x) {\n+  adq <- as_adq(x)\n+  plan <- ExecPlan$create()\n+  final_node <- plan$Build(x)\n+  cat(plan$ToString())\n\nReview Comment:\n   You are right, if the pipeline includes calls to `arrange()` and / or `head()` they are not captured by `show_exec_plan()`.  Moreover, the filter node gets lost when we use `head()`.\r\n   \r\n   ``` r\r\n     mtcars %>% \r\n       arrow_table() %>% \r\n       filter(mpg > 20) %>% \r\n       arrange(desc(wt)) %>% \r\n       head(3) %>% \r\n       show_exec_plan()\r\n   #> ExecPlan with 2 nodes:\r\n   #> 1:ProjectNode{projection=[mpg, cyl, disp, hp, drat, wt, qsec, vs, am, gear, carb]}\r\n   #>  0:SourceNode{}\r\n   \r\n   mtcars %>% \r\n       arrow_table() %>% \r\n       filter(mpg > 20) %>% \r\n       arrange(desc(wt)) %>%\r\n       show_exec_plan()\r\n   #> ExecPlan with 3 nodes:\r\n   #> 2:ProjectNode{projection=[mpg, cyl, disp, hp, drat, wt, qsec, vs, am, gear, carb]}\r\n   #>   1:FilterNode{filter=(mpg > 20)}\r\n   #>     0:TableSourceNode{}\r\n   ```\r\n   \r\n   <sup>Created on 2022-07-13 by the [reprex package](https://reprex.tidyverse.org) (v2.0.1)</sup>\r\n   \r\n   Let me do some research / reading and will get back on this. It might be beyond my C++ skillset.\n\n\n\n",
                    "created": "2022-07-13T11:05:20.747+0000",
                    "updated": "2022-07-13T11:05:20.747+0000",
                    "started": "2022-07-13T11:05:20.747+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "790368",
                    "issueId": "13415907"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13415907/worklog/790369",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "dragosmg commented on code in PR #13541:\nURL: https://github.com/apache/arrow/pull/13541#discussion_r919949383\n\n\n##########\nr/R/dplyr.R:\n##########\n@@ -219,6 +219,31 @@ tail.arrow_dplyr_query <- function(x, n = 6L, ...) {\n   x\n }\n \n+#' Show the details of an Arrow Execution Plan\n+#'\n+#' This is a function which gives more details about the Execution Plan (`ExecPlan`)\n+#' of an `arrow_dplyr_query` object. It is similar to `dplyr::explain()`.\n+#'\n+#' @param x an `arrow_dplyr_query` to print the `ExecPlan` for.\n+#'\n+#' @return The argument, invisibly.\n+#' @export\n+#'\n+#' @examplesIf arrow_with_dataset() & requireNamespace(\"dplyr\", quietly = TRUE)\n+#' library(dplyr)\n+#' mtcars %>%\n+#'   arrow_table() %>%\n+#'   filter(mpg > 20) %>%\n+#'   mutate(x = gear/carb) %>%\n+#'   show_exec_plan()\n+show_exec_plan <- function(x) {\n+  adq <- as_adq(x)\n+  plan <- ExecPlan$create()\n+  final_node <- plan$Build(x)\n+  cat(plan$ToString())\n\nReview Comment:\n   You are right, if the pipeline includes calls to `arrange()` and / or `head()` they are not captured by `show_exec_plan()`.  Moreover, the filter node gets lost when we use `head()`.\r\n   \r\n   ``` r\r\n     mtcars %>% \r\n       arrow_table() %>% \r\n       filter(mpg > 20) %>% \r\n       arrange(desc(wt)) %>% \r\n       head(3) %>% \r\n       show_exec_plan()\r\n   #> ExecPlan with 2 nodes:\r\n   #> 1:ProjectNode{projection=[mpg, cyl, disp, hp, drat, wt, qsec, vs, am, gear, carb]}\r\n   #>  0:SourceNode{}\r\n   \r\n   mtcars %>% \r\n       arrow_table() %>% \r\n       filter(mpg > 20) %>% \r\n       arrange(desc(wt)) %>%\r\n       show_exec_plan()\r\n   #> ExecPlan with 3 nodes:\r\n   #> 2:ProjectNode{projection=[mpg, cyl, disp, hp, drat, wt, qsec, vs, am, gear, carb]}\r\n   #>   1:FilterNode{filter=(mpg > 20)}\r\n   #>     0:TableSourceNode{}\r\n   ```\r\n   \r\n   <sup>Created on 2022-07-13 by the [reprex package](https://reprex.tidyverse.org) (v2.0.1)</sup>\r\n   \r\n   Let me do some research / reading and will get back on this. It might be well beyond my C++ skillset.\n\n\n\n",
                    "created": "2022-07-13T11:05:45.453+0000",
                    "updated": "2022-07-13T11:05:45.453+0000",
                    "started": "2022-07-13T11:05:45.453+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "790369",
                    "issueId": "13415907"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
            "id": "4",
            "description": "An improvement or enhancement to an existing feature or task.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
            "name": "Improvement",
            "subtask": false,
            "avatarId": 21140
        },
        "timespent": 67800,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@3a01389a[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@191367bd[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@3647db74[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@346b6c8e[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@558ad014[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@5f84b8f3[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@5790540c[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@38705d6c[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@3bf92006[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@41c054aa[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@14a548aa[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@2e84fc6f[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 67800,
        "customfield_12312520": null,
        "customfield_12312521": "Fri Jul 22 17:09:30 UTC 2022",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2022-07-22T17:09:30.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-15016/watchers",
            "watchCount": 2,
            "isWatching": false
        },
        "created": "2021-12-07T20:54:05.000+0000",
        "updated": "2022-07-24T01:11:00.000+0000",
        "timeoriginalestimate": null,
        "description": "{*}Proposed approach{*}: [design doc|https://docs.google.com/document/d/1Ep8aV4jDsNCCy9uv1bjWY_JF17nzHQogv0EnGJvraQI/edit#]\r\n\r\n*Steps*\r\n * Read about ExecPlan and ExecPlan::ToString\r\n ** https://issues.apache.org/jira/browse/ARROW-14233\r\n ** https://issues.apache.org/jira/browse/ARROW-15138\r\n ** https://issues.apache.org/jira/browse/ARROW-13785\r\n * Hook up to the existing C++ ToString method for ExecPlans \r\n * Implement a {{ToString()}} method for {{ExecPlan}} R6 class\r\n * Implement and document {{show_exec_plan()}}\r\n\r\n{*}Original description{*}:\r\nNow that we can print a query plan (ARROW-13785) we should wire this up in R so we can see what execution plans are being put together for various queries (like the TPC-H queries)",
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "18h 50m",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 67800
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[R] show_exec_plan() for an arrow_dplyr_query",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13415907/comment/17488280",
                    "id": "17488280",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=paleolimbot",
                        "name": "paleolimbot",
                        "key": "paleolimbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=paleolimbot&avatarId=47795",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=paleolimbot&avatarId=47795",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=paleolimbot&avatarId=47795",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=paleolimbot&avatarId=47795"
                        },
                        "displayName": "Dewey Dunnington",
                        "active": true,
                        "timeZone": "America/Halifax"
                    },
                    "body": "It seems like a route here would be to implement a {{ToString()}} and {{print()}} as R6 methods here: https://github.com/apache/arrow/blob/bd356295f6beaba744a2c6b498455701f53a64f8/r/R/dplyr.R#L91\r\n\r\nand here: https://github.com/apache/arrow/blob/master/r/src/compute-exec.cpp#L47\r\n\r\n...and add a {{show_dplyr_query()}} function here (maybe like this):\r\n\r\n{code:R}\r\nlibrary(arrow, warn.conflicts = FALSE)\r\nlibrary(dplyr, warn.conflicts = FALSE)\r\n\r\nshow_exec_plan <- function(.data) {\r\n  adq <- arrow:::as_adq(.data)\r\n  plan <- arrow:::ExecPlan$create()\r\n  final_node <- plan$Build(.data)\r\n  print(plan$ToString())\r\n  invisible(.data)\r\n}\r\n\r\nggplot2::mpg %>% \r\n  arrow_table() %>% \r\n  filter(year > 2007) %>% \r\n  show_exec_plan()\r\n#> Error in print(plan$ToString()): attempt to apply non-function\r\n{code}\r\n\r\nMaybe here:\r\n\r\nhttps://github.com/apache/arrow/blob/master/r/R/dplyr.R#L91",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=paleolimbot",
                        "name": "paleolimbot",
                        "key": "paleolimbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=paleolimbot&avatarId=47795",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=paleolimbot&avatarId=47795",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=paleolimbot&avatarId=47795",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=paleolimbot&avatarId=47795"
                        },
                        "displayName": "Dewey Dunnington",
                        "active": true,
                        "timeZone": "America/Halifax"
                    },
                    "created": "2022-02-07T17:31:24.349+0000",
                    "updated": "2022-02-07T17:31:24.349+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13415907/comment/17570137",
                    "id": "17570137",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=paleolimbot",
                        "name": "paleolimbot",
                        "key": "paleolimbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=paleolimbot&avatarId=47795",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=paleolimbot&avatarId=47795",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=paleolimbot&avatarId=47795",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=paleolimbot&avatarId=47795"
                        },
                        "displayName": "Dewey Dunnington",
                        "active": true,
                        "timeZone": "America/Halifax"
                    },
                    "body": "Issue resolved by pull request 13541\n[https://github.com/apache/arrow/pull/13541]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=paleolimbot",
                        "name": "paleolimbot",
                        "key": "paleolimbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=paleolimbot&avatarId=47795",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=paleolimbot&avatarId=47795",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=paleolimbot&avatarId=47795",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=paleolimbot&avatarId=47795"
                        },
                        "displayName": "Dewey Dunnington",
                        "active": true,
                        "timeZone": "America/Halifax"
                    },
                    "created": "2022-07-22T17:09:30.086+0000",
                    "updated": "2022-07-22T17:09:30.086+0000"
                }
            ],
            "maxResults": 2,
            "total": 2,
            "startAt": 0
        },
        "customfield_12311820": "0|z0xfxk:",
        "customfield_12314139": null
    }
}