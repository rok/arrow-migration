{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13338680",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13338680",
    "key": "ARROW-10481",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12348823",
                "id": "12348823",
                "description": "",
                "name": "3.0.0",
                "archived": false,
                "released": true,
                "releaseDate": "2021-01-25"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "name": "Major",
            "id": "3"
        },
        "labels": [
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=jonkeane",
            "name": "jonkeane",
            "key": "jonkeane",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34057",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34057",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34057",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34057"
            },
            "displayName": "Jonathan Keane",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12333008",
                "id": "12333008",
                "name": "R"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=npr",
            "name": "npr",
            "key": "npr",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
            },
            "displayName": "Neal Richardson",
            "active": true,
            "timeZone": "America/Los_Angeles"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=npr",
            "name": "npr",
            "key": "npr",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
            },
            "displayName": "Neal Richardson",
            "active": true,
            "timeZone": "America/Los_Angeles"
        },
        "aggregateprogress": {
            "progress": 7800,
            "total": 7800,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 7800,
            "total": 7800,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-10481/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 13,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13338680/worklog/507202",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nealrichardson commented on a change in pull request #8579:\nURL: https://github.com/apache/arrow/pull/8579#discussion_r516787998\n\n\n\n##########\nFile path: r/R/table.R\n##########\n@@ -254,6 +257,49 @@ names.Table <- function(x) x$ColumnNames()\n #' @export\n `[[.Table` <- `[[.RecordBatch`\n \n+#' @export\n+`[[<-.Table` <- function(x, i, value) {\n+  if (is.null(value)) {\n+    if (is.character(i)) {\n+      i <- match(i, names(x)) - 1L\n+    }\n\nReview comment:\n       I think we need to do the `- 1L` even if i is not character, otherwise we'll be off by one with an integer `i`.\n\n##########\nFile path: r/R/table.R\n##########\n@@ -254,6 +257,49 @@ names.Table <- function(x) x$ColumnNames()\n #' @export\n `[[.Table` <- `[[.RecordBatch`\n \n+#' @export\n+`[[<-.Table` <- function(x, i, value) {\n+  if (is.null(value)) {\n+    if (is.character(i)) {\n+      i <- match(i, names(x)) - 1L\n+    }\n+    x <- x$RemoveColumn(i)\n+  } else {\n+    if (!is.character(i)) {\n+      # get or create a/the column name\n+      if (i <= ncol(x)) {\n\nReview comment:\n       This is a trivial difference but it does save some work because `ncol == function (x) dim(x)[2L]`\r\n   \r\n   ```suggestion\r\n         if (i <= x$num_columns) {\r\n   ```\n\n##########\nFile path: r/tests/testthat/test-Table.R\n##########\n@@ -145,7 +145,55 @@ test_that(\"[, [[, $ for Table\", {\n   expect_data_frame(tab[0], tbl[0])\n })\n \n+test_that(\"[[<- assignment\", {\n+  tbl <- tibble::tibble(\n+    int = 1:10,\n+    dbl = as.numeric(1:10),\n+    lgl = sample(c(TRUE, FALSE, NA), 10, replace = TRUE),\n+    chr = letters[1:10],\n+    fct = factor(letters[1:10])\n+  )\n+  tab <- Table$create(tbl)\n+\n+  # can remove a column\n+  tab[[\"chr\"]] <- NULL\n+  expect_data_frame(tab, tbl[-4])\n+\n+  # can add a named column\n+  tab[[\"new\"]] <- letters[10:1]\n+  expect_vector(tab[[\"new\"]], letters[10:1])\n\nReview comment:\n       Part of the behavior we want to test is the position of the new column, so let's assert the whole data.frame\r\n   \r\n   ```suggestion\r\n     expect_data_frame(tab, cbind(tbl, new = letters[10:1]))\r\n   ```\n\n##########\nFile path: r/tests/testthat/test-Table.R\n##########\n@@ -145,7 +145,55 @@ test_that(\"[, [[, $ for Table\", {\n   expect_data_frame(tab[0], tbl[0])\n })\n \n+test_that(\"[[<- assignment\", {\n+  tbl <- tibble::tibble(\n+    int = 1:10,\n+    dbl = as.numeric(1:10),\n+    lgl = sample(c(TRUE, FALSE, NA), 10, replace = TRUE),\n+    chr = letters[1:10],\n+    fct = factor(letters[1:10])\n+  )\n+  tab <- Table$create(tbl)\n+\n+  # can remove a column\n+  tab[[\"chr\"]] <- NULL\n+  expect_data_frame(tab, tbl[-4])\n+\n+  # can add a named column\n+  tab[[\"new\"]] <- letters[10:1]\n+  expect_vector(tab[[\"new\"]], letters[10:1])\n+\n+  # can add a column\n+  tab[[2]] <- as.numeric(10:1)\n+  expect_vector(tab[[2]], as.numeric(10:1))\n+\n+  # can add a column by index\n+  tab[[6]] <- as.numeric(10:1)\n+  expect_vector(tab[[6]], as.numeric(10:1))\n+  expect_vector(tab[[\"6\"]], as.numeric(10:1))\n+\n+  # can replace a column\n+  tab[[\"int\"]] <- 10:1\n+  expect_vector(tab[[\"int\"]], 10:1)\n+\n+  # can use $\n+  tab$new <- NULL\n+  expect_null(as.vector(tab$new))\n+  expect_identical(dim(tab), c(10L, 5L))\n+\n+  tab$int <- 1:10\n+  expect_vector(tab$int, 1:10)\n+})\n\nReview comment:\n       Other tests we might want to add (and implement as necessary):\r\n   \r\n   * `tab[[NA]] <- something`\r\n   * `tab[[NULL]] <- something`\r\n   * R input recycling (making sure we're consistent with how [[<-.data.frame works)\r\n   * assigning in an Arrow Array or ChunkedArray. `chunked_array()` should handle that but we should confirm\r\n   * any others?\n\n##########\nFile path: r/R/table.R\n##########\n@@ -254,6 +257,49 @@ names.Table <- function(x) x$ColumnNames()\n #' @export\n `[[.Table` <- `[[.RecordBatch`\n \n+#' @export\n+`[[<-.Table` <- function(x, i, value) {\n+  if (is.null(value)) {\n+    if (is.character(i)) {\n+      i <- match(i, names(x)) - 1L\n+    }\n+    x <- x$RemoveColumn(i)\n+  } else {\n+    if (!is.character(i)) {\n+      # get or create a/the column name\n+      if (i <= ncol(x)) {\n+        i <- names(x)[[i]]\n\nReview comment:\n       ```suggestion\r\n           i <- names(x)[i]\r\n   ```\n\n##########\nFile path: r/R/table.R\n##########\n@@ -254,6 +257,49 @@ names.Table <- function(x) x$ColumnNames()\n #' @export\n `[[.Table` <- `[[.RecordBatch`\n \n+#' @export\n+`[[<-.Table` <- function(x, i, value) {\n+  if (is.null(value)) {\n+    if (is.character(i)) {\n+      i <- match(i, names(x)) - 1L\n+    }\n+    x <- x$RemoveColumn(i)\n+  } else {\n+    if (!is.character(i)) {\n+      # get or create a/the column name\n+      if (i <= ncol(x)) {\n+        i <- names(x)[[i]]\n+      } else {\n+        i <- as.character(i)\n+      }\n+    }\n+\n+    # construct the field\n+    value <- chunked_array(value)\n+    new_field <- field(i, value$type)\n+\n+    if (i %in% names(x)) {\n+      i <- match(i, names(x)) - 1L\n+      x <- x$SetColumn(i, new_field, value)\n+    } else {\n+      i <- ncol(x)\n+      x <- x$AddColumn(i, new_field, value)\n+    }\n+  }\n+  x\n+}\n+\n+#' @export\n+`$<-.Table` <- function(x, i, value) {\n+  assert_that(is.string(i))\n+  if (i %in% ls(x)) {\n+    assign(i, value, x)\n\nReview comment:\n       Can you add a comment explaining why this `if` is here?\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-11-03T16:30:31.912+0000",
                    "updated": "2020-11-03T16:30:31.912+0000",
                    "started": "2020-11-03T16:30:31.912+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "507202",
                    "issueId": "13338680"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13338680/worklog/507212",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "github-actions[bot] commented on pull request #8579:\nURL: https://github.com/apache/arrow/pull/8579#issuecomment-721241665\n\n\n   https://issues.apache.org/jira/browse/ARROW-10481\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-11-03T16:38:45.659+0000",
                    "updated": "2020-11-03T16:38:45.659+0000",
                    "started": "2020-11-03T16:38:45.658+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "507212",
                    "issueId": "13338680"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13338680/worklog/507639",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jonkeane commented on a change in pull request #8579:\nURL: https://github.com/apache/arrow/pull/8579#discussion_r517366041\n\n\n\n##########\nFile path: r/R/table.R\n##########\n@@ -254,6 +257,49 @@ names.Table <- function(x) x$ColumnNames()\n #' @export\n `[[.Table` <- `[[.RecordBatch`\n \n+#' @export\n+`[[<-.Table` <- function(x, i, value) {\n+  if (is.null(value)) {\n+    if (is.character(i)) {\n+      i <- match(i, names(x)) - 1L\n+    }\n+    x <- x$RemoveColumn(i)\n+  } else {\n+    if (!is.character(i)) {\n+      # get or create a/the column name\n+      if (i <= ncol(x)) {\n\nReview comment:\n       I went looking for a function call to `num_columns()` and should have looked for an active binding, oops!\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-11-04T14:05:30.547+0000",
                    "updated": "2020-11-04T14:05:30.547+0000",
                    "started": "2020-11-04T14:05:30.547+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "507639",
                    "issueId": "13338680"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13338680/worklog/507650",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jonkeane commented on pull request #8579:\nURL: https://github.com/apache/arrow/pull/8579#issuecomment-721785580\n\n\n   I added the extra tests and some code to get that working. \r\n   \r\n   I also started down the path of `[<-.Table` though there are more decisions that are under that rock (what to do about row manipulation, etc.), so left it be for now. It currently errors in R (though we probably want to write a more helpful message as part of this PR even if we kick that working to another branch/PR).\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-11-04T15:05:04.466+0000",
                    "updated": "2020-11-04T15:05:04.466+0000",
                    "started": "2020-11-04T15:05:04.466+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "507650",
                    "issueId": "13338680"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13338680/worklog/507680",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nealrichardson commented on a change in pull request #8579:\nURL: https://github.com/apache/arrow/pull/8579#discussion_r517464426\n\n\n\n##########\nFile path: r/tests/testthat/test-Table.R\n##########\n@@ -179,10 +183,34 @@ test_that(\"[[<- assignment\", {\n   # can use $\n   tab$new <- NULL\n   expect_null(as.vector(tab$new))\n-  expect_identical(dim(tab), c(10L, 5L))\n+  expect_identical(dim(tab), c(10L, 4L))\n \n   tab$int <- 1:10\n   expect_vector(tab$int, 1:10)\n+\n+  # recycling\n+  tab[[\"atom\"]] <- 1L\n+  expect_vector(tab[[\"atom\"]], rep(1L, 10))\n+\n+  expect_error(\n+    tab[[\"atom\"]] <- 1:6,\n+    paste0(\n+      \"Invalid: Added column's length must match table's length. \",\n+      \"Expected length 10 but got length 6\"\n+    )\n+  )\n+\n+  # assign Arrow array and chunked_array\n+  array <- Array$create(c(10:1))\n+  tab$array <- array\n+  expect_vector(tab$array, 10:1)\n+\n+  tab$chunked <- chunked_array(1:10)\n+  expect_vector(tab$chunked, 1:10)\n+\n+  # nonsense indexes\n+  expect_error(tab[[NA]] <- letters[10:1], \"missing value where TRUE/FALSE needed\")\n\nReview comment:\n       I'm not sure that's the right error to raise there so maybe there should be better validation here.\r\n   \r\n   Would also be important to test `NA_integer_` and `NA_real_` because those will not get rejected by the R->cpp type mapping.\n\n##########\nFile path: r/tests/testthat/test-Table.R\n##########\n@@ -179,10 +183,34 @@ test_that(\"[[<- assignment\", {\n   # can use $\n   tab$new <- NULL\n   expect_null(as.vector(tab$new))\n-  expect_identical(dim(tab), c(10L, 5L))\n+  expect_identical(dim(tab), c(10L, 4L))\n \n   tab$int <- 1:10\n   expect_vector(tab$int, 1:10)\n+\n+  # recycling\n+  tab[[\"atom\"]] <- 1L\n+  expect_vector(tab[[\"atom\"]], rep(1L, 10))\n+\n+  expect_error(\n+    tab[[\"atom\"]] <- 1:6,\n+    paste0(\n+      \"Invalid: Added column's length must match table's length. \",\n+      \"Expected length 10 but got length 6\"\n+    )\n+  )\n+\n+  # assign Arrow array and chunked_array\n+  array <- Array$create(c(10:1))\n+  tab$array <- array\n+  expect_vector(tab$array, 10:1)\n+\n+  tab$chunked <- chunked_array(1:10)\n+  expect_vector(tab$chunked, 1:10)\n+\n+  # nonsense indexes\n+  expect_error(tab[[NA]] <- letters[10:1], \"missing value where TRUE/FALSE needed\")\n+  expect_error(tab[[NULL]] <- letters[10:1], \"argument is of length zero\")\n\nReview comment:\n       ```suggestion\r\n     expect_error(tab[[NULL]] <- letters[10:1])\r\n   ```\r\n   \r\n   Since that is an error message coming from base R (right?), we shouldn't assert its exact message because it may be translated to local language (i.e. it only will pass if you're in an English locale).\n\n##########\nFile path: r/R/table.R\n##########\n@@ -261,28 +261,38 @@ names.Table <- function(x) x$ColumnNames()\n `[[<-.Table` <- function(x, i, value) {\n   if (is.null(value)) {\n     if (is.character(i)) {\n-      i <- match(i, names(x)) - 1L\n+      i <- match(i, names(x))\n     }\n-    x <- x$RemoveColumn(i)\n+    x <- x$RemoveColumn(i - 1L)\n   } else {\n     if (!is.character(i)) {\n       # get or create a/the column name\n-      if (i <= ncol(x)) {\n-        i <- names(x)[[i]]\n+      if (i <= x$num_columns) {\n+        i <- names(x)[i]\n       } else {\n         i <- as.character(i)\n       }\n     }\n \n+    # auto-magic recycling\n\nReview comment:\n       1) We should probably only do recycling if `value` is not an ArrowObject (perhaps with a TODO to support Arrow Scalar recycling)\r\n   2) https://vctrs.r-lib.org/reference/vec_recycle.html may be a good solution instead of this bespoke code (we already import vctrs so it's available), or else use `base::rep_len` (cf. https://github.com/apache/arrow/blob/master/r/R/array.R#L291)\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-11-04T16:33:32.547+0000",
                    "updated": "2020-11-04T16:33:32.547+0000",
                    "started": "2020-11-04T16:33:32.547+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "507680",
                    "issueId": "13338680"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13338680/worklog/508481",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jonkeane commented on a change in pull request #8579:\nURL: https://github.com/apache/arrow/pull/8579#discussion_r518776855\n\n\n\n##########\nFile path: r/tests/testthat/test-Table.R\n##########\n@@ -179,10 +183,34 @@ test_that(\"[[<- assignment\", {\n   # can use $\n   tab$new <- NULL\n   expect_null(as.vector(tab$new))\n-  expect_identical(dim(tab), c(10L, 5L))\n+  expect_identical(dim(tab), c(10L, 4L))\n \n   tab$int <- 1:10\n   expect_vector(tab$int, 1:10)\n+\n+  # recycling\n+  tab[[\"atom\"]] <- 1L\n+  expect_vector(tab[[\"atom\"]], rep(1L, 10))\n+\n+  expect_error(\n+    tab[[\"atom\"]] <- 1:6,\n+    paste0(\n+      \"Invalid: Added column's length must match table's length. \",\n+      \"Expected length 10 but got length 6\"\n+    )\n+  )\n+\n+  # assign Arrow array and chunked_array\n+  array <- Array$create(c(10:1))\n+  tab$array <- array\n+  expect_vector(tab$array, 10:1)\n+\n+  tab$chunked <- chunked_array(1:10)\n+  expect_vector(tab$chunked, 1:10)\n+\n+  # nonsense indexes\n+  expect_error(tab[[NA]] <- letters[10:1], \"missing value where TRUE/FALSE needed\")\n+  expect_error(tab[[NULL]] <- letters[10:1], \"argument is of length zero\")\n\nReview comment:\n       Yeah, I added error checking into the method call for `[[<-` to match the behavior + catch `NA_integer_`. It looks like the NA checking is actually coming from cpp `arrow::r::Input<R_xlen_t>::type`, if I'm reading correctly. I put a TODO note to see about unifying / centralizing that checking \n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-11-06T14:13:47.807+0000",
                    "updated": "2020-11-06T14:13:47.807+0000",
                    "started": "2020-11-06T14:13:47.807+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "508481",
                    "issueId": "13338680"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13338680/worklog/508919",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jonkeane commented on a change in pull request #8579:\nURL: https://github.com/apache/arrow/pull/8579#discussion_r519488908\n\n\n\n##########\nFile path: r/R/table.R\n##########\n@@ -261,28 +261,38 @@ names.Table <- function(x) x$ColumnNames()\n `[[<-.Table` <- function(x, i, value) {\n   if (is.null(value)) {\n     if (is.character(i)) {\n-      i <- match(i, names(x)) - 1L\n+      i <- match(i, names(x))\n     }\n-    x <- x$RemoveColumn(i)\n+    x <- x$RemoveColumn(i - 1L)\n   } else {\n     if (!is.character(i)) {\n       # get or create a/the column name\n-      if (i <= ncol(x)) {\n-        i <- names(x)[[i]]\n+      if (i <= x$num_columns) {\n+        i <- names(x)[i]\n       } else {\n         i <- as.character(i)\n       }\n     }\n \n+    # auto-magic recycling\n\nReview comment:\n       TIL about `vctrs::vec_recycle` that's really nice. \n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-11-08T22:53:10.158+0000",
                    "updated": "2020-11-08T22:53:10.158+0000",
                    "started": "2020-11-08T22:53:10.158+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "508919",
                    "issueId": "13338680"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13338680/worklog/509174",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jonkeane commented on pull request #8579:\nURL: https://github.com/apache/arrow/pull/8579#issuecomment-724047954\n\n\n   Ok, I opened https://issues.apache.org/jira/browse/ARROW-10520 and https://issues.apache.org/jira/browse/ARROW-10521 for the two follow ons, added some more NA and type checking, and replaced the value recycling with {{vctrs::vec_recycle}}\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-11-09T14:29:03.141+0000",
                    "updated": "2020-11-09T14:29:03.141+0000",
                    "started": "2020-11-09T14:29:03.141+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "509174",
                    "issueId": "13338680"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13338680/worklog/509321",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nealrichardson commented on a change in pull request #8579:\nURL: https://github.com/apache/arrow/pull/8579#discussion_r520072414\n\n\n\n##########\nFile path: r/tests/testthat/test-Table.R\n##########\n@@ -179,10 +183,34 @@ test_that(\"[[<- assignment\", {\n   # can use $\n   tab$new <- NULL\n   expect_null(as.vector(tab$new))\n-  expect_identical(dim(tab), c(10L, 5L))\n+  expect_identical(dim(tab), c(10L, 4L))\n \n   tab$int <- 1:10\n   expect_vector(tab$int, 1:10)\n+\n+  # recycling\n+  tab[[\"atom\"]] <- 1L\n+  expect_vector(tab[[\"atom\"]], rep(1L, 10))\n+\n+  expect_error(\n+    tab[[\"atom\"]] <- 1:6,\n+    paste0(\n+      \"Invalid: Added column's length must match table's length. \",\n+      \"Expected length 10 but got length 6\"\n+    )\n+  )\n+\n+  # assign Arrow array and chunked_array\n+  array <- Array$create(c(10:1))\n+  tab$array <- array\n+  expect_vector(tab$array, 10:1)\n+\n+  tab$chunked <- chunked_array(1:10)\n+  expect_vector(tab$chunked, 1:10)\n+\n+  # nonsense indexes\n+  expect_error(tab[[NA]] <- letters[10:1], \"missing value where TRUE/FALSE needed\")\n+  expect_error(tab[[NULL]] <- letters[10:1], \"argument is of length zero\")\n\nReview comment:\n       Oh nice, I've been bitten by that before, so I guess either I was using `int` instead of `R_xlen_t` or `Rcpp` wasn't as helpful. TIL :)\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-11-09T19:39:32.654+0000",
                    "updated": "2020-11-09T19:39:32.654+0000",
                    "started": "2020-11-09T19:39:32.654+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "509321",
                    "issueId": "13338680"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13338680/worklog/509325",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nealrichardson commented on a change in pull request #8579:\nURL: https://github.com/apache/arrow/pull/8579#discussion_r520073139\n\n\n\n##########\nFile path: r/R/table.R\n##########\n@@ -254,6 +257,68 @@ names.Table <- function(x) x$ColumnNames()\n #' @export\n `[[.Table` <- `[[.RecordBatch`\n \n+#' @export\n+`[[<-.Table` <- function(x, i, value) {\n+  if (!is.character(i) & !is.numeric(i)) {\n+    stop(\"'i' must be character or numeric, not \", class(i), call. = FALSE)\n+  } else if (is.na(i)) {\n+    # Catch if a NA_character or NA_integer is passed. These are caught elsewhere\n+    # in cpp (i.e. _arrow_RecordBatch__column_name)\n+    # TODO: figure out if catching in cpp like ^^^ is preferred\n\nReview comment:\n       If we get a useful error message from the cpp layer, great, use that. Let the static(ish) typing do the work.\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-11-09T19:44:15.410+0000",
                    "updated": "2020-11-09T19:44:15.410+0000",
                    "started": "2020-11-09T19:44:15.410+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "509325",
                    "issueId": "13338680"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13338680/worklog/509715",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jonkeane commented on a change in pull request #8579:\nURL: https://github.com/apache/arrow/pull/8579#discussion_r520602805\n\n\n\n##########\nFile path: r/R/table.R\n##########\n@@ -254,6 +257,68 @@ names.Table <- function(x) x$ColumnNames()\n #' @export\n `[[.Table` <- `[[.RecordBatch`\n \n+#' @export\n+`[[<-.Table` <- function(x, i, value) {\n+  if (!is.character(i) & !is.numeric(i)) {\n+    stop(\"'i' must be character or numeric, not \", class(i), call. = FALSE)\n+  } else if (is.na(i)) {\n+    # Catch if a NA_character or NA_integer is passed. These are caught elsewhere\n+    # in cpp (i.e. _arrow_RecordBatch__column_name)\n+    # TODO: figure out if catching in cpp like ^^^ is preferred\n\nReview comment:\n       It's a mixture, for `NA_integer_` and `NA_real_` the error is the previous \"missing value where TRUE/FALSE needed\" with `NA_character_` though it removes/creates/replaced a column with the name ``NA``. So I would vote to keep the special casing for now and try catching in cpp or with a helper function we can use across `[[` and `[` methods later.\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-11-10T14:27:23.051+0000",
                    "updated": "2020-11-10T14:27:23.051+0000",
                    "started": "2020-11-10T14:27:23.051+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "509715",
                    "issueId": "13338680"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13338680/worklog/510449",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nealrichardson commented on a change in pull request #8579:\nURL: https://github.com/apache/arrow/pull/8579#discussion_r521631559\n\n\n\n##########\nFile path: r/R/table.R\n##########\n@@ -254,6 +257,68 @@ names.Table <- function(x) x$ColumnNames()\n #' @export\n `[[.Table` <- `[[.RecordBatch`\n \n+#' @export\n+`[[<-.Table` <- function(x, i, value) {\n+  if (!is.character(i) & !is.numeric(i)) {\n+    stop(\"'i' must be character or numeric, not \", class(i), call. = FALSE)\n+  } else if (is.na(i)) {\n+    # Catch if a NA_character or NA_integer is passed. These are caught elsewhere\n+    # in cpp (i.e. _arrow_RecordBatch__column_name)\n+    # TODO: figure out if catching in cpp like ^^^ is preferred\n\nReview comment:\n       I suspect that error comes from https://github.com/apache/arrow/pull/8579/files#diff-242f7f20fb4999f3bbe719d6977d2580231b89334326b588d46e9236c2e28fcdR285, i.e. before we hit cpp.\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-11-11T20:52:35.406+0000",
                    "updated": "2020-11-11T20:52:35.406+0000",
                    "started": "2020-11-11T20:52:35.405+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "510449",
                    "issueId": "13338680"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13338680/worklog/510468",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nealrichardson closed pull request #8579:\nURL: https://github.com/apache/arrow/pull/8579\n\n\n   \n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-11-11T21:26:15.820+0000",
                    "updated": "2020-11-11T21:26:15.820+0000",
                    "started": "2020-11-11T21:26:15.820+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "510468",
                    "issueId": "13338680"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/2",
            "id": "2",
            "description": "A new feature of the product, which has yet to be developed.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21141&avatarType=issuetype",
            "name": "New Feature",
            "subtask": false,
            "avatarId": 21141
        },
        "timespent": 7800,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@7a2c9ea7[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@873e431[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@2dd19bce[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@3a94a029[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@5c9ea539[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@5899b70d[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@7937583b[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@663d3adc[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@4f23ec4f[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@5a970b79[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@19227690[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@164644b2[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 7800,
        "customfield_12312520": null,
        "customfield_12312521": "Wed Nov 11 21:26:07 UTC 2020",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2020-11-11T21:26:07.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-10481/watchers",
            "watchCount": 1,
            "isWatching": false
        },
        "created": "2020-11-03T16:13:49.000+0000",
        "updated": "2020-11-11T21:27:32.000+0000",
        "timeoriginalestimate": null,
        "description": "This is implemented in C++ but not wired up in R",
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "2h 10m",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 7800
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[R] Bindings to add, remove, replace Table columns",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13338680/comment/17230239",
                    "id": "17230239",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=npr",
                        "name": "npr",
                        "key": "npr",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
                        },
                        "displayName": "Neal Richardson",
                        "active": true,
                        "timeZone": "America/Los_Angeles"
                    },
                    "body": "Issue resolved by pull request 8579\n[https://github.com/apache/arrow/pull/8579]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=npr",
                        "name": "npr",
                        "key": "npr",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
                        },
                        "displayName": "Neal Richardson",
                        "active": true,
                        "timeZone": "America/Los_Angeles"
                    },
                    "created": "2020-11-11T21:26:07.117+0000",
                    "updated": "2020-11-11T21:26:07.117+0000"
                }
            ],
            "maxResults": 1,
            "total": 1,
            "startAt": 0
        },
        "customfield_12311820": "0|z0k9a0:",
        "customfield_12314139": null
    }
}