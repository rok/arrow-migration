{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13150265",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13150265",
    "key": "ARROW-2400",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12342562",
                "id": "12342562",
                "description": "",
                "name": "0.10.0",
                "archived": false,
                "released": true,
                "releaseDate": "2018-08-06"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "name": "Major",
            "id": "3"
        },
        "labels": [
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12341707",
                "id": "12341707",
                "description": "",
                "name": "0.9.0",
                "archived": false,
                "released": true,
                "releaseDate": "2018-03-19"
            }
        ],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
            "name": "apitrou",
            "key": "pitrou",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
            },
            "displayName": "Antoine Pitrou",
            "active": true,
            "timeZone": "Europe/Paris"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12328935",
                "id": "12328935",
                "name": "C++"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
            "name": "apitrou",
            "key": "pitrou",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
            },
            "displayName": "Antoine Pitrou",
            "active": true,
            "timeZone": "Europe/Paris"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
            "name": "apitrou",
            "key": "pitrou",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
            },
            "displayName": "Antoine Pitrou",
            "active": true,
            "timeZone": "Europe/Paris"
        },
        "aggregateprogress": {
            "progress": 4800,
            "total": 4800,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 4800,
            "total": 4800,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-2400/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 8,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13150265/worklog/114754",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou opened a new pull request #2154: ARROW-2400: [C++] Fix Status destructor performance\nURL: https://github.com/apache/arrow/pull/2154\n \n \n   On certain compilers, splitting off the slow path improves performance significantly.\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-06-22T12:55:15.237+0000",
                    "updated": "2018-06-22T12:55:15.237+0000",
                    "started": "2018-06-22T12:55:15.236+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "114754",
                    "issueId": "13150265"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13150265/worklog/114766",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "codecov-io commented on issue #2154: ARROW-2400: [C++] Fix Status destructor performance\nURL: https://github.com/apache/arrow/pull/2154#issuecomment-399444146\n \n \n   # [Codecov](https://codecov.io/gh/apache/arrow/pull/2154?src=pr&el=h1) Report\n   > Merging [#2154](https://codecov.io/gh/apache/arrow/pull/2154?src=pr&el=desc) into [master](https://codecov.io/gh/apache/arrow/commit/884474ca5ca1b8da55c0b23eb7cb784c2cd9bdb4?src=pr&el=desc) will **increase** coverage by `<.01%`.\n   > The diff coverage is `100%`.\n   \n   [![Impacted file tree graph](https://codecov.io/gh/apache/arrow/pull/2154/graphs/tree.svg?width=650&height=150&src=pr&token=LpTCFbqVT1)](https://codecov.io/gh/apache/arrow/pull/2154?src=pr&el=tree)\n   \n   ```diff\n   @@            Coverage Diff             @@\n   ##           master    #2154      +/-   ##\n   ==========================================\n   + Coverage   86.39%   86.39%   +<.01%     \n   ==========================================\n     Files         230      230              \n     Lines       40701    40706       +5     \n   ==========================================\n   + Hits        35162    35167       +5     \n     Misses       5539     5539\n   ```\n   \n   \n   | [Impacted Files](https://codecov.io/gh/apache/arrow/pull/2154?src=pr&el=tree) | Coverage \u0394 | |\n   |---|---|---|\n   | [cpp/src/arrow/status.h](https://codecov.io/gh/apache/arrow/pull/2154/diff?src=pr&el=tree#diff-Y3BwL3NyYy9hcnJvdy9zdGF0dXMuaA==) | `95.29% <100%> (+0.29%)` | :arrow_up: |\n   \n   ------\n   \n   [Continue to review full report at Codecov](https://codecov.io/gh/apache/arrow/pull/2154?src=pr&el=continue).\n   > **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n   > `\u0394 = absolute <relative> (impact)`, `\u00f8 = not affected`, `? = missing data`\n   > Powered by [Codecov](https://codecov.io/gh/apache/arrow/pull/2154?src=pr&el=footer). Last update [884474c...2b7ab66](https://codecov.io/gh/apache/arrow/pull/2154?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n   \n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-06-22T13:34:32.770+0000",
                    "updated": "2018-06-22T13:34:32.770+0000",
                    "started": "2018-06-22T13:34:32.770+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "114766",
                    "issueId": "13150265"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13150265/worklog/114779",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "cpcloud commented on a change in pull request #2154: ARROW-2400: [C++] Fix Status destructor performance\nURL: https://github.com/apache/arrow/pull/2154#discussion_r197455290\n \n \n\n ##########\n File path: cpp/src/arrow/status.h\n ##########\n @@ -94,8 +94,14 @@ class ARROW_MUST_USE_RESULT ARROW_EXPORT Status;\n class ARROW_EXPORT Status {\n  public:\n   // Create a success status.\n-  Status() : state_(NULL) {}\n-  ~Status() { delete state_; }\n+  Status() noexcept : state_(NULL) {}\n+  ~Status() noexcept {\n+    // ARROW-2400: On certain compilers, splitting off the slow path improves\n+    // performance significantly.\n+    if (ARROW_PREDICT_FALSE(state_ != NULL)) {\n \n Review comment:\n   Can we write this without the double negative? Does the branch prediction provide a material speedup? Or is it mostly from avoiding the destruction code + `noexcept`?\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-06-22T14:05:55.796+0000",
                    "updated": "2018-06-22T14:05:55.796+0000",
                    "started": "2018-06-22T14:05:55.795+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "114779",
                    "issueId": "13150265"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13150265/worklog/114782",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on a change in pull request #2154: ARROW-2400: [C++] Fix Status destructor performance\nURL: https://github.com/apache/arrow/pull/2154#discussion_r197458121\n \n \n\n ##########\n File path: cpp/src/arrow/status.h\n ##########\n @@ -94,8 +94,14 @@ class ARROW_MUST_USE_RESULT ARROW_EXPORT Status;\n class ARROW_EXPORT Status {\n  public:\n   // Create a success status.\n-  Status() : state_(NULL) {}\n-  ~Status() { delete state_; }\n+  Status() noexcept : state_(NULL) {}\n+  ~Status() noexcept {\n+    // ARROW-2400: On certain compilers, splitting off the slow path improves\n+    // performance significantly.\n+    if (ARROW_PREDICT_FALSE(state_ != NULL)) {\n \n Review comment:\n   Branch prediction is done by the CPU. Here we instruct the compiler that the `state_ != NULL` path is a cold path.\r\n   \r\n   I'll remove the double negative.\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-06-22T14:13:16.900+0000",
                    "updated": "2018-06-22T14:13:16.900+0000",
                    "started": "2018-06-22T14:13:16.899+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "114782",
                    "issueId": "13150265"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13150265/worklog/114783",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on a change in pull request #2154: ARROW-2400: [C++] Fix Status destructor performance\nURL: https://github.com/apache/arrow/pull/2154#discussion_r197458305\n \n \n\n ##########\n File path: cpp/src/arrow/status.h\n ##########\n @@ -94,8 +94,14 @@ class ARROW_MUST_USE_RESULT ARROW_EXPORT Status;\n class ARROW_EXPORT Status {\n  public:\n   // Create a success status.\n-  Status() : state_(NULL) {}\n-  ~Status() { delete state_; }\n+  Status() noexcept : state_(NULL) {}\n+  ~Status() noexcept {\n+    // ARROW-2400: On certain compilers, splitting off the slow path improves\n+    // performance significantly.\n+    if (ARROW_PREDICT_FALSE(state_ != NULL)) {\n \n Review comment:\n   To answer your question, the speedup seems to stem from separating the fast path from the cold path.\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-06-22T14:13:48.294+0000",
                    "updated": "2018-06-22T14:13:48.294+0000",
                    "started": "2018-06-22T14:13:48.293+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "114783",
                    "issueId": "13150265"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13150265/worklog/114784",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on a change in pull request #2154: ARROW-2400: [C++] Fix Status destructor performance\nURL: https://github.com/apache/arrow/pull/2154#discussion_r197458858\n \n \n\n ##########\n File path: cpp/src/arrow/status.h\n ##########\n @@ -94,8 +94,14 @@ class ARROW_MUST_USE_RESULT ARROW_EXPORT Status;\n class ARROW_EXPORT Status {\n  public:\n   // Create a success status.\n-  Status() : state_(NULL) {}\n-  ~Status() { delete state_; }\n+  Status() noexcept : state_(NULL) {}\n+  ~Status() noexcept {\n+    // ARROW-2400: On certain compilers, splitting off the slow path improves\n+    // performance significantly.\n+    if (ARROW_PREDICT_FALSE(state_ != NULL)) {\n \n Review comment:\n   Hmm, removing the double negative makes the condition less readable IMHO (`!ARROW_PREDICT_TRUE(state_== NULL)`).\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-06-22T14:15:32.859+0000",
                    "updated": "2018-06-22T14:15:32.859+0000",
                    "started": "2018-06-22T14:15:32.859+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "114784",
                    "issueId": "13150265"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13150265/worklog/114848",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "cpcloud commented on a change in pull request #2154: ARROW-2400: [C++] Fix Status destructor performance\nURL: https://github.com/apache/arrow/pull/2154#discussion_r197522098\n \n \n\n ##########\n File path: cpp/src/arrow/status.h\n ##########\n @@ -94,8 +94,14 @@ class ARROW_MUST_USE_RESULT ARROW_EXPORT Status;\n class ARROW_EXPORT Status {\n  public:\n   // Create a success status.\n-  Status() : state_(NULL) {}\n-  ~Status() { delete state_; }\n+  Status() noexcept : state_(NULL) {}\n+  ~Status() noexcept {\n+    // ARROW-2400: On certain compilers, splitting off the slow path improves\n+    // performance significantly.\n+    if (ARROW_PREDICT_FALSE(state_ != NULL)) {\n \n Review comment:\n   Cool, leaving it as is fine by me.\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-06-22T17:52:31.003+0000",
                    "updated": "2018-06-22T17:52:31.003+0000",
                    "started": "2018-06-22T17:52:31.003+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "114848",
                    "issueId": "13150265"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13150265/worklog/115044",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm closed pull request #2154: ARROW-2400: [C++] Fix Status destructor performance\nURL: https://github.com/apache/arrow/pull/2154\n \n \n   \n\nThis is a PR merged from a forked repository.\nAs GitHub hides the original diff on merge, it is displayed below for\nthe sake of provenance:\n\nAs this is a foreign pull request (from a fork), the diff is supplied\nbelow (as it won't show otherwise due to GitHub magic):\n\ndiff --git a/cpp/src/arrow/status.h b/cpp/src/arrow/status.h\nindex d1e4d66a7e..539b8d1161 100644\n--- a/cpp/src/arrow/status.h\n+++ b/cpp/src/arrow/status.h\n@@ -94,8 +94,14 @@ class ARROW_MUST_USE_RESULT ARROW_EXPORT Status;\n class ARROW_EXPORT Status {\n  public:\n   // Create a success status.\n-  Status() : state_(NULL) {}\n-  ~Status() { delete state_; }\n+  Status() noexcept : state_(NULL) {}\n+  ~Status() noexcept {\n+    // ARROW-2400: On certain compilers, splitting off the slow path improves\n+    // performance significantly.\n+    if (ARROW_PREDICT_FALSE(state_ != NULL)) {\n+      DeleteState();\n+    }\n+  }\n \n   Status(StatusCode code, const std::string& msg);\n \n@@ -104,14 +110,14 @@ class ARROW_EXPORT Status {\n   Status& operator=(const Status& s);\n \n   // Move the specified status.\n-  Status(Status&& s);\n-  Status& operator=(Status&& s);\n+  Status(Status&& s) noexcept;\n+  Status& operator=(Status&& s) noexcept;\n \n   // AND the statuses.\n-  Status operator&(const Status& s) const;\n-  Status operator&(Status&& s) const;\n-  Status& operator&=(const Status& s);\n-  Status& operator&=(Status&& s);\n+  Status operator&(const Status& s) const noexcept;\n+  Status operator&(Status&& s) const noexcept;\n+  Status& operator&=(const Status& s) noexcept;\n+  Status& operator&=(Status&& s) noexcept;\n \n   // Return a success status.\n   static Status OK() { return Status(); }\n@@ -218,6 +224,10 @@ class ARROW_EXPORT Status {\n   // a `State` structure containing the error code and message(s)\n   State* state_;\n \n+  void DeleteState() {\n+    delete state_;\n+    state_ = NULL;\n+  }\n   void CopyFrom(const Status& s);\n   void MoveFrom(Status& s);\n };\n@@ -245,14 +255,14 @@ inline Status& Status::operator=(const Status& s) {\n   return *this;\n }\n \n-inline Status::Status(Status&& s) : state_(s.state_) { s.state_ = NULL; }\n+inline Status::Status(Status&& s) noexcept : state_(s.state_) { s.state_ = NULL; }\n \n-inline Status& Status::operator=(Status&& s) {\n+inline Status& Status::operator=(Status&& s) noexcept {\n   MoveFrom(s);\n   return *this;\n }\n \n-inline Status Status::operator&(const Status& s) const {\n+inline Status Status::operator&(const Status& s) const noexcept {\n   if (ok()) {\n     return s;\n   } else {\n@@ -260,7 +270,7 @@ inline Status Status::operator&(const Status& s) const {\n   }\n }\n \n-inline Status Status::operator&(Status&& s) const {\n+inline Status Status::operator&(Status&& s) const noexcept {\n   if (ok()) {\n     return std::move(s);\n   } else {\n@@ -268,14 +278,14 @@ inline Status Status::operator&(Status&& s) const {\n   }\n }\n \n-inline Status& Status::operator&=(const Status& s) {\n+inline Status& Status::operator&=(const Status& s) noexcept {\n   if (ok() && !s.ok()) {\n     CopyFrom(s);\n   }\n   return *this;\n }\n \n-inline Status& Status::operator&=(Status&& s) {\n+inline Status& Status::operator&=(Status&& s) noexcept {\n   if (ok() && !s.ok()) {\n     MoveFrom(s);\n   }\n\n\n \n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-06-23T07:46:51.827+0000",
                    "updated": "2018-06-23T07:46:51.827+0000",
                    "started": "2018-06-23T07:46:51.826+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "115044",
                    "issueId": "13150265"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
            "id": "4",
            "description": "An improvement or enhancement to an existing feature or task.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
            "name": "Improvement",
            "subtask": false,
            "avatarId": 21140
        },
        "timespent": 4800,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@7868bc[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@242560d4[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@30f66288[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@3f5a9782[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@37fd99e1[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@20e68f2[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@1efa819[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@6ae2c921[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@310b770d[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@4033c026[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@3ce00759[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@40b76a25[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 4800,
        "customfield_12312520": null,
        "customfield_12312521": "Mon Jun 25 14:30:50 UTC 2018",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2018-06-23T07:46:56.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-2400/watchers",
            "watchCount": 3,
            "isWatching": false
        },
        "created": "2018-04-05T10:45:03.000+0000",
        "updated": "2018-07-27T15:27:18.000+0000",
        "timeoriginalestimate": null,
        "description": "Let's take the following micro-benchmark (in Python):\r\n\r\n{code:bash}\r\n$ python -m timeit -s \"import pyarrow as pa; data = [b'xx' for i in range(10000)]\" \"pa.array(data, type=pa.binary())\"\r\n1000 loops, best of 3: 784 usec per loop\r\n{code}\r\n\r\nIf I replace the Status destructor with a no-op:\r\n{code:c++}\r\n  ~Status() { }\r\n{code}\r\n\r\nthen the benchmark result becomes:\r\n{code:bash}\r\n$ python -m timeit -s \"import pyarrow as pa; data = [b'xx' for i in range(10000)]\" \"pa.array(data, type=pa.binary())\"\r\n1000 loops, best of 3: 561 usec per loop\r\n{code}\r\n\r\nThis is almost a 30% win. I get similar results on the conversion benchmarks in the benchmark suite.\r\n\r\nI'm unsure about the explanation. In the common case, {{delete _state}} should be extremely fast, since the state is NULL. Yet, it seems it adds significant overhead. Perhaps because of exception handling?",
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "1h 20m",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 4800
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[C++] Status destructor is expensive",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13150265/comment/16426749",
                    "id": "16426749",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "body": "The figures above were with gcc 4.9. If I switch to clang 5.0 the slowdown is much smaller, but still exists:\r\n\r\n* with the normal destructor:\r\n{code:bash}\r\n$ python -m timeit -s \"import pyarrow as pa; data = [b'xx' for i in range(10000)]\" \"pa.array(data, type=pa.binary())\"\r\n1000 loops, best of 3: 546 usec per loop\r\n{code}\r\n\r\n* with an empty destructor:\r\n{code:bash}\r\n$ python -m timeit -s \"import pyarrow as pa; data = [b'xx' for i in range(10000)]\" \"pa.array(data, type=pa.binary())\"\r\n1000 loops, best of 3: 520 usec per loop\r\n{code}\r\n",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "created": "2018-04-05T10:57:11.826+0000",
                    "updated": "2018-04-05T10:57:51.780+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13150265/comment/16426774",
                    "id": "16426774",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=alendit",
                        "name": "alendit",
                        "key": "alendit",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Dimitri Vorona",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "Hi Antoine,\r\n\r\nthis is something I've noticed before, but didn't find any time to investigate.\u00a0\r\n\r\nTo localize the problem I've created a gist: [https://gist.github.com/alendit/73ec62887d00fb44ef32e8f8eec41af3]\r\n\r\nI get similar numbers to yours (both with -O3):\r\n\r\nclang++ version 6.0.0\r\n{noformat}\r\nRun on (4 X 3200 MHz CPU s)\r\n 2018-04-05 13:29:13\r\n --------------------------------------------------------\r\n Benchmark Time CPU Iterations\r\n --------------------------------------------------------\r\n BM_ArrowStatus\u00a0 \u00a0885 ns 878 ns 735896\r\n BM_OwnCopyStatus 897 ns 893 ns 780257\r\n BM_NoOpStatus\u00a0 \u00a0 884 ns 879 ns 785719{noformat}\r\ng++ 7.3.1\r\n{noformat}\r\nRun on (4 X 3200 MHz CPU s)\r\n 2018-04-05 13:29:28\r\n --------------------------------------------------------\r\n Benchmark Time CPU Iterations\r\n --------------------------------------------------------\r\n BM_ArrowStatus\u00a0 \u00a0818 ns 813 ns 799285\r\n BM_OwnCopyStatus 865 ns 855 ns 785573\r\n BM_NoOpStatus\u00a0 \u00a0 423 ns 421 ns 1734452{noformat}\r\nSo apparently there is an optimization which GCC can perform if the destructor is strictly noop. I'd have to test further to localize the problem. A look into the generated code might be worth it.\r\n\r\nCheers!",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=alendit",
                        "name": "alendit",
                        "key": "alendit",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Dimitri Vorona",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2018-04-05T11:35:47.262+0000",
                    "updated": "2018-04-05T11:47:59.097+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13150265/comment/16426845",
                    "id": "16426845",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=alendit",
                        "name": "alendit",
                        "key": "alendit",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Dimitri Vorona",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "CompilerExplorer for clang:\r\n\r\nhttps://godbolt.org/g/gcVJpq\r\n\r\nand GCC:\r\n\r\nhttps://godbolt.org/g/Lcjx1e",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=alendit",
                        "name": "alendit",
                        "key": "alendit",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Dimitri Vorona",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2018-04-05T12:40:33.306+0000",
                    "updated": "2018-04-05T12:58:56.125+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13150265/comment/16426848",
                    "id": "16426848",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "body": "This patch seems to improve things by ~15% here on gcc 4.9:\r\n\r\n{code:c++}\r\ndiff --git a/cpp/src/arrow/status.h b/cpp/src/arrow/status.h\r\nindex 84f55e4..a2cf438 100644\r\n--- a/cpp/src/arrow/status.h\r\n+++ b/cpp/src/arrow/status.h\r\n@@ -107,7 +107,11 @@ class ARROW_EXPORT Status {\r\n  public:\r\n   // Create a success status.\r\n   Status() : state_(NULL) {}\r\n-  ~Status() { delete state_; }\r\n+  ~Status() {\r\n+    if (ARROW_PREDICT_FALSE(state_ != NULL)) {\r\n+      DeleteState();\r\n+    }\r\n+  }\r\n \r\n   Status(StatusCode code, const std::string& msg);\r\n \r\n@@ -207,6 +211,10 @@ class ARROW_EXPORT Status {\r\n   // a `State` structure containing the error code and message(s)\r\n   State* state_;\r\n \r\n+  void DeleteState() {\r\n+    delete state_;\r\n+    state_ = NULL;\r\n+  }\r\n   void CopyFrom(const State* s);\r\n };\r\n {code}",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "created": "2018-04-05T12:41:38.083+0000",
                    "updated": "2018-04-05T12:41:38.083+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13150265/comment/16426908",
                    "id": "16426908",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=alendit",
                        "name": "alendit",
                        "key": "alendit",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Dimitri Vorona",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "With the predict patch ([https://gist.github.com/alendit/73ec62887d00fb44ef32e8f8eec41af3])\r\n\r\n\u00a0\r\n{noformat}\r\nRun on (4 X 3200 MHz CPU s)\r\n2018-04-05 15:16:29\r\n--------------------------------------------------------\r\nBenchmark Time CPU Iterations\r\n--------------------------------------------------------\r\nBM_ArrowStatus   657 ns 654 ns 1037970\r\nBM_OwnCopyStatus 657 ns 655 ns 1080042\r\nBM_NoOpStatus    330 ns 329 ns 2131999\r\nBM_PredictStatus 448 ns 446 ns 1642423{noformat}\r\n\u00a0No changes on clang.",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=alendit",
                        "name": "alendit",
                        "key": "alendit",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Dimitri Vorona",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2018-04-05T13:18:14.635+0000",
                    "updated": "2018-04-05T13:19:22.972+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13150265/comment/16430414",
                    "id": "16430414",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "body": "The change doesn't seem to make any difference with MSVC 19.13 (VS 2017 Community Edition).",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "created": "2018-04-09T11:48:23.358+0000",
                    "updated": "2018-04-09T11:48:23.358+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13150265/comment/16520268",
                    "id": "16520268",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=alendit",
                        "name": "alendit",
                        "key": "alendit",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Dimitri Vorona",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "What did actually happen of it? 200ns per command saved by a 3 lines change would seem like a win to me.",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=alendit",
                        "name": "alendit",
                        "key": "alendit",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Dimitri Vorona",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2018-06-22T11:31:54.527+0000",
                    "updated": "2018-06-22T11:31:54.527+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13150265/comment/16520272",
                    "id": "16520272",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "body": "Nothing yet :) I think we should also experiment with {{noexcept}} here (apparently it can have non-trivial performance implications).",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "created": "2018-06-22T11:34:24.682+0000",
                    "updated": "2018-06-22T11:34:24.682+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13150265/comment/16520991",
                    "id": "16520991",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "Apache Kudu has a modified version of Status with various interesting tidbits, if interested you may have a look to tinker https://github.com/apache/kudu/blob/master/src/kudu/util/status.h",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2018-06-23T07:41:25.449+0000",
                    "updated": "2018-06-23T07:41:25.449+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13150265/comment/16520993",
                    "id": "16520993",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "Issue resolved by pull request 2154\n[https://github.com/apache/arrow/pull/2154]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2018-06-23T07:46:56.214+0000",
                    "updated": "2018-06-23T07:46:56.214+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13150265/comment/16522344",
                    "id": "16522344",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "body": "> Apache Kudu has a modified version of Status with various interesting tidbits, if interested you may have a look to tinker [https://github.com/apache/kudu/blob/master/src/kudu/util/status.h]\r\n\r\nInteresting. It doesn't seem conceptually different, except that they have micro-optimized the state encoding, even though it's only used on error. I don't think it's worth the effort.",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "created": "2018-06-25T14:30:50.090+0000",
                    "updated": "2018-06-25T14:30:50.090+0000"
                }
            ],
            "maxResults": 11,
            "total": 11,
            "startAt": 0
        },
        "customfield_12311820": "0|i3s6hz:",
        "customfield_12314139": null
    }
}