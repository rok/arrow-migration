{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13409877",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13409877",
    "key": "ARROW-14575",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12351550",
                "id": "12351550",
                "name": "9.0.0",
                "archived": false,
                "released": true,
                "releaseDate": "2022-08-03"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "name": "Major",
            "id": "3"
        },
        "labels": [
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [
            {
                "id": "12639986",
                "self": "https://issues.apache.org/jira/rest/api/2/issueLink/12639986",
                "type": {
                    "id": "12310000",
                    "name": "Duplicate",
                    "inward": "is duplicated by",
                    "outward": "duplicates",
                    "self": "https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"
                },
                "inwardIssue": {
                    "id": "13444919",
                    "key": "ARROW-16577",
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13444919",
                    "fields": {
                        "summary": "[R] dplyr `n` function cannot be called with `dplyr::n()`",
                        "status": {
                            "self": "https://issues.apache.org/jira/rest/api/2/status/6",
                            "description": "The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/closed.png",
                            "name": "Closed",
                            "id": "6",
                            "statusCategory": {
                                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                                "id": 3,
                                "key": "done",
                                "colorName": "green",
                                "name": "Done"
                            }
                        },
                        "priority": {
                            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
                            "name": "Major",
                            "id": "3"
                        },
                        "issuetype": {
                            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
                            "id": "1",
                            "description": "A problem which impairs or prevents the functions of the product.",
                            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
                            "name": "Bug",
                            "subtask": false,
                            "avatarId": 21133
                        }
                    }
                }
            },
            {
                "id": "12629206",
                "self": "https://issues.apache.org/jira/rest/api/2/issueLink/12629206",
                "type": {
                    "id": "10030",
                    "name": "Reference",
                    "inward": "is related to",
                    "outward": "relates to",
                    "self": "https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"
                },
                "outwardIssue": {
                    "id": "13415864",
                    "key": "ARROW-15010",
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13415864",
                    "fields": {
                        "summary": "[R] Create a function registry for our NSE funcs",
                        "status": {
                            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
                            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
                            "name": "Resolved",
                            "id": "5",
                            "statusCategory": {
                                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                                "id": 3,
                                "key": "done",
                                "colorName": "green",
                                "name": "Done"
                            }
                        },
                        "priority": {
                            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
                            "name": "Major",
                            "id": "3"
                        },
                        "issuetype": {
                            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
                            "id": "4",
                            "description": "An improvement or enhancement to an existing feature or task.",
                            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
                            "name": "Improvement",
                            "subtask": false,
                            "avatarId": 21140
                        }
                    }
                }
            }
        ],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=dragosmg",
            "name": "dragosmg",
            "key": "dragosmg",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34061",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34061",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34061",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34061"
            },
            "displayName": "Drago\u0219 Moldovan-Gr\u00fcnfeld",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12333008",
                "id": "12333008",
                "name": "R"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=jonkeane",
            "name": "jonkeane",
            "key": "jonkeane",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34057",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34057",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34057",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34057"
            },
            "displayName": "Jonathan Keane",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "subtasks": [
            {
                "id": "13461777",
                "key": "ARROW-16888",
                "self": "https://issues.apache.org/jira/rest/api/2/issue/13461777",
                "fields": {
                    "summary": "[R] Add functionality to allow binding registration with the `pkg::fun` name",
                    "status": {
                        "self": "https://issues.apache.org/jira/rest/api/2/status/6",
                        "description": "The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.",
                        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/closed.png",
                        "name": "Closed",
                        "id": "6",
                        "statusCategory": {
                            "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                            "id": 3,
                            "key": "done",
                            "colorName": "green",
                            "name": "Done"
                        }
                    },
                    "priority": {
                        "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
                        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
                        "name": "Major",
                        "id": "3"
                    },
                    "issuetype": {
                        "self": "https://issues.apache.org/jira/rest/api/2/issuetype/7",
                        "id": "7",
                        "description": "The sub-task of the issue",
                        "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21146&avatarType=issuetype",
                        "name": "Sub-task",
                        "subtask": true,
                        "avatarId": 21146
                    }
                }
            },
            {
                "id": "13461813",
                "key": "ARROW-16889",
                "self": "https://issues.apache.org/jira/rest/api/2/issue/13461813",
                "fields": {
                    "summary": "[R] Register `nse_funcs` requiring indirect mapping",
                    "status": {
                        "self": "https://issues.apache.org/jira/rest/api/2/status/6",
                        "description": "The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.",
                        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/closed.png",
                        "name": "Closed",
                        "id": "6",
                        "statusCategory": {
                            "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                            "id": 3,
                            "key": "done",
                            "colorName": "green",
                            "name": "Done"
                        }
                    },
                    "priority": {
                        "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
                        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
                        "name": "Major",
                        "id": "3"
                    },
                    "issuetype": {
                        "self": "https://issues.apache.org/jira/rest/api/2/issuetype/7",
                        "id": "7",
                        "description": "The sub-task of the issue",
                        "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21146&avatarType=issuetype",
                        "name": "Sub-task",
                        "subtask": true,
                        "avatarId": 21146
                    }
                }
            },
            {
                "id": "13461830",
                "key": "ARROW-16890",
                "self": "https://issues.apache.org/jira/rest/api/2/issue/13461830",
                "fields": {
                    "summary": "[R] Register `nse_funcs` requiring direct mapping (unary & binary)",
                    "status": {
                        "self": "https://issues.apache.org/jira/rest/api/2/status/6",
                        "description": "The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.",
                        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/closed.png",
                        "name": "Closed",
                        "id": "6",
                        "statusCategory": {
                            "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                            "id": 3,
                            "key": "done",
                            "colorName": "green",
                            "name": "Done"
                        }
                    },
                    "priority": {
                        "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
                        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
                        "name": "Major",
                        "id": "3"
                    },
                    "issuetype": {
                        "self": "https://issues.apache.org/jira/rest/api/2/issuetype/7",
                        "id": "7",
                        "description": "The sub-task of the issue",
                        "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21146&avatarType=issuetype",
                        "name": "Sub-task",
                        "subtask": true,
                        "avatarId": 21146
                    }
                }
            },
            {
                "id": "13461867",
                "key": "ARROW-16891",
                "self": "https://issues.apache.org/jira/rest/api/2/issue/13461867",
                "fields": {
                    "summary": "[R] [Doc] Document changes in the _Writing bindings_ documentation",
                    "status": {
                        "self": "https://issues.apache.org/jira/rest/api/2/status/6",
                        "description": "The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.",
                        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/closed.png",
                        "name": "Closed",
                        "id": "6",
                        "statusCategory": {
                            "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                            "id": 3,
                            "key": "done",
                            "colorName": "green",
                            "name": "Done"
                        }
                    },
                    "priority": {
                        "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
                        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
                        "name": "Major",
                        "id": "3"
                    },
                    "issuetype": {
                        "self": "https://issues.apache.org/jira/rest/api/2/issuetype/7",
                        "id": "7",
                        "description": "The sub-task of the issue",
                        "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21146&avatarType=issuetype",
                        "name": "Sub-task",
                        "subtask": true,
                        "avatarId": 21146
                    }
                }
            }
        ],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=jonkeane",
            "name": "jonkeane",
            "key": "jonkeane",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34057",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34057",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34057",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34057"
            },
            "displayName": "Jonathan Keane",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "aggregateprogress": {
            "progress": 69000,
            "total": 69000,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 69000,
            "total": 69000,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-14575/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 115,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13409877/worklog/770532",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "dragosmg opened a new pull request, #13160:\nURL: https://github.com/apache/arrow/pull/13160\n\n   This PR will allow the use of namespacing with bindings:\r\n   ``` r\r\n   library(arrow, warn.conflicts = FALSE)\r\n   library(dplyr, warn.conflicts = FALSE)\r\n   library(lubridate, warn.conflicts = FALSE)\r\n   \r\n   test_df <- tibble(\r\n     date = as.Date(c(\"2022-03-22\", \"2021-07-30\", NA))\r\n   )\r\n   \r\n   test_df %>%\r\n     mutate(ddate = lubridate::as_datetime(date)) %>%\r\n     collect()\r\n   #> # A tibble: 3 \u00d7 2\r\n   #>   date       ddate              \r\n   #>   <date>     <dttm>             \r\n   #> 1 2022-03-22 2022-03-22 00:00:00\r\n   #> 2 2021-07-30 2021-07-30 00:00:00\r\n   #> 3 NA         NA\r\n   \r\n   test_df %>%\r\n     arrow_table() %>% \r\n     mutate(ddate = lubridate::as_datetime(date)) %>%\r\n     collect()\r\n   #> # A tibble: 3 \u00d7 2\r\n   #>   date       ddate              \r\n   #>   <date>     <dttm>             \r\n   #> 1 2022-03-22 2022-03-22 00:00:00\r\n   #> 2 2021-07-30 2021-07-30 00:00:00\r\n   #> 3 NA         NA\r\n   ```\r\n   \r\n   <sup>Created on 2022-05-14 by the [reprex package](https://reprex.tidyverse.org) (v2.0.1)</sup> \r\n   \r\n   The approach:\r\n   * change the naming convention for bindings, from `\"as_datetime\"` to `\"lubridate_as_datetime\"`, for 2 reasons:\r\n     * it gives us an indication of the package / namespace where linking to\r\n     * it avoids the use of the double-colon (`::`) operator (easier dealing with strings only)\r\n   * we register each binding both with its _short_ name (`\"as_datetime\"`) and its _full_ name (`\"lubridate_as_datetime\"`)\r\n   * we change the expressions supplied by the user by replacing the double colon (`::`) with an underscore (`_`)\n\n\n",
                    "created": "2022-05-14T23:04:39.505+0000",
                    "updated": "2022-05-14T23:04:39.505+0000",
                    "started": "2022-05-14T23:04:39.504+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "770532",
                    "issueId": "13409877"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13409877/worklog/770533",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "github-actions[bot] commented on PR #13160:\nURL: https://github.com/apache/arrow/pull/13160#issuecomment-1126824453\n\n   https://issues.apache.org/jira/browse/ARROW-14575\n\n\n",
                    "created": "2022-05-14T23:04:57.920+0000",
                    "updated": "2022-05-14T23:04:57.920+0000",
                    "started": "2022-05-14T23:04:57.920+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "770533",
                    "issueId": "13409877"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13409877/worklog/770534",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "github-actions[bot] commented on PR #13160:\nURL: https://github.com/apache/arrow/pull/13160#issuecomment-1126824457\n\n   :warning: Ticket **has not been started in JIRA**, please click 'Start Progress'.\n\n\n",
                    "created": "2022-05-14T23:04:59.853+0000",
                    "updated": "2022-05-14T23:04:59.853+0000",
                    "started": "2022-05-14T23:04:59.853+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "770534",
                    "issueId": "13409877"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13409877/worklog/770535",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "dragosmg commented on code in PR #13160:\nURL: https://github.com/apache/arrow/pull/13160#discussion_r873083697\n\n\n##########\nr/R/dplyr-funcs.R:\n##########\n@@ -58,7 +58,8 @@ NULL\n #' @keywords internal\n #'\n register_binding <- function(fun_name, fun, registry = nse_funcs) {\n-  name <- gsub(\"^.*?::\", \"\", fun_name)\n+  # test name <- gsub(\"^.*?::\", \"\", fun_name)\n+  name <- gsub(\"^.*?_\", \"\", fun_name)\n   namespace <- gsub(\"::.*$\", \"\", fun_name)\n \n   previous_fun <- if (name %in% names(registry)) registry[[name]] else NULL\n\nReview Comment:\n   I need to add some logic to clean-up both names\n\n\n\n##########\nr/R/dplyr-mutate.R:\n##########\n@@ -57,7 +64,7 @@ mutate.arrow_dplyr_query <- function(.data,\n     if (inherits(results[[new_var]], \"try-error\")) {\n       msg <- handle_arrow_not_supported(\n         results[[new_var]],\n-        format_expr(exprs[[i]])\n+        format_expr(exprs2[[i]])\n\nReview Comment:\n   we return the original expression in case of error, `\"lubridate::as_datetime()\"`, instead of `\"lubridate_as_datime()\"` to avoid confusion.\n\n\n\n##########\nr/R/dplyr-funcs-datetime.R:\n##########\n@@ -303,7 +303,7 @@ register_bindings_datetime_conversion <- function() {\n     )\n   })\n \n-  register_binding(\"as_datetime\", function(x,\n+  register_binding(\"lubridate_as_datetime\", function(x,\n\nReview Comment:\n   only did this for 2 bindings: `as_datetime` and `make_difftime`\n\n\n\n",
                    "created": "2022-05-14T23:07:46.896+0000",
                    "updated": "2022-05-14T23:07:46.896+0000",
                    "started": "2022-05-14T23:07:46.895+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "770535",
                    "issueId": "13409877"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13409877/worklog/770536",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "dragosmg commented on code in PR #13160:\nURL: https://github.com/apache/arrow/pull/13160#discussion_r873083746\n\n\n##########\nr/R/dplyr-mutate.R:\n##########\n@@ -57,7 +64,7 @@ mutate.arrow_dplyr_query <- function(.data,\n     if (inherits(results[[new_var]], \"try-error\")) {\n       msg <- handle_arrow_not_supported(\n         results[[new_var]],\n-        format_expr(exprs[[i]])\n+        format_expr(exprs2[[i]])\n\nReview Comment:\n   In case or error, we return the original expression, e.g. `\"lubridate::as_datetime()\"` instead of `\"lubridate_as_datime()\"` to avoid confusion.\n\n\n\n",
                    "created": "2022-05-14T23:08:20.958+0000",
                    "updated": "2022-05-14T23:08:20.958+0000",
                    "started": "2022-05-14T23:08:20.957+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "770536",
                    "issueId": "13409877"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13409877/worklog/770537",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "dragosmg commented on code in PR #13160:\nURL: https://github.com/apache/arrow/pull/13160#discussion_r873083672\n\n\n##########\nr/R/dplyr-funcs-datetime.R:\n##########\n@@ -303,7 +303,7 @@ register_bindings_datetime_conversion <- function() {\n     )\n   })\n \n-  register_binding(\"as_datetime\", function(x,\n+  register_binding(\"lubridate_as_datetime\", function(x,\n\nReview Comment:\n   I only did this as a test for 2 bindings: `as_datetime` and `make_difftime`\n\n\n\n",
                    "created": "2022-05-14T23:09:31.185+0000",
                    "updated": "2022-05-14T23:09:31.185+0000",
                    "started": "2022-05-14T23:09:31.184+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "770537",
                    "issueId": "13409877"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13409877/worklog/770539",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "dragosmg commented on code in PR #13160:\nURL: https://github.com/apache/arrow/pull/13160#discussion_r873083672\n\n\n##########\nr/R/dplyr-funcs-datetime.R:\n##########\n@@ -303,7 +303,7 @@ register_bindings_datetime_conversion <- function() {\n     )\n   })\n \n-  register_binding(\"as_datetime\", function(x,\n+  register_binding(\"lubridate_as_datetime\", function(x,\n\nReview Comment:\n   I only did this as a test for 2 bindings: `as_datetime` and `make_difftime`. I expect some tests to fail.\n\n\n\n",
                    "created": "2022-05-14T23:14:26.932+0000",
                    "updated": "2022-05-14T23:14:26.932+0000",
                    "started": "2022-05-14T23:14:26.932+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "770539",
                    "issueId": "13409877"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13409877/worklog/770540",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "dragosmg commented on code in PR #13160:\nURL: https://github.com/apache/arrow/pull/13160#discussion_r873084594\n\n\n##########\nr/tests/testthat/test-dplyr-funcs-datetime.R:\n##########\n@@ -1600,17 +1600,20 @@ test_that(\"`as_datetime()`\", {\n     double_date = c(10.1, 25.2, NA)\n   )\n \n-  test_df %>%\n-    arrow_table() %>%\n-    mutate(\n-      ddate = as_datetime(date),\n-      dchar_date_no_tz = as_datetime(char_date),\n-      dchar_date_non_iso = as_datetime(char_date_non_iso, format = \"%Y-%d-%m %H:%M:%S\"),\n-      dint_date = as_datetime(int_date, origin = \"1970-01-02\"),\n-      dintegerish_date = as_datetime(integerish_date, origin = \"1970-01-02\"),\n-      dintegerish_date2 = as_datetime(integerish_date, origin = \"1970-01-01\")\n-    ) %>%\n-    collect()\n+  compare_dplyr_binding(\n\nReview Comment:\n   I expect some tests will fail, mostly due to the discarding of the characters before the `\"_\"` during the registration of the binding. If we switch to the `\"package_fun_name\"` naming convention, that should be fine. \n\n\n\n",
                    "created": "2022-05-14T23:19:57.571+0000",
                    "updated": "2022-05-14T23:19:57.571+0000",
                    "started": "2022-05-14T23:19:57.571+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "770540",
                    "issueId": "13409877"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13409877/worklog/770541",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "dragosmg commented on code in PR #13160:\nURL: https://github.com/apache/arrow/pull/13160#discussion_r873084594\n\n\n##########\nr/tests/testthat/test-dplyr-funcs-datetime.R:\n##########\n@@ -1600,17 +1600,20 @@ test_that(\"`as_datetime()`\", {\n     double_date = c(10.1, 25.2, NA)\n   )\n \n-  test_df %>%\n-    arrow_table() %>%\n-    mutate(\n-      ddate = as_datetime(date),\n-      dchar_date_no_tz = as_datetime(char_date),\n-      dchar_date_non_iso = as_datetime(char_date_non_iso, format = \"%Y-%d-%m %H:%M:%S\"),\n-      dint_date = as_datetime(int_date, origin = \"1970-01-02\"),\n-      dintegerish_date = as_datetime(integerish_date, origin = \"1970-01-02\"),\n-      dintegerish_date2 = as_datetime(integerish_date, origin = \"1970-01-01\")\n-    ) %>%\n-    collect()\n+  compare_dplyr_binding(\n\nReview Comment:\n   I expect some tests will fail, mostly due to the discarding of the characters before the `\"_\"` during the registration of the binding. If we switch to the `\"package_fun_name\"` naming convention, that _should_ \ud83e\udd1e\ud83c\udffbbe fine. \n\n\n\n",
                    "created": "2022-05-14T23:21:37.633+0000",
                    "updated": "2022-05-14T23:21:37.633+0000",
                    "started": "2022-05-14T23:21:37.632+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "770541",
                    "issueId": "13409877"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13409877/worklog/770721",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "dragosmg commented on code in PR #13160:\nURL: https://github.com/apache/arrow/pull/13160#discussion_r873083697\n\n\n##########\nr/R/dplyr-funcs.R:\n##########\n@@ -58,7 +58,8 @@ NULL\n #' @keywords internal\n #'\n register_binding <- function(fun_name, fun, registry = nse_funcs) {\n-  name <- gsub(\"^.*?::\", \"\", fun_name)\n+  # test name <- gsub(\"^.*?::\", \"\", fun_name)\n+  name <- gsub(\"^.*?_\", \"\", fun_name)\n   namespace <- gsub(\"::.*$\", \"\", fun_name)\n \n   previous_fun <- if (name %in% names(registry)) registry[[name]] else NULL\n\nReview Comment:\n   I need to add some logic to clean-up / un-register both names.\n\n\n\n##########\nr/R/dplyr-funcs.R:\n##########\n@@ -58,7 +58,8 @@ NULL\n #' @keywords internal\n #'\n register_binding <- function(fun_name, fun, registry = nse_funcs) {\n-  name <- gsub(\"^.*?::\", \"\", fun_name)\n+  # test name <- gsub(\"^.*?::\", \"\", fun_name)\n+  name <- gsub(\"^.*?_\", \"\", fun_name)\n   namespace <- gsub(\"::.*$\", \"\", fun_name)\n \n   previous_fun <- if (name %in% names(registry)) registry[[name]] else NULL\n\nReview Comment:\n   Done\n\n\n\n",
                    "created": "2022-05-16T09:23:50.095+0000",
                    "updated": "2022-05-16T09:23:50.095+0000",
                    "started": "2022-05-16T09:23:50.095+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "770721",
                    "issueId": "13409877"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13409877/worklog/770798",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "thisisnic commented on code in PR #13160:\nURL: https://github.com/apache/arrow/pull/13160#discussion_r873660800\n\n\n##########\nr/R/dplyr-funcs.R:\n##########\n@@ -58,15 +58,16 @@ NULL\n #' @keywords internal\n #'\n register_binding <- function(fun_name, fun, registry = nse_funcs) {\n-  name <- gsub(\"^.*?::\", \"\", fun_name)\n+  name <- gsub(\"^.*?_\", \"\", fun_name)\n   namespace <- gsub(\"::.*$\", \"\", fun_name)\n\nReview Comment:\n   I haven't thought about this in great detail, but I'd be expecting an implementation of this to use the `namespace` variable here, or remove it.\r\n   \r\n   I'm just wondering if there might be some advantages to recording the function and namespace separately instead of appending them?  The former feels \"cleaner\" in my head, though that's not sufficient reason to suggest changing it.\r\n   \r\n   A thought; how do we distinguish between different kinds of functions?  i.e. we have:\r\n   \r\n   * bindings for functions from packages, e.g. `lubridate::as_datetime()`\r\n   * bindings directly to arrow compute functions, e.g. `arrow_utf8_split_whitespace()`\r\n   * other bindings list the one for `cast()`\r\n   \r\n   In the last case here, if we have other functions which have underscores but no namespace, I think the regex would no longer be extracting the right name.\n\n\n\n",
                    "created": "2022-05-16T12:24:10.950+0000",
                    "updated": "2022-05-16T12:24:10.950+0000",
                    "started": "2022-05-16T12:24:10.950+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "770798",
                    "issueId": "13409877"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13409877/worklog/770799",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "dragosmg commented on code in PR #13160:\nURL: https://github.com/apache/arrow/pull/13160#discussion_r873665067\n\n\n##########\nr/R/dplyr-funcs.R:\n##########\n@@ -58,15 +58,16 @@ NULL\n #' @keywords internal\n #'\n register_binding <- function(fun_name, fun, registry = nse_funcs) {\n-  name <- gsub(\"^.*?::\", \"\", fun_name)\n+  name <- gsub(\"^.*?_\", \"\", fun_name)\n   namespace <- gsub(\"::.*$\", \"\", fun_name)\n\nReview Comment:\n   The `namespace` variable existed there, I haven't touched it. I assume it was added for potential future use. I think it could be removed once we support the `package::` prefix. We could introduce an `arrow` specific prefix. This could be either `arrow_` or `internal_`. In which case both `arrow_fun_name` and `fun_name` would be registered.\n\n\n\n",
                    "created": "2022-05-16T12:28:51.325+0000",
                    "updated": "2022-05-16T12:28:51.325+0000",
                    "started": "2022-05-16T12:28:51.324+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "770799",
                    "issueId": "13409877"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13409877/worklog/770800",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "dragosmg commented on code in PR #13160:\nURL: https://github.com/apache/arrow/pull/13160#discussion_r873665067\n\n\n##########\nr/R/dplyr-funcs.R:\n##########\n@@ -58,15 +58,16 @@ NULL\n #' @keywords internal\n #'\n register_binding <- function(fun_name, fun, registry = nse_funcs) {\n-  name <- gsub(\"^.*?::\", \"\", fun_name)\n+  name <- gsub(\"^.*?_\", \"\", fun_name)\n   namespace <- gsub(\"::.*$\", \"\", fun_name)\n\nReview Comment:\n   * The `namespace` variable existed previously, I haven't touched it. I assume it was added for potential future use. I think it could be removed once we support the `package::` prefix. \r\n   * We could introduce an `arrow` specific prefix. This could be either `arrow_` or `internal_`. In which case both `arrow_fun_name` and `fun_name` would be registered.\n\n\n\n",
                    "created": "2022-05-16T12:29:31.566+0000",
                    "updated": "2022-05-16T12:29:31.566+0000",
                    "started": "2022-05-16T12:29:31.565+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "770800",
                    "issueId": "13409877"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13409877/worklog/770802",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "dragosmg commented on code in PR #13160:\nURL: https://github.com/apache/arrow/pull/13160#discussion_r873669800\n\n\n##########\nr/R/dplyr-funcs.R:\n##########\n@@ -58,15 +58,16 @@ NULL\n #' @keywords internal\n #'\n register_binding <- function(fun_name, fun, registry = nse_funcs) {\n-  name <- gsub(\"^.*?::\", \"\", fun_name)\n+  name <- gsub(\"^.*?_\", \"\", fun_name)\n   namespace <- gsub(\"::.*$\", \"\", fun_name)\n\nReview Comment:\n   FWIW I think a binding name `\"lubridate_date\"` is better than `\"date\"` as it makes it clear which function we're aiming to intercept / replace in a mutate call.\n\n\n\n",
                    "created": "2022-05-16T12:33:26.721+0000",
                    "updated": "2022-05-16T12:33:26.721+0000",
                    "started": "2022-05-16T12:33:26.721+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "770802",
                    "issueId": "13409877"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13409877/worklog/770806",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "thisisnic commented on code in PR #13160:\nURL: https://github.com/apache/arrow/pull/13160#discussion_r873687746\n\n\n##########\nr/R/dplyr-funcs.R:\n##########\n@@ -58,15 +58,16 @@ NULL\n #' @keywords internal\n #'\n register_binding <- function(fun_name, fun, registry = nse_funcs) {\n-  name <- gsub(\"^.*?::\", \"\", fun_name)\n+  name <- gsub(\"^.*?_\", \"\", fun_name)\n   namespace <- gsub(\"::.*$\", \"\", fun_name)\n\nReview Comment:\n   Sure - I guess what I'm envisioning involves being able to achieve that but via `registry` being more complicated than a named list, so some object which has the function's name, namespace, and the function body itself, **but** I'm not advocating for unnecessarily complicating things this way without good reason.\n\n\n\n",
                    "created": "2022-05-16T12:51:19.340+0000",
                    "updated": "2022-05-16T12:51:19.340+0000",
                    "started": "2022-05-16T12:51:19.340+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "770806",
                    "issueId": "13409877"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13409877/worklog/770809",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "dragosmg commented on code in PR #13160:\nURL: https://github.com/apache/arrow/pull/13160#discussion_r873690761\n\n\n##########\nr/R/dplyr-funcs.R:\n##########\n@@ -58,15 +58,16 @@ NULL\n #' @keywords internal\n #'\n register_binding <- function(fun_name, fun, registry = nse_funcs) {\n-  name <- gsub(\"^.*?::\", \"\", fun_name)\n+  name <- gsub(\"^.*?_\", \"\", fun_name)\n   namespace <- gsub(\"::.*$\", \"\", fun_name)\n\nReview Comment:\n   I went for what I see as a simpler approach as it's easier to think about and execute an expression when it doesn't contain the `::` operator.\n\n\n\n",
                    "created": "2022-05-16T12:54:24.649+0000",
                    "updated": "2022-05-16T12:54:24.649+0000",
                    "started": "2022-05-16T12:54:24.649+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "770809",
                    "issueId": "13409877"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13409877/worklog/770810",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "dragosmg commented on code in PR #13160:\nURL: https://github.com/apache/arrow/pull/13160#discussion_r873690761\n\n\n##########\nr/R/dplyr-funcs.R:\n##########\n@@ -58,15 +58,16 @@ NULL\n #' @keywords internal\n #'\n register_binding <- function(fun_name, fun, registry = nse_funcs) {\n-  name <- gsub(\"^.*?::\", \"\", fun_name)\n+  name <- gsub(\"^.*?_\", \"\", fun_name)\n   namespace <- gsub(\"::.*$\", \"\", fun_name)\n\nReview Comment:\n   I went for what I see as a simpler approach as it's easier to think about and execute an expression when it doesn't contain the `::` operator. Do you see any shortcomings to my proposed approach?\n\n\n\n",
                    "created": "2022-05-16T12:55:04.660+0000",
                    "updated": "2022-05-16T12:55:04.660+0000",
                    "started": "2022-05-16T12:55:04.659+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "770810",
                    "issueId": "13409877"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13409877/worklog/770814",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "dragosmg commented on code in PR #13160:\nURL: https://github.com/apache/arrow/pull/13160#discussion_r873690761\n\n\n##########\nr/R/dplyr-funcs.R:\n##########\n@@ -58,15 +58,16 @@ NULL\n #' @keywords internal\n #'\n register_binding <- function(fun_name, fun, registry = nse_funcs) {\n-  name <- gsub(\"^.*?::\", \"\", fun_name)\n+  name <- gsub(\"^.*?_\", \"\", fun_name)\n   namespace <- gsub(\"::.*$\", \"\", fun_name)\n\nReview Comment:\n   I went for what I see as a simpler approach as it's easier to think about and execute an expression when it doesn't contain the `::` operator. Do you see any shortcomings to my proposed approach? (other than the need for \"namespacing\" internal / arrow functions?) \n\n\n\n##########\nr/R/dplyr-funcs.R:\n##########\n@@ -58,15 +58,16 @@ NULL\n #' @keywords internal\n #'\n register_binding <- function(fun_name, fun, registry = nse_funcs) {\n-  name <- gsub(\"^.*?::\", \"\", fun_name)\n+  name <- gsub(\"^.*?_\", \"\", fun_name)\n   namespace <- gsub(\"::.*$\", \"\", fun_name)\n\nReview Comment:\n   I went for what I see as a simpler approach as it's easier to think about and execute an expression when it doesn't contain the `::` operator. Do you see any shortcomings to my proposed approach? (other than the need for \"namespacing\" internal / arrow functions) \n\n\n\n",
                    "created": "2022-05-16T12:58:15.221+0000",
                    "updated": "2022-05-16T12:58:15.221+0000",
                    "started": "2022-05-16T12:58:15.221+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "770814",
                    "issueId": "13409877"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13409877/worklog/770826",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "thisisnic commented on code in PR #13160:\nURL: https://github.com/apache/arrow/pull/13160#discussion_r873711442\n\n\n##########\nr/R/dplyr-funcs.R:\n##########\n@@ -58,15 +58,16 @@ NULL\n #' @keywords internal\n #'\n register_binding <- function(fun_name, fun, registry = nse_funcs) {\n-  name <- gsub(\"^.*?::\", \"\", fun_name)\n+  name <- gsub(\"^.*?_\", \"\", fun_name)\n   namespace <- gsub(\"::.*$\", \"\", fun_name)\n\nReview Comment:\n   Nothing that jumps out at me right now, looks good!\n\n\n\n",
                    "created": "2022-05-16T13:14:31.326+0000",
                    "updated": "2022-05-16T13:14:31.326+0000",
                    "started": "2022-05-16T13:14:31.326+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "770826",
                    "issueId": "13409877"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13409877/worklog/770998",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jonkeane commented on code in PR #13160:\nURL: https://github.com/apache/arrow/pull/13160#discussion_r874087967\n\n\n##########\nr/R/dplyr-funcs.R:\n##########\n@@ -58,15 +58,16 @@ NULL\n #' @keywords internal\n #'\n register_binding <- function(fun_name, fun, registry = nse_funcs) {\n-  name <- gsub(\"^.*?::\", \"\", fun_name)\n+  name <- gsub(\"^.*?_\", \"\", fun_name)\n   namespace <- gsub(\"::.*$\", \"\", fun_name)\n\nReview Comment:\n   Nic is absolutely right here, let's think about the design here. Especially using underscores, which are not reserved so could cause clashes | weird design decisions like they are pointing out. \r\n   \r\n   You might also look at the PR that added much of this code \u2014 there's discussion in there that is super helpful: https://github.com/apache/arrow/pull/11904#issuecomment-999258101 I'm sure you've read it as well, but there's some really good content in the jira comments as well (along with some sketches). \r\n   \n\n\n\n",
                    "created": "2022-05-16T19:34:12.760+0000",
                    "updated": "2022-05-16T19:34:12.760+0000",
                    "started": "2022-05-16T19:34:12.760+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "770998",
                    "issueId": "13409877"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
            "id": "1",
            "description": "A problem which impairs or prevents the functions of the product.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
            "name": "Bug",
            "subtask": false,
            "avatarId": 21133
        },
        "timespent": 69000,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@7ef96cd7[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@5e97cc7b[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@25992a26[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@450dcefa[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@3f996cac[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@34b8aa87[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@589c7e2c[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@73cd01db[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@7c5ef02[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@76d891ef[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@4d8efc06[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@56d6ffb5[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 69000,
        "customfield_12312520": null,
        "customfield_12312521": "Fri Jul 15 21:23:54 UTC 2022",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2022-07-15T21:23:54.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-14575/watchers",
            "watchCount": 4,
            "isWatching": false
        },
        "created": "2021-11-03T14:02:18.000+0000",
        "updated": "2022-07-20T11:38:14.000+0000",
        "timeoriginalestimate": null,
        "description": "{*}Proposed approach{*}:\r\n * add functionality to allow binding registration with the {{pkg::fun()}} name;\r\n ** Modify register_binding() to register 2 identical copies for each pkg::fun binding, fun and pkg::fun.\r\n ** Add a binding for the :: operator, which helps with retrieving bindings from the function registry.\r\n ** Add generic unit tests for the pkg::fun functionality.\r\n * register {{nse_funcs}} requiring indirect mapping\r\n** register each binding with and without the pkg:: prefix\r\n** add / update unit tests for the nse_funcs bindings to include at least one pkg::fun() call for each binding\r\n * register {{nse_funcs}} requiring direct mapping (unary and binary bindings)\r\n** register each binding with and without the pkg:: prefix\r\n** add / update unit tests for the nse_funcs bindings to include at least one pkg::fun() call for each binding\r\n* register {{agg_funcs}} for use with {{summarise()}}\r\n * document changes in the _Writing bindings_ documentation\r\n** going forward we should be using pkg::fun when defining a binding, which will register 2 copies of the same binding.\r\n\r\nDifferent implementation options are outlined and discussed in the [design document|https://docs.google.com/document/d/1Om-vYb31b6p_u4tyl86SGW1DrtWBfksq8NYG1Seqaxg/edit?usp=sharing].\r\n\r\n{*}Description{*}:\r\nCurrently we implement a number of functions from packages like {{lubridate}} which work well when called without namespacing (e.g. {{{}year(){}}}), however if someone calls {{lubridate::year()}} we get a not-implemented method (e.g. {{{}Warning: Expression lubridate::year(time_hour) not supported in Arrow{}}}). Is it possible for us to look and see if we have an arrow function that matches the function itself.\r\n{code:r}\r\nlibrary(arrow, warn.conflicts = FALSE)\r\nlibrary(dplyr, warn.conflicts = FALSE)\r\n\r\nds <- InMemoryDataset$create(nycflights13::flights)\r\n\r\nds %>% \r\n  mutate(year = lubridate::year(time_hour)) %>%\r\n  collect()\r\n#> Warning: Expression lubridate::year(time_hour) not supported in Arrow; pulling\r\n#> data into R\r\n#> # A tibble: 336,776 \u00d7 19\r\n#>     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time\r\n#>    <dbl> <int> <int>    <int>          <int>     <dbl>    <int>          <int>\r\n#>  1  2013     1     1      517            515         2      830            819\r\n#>  2  2013     1     1      533            529         4      850            830\r\n#>  3  2013     1     1      542            540         2      923            850\r\n#>  4  2013     1     1      544            545        -1     1004           1022\r\n#>  5  2013     1     1      554            600        -6      812            837\r\n#>  6  2013     1     1      554            558        -4      740            728\r\n#>  7  2013     1     1      555            600        -5      913            854\r\n#>  8  2013     1     1      557            600        -3      709            723\r\n#>  9  2013     1     1      557            600        -3      838            846\r\n#> 10  2013     1     1      558            600        -2      753            745\r\n#> # \u2026 with 336,766 more rows, and 11 more variables: arr_delay <dbl>,\r\n#> #   carrier <chr>, flight <int>, tailnum <chr>, origin <chr>, dest <chr>,\r\n#> #   air_time <dbl>, distance <dbl>, hour <dbl>, minute <dbl>, time_hour <dttm>\r\n\r\nds %>% \r\n  mutate(year = year(time_hour)) %>%\r\n  collect()\r\n#> # A tibble: 336,776 \u00d7 19\r\n#>     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time\r\n#>    <int> <int> <int>    <int>          <int>     <dbl>    <int>          <int>\r\n#>  1  2013     1     1      517            515         2      830            819\r\n#>  2  2013     1     1      533            529         4      850            830\r\n#>  3  2013     1     1      542            540         2      923            850\r\n#>  4  2013     1     1      544            545        -1     1004           1022\r\n#>  5  2013     1     1      554            600        -6      812            837\r\n#>  6  2013     1     1      554            558        -4      740            728\r\n#>  7  2013     1     1      555            600        -5      913            854\r\n#>  8  2013     1     1      557            600        -3      709            723\r\n#>  9  2013     1     1      557            600        -3      838            846\r\n#> 10  2013     1     1      558            600        -2      753            745\r\n#> # \u2026 with 336,766 more rows, and 11 more variables: arr_delay <dbl>,\r\n#> #   carrier <chr>, flight <int>, tailnum <chr>, origin <chr>, dest <chr>,\r\n#> #   air_time <dbl>, distance <dbl>, hour <dbl>, minute <dbl>, time_hour <dttm>\r\n{code}",
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "19h 10m",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 69000
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[R] Allow functions with {{pkg::}} prefixes",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13409877/comment/17438151",
                    "id": "17438151",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=npr",
                        "name": "npr",
                        "key": "npr",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
                        },
                        "displayName": "Neal Richardson",
                        "active": true,
                        "timeZone": "America/Los_Angeles"
                    },
                    "body": "We could pre-process the expression/quosure and remove any {{::}}, though that might not be safe? We could also include an allowlist/mapping of functions we would do this for (e.g. {{list(lubridate = c(\"year\", \"month\", ...), dplyr = c(\"case_when\", \"n\", ...), stringr = c(\"str_stuff\", ...))}}. \r\n",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=npr",
                        "name": "npr",
                        "key": "npr",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
                        },
                        "displayName": "Neal Richardson",
                        "active": true,
                        "timeZone": "America/Los_Angeles"
                    },
                    "created": "2021-11-03T15:35:15.138+0000",
                    "updated": "2021-11-03T15:35:15.138+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13409877/comment/17438159",
                    "id": "17438159",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=jonkeane",
                        "name": "jonkeane",
                        "key": "jonkeane",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34057",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34057",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34057",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34057"
                        },
                        "displayName": "Jonathan Keane",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "Yeah, there is certainly some edgecases/unsafeness that we need to consider. Though hard-coding is frustrating, the allowlist would make it explicit what our intention is with the binding. I wonder if it is possible to mask with the {pkg::} included so that we would get the right behavior if someone had a custom-defined function that collides with a function we have made a binding for (e.g. I've defined a custom `year()` in my code, I know that that will mask lubridate's `year()`, so I put `lubridate::year()` in all my pipelines, but sometimes need to / want to call my custom year \u2014 this wouldn't (possibly) work until ARROW-14071 anyway). \r\n\r\nGetting the execution exactly right and being able to select the right `year()` here is probably less important than erroring loudly and not using the bindings version when that's not what dplyr would do in that case. Though I will say that I have definitely seen things like this and worse in actuality!",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=jonkeane",
                        "name": "jonkeane",
                        "key": "jonkeane",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34057",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34057",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34057",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34057"
                        },
                        "displayName": "Jonathan Keane",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2021-11-03T15:45:46.332+0000",
                    "updated": "2021-11-03T15:45:46.332+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13409877/comment/17438279",
                    "id": "17438279",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=paleolimbot",
                        "name": "paleolimbot",
                        "key": "paleolimbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=paleolimbot&avatarId=47795",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=paleolimbot&avatarId=47795",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=paleolimbot&avatarId=47795",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=paleolimbot&avatarId=47795"
                        },
                        "displayName": "Dewey Dunnington",
                        "active": true,
                        "timeZone": "America/Halifax"
                    },
                    "body": "It might be nice for clarity to register the package name with the function (i.e., `arrow_register_translation(\"year\", function(...) {}, package = \"lubridate\")` instead of `nse_funcs$year <- function(...) {}`. \r\n\r\nErroring out could look like this (only slightly better than the current error, though).\r\n{noformat}\r\nlibrary(arrow, warn.conflicts = FALSE)\r\nlibrary(dplyr, warn.conflicts = FALSE)\r\n\r\nds <- InMemoryDataset$create(nycflights13::flights)\r\nfuns <- arrow:::.cache$functions\r\nfuns[[\"::\"]] <- function(lhs, rhs) {\r\n  arrow:::arrow_not_supported(\"`::`\")\r\n}\r\n\r\nassign(\"functions\", funs, envir = arrow:::.cache)\r\nds %>% \r\n  mutate(year = lubridate::year(time_hour)) %>%\r\n  collect()\r\n#> Warning: In lubridate::year(time_hour), `::` not supported by Arrow; pulling\r\n#> data into R\r\n#> # A tibble: 336,776 \u00d7 19{noformat}\r\nA slightly different definition of `::` could ignore it with a warning, although this is possibly a bit too magical.\r\n{noformat}\r\nlibrary(arrow, warn.conflicts = FALSE)\r\nlibrary(dplyr, warn.conflicts = FALSE)\r\n\r\nds <- InMemoryDataset$create(nycflights13::flights)\r\nfuns <- arrow:::.cache$functions\r\n\r\nfuns[[\"::\"]] <- function(lhs, rhs) {\r\n  # already evaluated to an Expression?\r\n  rhs <- rhs$field_name\r\n  warning(paste0(\"Replacing `\", as.character(substitute(lhs)), \"::\", rhs, \"` with `\", rhs, \"`\"))\r\n  get(rhs, envir = parent.frame(), mode = \"function\")\r\n}\r\n\r\nassign(\"functions\", funs, envir = arrow:::.cache)\r\nds %>% \r\n  mutate(year = lubridate::year(time_hour)) %>%\r\n  collect()\r\n#> Warning in lubridate::year: Replacing `lubridate::year` with `year`\r\n#> # A tibble: 336,776 \u00d7 19\r\n#>     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time\r\n#>    <int> <int> <int>    <int>          <int>     <dbl>    <int>          <int>\r\n#>  1  2013     1     1      517            515         2      830            819\r\n#>  2  2013     1     1      533            529         4      850            830\r\n#>  3  2013     1     1      542            540         2      923            850\r\n#>  4  2013     1     1      544            545        -1     1004           1022\r\n#>  5  2013     1     1      554            600        -6      812            837\r\n#>  6  2013     1     1      554            558        -4      740            728\r\n#>  7  2013     1     1      555            600        -5      913            854\r\n#>  8  2013     1     1      557            600        -3      709            723\r\n#>  9  2013     1     1      557            600        -3      838            846\r\n#> 10  2013     1     1      558            600        -2      753            745\r\n#> # \u2026 with 336,766 more rows, and 11 more variables: arr_delay <dbl>,\r\n#> #   carrier <chr>, flight <int>, tailnum <chr>, origin <chr>, dest <chr>,\r\n#> #   air_time <dbl>, distance <dbl>, hour <dbl>, minute <dbl>, time_hour <dttm>{noformat}\r\n\u00a0\r\n\r\n\u00a0",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=paleolimbot",
                        "name": "paleolimbot",
                        "key": "paleolimbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=paleolimbot&avatarId=47795",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=paleolimbot&avatarId=47795",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=paleolimbot&avatarId=47795",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=paleolimbot&avatarId=47795"
                        },
                        "displayName": "Dewey Dunnington",
                        "active": true,
                        "timeZone": "America/Halifax"
                    },
                    "created": "2021-11-03T20:11:36.997+0000",
                    "updated": "2021-11-04T13:41:06.810+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13409877/comment/17440738",
                    "id": "17440738",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=paleolimbot",
                        "name": "paleolimbot",
                        "key": "paleolimbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=paleolimbot&avatarId=47795",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=paleolimbot&avatarId=47795",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=paleolimbot&avatarId=47795",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=paleolimbot&avatarId=47795"
                        },
                        "displayName": "Dewey Dunnington",
                        "active": true,
                        "timeZone": "America/Halifax"
                    },
                    "body": "A few ideas related to this that may or may not help organize the increasing set of functions from different packages.\r\n\r\nTranslations for specific packages as R6 classes? Advantage here just that we get documentation that isn\u2019t checked by CRAN for free. \r\n\r\n{code:R}\r\nBaseTranslations <- R6::R6Class(\r\n  \"BaseTranslations\",\r\n  public = list(\r\n    \r\n    #' Arrow compute translation for `base::sum()`\r\n    #' \r\n    #' @param x A field reference or scalar\r\n    sum = function(x) {\r\n      arrow::Expression$create(\r\n        \"sum\",\r\n        if (inherits(x, \"Expression\")) x else sum(x)\r\n      )\r\n    }\r\n  )\r\n)\r\n{code}\r\n\r\n...and a totally untested interface for keeping track of function translations from multiple packages.\r\n\r\nHelper to detect the package that a user intended based on their current search path \r\n\r\n{code:R}\r\ndetect_package_name <- function(name, env = parent.frame()) {\r\n  tryCatch({\r\n    obj <- get(name, env = env, mode = \"function\", inherits = TRUE)\r\n    obj_env <- environment(obj)\r\n    if (is.null(obj_env)) {\r\n      \"base\"\r\n    } else if (\".packageName\" %in% names(obj_env)) {\r\n      obj_env$.packageName\r\n    } else {\r\n      NULL\r\n    }\r\n  }, error = function(e) {\r\n    NULL\r\n  })\r\n}\r\n{code}\r\n\r\n\r\nUsing R6 for my basic implementation of a function registry that includes the intended package for a translation. These can be stacked and recombined similar to how environments can be stacked and combined so that each set of translations can have a limited scope. \r\n\r\n{code:R}\r\nTranslationRegistry <- R6::R6Class(\r\n  \"TranslationRegistry\",\r\n  public = list(\r\n    initialize = function(parent = NULL) {\r\n      private$parent <- parent\r\n      private$functions <- new.env(parent = emptyenv())\r\n      private$functions$`_all_functions` <- new.env(parent = emptyenv())\r\n    },\r\n\r\n    register_translation = function(name, fun, package = NULL, env = parent.frame()) {\r\n      if (is.null(package)) {\r\n        package <- detect_package_name(name)\r\n      }\r\n\r\n      if (!is.null(package) && !(package %in% names(private$functions))) {\r\n        private$functions[[package]] <- new.env(parent = emptyenv())\r\n      }\r\n\r\n      if (!is.null(package)) {\r\n        private$functions[[package]][[name]] <- fun\r\n      }\r\n\r\n      private$functions$`_all_functions`[[name]] <- fun\r\n\r\n      invisible(self)\r\n    },\r\n\r\n    get_translation = function(name, package = NULL, env = parent.frame()) {\r\n      if (is.null(package)) {\r\n        package_det <- detect_package_name(name, env = env)\r\n      } else {\r\n        package_det <- package\r\n      }\r\n\r\n      if (is.null(package_det)) {\r\n        package_det <- \"_all_functions\"\r\n      }\r\n\r\n      if (is.null(private$parent)) {\r\n        tryCatch(get(name, envir = get(package_det, envir = private$functions)), error = function(e) {\r\n          self$abort_function_not_found(name, package)\r\n        })\r\n      } else {\r\n        tryCatch(\r\n          get(name, envir = get(package_det, envir = private$functions)),\r\n          error = function(e) private$parent$get_translation(name, package = package, env = env)\r\n        )\r\n      }\r\n    },\r\n\r\n    with_search = function(order = search()) {\r\n      order <- rev(intersect(gsub(\"package:\", \"\", order), names(private$functions)))\r\n      funs_with_pkg <- unlist(\r\n        lapply(\r\n          setdiff(names(order), \"_all_functions\"),\r\n          function(pkg) names(private$functions[[pkg]])\r\n        )\r\n      )\r\n      funs_without_pkg <- setdiff(names(private$functions$`_all_functions`), funs_with_pkg)\r\n\r\n      out_names <- c(funs_without_pkg, funs_with_pkg)\r\n      out <- vector(\"list\", length(out_names))\r\n      names(out) <- out_names\r\n\r\n      i <- 1L\r\n      for (pkg in order) {\r\n        for (name in names(private$functions[[pkg]])) {\r\n          out[[i]] <-  private$functions[[pkg]][[name]]\r\n          i <- i + 1L\r\n        }\r\n      }\r\n\r\n      out\r\n    },\r\n\r\n    abort_function_not_found = function(name, package) {\r\n      if (is.null(package)) {\r\n        msg <- glue::glue(\"No translations registered for function `{ name }()`\")\r\n      } else if (!(package %in% names(private$functions))) {\r\n        msg <- glue::glue(\"No translations registered for package '{ package }'\")\r\n      } else {\r\n        msg <- glue::glue(\"No translations registered for function `{ package }::{ name }()`\")\r\n      }\r\n\r\n      rlang::abort(msg , class = \"function_not_found\")\r\n    }\r\n  ),\r\n\r\n  private = list(\r\n    parent = NULL,\r\n    functions = NULL\r\n  )\r\n)\r\n{code}\r\n\r\n\r\nIn practice this would be an under-the-hood thing accessed by regular functions \r\n\r\n{code:R}\r\ntranslations <- TranslationRegistry$new()\r\nregister_translation <- function(name, fun, package = NULL, env = parent.frame()) {\r\n  translations$register_translation(name, fun, package = package, env = env)\r\n}\r\nget_translation <- function(name, package = NULL, env = parent.frame()) {\r\n  translations$get_translation(name, package = package, env = env)\r\n}\r\ntranslations_with_search <- function(order = search()) {\r\n  translations$with_search(order)\r\n}\r\n{code}\r\n\r\n\r\nThe basic idea is that you can register some functions and get a decent error when requesting one that doesn\u2019t exist. \r\n\r\n{code:R}\r\nregister_translation(\"sum\", function(x) {\r\n  arrow::Expression$create(\r\n    \"sum\",\r\n    if (inherits(x, \"Expression\")) x else sum(x)\r\n  )\r\n})\r\n\r\nget_translation(\"sum\")\r\n#> function(x) {\r\n#>   arrow::Expression$create(\r\n#>     \"sum\",\r\n#>     if (inherits(x, \"Expression\")) x else sum(x)\r\n#>   )\r\n#> }\r\nget_translation(\"sum\", package = \"base\")\r\n#> function(x) {\r\n#>   arrow::Expression$create(\r\n#>     \"sum\",\r\n#>     if (inherits(x, \"Expression\")) x else sum(x)\r\n#>   )\r\n#> }\r\n\r\nget_translation(\"summ\")\r\n#> Error: No translations registered for function `summ()`\r\nget_translation(\"sum\", package = \"basee\")\r\n#> Error: No translations registered for package 'basee'\r\nget_translation(\"summ\", package = \"base\")\r\n#> Error: No translations registered for function `base::summ()`\r\n{code}\r\n\r\n\r\nNeed to override {{::}} for the nice errors \r\n\r\n{code:R}\r\nregister_translation(\"::\", function(lhs, rhs) {\r\n  get_translation(\r\n    as.character(substitute(rhs)),\r\n    as.character(substitute(lhs))\r\n  )\r\n})\r\n{code}\r\n\r\n\r\nUse {{translations_with_search()}} to resolve the list of translations based on the current search path (so that we can use it for a data mask). \r\n\r\n{code:R}\r\nrlang::eval_tidy(\r\n  rlang::quo(base::sum(some_field)),\r\n  data = c(\r\n    list(some_field = arrow::Expression$field_ref(\"some_field\")),\r\n    translations_with_search()\r\n  )\r\n)\r\n#> Expression\r\n#> sum(some_field, {skip_nulls=true, min_count=1})\r\n{code}\r\n",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=paleolimbot",
                        "name": "paleolimbot",
                        "key": "paleolimbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=paleolimbot&avatarId=47795",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=paleolimbot&avatarId=47795",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=paleolimbot&avatarId=47795",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=paleolimbot&avatarId=47795"
                        },
                        "displayName": "Dewey Dunnington",
                        "active": true,
                        "timeZone": "America/Halifax"
                    },
                    "created": "2021-11-08T20:29:14.712+0000",
                    "updated": "2021-11-08T20:29:14.712+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13409877/comment/17537402",
                    "id": "17537402",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=dragosmg",
                        "name": "dragosmg",
                        "key": "dragosmg",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34061",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34061",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34061",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34061"
                        },
                        "displayName": "Drago\u0219 Moldovan-Gr\u00fcnfeld",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "I have an draft [PR|https://github.com/apache/arrow/pull/13160] for allowing\u00a0{{pkg::}} prefixes. What do you think of this approach?\r\n* change the naming convention for bindings, by adding {{\"package_\"}} before the function name. For example {{\"as_datetime\"}} becomes {{{}\"lubridate_as_datetime\"{}}}. Doing this mainly for 2 reasons:\r\n ** it gives us an indication of the package / namespace we're linking to\r\n ** it avoids the use of the double-colon ({{{}::{}}}) operator (easier dealing with strings only)\r\n* we register each binding both with its _short_ name ({{{}\"as_datetime\"{}}}) and its _full_ name ({{{}\"lubridate_as_datetime\"{}}})\r\n* we change the expressions supplied by the user by replacing the double colon ({{{}::{}}}) with an underscore ({{{}_{}}})\r\n* we can still include the original expression (containing {{::}} in the error message)\r\n* we don't have to define an allow list as the user will get the same message they are getting: \"now {{pkg::fun() not supported in Arrow}}\".",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=dragosmg",
                        "name": "dragosmg",
                        "key": "dragosmg",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34061",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34061",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34061",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34061"
                        },
                        "displayName": "Drago\u0219 Moldovan-Gr\u00fcnfeld",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2022-05-16T08:40:41.554+0000",
                    "updated": "2022-05-16T08:40:41.554+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13409877/comment/17564452",
                    "id": "17564452",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=dragosmg",
                        "name": "dragosmg",
                        "key": "dragosmg",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34061",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34061",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34061",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34061"
                        },
                        "displayName": "Drago\u0219 Moldovan-Gr\u00fcnfeld",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "I went in a slightly different direction from the one sketched-out by [~paleolimbot] for several reasons:\r\n* chronologically, the above was outlined before the implementation of the new function registry (ARROW-15010), which diverged from the above sketch.\r\n* the proposed implementation is somewhat simpler and, thus, easier to maintain \r\n* it integrates well with the current function registry.\r\n",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=dragosmg",
                        "name": "dragosmg",
                        "key": "dragosmg",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34061",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34061",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34061",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34061"
                        },
                        "displayName": "Drago\u0219 Moldovan-Gr\u00fcnfeld",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2022-07-08T20:16:39.709+0000",
                    "updated": "2022-07-08T20:16:39.709+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13409877/comment/17567394",
                    "id": "17567394",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=npr",
                        "name": "npr",
                        "key": "npr",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
                        },
                        "displayName": "Neal Richardson",
                        "active": true,
                        "timeZone": "America/Los_Angeles"
                    },
                    "body": "Issue resolved by pull request 13160\n[https://github.com/apache/arrow/pull/13160]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=npr",
                        "name": "npr",
                        "key": "npr",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
                        },
                        "displayName": "Neal Richardson",
                        "active": true,
                        "timeZone": "America/Los_Angeles"
                    },
                    "created": "2022-07-15T21:23:54.807+0000",
                    "updated": "2022-07-15T21:23:54.807+0000"
                }
            ],
            "maxResults": 7,
            "total": 7,
            "startAt": 0
        },
        "customfield_12311820": "0|z0wewg:",
        "customfield_12314139": null
    }
}