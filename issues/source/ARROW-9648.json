{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13320930",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13320930",
    "key": "ARROW-9648",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12350591",
                "id": "12350591",
                "description": "",
                "name": "7.0.0",
                "archived": false,
                "released": true,
                "releaseDate": "2022-02-03"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/4",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
            "name": "Minor",
            "id": "4"
        },
        "labels": [
            "good-first-issue",
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=joosthooz",
            "name": "joosthooz",
            "key": "JIRAUSER280940",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
            },
            "displayName": "Joost Hoozemans",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12328935",
                "id": "12328935",
                "name": "C++"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=Yohplala",
            "name": "Yohplala",
            "key": "yohplala",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
            },
            "displayName": "Pierre",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=Yohplala",
            "name": "Yohplala",
            "key": "yohplala",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
            },
            "displayName": "Pierre",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "aggregateprogress": {
            "progress": 18600,
            "total": 18600,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 18600,
            "total": 18600,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-9648/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 31,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13320930/worklog/688089",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "github-actions[bot] commented on pull request #11810:\nURL: https://github.com/apache/arrow/pull/11810#issuecomment-982741169\n\n\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-11-30T15:25:08.287+0000",
                    "updated": "2021-11-30T15:25:08.287+0000",
                    "started": "2021-11-30T15:25:08.286+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "688089",
                    "issueId": "13320930"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13320930/worklog/688135",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "bkietz commented on a change in pull request #11810:\nURL: https://github.com/apache/arrow/pull/11810#discussion_r759438645\n\n\n\n##########\nFile path: cpp/src/arrow/util/compression_lz4.cc\n##########\n@@ -234,14 +242,21 @@ class LZ4Compressor : public Compressor {\n   LZ4F_compressionContext_t ctx_ = nullptr;\n   LZ4F_preferences_t prefs_;\n   bool first_time_;\n+\n+ private:\n+  int compression_level_;\n };\n \n // ----------------------------------------------------------------------\n // Lz4 frame codec implementation\n \n class Lz4FrameCodec : public Codec {\n  public:\n-  Lz4FrameCodec() : prefs_(DefaultPreferences()) {}\n+  Lz4FrameCodec(int compression_level)\n+      : compression_level_(compression_level == kUseDefaultCompressionLevel\n+                               ? kLZ4DefaultCompressionLevel\n+                               : compression_level),\n+                               prefs_(DefaultPreferences(compression_level)) {}\n\nReview comment:\n       If there's a possibility that `compression_level` could be overridden, it seems that same override should be applied to `prefs_`\r\n   ```suggestion\r\n                                  prefs_(DefaultPreferences(compression_level_)) {}\r\n   ```\n\n##########\nFile path: cpp/src/arrow/util/compression_lz4.cc\n##########\n@@ -41,13 +41,20 @@ namespace util {\n \n namespace {\n \n+constexpr int kLZ4MinCompressionLevel = 1;\n+constexpr int kLZ4DefaultCompressionLevel = 1;\n+\n static Status LZ4Error(LZ4F_errorCode_t ret, const char* prefix_msg) {\n   return Status::IOError(prefix_msg, LZ4F_getErrorName(ret));\n }\n \n static LZ4F_preferences_t DefaultPreferences() {\n-  LZ4F_preferences_t prefs;\n-  memset(&prefs, 0, sizeof(prefs));\n+  LZ4F_preferences_t prefs = LZ4F_INIT_PREFERENCES;\n\nReview comment:\n       Please add a comment explaining this macro (or at least I assume it's a macro and not a constant). If it isn't completely trivial, I'd recommend ensuring that it is only evaluated once:\r\n   ```suggestion\r\n     static LZ4F_preferences_t prefs = LZ4F_INIT_PREFERENCES;\r\n   ```\n\n##########\nFile path: cpp/src/arrow/util/compression_lz4.cc\n##########\n@@ -41,13 +41,20 @@ namespace util {\n \n namespace {\n \n+constexpr int kLZ4MinCompressionLevel = 1;\n+constexpr int kLZ4DefaultCompressionLevel = 1;\n+\n static Status LZ4Error(LZ4F_errorCode_t ret, const char* prefix_msg) {\n   return Status::IOError(prefix_msg, LZ4F_getErrorName(ret));\n }\n \n static LZ4F_preferences_t DefaultPreferences() {\n-  LZ4F_preferences_t prefs;\n-  memset(&prefs, 0, sizeof(prefs));\n+  LZ4F_preferences_t prefs = LZ4F_INIT_PREFERENCES;\n+  return prefs;\n+}\n+\n+static LZ4F_preferences_t DefaultPreferences(int compression_level) {\n\nReview comment:\n       if this argument is intentionally ignored, please make an explanatory comment\r\n   \n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-11-30T16:22:33.044+0000",
                    "updated": "2021-11-30T16:22:33.044+0000",
                    "started": "2021-11-30T16:22:33.044+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "688135",
                    "issueId": "13320930"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13320930/worklog/688153",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "joosthooz commented on a change in pull request #11810:\nURL: https://github.com/apache/arrow/pull/11810#discussion_r759485262\n\n\n\n##########\nFile path: cpp/src/arrow/util/compression_lz4.cc\n##########\n@@ -41,13 +41,20 @@ namespace util {\n \n namespace {\n \n+constexpr int kLZ4MinCompressionLevel = 1;\n+constexpr int kLZ4DefaultCompressionLevel = 1;\n+\n static Status LZ4Error(LZ4F_errorCode_t ret, const char* prefix_msg) {\n   return Status::IOError(prefix_msg, LZ4F_getErrorName(ret));\n }\n \n static LZ4F_preferences_t DefaultPreferences() {\n-  LZ4F_preferences_t prefs;\n-  memset(&prefs, 0, sizeof(prefs));\n+  LZ4F_preferences_t prefs = LZ4F_INIT_PREFERENCES;\n+  return prefs;\n+}\n+\n+static LZ4F_preferences_t DefaultPreferences(int compression_level) {\n\nReview comment:\n       That function turned out to be not necessary, it is now removed\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-11-30T17:03:16.944+0000",
                    "updated": "2021-11-30T17:03:16.944+0000",
                    "started": "2021-11-30T17:03:16.944+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "688153",
                    "issueId": "13320930"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13320930/worklog/688154",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "joosthooz commented on a change in pull request #11810:\nURL: https://github.com/apache/arrow/pull/11810#discussion_r759485626\n\n\n\n##########\nFile path: cpp/src/arrow/util/compression_lz4.cc\n##########\n@@ -41,13 +41,20 @@ namespace util {\n \n namespace {\n \n+constexpr int kLZ4MinCompressionLevel = 1;\n+constexpr int kLZ4DefaultCompressionLevel = 1;\n+\n static Status LZ4Error(LZ4F_errorCode_t ret, const char* prefix_msg) {\n   return Status::IOError(prefix_msg, LZ4F_getErrorName(ret));\n }\n \n static LZ4F_preferences_t DefaultPreferences() {\n-  LZ4F_preferences_t prefs;\n-  memset(&prefs, 0, sizeof(prefs));\n+  LZ4F_preferences_t prefs = LZ4F_INIT_PREFERENCES;\n\nReview comment:\n       Actually it seems that using the memset is also fine, so I reverted back to using that\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-11-30T17:03:43.549+0000",
                    "updated": "2021-11-30T17:03:43.549+0000",
                    "started": "2021-11-30T17:03:43.549+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "688154",
                    "issueId": "13320930"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13320930/worklog/688156",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "joosthooz commented on a change in pull request #11810:\nURL: https://github.com/apache/arrow/pull/11810#discussion_r759486094\n\n\n\n##########\nFile path: cpp/src/arrow/util/compression_lz4.cc\n##########\n@@ -234,14 +242,21 @@ class LZ4Compressor : public Compressor {\n   LZ4F_compressionContext_t ctx_ = nullptr;\n   LZ4F_preferences_t prefs_;\n   bool first_time_;\n+\n+ private:\n+  int compression_level_;\n };\n \n // ----------------------------------------------------------------------\n // Lz4 frame codec implementation\n \n class Lz4FrameCodec : public Codec {\n  public:\n-  Lz4FrameCodec() : prefs_(DefaultPreferences()) {}\n+  Lz4FrameCodec(int compression_level)\n+      : compression_level_(compression_level == kUseDefaultCompressionLevel\n+                               ? kLZ4DefaultCompressionLevel\n+                               : compression_level),\n+                               prefs_(DefaultPreferences(compression_level)) {}\n\nReview comment:\n       Ok changed, thanks\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-11-30T17:04:19.397+0000",
                    "updated": "2021-11-30T17:04:19.397+0000",
                    "started": "2021-11-30T17:04:19.397+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "688156",
                    "issueId": "13320930"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13320930/worklog/688186",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "bkietz commented on a change in pull request #11810:\nURL: https://github.com/apache/arrow/pull/11810#discussion_r759512024\n\n\n\n##########\nFile path: cpp/src/arrow/util/compression_test.cc\n##########\n@@ -375,10 +375,11 @@ TEST(TestCodecMisc, SpecifyCompressionLevel) {\n     bool expect_success;\n   };\n   constexpr CombinationOption combinations[] = {\n-      {Compression::GZIP, 2, true},     {Compression::BROTLI, 10, true},\n-      {Compression::ZSTD, 4, true},     {Compression::LZ4, -10, false},\n-      {Compression::LZO, -22, false},   {Compression::UNCOMPRESSED, 10, false},\n-      {Compression::SNAPPY, 16, false}, {Compression::GZIP, -992, false}};\n+      {Compression::GZIP, 2, true},       {Compression::BROTLI, 10, true},\n+      {Compression::ZSTD, 4, true},       {Compression::LZ4, -10, false},\n+      {Compression::LZO, -22, false},     {Compression::UNCOMPRESSED, 10, false},\n+      {Compression::SNAPPY, 16, false},   {Compression::GZIP, -992, false},\n+      {Compression::LZ4_FRAMED, 9, true}, {Compression::LZ4_FRAMED, -99, false}};\n\nReview comment:\n       ```suggestion\r\n         {Compression::LZ4_FRAME, 9, true}, {Compression::LZ4_FRAME, -99, false}};\r\n   ```\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-11-30T17:35:16.611+0000",
                    "updated": "2021-11-30T17:35:16.611+0000",
                    "started": "2021-11-30T17:35:16.611+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "688186",
                    "issueId": "13320930"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13320930/worklog/688517",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "joosthooz commented on a change in pull request #11810:\nURL: https://github.com/apache/arrow/pull/11810#discussion_r759996881\n\n\n\n##########\nFile path: cpp/src/arrow/util/compression_test.cc\n##########\n@@ -375,10 +375,11 @@ TEST(TestCodecMisc, SpecifyCompressionLevel) {\n     bool expect_success;\n   };\n   constexpr CombinationOption combinations[] = {\n-      {Compression::GZIP, 2, true},     {Compression::BROTLI, 10, true},\n-      {Compression::ZSTD, 4, true},     {Compression::LZ4, -10, false},\n-      {Compression::LZO, -22, false},   {Compression::UNCOMPRESSED, 10, false},\n-      {Compression::SNAPPY, 16, false}, {Compression::GZIP, -992, false}};\n+      {Compression::GZIP, 2, true},       {Compression::BROTLI, 10, true},\n+      {Compression::ZSTD, 4, true},       {Compression::LZ4, -10, false},\n+      {Compression::LZO, -22, false},     {Compression::UNCOMPRESSED, 10, false},\n+      {Compression::SNAPPY, 16, false},   {Compression::GZIP, -992, false},\n+      {Compression::LZ4_FRAMED, 9, true}, {Compression::LZ4_FRAMED, -99, false}};\n\nReview comment:\n       Fixed, and also removed the testcase with invalid value, because LZ4 will rectify that internally (and not fail)\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-01T09:24:45.216+0000",
                    "updated": "2021-12-01T09:24:45.216+0000",
                    "started": "2021-12-01T09:24:45.216+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "688517",
                    "issueId": "13320930"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13320930/worklog/688748",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "bkietz commented on a change in pull request #11810:\nURL: https://github.com/apache/arrow/pull/11810#discussion_r760252620\n\n\n\n##########\nFile path: cpp/src/arrow/util/compression_lz4.cc\n##########\n@@ -234,14 +244,21 @@ class LZ4Compressor : public Compressor {\n   LZ4F_compressionContext_t ctx_ = nullptr;\n   LZ4F_preferences_t prefs_;\n   bool first_time_;\n+\n+ private:\n+  int compression_level_;\n };\n \n // ----------------------------------------------------------------------\n // Lz4 frame codec implementation\n \n class Lz4FrameCodec : public Codec {\n  public:\n-  Lz4FrameCodec() : prefs_(DefaultPreferences()) {}\n+  explicit Lz4FrameCodec(int compression_level)\n+      : compression_level_(compression_level == kUseDefaultCompressionLevel\n+                               ? kLZ4DefaultCompressionLevel\n+                               : compression_level),\n+                               prefs_(DefaultPreferences(compression_level_)) {}\n\nReview comment:\n       Nit: these preferences aren't really default anymore since they have a non default compression level. Would you rename this, please?\r\n   ```suggestion\r\n                                  prefs_(PreferencesWithCompressionLevel(compression_level_)) {}\r\n   ```\n\n##########\nFile path: python/pyarrow/tests/test_feather.py\n##########\n@@ -637,7 +637,8 @@ def test_v2_compression_options():\n     cases = [\n         # compression, compression_level\n         ('uncompressed', None),\n-        ('lz4', None),\n+        ('lz4', 1),\n\nReview comment:\n       IIUC, the `None` case should still work so let's keep testing it\r\n   ```suggestion\r\n           ('lz4', None),\r\n           ('lz4', 1),\r\n   ```\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-01T15:41:05.381+0000",
                    "updated": "2021-12-01T15:41:05.381+0000",
                    "started": "2021-12-01T15:41:05.381+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "688748",
                    "issueId": "13320930"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13320930/worklog/688844",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "joosthooz commented on a change in pull request #11810:\nURL: https://github.com/apache/arrow/pull/11810#discussion_r760462871\n\n\n\n##########\nFile path: cpp/src/arrow/util/compression_lz4.cc\n##########\n@@ -234,14 +244,21 @@ class LZ4Compressor : public Compressor {\n   LZ4F_compressionContext_t ctx_ = nullptr;\n   LZ4F_preferences_t prefs_;\n   bool first_time_;\n+\n+ private:\n+  int compression_level_;\n };\n \n // ----------------------------------------------------------------------\n // Lz4 frame codec implementation\n \n class Lz4FrameCodec : public Codec {\n  public:\n-  Lz4FrameCodec() : prefs_(DefaultPreferences()) {}\n+  explicit Lz4FrameCodec(int compression_level)\n+      : compression_level_(compression_level == kUseDefaultCompressionLevel\n+                               ? kLZ4DefaultCompressionLevel\n+                               : compression_level),\n+                               prefs_(DefaultPreferences(compression_level_)) {}\n\nReview comment:\n       Ok changed\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-01T18:25:58.445+0000",
                    "updated": "2021-12-01T18:25:58.445+0000",
                    "started": "2021-12-01T18:25:58.445+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "688844",
                    "issueId": "13320930"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13320930/worklog/689326",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on pull request #11810:\nURL: https://github.com/apache/arrow/pull/11810#issuecomment-984661395\n\n\n   @github-actions crossbow submit -g cpp\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-02T14:10:06.113+0000",
                    "updated": "2021-12-02T14:10:06.113+0000",
                    "started": "2021-12-02T14:10:06.113+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "689326",
                    "issueId": "13320930"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13320930/worklog/689329",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "github-actions[bot] commented on pull request #11810:\nURL: https://github.com/apache/arrow/pull/11810#issuecomment-984662306\n\n\n   Revision: e0965288ff03137bf8ce431e173dbb0565887a82\n   \n   Submitted crossbow builds: [ursacomputing/crossbow @ actions-1236](https://github.com/ursacomputing/crossbow/branches/all?query=actions-1236)\n   \n   |Task|Status|\n   |----|------|\n   |test-build-cpp-fuzz|[![Github Actions](https://github.com/ursacomputing/crossbow/workflows/Crossbow/badge.svg?branch=actions-1236-github-test-build-cpp-fuzz)](https://github.com/ursacomputing/crossbow/actions?query=branch:actions-1236-github-test-build-cpp-fuzz)|\n   |test-conda-cpp|[![Github Actions](https://github.com/ursacomputing/crossbow/workflows/Crossbow/badge.svg?branch=actions-1236-github-test-conda-cpp)](https://github.com/ursacomputing/crossbow/actions?query=branch:actions-1236-github-test-conda-cpp)|\n   |test-conda-cpp-valgrind|[![Azure](https://dev.azure.com/ursacomputing/crossbow/_apis/build/status/ursacomputing.crossbow?branchName=actions-1236-azure-test-conda-cpp-valgrind)](https://dev.azure.com/ursacomputing/crossbow/_build/latest?definitionId=1&branchName=actions-1236-azure-test-conda-cpp-valgrind)|\n   |test-debian-10-cpp|[![Github Actions](https://github.com/ursacomputing/crossbow/workflows/Crossbow/badge.svg?branch=actions-1236-github-test-debian-10-cpp)](https://github.com/ursacomputing/crossbow/actions?query=branch:actions-1236-github-test-debian-10-cpp)|\n   |test-debian-11-cpp|[![Github Actions](https://github.com/ursacomputing/crossbow/workflows/Crossbow/badge.svg?branch=actions-1236-github-test-debian-11-cpp)](https://github.com/ursacomputing/crossbow/actions?query=branch:actions-1236-github-test-debian-11-cpp)|\n   |test-fedora-33-cpp|[![Github Actions](https://github.com/ursacomputing/crossbow/workflows/Crossbow/badge.svg?branch=actions-1236-github-test-fedora-33-cpp)](https://github.com/ursacomputing/crossbow/actions?query=branch:actions-1236-github-test-fedora-33-cpp)|\n   |test-ubuntu-18.04-cpp|[![Github Actions](https://github.com/ursacomputing/crossbow/workflows/Crossbow/badge.svg?branch=actions-1236-github-test-ubuntu-18.04-cpp)](https://github.com/ursacomputing/crossbow/actions?query=branch:actions-1236-github-test-ubuntu-18.04-cpp)|\n   |test-ubuntu-18.04-cpp-release|[![Github Actions](https://github.com/ursacomputing/crossbow/workflows/Crossbow/badge.svg?branch=actions-1236-github-test-ubuntu-18.04-cpp-release)](https://github.com/ursacomputing/crossbow/actions?query=branch:actions-1236-github-test-ubuntu-18.04-cpp-release)|\n   |test-ubuntu-18.04-cpp-static|[![Github Actions](https://github.com/ursacomputing/crossbow/workflows/Crossbow/badge.svg?branch=actions-1236-github-test-ubuntu-18.04-cpp-static)](https://github.com/ursacomputing/crossbow/actions?query=branch:actions-1236-github-test-ubuntu-18.04-cpp-static)|\n   |test-ubuntu-20.04-cpp|[![Github Actions](https://github.com/ursacomputing/crossbow/workflows/Crossbow/badge.svg?branch=actions-1236-github-test-ubuntu-20.04-cpp)](https://github.com/ursacomputing/crossbow/actions?query=branch:actions-1236-github-test-ubuntu-20.04-cpp)|\n   |test-ubuntu-20.04-cpp-14|[![Github Actions](https://github.com/ursacomputing/crossbow/workflows/Crossbow/badge.svg?branch=actions-1236-github-test-ubuntu-20.04-cpp-14)](https://github.com/ursacomputing/crossbow/actions?query=branch:actions-1236-github-test-ubuntu-20.04-cpp-14)|\n   |test-ubuntu-20.04-cpp-17|[![Github Actions](https://github.com/ursacomputing/crossbow/workflows/Crossbow/badge.svg?branch=actions-1236-github-test-ubuntu-20.04-cpp-17)](https://github.com/ursacomputing/crossbow/actions?query=branch:actions-1236-github-test-ubuntu-20.04-cpp-17)|\n   |test-ubuntu-20.04-cpp-bundled|[![Github Actions](https://github.com/ursacomputing/crossbow/workflows/Crossbow/badge.svg?branch=actions-1236-github-test-ubuntu-20.04-cpp-bundled)](https://github.com/ursacomputing/crossbow/actions?query=branch:actions-1236-github-test-ubuntu-20.04-cpp-bundled)|\n   |test-ubuntu-20.04-cpp-thread-sanitizer|[![Github Actions](https://github.com/ursacomputing/crossbow/workflows/Crossbow/badge.svg?branch=actions-1236-github-test-ubuntu-20.04-cpp-thread-sanitizer)](https://github.com/ursacomputing/crossbow/actions?query=branch:actions-1236-github-test-ubuntu-20.04-cpp-thread-sanitizer)|\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-02T14:11:03.690+0000",
                    "updated": "2021-12-02T14:11:03.690+0000",
                    "started": "2021-12-02T14:11:03.690+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "689329",
                    "issueId": "13320930"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13320930/worklog/689336",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on a change in pull request #11810:\nURL: https://github.com/apache/arrow/pull/11810#discussion_r761130558\n\n\n\n##########\nFile path: cpp/src/arrow/util/compression_lz4.cc\n##########\n@@ -41,6 +41,9 @@ namespace util {\n \n namespace {\n \n+constexpr int kLZ4MinCompressionLevel = 1;\n+constexpr int kLZ4DefaultCompressionLevel = 1;\n\nReview comment:\n       The same constant is already defined in the `.h`, why redefine it here?\n\n##########\nFile path: ci/docker/linux-apt-jni.dockerfile\n##########\n@@ -83,5 +82,6 @@ ENV ARROW_BUILD_TESTS=OFF \\\n     CC=gcc \\\n     CXX=g++ \\\n     ORC_SOURCE=BUNDLED \\\n+    LZ4_SOURCE=BUNDLED \\\n\nReview comment:\n       Nit: keep those entries in alphabetical order.\n\n##########\nFile path: cpp/src/arrow/util/compression_internal.h\n##########\n@@ -65,7 +65,10 @@ std::unique_ptr<Codec> MakeLz4RawCodec();\n std::unique_ptr<Codec> MakeLz4HadoopRawCodec();\n \n // Lz4 frame format codec.\n-std::unique_ptr<Codec> MakeLz4FrameCodec();\n+constexpr int kLZ4DefaultCompressionLevel = 1;\n\nReview comment:\n       Nit: \"Lz4\" (not capitalized)\n\n##########\nFile path: cpp/src/arrow/util/compression_lz4.cc\n##########\n@@ -300,9 +316,14 @@ class Lz4FrameCodec : public Codec {\n   }\n \n   Compression::type compression_type() const override { return Compression::LZ4_FRAME; }\n-  int minimum_compression_level() const override { return kUseDefaultCompressionLevel; }\n-  int maximum_compression_level() const override { return kUseDefaultCompressionLevel; }\n-  int default_compression_level() const override { return kUseDefaultCompressionLevel; }\n+  int minimum_compression_level() const override { return kLZ4MinCompressionLevel; }\n+  int maximum_compression_level() const override { return LZ4F_compressionLevel_max(); }\n+  int default_compression_level() const override { return kLZ4DefaultCompressionLevel; }\n+\n+  int compression_level() const override { return compression_level_; }\n+\n+ private:\n+  const int compression_level_;\n\nReview comment:\n       Just put this in the `protected` section below?\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-02T14:15:25.722+0000",
                    "updated": "2021-12-02T14:15:25.722+0000",
                    "started": "2021-12-02T14:15:25.722+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "689336",
                    "issueId": "13320930"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13320930/worklog/689349",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "joosthooz commented on a change in pull request #11810:\nURL: https://github.com/apache/arrow/pull/11810#discussion_r761152638\n\n\n\n##########\nFile path: cpp/src/arrow/util/compression_lz4.cc\n##########\n@@ -41,6 +41,9 @@ namespace util {\n \n namespace {\n \n+constexpr int kLZ4MinCompressionLevel = 1;\n+constexpr int kLZ4DefaultCompressionLevel = 1;\n\nReview comment:\n       Yes that's a duplicate, I'll remove it. Actually, wouldn't it be nicer to move the min/max values into the `.h` file too? (also see `compression_bz2.h`, it has the min/max values in the `.cc` file)\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-02T14:36:30.813+0000",
                    "updated": "2021-12-02T14:36:30.813+0000",
                    "started": "2021-12-02T14:36:30.813+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "689349",
                    "issueId": "13320930"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13320930/worklog/689383",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on pull request #11810:\nURL: https://github.com/apache/arrow/pull/11810#issuecomment-984715193\n\n\n   Hmm, instead of requiring a source build of LZ4 on older distros, what do you think about doing a compile-time switch? LZ4 exposes `LZ4_VERSION_MAJOR`, `LZ4_VERSION_MINOR` and `LZ4_VERSION_RELEASE` C macro definitions.\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-02T15:09:00.764+0000",
                    "updated": "2021-12-02T15:09:00.764+0000",
                    "started": "2021-12-02T15:09:00.764+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "689383",
                    "issueId": "13320930"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13320930/worklog/689418",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "joosthooz commented on pull request #11810:\nURL: https://github.com/apache/arrow/pull/11810#issuecomment-984752178\n\n\n   @pitrou without building from source it would become difficult to reliably find the max compression level value; the API call for it was introduced in 1.8.0 and before that the name of the `LZ4HC_CLEVEL_MAX` macro was changed without changing the version number.\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-02T15:48:33.910+0000",
                    "updated": "2021-12-02T15:48:33.910+0000",
                    "started": "2021-12-02T15:48:33.910+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "689418",
                    "issueId": "13320930"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13320930/worklog/689437",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on pull request #11810:\nURL: https://github.com/apache/arrow/pull/11810#issuecomment-984768000\n\n\n   Well, diving in the lz4 repo, it seems the max value has been 12 [since 2016](https://github.com/lz4/lz4/commit/e3fee94742f9027aa2d27fae6458ce285889552e) (it was 20 before). So we can hardcode it to 12 before 1.8.0.\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-02T16:05:36.480+0000",
                    "updated": "2021-12-02T16:05:36.480+0000",
                    "started": "2021-12-02T16:05:36.480+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "689437",
                    "issueId": "13320930"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13320930/worklog/690098",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "bkietz commented on a change in pull request #11810:\nURL: https://github.com/apache/arrow/pull/11810#discussion_r762032552\n\n\n\n##########\nFile path: cpp/cmake_modules/ThirdpartyToolchain.cmake\n##########\n@@ -2113,7 +2113,12 @@ macro(build_lz4)\n endmacro()\n \n if(ARROW_WITH_LZ4)\n-  resolve_dependency(Lz4 PC_PACKAGE_NAMES liblz4)\n+  set(ARROW_LZ4_REQUIRED_VERSION \"1.8.0\")\n\nReview comment:\n       Do we need this now that the call to `LZ4F_compressionLevel_max` is guarded by an `#if`?\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-03T15:29:38.132+0000",
                    "updated": "2021-12-03T15:29:38.132+0000",
                    "started": "2021-12-03T15:29:38.132+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "690098",
                    "issueId": "13320930"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13320930/worklog/690119",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "joosthooz commented on a change in pull request #11810:\nURL: https://github.com/apache/arrow/pull/11810#discussion_r762059273\n\n\n\n##########\nFile path: cpp/cmake_modules/ThirdpartyToolchain.cmake\n##########\n@@ -2113,7 +2113,12 @@ macro(build_lz4)\n endmacro()\n \n if(ARROW_WITH_LZ4)\n-  resolve_dependency(Lz4 PC_PACKAGE_NAMES liblz4)\n+  set(ARROW_LZ4_REQUIRED_VERSION \"1.8.0\")\n\nReview comment:\n       No we do not, I'll revert these changes.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-03T16:02:54.660+0000",
                    "updated": "2021-12-03T16:02:54.660+0000",
                    "started": "2021-12-03T16:02:54.660+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "690119",
                    "issueId": "13320930"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13320930/worklog/690310",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "bkietz commented on a change in pull request #11810:\nURL: https://github.com/apache/arrow/pull/11810#discussion_r762220443\n\n\n\n##########\nFile path: cpp/src/arrow/util/compression_lz4.cc\n##########\n@@ -313,6 +335,13 @@ class Lz4FrameCodec : public Codec {\n \n class Lz4Codec : public Codec {\n  public:\n+  Lz4Codec() : compression_level_(kUseDefaultCompressionLevel) {}\n\nReview comment:\n       Since we coerce `kUse$x -> k$x`, it seems this should be:\r\n   ```suggestion\r\n     Lz4Codec() : compression_level_(kDefaultCompressionLevel) {}\r\n   ```\r\n   \r\n   ... but this constructor isn't used anymore AFAICT, so we could just delete it\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-03T20:26:15.593+0000",
                    "updated": "2021-12-03T20:26:15.593+0000",
                    "started": "2021-12-03T20:26:15.592+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "690310",
                    "issueId": "13320930"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13320930/worklog/691058",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "joosthooz commented on a change in pull request #11810:\nURL: https://github.com/apache/arrow/pull/11810#discussion_r763067097\n\n\n\n##########\nFile path: cpp/src/arrow/util/compression_lz4.cc\n##########\n@@ -313,6 +335,13 @@ class Lz4FrameCodec : public Codec {\n \n class Lz4Codec : public Codec {\n  public:\n+  Lz4Codec() : compression_level_(kUseDefaultCompressionLevel) {}\n\nReview comment:\n       It is not used directly anymore, but through child class `Lz4HadoopCodec`. If it does not exists, the compiler says\r\n   ```\r\n   error: use of deleted function \u2018arrow::util::internal::{anonymous}::Lz4HadoopCodec::Lz4HadoopCodec()\u2019\r\n   ...\r\n   Lz4HadoopCodec::Lz4HadoopCodec()\u2019 is implicitly deleted because the default definition would be ill-formed\r\n   ...\r\n   error: no matching function for call to \u2018arrow::util::internal::{anonymous}::Lz4Codec::Lz4Codec()\u2019\r\n   ```\r\n   Another option is to create this constructor for `Lz4HadoopCodec`;\r\n   ```\r\n   Lz4HadoopCodec() {}\r\n   ```\r\n   What do you think?\r\n   I'm not able to find `kDefaultCompressionLevel`, also not in the code for other compressors. Where should this coercion occur?\r\n   \n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-06T14:40:20.195+0000",
                    "updated": "2021-12-06T14:40:20.195+0000",
                    "started": "2021-12-06T14:40:20.195+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "691058",
                    "issueId": "13320930"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
            "id": "1",
            "description": "A problem which impairs or prevents the functions of the product.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
            "name": "Bug",
            "subtask": false,
            "avatarId": 21133
        },
        "timespent": 18600,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@76b70324[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@792be433[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@2d7f2a9a[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@b53597a[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@2c155bb1[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@32cbd586[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@663402bf[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@773d0f8a[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@71731a0f[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@1d788642[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@5b1f4ea8[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@44c14b1e[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 18600,
        "customfield_12312520": null,
        "customfield_12312521": "Tue Dec 07 13:15:01 UTC 2021",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2021-12-07T13:15:01.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-9648/watchers",
            "watchCount": 3,
            "isWatching": false
        },
        "created": "2020-08-04T18:51:28.000+0000",
        "updated": "2021-12-07T23:51:35.000+0000",
        "timeoriginalestimate": null,
        "description": "Hi,\r\n\r\nI am currently checking the different compression codecs available when writing parquet files.\r\n\r\nTesting LZ4, I got the error message that compression level is not supported.\r\n\r\n{code:python}\r\n\r\nfrom pyarrow import parquet as pq\r\n\r\npq.write_table(data, file, compression='LZ4', compression_level=12)\r\n\r\n{code}\r\n\r\nError message\r\n\r\n{code:bash}\r\n\r\n\r\n File \"pyarrow/_parquet.pyx\", line 1374, in pyarrow._parquet.ParquetWriter.write_table\r\n\r\nFile \"pyarrow/error.pxi\", line 99, in pyarrow.lib.check_status\r\n\r\nOSError: Invalid: LZ4 doesn't support setting a compression level.\r\n\r\n{code}\r\n\r\nHowever man page of LZ4 states the following\r\n\r\n{code:bash}\r\n\r\nOperation modifiers\r\n -# Compression level, with # being any value from 1 to 12. Higher\r\n values trade compression speed for compression ratio. Values\r\n above 12 are considered the same as 12. Recommended values are 1\r\n for fast compression (default), and 9 for high compression.\r\n Speed/compression trade-off will vary depending on data to com\u2010\r\n press. Decompression speed remains fast at all settings.\r\n\r\n{code}\r\n\r\nPlease, can you activate compression levels for LZ4?\r\n\r\nThanks,\r\n\r\nBests\r\n\r\n\u00a0",
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "5h 10m",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 18600
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[C++] LZ4 compression level not supported",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13320930/comment/17448181",
                    "id": "17448181",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "body": "It seems the compression level is only settable for the LZ4 frame format. This wouldn't apply to Parquet therefore (which uses the LZ4 block format), but would apply to Arrow IPC (which uses the LZ4 frame format).",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "created": "2021-11-23T18:25:50.588+0000",
                    "updated": "2021-11-23T18:25:50.588+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13320930/comment/17448182",
                    "id": "17448182",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "body": "Filed https://github.com/lz4/lz4/issues/1041 for LZ4 block compression.",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "created": "2021-11-23T18:26:04.873+0000",
                    "updated": "2021-11-23T18:26:04.873+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13320930/comment/17454644",
                    "id": "17454644",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "body": "Issue resolved by pull request 11810\n[https://github.com/apache/arrow/pull/11810]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "created": "2021-12-07T13:15:01.109+0000",
                    "updated": "2021-12-07T13:15:01.109+0000"
                }
            ],
            "maxResults": 3,
            "total": 3,
            "startAt": 0
        },
        "customfield_12311820": "0|z0hgwg:",
        "customfield_12314139": null
    }
}