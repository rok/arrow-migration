{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13400871",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13400871",
    "key": "ARROW-13987",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12350591",
                "id": "12350591",
                "description": "",
                "name": "7.0.0",
                "archived": false,
                "released": true,
                "releaseDate": "2022-02-03"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "name": "Major",
            "id": "3"
        },
        "labels": [
            "pull-request-available",
            "query-engine"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [
            {
                "id": "12622941",
                "self": "https://issues.apache.org/jira/rest/api/2/issueLink/12622941",
                "type": {
                    "id": "10032",
                    "name": "Blocker",
                    "inward": "is blocked by",
                    "outward": "blocks",
                    "self": "https://issues.apache.org/jira/rest/api/2/issueLinkType/10032"
                },
                "outwardIssue": {
                    "id": "13398834",
                    "key": "ARROW-13858",
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13398834",
                    "fields": {
                        "summary": "[R] Create a field ref to a field in a struct",
                        "status": {
                            "self": "https://issues.apache.org/jira/rest/api/2/status/1",
                            "description": "The issue is open and ready for the assignee to start work on it.",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/open.png",
                            "name": "Open",
                            "id": "1",
                            "statusCategory": {
                                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2",
                                "id": 2,
                                "key": "new",
                                "colorName": "blue-gray",
                                "name": "To Do"
                            }
                        },
                        "priority": {
                            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
                            "name": "Major",
                            "id": "3"
                        },
                        "issuetype": {
                            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
                            "id": "4",
                            "description": "An improvement or enhancement to an existing feature or task.",
                            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
                            "name": "Improvement",
                            "subtask": false,
                            "avatarId": 21140
                        }
                    }
                }
            },
            {
                "id": "12622942",
                "self": "https://issues.apache.org/jira/rest/api/2/issueLink/12622942",
                "type": {
                    "id": "10032",
                    "name": "Blocker",
                    "inward": "is blocked by",
                    "outward": "blocks",
                    "self": "https://issues.apache.org/jira/rest/api/2/issueLinkType/10032"
                },
                "outwardIssue": {
                    "id": "13352435",
                    "key": "ARROW-11259",
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13352435",
                    "fields": {
                        "summary": "[Python] Allow to create field reference to nested field",
                        "status": {
                            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
                            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
                            "name": "Resolved",
                            "id": "5",
                            "statusCategory": {
                                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                                "id": 3,
                                "key": "done",
                                "colorName": "green",
                                "name": "Done"
                            }
                        },
                        "priority": {
                            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
                            "name": "Major",
                            "id": "3"
                        },
                        "issuetype": {
                            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
                            "id": "4",
                            "description": "An improvement or enhancement to an existing feature or task.",
                            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
                            "name": "Improvement",
                            "subtask": false,
                            "avatarId": 21140
                        }
                    }
                }
            },
            {
                "id": "12625916",
                "self": "https://issues.apache.org/jira/rest/api/2/issueLink/12625916",
                "type": {
                    "id": "10030",
                    "name": "Reference",
                    "inward": "is related to",
                    "outward": "relates to",
                    "self": "https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"
                },
                "outwardIssue": {
                    "id": "13410317",
                    "key": "ARROW-14615",
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13410317",
                    "fields": {
                        "summary": "[C++] Support nested field refs into unions",
                        "status": {
                            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
                            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
                            "name": "Resolved",
                            "id": "5",
                            "statusCategory": {
                                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                                "id": 3,
                                "key": "done",
                                "colorName": "green",
                                "name": "Done"
                            }
                        },
                        "priority": {
                            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
                            "name": "Major",
                            "id": "3"
                        },
                        "issuetype": {
                            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
                            "id": "4",
                            "description": "An improvement or enhancement to an existing feature or task.",
                            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
                            "name": "Improvement",
                            "subtask": false,
                            "avatarId": 21140
                        }
                    }
                }
            },
            {
                "id": "12631459",
                "self": "https://issues.apache.org/jira/rest/api/2/issueLink/12631459",
                "type": {
                    "id": "10030",
                    "name": "Reference",
                    "inward": "is related to",
                    "outward": "relates to",
                    "self": "https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"
                },
                "inwardIssue": {
                    "id": "13423292",
                    "key": "ARROW-15357",
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13423292",
                    "fields": {
                        "summary": "[C++] Directly support nested field refs in exec plan",
                        "status": {
                            "self": "https://issues.apache.org/jira/rest/api/2/status/1",
                            "description": "The issue is open and ready for the assignee to start work on it.",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/open.png",
                            "name": "Open",
                            "id": "1",
                            "statusCategory": {
                                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2",
                                "id": 2,
                                "key": "new",
                                "colorName": "blue-gray",
                                "name": "To Do"
                            }
                        },
                        "priority": {
                            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
                            "name": "Major",
                            "id": "3"
                        },
                        "issuetype": {
                            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
                            "id": "4",
                            "description": "An improvement or enhancement to an existing feature or task.",
                            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
                            "name": "Improvement",
                            "subtask": false,
                            "avatarId": 21140
                        }
                    }
                }
            },
            {
                "id": "12628526",
                "self": "https://issues.apache.org/jira/rest/api/2/issueLink/12628526",
                "type": {
                    "id": "10030",
                    "name": "Reference",
                    "inward": "is related to",
                    "outward": "relates to",
                    "self": "https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"
                },
                "inwardIssue": {
                    "id": "13411063",
                    "key": "ARROW-14658",
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13411063",
                    "fields": {
                        "summary": "[C++] Add basic support for nested field refs in scanning",
                        "status": {
                            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
                            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
                            "name": "Resolved",
                            "id": "5",
                            "statusCategory": {
                                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                                "id": 3,
                                "key": "done",
                                "colorName": "green",
                                "name": "Done"
                            }
                        },
                        "priority": {
                            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
                            "name": "Major",
                            "id": "3"
                        },
                        "issuetype": {
                            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
                            "id": "4",
                            "description": "An improvement or enhancement to an existing feature or task.",
                            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
                            "name": "Improvement",
                            "subtask": false,
                            "avatarId": 21140
                        }
                    }
                }
            }
        ],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=lidavidm",
            "name": "lidavidm",
            "key": "lidavidm",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
            },
            "displayName": "David Li",
            "active": true,
            "timeZone": "America/New_York"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12328935",
                "id": "12328935",
                "name": "C++"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=npr",
            "name": "npr",
            "key": "npr",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
            },
            "displayName": "Neal Richardson",
            "active": true,
            "timeZone": "America/Los_Angeles"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=npr",
            "name": "npr",
            "key": "npr",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
            },
            "displayName": "Neal Richardson",
            "active": true,
            "timeZone": "America/Los_Angeles"
        },
        "aggregateprogress": {
            "progress": 31800,
            "total": 31800,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 31800,
            "total": 31800,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-13987/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 53,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13400871/worklog/667270",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "lidavidm opened a new pull request #11466:\nURL: https://github.com/apache/arrow/pull/11466\n\n\n   This implements nested field refs in C++ only, using a SmallVector to hold the FieldPath. This only lets us extract from a struct (I'm not so sure it makes sense for other types?).\r\n   \r\n   The JIRA also requests being able to extract a field as an expression. I think this could be done by implementing a small kernel that we could call. (Or otherwise I think we'd have to add a new case to the Expression variant, which maybe isn't a big deal.) If that sounds reasonable it can be added here.\r\n   \r\n   A microbenchmark was added to see if this impacts the common case of a non-nested field ref. On my local machine it does not appear to (~10-20ns difference).\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-10-19T20:30:19.304+0000",
                    "updated": "2021-10-19T20:30:19.304+0000",
                    "started": "2021-10-19T20:30:19.303+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "667270",
                    "issueId": "13400871"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13400871/worklog/667271",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "github-actions[bot] commented on pull request #11466:\nURL: https://github.com/apache/arrow/pull/11466#issuecomment-947081620\n\n\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-10-19T20:30:43.523+0000",
                    "updated": "2021-10-19T20:30:43.523+0000",
                    "started": "2021-10-19T20:30:43.522+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "667271",
                    "issueId": "13400871"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13400871/worklog/667272",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "lidavidm commented on pull request #11466:\nURL: https://github.com/apache/arrow/pull/11466#issuecomment-947082050\n\n\n   ```\r\n   ------------------------------------------------------------------------\r\n   Benchmark                              Time             CPU   Iterations\r\n   ------------------------------------------------------------------------\r\n   Before:\r\n   BindAndEvaluate/simple_array         287 ns          287 ns      2384362\r\n   BindAndEvaluate/simple_scalar        283 ns          283 ns      2459757\r\n   After:\r\n   BindAndEvaluate/simple_array         285 ns          285 ns      2470618\r\n   BindAndEvaluate/simple_scalar        272 ns          272 ns      2574147\r\n   BindAndEvaluate/nested_array        1022 ns         1021 ns       685364\r\n   BindAndEvaluate/nested_scalar        632 ns          631 ns      1128511\r\n   \r\n   ```\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-10-19T20:31:16.798+0000",
                    "updated": "2021-10-19T20:31:16.798+0000",
                    "started": "2021-10-19T20:31:16.797+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "667272",
                    "issueId": "13400871"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13400871/worklog/667274",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "lidavidm commented on pull request #11466:\nURL: https://github.com/apache/arrow/pull/11466#issuecomment-947082907\n\n\n   Note that `nested_array` is particularly bad (extracting from a StructArray) because we may have to allocate a new validity bitmap for the child, and we may have to do so multiple times (once per nesting level).\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-10-19T20:32:36.892+0000",
                    "updated": "2021-10-19T20:32:36.892+0000",
                    "started": "2021-10-19T20:32:36.892+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "667274",
                    "issueId": "13400871"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13400871/worklog/667290",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "westonpace commented on pull request #11466:\nURL: https://github.com/apache/arrow/pull/11466#issuecomment-947100587\n\n\n   > This only lets us extract from a struct (I'm not so sure it makes sense for other types?).\r\n   \r\n   The compute IR currently allows references to be:\r\n     * MapKey (similar to struct, only valid if the key of the map is string I think).\r\n     * StructField (covered here)\r\n     * ArraySubscript (I'm pretty sure this means you have a ListArray and you want the ith element of each list)\r\n     * ArraySlice (Same as above, operates on list array, seems like overkill to me and should probably just be a function call at this point)\r\n   \r\n   Maybe these don't need to be handled in the same way as nested references (e.g. maybe we capture an ArraySubscript reference in some other structure) but it seems we could cover the MapKey case easily enough at least.\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-10-19T21:00:11.565+0000",
                    "updated": "2021-10-19T21:00:11.565+0000",
                    "started": "2021-10-19T21:00:11.565+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "667290",
                    "issueId": "13400871"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13400871/worklog/667294",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "lidavidm commented on pull request #11466:\nURL: https://github.com/apache/arrow/pull/11466#issuecomment-947104517\n\n\n   Ah, thanks for the reference.\r\n   \r\n   For ArraySubscript: is that row-wise indexing or column-wise? It sounds like ArraySubscript is row-wise (you have a ListArray and want the ith row). And ArraySlice is ARROW-12669 (the list_element kernel).\r\n   \r\n   MapKey: specifically, this sounds like extracting the value of a particular key for each slot of a MapArray? I think this could be handled, but doesn't quite fit with FieldRef here, and might also make sense as a kernel instead. Indeed there's this check here: https://github.com/apache/arrow/blob/c3b7c963c8d77d7d0c916003aee6b1aedd78b870/cpp/src/arrow/type.cc#L1059-L1064\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-10-19T21:06:16.566+0000",
                    "updated": "2021-10-19T21:06:16.566+0000",
                    "started": "2021-10-19T21:06:16.565+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "667294",
                    "issueId": "13400871"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13400871/worklog/667310",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "westonpace commented on pull request #11466:\nURL: https://github.com/apache/arrow/pull/11466#issuecomment-947117753\n\n\n   CC @cpcloud @bkietz thoughts?  Thinking more on this I agree with you.  We should probably prefer special functions and not try and overload `FieldPath`.  The whole point of having references in the plan instead of functions/kernels is to allow for more intelligent plan transformations.  By this point (`FieldPath`) we've already pretty much passed the \"plan\" part and so I don't see any disadvantage to using special functions for any of these references.\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-10-19T21:25:30.383+0000",
                    "updated": "2021-10-19T21:25:30.383+0000",
                    "started": "2021-10-19T21:25:30.382+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "667310",
                    "issueId": "13400871"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13400871/worklog/673133",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "cpcloud commented on a change in pull request #11466:\nURL: https://github.com/apache/arrow/pull/11466#discussion_r741012268\n\n\n\n##########\nFile path: cpp/src/arrow/compute/exec/expression.cc\n##########\n@@ -394,14 +394,13 @@ Result<Expression> BindImpl(Expression expr, const TypeOrSchema& in,\n   if (expr.literal()) return expr;\n \n   if (auto ref = expr.field_ref()) {\n-    if (ref->IsNested()) {\n-      return Status::NotImplemented(\"nested field references\");\n-    }\n-\n     ARROW_ASSIGN_OR_RAISE(auto path, ref->FindOne(in));\n \n     auto bound = *expr.parameter();\n-    bound.index = path[0];\n+    bound.indices.resize(path.indices().size());\n+    for (size_t i = 0; i < path.indices().size(); ++i) {\n+      bound.indices[i] = path.indices()[i];\n+    }\n\nReview comment:\n       Perhaps a `std::copy(std::begin(path.indices()), std::end(path.indices()), bound.indices)` would work?\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-11-02T12:35:51.239+0000",
                    "updated": "2021-11-02T12:35:51.239+0000",
                    "started": "2021-11-02T12:35:51.239+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "673133",
                    "issueId": "13400871"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13400871/worklog/673134",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "cpcloud commented on a change in pull request #11466:\nURL: https://github.com/apache/arrow/pull/11466#discussion_r741012966\n\n\n\n##########\nFile path: cpp/src/arrow/array/array_nested.h\n##########\n@@ -370,6 +370,13 @@ class ARROW_EXPORT StructArray : public Array {\n   /// \\param[in] pool The pool to allocate null bitmaps from, if necessary\n   Result<ArrayVector> Flatten(MemoryPool* pool = default_memory_pool()) const;\n \n+  /// \\brief Get one of the child arrays, adjusting the null bitmap if necessary.\n+  ///\n+  /// \\param[in] index Which child array to get\n+  /// \\param[in] pool The pool to allocate null bitmaps from, if necessary\n+  Result<std::shared_ptr<Array>> Flatten(int index,\n\nReview comment:\n       I find `Flatten` a bit confusing, but I understand there's precedent.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-11-02T12:36:57.047+0000",
                    "updated": "2021-11-02T12:36:57.047+0000",
                    "started": "2021-11-02T12:36:57.046+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "673134",
                    "issueId": "13400871"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13400871/worklog/673136",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "cpcloud commented on a change in pull request #11466:\nURL: https://github.com/apache/arrow/pull/11466#discussion_r741015097\n\n\n\n##########\nFile path: cpp/src/arrow/compute/exec/expression.h\n##########\n@@ -112,7 +113,7 @@ class ARROW_EXPORT Expression {\n \n     // post-bind properties\n     ValueDescr descr;\n-    int index;\n+    internal::SmallVector<int, 2> indices;\n\nReview comment:\n       Is `SmallVector`'s second parameter a lower bound?\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-11-02T12:39:48.720+0000",
                    "updated": "2021-11-02T12:39:48.720+0000",
                    "started": "2021-11-02T12:39:48.720+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "673136",
                    "issueId": "13400871"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13400871/worklog/673137",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "cpcloud commented on a change in pull request #11466:\nURL: https://github.com/apache/arrow/pull/11466#discussion_r741016241\n\n\n\n##########\nFile path: cpp/src/arrow/compute/exec/expression.cc\n##########\n@@ -512,7 +511,31 @@ Result<Datum> ExecuteScalarExpression(const Expression& expr, const ExecBatch& i\n       return MakeNullScalar(null());\n     }\n \n-    const Datum& field = input[param->index];\n+    Datum field = input[param->indices[0]];\n+    for (auto it = param->indices.begin() + 1; it != param->indices.end(); ++it) {\n\nReview comment:\n       Can this use `for (auto index : param-> indices)`?\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-11-02T12:41:16.892+0000",
                    "updated": "2021-11-02T12:41:16.892+0000",
                    "started": "2021-11-02T12:41:16.892+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "673137",
                    "issueId": "13400871"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13400871/worklog/673139",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "cpcloud commented on a change in pull request #11466:\nURL: https://github.com/apache/arrow/pull/11466#discussion_r741016241\n\n\n\n##########\nFile path: cpp/src/arrow/compute/exec/expression.cc\n##########\n@@ -512,7 +511,31 @@ Result<Datum> ExecuteScalarExpression(const Expression& expr, const ExecBatch& i\n       return MakeNullScalar(null());\n     }\n \n-    const Datum& field = input[param->index];\n+    Datum field = input[param->indices[0]];\n+    for (auto it = param->indices.begin() + 1; it != param->indices.end(); ++it) {\n\nReview comment:\n       Can this use `for (auto index : param->indices)`?\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-11-02T12:41:33.356+0000",
                    "updated": "2021-11-02T12:41:33.356+0000",
                    "started": "2021-11-02T12:41:33.356+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "673139",
                    "issueId": "13400871"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13400871/worklog/673141",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "cpcloud commented on a change in pull request #11466:\nURL: https://github.com/apache/arrow/pull/11466#discussion_r741018458\n\n\n\n##########\nFile path: cpp/src/arrow/array/array_nested.cc\n##########\n@@ -541,56 +541,62 @@ std::shared_ptr<Array> StructArray::GetFieldByName(const std::string& name) cons\n \n Result<ArrayVector> StructArray::Flatten(MemoryPool* pool) const {\n   ArrayVector flattened;\n-  flattened.reserve(data_->child_data.size());\n+  flattened.resize(data_->child_data.size());\n   std::shared_ptr<Buffer> null_bitmap = data_->buffers[0];\n \n-  for (const auto& child_data_ptr : data_->child_data) {\n-    auto child_data = child_data_ptr->Copy();\n+  for (int i = 0; static_cast<size_t>(i) < data_->child_data.size(); i++) {\n+    ARROW_ASSIGN_OR_RAISE(flattened[i], Flatten(i, pool));\n+  }\n \n-    std::shared_ptr<Buffer> flattened_null_bitmap;\n-    int64_t flattened_null_count = kUnknownNullCount;\n+  return flattened;\n+}\n \n-    // Need to adjust for parent offset\n-    if (data_->offset != 0 || data_->length != child_data->length) {\n-      child_data = child_data->Slice(data_->offset, data_->length);\n-    }\n-    std::shared_ptr<Buffer> child_null_bitmap = child_data->buffers[0];\n-    const int64_t child_offset = child_data->offset;\n-\n-    // The validity of a flattened datum is the logical AND of the struct\n-    // element's validity and the individual field element's validity.\n-    if (null_bitmap && child_null_bitmap) {\n-      ARROW_ASSIGN_OR_RAISE(\n-          flattened_null_bitmap,\n-          BitmapAnd(pool, child_null_bitmap->data(), child_offset, null_bitmap_data_,\n-                    data_->offset, data_->length, child_offset));\n-    } else if (child_null_bitmap) {\n-      flattened_null_bitmap = child_null_bitmap;\n-      flattened_null_count = child_data->null_count;\n-    } else if (null_bitmap) {\n-      if (child_offset == data_->offset) {\n-        flattened_null_bitmap = null_bitmap;\n-      } else {\n-        // If the child has an offset, need to synthesize a validity\n-        // buffer with an offset too\n-        ARROW_ASSIGN_OR_RAISE(flattened_null_bitmap,\n-                              AllocateEmptyBitmap(child_offset + data_->length, pool));\n-        CopyBitmap(null_bitmap_data_, data_->offset, data_->length,\n-                   flattened_null_bitmap->mutable_data(), child_offset);\n-      }\n-      flattened_null_count = data_->null_count;\n-    } else {\n-      flattened_null_count = 0;\n-    }\n+Result<std::shared_ptr<Array>> StructArray::Flatten(int index, MemoryPool* pool) const {\n+  std::shared_ptr<Buffer> null_bitmap = data_->buffers[0];\n+\n+  auto child_data = data_->child_data[index]->Copy();\n\nReview comment:\n       Are these `Copy`s deep or shallow?\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-11-02T12:44:12.542+0000",
                    "updated": "2021-11-02T12:44:12.542+0000",
                    "started": "2021-11-02T12:44:12.542+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "673141",
                    "issueId": "13400871"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13400871/worklog/673166",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "lidavidm commented on a change in pull request #11466:\nURL: https://github.com/apache/arrow/pull/11466#discussion_r741075422\n\n\n\n##########\nFile path: cpp/src/arrow/array/array_nested.h\n##########\n@@ -370,6 +370,13 @@ class ARROW_EXPORT StructArray : public Array {\n   /// \\param[in] pool The pool to allocate null bitmaps from, if necessary\n   Result<ArrayVector> Flatten(MemoryPool* pool = default_memory_pool()) const;\n \n+  /// \\brief Get one of the child arrays, adjusting the null bitmap if necessary.\n+  ///\n+  /// \\param[in] index Which child array to get\n+  /// \\param[in] pool The pool to allocate null bitmaps from, if necessary\n+  Result<std::shared_ptr<Array>> Flatten(int index,\n\nReview comment:\n       We could call it `MakeFlattenedChild` or `GetFlattenedChild` or something if that helps? I agree Flatten isn't the best name when it comes to a single child array.\n\n##########\nFile path: cpp/src/arrow/compute/exec/expression.h\n##########\n@@ -112,7 +113,7 @@ class ARROW_EXPORT Expression {\n \n     // post-bind properties\n     ValueDescr descr;\n-    int index;\n+    internal::SmallVector<int, 2> indices;\n\nReview comment:\n       It's the number of items that can be stored before it changes from a stack-based to heap-based representation.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-11-02T13:51:19.725+0000",
                    "updated": "2021-11-02T13:51:19.725+0000",
                    "started": "2021-11-02T13:51:19.725+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "673166",
                    "issueId": "13400871"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13400871/worklog/673167",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "lidavidm commented on a change in pull request #11466:\nURL: https://github.com/apache/arrow/pull/11466#discussion_r741076570\n\n\n\n##########\nFile path: cpp/src/arrow/compute/exec/expression.cc\n##########\n@@ -512,7 +511,31 @@ Result<Datum> ExecuteScalarExpression(const Expression& expr, const ExecBatch& i\n       return MakeNullScalar(null());\n     }\n \n-    const Datum& field = input[param->index];\n+    Datum field = input[param->indices[0]];\n+    for (auto it = param->indices.begin() + 1; it != param->indices.end(); ++it) {\n\nReview comment:\n       It skips the first index and I don't think it'd be clearer overall to avoid the explicit iterator.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-11-02T13:52:17.695+0000",
                    "updated": "2021-11-02T13:52:17.695+0000",
                    "started": "2021-11-02T13:52:17.695+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "673167",
                    "issueId": "13400871"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13400871/worklog/673168",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "lidavidm commented on a change in pull request #11466:\nURL: https://github.com/apache/arrow/pull/11466#discussion_r741077193\n\n\n\n##########\nFile path: cpp/src/arrow/array/array_nested.cc\n##########\n@@ -541,56 +541,62 @@ std::shared_ptr<Array> StructArray::GetFieldByName(const std::string& name) cons\n \n Result<ArrayVector> StructArray::Flatten(MemoryPool* pool) const {\n   ArrayVector flattened;\n-  flattened.reserve(data_->child_data.size());\n+  flattened.resize(data_->child_data.size());\n   std::shared_ptr<Buffer> null_bitmap = data_->buffers[0];\n \n-  for (const auto& child_data_ptr : data_->child_data) {\n-    auto child_data = child_data_ptr->Copy();\n+  for (int i = 0; static_cast<size_t>(i) < data_->child_data.size(); i++) {\n+    ARROW_ASSIGN_OR_RAISE(flattened[i], Flatten(i, pool));\n+  }\n \n-    std::shared_ptr<Buffer> flattened_null_bitmap;\n-    int64_t flattened_null_count = kUnknownNullCount;\n+  return flattened;\n+}\n \n-    // Need to adjust for parent offset\n-    if (data_->offset != 0 || data_->length != child_data->length) {\n-      child_data = child_data->Slice(data_->offset, data_->length);\n-    }\n-    std::shared_ptr<Buffer> child_null_bitmap = child_data->buffers[0];\n-    const int64_t child_offset = child_data->offset;\n-\n-    // The validity of a flattened datum is the logical AND of the struct\n-    // element's validity and the individual field element's validity.\n-    if (null_bitmap && child_null_bitmap) {\n-      ARROW_ASSIGN_OR_RAISE(\n-          flattened_null_bitmap,\n-          BitmapAnd(pool, child_null_bitmap->data(), child_offset, null_bitmap_data_,\n-                    data_->offset, data_->length, child_offset));\n-    } else if (child_null_bitmap) {\n-      flattened_null_bitmap = child_null_bitmap;\n-      flattened_null_count = child_data->null_count;\n-    } else if (null_bitmap) {\n-      if (child_offset == data_->offset) {\n-        flattened_null_bitmap = null_bitmap;\n-      } else {\n-        // If the child has an offset, need to synthesize a validity\n-        // buffer with an offset too\n-        ARROW_ASSIGN_OR_RAISE(flattened_null_bitmap,\n-                              AllocateEmptyBitmap(child_offset + data_->length, pool));\n-        CopyBitmap(null_bitmap_data_, data_->offset, data_->length,\n-                   flattened_null_bitmap->mutable_data(), child_offset);\n-      }\n-      flattened_null_count = data_->null_count;\n-    } else {\n-      flattened_null_count = 0;\n-    }\n+Result<std::shared_ptr<Array>> StructArray::Flatten(int index, MemoryPool* pool) const {\n+  std::shared_ptr<Buffer> null_bitmap = data_->buffers[0];\n+\n+  auto child_data = data_->child_data[index]->Copy();\n\nReview comment:\n       Shallow copy. https://github.com/apache/arrow/blob/a0c650415bc28920512077faecdfa9d07d3c4efe/cpp/src/arrow/array/data.h#L164\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-11-02T13:52:47.286+0000",
                    "updated": "2021-11-02T13:52:47.286+0000",
                    "started": "2021-11-02T13:52:47.286+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "673168",
                    "issueId": "13400871"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13400871/worklog/673169",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "lidavidm commented on pull request #11466:\nURL: https://github.com/apache/arrow/pull/11466#issuecomment-957625379\n\n\n   Since we've been talking about unions, we could perhaps include union support here as well, analogously to struct support? That way you could grab one of the variants in the union, with non-matching rows masked off. (That's starting to be enough logic that I might prefer a kernel instead of inlining it here, though; but honestly, I think I'd prefer moving all the logic into kernels and just calling it from expression.cc)\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-11-02T13:54:11.728+0000",
                    "updated": "2021-11-02T13:54:11.728+0000",
                    "started": "2021-11-02T13:54:11.727+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "673169",
                    "issueId": "13400871"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13400871/worklog/673170",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "lidavidm commented on a change in pull request #11466:\nURL: https://github.com/apache/arrow/pull/11466#discussion_r741080759\n\n\n\n##########\nFile path: cpp/src/arrow/compute/exec/expression.cc\n##########\n@@ -394,14 +394,13 @@ Result<Expression> BindImpl(Expression expr, const TypeOrSchema& in,\n   if (expr.literal()) return expr;\n \n   if (auto ref = expr.field_ref()) {\n-    if (ref->IsNested()) {\n-      return Status::NotImplemented(\"nested field references\");\n-    }\n-\n     ARROW_ASSIGN_OR_RAISE(auto path, ref->FindOne(in));\n \n     auto bound = *expr.parameter();\n-    bound.index = path[0];\n+    bound.indices.resize(path.indices().size());\n+    for (size_t i = 0; i < path.indices().size(); ++i) {\n+      bound.indices[i] = path.indices()[i];\n+    }\n\nReview comment:\n       It seems SmallVector doesn't implement iterator_traits fully (I also had issues with trying to use insert() that I should try and debug)\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-11-02T13:56:29.921+0000",
                    "updated": "2021-11-02T13:56:29.921+0000",
                    "started": "2021-11-02T13:56:29.920+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "673170",
                    "issueId": "13400871"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13400871/worklog/673171",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "lidavidm commented on a change in pull request #11466:\nURL: https://github.com/apache/arrow/pull/11466#discussion_r741081106\n\n\n\n##########\nFile path: cpp/src/arrow/compute/exec/expression.cc\n##########\n@@ -394,14 +394,13 @@ Result<Expression> BindImpl(Expression expr, const TypeOrSchema& in,\n   if (expr.literal()) return expr;\n \n   if (auto ref = expr.field_ref()) {\n-    if (ref->IsNested()) {\n-      return Status::NotImplemented(\"nested field references\");\n-    }\n-\n     ARROW_ASSIGN_OR_RAISE(auto path, ref->FindOne(in));\n \n     auto bound = *expr.parameter();\n-    bound.index = path[0];\n+    bound.indices.resize(path.indices().size());\n+    for (size_t i = 0; i < path.indices().size(); ++i) {\n+      bound.indices[i] = path.indices()[i];\n+    }\n\nReview comment:\n       ```\r\n   /usr/lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_algobase.h:378:46: error: no type named 'value_type' in 'std::iterator_traits<arrow::internal::StaticVectorImpl<int, 2, arrow::internal::SmallVectorStorage<int, 2> > >'\r\n         typedef typename iterator_traits<_OI>::value_type _ValueTypeO;\r\n                 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~\r\n   /usr/lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_algobase.h:422:23: note: in instantiation of function template specialization 'std::__copy_move_a<false, const int *, arrow::internal::StaticVectorImpl<int, 2, arrow::internal::SmallVectorStorage<int, 2> > >' requested here\r\n         return _OI(std::__copy_move_a<_IsMove>(std::__niter_base(__first),\r\n                         ^\r\n   /usr/lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_algobase.h:454:20: note: in instantiation of function template specialization 'std::__copy_move_a2<false, __gnu_cxx::__normal_iterator<const int *, std::vector<int, std::allocator<int> > >, arrow::internal::StaticVectorImpl<int, 2, arrow::internal::SmallVectorStorage<int, 2> > >' requested here\r\n         return (std::__copy_move_a2<__is_move_iterator<_II>::__value>\r\n                      ^\r\n   /home/lidavidm/Code/upstream/arrow-13987/cpp/src/arrow/compute/exec/expression.cc:401:10: note: in instantiation of function template specialization 'std::copy<__gnu_cxx::__normal_iterator<const int *, std::vector<int, std::allocator<int> > >, arrow::internal::StaticVectorImpl<int, 2, arrow::internal::SmallVectorStorage<int, 2> > >' requested here\r\n       std::copy(path.indices().begin(), path.indices().end(), bound.indices);\r\n            ^\r\n   /home/lidavidm/Code/upstream/arrow-13987/cpp/src/arrow/compute/exec/expression.cc:424:10: note: in instantiation of function template specialization 'arrow::compute::(anonymous namespace)::BindImpl<arrow::DataType>' requested here\r\n     return BindImpl(*this, *in.type, in.shape, exec_context);\r\n            ^\r\n   ```\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-11-02T13:56:53.300+0000",
                    "updated": "2021-11-02T13:56:53.300+0000",
                    "started": "2021-11-02T13:56:53.300+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "673171",
                    "issueId": "13400871"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13400871/worklog/673287",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "lidavidm commented on a change in pull request #11466:\nURL: https://github.com/apache/arrow/pull/11466#discussion_r741301925\n\n\n\n##########\nFile path: cpp/src/arrow/compute/exec/expression.cc\n##########\n@@ -394,14 +394,13 @@ Result<Expression> BindImpl(Expression expr, const TypeOrSchema& in,\n   if (expr.literal()) return expr;\n \n   if (auto ref = expr.field_ref()) {\n-    if (ref->IsNested()) {\n-      return Status::NotImplemented(\"nested field references\");\n-    }\n-\n     ARROW_ASSIGN_OR_RAISE(auto path, ref->FindOne(in));\n \n     auto bound = *expr.parameter();\n-    bound.index = path[0];\n+    bound.indices.resize(path.indices().size());\n+    for (size_t i = 0; i < path.indices().size(); ++i) {\n+      bound.indices[i] = path.indices()[i];\n+    }\n\nReview comment:\n       Ah never mind that, I was being dumb about iterator vs container.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-11-02T17:09:04.667+0000",
                    "updated": "2021-11-02T17:09:04.667+0000",
                    "started": "2021-11-02T17:09:04.666+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "673287",
                    "issueId": "13400871"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
            "id": "4",
            "description": "An improvement or enhancement to an existing feature or task.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
            "name": "Improvement",
            "subtask": false,
            "avatarId": 21140
        },
        "timespent": 31800,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@39b635d5[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@51c4074a[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@30c08737[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@414f2832[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@6bd85a17[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@531b11a4[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@67d6ddcf[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@5fe067bf[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@764186b6[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@7d5c3feb[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@2cb5ad2a[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@7034fa9c[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 31800,
        "customfield_12312520": null,
        "customfield_12312521": "Mon Nov 08 14:31:06 UTC 2021",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2021-11-08T14:31:06.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-13987/watchers",
            "watchCount": 4,
            "isWatching": false
        },
        "created": "2021-09-13T19:26:55.000+0000",
        "updated": "2022-01-18T14:11:07.000+0000",
        "timeoriginalestimate": null,
        "description": "While it seems technically possible to construct nested FieldRefs, it doesn't seem that you can use them in practice. And it would also be nice to be able to get a nested FieldRef on an Expression. One solution could be to not handle this within FieldRefs at all and just handle it in Expressions: have a function like {{Expression GetField(Expression, name)}}.",
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "8h 50m",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 31800
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[C++] Support nested FieldRefs",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13400871/comment/17440508",
                    "id": "17440508",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=lidavidm",
                        "name": "lidavidm",
                        "key": "lidavidm",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "David Li",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "Issue resolved by pull request 11466\n[https://github.com/apache/arrow/pull/11466]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=lidavidm",
                        "name": "lidavidm",
                        "key": "lidavidm",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "David Li",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2021-11-08T14:31:06.355+0000",
                    "updated": "2021-11-08T14:31:06.355+0000"
                }
            ],
            "maxResults": 1,
            "total": 1,
            "startAt": 0
        },
        "customfield_12311820": "0|z0uvdc:",
        "customfield_12314139": null
    }
}