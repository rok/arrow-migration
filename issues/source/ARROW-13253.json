{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13387394",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13387394",
    "key": "ARROW-13253",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12349983",
                "id": "12349983",
                "description": "",
                "name": "5.0.0",
                "archived": false,
                "released": true,
                "releaseDate": "2021-07-28"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "name": "Major",
            "id": "3"
        },
        "labels": [
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12350125",
                "id": "12350125",
                "name": "4.0.1",
                "archived": false,
                "released": true,
                "releaseDate": "2021-05-26"
            }
        ],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=lidavidm",
            "name": "lidavidm",
            "key": "lidavidm",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
            },
            "displayName": "David Li",
            "active": true,
            "timeZone": "America/New_York"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12328935",
                "id": "12328935",
                "name": "C++"
            },
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12334621",
                "id": "12334621",
                "name": "FlightRPC"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=lidavidm",
            "name": "lidavidm",
            "key": "lidavidm",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
            },
            "displayName": "David Li",
            "active": true,
            "timeZone": "America/New_York"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=lidavidm",
            "name": "lidavidm",
            "key": "lidavidm",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
            },
            "displayName": "David Li",
            "active": true,
            "timeZone": "America/New_York"
        },
        "aggregateprogress": {
            "progress": 10800,
            "total": 10800,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 10800,
            "total": 10800,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-13253/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 18,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13387394/worklog/619378",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "lidavidm opened a new pull request #10663:\nURL: https://github.com/apache/arrow/pull/10663\n\n\n   We can't report errors during serialization - gRPC will just trip an assert. Instead, move these checks into the layer above so we can report them to the client or server as appropriate.\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-07-06T14:12:46.459+0000",
                    "updated": "2021-07-06T14:12:46.459+0000",
                    "started": "2021-07-06T14:12:46.458+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "619378",
                    "issueId": "13387394"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13387394/worklog/619379",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "github-actions[bot] commented on pull request #10663:\nURL: https://github.com/apache/arrow/pull/10663#issuecomment-874796945\n\n\n   https://issues.apache.org/jira/browse/ARROW-13253\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-07-06T14:13:01.417+0000",
                    "updated": "2021-07-06T14:13:01.417+0000",
                    "started": "2021-07-06T14:13:01.417+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "619379",
                    "issueId": "13387394"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13387394/worklog/622206",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "lidavidm commented on pull request #10663:\nURL: https://github.com/apache/arrow/pull/10663#issuecomment-879371544\n\n\n   @cyb70289, might you have time to look at this? \n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-07-13T20:14:55.500+0000",
                    "updated": "2021-07-13T20:14:55.500+0000",
                    "started": "2021-07-13T20:14:55.499+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "622206",
                    "issueId": "13387394"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13387394/worklog/622339",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "dianaclarke commented on pull request #10663:\nURL: https://github.com/apache/arrow/pull/10663#issuecomment-879533345\n\n\n   @ursabot please benchmark\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-07-14T02:18:43.364+0000",
                    "updated": "2021-07-14T02:18:43.364+0000",
                    "started": "2021-07-14T02:18:43.363+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "622339",
                    "issueId": "13387394"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13387394/worklog/622340",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ursabot commented on pull request #10663:\nURL: https://github.com/apache/arrow/pull/10663#issuecomment-879533552\n\n\n   Benchmark runs are scheduled for baseline = 780e95c512d63bbea1e040af0eb44a0bf63c4d72 and contender = 64ecb2a73c76e30091428af5e03d538766b12c74. Results will be available as each benchmark for each run completes.\n   Conbench compare runs links:\n   [Scheduled] [ec2-t3-xlarge-us-east-2 (mimalloc)](https://conbench.ursa.dev/compare/runs/399dd7ae47d345969dfba70ba5d60fae...720759ec32734f10a4016acec5cc4633/)\n   [Scheduled] [ursa-i9-9960x (mimalloc)](https://conbench.ursa.dev/compare/runs/eef93c4bfb1d4a8b92351f41883dfd55...41a8348d634e4410808dad7fcdd62c59/)\n   [Scheduled] [ursa-thinkcentre-m75q (mimalloc)](https://conbench.ursa.dev/compare/runs/e5af519d38bd4cc483cd45f86750d807...b477c89467fc4b2d80211db405bd786e/)\n   Supported benchmarks:\n   ursa-i9-9960x: langs = Python, R\n   ursa-thinkcentre-m75q: langs = C++, Java\n   ec2-t3-xlarge-us-east-2: cloud = True\n   \n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-07-14T02:19:16.629+0000",
                    "updated": "2021-07-14T02:19:16.629+0000",
                    "started": "2021-07-14T02:19:16.628+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "622340",
                    "issueId": "13387394"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13387394/worklog/622343",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ursabot edited a comment on pull request #10663:\nURL: https://github.com/apache/arrow/pull/10663#issuecomment-879533552\n\n\n   Benchmark runs are scheduled for baseline = 780e95c512d63bbea1e040af0eb44a0bf63c4d72 and contender = 64ecb2a73c76e30091428af5e03d538766b12c74. Results will be available as each benchmark for each run completes.\n   Conbench compare runs links:\n   [Finished :arrow_down:0.0% :arrow_up:0.0%] [ec2-t3-xlarge-us-east-2 (mimalloc)](https://conbench.ursa.dev/compare/runs/399dd7ae47d345969dfba70ba5d60fae...720759ec32734f10a4016acec5cc4633/)\n   [Scheduled] [ursa-i9-9960x (mimalloc)](https://conbench.ursa.dev/compare/runs/eef93c4bfb1d4a8b92351f41883dfd55...41a8348d634e4410808dad7fcdd62c59/)\n   [Scheduled] [ursa-thinkcentre-m75q (mimalloc)](https://conbench.ursa.dev/compare/runs/e5af519d38bd4cc483cd45f86750d807...b477c89467fc4b2d80211db405bd786e/)\n   Supported benchmarks:\n   ursa-i9-9960x: langs = Python, R\n   ursa-thinkcentre-m75q: langs = C++, Java\n   ec2-t3-xlarge-us-east-2: cloud = True\n   \n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-07-14T02:30:17.901+0000",
                    "updated": "2021-07-14T02:30:17.901+0000",
                    "started": "2021-07-14T02:30:17.901+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "622343",
                    "issueId": "13387394"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13387394/worklog/622350",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "cyb70289 commented on a change in pull request #10663:\nURL: https://github.com/apache/arrow/pull/10663#discussion_r669232404\n\n\n\n##########\nFile path: cpp/src/arrow/flight/client.cc\n##########\n@@ -688,11 +688,12 @@ class GrpcStreamWriter : public FlightStreamWriter {\n   Status WriteMetadata(std::shared_ptr<Buffer> app_metadata) override {\n     FlightPayload payload{};\n     payload.app_metadata = app_metadata;\n-    if (!internal::WritePayload(payload, writer_->stream().get())) {\n+    auto status = internal::WritePayload(payload, writer_->stream().get());\n+    if (!status.ok() && status.IsIOError()) {\n\nReview comment:\n       Can we remove `!status.ok()` and only check `if (status.IsIOError())` ?\n\n##########\nFile path: cpp/src/arrow/flight/serialization_internal.cc\n##########\n@@ -201,9 +193,7 @@ grpc::Status FlightDataSerialize(const FlightPayload& msg, ByteBuffer* out,\n   // Write the descriptor if present\n   int32_t descriptor_size = 0;\n   if (msg.descriptor != nullptr) {\n-    if (msg.descriptor->size() > kInt32Max) {\n-      return ToGrpcStatus(Status::CapacityError(\"Descriptor size overflow (>= 2**31)\"));\n-    }\n+    DCHECK_LT(msg.descriptor->size(), kInt32Max);\n\nReview comment:\n       `DCHECK_LE` ?\n\n##########\nFile path: cpp/src/arrow/flight/serialization_internal.cc\n##########\n@@ -201,9 +193,7 @@ grpc::Status FlightDataSerialize(const FlightPayload& msg, ByteBuffer* out,\n   // Write the descriptor if present\n   int32_t descriptor_size = 0;\n   if (msg.descriptor != nullptr) {\n-    if (msg.descriptor->size() > kInt32Max) {\n-      return ToGrpcStatus(Status::CapacityError(\"Descriptor size overflow (>= 2**31)\"));\n-    }\n+    DCHECK_LT(msg.descriptor->size(), kInt32Max);\n\nReview comment:\n       It's a bit strange to continue running here, if we know it will fail finally (will it?)\r\n   \r\n   From the jira issue, looks grpc should check and handle our return value decently.\r\n   Maybe open an issue in grpc community? If grpc is willing to change, do we still need to update our code?\r\n   \r\n   For now, I'm not sure if it's appropriate to simply abort here in release build, with some clear error messages and hints to fix it by chunking the data.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-07-14T03:12:30.748+0000",
                    "updated": "2021-07-14T03:12:30.748+0000",
                    "started": "2021-07-14T03:12:30.748+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "622350",
                    "issueId": "13387394"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13387394/worklog/622353",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "cyb70289 commented on a change in pull request #10663:\nURL: https://github.com/apache/arrow/pull/10663#discussion_r669247552\n\n\n\n##########\nFile path: cpp/src/arrow/flight/serialization_internal.cc\n##########\n@@ -201,9 +193,7 @@ grpc::Status FlightDataSerialize(const FlightPayload& msg, ByteBuffer* out,\n   // Write the descriptor if present\n   int32_t descriptor_size = 0;\n   if (msg.descriptor != nullptr) {\n-    if (msg.descriptor->size() > kInt32Max) {\n-      return ToGrpcStatus(Status::CapacityError(\"Descriptor size overflow (>= 2**31)\"));\n-    }\n+    DCHECK_LT(msg.descriptor->size(), kInt32Max);\n\nReview comment:\n       It's a bit strange to continue running here, if we know it will fail finally (will it?)\r\n   \r\n   From the jira issue, looks grpc should check and handle our return value decently.\r\n   Maybe open an issue in grpc community? If grpc is willing to change, do we still need to update our code?\r\n   \r\n   For now, I'm not sure if it's appropriate to simply abort here in release build, with some clear error messages and hints to fix it by chunking the data.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-07-14T03:21:17.631+0000",
                    "updated": "2021-07-14T03:21:17.631+0000",
                    "started": "2021-07-14T03:21:17.630+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "622353",
                    "issueId": "13387394"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13387394/worklog/622361",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ursabot edited a comment on pull request #10663:\nURL: https://github.com/apache/arrow/pull/10663#issuecomment-879533552\n\n\n   Benchmark runs are scheduled for baseline = 780e95c512d63bbea1e040af0eb44a0bf63c4d72 and contender = 64ecb2a73c76e30091428af5e03d538766b12c74. Results will be available as each benchmark for each run completes.\n   Conbench compare runs links:\n   [Finished :arrow_down:0.0% :arrow_up:0.0%] [ec2-t3-xlarge-us-east-2 (mimalloc)](https://conbench.ursa.dev/compare/runs/399dd7ae47d345969dfba70ba5d60fae...720759ec32734f10a4016acec5cc4633/)\n   [Finished :arrow_down:0.0% :arrow_up:0.0%] [ursa-i9-9960x (mimalloc)](https://conbench.ursa.dev/compare/runs/eef93c4bfb1d4a8b92351f41883dfd55...41a8348d634e4410808dad7fcdd62c59/)\n   [Scheduled] [ursa-thinkcentre-m75q (mimalloc)](https://conbench.ursa.dev/compare/runs/e5af519d38bd4cc483cd45f86750d807...b477c89467fc4b2d80211db405bd786e/)\n   Supported benchmarks:\n   ursa-i9-9960x: langs = Python, R\n   ursa-thinkcentre-m75q: langs = C++, Java\n   ec2-t3-xlarge-us-east-2: cloud = True\n   \n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-07-14T03:41:16.773+0000",
                    "updated": "2021-07-14T03:41:16.773+0000",
                    "started": "2021-07-14T03:41:16.773+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "622361",
                    "issueId": "13387394"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13387394/worklog/622362",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "cyb70289 commented on a change in pull request #10663:\nURL: https://github.com/apache/arrow/pull/10663#discussion_r669261083\n\n\n\n##########\nFile path: cpp/src/arrow/flight/serialization_internal.cc\n##########\n@@ -201,9 +193,7 @@ grpc::Status FlightDataSerialize(const FlightPayload& msg, ByteBuffer* out,\n   // Write the descriptor if present\n   int32_t descriptor_size = 0;\n   if (msg.descriptor != nullptr) {\n-    if (msg.descriptor->size() > kInt32Max) {\n-      return ToGrpcStatus(Status::CapacityError(\"Descriptor size overflow (>= 2**31)\"));\n\nReview comment:\n       From the jira issue, looks grpc should check and handle our return value decently.\r\n   Maybe open an issue in grpc community?\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-07-14T03:54:56.089+0000",
                    "updated": "2021-07-14T03:54:56.089+0000",
                    "started": "2021-07-14T03:54:56.089+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "622362",
                    "issueId": "13387394"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13387394/worklog/622363",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ursabot edited a comment on pull request #10663:\nURL: https://github.com/apache/arrow/pull/10663#issuecomment-879533552\n\n\n   Benchmark runs are scheduled for baseline = 780e95c512d63bbea1e040af0eb44a0bf63c4d72 and contender = 64ecb2a73c76e30091428af5e03d538766b12c74. Results will be available as each benchmark for each run completes.\n   Conbench compare runs links:\n   [Finished :arrow_down:0.0% :arrow_up:0.0%] [ec2-t3-xlarge-us-east-2 (mimalloc)](https://conbench.ursa.dev/compare/runs/399dd7ae47d345969dfba70ba5d60fae...720759ec32734f10a4016acec5cc4633/)\n   [Finished :arrow_down:0.0% :arrow_up:0.0%] [ursa-i9-9960x (mimalloc)](https://conbench.ursa.dev/compare/runs/eef93c4bfb1d4a8b92351f41883dfd55...41a8348d634e4410808dad7fcdd62c59/)\n   [Finished :arrow_down:0.24% :arrow_up:0.05%] [ursa-thinkcentre-m75q (mimalloc)](https://conbench.ursa.dev/compare/runs/e5af519d38bd4cc483cd45f86750d807...b477c89467fc4b2d80211db405bd786e/)\n   Supported benchmarks:\n   ursa-i9-9960x: langs = Python, R\n   ursa-thinkcentre-m75q: langs = C++, Java\n   ec2-t3-xlarge-us-east-2: cloud = True\n   \n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-07-14T03:56:34.753+0000",
                    "updated": "2021-07-14T03:56:34.753+0000",
                    "started": "2021-07-14T03:56:34.753+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "622363",
                    "issueId": "13387394"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13387394/worklog/622509",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "lidavidm commented on a change in pull request #10663:\nURL: https://github.com/apache/arrow/pull/10663#discussion_r669633930\n\n\n\n##########\nFile path: cpp/src/arrow/flight/serialization_internal.cc\n##########\n@@ -201,9 +193,7 @@ grpc::Status FlightDataSerialize(const FlightPayload& msg, ByteBuffer* out,\n   // Write the descriptor if present\n   int32_t descriptor_size = 0;\n   if (msg.descriptor != nullptr) {\n-    if (msg.descriptor->size() > kInt32Max) {\n-      return ToGrpcStatus(Status::CapacityError(\"Descriptor size overflow (>= 2**31)\"));\n\nReview comment:\n       I'll try to get a repro up when I can and file a bug, good idea. \n\n##########\nFile path: cpp/src/arrow/flight/serialization_internal.cc\n##########\n@@ -201,9 +193,7 @@ grpc::Status FlightDataSerialize(const FlightPayload& msg, ByteBuffer* out,\n   // Write the descriptor if present\n   int32_t descriptor_size = 0;\n   if (msg.descriptor != nullptr) {\n-    if (msg.descriptor->size() > kInt32Max) {\n-      return ToGrpcStatus(Status::CapacityError(\"Descriptor size overflow (>= 2**31)\"));\n-    }\n+    DCHECK_LT(msg.descriptor->size(), kInt32Max);\n\nReview comment:\n       Whoops, fixed (here and elsewhere), thanks.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-07-14T13:50:25.206+0000",
                    "updated": "2021-07-14T13:50:25.206+0000",
                    "started": "2021-07-14T13:50:25.205+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "622509",
                    "issueId": "13387394"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13387394/worklog/622510",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "lidavidm commented on a change in pull request #10663:\nURL: https://github.com/apache/arrow/pull/10663#discussion_r669634201\n\n\n\n##########\nFile path: cpp/src/arrow/flight/client.cc\n##########\n@@ -688,11 +688,12 @@ class GrpcStreamWriter : public FlightStreamWriter {\n   Status WriteMetadata(std::shared_ptr<Buffer> app_metadata) override {\n     FlightPayload payload{};\n     payload.app_metadata = app_metadata;\n-    if (!internal::WritePayload(payload, writer_->stream().get())) {\n+    auto status = internal::WritePayload(payload, writer_->stream().get());\n+    if (!status.ok() && status.IsIOError()) {\n\nReview comment:\n       Good point, it's redundant. Fixed.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-07-14T13:50:40.280+0000",
                    "updated": "2021-07-14T13:50:40.280+0000",
                    "started": "2021-07-14T13:50:40.280+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "622510",
                    "issueId": "13387394"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13387394/worklog/622540",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "lidavidm commented on a change in pull request #10663:\nURL: https://github.com/apache/arrow/pull/10663#discussion_r669705163\n\n\n\n##########\nFile path: cpp/src/arrow/flight/serialization_internal.cc\n##########\n@@ -201,9 +193,7 @@ grpc::Status FlightDataSerialize(const FlightPayload& msg, ByteBuffer* out,\n   // Write the descriptor if present\n   int32_t descriptor_size = 0;\n   if (msg.descriptor != nullptr) {\n-    if (msg.descriptor->size() > kInt32Max) {\n-      return ToGrpcStatus(Status::CapacityError(\"Descriptor size overflow (>= 2**31)\"));\n\nReview comment:\n       See https://github.com/grpc/grpc/issues/26695\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-07-14T15:08:20.117+0000",
                    "updated": "2021-07-14T15:08:20.117+0000",
                    "started": "2021-07-14T15:08:20.117+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "622540",
                    "issueId": "13387394"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13387394/worklog/622845",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "cyb70289 commented on a change in pull request #10663:\nURL: https://github.com/apache/arrow/pull/10663#discussion_r670100132\n\n\n\n##########\nFile path: cpp/src/arrow/flight/test_util.cc\n##########\n@@ -616,6 +640,22 @@ Status ExampleLargeBatches(BatchVector* out) {\n   return Status::OK();\n }\n \n+arrow::Result<std::shared_ptr<RecordBatch>> VeryLargeBatch() {\n+  // In CI, some platforms don't let us allocate one very large\n+  // buffer, so allocate a smaller buffer and repeat it a few times\n+  constexpr int64_t nbytes = (1ul << 27ul) + 8ul;\n+  constexpr int64_t nrows = nbytes / 8;\n+  constexpr int64_t ncols = 16;\n+  ARROW_ASSIGN_OR_RAISE(auto values, AllocateBuffer(nbytes));\n+  std::memset(values->mutable_data(), 0x00, values->capacity());\n+  std::vector<std::shared_ptr<Buffer>> buffers = {nullptr, std::move(values)};\n+  auto array = std::make_shared<ArrayData>(int64(), nrows, buffers,\n+                                           /*null_count=*/0);\n+  std::vector<std::shared_ptr<ArrayData>> arrays(ncols, array);\n+  std::vector<std::shared_ptr<Field>> fields(ncols, field(\"a\", int64()));\n+  return RecordBatch::Make(schema(std::move(fields)), nrows, std::move(arrays));\n\nReview comment:\n       So the ipc payload will be 16 columns in size, though all columns are from same buffer?\n\n##########\nFile path: cpp/src/arrow/flight/types.cc\n##########\n@@ -21,6 +21,7 @@\n #include <sstream>\n #include <utility>\n \n+#include \"arrow/buffer.h\"\n\nReview comment:\n       Is this header used?\n\n##########\nFile path: cpp/src/arrow/flight/serialization_internal.cc\n##########\n@@ -164,26 +164,18 @@ static const uint8_t kPaddingBytes[8] = {0, 0, 0, 0, 0, 0, 0, 0};\n \n // Update the sizes of our Protobuf fields based on the given IPC payload.\n grpc::Status IpcMessageHeaderSize(const arrow::ipc::IpcPayload& ipc_msg, bool has_body,\n-                                  size_t* body_size, size_t* header_size,\n-                                  int32_t* metadata_size) {\n-  DCHECK_LT(ipc_msg.metadata->size(), kInt32Max);\n+                                  size_t* header_size, int32_t* metadata_size) {\n+  DCHECK_LE(ipc_msg.metadata->size(), kInt32Max);\n   *metadata_size = static_cast<int32_t>(ipc_msg.metadata->size());\n \n   // 1 byte for metadata tag\n   *header_size += 1 + WireFormatLite::LengthDelimitedSize(*metadata_size);\n \n-  for (const auto& buffer : ipc_msg.body_buffers) {\n-    // Buffer may be null when the row length is zero, or when all\n-    // entries are invalid.\n-    if (!buffer) continue;\n-\n-    *body_size += static_cast<size_t>(BitUtil::RoundUpToMultipleOf8(buffer->size()));\n-  }\n-\n   // 2 bytes for body tag\n   if (has_body) {\n     // We write the body tag in the header but not the actual body data\n-    *header_size += 2 + WireFormatLite::LengthDelimitedSize(*body_size) - *body_size;\n+    *header_size += 2 + WireFormatLite::LengthDelimitedSize(ipc_msg.body_length) -\n\nReview comment:\n       From old code, looks `ipc_msg.body_length` may be 0. It's not possible now?\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-07-15T03:23:32.859+0000",
                    "updated": "2021-07-15T03:23:32.859+0000",
                    "started": "2021-07-15T03:23:32.859+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "622845",
                    "issueId": "13387394"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13387394/worklog/623003",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "lidavidm commented on a change in pull request #10663:\nURL: https://github.com/apache/arrow/pull/10663#discussion_r670405214\n\n\n\n##########\nFile path: cpp/src/arrow/flight/serialization_internal.cc\n##########\n@@ -164,26 +164,18 @@ static const uint8_t kPaddingBytes[8] = {0, 0, 0, 0, 0, 0, 0, 0};\n \n // Update the sizes of our Protobuf fields based on the given IPC payload.\n grpc::Status IpcMessageHeaderSize(const arrow::ipc::IpcPayload& ipc_msg, bool has_body,\n-                                  size_t* body_size, size_t* header_size,\n-                                  int32_t* metadata_size) {\n-  DCHECK_LT(ipc_msg.metadata->size(), kInt32Max);\n+                                  size_t* header_size, int32_t* metadata_size) {\n+  DCHECK_LE(ipc_msg.metadata->size(), kInt32Max);\n   *metadata_size = static_cast<int32_t>(ipc_msg.metadata->size());\n \n   // 1 byte for metadata tag\n   *header_size += 1 + WireFormatLite::LengthDelimitedSize(*metadata_size);\n \n-  for (const auto& buffer : ipc_msg.body_buffers) {\n-    // Buffer may be null when the row length is zero, or when all\n-    // entries are invalid.\n-    if (!buffer) continue;\n-\n-    *body_size += static_cast<size_t>(BitUtil::RoundUpToMultipleOf8(buffer->size()));\n-  }\n-\n   // 2 bytes for body tag\n   if (has_body) {\n     // We write the body tag in the header but not the actual body data\n-    *header_size += 2 + WireFormatLite::LengthDelimitedSize(*body_size) - *body_size;\n+    *header_size += 2 + WireFormatLite::LengthDelimitedSize(ipc_msg.body_length) -\n\nReview comment:\n       If you constructed your own IPC payload, I suppose that could be the case. But in general you'd use one of the GetFooPayload functions in arrow/ipc/writer.h, which precalculate the body length for you. (And it is valid to have a zero-length payload in general, since it might be metadata-only or IPC-header-only. The previous calculation here was solely to guard against a too-large payload, but the only thing we can do at this point is crash anyways.)\n\n##########\nFile path: cpp/src/arrow/flight/types.cc\n##########\n@@ -21,6 +21,7 @@\n #include <sstream>\n #include <utility>\n \n+#include \"arrow/buffer.h\"\n\nReview comment:\n       It's actually needed for the descriptor->size() call below.\n\n##########\nFile path: cpp/src/arrow/flight/test_util.cc\n##########\n@@ -616,6 +640,22 @@ Status ExampleLargeBatches(BatchVector* out) {\n   return Status::OK();\n }\n \n+arrow::Result<std::shared_ptr<RecordBatch>> VeryLargeBatch() {\n+  // In CI, some platforms don't let us allocate one very large\n+  // buffer, so allocate a smaller buffer and repeat it a few times\n+  constexpr int64_t nbytes = (1ul << 27ul) + 8ul;\n+  constexpr int64_t nrows = nbytes / 8;\n+  constexpr int64_t ncols = 16;\n+  ARROW_ASSIGN_OR_RAISE(auto values, AllocateBuffer(nbytes));\n+  std::memset(values->mutable_data(), 0x00, values->capacity());\n+  std::vector<std::shared_ptr<Buffer>> buffers = {nullptr, std::move(values)};\n+  auto array = std::make_shared<ArrayData>(int64(), nrows, buffers,\n+                                           /*null_count=*/0);\n+  std::vector<std::shared_ptr<ArrayData>> arrays(ncols, array);\n+  std::vector<std::shared_ptr<Field>> fields(ncols, field(\"a\", int64()));\n+  return RecordBatch::Make(schema(std::move(fields)), nrows, std::move(arrays));\n\nReview comment:\n       Yes, and when written out, we'll write all 16 columns to the stream. (This was done just to save memory and try to get the test runnable on most of the CI environments.)\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-07-15T12:15:17.467+0000",
                    "updated": "2021-07-15T12:15:17.467+0000",
                    "started": "2021-07-15T12:15:17.466+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "623003",
                    "issueId": "13387394"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13387394/worklog/623046",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "cyb70289 closed pull request #10663:\nURL: https://github.com/apache/arrow/pull/10663\n\n\n   \n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-07-15T13:21:23.230+0000",
                    "updated": "2021-07-15T13:21:23.230+0000",
                    "started": "2021-07-15T13:21:23.230+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "623046",
                    "issueId": "13387394"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13387394/worklog/623048",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "lidavidm commented on pull request #10663:\nURL: https://github.com/apache/arrow/pull/10663#issuecomment-880690668\n\n\n   Thanks for the review! :slightly_smiling_face:\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-07-15T13:22:41.644+0000",
                    "updated": "2021-07-15T13:22:41.644+0000",
                    "started": "2021-07-15T13:22:41.643+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "623048",
                    "issueId": "13387394"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
            "id": "1",
            "description": "A problem which impairs or prevents the functions of the product.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
            "name": "Bug",
            "subtask": false,
            "avatarId": 21133
        },
        "timespent": 10800,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@74a3581c[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@6bd14318[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@68ee08e[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@6726bac4[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@51a5a6fb[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@20666883[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@511d6691[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@33f06ec[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@7f51fa0e[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@6ce0a717[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@56737df4[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@2d0019b0[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 10800,
        "customfield_12312520": null,
        "customfield_12312521": "Thu Jul 15 13:21:15 UTC 2021",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2021-07-15T13:21:14.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-13253/watchers",
            "watchCount": 1,
            "isWatching": false
        },
        "created": "2021-07-02T19:46:37.000+0000",
        "updated": "2021-07-15T13:22:42.000+0000",
        "timeoriginalestimate": null,
        "description": "When sending a record batch > 2GiB, the server will segfault. Although Flight checks for this case and returns an error, it turns out that gRPC always tries to increment the refcount of the result buffer whether the serialization handler returned successfully or not:\r\n{code:cpp}\r\n// From gRPC 1.36\r\nStatus CallOpSendMessage::SendMessagePtr(const M* message,\r\n                                         WriteOptions options) {\r\n  msg_ = message;\r\n  write_options_ = options;\r\n  // Store the serializer for later since we have access to the message\r\n  serializer_ = [this](const void* message) {\r\n    bool own_buf;\r\n    // TODO(vjpai): Remove the void below when possible\r\n    // The void in the template parameter below should not be needed\r\n    // (since it should be implicit) but is needed due to an observed\r\n    // difference in behavior between clang and gcc for certain internal users\r\n    Status result = SerializationTraits<M, void>::Serialize(\r\n        *static_cast<const M*>(message), send_buf_.bbuf_ptr(), &own_buf);\r\n    if (!own_buf) {\r\n      // XXX(lidavidm): This should perhaps check result.ok(), or Serialize should\r\n      // unconditionally initialize send_buf_\r\n      send_buf_.Duplicate();\r\n    }\r\n    return result;\r\n  };\r\n  return Status();\r\n}\r\n{code}\r\nHence when Flight returns an error without initializing the buffer, we get a segfault.\r\n\r\nOriginally reported on StackOverflow: [https://stackoverflow.com/questions/68230146/pyarrow-flight-do-get-segfault-when-pandas-dataframe-over-3gb]",
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "3h",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 10800
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[C++][FlightRPC] Segfault when sending record batch >2GB",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13387394/comment/17373755",
                    "id": "17373755",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=lidavidm",
                        "name": "lidavidm",
                        "key": "lidavidm",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "David Li",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "Now this is annoying: gRPC fails an assertion later on anyways if the serialization handler raises an error. For Flight to do what it intends, it needs to move the check up. But then we may want to move the computation of the body size up as well, or we'll be duplicating work.",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=lidavidm",
                        "name": "lidavidm",
                        "key": "lidavidm",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "David Li",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2021-07-02T20:11:35.838+0000",
                    "updated": "2021-07-02T20:11:35.838+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13387394/comment/17380677",
                    "id": "17380677",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=lidavidm",
                        "name": "lidavidm",
                        "key": "lidavidm",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "David Li",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "Linking an upstream bug report.",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=lidavidm",
                        "name": "lidavidm",
                        "key": "lidavidm",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "David Li",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2021-07-14T15:08:30.567+0000",
                    "updated": "2021-07-14T15:08:30.567+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13387394/comment/17381343",
                    "id": "17381343",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=yibocai%231",
                        "name": "yibocai#1",
                        "key": "yibocai",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10453",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10453",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10453",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10453"
                        },
                        "displayName": "yibocai#1",
                        "active": false,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "Issue resolved by pull request 10663\n[https://github.com/apache/arrow/pull/10663]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=yibocai%231",
                        "name": "yibocai#1",
                        "key": "yibocai",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10453",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10453",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10453",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10453"
                        },
                        "displayName": "yibocai#1",
                        "active": false,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2021-07-15T13:21:15.016+0000",
                    "updated": "2021-07-15T13:21:15.016+0000"
                }
            ],
            "maxResults": 3,
            "total": 3,
            "startAt": 0
        },
        "customfield_12311820": "0|z0sk9s:",
        "customfield_12314139": null
    }
}