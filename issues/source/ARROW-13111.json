{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13384483",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13384483",
    "key": "ARROW-13111",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12350591",
                "id": "12350591",
                "description": "",
                "name": "7.0.0",
                "archived": false,
                "released": true,
                "releaseDate": "2022-02-03"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "name": "Major",
            "id": "3"
        },
        "labels": [
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=romainfrancois",
            "name": "romainfrancois",
            "key": "romainfrancois",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=romainfrancois&avatarId=35092",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=romainfrancois&avatarId=35092",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=romainfrancois&avatarId=35092",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=romainfrancois&avatarId=35092"
            },
            "displayName": "Romain Francois",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12333008",
                "id": "12333008",
                "name": "R"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=romainfrancois",
            "name": "romainfrancois",
            "key": "romainfrancois",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=romainfrancois&avatarId=35092",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=romainfrancois&avatarId=35092",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=romainfrancois&avatarId=35092",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=romainfrancois&avatarId=35092"
            },
            "displayName": "Romain Francois",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=romainfrancois",
            "name": "romainfrancois",
            "key": "romainfrancois",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=romainfrancois&avatarId=35092",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=romainfrancois&avatarId=35092",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=romainfrancois&avatarId=35092",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=romainfrancois&avatarId=35092"
            },
            "displayName": "Romain Francois",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "aggregateprogress": {
            "progress": 36000,
            "total": 36000,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 36000,
            "total": 36000,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-13111/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 60,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13384483/worklog/662740",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "romainfrancois opened a new pull request #11369:\nURL: https://github.com/apache/arrow/pull/11369\n\n\n   ``` r\r\n   library(arrow, warn.conflicts = FALSE)\r\n   #> See arrow_info() for available features\r\n   \r\n   (c_str <- ChunkedArray$create(c(\"un\", \"deux\"), c(\"trois\", \"quatre\")))\r\n   #> ChunkedArray\r\n   #> [\r\n   #>   [\r\n   #>     \"un\",\r\n   #>     \"deux\"\r\n   #>   ],\r\n   #>   [\r\n   #>     \"trois\",\r\n   #>     \"quatre\"\r\n   #>   ]\r\n   #> ]\r\n   (v_str <- c_str$as_vector())\r\n   #> [1] \"un\"     \"deux\"   \"trois\"  \"quatre\"\r\n   \r\n   .Internal(inspect(v_str))\r\n   #> @7ff3ff98f540 16 STRSXP g0c0 [REF(65535)] arrow::ChunkedArray<0x7ff3f64a2128, string, 2 chunks, 0 nulls> len=4\r\n   ```\r\n   \r\n   <sup>Created on 2021-10-08 by the [reprex package](https://reprex.tidyverse.org) (v2.0.1.9000)</sup>\r\n   \r\n   Only dealing with strings for now, int and double coming next.\r\n   \r\n   \n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-10-08T14:01:52.224+0000",
                    "updated": "2021-10-08T14:01:52.224+0000",
                    "started": "2021-10-08T14:01:52.223+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "662740",
                    "issueId": "13384483"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13384483/worklog/662742",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "github-actions[bot] commented on pull request #11369:\nURL: https://github.com/apache/arrow/pull/11369#issuecomment-938669861\n\n\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-10-08T14:04:20.345+0000",
                    "updated": "2021-10-08T14:04:20.345+0000",
                    "started": "2021-10-08T14:04:20.345+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "662742",
                    "issueId": "13384483"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13384483/worklog/662745",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "romainfrancois commented on a change in pull request #11369:\nURL: https://github.com/apache/arrow/pull/11369#discussion_r725048745\n\n\n\n##########\nFile path: r/src/altrep.cpp\n##########\n@@ -601,31 +616,41 @@ void Init_Altrep_classes(DllInfo* dll) {\n \n // return an altrep R vector that shadows the array if possible\n SEXP MakeAltrepVector(const std::shared_ptr<ChunkedArray>& chunked_array) {\n+  // using altrep if\n+  // - the arrow.use_altrep is set to TRUE or unset (implicit TRUE)\n+  // - the chunked array has at least one element\n+  if (!arrow::r::GetBoolOption(\"arrow.use_altrep\", true) ||\n+      chunked_array->length() == 0) {\n+    return R_NilValue;\n+  }\n+\n   // special case when there is only one array\n   if (chunked_array->num_chunks() == 1) {\n\nReview comment:\n       This is temporary, these cases will move to the general switch below, once `altrep::AltrepVectorPrimitive` can deal with multiple chunks. \n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-10-08T14:13:23.464+0000",
                    "updated": "2021-10-08T14:13:23.464+0000",
                    "started": "2021-10-08T14:13:23.464+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "662745",
                    "issueId": "13384483"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13384483/worklog/662830",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "romainfrancois commented on a change in pull request #11369:\nURL: https://github.com/apache/arrow/pull/11369#discussion_r725146485\n\n\n\n##########\nFile path: r/src/altrep.cpp\n##########\n@@ -215,9 +219,10 @@ struct AltrepVectorPrimitive : public AltrepVectorBase<AltrepVectorPrimitive<sex\n \n   // The value at position i\n   static c_type Elt(SEXP alt, R_xlen_t i) {\n-    const auto& array = Base::GetArray(alt);\n-    return array->IsNull(i) ? cpp11::na<c_type>()\n-                            : array->data()->template GetValues<c_type>(1)[i];\n+    auto array = Base::GetChunkedArray(alt)->Slice(i, 1)->chunk(0);\n\nReview comment:\n       This should use scalar instead of making a size 1 slice. \n\n##########\nFile path: r/src/altrep.cpp\n##########\n@@ -436,15 +450,16 @@ struct AltrepVectorString : public AltrepVectorBase<AltrepVectorString<Type>> {\n \n     BEGIN_CPP11\n \n-    const auto& array = Base::GetArray(alt);\n-    RStringViewer r_string_viewer(array);\n+    auto array = Base::GetChunkedArray(alt)->Slice(i, 1)->chunk(0);\n\nReview comment:\n       Maybe this could use a scalar and `RStringViewer` would deal with it ?\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-10-08T16:22:41.678+0000",
                    "updated": "2021-10-08T16:22:41.678+0000",
                    "started": "2021-10-08T16:22:41.678+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "662830",
                    "issueId": "13384483"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13384483/worklog/662833",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "romainfrancois commented on pull request #11369:\nURL: https://github.com/apache/arrow/pull/11369#issuecomment-938786602\n\n\n   ``` r\r\n   library(arrow, warn.conflicts = FALSE)\r\n   #> See arrow_info() for available features\r\n   \r\n   (c_str <- ChunkedArray$create(c(\"un\", \"deux\"), c(\"trois\", \"quatre\")))\r\n   #> ChunkedArray\r\n   #> [\r\n   #>   [\r\n   #>     \"un\",\r\n   #>     \"deux\"\r\n   #>   ],\r\n   #>   [\r\n   #>     \"trois\",\r\n   #>     \"quatre\"\r\n   #>   ]\r\n   #> ]\r\n   (v_str <- c_str$as_vector())\r\n   #> [1] \"un\"     \"deux\"   \"trois\"  \"quatre\"\r\n   .Internal(inspect(v_str))\r\n   #> @7ff40fba23d0 16 STRSXP g0c0 [REF(65535)] arrow::ChunkedArray<0x7ff405e99268, string, 2 chunks, 0 nulls> len=4\r\n   \r\n   (c_int <- ChunkedArray$create(1:2, 3:5))\r\n   #> ChunkedArray\r\n   #> [\r\n   #>   [\r\n   #>     1,\r\n   #>     2\r\n   #>   ],\r\n   #>   [\r\n   #>     3,\r\n   #>     4,\r\n   #>     5\r\n   #>   ]\r\n   #> ]\r\n   (v_int <- c_int$as_vector())\r\n   #> [1] 1 2 3 4 5\r\n   .Internal(inspect(v_int))\r\n   #> @7ff40fbfe1a0 13 INTSXP g0c0 [REF(65535)] arrow::ChunkedArray<0x7ff405d14768, int32, 2 chunks, 0 nulls> len=5\r\n   \r\n   (c_dbl <- ChunkedArray$create(c(1, 2), c(3, 4, 5), c(6, 7, 8)))\r\n   #> ChunkedArray\r\n   #> [\r\n   #>   [\r\n   #>     1,\r\n   #>     2\r\n   #>   ],\r\n   #>   [\r\n   #>     3,\r\n   #>     4,\r\n   #>     5\r\n   #>   ],\r\n   #>   [\r\n   #>     6,\r\n   #>     7,\r\n   #>     8\r\n   #>   ]\r\n   #> ]\r\n   (v_dbl <- c_dbl$as_vector())\r\n   #> [1] 1 2 3 4 5 6 7 8\r\n   .Internal(inspect(v_dbl))\r\n   #> @7ff40cfd8d08 14 REALSXP g0c0 [REF(65535)] arrow::ChunkedArray<0x7ff405d736d8, double, 3 chunks, 0 nulls> len=8\r\n   ```\r\n   \r\n   <sup>Created on 2021-10-08 by the [reprex package](https://reprex.tidyverse.org) (v2.0.1.9000)</sup>\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-10-08T16:25:51.905+0000",
                    "updated": "2021-10-08T16:25:51.905+0000",
                    "started": "2021-10-08T16:25:51.905+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "662833",
                    "issueId": "13384483"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13384483/worklog/663371",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "romainfrancois commented on a change in pull request #11369:\nURL: https://github.com/apache/arrow/pull/11369#discussion_r725894856\n\n\n\n##########\nFile path: r/src/altrep.cpp\n##########\n@@ -215,9 +219,10 @@ struct AltrepVectorPrimitive : public AltrepVectorBase<AltrepVectorPrimitive<sex\n \n   // The value at position i\n   static c_type Elt(SEXP alt, R_xlen_t i) {\n-    const auto& array = Base::GetArray(alt);\n-    return array->IsNull(i) ? cpp11::na<c_type>()\n-                            : array->data()->template GetValues<c_type>(1)[i];\n+    auto array = Base::GetChunkedArray(alt)->Slice(i, 1)->chunk(0);\n\nReview comment:\n       That would be something like this: \r\n   \r\n   ```cpp\r\n   auto scalar = Base::GetChunkedArray(alt)->GetScalar(i).ValueUnsafe();\r\n   \r\n       return scalar->type().id() == NullType ? cpp11::na<c_type>() : internal::checked_cast<const ScalarType*>(scalar)->Value();\r\n   ```\r\n   \r\n   but I'm not sure this is better\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-10-11T08:23:25.502+0000",
                    "updated": "2021-10-11T08:23:25.502+0000",
                    "started": "2021-10-11T08:23:25.501+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "663371",
                    "issueId": "13384483"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13384483/worklog/663390",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "romainfrancois commented on a change in pull request #11369:\nURL: https://github.com/apache/arrow/pull/11369#discussion_r725912573\n\n\n\n##########\nFile path: r/tests/testthat/test-altrep.R\n##########\n@@ -227,3 +242,19 @@ test_that(\"columns of struct types may be altrep\", {\n   expect_true(is_altrep(df$x))\n   expect_true(is_altrep(df$y))\n })\n+\n+test_that(\"R checks for bounds\", {\n+  v_int <- Array$create(c(1, 2, 3))$as_vector()\n+  v_dbl <- Array$create(c(1L, 2L, 3L))$as_vector()\n+  v_str <- Array$create(c(\"un\", \"deux\", \"trois\"))$as_vector()\n+\n+  expect_snapshot({\n+    (expect_error(v_int[[5]]))\n\nReview comment:\n       This is the pattern we currently use for snapshots with errors, see e.g. https://github.com/tidyverse/dplyr/issues/6044\r\n   \r\n   This could also be\r\n   \r\n   ```r\r\n   expect_snapshot(error = TRUE, {\r\n      v_int[[5]]\r\n      ...\r\n   })\r\n   ```\r\n   \r\n   but this pattern better prints error (not relevant here) and also IIUC lets us specify more precisely which code errors. \n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-10-11T08:46:18.410+0000",
                    "updated": "2021-10-11T08:46:18.410+0000",
                    "started": "2021-10-11T08:46:18.410+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "663390",
                    "issueId": "13384483"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13384483/worklog/663410",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "romainfrancois commented on a change in pull request #11369:\nURL: https://github.com/apache/arrow/pull/11369#discussion_r725952856\n\n\n\n##########\nFile path: r/src/array_to_vector.cpp\n##########\n@@ -786,7 +778,7 @@ class Converter_Struct : public Converter {\n  private:\n   std::vector<std::shared_ptr<Converter>> converters;\n \n-  bool is_altrep(SEXP x) const {\n+  bool is_arrow_altrep(SEXP x) const {\n\nReview comment:\n       This should check that the altrep class is from this package, using e.g `ALTREP_CLASS_SERIALIZED_CLASS` from https://github.com/apache/arrow/pull/11366\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-10-11T09:35:47.207+0000",
                    "updated": "2021-10-11T09:35:47.207+0000",
                    "started": "2021-10-11T09:35:47.206+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "663410",
                    "issueId": "13384483"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13384483/worklog/663431",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "romainfrancois commented on a change in pull request #11369:\nURL: https://github.com/apache/arrow/pull/11369#discussion_r725988258\n\n\n\n##########\nFile path: r/src/array_to_vector.cpp\n##########\n@@ -786,7 +778,7 @@ class Converter_Struct : public Converter {\n  private:\n   std::vector<std::shared_ptr<Converter>> converters;\n \n-  bool is_altrep(SEXP x) const {\n+  bool is_arrow_altrep(SEXP x) const {\n\nReview comment:\n       https://github.com/apache/arrow/pull/11366 now has an `is_arrow_altrep()` function. \n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-10-11T10:23:26.439+0000",
                    "updated": "2021-10-11T10:23:26.439+0000",
                    "started": "2021-10-11T10:23:26.439+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "663431",
                    "issueId": "13384483"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13384483/worklog/663506",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "romainfrancois commented on a change in pull request #11369:\nURL: https://github.com/apache/arrow/pull/11369#discussion_r726087984\n\n\n\n##########\nFile path: r/tests/testthat/test-altrep.R\n##########\n@@ -227,3 +242,19 @@ test_that(\"columns of struct types may be altrep\", {\n   expect_true(is_altrep(df$x))\n   expect_true(is_altrep(df$y))\n })\n+\n+test_that(\"R checks for bounds\", {\n+  v_int <- Array$create(c(1, 2, 3))$as_vector()\n+  v_dbl <- Array$create(c(1L, 2L, 3L))$as_vector()\n+  v_str <- Array$create(c(\"un\", \"deux\", \"trois\"))$as_vector()\n+\n+  expect_snapshot({\n+    (expect_error(v_int[[5]]))\n\nReview comment:\n       We can probably skip on old version of R: https://github.com/apache/arrow/pull/11369/checks?check_run_id=3857849474\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-10-11T12:50:05.095+0000",
                    "updated": "2021-10-11T12:50:05.095+0000",
                    "started": "2021-10-11T12:50:05.095+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "663506",
                    "issueId": "13384483"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13384483/worklog/664024",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "romainfrancois commented on a change in pull request #11369:\nURL: https://github.com/apache/arrow/pull/11369#discussion_r727083194\n\n\n\n##########\nFile path: r/src/altrep.cpp\n##########\n@@ -237,29 +242,35 @@ struct AltrepVectorPrimitive : public AltrepVectorBase<AltrepVectorPrimitive<sex\n     // array has nulls\n     //\n     // This only materialize the region, into buf. Not the entire vector.\n-    auto slice = GetArray(alt)->Slice(i, n);\n+    auto slice = GetChunkedArray(alt)->Slice(i, n);\n     R_xlen_t ncopy = slice->length();\n \n-    // first copy the data buffer\n-    memcpy(buf, slice->data()->template GetValues<c_type>(1), ncopy * sizeof(c_type));\n+    c_type* out = buf;\n\nReview comment:\n       Same as before but we have to loop across the chunks of the slice. \r\n   \r\n   This loop could be done in parallel, if we believe this is worth it. \n\n##########\nFile path: r/src/altrep.cpp\n##########\n@@ -69,11 +69,12 @@ R_xlen_t Standard_Get_region<int>(SEXP data2, R_xlen_t i, R_xlen_t n, int* buf)\n   return INTEGER_GET_REGION(data2, i, n, buf);\n }\n \n-void DeleteArray(std::shared_ptr<Array>* ptr) { delete ptr; }\n-using Pointer = cpp11::external_pointer<std::shared_ptr<Array>, DeleteArray>;\n+void DeleteChunkedArray(std::shared_ptr<ChunkedArray>* ptr) { delete ptr; }\n+using Pointer =\n+    cpp11::external_pointer<std::shared_ptr<ChunkedArray>, DeleteChunkedArray>;\n \n-// the Array that is being wrapped by the altrep object\n-static const std::shared_ptr<Array>& GetArray(SEXP alt) {\n+// the ChunkedArray that is being wrapped by the altrep object\n+const std::shared_ptr<ChunkedArray>& GetChunkedArray(SEXP alt) {\n\nReview comment:\n       Move it out of the class so that it can be used in `vec_to_arrow_altrep_bypass()`, and now returns a `ChunkedArray`, which is what the altrep classes host now.   \n\n##########\nFile path: r/src/altrep.cpp\n##########\n@@ -273,21 +284,21 @@ struct AltrepVectorPrimitive : public AltrepVectorBase<AltrepVectorPrimitive<sex\n     using scalar_type =\n         typename std::conditional<sexp_type == INTSXP, Int32Scalar, DoubleScalar>::type;\n \n-    const auto& array = GetArray(alt);\n+    const auto& chunked_array = GetChunkedArray(alt);\n     bool na_rm = narm == TRUE;\n-    auto n = array->length();\n-    auto null_count = array->null_count();\n+    auto n = chunked_array->length();\n+    auto null_count = chunked_array->null_count();\n     if ((na_rm || n == 0) && null_count == n) {\n       return Rf_ScalarReal(Min ? R_PosInf : R_NegInf);\n     }\n     if (!na_rm && null_count > 0) {\n       return cpp11::as_sexp(cpp11::na<data_type>());\n     }\n \n-    auto options = NaRmOptions(array, na_rm);\n+    auto options = NaRmOptions(na_rm);\n \n-    const auto& minmax =\n-        ValueOrStop(arrow::compute::CallFunction(\"min_max\", {array}, options.get()));\n+    const auto& minmax = ValueOrStop(\n+        arrow::compute::CallFunction(\"min_max\", {chunked_array}, options.get()));\n\nReview comment:\n       Needs more testing of calling these on chunk arrays. \n\n##########\nFile path: r/src/r_to_arrow.cpp\n##########\n@@ -1425,7 +1450,8 @@ SEXP vec_to_arrow(SEXP x, SEXP s_type) {\n   } else {\n     type = cpp11::as_cpp<std::shared_ptr<arrow::DataType>>(s_type);\n   }\n-  return cpp11::to_r6(arrow::r::vec_to_arrow(x, type, type_inferred));\n+\n+  return cpp11::to_r6(arrow::r::vec_to_arrow_Array(x, type, type_inferred));\n\nReview comment:\n       concatenation might have to happen here, this is called from `Array$create()`\n\n##########\nFile path: r/R/array.R\n##########\n@@ -186,7 +186,7 @@ Array$create <- function(x, type = NULL) {\n     }\n     return(out)\n   }\n-  vec_to_arrow(x, type)\n+  vec_to_Array(x, type)\n\nReview comment:\n       changed internal name, so that it is clear that it returns an `Array`. Internally it might have to concatenate if `x` is an altrep vector (backed by ChunkedArray now) that hosts multiple chunks. \n\n##########\nFile path: r/src/altrep.cpp\n##########\n@@ -640,9 +657,9 @@ bool is_arrow_altrep(SEXP x) {\n   return false;\n }\n \n-std::shared_ptr<Array> vec_to_arrow_altrep_bypass(SEXP x) {\n+std::shared_ptr<ChunkedArray> vec_to_arrow_altrep_bypass(SEXP x) {\n\nReview comment:\n       Now returning a ChunkedArray. \n\n##########\nFile path: r/src/altrep.cpp\n##########\n@@ -436,15 +450,16 @@ struct AltrepVectorString : public AltrepVectorBase<AltrepVectorString<Type>> {\n \n     BEGIN_CPP11\n \n-    const auto& array = GetArray(alt);\n-    RStringViewer r_string_viewer(array);\n+    auto array = GetChunkedArray(alt)->Slice(i, 1)->chunk(0);\n\nReview comment:\n       The array is now transient in `RStringViewer` so that it can process all the chunks. \n\n##########\nFile path: r/src/chunkedarray.cpp\n##########\n@@ -126,10 +126,17 @@ std::shared_ptr<arrow::ChunkedArray> ChunkedArray__from_list(cpp11::list chunks,\n     // because we might have inferred the type from the first element of the list\n     //\n     // this only really matters for dictionary arrays\n-    vec.push_back(arrow::r::vec_to_arrow(chunks[0], type, type_inferred));\n+    auto chunked_array =\n\nReview comment:\n       each element of the R list might be an altrep vector with potentially more than 1 chunk. So using `vec_to_arrow_ChunkedArray()` so that the chunks are not concatenated, and adding each to the list. \n\n##########\nFile path: r/src/altrep.cpp\n##########\n@@ -237,29 +242,35 @@ struct AltrepVectorPrimitive : public AltrepVectorBase<AltrepVectorPrimitive<sex\n     // array has nulls\n     //\n     // This only materialize the region, into buf. Not the entire vector.\n-    auto slice = GetArray(alt)->Slice(i, n);\n+    auto slice = GetChunkedArray(alt)->Slice(i, n);\n     R_xlen_t ncopy = slice->length();\n \n-    // first copy the data buffer\n-    memcpy(buf, slice->data()->template GetValues<c_type>(1), ncopy * sizeof(c_type));\n+    c_type* out = buf;\n+    for (const auto& array : slice->chunks()) {\n+      auto n = array->length();\n+\n+      // first copy the data buffer\n+      memcpy(out, array->data()->template GetValues<c_type>(1), n * sizeof(c_type));\n \n-    // then set the R NA sentinels if needed\n-    if (slice->null_count() > 0) {\n-      internal::BitmapReader bitmap_reader(slice->null_bitmap()->data(), slice->offset(),\n-                                           ncopy);\n+      // then set the R NA sentinels if needed\n+      if (array->null_count() > 0) {\n+        internal::BitmapReader bitmap_reader(array->null_bitmap()->data(),\n+                                             array->offset(), ncopy);\n \n-      for (R_xlen_t j = 0; j < ncopy; j++, bitmap_reader.Next()) {\n-        if (bitmap_reader.IsNotSet()) {\n-          buf[j] = cpp11::na<c_type>();\n+        for (R_xlen_t j = 0; j < n; j++, bitmap_reader.Next()) {\n+          if (bitmap_reader.IsNotSet()) {\n+            out[j] = cpp11::na<c_type>();\n+          }\n         }\n       }\n+\n+      out += n;\n     }\n \n     return ncopy;\n   }\n \n-  static std::shared_ptr<arrow::compute::ScalarAggregateOptions> NaRmOptions(\n-      const std::shared_ptr<Array>& array, bool na_rm) {\n+  static std::shared_ptr<arrow::compute::ScalarAggregateOptions> NaRmOptions(bool na_rm) {\n\nReview comment:\n       This never used the Array, so removing it. \n\n##########\nFile path: r/src/r_to_arrow.cpp\n##########\n@@ -1191,7 +1206,17 @@ std::shared_ptr<arrow::Array> vec_to_arrow(SEXP x,\n \n   StopIfNotOk(converter->Extend(x, options.size));\n \n-  return ValueOrStop(converter->ToArray());\n+  return ValueOrStop(converter->ToChunkedArray());\n+}\n+\n\nReview comment:\n       We need `vec_to_arrow_Array()` in addition to `vec_to_arrow_ChunkedArray()` because some code do need to make `Array`, i.e. `Array$create()` or `RecordBatch$create()`\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-10-12T12:37:31.098+0000",
                    "updated": "2021-10-12T12:37:31.098+0000",
                    "started": "2021-10-12T12:37:31.097+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "664024",
                    "issueId": "13384483"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13384483/worklog/664328",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nealrichardson commented on pull request #11369:\nURL: https://github.com/apache/arrow/pull/11369#issuecomment-941521318\n\n\n   @romainfrancois maybe I misread, but it looks like everywhere that altrep was previously working with Arrays, it now does ChunkedArrays instead? So somewhere I guess (I didn't follow exactly where) when I do `array$as_vector()`, that makes a ChunkedArray with 1 chunk and sticks it in the altrep object?\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-10-12T20:46:06.703+0000",
                    "updated": "2021-10-12T20:46:06.703+0000",
                    "started": "2021-10-12T20:46:06.703+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "664328",
                    "issueId": "13384483"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13384483/worklog/664329",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nealrichardson commented on pull request #11369:\nURL: https://github.com/apache/arrow/pull/11369#issuecomment-941521833\n\n\n   @github-actions crossbow submit test-r-versions\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-10-12T20:46:19.934+0000",
                    "updated": "2021-10-12T20:46:19.934+0000",
                    "started": "2021-10-12T20:46:19.934+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "664329",
                    "issueId": "13384483"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13384483/worklog/664333",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "github-actions[bot] commented on pull request #11369:\nURL: https://github.com/apache/arrow/pull/11369#issuecomment-941523578\n\n\n   Revision: dd9d0519e5cd6c978780c3b03f06a15a78a1a9a5\n   \n   Submitted crossbow builds: [ursacomputing/crossbow @ actions-922](https://github.com/ursacomputing/crossbow/branches/all?query=actions-922)\n   \n   |Task|Status|\n   |----|------|\n   |test-r-versions|[![Github Actions](https://github.com/ursacomputing/crossbow/workflows/Crossbow/badge.svg?branch=actions-922-github-test-r-versions)](https://github.com/ursacomputing/crossbow/actions?query=branch:actions-922-github-test-r-versions)|\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-10-12T20:47:23.241+0000",
                    "updated": "2021-10-12T20:47:23.241+0000",
                    "started": "2021-10-12T20:47:23.240+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "664333",
                    "issueId": "13384483"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13384483/worklog/664506",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "romainfrancois commented on pull request #11369:\nURL: https://github.com/apache/arrow/pull/11369#issuecomment-942064459\n\n\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-10-13T08:35:15.102+0000",
                    "updated": "2021-10-13T08:35:15.102+0000",
                    "started": "2021-10-13T08:35:15.102+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "664506",
                    "issueId": "13384483"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13384483/worklog/664567",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "romainfrancois edited a comment on pull request #11369:\nURL: https://github.com/apache/arrow/pull/11369#issuecomment-942064563\n\n\n   \ud83e\udd14 something is wrong all these should be `TRUE`: \r\n   \r\n   ``` r\r\n   library(arrow, warn.conflicts = FALSE)\r\n   #> See arrow_info() for available features\r\n   \r\n   a <- ChunkedArray$create(c(1, 2, 3), c(4, 5, 6))\r\n   b <- ChunkedArray$create(c(7, 8, 9))\r\n   c <- Array$create(c(10, 11, 12))\r\n   d <- Array$create(c(13, 14, 15))\r\n   e <- ChunkedArray$create(c(16, 17), c(18, 19))\r\n   \r\n   x <- ChunkedArray$create(a$as_vector(), b$as_vector(), c$as_vector(), d, e)\r\n   x$num_chunks\r\n   #> [1] 7\r\n   \r\n   arrow:::test_same_Array(a$chunk(0)$pointer(), x$chunk(0)$pointer())\r\n   #> [1] TRUE\r\n   arrow:::test_same_Array(a$chunk(1)$pointer(), x$chunk(1)$pointer())\r\n   #> [1] TRUE\r\n   arrow:::test_same_Array(b$chunk(0)$pointer(), x$chunk(2)$pointer())\r\n   #> [1] TRUE\r\n   arrow:::test_same_Array(c$pointer(),          x$chunk(3)$pointer())\r\n   #> [1] FALSE\r\n   arrow:::test_same_Array(d$pointer(),          x$chunk(4)$pointer())\r\n   #> [1] FALSE\r\n   arrow:::test_same_Array(e$chunk(0)$pointer(), x$chunk(5)$pointer())\r\n   #> [1] TRUE\r\n   arrow:::test_same_Array(e$chunk(1)$pointer(), x$chunk(6)$pointer())\r\n   #> [1] TRUE\r\n   ```\r\n   \r\n   <sup>Created on 2021-10-13 by the [reprex package](https://reprex.tidyverse.org) (v2.0.1.9000)</sup>\r\n   \n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-10-13T10:18:42.669+0000",
                    "updated": "2021-10-13T10:18:42.669+0000",
                    "started": "2021-10-13T10:18:42.669+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "664567",
                    "issueId": "13384483"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13384483/worklog/664568",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "romainfrancois commented on pull request #11369:\nURL: https://github.com/apache/arrow/pull/11369#issuecomment-942148885\n\n\n   ``` r\r\n   library(arrow, warn.conflicts = FALSE)\r\n   #> See arrow_info() for available features\r\n   \r\n   a <- ChunkedArray$create(c(1, 2, 3), c(4, 5, 6))\r\n   b <- ChunkedArray$create(c(7, 8, 9))\r\n   c <- Array$create(c(10, 11, 12))\r\n   \r\n   d <- Array$create(c(13, 14, 15))\r\n   e <- ChunkedArray$create(c(16, 17), c(18, 19))\r\n   \r\n   x <- ChunkedArray$create(a$as_vector(), b$as_vector(), c$as_vector(), d, e)\r\n   \r\n   x$chunk(0)$Same(a$chunk(0))\r\n   #> [1] TRUE\r\n   x$chunk(1)$Same(a$chunk(1))\r\n   #> [1] TRUE\r\n   x$chunk(2)$Same(b$chunk(0))\r\n   #> [1] TRUE\r\n   x$chunk(3)$Same(c)\r\n   #> [1] TRUE\r\n   x$chunk(4)$Same(d)\r\n   #> [1] TRUE\r\n   x$chunk(5)$Same(e$chunk(0))\r\n   #> [1] TRUE\r\n   x$chunk(6)$Same(e$chunk(1))\r\n   #> [1] TRUE\r\n   ```\r\n   \r\n   <sup>Created on 2021-10-13 by the [reprex package](https://reprex.tidyverse.org) (v2.0.1.9000)</sup>\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-10-13T10:18:58.188+0000",
                    "updated": "2021-10-13T10:18:58.188+0000",
                    "started": "2021-10-13T10:18:58.188+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "664568",
                    "issueId": "13384483"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13384483/worklog/664595",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "romainfrancois commented on a change in pull request #11369:\nURL: https://github.com/apache/arrow/pull/11369#discussion_r727981498\n\n\n\n##########\nFile path: r/R/array.R\n##########\n@@ -166,6 +166,8 @@ Array <- R6Class(\"Array\",\n     View = function(type) {\n       Array$create(Array__View(self, as_type(type)))\n     },\n+    Address = function() Array__address(self),\n\nReview comment:\n       We might not need it, should I remove it for now ? It's just giving the address of the `Array*`, not the `std::shared_ptr<Array>*` so that we can compare.\r\n   \r\n   Initially this was to test Array equality (in the strict sense of being the same array), but I've since added `$Same()`.  \n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-10-13T11:54:21.450+0000",
                    "updated": "2021-10-13T11:54:21.450+0000",
                    "started": "2021-10-13T11:54:21.450+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "664595",
                    "issueId": "13384483"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13384483/worklog/664854",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "romainfrancois commented on a change in pull request #11369:\nURL: https://github.com/apache/arrow/pull/11369#discussion_r727981498\n\n\n\n##########\nFile path: r/R/array.R\n##########\n@@ -166,6 +166,8 @@ Array <- R6Class(\"Array\",\n     View = function(type) {\n       Array$create(Array__View(self, as_type(type)))\n     },\n+    Address = function() Array__address(self),\n\nReview comment:\n       We might not need it, should I remove it for now ? It's just giving the address of the `Array*`, not the `std::shared_ptr<Array>*` so that we can compare.\r\n   \r\n   Initially this was to test Array equality (in the strict sense of being the same array), but I've since added `$Same()`.  \n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-10-13T18:21:38.537+0000",
                    "updated": "2021-10-13T18:21:38.537+0000",
                    "started": "2021-10-13T18:21:38.537+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "664854",
                    "issueId": "13384483"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13384483/worklog/664863",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nealrichardson commented on pull request #11369:\nURL: https://github.com/apache/arrow/pull/11369#issuecomment-941521318\n\n\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-10-13T18:22:21.458+0000",
                    "updated": "2021-10-13T18:22:21.458+0000",
                    "started": "2021-10-13T18:22:21.458+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "664863",
                    "issueId": "13384483"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/2",
            "id": "2",
            "description": "A new feature of the product, which has yet to be developed.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21141&avatarType=issuetype",
            "name": "New Feature",
            "subtask": false,
            "avatarId": 21141
        },
        "timespent": 36000,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@1ab37300[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@6e89ffbe[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@6adf864a[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@4b8af0a0[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@7ab22870[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@3f18a38a[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@29638ff5[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@35707589[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@5e6a2aff[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@2414c64b[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@113de91b[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@27571a88[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 36000,
        "customfield_12312520": null,
        "customfield_12312521": "Thu Nov 18 13:02:58 UTC 2021",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2021-11-18T13:02:58.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-13111/watchers",
            "watchCount": 1,
            "isWatching": false
        },
        "created": "2021-06-18T08:32:34.000+0000",
        "updated": "2021-11-18T16:42:32.000+0000",
        "timeoriginalestimate": null,
        "description": null,
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "10h",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 36000
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[R] altrep vectors for ChunkedArray",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13384483/comment/17445913",
                    "id": "17445913",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "body": "Issue resolved by pull request 11369\n[https://github.com/apache/arrow/pull/11369]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "created": "2021-11-18T13:02:58.086+0000",
                    "updated": "2021-11-18T13:02:58.086+0000"
                }
            ],
            "maxResults": 1,
            "total": 1,
            "startAt": 0
        },
        "customfield_12311820": "0|z0s2c0:",
        "customfield_12314139": null
    }
}