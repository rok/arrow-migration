{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13241226",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13241226",
    "key": "ARROW-5707",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12344925",
                "id": "12344925",
                "description": "",
                "name": "0.14.0",
                "archived": false,
                "released": true,
                "releaseDate": "2019-07-04"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/4",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
            "name": "Minor",
            "id": "4"
        },
        "labels": [
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=fan_li_ya",
            "name": "fan_li_ya",
            "key": "fan_li_ya",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
            },
            "displayName": "Liya Fan",
            "active": true,
            "timeZone": "Asia/Shanghai"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12328933",
                "id": "12328933",
                "name": "Java"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=fan_li_ya",
            "name": "fan_li_ya",
            "key": "fan_li_ya",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
            },
            "displayName": "Liya Fan",
            "active": true,
            "timeZone": "Asia/Shanghai"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=fan_li_ya",
            "name": "fan_li_ya",
            "key": "fan_li_ya",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
            },
            "displayName": "Liya Fan",
            "active": true,
            "timeZone": "Asia/Shanghai"
        },
        "aggregateprogress": {
            "progress": 15600,
            "total": 15600,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 15600,
            "total": 15600,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-5707/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 26,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13241226/worklog/265648",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "liyafan82 commented on pull request #4674: ARROW-5707: [Java] Improve the performance and code structure for ArrowRecordBatch\nURL: https://github.com/apache/arrow/pull/4674\n \n \n   Improve the performance of ArrowRecordBatch by reducing the number of divisions.\r\n   Improve the code structure of ArrowRecordBatch by removing the useless constructor.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-06-24T10:38:01.151+0000",
                    "updated": "2019-06-24T10:38:01.151+0000",
                    "started": "2019-06-24T10:38:01.150+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "265648",
                    "issueId": "13241226"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13241226/worklog/265716",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "codecov-io commented on issue #4674: ARROW-5707: [Java] Improve the performance and code structure for ArrowRecordBatch\nURL: https://github.com/apache/arrow/pull/4674#issuecomment-505018263\n \n \n   # [Codecov](https://codecov.io/gh/apache/arrow/pull/4674?src=pr&el=h1) Report\n   > Merging [#4674](https://codecov.io/gh/apache/arrow/pull/4674?src=pr&el=desc) into [master](https://codecov.io/gh/apache/arrow/commit/f180a53b4da5ed932ecb8aa1e56b961cba899e61?src=pr&el=desc) will **increase** coverage by `1.06%`.\n   > The diff coverage is `n/a`.\n   \n   [![Impacted file tree graph](https://codecov.io/gh/apache/arrow/pull/4674/graphs/tree.svg?width=650&token=LpTCFbqVT1&height=150&src=pr)](https://codecov.io/gh/apache/arrow/pull/4674?src=pr&el=tree)\n   \n   ```diff\n   @@            Coverage Diff             @@\n   ##           master    #4674      +/-   ##\n   ==========================================\n   + Coverage   88.41%   89.47%   +1.06%     \n   ==========================================\n     Files         905      658     -247     \n     Lines      112429    93830   -18599     \n     Branches     1420        0    -1420     \n   ==========================================\n   - Hits        99402    83953   -15449     \n   + Misses      12665     9877    -2788     \n   + Partials      362        0     -362\n   ```\n   \n   \n   | [Impacted Files](https://codecov.io/gh/apache/arrow/pull/4674?src=pr&el=tree) | Coverage \u0394 | |\n   |---|---|---|\n   | [cpp/src/plasma/thirdparty/ae/ae.c](https://codecov.io/gh/apache/arrow/pull/4674/diff?src=pr&el=tree#diff-Y3BwL3NyYy9wbGFzbWEvdGhpcmRwYXJ0eS9hZS9hZS5j) | `70.75% <0%> (-0.95%)` | :arrow_down: |\n   | [r/src/recordbatch.cpp](https://codecov.io/gh/apache/arrow/pull/4674/diff?src=pr&el=tree#diff-ci9zcmMvcmVjb3JkYmF0Y2guY3Bw) | | |\n   | [r/R/Table.R](https://codecov.io/gh/apache/arrow/pull/4674/diff?src=pr&el=tree#diff-ci9SL1RhYmxlLlI=) | | |\n   | [go/arrow/math/uint64\\_amd64.go](https://codecov.io/gh/apache/arrow/pull/4674/diff?src=pr&el=tree#diff-Z28vYXJyb3cvbWF0aC91aW50NjRfYW1kNjQuZ28=) | | |\n   | [r/src/symbols.cpp](https://codecov.io/gh/apache/arrow/pull/4674/diff?src=pr&el=tree#diff-ci9zcmMvc3ltYm9scy5jcHA=) | | |\n   | [r/R/Column.R](https://codecov.io/gh/apache/arrow/pull/4674/diff?src=pr&el=tree#diff-ci9SL0NvbHVtbi5S) | | |\n   | [go/arrow/ipc/file\\_reader.go](https://codecov.io/gh/apache/arrow/pull/4674/diff?src=pr&el=tree#diff-Z28vYXJyb3cvaXBjL2ZpbGVfcmVhZGVyLmdv) | | |\n   | [js/src/builder/index.ts](https://codecov.io/gh/apache/arrow/pull/4674/diff?src=pr&el=tree#diff-anMvc3JjL2J1aWxkZXIvaW5kZXgudHM=) | | |\n   | [r/src/arrow\\_types.h](https://codecov.io/gh/apache/arrow/pull/4674/diff?src=pr&el=tree#diff-ci9zcmMvYXJyb3dfdHlwZXMuaA==) | | |\n   | [js/src/enum.ts](https://codecov.io/gh/apache/arrow/pull/4674/diff?src=pr&el=tree#diff-anMvc3JjL2VudW0udHM=) | | |\n   | ... and [238 more](https://codecov.io/gh/apache/arrow/pull/4674/diff?src=pr&el=tree-more) | |\n   \n   ------\n   \n   [Continue to review full report at Codecov](https://codecov.io/gh/apache/arrow/pull/4674?src=pr&el=continue).\n   > **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n   > `\u0394 = absolute <relative> (impact)`, `\u00f8 = not affected`, `? = missing data`\n   > Powered by [Codecov](https://codecov.io/gh/apache/arrow/pull/4674?src=pr&el=footer). Last update [f180a53...90f23aa](https://codecov.io/gh/apache/arrow/pull/4674?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n   \n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-06-24T13:49:54.843+0000",
                    "updated": "2019-06-24T13:49:54.843+0000",
                    "started": "2019-06-24T13:49:54.842+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "265716",
                    "issueId": "13241226"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13241226/worklog/265727",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "emkornfield commented on pull request #4674: ARROW-5707: [Java] Improve the performance and code structure for ArrowRecordBatch\nURL: https://github.com/apache/arrow/pull/4674#discussion_r296743900\n \n \n\n ##########\n File path: java/vector/src/main/java/org/apache/arrow/vector/ipc/message/ArrowRecordBatch.java\n ##########\n @@ -213,9 +197,7 @@ public int computeBodyLength() {\n       ByteBuffer nioBuffer =\n           buffer.nioBuffer(buffer.readerIndex(), buffer.readableBytes());\n       size += nioBuffer.remaining();\n-      if (size % 8 != 0) {\n-        size += 8 - (size % 8);\n-      }\n+      size = (size + 7) & 0xfffffff8;\n \n Review comment:\n   Please add a comment here.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-06-24T14:13:47.945+0000",
                    "updated": "2019-06-24T14:13:47.945+0000",
                    "started": "2019-06-24T14:13:47.944+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "265727",
                    "issueId": "13241226"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13241226/worklog/265733",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "emkornfield commented on pull request #4674: ARROW-5707: [Java] Improve the performance and code structure for ArrowRecordBatch\nURL: https://github.com/apache/arrow/pull/4674#discussion_r296747664\n \n \n\n ##########\n File path: java/vector/src/main/java/org/apache/arrow/vector/ipc/message/ArrowRecordBatch.java\n ##########\n @@ -79,29 +79,13 @@ public ArrowRecordBatch(int length, List<ArrowFieldNode> nodes, List<ArrowBuf> b\n       arrowBuffers.add(new ArrowBuffer(offset, size));\n       LOGGER.debug(\"Buffer in RecordBatch at {}, length: {}\", offset, size);\n       offset += size;\n-      if (alignBuffers && offset % 8 != 0) { // align on 8 byte boundaries\n-        offset += 8 - (offset % 8);\n+      if (alignBuffers) { // align on 8 byte boundaries\n+        offset = (offset + 7) & 0xfffffffffffffff8L;\n       }\n     }\n     this.buffersLayout = Collections.unmodifiableList(arrowBuffers);\n   }\n \n-  // clone constructor\n-  private ArrowRecordBatch(boolean dummy, int length, List<ArrowFieldNode> nodes, List<ArrowBuf> buffers) {\n-    this.length = length;\n-    this.nodes = nodes;\n-    this.buffers = buffers;\n-    this.closed = false;\n-    List<ArrowBuffer> arrowBuffers = new ArrayList<>();\n-    long offset = 0;\n-    for (ArrowBuf arrowBuf : buffers) {\n-      long size = arrowBuf.readableBytes();\n \n Review comment:\n   it looks like this doesn't call   arrowBuf.getReferenceManager().retain();\r\n   \r\n   That seems like a functionality difference?\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-06-24T14:21:08.006+0000",
                    "updated": "2019-06-24T14:21:08.006+0000",
                    "started": "2019-06-24T14:21:08.005+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "265733",
                    "issueId": "13241226"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13241226/worklog/265736",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "emkornfield commented on pull request #4674: ARROW-5707: [Java] Improve the performance and code structure for ArrowRecordBatch\nURL: https://github.com/apache/arrow/pull/4674#discussion_r296748400\n \n \n\n ##########\n File path: java/vector/src/main/java/org/apache/arrow/vector/ipc/message/ArrowRecordBatch.java\n ##########\n @@ -79,29 +79,13 @@ public ArrowRecordBatch(int length, List<ArrowFieldNode> nodes, List<ArrowBuf> b\n       arrowBuffers.add(new ArrowBuffer(offset, size));\n       LOGGER.debug(\"Buffer in RecordBatch at {}, length: {}\", offset, size);\n       offset += size;\n-      if (alignBuffers && offset % 8 != 0) { // align on 8 byte boundaries\n-        offset += 8 - (offset % 8);\n+      if (alignBuffers) { // align on 8 byte boundaries\n+        offset = (offset + 7) & 0xfffffffffffffff8L;\n       }\n     }\n     this.buffersLayout = Collections.unmodifiableList(arrowBuffers);\n   }\n \n-  // clone constructor\n-  private ArrowRecordBatch(boolean dummy, int length, List<ArrowFieldNode> nodes, List<ArrowBuf> buffers) {\n-    this.length = length;\n-    this.nodes = nodes;\n-    this.buffers = buffers;\n-    this.closed = false;\n-    List<ArrowBuffer> arrowBuffers = new ArrayList<>();\n-    long offset = 0;\n-    for (ArrowBuf arrowBuf : buffers) {\n-      long size = arrowBuf.readableBytes();\n \n Review comment:\n   Also this changes removing this causes the buffers to be aligned by default, where they where unaligned before.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-06-24T14:22:31.002+0000",
                    "updated": "2019-06-24T14:22:31.002+0000",
                    "started": "2019-06-24T14:22:31.001+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "265736",
                    "issueId": "13241226"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13241226/worklog/266290",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "liyafan82 commented on pull request #4674: ARROW-5707: [Java] Improve the performance and code structure for ArrowRecordBatch\nURL: https://github.com/apache/arrow/pull/4674#discussion_r296985483\n \n \n\n ##########\n File path: java/vector/src/main/java/org/apache/arrow/vector/ipc/message/ArrowRecordBatch.java\n ##########\n @@ -213,9 +197,7 @@ public int computeBodyLength() {\n       ByteBuffer nioBuffer =\n           buffer.nioBuffer(buffer.readerIndex(), buffer.readableBytes());\n       size += nioBuffer.remaining();\n-      if (size % 8 != 0) {\n-        size += 8 - (size % 8);\n-      }\n+      size = (size + 7) & 0xfffffff8;\n \n Review comment:\n   Sure. Thanks.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-06-25T02:37:47.752+0000",
                    "updated": "2019-06-25T02:37:47.752+0000",
                    "started": "2019-06-25T02:37:47.751+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "266290",
                    "issueId": "13241226"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13241226/worklog/266291",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "liyafan82 commented on pull request #4674: ARROW-5707: [Java] Improve the performance and code structure for ArrowRecordBatch\nURL: https://github.com/apache/arrow/pull/4674#discussion_r296985742\n \n \n\n ##########\n File path: java/vector/src/main/java/org/apache/arrow/vector/ipc/message/ArrowRecordBatch.java\n ##########\n @@ -79,29 +79,13 @@ public ArrowRecordBatch(int length, List<ArrowFieldNode> nodes, List<ArrowBuf> b\n       arrowBuffers.add(new ArrowBuffer(offset, size));\n       LOGGER.debug(\"Buffer in RecordBatch at {}, length: {}\", offset, size);\n       offset += size;\n-      if (alignBuffers && offset % 8 != 0) { // align on 8 byte boundaries\n-        offset += 8 - (offset % 8);\n+      if (alignBuffers) { // align on 8 byte boundaries\n+        offset = (offset + 7) & 0xfffffffffffffff8L;\n       }\n     }\n     this.buffersLayout = Collections.unmodifiableList(arrowBuffers);\n   }\n \n-  // clone constructor\n-  private ArrowRecordBatch(boolean dummy, int length, List<ArrowFieldNode> nodes, List<ArrowBuf> buffers) {\n-    this.length = length;\n-    this.nodes = nodes;\n-    this.buffers = buffers;\n-    this.closed = false;\n-    List<ArrowBuffer> arrowBuffers = new ArrayList<>();\n-    long offset = 0;\n-    for (ArrowBuf arrowBuf : buffers) {\n-      long size = arrowBuf.readableBytes();\n \n Review comment:\n   Nice catch.\r\n   \r\n   This constructor is functionally different from the public constructors. That is why it is in the code. \r\n   I have restored this constructor and added comments for it.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-06-25T02:39:36.333+0000",
                    "updated": "2019-06-25T02:39:36.333+0000",
                    "started": "2019-06-25T02:39:36.331+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "266291",
                    "issueId": "13241226"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13241226/worklog/266306",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "codecov-io commented on issue #4674: ARROW-5707: [Java] Improve the performance and code structure for ArrowRecordBatch\nURL: https://github.com/apache/arrow/pull/4674#issuecomment-505018263\n \n \n   # [Codecov](https://codecov.io/gh/apache/arrow/pull/4674?src=pr&el=h1) Report\n   > Merging [#4674](https://codecov.io/gh/apache/arrow/pull/4674?src=pr&el=desc) into [master](https://codecov.io/gh/apache/arrow/commit/f180a53b4da5ed932ecb8aa1e56b961cba899e61?src=pr&el=desc) will **increase** coverage by `1.07%`.\n   > The diff coverage is `n/a`.\n   \n   [![Impacted file tree graph](https://codecov.io/gh/apache/arrow/pull/4674/graphs/tree.svg?width=650&token=LpTCFbqVT1&height=150&src=pr)](https://codecov.io/gh/apache/arrow/pull/4674?src=pr&el=tree)\n   \n   ```diff\n   @@            Coverage Diff             @@\n   ##           master    #4674      +/-   ##\n   ==========================================\n   + Coverage   88.41%   89.48%   +1.07%     \n   ==========================================\n     Files         905      658     -247     \n     Lines      112429    93960   -18469     \n     Branches     1420        0    -1420     \n   ==========================================\n   - Hits        99402    84079   -15323     \n   + Misses      12665     9881    -2784     \n   + Partials      362        0     -362\n   ```\n   \n   \n   | [Impacted Files](https://codecov.io/gh/apache/arrow/pull/4674?src=pr&el=tree) | Coverage \u0394 | |\n   |---|---|---|\n   | [cpp/src/gandiva/precompiled/string\\_ops.cc](https://codecov.io/gh/apache/arrow/pull/4674/diff?src=pr&el=tree#diff-Y3BwL3NyYy9nYW5kaXZhL3ByZWNvbXBpbGVkL3N0cmluZ19vcHMuY2M=) | `56.33% <0%> (-5.21%)` | :arrow_down: |\n   | [cpp/src/arrow/csv/converter.cc](https://codecov.io/gh/apache/arrow/pull/4674/diff?src=pr&el=tree#diff-Y3BwL3NyYy9hcnJvdy9jc3YvY29udmVydGVyLmNj) | `96.65% <0%> (-1.09%)` | :arrow_down: |\n   | [cpp/src/gandiva/tests/date\\_time\\_test.cc](https://codecov.io/gh/apache/arrow/pull/4674/diff?src=pr&el=tree#diff-Y3BwL3NyYy9nYW5kaXZhL3Rlc3RzL2RhdGVfdGltZV90ZXN0LmNj) | `98.97% <0%> (-1.03%)` | :arrow_down: |\n   | [cpp/src/plasma/thirdparty/ae/ae.c](https://codecov.io/gh/apache/arrow/pull/4674/diff?src=pr&el=tree#diff-Y3BwL3NyYy9wbGFzbWEvdGhpcmRwYXJ0eS9hZS9hZS5j) | `70.75% <0%> (-0.95%)` | :arrow_down: |\n   | [cpp/src/gandiva/function\\_registry\\_string.cc](https://codecov.io/gh/apache/arrow/pull/4674/diff?src=pr&el=tree#diff-Y3BwL3NyYy9nYW5kaXZhL2Z1bmN0aW9uX3JlZ2lzdHJ5X3N0cmluZy5jYw==) | `100% <0%> (\u00f8)` | :arrow_up: |\n   | [cpp/src/arrow/csv/converter-test.cc](https://codecov.io/gh/apache/arrow/pull/4674/diff?src=pr&el=tree#diff-Y3BwL3NyYy9hcnJvdy9jc3YvY29udmVydGVyLXRlc3QuY2M=) | `100% <0%> (\u00f8)` | :arrow_up: |\n   | [r/src/recordbatch.cpp](https://codecov.io/gh/apache/arrow/pull/4674/diff?src=pr&el=tree#diff-ci9zcmMvcmVjb3JkYmF0Y2guY3Bw) | | |\n   | [r/R/Table.R](https://codecov.io/gh/apache/arrow/pull/4674/diff?src=pr&el=tree#diff-ci9SL1RhYmxlLlI=) | | |\n   | [go/arrow/math/uint64\\_amd64.go](https://codecov.io/gh/apache/arrow/pull/4674/diff?src=pr&el=tree#diff-Z28vYXJyb3cvbWF0aC91aW50NjRfYW1kNjQuZ28=) | | |\n   | [r/src/symbols.cpp](https://codecov.io/gh/apache/arrow/pull/4674/diff?src=pr&el=tree#diff-ci9zcmMvc3ltYm9scy5jcHA=) | | |\n   | ... and [252 more](https://codecov.io/gh/apache/arrow/pull/4674/diff?src=pr&el=tree-more) | |\n   \n   ------\n   \n   [Continue to review full report at Codecov](https://codecov.io/gh/apache/arrow/pull/4674?src=pr&el=continue).\n   > **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n   > `\u0394 = absolute <relative> (impact)`, `\u00f8 = not affected`, `? = missing data`\n   > Powered by [Codecov](https://codecov.io/gh/apache/arrow/pull/4674?src=pr&el=footer). Last update [f180a53...8b5f1ec](https://codecov.io/gh/apache/arrow/pull/4674?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n   \n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-06-25T03:21:31.233+0000",
                    "updated": "2019-06-25T03:21:31.233+0000",
                    "started": "2019-06-25T03:21:31.232+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "266306",
                    "issueId": "13241226"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13241226/worklog/266340",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "emkornfield commented on issue #4674: ARROW-5707: [Java] Improve the performance and code structure for ArrowRecordBatch\nURL: https://github.com/apache/arrow/pull/4674#issuecomment-505290277\n \n \n   @liyafan82 is there a benchmark showing the performance improvement?\r\n   \r\n   In general, I think we should be careful of over-optimizing code that isn't on the hot path.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-06-25T05:35:06.161+0000",
                    "updated": "2019-06-25T05:35:06.161+0000",
                    "started": "2019-06-25T05:35:06.160+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "266340",
                    "issueId": "13241226"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13241226/worklog/266567",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "liyafan82 commented on issue #4674: ARROW-5707: [Java] Improve the performance and code structure for ArrowRecordBatch\nURL: https://github.com/apache/arrow/pull/4674#issuecomment-505405593\n \n \n   > @liyafan82 is there a benchmark showing the performance improvement?\r\n   > \r\n   > In general, I think we should be careful of over-optimizing code that isn't on the hot path.\r\n   \r\n   Sure. I totally agree with you that we should be careful not to over-optimize the code, especially for performance improves that harm code readability.\r\n   \r\n   According to our experience, ArrowRecordBatch is intensively used when doing serialization/deserialization. For example, in the shuffling phase of a distributed computing engine, in the upstream task, ArrowRecordBatch is used to convert vectors to byte streams while in the downstream task, ArrowRecordBatch is used to convert byte stream to vectors, so ArrowRecordBatches are frequently created and the computeBodyLength is frequently called. \r\n   \r\n   Therefore, ArrowRecordBatch is on the hot path in our scenario.\r\n   \r\n   Having said that, it should be noted that the performance improvement for this particular PR is insignificant:\r\n   \r\n   Before:\r\n   ArrowRecordBatchBenchmarks.createAndGetLength  avgt    5  355.399 \u00b1 16.183  ns/op\r\n   \r\n   After:\r\n   ArrowRecordBatchBenchmarks.createAndGetLength  avgt    5  352.506 \u00b1 14.307  ns/op\r\n   \r\n   This could possibly means:\r\n   1. The integer operations only account for a small part of the overall run time.\r\n   2. More improvements may be needed.\r\n   \r\n   \r\n   \r\n   \r\n   \n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-06-25T11:36:19.426+0000",
                    "updated": "2019-06-25T11:36:19.426+0000",
                    "started": "2019-06-25T11:36:19.426+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "266567",
                    "issueId": "13241226"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13241226/worklog/268242",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "emkornfield commented on pull request #4674: ARROW-5707: [Java] Improve the performance and code structure for ArrowRecordBatch\nURL: https://github.com/apache/arrow/pull/4674#discussion_r298010777\n \n \n\n ##########\n File path: java/vector/src/main/java/org/apache/arrow/vector/ipc/message/ArrowRecordBatch.java\n ##########\n @@ -79,14 +79,17 @@ public ArrowRecordBatch(int length, List<ArrowFieldNode> nodes, List<ArrowBuf> b\n       arrowBuffers.add(new ArrowBuffer(offset, size));\n       LOGGER.debug(\"Buffer in RecordBatch at {}, length: {}\", offset, size);\n       offset += size;\n-      if (alignBuffers && offset % 8 != 0) { // align on 8 byte boundaries\n-        offset += 8 - (offset % 8);\n+      if (alignBuffers) { // align on 8 byte boundaries\n+        offset = (offset + 7) & 0xfffffffffffffff8L;\n \n Review comment:\n   there are a few places where this code or similar occurs, can we find a centralized place to put it (same with code below).\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-06-27T05:27:12.720+0000",
                    "updated": "2019-06-27T05:27:12.720+0000",
                    "started": "2019-06-27T05:27:12.719+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "268242",
                    "issueId": "13241226"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13241226/worklog/268243",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "emkornfield commented on pull request #4674: ARROW-5707: [Java] Improve the performance and code structure for ArrowRecordBatch\nURL: https://github.com/apache/arrow/pull/4674#discussion_r298010777\n \n \n\n ##########\n File path: java/vector/src/main/java/org/apache/arrow/vector/ipc/message/ArrowRecordBatch.java\n ##########\n @@ -79,14 +79,17 @@ public ArrowRecordBatch(int length, List<ArrowFieldNode> nodes, List<ArrowBuf> b\n       arrowBuffers.add(new ArrowBuffer(offset, size));\n       LOGGER.debug(\"Buffer in RecordBatch at {}, length: {}\", offset, size);\n       offset += size;\n-      if (alignBuffers && offset % 8 != 0) { // align on 8 byte boundaries\n-        offset += 8 - (offset % 8);\n+      if (alignBuffers) { // align on 8 byte boundaries\n+        offset = (offset + 7) & 0xfffffffffffffff8L;\n \n Review comment:\n   I think there are a few places where this code or similar occurs, can we find a centralized place to put it (same with code below).\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-06-27T05:30:12.844+0000",
                    "updated": "2019-06-27T05:30:12.844+0000",
                    "started": "2019-06-27T05:30:12.843+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "268243",
                    "issueId": "13241226"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13241226/worklog/268248",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "emkornfield commented on pull request #4674: ARROW-5707: [Java] Improve the performance and code structure for ArrowRecordBatch\nURL: https://github.com/apache/arrow/pull/4674#discussion_r298011708\n \n \n\n ##########\n File path: java/vector/src/main/java/org/apache/arrow/vector/ipc/message/ArrowRecordBatch.java\n ##########\n @@ -79,14 +79,17 @@ public ArrowRecordBatch(int length, List<ArrowFieldNode> nodes, List<ArrowBuf> b\n       arrowBuffers.add(new ArrowBuffer(offset, size));\n \n Review comment:\n   if you are looking for a more substantial win, you might try passing in the initial capacity to arrowBuffers above.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-06-27T05:32:01.022+0000",
                    "updated": "2019-06-27T05:32:01.022+0000",
                    "started": "2019-06-27T05:32:01.021+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "268248",
                    "issueId": "13241226"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13241226/worklog/268249",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "emkornfield commented on issue #4674: ARROW-5707: [Java] Improve the performance and code structure for ArrowRecordBatch\nURL: https://github.com/apache/arrow/pull/4674#issuecomment-506196955\n \n \n   > The integer operations only account for a small part of the overall run time. More improvements may be needed.\r\n   I think this is the case which is why we should be careful.  Based on the variance it is not clear if this is actually repeatable (if you run the bencmark a second time do you see the same difference?)\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-06-27T05:33:18.855+0000",
                    "updated": "2019-06-27T05:33:18.855+0000",
                    "started": "2019-06-27T05:33:18.854+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "268249",
                    "issueId": "13241226"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13241226/worklog/268330",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "emkornfield commented on pull request #4674: ARROW-5707: [Java] Improve the performance and code structure for ArrowRecordBatch\nURL: https://github.com/apache/arrow/pull/4674#discussion_r298039478\n \n \n\n ##########\n File path: java/vector/src/main/java/org/apache/arrow/vector/ipc/message/ArrowRecordBatch.java\n ##########\n @@ -79,14 +79,17 @@ public ArrowRecordBatch(int length, List<ArrowFieldNode> nodes, List<ArrowBuf> b\n       arrowBuffers.add(new ArrowBuffer(offset, size));\n       LOGGER.debug(\"Buffer in RecordBatch at {}, length: {}\", offset, size);\n       offset += size;\n-      if (alignBuffers && offset % 8 != 0) { // align on 8 byte boundaries\n-        offset += 8 - (offset % 8);\n+      if (alignBuffers) { // align on 8 byte boundaries\n+        offset = (offset + 7) & 0xfffffffffffffff8L;\n \n Review comment:\n   Specifically:\r\n   vector/src//main/java/org/apache/arrow/vector/BaseValueVector.java:    return (valueCount + 7) >> 3;\r\n   vector/src//main/java/org/apache/arrow/vector/BaseValueVector.java:    return ((size + 7) / 8) * 8;\r\n   vector/src//main/java/org/apache/arrow/vector/BitVectorHelper.java:    return (valueCount + 7) >> 3;\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-06-27T07:24:29.280+0000",
                    "updated": "2019-06-27T07:24:29.280+0000",
                    "started": "2019-06-27T07:24:29.279+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "268330",
                    "issueId": "13241226"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13241226/worklog/268475",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "liyafan82 commented on pull request #4674: ARROW-5707: [Java] Improve the performance and code structure for ArrowRecordBatch\nURL: https://github.com/apache/arrow/pull/4674#discussion_r298140279\n \n \n\n ##########\n File path: java/vector/src/main/java/org/apache/arrow/vector/ipc/message/ArrowRecordBatch.java\n ##########\n @@ -79,14 +79,17 @@ public ArrowRecordBatch(int length, List<ArrowFieldNode> nodes, List<ArrowBuf> b\n       arrowBuffers.add(new ArrowBuffer(offset, size));\n       LOGGER.debug(\"Buffer in RecordBatch at {}, length: {}\", offset, size);\n       offset += size;\n-      if (alignBuffers && offset % 8 != 0) { // align on 8 byte boundaries\n-        offset += 8 - (offset % 8);\n+      if (alignBuffers) { // align on 8 byte boundaries\n+        offset = (offset + 7) & 0xfffffffffffffff8L;\n \n Review comment:\n   Good suggestion. I have opened a separate class to place such utilities. \n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-06-27T12:00:14.171+0000",
                    "updated": "2019-06-27T12:00:14.171+0000",
                    "started": "2019-06-27T12:00:14.170+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "268475",
                    "issueId": "13241226"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13241226/worklog/268476",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "liyafan82 commented on pull request #4674: ARROW-5707: [Java] Improve the performance and code structure for ArrowRecordBatch\nURL: https://github.com/apache/arrow/pull/4674#discussion_r298140412\n \n \n\n ##########\n File path: java/vector/src/main/java/org/apache/arrow/vector/ipc/message/ArrowRecordBatch.java\n ##########\n @@ -79,14 +79,17 @@ public ArrowRecordBatch(int length, List<ArrowFieldNode> nodes, List<ArrowBuf> b\n       arrowBuffers.add(new ArrowBuffer(offset, size));\n \n Review comment:\n   Thanks for the good suggestion. \n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-06-27T12:00:35.997+0000",
                    "updated": "2019-06-27T12:00:35.997+0000",
                    "started": "2019-06-27T12:00:35.997+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "268476",
                    "issueId": "13241226"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13241226/worklog/268477",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "liyafan82 commented on pull request #4674: ARROW-5707: [Java] Improve the performance and code structure for ArrowRecordBatch\nURL: https://github.com/apache/arrow/pull/4674#discussion_r298140412\n \n \n\n ##########\n File path: java/vector/src/main/java/org/apache/arrow/vector/ipc/message/ArrowRecordBatch.java\n ##########\n @@ -79,14 +79,17 @@ public ArrowRecordBatch(int length, List<ArrowFieldNode> nodes, List<ArrowBuf> b\n       arrowBuffers.add(new ArrowBuffer(offset, size));\n \n Review comment:\n   Thanks for the good suggestion. Revised accordingly.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-06-27T12:00:47.723+0000",
                    "updated": "2019-06-27T12:00:47.723+0000",
                    "started": "2019-06-27T12:00:47.723+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "268477",
                    "issueId": "13241226"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13241226/worklog/268483",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "liyafan82 commented on issue #4674: ARROW-5707: [Java] Improve the performance and code structure for ArrowRecordBatch\nURL: https://github.com/apache/arrow/pull/4674#issuecomment-506318383\n \n \n   > > The integer operations only account for a small part of the overall run time. More improvements may be needed.\r\n   > > I think this is the case which is why we should be careful.  Based on the variance it is not clear if this is actually repeatable (if you run the bencmark a second time do you see the same difference?)\r\n   \r\n   I agree with you that the insignificant improvements make the performance results unstable.\r\n   However, JIT analysis results show that the improvements are sure to win. \r\n   \r\n   For example, for the first improvement of ArrowRecordBatch, the two divisions are unavoidable (although they are optimized as two shift instructions).\r\n   \r\n   ![image](https://user-images.githubusercontent.com/42827532/60264795-acdcea00-9916-11e9-845c-15b96d20d47a.png)\r\n   \r\n   In contrast, our improved code has only one add instruction.\r\n   \r\n   For the second improvement of ArrowRecordBatch, the branch cannot be optimized away by the JIT:\r\n   \r\n   ![image](https://user-images.githubusercontent.com/42827532/60264926-f0cfef00-9916-11e9-98e9-71e8dd76cc05.png)\r\n   \r\n   In our improved code, the branch no longer exists. \r\n   \n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-06-27T12:06:32.909+0000",
                    "updated": "2019-06-27T12:06:32.909+0000",
                    "started": "2019-06-27T12:06:32.908+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "268483",
                    "issueId": "13241226"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13241226/worklog/268998",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "emkornfield commented on pull request #4674: ARROW-5707: [Java] Improve the performance and code structure for ArrowRecordBatch\nURL: https://github.com/apache/arrow/pull/4674#discussion_r298440747\n \n \n\n ##########\n File path: java/vector/src/main/java/org/apache/arrow/util/DataSizeRoundingUtil.java\n ##########\n @@ -0,0 +1,99 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.arrow.util;\n+\n+/**\n+ * Utilities for rounding data size.\n+ */\n+public class DataSizeRoundingUtil {\n \n Review comment:\n   make the class final?\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-06-28T03:21:15.050+0000",
                    "updated": "2019-06-28T03:21:15.050+0000",
                    "started": "2019-06-28T03:21:15.049+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "268998",
                    "issueId": "13241226"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
            "id": "4",
            "description": "An improvement or enhancement to an existing feature or task.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
            "name": "Improvement",
            "subtask": false,
            "avatarId": 21140
        },
        "timespent": 15600,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@261b6e3[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@5eec110c[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@5320a088[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@6dfabf91[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@5d507be[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@1724775d[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@4156b1d1[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@7968885d[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@54ad9839[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@6007936e[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@142b7e86[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@293c263e[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 15600,
        "customfield_12312520": null,
        "customfield_12312521": "Fri Jun 28 05:53:46 UTC 2019",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2019-06-28T05:53:46.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-5707/watchers",
            "watchCount": 1,
            "isWatching": false
        },
        "created": "2019-06-24T10:35:36.000+0000",
        "updated": "2019-06-28T05:53:46.000+0000",
        "timeoriginalestimate": null,
        "description": "Improve the performance of\u00a0ArrowRecordBatch by reducing the number of divisions.\r\n\r\nImprove the code structure of\u00a0ArrowRecordBatch by removing the useless constructor.",
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "4h 20m",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 15600
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[Java] Improve the performance and code structure for ArrowRecordBatch",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13241226/comment/16874696",
                    "id": "16874696",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=emkornfield%40gmail.com",
                        "name": "emkornfield@gmail.com",
                        "key": "emkornfield@gmail.com",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Micah Kornfield",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "Issue resolved by pull request 4674\n[https://github.com/apache/arrow/pull/4674]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=emkornfield%40gmail.com",
                        "name": "emkornfield@gmail.com",
                        "key": "emkornfield@gmail.com",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Micah Kornfield",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2019-06-28T05:53:46.779+0000",
                    "updated": "2019-06-28T05:53:46.779+0000"
                }
            ],
            "maxResults": 1,
            "total": 1,
            "startAt": 0
        },
        "customfield_12311820": "0|z041f4:",
        "customfield_12314139": null
    }
}