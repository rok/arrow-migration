{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13401085",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13401085",
    "key": "ARROW-13995",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12350323",
                "id": "12350323",
                "description": "",
                "name": "6.0.0",
                "archived": false,
                "released": true,
                "releaseDate": "2021-10-26"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
            "name": "Critical",
            "id": "2"
        },
        "labels": [
            "pull-request-available",
            "query-engine"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=npr",
            "name": "npr",
            "key": "npr",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
            },
            "displayName": "Neal Richardson",
            "active": true,
            "timeZone": "America/Los_Angeles"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12333008",
                "id": "12333008",
                "name": "R"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=npr",
            "name": "npr",
            "key": "npr",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
            },
            "displayName": "Neal Richardson",
            "active": true,
            "timeZone": "America/Los_Angeles"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=npr",
            "name": "npr",
            "key": "npr",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
            },
            "displayName": "Neal Richardson",
            "active": true,
            "timeZone": "America/Los_Angeles"
        },
        "aggregateprogress": {
            "progress": 4800,
            "total": 4800,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 4800,
            "total": 4800,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-13995/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 8,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13401085/worklog/650708",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nealrichardson opened a new pull request #11155:\nURL: https://github.com/apache/arrow/pull/11155\n\n\n   This is based on #11150. The R test currently sometimes segfaults inside the join wrapper:\r\n   \r\n   ```\r\n    *** caught segfault ***\r\n   address 0x17, cause 'invalid permissions'\r\n   \r\n   Traceback:\r\n    1: .Call(`_arrow_ExecNode_Join`, input, type, right_data, left_keys,     right_keys, left_output, right_output)\r\n   ```\r\n   \r\n   sometimes just hangs, and sometimes fails with a cryptic `vector` error message that seems to be coming from the R bindings. I have not successfully evaluated a join, but I have sometimes made a join node (I suspect the hanging comes from when I run the ExecPlan with the join)\r\n   \r\n   Among the issues observed, in addition to the behavior above:\r\n   \r\n   * Dictionary columns aren't allowed even in the left data, and you can't first `Project` to remove them--that still is rejected.\r\n   * Duplicate column names aren't allowed at all, even though there is a provision for deduping with a prefix\r\n   * This duplicate column restriction also applies to the join keys, which very much may have the same names and should (usually) not be duplicated in the result\r\n   * It appears that the join node does not expose an `output_schema()` like other nodes do--it's empty. This was causing Project after Join to fail (I hacked around that in R just to see if I could get it to run) and possibly could be related to other problems.\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-09-14T17:27:32.887+0000",
                    "updated": "2021-09-14T17:27:32.887+0000",
                    "started": "2021-09-14T17:27:32.887+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "650708",
                    "issueId": "13401085"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13401085/worklog/650709",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "github-actions[bot] commented on pull request #11155:\nURL: https://github.com/apache/arrow/pull/11155#issuecomment-919362405\n\n\n   <!--\n     Licensed to the Apache Software Foundation (ASF) under one\n     or more contributor license agreements.  See the NOTICE file\n     distributed with this work for additional information\n     regarding copyright ownership.  The ASF licenses this file\n     to you under the Apache License, Version 2.0 (the\n     \"License\"); you may not use this file except in compliance\n     with the License.  You may obtain a copy of the License at\n   \n       http://www.apache.org/licenses/LICENSE-2.0\n   \n     Unless required by applicable law or agreed to in writing,\n     software distributed under the License is distributed on an\n     \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n     KIND, either express or implied.  See the License for the\n     specific language governing permissions and limitations\n     under the License.\n   -->\n   \n   Thanks for opening a pull request!\n   \n   If this is not a [minor PR](https://github.com/apache/arrow/blob/master/CONTRIBUTING.md#Minor-Fixes). Could you open an issue for this pull request on JIRA? https://issues.apache.org/jira/browse/ARROW\n   \n   Opening JIRAs ahead of time contributes to the [Openness](http://theapacheway.com/open/#:~:text=Openness%20allows%20new%20users%20the,must%20happen%20in%20the%20open.) of the Apache Arrow project.\n   \n   Then could you also rename pull request title in the following format?\n   \n       ARROW-${JIRA_ID}: [${COMPONENT}] ${SUMMARY}\n   \n   or\n   \n       MINOR: [${COMPONENT}] ${SUMMARY}\n   \n   See also:\n   \n     * [Other pull requests](https://github.com/apache/arrow/pulls/)\n     * [Contribution Guidelines - How to contribute patches](https://arrow.apache.org/docs/developers/contributing.html#how-to-contribute-patches)\n   \n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-09-14T17:27:48.506+0000",
                    "updated": "2021-09-14T17:27:48.506+0000",
                    "started": "2021-09-14T17:27:48.506+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "650709",
                    "issueId": "13401085"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13401085/worklog/650769",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "github-actions[bot] removed a comment on pull request #11155:\nURL: https://github.com/apache/arrow/pull/11155#issuecomment-919362405\n\n\n   <!--\n     Licensed to the Apache Software Foundation (ASF) under one\n     or more contributor license agreements.  See the NOTICE file\n     distributed with this work for additional information\n     regarding copyright ownership.  The ASF licenses this file\n     to you under the Apache License, Version 2.0 (the\n     \"License\"); you may not use this file except in compliance\n     with the License.  You may obtain a copy of the License at\n   \n       http://www.apache.org/licenses/LICENSE-2.0\n   \n     Unless required by applicable law or agreed to in writing,\n     software distributed under the License is distributed on an\n     \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n     KIND, either express or implied.  See the License for the\n     specific language governing permissions and limitations\n     under the License.\n   -->\n   \n   Thanks for opening a pull request!\n   \n   If this is not a [minor PR](https://github.com/apache/arrow/blob/master/CONTRIBUTING.md#Minor-Fixes). Could you open an issue for this pull request on JIRA? https://issues.apache.org/jira/browse/ARROW\n   \n   Opening JIRAs ahead of time contributes to the [Openness](http://theapacheway.com/open/#:~:text=Openness%20allows%20new%20users%20the,must%20happen%20in%20the%20open.) of the Apache Arrow project.\n   \n   Then could you also rename pull request title in the following format?\n   \n       ARROW-${JIRA_ID}: [${COMPONENT}] ${SUMMARY}\n   \n   or\n   \n       MINOR: [${COMPONENT}] ${SUMMARY}\n   \n   See also:\n   \n     * [Other pull requests](https://github.com/apache/arrow/pulls/)\n     * [Contribution Guidelines - How to contribute patches](https://arrow.apache.org/docs/developers/contributing.html#how-to-contribute-patches)\n   \n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-09-14T19:54:00.353+0000",
                    "updated": "2021-09-14T19:54:00.353+0000",
                    "started": "2021-09-14T19:54:00.353+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "650769",
                    "issueId": "13401085"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13401085/worklog/653144",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "github-actions[bot] commented on pull request #11155:\nURL: https://github.com/apache/arrow/pull/11155#issuecomment-923185049\n\n\n   https://issues.apache.org/jira/browse/ARROW-13995\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-09-20T18:45:35.446+0000",
                    "updated": "2021-09-20T18:45:35.446+0000",
                    "started": "2021-09-20T18:45:35.446+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "653144",
                    "issueId": "13401085"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13401085/worklog/656895",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jonkeane commented on a change in pull request #11155:\nURL: https://github.com/apache/arrow/pull/11155#discussion_r717936771\n\n\n\n##########\nFile path: r/tests/testthat/test-dplyr-join.R\n##########\n@@ -0,0 +1,108 @@\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#   http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing,\n+# software distributed under the License is distributed on an\n+# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+# KIND, either express or implied.  See the License for the\n+# specific language governing permissions and limitations\n+# under the License.\n+\n+skip_if_not_available(\"dataset\")\n+\n+library(dplyr)\n+\n+left <- example_data\n+# Error: Invalid: Dictionary type support for join output field is not yet implemented, output field reference: FieldRef.Name(fct) on left side of the join\n+# (select(-fct) also solves this but remove once)\n+left$fct <- NULL\n+left$some_grouping <- rep(c(1, 2), 5)\n+\n+to_join <- tibble::tibble(\n+  some_grouping = c(1, 2),\n+  capital_letters = c(\"A\", \"B\"),\n+  another_column = TRUE\n+)\n+\n+test_that(\"left_join\", {\n+  expect_dplyr_equal(\n+    input %>%\n+      left_join(to_join) %>%\n+      collect(),\n+    left\n+  )\n+})\n+\n+test_that(\"left_join `by` args\", {\n+  expect_dplyr_equal(\n+    input %>%\n+      left_join(to_join, by = \"some_grouping\") %>%\n+      collect(),\n+    left\n+  )\n+  expect_dplyr_equal(\n+    input %>%\n+      left_join(\n+        to_join %>%\n+          rename(the_grouping = some_grouping),\n+        by = c(some_grouping = \"the_grouping\")\n+      ) %>%\n+      collect(),\n+    left\n+  )\n+})\n+\n+# TODO: test duplicate col names\n+# TODO: test invalid 'by'\n+\n+test_that(\"right_join\", {\n+  expect_dplyr_equal(\n+    input %>%\n+      right_join(to_join) %>%\n+      collect(),\n+    left\n+  )\n+})\n+\n+test_that(\"inner_join\", {\n+  expect_dplyr_equal(\n+    input %>%\n+      inner_join(to_join) %>%\n+      collect(),\n+    left\n+  )\n+})\n+\n+test_that(\"full_join\", {\n+  expect_dplyr_equal(\n+    input %>%\n+      full_join(to_join) %>%\n+      collect(),\n+    left\n+  )\n+})\n+\n+test_that(\"semi_join\", {\n+  expect_dplyr_equal(\n+    input %>%\n+      semi_join(to_join) %>%\n+      collect(),\n+    left\n+  )\n+})\n+\n+test_that(\"anti_join\", {\n+  expect_dplyr_equal(\n+    input %>%\n+      anti_join(to_join) %>%\n+      collect(),\n+    left\n+  )\n+})\n\nReview comment:\n       I can do this when I rebase, but should we have tests for the error handling as well (e.g. columns named but not in `x` or `y`, etc.)? \n\n##########\nFile path: r/R/dplyr-join.R\n##########\n@@ -0,0 +1,125 @@\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#   http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing,\n+# software distributed under the License is distributed on an\n+# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+# KIND, either express or implied.  See the License for the\n+# specific language governing permissions and limitations\n+# under the License.\n+\n+\n+# The following S3 methods are registered on load if dplyr is present\n+\n+do_join <- function(x,\n+                    y,\n+                    by = NULL,\n+                    copy = FALSE,\n+                    suffix = c(\".x\", \".y\"),\n+                    ...,\n+                    keep = FALSE,\n+                    na_matches,\n+                    join_type) {\n+  # TODO: handle `copy` arg: ignore?\n+  # TODO: handle `suffix` arg: Arrow does prefix\n+  # TODO: handle `keep` arg: \"Should the join keys from both \u2018x\u2019 and \u2018y\u2019 be preserved in the output?\"\n+  # TODO: handle `na_matches` arg\n+  x <- as_adq(x)\n+  y <- as_adq(y)\n+  by <- handle_join_by(by, x, y)\n+\n+  x$join <- list(\n+    type = JoinType[[join_type]],\n+    right_data = y,\n+    by = by\n+  )\n+  collapse.arrow_dplyr_query(x)\n+}\n+\n+left_join.arrow_dplyr_query <- function(x,\n+                                        y,\n+                                        by = NULL,\n+                                        copy = FALSE,\n+                                        suffix = c(\".x\", \".y\"),\n+                                        ...,\n+                                        keep = FALSE) {\n+  do_join(x, y, by, copy, suffix, ..., keep = keep, join_type = \"LEFT_OUTER\")\n+}\n+left_join.Dataset <- left_join.ArrowTabular <- left_join.arrow_dplyr_query\n+\n+right_join.arrow_dplyr_query <- function(x,\n+                                         y,\n+                                         by = NULL,\n+                                         copy = FALSE,\n+                                         suffix = c(\".x\", \".y\"),\n+                                         ...,\n+                                         keep = FALSE) {\n+  do_join(x, y, by, copy, suffix, ..., keep = keep, join_type = \"RIGHT_OUTER\")\n+}\n+right_join.Dataset <- right_join.ArrowTabular <- right_join.arrow_dplyr_query\n+\n+inner_join.arrow_dplyr_query <- function(x,\n+                                         y,\n+                                         by = NULL,\n+                                         copy = FALSE,\n+                                         suffix = c(\".x\", \".y\"),\n+                                         ...,\n+                                         keep = FALSE) {\n+  do_join(x, y, by, copy, suffix, ..., keep = keep, join_type = \"INNER\")\n+}\n+inner_join.Dataset <- inner_join.ArrowTabular <- inner_join.arrow_dplyr_query\n+\n+full_join.arrow_dplyr_query <- function(x,\n+                                        y,\n+                                        by = NULL,\n+                                        copy = FALSE,\n+                                        suffix = c(\".x\", \".y\"),\n+                                        ...,\n+                                        keep = FALSE) {\n+  do_join(x, y, by, copy, suffix, ..., keep = keep, join_type = \"FULL_OUTER\")\n+}\n+full_join.Dataset <- full_join.ArrowTabular <- full_join.arrow_dplyr_query\n+\n+semi_join.arrow_dplyr_query <- function(x,\n+                                        y,\n+                                        by = NULL,\n+                                        copy = FALSE,\n+                                        suffix = c(\".x\", \".y\"),\n+                                        ...,\n+                                        keep = FALSE) {\n+  do_join(x, y, by, copy, suffix, ..., keep = keep, join_type = \"LEFT_SEMI\")\n+}\n+semi_join.Dataset <- semi_join.ArrowTabular <- semi_join.arrow_dplyr_query\n+\n+anti_join.arrow_dplyr_query <- function(x,\n+                                        y,\n+                                        by = NULL,\n+                                        copy = FALSE,\n+                                        suffix = c(\".x\", \".y\"),\n+                                        ...,\n+                                        keep = FALSE) {\n+  do_join(x, y, by, copy, suffix, ..., keep = keep, join_type = \"LEFT_ANTI\")\n+}\n+anti_join.Dataset <- anti_join.ArrowTabular <- anti_join.arrow_dplyr_query\n+\n+handle_join_by <- function(by, x, y) {\n+  if (is.null(by)) {\n+    return(set_names(intersect(names(x), names(y))))\n+  }\n+  stopifnot(is.character(by))\n\nReview comment:\n       This is not a comment on this code, but it never occurred to me that it's a bit funny that `by` isn't tidy-evaled and must be character strings (in dplyr!) \n\n##########\nFile path: r/tests/testthat/test-dplyr-join.R\n##########\n@@ -0,0 +1,108 @@\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#   http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing,\n+# software distributed under the License is distributed on an\n+# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+# KIND, either express or implied.  See the License for the\n+# specific language governing permissions and limitations\n+# under the License.\n+\n+skip_if_not_available(\"dataset\")\n+\n+library(dplyr)\n+\n+left <- example_data\n+# Error: Invalid: Dictionary type support for join output field is not yet implemented, output field reference: FieldRef.Name(fct) on left side of the join\n\nReview comment:\n       ```suggestion\r\n   # Error: Invalid: Dictionary type support for join output field\r\n   # is not yet implemented, output field reference: FieldRef.Name(fct)\r\n   # on left side of the join\r\n   ```\n\n##########\nFile path: r/tests/testthat/test-dplyr-join.R\n##########\n@@ -0,0 +1,108 @@\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#   http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing,\n+# software distributed under the License is distributed on an\n+# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+# KIND, either express or implied.  See the License for the\n+# specific language governing permissions and limitations\n+# under the License.\n+\n+skip_if_not_available(\"dataset\")\n+\n+library(dplyr)\n+\n+left <- example_data\n+# Error: Invalid: Dictionary type support for join output field is not yet implemented, output field reference: FieldRef.Name(fct) on left side of the join\n+# (select(-fct) also solves this but remove once)\n+left$fct <- NULL\n+left$some_grouping <- rep(c(1, 2), 5)\n+\n+to_join <- tibble::tibble(\n+  some_grouping = c(1, 2),\n+  capital_letters = c(\"A\", \"B\"),\n+  another_column = TRUE\n+)\n+\n+test_that(\"left_join\", {\n+  expect_dplyr_equal(\n+    input %>%\n+      left_join(to_join) %>%\n+      collect(),\n+    left\n+  )\n+})\n+\n+test_that(\"left_join `by` args\", {\n+  expect_dplyr_equal(\n+    input %>%\n+      left_join(to_join, by = \"some_grouping\") %>%\n+      collect(),\n+    left\n+  )\n+  expect_dplyr_equal(\n+    input %>%\n+      left_join(\n+        to_join %>%\n+          rename(the_grouping = some_grouping),\n+        by = c(some_grouping = \"the_grouping\")\n+      ) %>%\n+      collect(),\n\nReview comment:\n       ```suggestion\r\n       input %>%\r\n         rename(the_grouping = some_grouping) %>%\r\n         left_join(\r\n           to_join\r\n           by = c(the_grouping = \"some_grouping\")\r\n         ) %>%\r\n         collect(),\r\n   ```\r\n   \r\n   This reads slightly easier to me, unless you were also intending to test the execution order of having a pipeline as the `y` argument of the join?\n\n##########\nFile path: r/R/dplyr-join.R\n##########\n@@ -0,0 +1,125 @@\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#   http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing,\n+# software distributed under the License is distributed on an\n+# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+# KIND, either express or implied.  See the License for the\n+# specific language governing permissions and limitations\n+# under the License.\n+\n+\n+# The following S3 methods are registered on load if dplyr is present\n+\n+do_join <- function(x,\n+                    y,\n+                    by = NULL,\n+                    copy = FALSE,\n+                    suffix = c(\".x\", \".y\"),\n+                    ...,\n+                    keep = FALSE,\n+                    na_matches,\n+                    join_type) {\n+  # TODO: handle `copy` arg: ignore?\n+  # TODO: handle `suffix` arg: Arrow does prefix\n+  # TODO: handle `keep` arg: \"Should the join keys from both \u2018x\u2019 and \u2018y\u2019 be preserved in the output?\"\n+  # TODO: handle `na_matches` arg\n+  x <- as_adq(x)\n+  y <- as_adq(y)\n+  by <- handle_join_by(by, x, y)\n+\n+  x$join <- list(\n+    type = JoinType[[join_type]],\n+    right_data = y,\n+    by = by\n+  )\n+  collapse.arrow_dplyr_query(x)\n+}\n+\n+left_join.arrow_dplyr_query <- function(x,\n+                                        y,\n+                                        by = NULL,\n+                                        copy = FALSE,\n+                                        suffix = c(\".x\", \".y\"),\n+                                        ...,\n+                                        keep = FALSE) {\n+  do_join(x, y, by, copy, suffix, ..., keep = keep, join_type = \"LEFT_OUTER\")\n+}\n+left_join.Dataset <- left_join.ArrowTabular <- left_join.arrow_dplyr_query\n+\n+right_join.arrow_dplyr_query <- function(x,\n+                                         y,\n+                                         by = NULL,\n+                                         copy = FALSE,\n+                                         suffix = c(\".x\", \".y\"),\n+                                         ...,\n+                                         keep = FALSE) {\n+  do_join(x, y, by, copy, suffix, ..., keep = keep, join_type = \"RIGHT_OUTER\")\n+}\n+right_join.Dataset <- right_join.ArrowTabular <- right_join.arrow_dplyr_query\n+\n+inner_join.arrow_dplyr_query <- function(x,\n+                                         y,\n+                                         by = NULL,\n+                                         copy = FALSE,\n+                                         suffix = c(\".x\", \".y\"),\n+                                         ...,\n+                                         keep = FALSE) {\n+  do_join(x, y, by, copy, suffix, ..., keep = keep, join_type = \"INNER\")\n+}\n+inner_join.Dataset <- inner_join.ArrowTabular <- inner_join.arrow_dplyr_query\n+\n+full_join.arrow_dplyr_query <- function(x,\n+                                        y,\n+                                        by = NULL,\n+                                        copy = FALSE,\n+                                        suffix = c(\".x\", \".y\"),\n+                                        ...,\n+                                        keep = FALSE) {\n+  do_join(x, y, by, copy, suffix, ..., keep = keep, join_type = \"FULL_OUTER\")\n+}\n+full_join.Dataset <- full_join.ArrowTabular <- full_join.arrow_dplyr_query\n+\n+semi_join.arrow_dplyr_query <- function(x,\n+                                        y,\n+                                        by = NULL,\n+                                        copy = FALSE,\n+                                        suffix = c(\".x\", \".y\"),\n+                                        ...,\n+                                        keep = FALSE) {\n+  do_join(x, y, by, copy, suffix, ..., keep = keep, join_type = \"LEFT_SEMI\")\n+}\n+semi_join.Dataset <- semi_join.ArrowTabular <- semi_join.arrow_dplyr_query\n+\n+anti_join.arrow_dplyr_query <- function(x,\n+                                        y,\n+                                        by = NULL,\n+                                        copy = FALSE,\n+                                        suffix = c(\".x\", \".y\"),\n+                                        ...,\n+                                        keep = FALSE) {\n+  do_join(x, y, by, copy, suffix, ..., keep = keep, join_type = \"LEFT_ANTI\")\n+}\n+anti_join.Dataset <- anti_join.ArrowTabular <- anti_join.arrow_dplyr_query\n+\n+handle_join_by <- function(by, x, y) {\n+  if (is.null(by)) {\n+    return(set_names(intersect(names(x), names(y))))\n+  }\n+  stopifnot(is.character(by))\n\nReview comment:\n       It makes sense for the `by = c(col_x = \"col_y\")` interface, but a bit(?) odd for `by = \"col\"` case\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-09-28T20:28:44.587+0000",
                    "updated": "2021-09-28T20:28:44.587+0000",
                    "started": "2021-09-28T20:28:44.587+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "656895",
                    "issueId": "13401085"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13401085/worklog/657210",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nealrichardson commented on a change in pull request #11155:\nURL: https://github.com/apache/arrow/pull/11155#discussion_r718487835\n\n\n\n##########\nFile path: r/tests/testthat/test-dplyr-join.R\n##########\n@@ -0,0 +1,108 @@\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#   http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing,\n+# software distributed under the License is distributed on an\n+# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+# KIND, either express or implied.  See the License for the\n+# specific language governing permissions and limitations\n+# under the License.\n+\n+skip_if_not_available(\"dataset\")\n+\n+library(dplyr)\n+\n+left <- example_data\n+# Error: Invalid: Dictionary type support for join output field is not yet implemented, output field reference: FieldRef.Name(fct) on left side of the join\n+# (select(-fct) also solves this but remove once)\n+left$fct <- NULL\n+left$some_grouping <- rep(c(1, 2), 5)\n+\n+to_join <- tibble::tibble(\n+  some_grouping = c(1, 2),\n+  capital_letters = c(\"A\", \"B\"),\n+  another_column = TRUE\n+)\n+\n+test_that(\"left_join\", {\n+  expect_dplyr_equal(\n+    input %>%\n+      left_join(to_join) %>%\n+      collect(),\n+    left\n+  )\n+})\n+\n+test_that(\"left_join `by` args\", {\n+  expect_dplyr_equal(\n+    input %>%\n+      left_join(to_join, by = \"some_grouping\") %>%\n+      collect(),\n+    left\n+  )\n+  expect_dplyr_equal(\n+    input %>%\n+      left_join(\n+        to_join %>%\n+          rename(the_grouping = some_grouping),\n+        by = c(some_grouping = \"the_grouping\")\n+      ) %>%\n+      collect(),\n+    left\n+  )\n+})\n+\n+# TODO: test duplicate col names\n+# TODO: test invalid 'by'\n+\n+test_that(\"right_join\", {\n+  expect_dplyr_equal(\n+    input %>%\n+      right_join(to_join) %>%\n+      collect(),\n+    left\n+  )\n+})\n+\n+test_that(\"inner_join\", {\n+  expect_dplyr_equal(\n+    input %>%\n+      inner_join(to_join) %>%\n+      collect(),\n+    left\n+  )\n+})\n+\n+test_that(\"full_join\", {\n+  expect_dplyr_equal(\n+    input %>%\n+      full_join(to_join) %>%\n+      collect(),\n+    left\n+  )\n+})\n+\n+test_that(\"semi_join\", {\n+  expect_dplyr_equal(\n+    input %>%\n+      semi_join(to_join) %>%\n+      collect(),\n+    left\n+  )\n+})\n+\n+test_that(\"anti_join\", {\n+  expect_dplyr_equal(\n+    input %>%\n+      anti_join(to_join) %>%\n+      collect(),\n+    left\n+  )\n+})\n\nReview comment:\n       Oh yeah, there are lots of missing tests, and these datasets aren't ideal for testing joins. We may want to just use the datasets that dplyr uses in its tests or something.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-09-29T13:01:51.815+0000",
                    "updated": "2021-09-29T13:01:51.815+0000",
                    "started": "2021-09-29T13:01:51.815+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "657210",
                    "issueId": "13401085"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13401085/worklog/658011",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nealrichardson commented on a change in pull request #11155:\nURL: https://github.com/apache/arrow/pull/11155#discussion_r718487835\n\n\n\n##########\nFile path: r/tests/testthat/test-dplyr-join.R\n##########\n@@ -0,0 +1,108 @@\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#   http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing,\n+# software distributed under the License is distributed on an\n+# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+# KIND, either express or implied.  See the License for the\n+# specific language governing permissions and limitations\n+# under the License.\n+\n+skip_if_not_available(\"dataset\")\n+\n+library(dplyr)\n+\n+left <- example_data\n+# Error: Invalid: Dictionary type support for join output field is not yet implemented, output field reference: FieldRef.Name(fct) on left side of the join\n+# (select(-fct) also solves this but remove once)\n+left$fct <- NULL\n+left$some_grouping <- rep(c(1, 2), 5)\n+\n+to_join <- tibble::tibble(\n+  some_grouping = c(1, 2),\n+  capital_letters = c(\"A\", \"B\"),\n+  another_column = TRUE\n+)\n+\n+test_that(\"left_join\", {\n+  expect_dplyr_equal(\n+    input %>%\n+      left_join(to_join) %>%\n+      collect(),\n+    left\n+  )\n+})\n+\n+test_that(\"left_join `by` args\", {\n+  expect_dplyr_equal(\n+    input %>%\n+      left_join(to_join, by = \"some_grouping\") %>%\n+      collect(),\n+    left\n+  )\n+  expect_dplyr_equal(\n+    input %>%\n+      left_join(\n+        to_join %>%\n+          rename(the_grouping = some_grouping),\n+        by = c(some_grouping = \"the_grouping\")\n+      ) %>%\n+      collect(),\n+    left\n+  )\n+})\n+\n+# TODO: test duplicate col names\n+# TODO: test invalid 'by'\n+\n+test_that(\"right_join\", {\n+  expect_dplyr_equal(\n+    input %>%\n+      right_join(to_join) %>%\n+      collect(),\n+    left\n+  )\n+})\n+\n+test_that(\"inner_join\", {\n+  expect_dplyr_equal(\n+    input %>%\n+      inner_join(to_join) %>%\n+      collect(),\n+    left\n+  )\n+})\n+\n+test_that(\"full_join\", {\n+  expect_dplyr_equal(\n+    input %>%\n+      full_join(to_join) %>%\n+      collect(),\n+    left\n+  )\n+})\n+\n+test_that(\"semi_join\", {\n+  expect_dplyr_equal(\n+    input %>%\n+      semi_join(to_join) %>%\n+      collect(),\n+    left\n+  )\n+})\n+\n+test_that(\"anti_join\", {\n+  expect_dplyr_equal(\n+    input %>%\n+      anti_join(to_join) %>%\n+      collect(),\n+    left\n+  )\n+})\n\nReview comment:\n       Oh yeah, there are lots of missing tests, and these datasets aren't ideal for testing joins. We may want to just use the datasets that dplyr uses in its tests or something.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-09-30T00:45:27.833+0000",
                    "updated": "2021-09-30T00:45:27.833+0000",
                    "started": "2021-09-30T00:45:27.832+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "658011",
                    "issueId": "13401085"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13401085/worklog/658584",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jonkeane closed pull request #11155:\nURL: https://github.com/apache/arrow/pull/11155\n\n\n   \n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-09-30T20:07:11.927+0000",
                    "updated": "2021-09-30T20:07:11.927+0000",
                    "started": "2021-09-30T20:07:11.927+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "658584",
                    "issueId": "13401085"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
            "id": "4",
            "description": "An improvement or enhancement to an existing feature or task.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
            "name": "Improvement",
            "subtask": false,
            "avatarId": 21140
        },
        "timespent": 4800,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@4df707ca[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@5198a923[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@7a6963e0[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@6e2c1c3f[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@59260afa[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@79b7748d[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@48707e38[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@46b35eed[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@2f2bfd1b[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@6d7ae76f[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@2630c546[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@7aa8b35b[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 4800,
        "customfield_12312520": null,
        "customfield_12312521": "Thu Sep 30 20:08:29 UTC 2021",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2021-09-30T20:08:29.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-13995/watchers",
            "watchCount": 1,
            "isWatching": false
        },
        "created": "2021-09-14T17:20:31.000+0000",
        "updated": "2021-09-30T20:08:29.000+0000",
        "timeoriginalestimate": null,
        "description": null,
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "1h 20m",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 4800
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[R] Bindings for join node",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13401085/comment/17422997",
                    "id": "17422997",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=jonkeane",
                        "name": "jonkeane",
                        "key": "jonkeane",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34057",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34057",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34057",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34057"
                        },
                        "displayName": "Jonathan Keane",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "Issue resolved by pull request 11155\n[https://github.com/apache/arrow/pull/11155]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=jonkeane",
                        "name": "jonkeane",
                        "key": "jonkeane",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34057",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34057",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34057",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34057"
                        },
                        "displayName": "Jonathan Keane",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2021-09-30T20:08:29.771+0000",
                    "updated": "2021-09-30T20:08:29.771+0000"
                }
            ],
            "maxResults": 1,
            "total": 1,
            "startAt": 0
        },
        "customfield_12311820": "0|z0uwow:",
        "customfield_12314139": null
    }
}