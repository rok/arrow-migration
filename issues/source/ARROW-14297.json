{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13406157",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13406157",
    "key": "ARROW-14297",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12350591",
                "id": "12350591",
                "description": "",
                "name": "7.0.0",
                "archived": false,
                "released": true,
                "releaseDate": "2022-02-03"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "name": "Major",
            "id": "3"
        },
        "labels": [
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=paleolimbot",
            "name": "paleolimbot",
            "key": "paleolimbot",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=paleolimbot&avatarId=47795",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=paleolimbot&avatarId=47795",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=paleolimbot&avatarId=47795",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=paleolimbot&avatarId=47795"
            },
            "displayName": "Dewey Dunnington",
            "active": true,
            "timeZone": "America/Halifax"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12333008",
                "id": "12333008",
                "name": "R"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=dragosmg",
            "name": "dragosmg",
            "key": "dragosmg",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34061",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34061",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34061",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34061"
            },
            "displayName": "Drago\u0219 Moldovan-Gr\u00fcnfeld",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=dragosmg",
            "name": "dragosmg",
            "key": "dragosmg",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34061",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34061",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34061",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34061"
            },
            "displayName": "Drago\u0219 Moldovan-Gr\u00fcnfeld",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "aggregateprogress": {
            "progress": 10200,
            "total": 10200,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 10200,
            "total": 10200,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-14297/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 17,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13406157/worklog/679081",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "paleolimbot opened a new pull request #11652:\nURL: https://github.com/apache/arrow/pull/11652\n\n\n   This PR updates the floor division dplyr translation to better respect the input types (as determined by how this would be done in R). The main change is the output type: `integer_type_1 %/% integer_type_2` will now have the same type as `integer_type_1` and everything else has the same type as `floor(arg1 / arg2)`. As a side effect, floor division by zero is `Inf` rather than the maximum integer value (unless you try to floor divide by `0L`...see below). A few things that need some hashing out:\r\n   \r\n   - Floor division by `0L` results in the max integer value rather than `NA`. This is, I think, because it's how cast (even with `safe = TRUE`) to integer from `Inf`. That is perhaps a different issue than this one?\r\n   - There's [some tests for floor division for arrays outside a dplyr verb](https://github.com/apache/arrow/blob/master/r/tests/testthat/test-compute-arith.R#L64-L94) that appear to be using a [completely different translation logic](https://github.com/apache/arrow/blob/master/r/R/compute.R). I didn't update those tests or that logic because it seemed like a different issue to me (maybe needs to implement the Math and/or Ops group generics or more S3 methods for the array class?).\r\n   \r\n   Reprex before this PR:\r\n   \r\n   <details>\r\n   \r\n   ``` r\r\n   # remotes::install_github(\"apache/arrow/r\")\r\n   library(arrow, warn.conflicts = FALSE)\r\n   library(dplyr, warn.conflicts = FALSE)\r\n   \r\n   tbl <- tibble::tibble(\r\n     integers = c(1:4, NA_integer_),\r\n     doubles = c(as.numeric(1:4), NA_real_)\r\n   )\r\n   \r\n   tbl %>% \r\n     mutate(\r\n       int_div_dbl = integers %/% 2,\r\n       int_div_int = integers %/% 2L,\r\n       int_div_zero_int = integers %/% 0L,\r\n       int_div_zero_dbl = integers %/% 0,\r\n       dbl_div_dbl = doubles %/% 2,\r\n       dbl_div_int = doubles %/% 2L,\r\n       dbl_div_zero_int = doubles %/% 0L,\r\n       dbl_div_zero_dbl = doubles %/% 0\r\n     ) %>% \r\n     glimpse()\r\n   #> Rows: 5\r\n   #> Columns: 10\r\n   #> $ integers         <int> 1, 2, 3, 4, NA\r\n   #> $ doubles          <dbl> 1, 2, 3, 4, NA\r\n   #> $ int_div_dbl      <dbl> 0, 1, 1, 2, NA\r\n   #> $ int_div_int      <int> 0, 1, 1, 2, NA\r\n   #> $ int_div_zero_int <int> NA, NA, NA, NA, NA\r\n   #> $ int_div_zero_dbl <dbl> Inf, Inf, Inf, Inf, NA\r\n   #> $ dbl_div_dbl      <dbl> 0, 1, 1, 2, NA\r\n   #> $ dbl_div_int      <dbl> 0, 1, 1, 2, NA\r\n   #> $ dbl_div_zero_int <dbl> Inf, Inf, Inf, Inf, NA\r\n   #> $ dbl_div_zero_dbl <dbl> Inf, Inf, Inf, Inf, NA\r\n   \r\n   RecordBatch$create(!!! tbl) %>% \r\n     mutate(\r\n       int_div_dbl = integers %/% 2,\r\n       int_div_int = integers %/% 2L,\r\n       int_div_zero_int = integers %/% 0L,\r\n       int_div_zero_dbl = integers %/% 0,\r\n       dbl_div_dbl = doubles %/% 2,\r\n       dbl_div_int = doubles %/% 2L,\r\n       dbl_div_zero_int = doubles %/% 0L,\r\n       dbl_div_zero_dbl = doubles %/% 0,\r\n     ) %>% \r\n     collect() %>% \r\n     glimpse()\r\n   #> Rows: 5\r\n   #> Columns: 10\r\n   #> $ integers         <int> 1, 2, 3, 4, NA\r\n   #> $ doubles          <dbl> 1, 2, 3, 4, NA\r\n   #> $ int_div_dbl      <int> 0, 1, 1, 2, NA\r\n   #> $ int_div_int      <int> 0, 1, 1, 2, NA\r\n   #> $ int_div_zero_int <int> 2147483647, 2147483647, 2147483647, 2147483647, NA\r\n   #> $ int_div_zero_dbl <int> 2147483647, 2147483647, 2147483647, 2147483647, NA\r\n   #> $ dbl_div_dbl      <int> 0, 1, 1, 2, NA\r\n   #> $ dbl_div_int      <int> 0, 1, 1, 2, NA\r\n   #> $ dbl_div_zero_int <int> 2147483647, 2147483647, 2147483647, 2147483647, NA\r\n   #> $ dbl_div_zero_dbl <int> 2147483647, 2147483647, 2147483647, 2147483647, NA\r\n   ```\r\n   \r\n   <sup>Created on 2021-11-09 by the [reprex package](https://reprex.tidyverse.org) (v2.0.1)</sup>\r\n   \r\n   </details>\r\n   \r\n   Reprex after this PR:\r\n   \r\n   <details>\r\n   \r\n   ``` r\r\n   # remotes::install_github(\"paleolimbot/arrow/r@r-floor-div\")\r\n   library(arrow, warn.conflicts = FALSE)\r\n   library(dplyr, warn.conflicts = FALSE)\r\n   \r\n   tbl <- tibble::tibble(\r\n     integers = c(1:4, NA_integer_),\r\n     doubles = c(as.numeric(1:4), NA_real_)\r\n   )\r\n   \r\n   tbl %>% \r\n     mutate(\r\n       int_div_dbl = integers %/% 2,\r\n       int_div_int = integers %/% 2L,\r\n       int_div_zero_int = integers %/% 0L,\r\n       int_div_zero_dbl = integers %/% 0,\r\n       dbl_div_dbl = doubles %/% 2,\r\n       dbl_div_int = doubles %/% 2L,\r\n       dbl_div_zero_int = doubles %/% 0L,\r\n       dbl_div_zero_dbl = doubles %/% 0\r\n     ) %>% \r\n     glimpse()\r\n   #> Rows: 5\r\n   #> Columns: 10\r\n   #> $ integers         <int> 1, 2, 3, 4, NA\r\n   #> $ doubles          <dbl> 1, 2, 3, 4, NA\r\n   #> $ int_div_dbl      <dbl> 0, 1, 1, 2, NA\r\n   #> $ int_div_int      <int> 0, 1, 1, 2, NA\r\n   #> $ int_div_zero_int <int> NA, NA, NA, NA, NA\r\n   #> $ int_div_zero_dbl <dbl> Inf, Inf, Inf, Inf, NA\r\n   #> $ dbl_div_dbl      <dbl> 0, 1, 1, 2, NA\r\n   #> $ dbl_div_int      <dbl> 0, 1, 1, 2, NA\r\n   #> $ dbl_div_zero_int <dbl> Inf, Inf, Inf, Inf, NA\r\n   #> $ dbl_div_zero_dbl <dbl> Inf, Inf, Inf, Inf, NA\r\n   \r\n   RecordBatch$create(!!! tbl) %>% \r\n     mutate(\r\n       int_div_dbl = integers %/% 2,\r\n       int_div_int = integers %/% 2L,\r\n       int_div_zero_int = integers %/% 0L,\r\n       int_div_zero_dbl = integers %/% 0,\r\n       dbl_div_dbl = doubles %/% 2,\r\n       dbl_div_int = doubles %/% 2L,\r\n       dbl_div_zero_int = doubles %/% 0L,\r\n       dbl_div_zero_dbl = doubles %/% 0,\r\n     ) %>% \r\n     collect() %>% \r\n     glimpse()\r\n   #> Rows: 5\r\n   #> Columns: 10\r\n   #> $ integers         <int> 1, 2, 3, 4, NA\r\n   #> $ doubles          <dbl> 1, 2, 3, 4, NA\r\n   #> $ int_div_dbl      <dbl> 0, 1, 1, 2, NA\r\n   #> $ int_div_int      <int> 0, 1, 1, 2, NA\r\n   #> $ int_div_zero_int <int> 2147483647, 2147483647, 2147483647, 2147483647, NA\r\n   #> $ int_div_zero_dbl <dbl> Inf, Inf, Inf, Inf, NA\r\n   #> $ dbl_div_dbl      <dbl> 0, 1, 1, 2, NA\r\n   #> $ dbl_div_int      <dbl> 0, 1, 1, 2, NA\r\n   #> $ dbl_div_zero_int <dbl> Inf, Inf, Inf, Inf, NA\r\n   #> $ dbl_div_zero_dbl <dbl> Inf, Inf, Inf, Inf, NA\r\n   ```\r\n   \r\n   <sup>Created on 2021-11-09 by the [reprex package](https://reprex.tidyverse.org) (v2.0.1)</sup>\r\n   \r\n   </details>\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-11-09T14:38:35.583+0000",
                    "updated": "2021-11-09T14:38:35.583+0000",
                    "started": "2021-11-09T14:38:35.583+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "679081",
                    "issueId": "13406157"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13406157/worklog/679082",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "github-actions[bot] commented on pull request #11652:\nURL: https://github.com/apache/arrow/pull/11652#issuecomment-964212037\n\n\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-11-09T14:38:58.739+0000",
                    "updated": "2021-11-09T14:38:58.739+0000",
                    "started": "2021-11-09T14:38:58.739+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "679082",
                    "issueId": "13406157"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13406157/worklog/679368",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jonkeane commented on pull request #11652:\nURL: https://github.com/apache/arrow/pull/11652#issuecomment-964615083\n\n\n   > Floor division by 0L results in the max integer value rather than NA. This is, I think, because it's how cast (even with safe = TRUE) to integer from Inf. That is perhaps a different issue than this one?\r\n   \r\n   Yes, this sounds like a different issue \u2014 we should see if there's a Jira for this already in C++ or make one \u2014 we might not be able to solve this in a way that totally lines up with R, but this is certainly an improvement!\r\n   \r\n   > There's some tests for floor division for arrays outside a dplyr verb that appear to be using a completely different translation logic. I didn't update those tests or that logic because it seemed like a different issue to me (maybe needs to implement the Math and/or Ops group generics or more S3 methods for the array class?).\r\n   \r\n   There's not a (good) reason that these two logics are different. If we can find a way to unify them that would be great (though we can also defer that unification if we want). Though it would be totally fine to copy/paste the implementation (and change the tests) here too. For a bit of context: I don't think many people are using Math/Ops on arrays (as opposed to using our dplyr bindings), though IIRC these arithmetic functions were implemented for Arrays before we had dplyr mutate/transmute so they helped us flesh out some of the oddities in C++ compute, and no real reason to take them away now.\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-11-09T22:47:16.040+0000",
                    "updated": "2021-11-09T22:47:16.040+0000",
                    "started": "2021-11-09T22:47:16.040+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "679368",
                    "issueId": "13406157"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13406157/worklog/679946",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jonkeane commented on a change in pull request #11652:\nURL: https://github.com/apache/arrow/pull/11652#discussion_r746991379\n\n\n\n##########\nFile path: r/R/arrow-datum.R\n##########\n@@ -102,8 +102,18 @@ eval_array_expression <- function(FUN,\n     args <- map(args, ~ .$cast(float64()))\n   } else if (FUN == \"%/%\") {\n     # In R, integer division works like floor(float division)\n-    out <- eval_array_expression(\"/\", args = args, options = options)\n-    return(out$cast(int32(), allow_float_truncate = TRUE))\n+    out <- eval_array_expression(\"/\", args = args)\n+\n+    # integer output only for all integer input\n+    int_type_ids <- Type[toupper(INTEGER_TYPES)]\n+    numerator_is_int <- args[[1]]$type_id() %in% int_type_ids\n+    denominator_is_int <- args[[2]]$type_id() %in% int_type_ids\n\nReview comment:\n       Is it possible to use `nse_funcs$is.integer(args[[1]])` here? It's a bit odd to use it directly out of `nse_funcs` but we have the same pattern a few places.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-11-10T21:21:06.950+0000",
                    "updated": "2021-11-10T21:21:06.950+0000",
                    "started": "2021-11-10T21:21:06.950+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "679946",
                    "issueId": "13406157"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13406157/worklog/680780",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "paleolimbot commented on pull request #11652:\nURL: https://github.com/apache/arrow/pull/11652#issuecomment-967045997\n\n\n   As of this PR, integer floor division (e.g., `1L %/% 0L`) does return a surprising value (INT_MAX) (and I believe it did before too). Everything else returns a float64 int. I wasn't sure how to fix that using the machinery that I know about but perhaps there is a way?\r\n   \r\n   ``` r\r\n   # remotes::install_github(\"apache/arrow/r\")\r\n   library(arrow, warn.conflicts = FALSE)\r\n   library(dplyr, warn.conflicts = FALSE)\r\n   \r\n   RecordBatch$create(number = 1L) %>% \r\n     mutate(floordiv = number %/% 0L) %>%\r\n     collect()\r\n   #> # A tibble: 1 \u00d7 2\r\n   #>   number   floordiv\r\n   #>    <int>      <int>\r\n   #> 1      1 2147483647\r\n   ```\r\n   \r\n   ``` r\r\n   library(arrow, warn.conflicts = FALSE)\r\n   library(dplyr, warn.conflicts = FALSE)\r\n   \r\n   RecordBatch$create(number = 1L) %>% \r\n     mutate(floordiv = number %/% 0L) %>%\r\n     collect()\r\n   #> # A tibble: 1 \u00d7 2\r\n   #>   number   floordiv\r\n   #>    <int>      <int>\r\n   #> 1      1 2147483647\r\n   ```\r\n   \n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-11-12T11:57:38.975+0000",
                    "updated": "2021-11-12T11:57:38.975+0000",
                    "started": "2021-11-12T11:57:38.974+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "680780",
                    "issueId": "13406157"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13406157/worklog/680782",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "paleolimbot commented on a change in pull request #11652:\nURL: https://github.com/apache/arrow/pull/11652#discussion_r748217770\n\n\n\n##########\nFile path: r/R/arrow-datum.R\n##########\n@@ -102,8 +102,18 @@ eval_array_expression <- function(FUN,\n     args <- map(args, ~ .$cast(float64()))\n   } else if (FUN == \"%/%\") {\n     # In R, integer division works like floor(float division)\n-    out <- eval_array_expression(\"/\", args = args, options = options)\n-    return(out$cast(int32(), allow_float_truncate = TRUE))\n+    out <- eval_array_expression(\"/\", args = args)\n+\n+    # integer output only for all integer input\n+    int_type_ids <- Type[toupper(INTEGER_TYPES)]\n+    numerator_is_int <- args[[1]]$type_id() %in% int_type_ids\n+    denominator_is_int <- args[[2]]$type_id() %in% int_type_ids\n\nReview comment:\n       I'm hesitant to do that because this code got copy/pasted to the Ops for Datum where that won't work (but `type_id()` does because Datum has that method).\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-11-12T12:00:06.710+0000",
                    "updated": "2021-11-12T12:00:06.710+0000",
                    "started": "2021-11-12T12:00:06.709+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "680782",
                    "issueId": "13406157"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13406157/worklog/680783",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "paleolimbot edited a comment on pull request #11652:\nURL: https://github.com/apache/arrow/pull/11652#issuecomment-967045997\n\n\n   As of this PR, integer floor division (e.g., `1L %/% 0L`) does return a surprising value (INT_MAX) (and I believe it did before too). Everything else returns a float64 int. I wasn't sure how to fix that using the machinery that I know about but perhaps there is a way?\r\n   \r\n   ``` r\r\n   # remotes::install_github(\"apache/arrow/r\")\r\n   library(arrow, warn.conflicts = FALSE)\r\n   library(dplyr, warn.conflicts = FALSE)\r\n   \r\n   RecordBatch$create(number = 1L) %>% \r\n     mutate(floordiv = number %/% 0L) %>%\r\n     collect()\r\n   #> # A tibble: 1 \u00d7 2\r\n   #>   number   floordiv\r\n   #>    <int>      <int>\r\n   #> 1      1 2147483647\r\n   ```\r\n   \r\n   ``` r\r\n   # remotes::install_github(\"apache/arrow/r#11652\")\r\n   library(arrow, warn.conflicts = FALSE)\r\n   library(dplyr, warn.conflicts = FALSE)\r\n   \r\n   RecordBatch$create(number = 1L) %>% \r\n     mutate(floordiv = number %/% 0L) %>%\r\n     collect()\r\n   #> # A tibble: 1 \u00d7 2\r\n   #>   number   floordiv\r\n   #>    <int>      <int>\r\n   #> 1      1 2147483647\r\n   ```\r\n   \n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-11-12T12:01:31.361+0000",
                    "updated": "2021-11-12T12:01:31.361+0000",
                    "started": "2021-11-12T12:01:31.361+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "680783",
                    "issueId": "13406157"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13406157/worklog/680880",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jonkeane commented on a change in pull request #11652:\nURL: https://github.com/apache/arrow/pull/11652#discussion_r748406576\n\n\n\n##########\nFile path: r/R/arrow-datum.R\n##########\n@@ -102,8 +102,18 @@ eval_array_expression <- function(FUN,\n     args <- map(args, ~ .$cast(float64()))\n   } else if (FUN == \"%/%\") {\n     # In R, integer division works like floor(float division)\n-    out <- eval_array_expression(\"/\", args = args, options = options)\n-    return(out$cast(int32(), allow_float_truncate = TRUE))\n+    out <- eval_array_expression(\"/\", args = args)\n+\n+    # integer output only for all integer input\n+    int_type_ids <- Type[toupper(INTEGER_TYPES)]\n+    numerator_is_int <- args[[1]]$type_id() %in% int_type_ids\n+    denominator_is_int <- args[[2]]$type_id() %in% int_type_ids\n\nReview comment:\n       Aaah right, right\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-11-12T16:05:49.704+0000",
                    "updated": "2021-11-12T16:05:49.704+0000",
                    "started": "2021-11-12T16:05:49.703+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "680880",
                    "issueId": "13406157"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13406157/worklog/680950",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "paleolimbot commented on pull request #11652:\nURL: https://github.com/apache/arrow/pull/11652#issuecomment-967345651\n\n\n   I think I found it! What's happening is this:\r\n   \r\n   ``` r\r\n   arrow:::eval_array_expression(\"/\", 1L, 0L)$cast(arrow::int32(), allow_float_truncate = TRUE)\r\n   #> Scalar\r\n   #> 2147483647\r\n   ```\r\n   \r\n   Without `allow_float_truncate = TRUE` we get:\r\n   \r\n   ``` r\r\n   arrow:::eval_array_expression(\"/\", 1L, 0L)$cast(arrow::int32())\r\n   #> Error: Invalid: Float value inf was truncated converting to int32\r\n   #> /Users/deweydunnington/Desktop/rscratch/arrow/cpp/src/arrow/compute/kernels/scalar_cast_numeric.cc:177  CheckFloatToIntTruncation(batch[0], *out)\r\n   #> /Users/deweydunnington/Desktop/rscratch/arrow/cpp/src/arrow/compute/exec.cc:703  kernel_->exec(kernel_ctx_, batch, &out)\r\n   #> /Users/deweydunnington/Desktop/rscratch/arrow/cpp/src/arrow/compute/exec.cc:641  ExecuteBatch(batch, listener)\r\n   #> /Users/deweydunnington/Desktop/rscratch/arrow/cpp/src/arrow/compute/function.cc:239  executor->Execute(implicitly_cast_args, &listener)\r\n   ```\r\n   \r\n   With the latest commit this feels much better (using your if_else suggestion!):\r\n   \r\n   ``` r\r\n   # remotes::install_github(\"apache/arrow/r#11652\")\r\n   library(arrow, warn.conflicts = FALSE)\r\n   library(dplyr, warn.conflicts = FALSE)\r\n   \r\n   tbl <- tibble::tibble(\r\n     integers = c(1:4, NA_integer_),\r\n     doubles = c(as.numeric(1:4), NA_real_)\r\n   )\r\n   \r\n   RecordBatch$create(!!! tbl) %>% \r\n     mutate(\r\n       int_div_dbl = integers %/% 2,\r\n       int_div_int = integers %/% 2L,\r\n       int_div_zero_int = integers %/% 0L,\r\n       int_div_zero_dbl = integers %/% 0,\r\n       dbl_div_dbl = doubles %/% 2,\r\n       dbl_div_int = doubles %/% 2L,\r\n       dbl_div_zero_int = doubles %/% 0L,\r\n       dbl_div_zero_dbl = doubles %/% 0\r\n     ) %>% \r\n     collect() %>% \r\n     glimpse()\r\n   #> Rows: 5\r\n   #> Columns: 10\r\n   #> $ integers         <int> 1, 2, 3, 4, NA\r\n   #> $ doubles          <dbl> 1, 2, 3, 4, NA\r\n   #> $ int_div_dbl      <dbl> 0, 1, 1, 2, NA\r\n   #> $ int_div_int      <int> 0, 1, 1, 2, NA\r\n   #> $ int_div_zero_int <int> NA, NA, NA, NA, NA\r\n   #> $ int_div_zero_dbl <dbl> Inf, Inf, Inf, Inf, NA\r\n   #> $ dbl_div_dbl      <dbl> 0, 1, 1, 2, NA\r\n   #> $ dbl_div_int      <dbl> 0, 1, 1, 2, NA\r\n   #> $ dbl_div_zero_int <dbl> Inf, Inf, Inf, Inf, NA\r\n   #> $ dbl_div_zero_dbl <dbl> Inf, Inf, Inf, Inf, NA\r\n   ```\r\n   \r\n   <sup>Created on 2021-11-12 by the [reprex package](https://reprex.tidyverse.org) (v2.0.1)</sup>\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-11-12T18:59:55.250+0000",
                    "updated": "2021-11-12T18:59:55.250+0000",
                    "started": "2021-11-12T18:59:55.249+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "680950",
                    "issueId": "13406157"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13406157/worklog/680952",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "paleolimbot commented on pull request #11652:\nURL: https://github.com/apache/arrow/pull/11652#issuecomment-967346491\n\n\n   I benchmarked it too...the difference is very small:\r\n   \r\n   ``` r\r\n   # remotes::install_github(\"apache/arrow/r#11652\")\r\n   library(arrow, warn.conflicts = FALSE)\r\n   library(dplyr, warn.conflicts = FALSE)\r\n   \r\n   df <- RecordBatch$create(integers = 1:1e7, doubles = as.numeric(1:1e7))\r\n   bench::mark(\r\n     df %>% mutate(integers %/% 2L) %>% collect(),\r\n     df %>% mutate(doubles %/% 2L) %>% collect(),\r\n     check = FALSE\r\n   )\r\n   #> # A tibble: 2 \u00d7 6\r\n   #>   expression                                      min   median `itr/sec` mem_alloc\r\n   #>   <bch:expr>                                 <bch:tm> <bch:tm>     <dbl> <bch:byt>\r\n   #> 1 df %>% mutate(integers%/%2L) %>% collect()   26.1ms   26.6ms      36.4     162MB\r\n   #> 2 df %>% mutate(doubles%/%2L) %>% collect()    24.8ms   25.8ms      38.2     191MB\r\n   #> # \u2026 with 1 more variable: gc/sec <dbl>\r\n   ```\r\n   \r\n   <sup>Created on 2021-11-12 by the [reprex package](https://reprex.tidyverse.org) (v2.0.1)</sup>\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-11-12T19:01:24.756+0000",
                    "updated": "2021-11-12T19:01:24.756+0000",
                    "started": "2021-11-12T19:01:24.755+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "680952",
                    "issueId": "13406157"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13406157/worklog/681519",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jonkeane commented on a change in pull request #11652:\nURL: https://github.com/apache/arrow/pull/11652#discussion_r749363543\n\n\n\n##########\nFile path: r/R/expression.R\n##########\n@@ -217,7 +217,23 @@ build_expr <- function(FUN,\n     } else if (FUN == \"%/%\") {\n       # In R, integer division works like floor(float division)\n       out <- build_expr(\"/\", args = args)\n-      return(out$cast(int32(), allow_float_truncate = TRUE))\n+\n+      # integer output only for all integer input\n+      int_type_ids <- Type[toupper(INTEGER_TYPES)]\n+      numerator_is_int <- args[[1]]$type_id() %in% int_type_ids\n+      denominator_is_int <- args[[2]]$type_id() %in% int_type_ids\n+\n+      if (numerator_is_int && denominator_is_int) {\n+        out_float <- build_expr(\n+          \"if_else\",\n+          build_expr(\"equal\", args[[2]], 0L),\n+          Scalar$create(NA_integer_),\n+          out\n+        )\n+        return(out_float$cast(args[[1]]$type(), allow_float_truncate = TRUE))\n\nReview comment:\n       \ud83e\udd14 Would it be possible to take out `allow_float_truncate = TRUE` and use `floor()` here to accomplish the truncation bit? When this code was originally written `floor()` didn't exist and we used `allow_float_truncate` to accomplish that (though like you show here that leads to some very silly results!)\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-11-15T14:14:53.174+0000",
                    "updated": "2021-11-15T14:14:53.174+0000",
                    "started": "2021-11-15T14:14:53.174+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "681519",
                    "issueId": "13406157"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13406157/worklog/682023",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "paleolimbot commented on a change in pull request #11652:\nURL: https://github.com/apache/arrow/pull/11652#discussion_r750307625\n\n\n\n##########\nFile path: r/R/expression.R\n##########\n@@ -217,7 +217,23 @@ build_expr <- function(FUN,\n     } else if (FUN == \"%/%\") {\n       # In R, integer division works like floor(float division)\n       out <- build_expr(\"/\", args = args)\n-      return(out$cast(int32(), allow_float_truncate = TRUE))\n+\n+      # integer output only for all integer input\n+      int_type_ids <- Type[toupper(INTEGER_TYPES)]\n+      numerator_is_int <- args[[1]]$type_id() %in% int_type_ids\n+      denominator_is_int <- args[[2]]$type_id() %in% int_type_ids\n+\n+      if (numerator_is_int && denominator_is_int) {\n+        out_float <- build_expr(\n+          \"if_else\",\n+          build_expr(\"equal\", args[[2]], 0L),\n+          Scalar$create(NA_integer_),\n+          out\n+        )\n+        return(out_float$cast(args[[1]]$type(), allow_float_truncate = TRUE))\n\nReview comment:\n       I'd thought that the integer division kernel took care of this and so I ran into problems when trying to change this before...the `floor()` solution is a bit more explicit and I like it better! We still need the `if_else()` because casting `Inf` to integer with `allow_integer_overflow = TRUE` results in INT_MAX and errors otherwise.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-11-16T14:08:25.833+0000",
                    "updated": "2021-11-16T14:08:25.833+0000",
                    "started": "2021-11-16T14:08:25.833+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "682023",
                    "issueId": "13406157"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13406157/worklog/682656",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jonkeane closed pull request #11652:\nURL: https://github.com/apache/arrow/pull/11652\n\n\n   \n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-11-17T14:35:07.352+0000",
                    "updated": "2021-11-17T14:35:07.352+0000",
                    "started": "2021-11-17T14:35:07.351+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "682656",
                    "issueId": "13406157"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13406157/worklog/682657",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ursabot commented on pull request #11652:\nURL: https://github.com/apache/arrow/pull/11652#issuecomment-971640405\n\n\n   Benchmark runs are scheduled for baseline = 8aad0d607583ddb0ee1e1c4a3995c444bd3b0eb1 and contender = 24689928da8b122df89f29b63cffa75845058d4e. 24689928da8b122df89f29b63cffa75845058d4e is a master commit associated with this PR. Results will be available as each benchmark for each run completes.\n   Conbench compare runs links:\n   [Scheduled] [ec2-t3-xlarge-us-east-2](https://conbench.ursa.dev/compare/runs/5c699197bfa04d86b9ee20498372f1ab...205b85f089bf454bb101086a2868c3ac/)\n   [Scheduled] [ursa-i9-9960x](https://conbench.ursa.dev/compare/runs/76bb46a2c81b41d0aa1d8afabd5a0a61...0da14c2ced044790ad9d160db0c631d5/)\n   [Scheduled] [ursa-thinkcentre-m75q](https://conbench.ursa.dev/compare/runs/f52480a28edf474f85f7dadb3b97b2af...2e1ffd993f3c49148891b9c454baf279/)\n   Supported benchmarks:\n   ursa-i9-9960x: langs = Python, R, JavaScript\n   ursa-thinkcentre-m75q: langs = C++, Java\n   ec2-t3-xlarge-us-east-2: cloud = True\n   \n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-11-17T14:35:30.412+0000",
                    "updated": "2021-11-17T14:35:30.412+0000",
                    "started": "2021-11-17T14:35:30.412+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "682657",
                    "issueId": "13406157"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13406157/worklog/682672",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ursabot edited a comment on pull request #11652:\nURL: https://github.com/apache/arrow/pull/11652#issuecomment-971640405\n\n\n   Benchmark runs are scheduled for baseline = 8aad0d607583ddb0ee1e1c4a3995c444bd3b0eb1 and contender = 24689928da8b122df89f29b63cffa75845058d4e. 24689928da8b122df89f29b63cffa75845058d4e is a master commit associated with this PR. Results will be available as each benchmark for each run completes.\n   Conbench compare runs links:\n   [Finished :arrow_down:0.0% :arrow_up:0.0%] [ec2-t3-xlarge-us-east-2](https://conbench.ursa.dev/compare/runs/5c699197bfa04d86b9ee20498372f1ab...205b85f089bf454bb101086a2868c3ac/)\n   [Scheduled] [ursa-i9-9960x](https://conbench.ursa.dev/compare/runs/76bb46a2c81b41d0aa1d8afabd5a0a61...0da14c2ced044790ad9d160db0c631d5/)\n   [Scheduled] [ursa-thinkcentre-m75q](https://conbench.ursa.dev/compare/runs/f52480a28edf474f85f7dadb3b97b2af...2e1ffd993f3c49148891b9c454baf279/)\n   Supported benchmarks:\n   ursa-i9-9960x: langs = Python, R, JavaScript\n   ursa-thinkcentre-m75q: langs = C++, Java\n   ec2-t3-xlarge-us-east-2: cloud = True\n   \n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-11-17T15:01:37.690+0000",
                    "updated": "2021-11-17T15:01:37.690+0000",
                    "started": "2021-11-17T15:01:37.690+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "682672",
                    "issueId": "13406157"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13406157/worklog/682994",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ursabot edited a comment on pull request #11652:\nURL: https://github.com/apache/arrow/pull/11652#issuecomment-971640405\n\n\n   Benchmark runs are scheduled for baseline = 8aad0d607583ddb0ee1e1c4a3995c444bd3b0eb1 and contender = 24689928da8b122df89f29b63cffa75845058d4e. 24689928da8b122df89f29b63cffa75845058d4e is a master commit associated with this PR. Results will be available as each benchmark for each run completes.\n   Conbench compare runs links:\n   [Finished :arrow_down:0.0% :arrow_up:0.0%] [ec2-t3-xlarge-us-east-2](https://conbench.ursa.dev/compare/runs/5c699197bfa04d86b9ee20498372f1ab...205b85f089bf454bb101086a2868c3ac/)\n   [Scheduled] [ursa-i9-9960x](https://conbench.ursa.dev/compare/runs/76bb46a2c81b41d0aa1d8afabd5a0a61...0da14c2ced044790ad9d160db0c631d5/)\n   [Finished :arrow_down:0.18% :arrow_up:0.0%] [ursa-thinkcentre-m75q](https://conbench.ursa.dev/compare/runs/f52480a28edf474f85f7dadb3b97b2af...2e1ffd993f3c49148891b9c454baf279/)\n   Supported benchmarks:\n   ursa-i9-9960x: langs = Python, R, JavaScript\n   ursa-thinkcentre-m75q: langs = C++, Java\n   ec2-t3-xlarge-us-east-2: cloud = True\n   \n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-11-17T23:40:37.886+0000",
                    "updated": "2021-11-17T23:40:37.886+0000",
                    "started": "2021-11-17T23:40:37.886+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "682994",
                    "issueId": "13406157"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13406157/worklog/682998",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ursabot edited a comment on pull request #11652:\nURL: https://github.com/apache/arrow/pull/11652#issuecomment-971640405\n\n\n   Benchmark runs are scheduled for baseline = 8aad0d607583ddb0ee1e1c4a3995c444bd3b0eb1 and contender = 24689928da8b122df89f29b63cffa75845058d4e. 24689928da8b122df89f29b63cffa75845058d4e is a master commit associated with this PR. Results will be available as each benchmark for each run completes.\n   Conbench compare runs links:\n   [Finished :arrow_down:0.0% :arrow_up:0.0%] [ec2-t3-xlarge-us-east-2](https://conbench.ursa.dev/compare/runs/5c699197bfa04d86b9ee20498372f1ab...205b85f089bf454bb101086a2868c3ac/)\n   [Finished :arrow_down:0.0% :arrow_up:0.0%] [ursa-i9-9960x](https://conbench.ursa.dev/compare/runs/76bb46a2c81b41d0aa1d8afabd5a0a61...0da14c2ced044790ad9d160db0c631d5/)\n   [Finished :arrow_down:0.18% :arrow_up:0.0%] [ursa-thinkcentre-m75q](https://conbench.ursa.dev/compare/runs/f52480a28edf474f85f7dadb3b97b2af...2e1ffd993f3c49148891b9c454baf279/)\n   Supported benchmarks:\n   ursa-i9-9960x: langs = Python, R, JavaScript\n   ursa-thinkcentre-m75q: langs = C++, Java\n   ec2-t3-xlarge-us-east-2: cloud = True\n   \n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-11-18T00:13:33.335+0000",
                    "updated": "2021-11-18T00:13:33.335+0000",
                    "started": "2021-11-18T00:13:33.335+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "682998",
                    "issueId": "13406157"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
            "id": "4",
            "description": "An improvement or enhancement to an existing feature or task.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
            "name": "Improvement",
            "subtask": false,
            "avatarId": 21140
        },
        "timespent": 10200,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@4399ae0[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@7f9b81ca[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@5f6d88ea[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@7cdbd71c[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@61d3c633[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@29a3d4c6[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@1a3a33c0[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@387b64ac[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@4766dfce[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@70d42600[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@3bbbbfe9[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@5806f236[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 10200,
        "customfield_12312520": null,
        "customfield_12312521": "Wed Nov 17 14:34:56 UTC 2021",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2021-11-17T14:34:56.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-14297/watchers",
            "watchCount": 3,
            "isWatching": false
        },
        "created": "2021-10-12T14:58:58.000+0000",
        "updated": "2021-11-18T00:13:34.000+0000",
        "timeoriginalestimate": null,
        "description": "Behaviour of integer division from Arrow differs from R.\u00a0\r\n\r\n{code:r}\r\n> a <- c(1:4, NA_integer_)\r\n> a_arrow <- Array$create(a)\r\n> \r\n> expect_identical(as.vector(a_arrow %/% 2), a %/% 2)\r\nError: as.vector(a_arrow%/%2) (`actual`) not identical to a%/%2 (`expected`).\r\n\r\n`actual` is an integer vector (0, 1, 1, 2, NA)\r\n`expected` is a double vector (0, 1, 1, 2, NA)\r\n> \r\n> # this actually works, but on accident as in R the type of the denominator\r\n> # is the one that determines the type of the output \r\n> expect_identical(as.vector(a_arrow %/% 2L), a %/% 2L)\r\n> \r\n> expect_identical(as.vector(a_arrow %/% 0), a %/% 0)\r\nError: as.vector(a_arrow%/%0) (`actual`) not identical to a%/%0 (`expected`).\r\n\r\n`actual` is an integer vector (2147483647, 2147483647, 2147483647, 2147483647, NA)\r\n`expected` is a double vector (Inf, Inf, Inf, Inf, NA)\r\n> expect_identical(as.vector(a_arrow %/% 0L), a %/% 0L)\r\nError: as.vector(a_arrow%/%0L) (`actual`) not identical to a%/%0L (`expected`).\r\n\r\n  `actual`: 2147483647 2147483647 2147483647 2147483647 NA\r\n`expected`:         NA         NA         NA         NA NA\r\n> \r\n> b <- -a\r\n> b_arrow <- Array$create(b)\r\n> expect_identical(as.vector(b_arrow %/% 2), b %/% 2)\r\nError: as.vector(b_arrow%/%2) (`actual`) not identical to b%/%2 (`expected`).\r\n\r\n`actual` is an integer vector (0, -1, -1, -2, NA)\r\n`expected` is a double vector (-1, -1, -2, -2, NA)\r\n> expect_identical(as.vector(b_arrow %/% .2), b %/% .2)\r\nError: as.vector(b_arrow%/%0.2) (`actual`) not identical to b%/%0.2 (`expected`).\r\n\r\n`actual` is an integer vector (-5, -10, -15, -20, NA)\r\n`expected` is a double vector (-5, -10, -15, -20, NA)\r\n{code}\r\n\r\n\r\nexpect_dplyr_equal() uses expect_equal() which does not enforce type.\r\n\r\nThis is a follow-up issue to [ARROW-13800|https://issues.apache.org/jira/browse/ARROW-13800]\u00a0",
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "2h 50m",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 10200
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[R] smooth out integer division to better match R",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13406157/comment/17441129",
                    "id": "17441129",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=paleolimbot",
                        "name": "paleolimbot",
                        "key": "paleolimbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=paleolimbot&avatarId=47795",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=paleolimbot&avatarId=47795",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=paleolimbot&avatarId=47795",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=paleolimbot&avatarId=47795"
                        },
                        "displayName": "Dewey Dunnington",
                        "active": true,
                        "timeZone": "America/Halifax"
                    },
                    "body": "The place where we\u2019re currently doing this conversion is here: <https://github.com/apache/arrow/blob/master/r/R/expression.R#L212-L223> \r\nRunnable version of the above: \r\n\r\n{code:R}\r\nlibrary(arrow, warn.conflicts = FALSE)\r\nlibrary(dplyr, warn.conflicts = FALSE)\r\nlibrary(testthat, warn.conflicts = FALSE)\r\n\r\na <- c(1:4, NA_integer_)\r\na_arrow <- Array$create(a)\r\n\r\nexpect_identical(as.vector(a_arrow %/% 2), a %/% 2)\r\n#> Error: as.vector(a_arrow%/%2) not identical to a%/%2.\r\n#> Objects equal but not identical\r\n\r\n# this actually works, but on accident as in R the type of the denominator\r\n# is the one that determines the type of the output \r\nexpect_identical(as.vector(a_arrow %/% 2L), a %/% 2L)\r\n\r\nexpect_identical(as.vector(a_arrow %/% 0L), a %/% 0L)\r\n#> Error: as.vector(a_arrow%/%0L) not identical to a%/%0L.\r\n#> 4/5 mismatches (average diff: NaN)\r\n#> [1] 2147483647 - NA == NA\r\n#> [2] 2147483647 - NA == NA\r\n#> [3] 2147483647 - NA == NA\r\n#> [4] 2147483647 - NA == NA\r\n\r\nb <- -a\r\nb_arrow <- Array$create(b)\r\nexpect_identical(as.vector(b_arrow %/% 2), b %/% 2)\r\n#> Error: as.vector(b_arrow%/%2) not identical to b%/%2.\r\n#> 2/5 mismatches (average diff: 1)\r\n#> [1]  0 - -1 == 1\r\n#> [3] -1 - -2 == 1\r\nexpect_identical(as.vector(b_arrow %/% .2), b %/% .2)\r\n#> Error: as.vector(b_arrow%/%0.2) not identical to b%/%0.2.\r\n#> Objects equal but not identical\r\n{code}\r\n",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=paleolimbot",
                        "name": "paleolimbot",
                        "key": "paleolimbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=paleolimbot&avatarId=47795",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=paleolimbot&avatarId=47795",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=paleolimbot&avatarId=47795",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=paleolimbot&avatarId=47795"
                        },
                        "displayName": "Dewey Dunnington",
                        "active": true,
                        "timeZone": "America/Halifax"
                    },
                    "created": "2021-11-09T12:26:43.928+0000",
                    "updated": "2021-11-09T12:26:43.928+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13406157/comment/17445251",
                    "id": "17445251",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=jonkeane",
                        "name": "jonkeane",
                        "key": "jonkeane",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34057",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34057",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34057",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34057"
                        },
                        "displayName": "Jonathan Keane",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "Issue resolved by pull request 11652\n[https://github.com/apache/arrow/pull/11652]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=jonkeane",
                        "name": "jonkeane",
                        "key": "jonkeane",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34057",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34057",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34057",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34057"
                        },
                        "displayName": "Jonathan Keane",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2021-11-17T14:34:56.477+0000",
                    "updated": "2021-11-17T14:34:56.477+0000"
                }
            ],
            "maxResults": 2,
            "total": 2,
            "startAt": 0
        },
        "customfield_12311820": "0|z0vryw:",
        "customfield_12314139": null
    }
}