{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13401919",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13401919",
    "key": "ARROW-14029",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12350591",
                "id": "12350591",
                "description": "",
                "name": "7.0.0",
                "archived": false,
                "released": true,
                "releaseDate": "2022-02-03"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "name": "Major",
            "id": "3"
        },
        "labels": [
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [
            {
                "id": "12623227",
                "self": "https://issues.apache.org/jira/rest/api/2/issueLink/12623227",
                "type": {
                    "id": "10030",
                    "name": "Reference",
                    "inward": "is related to",
                    "outward": "relates to",
                    "self": "https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"
                },
                "outwardIssue": {
                    "id": "13355223",
                    "key": "ARROW-11415",
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13355223",
                    "fields": {
                        "summary": "[R] experimental map_batches cannot find columns",
                        "status": {
                            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
                            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
                            "name": "Resolved",
                            "id": "5",
                            "statusCategory": {
                                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                                "id": 3,
                                "key": "done",
                                "colorName": "green",
                                "name": "Done"
                            }
                        },
                        "priority": {
                            "self": "https://issues.apache.org/jira/rest/api/2/priority/4",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
                            "name": "Minor",
                            "id": "4"
                        },
                        "issuetype": {
                            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
                            "id": "1",
                            "description": "A problem which impairs or prevents the functions of the product.",
                            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
                            "name": "Bug",
                            "subtask": false,
                            "avatarId": 21133
                        }
                    }
                }
            },
            {
                "id": "12630331",
                "self": "https://issues.apache.org/jira/rest/api/2/issueLink/12630331",
                "type": {
                    "id": "10030",
                    "name": "Reference",
                    "inward": "is related to",
                    "outward": "relates to",
                    "self": "https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"
                },
                "outwardIssue": {
                    "id": "13421133",
                    "key": "ARROW-15271",
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13421133",
                    "fields": {
                        "summary": "[R] Refactor do_exec_plan to return a RecordBatchReader",
                        "status": {
                            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
                            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
                            "name": "Resolved",
                            "id": "5",
                            "statusCategory": {
                                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                                "id": 3,
                                "key": "done",
                                "colorName": "green",
                                "name": "Done"
                            }
                        },
                        "priority": {
                            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
                            "name": "Major",
                            "id": "3"
                        },
                        "issuetype": {
                            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
                            "id": "4",
                            "description": "An improvement or enhancement to an existing feature or task.",
                            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
                            "name": "Improvement",
                            "subtask": false,
                            "avatarId": 21140
                        }
                    }
                }
            },
            {
                "id": "12623288",
                "self": "https://issues.apache.org/jira/rest/api/2/issueLink/12623288",
                "type": {
                    "id": "10001",
                    "name": "dependent",
                    "inward": "is depended upon by",
                    "outward": "depends upon",
                    "self": "https://issues.apache.org/jira/rest/api/2/issueLinkType/10001"
                },
                "outwardIssue": {
                    "id": "13401465",
                    "key": "ARROW-14008",
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13401465",
                    "fields": {
                        "summary": "[R][Compute] ExecPlan_run should return RecordBatchReader instead of Table",
                        "status": {
                            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
                            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
                            "name": "Resolved",
                            "id": "5",
                            "statusCategory": {
                                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                                "id": 3,
                                "key": "done",
                                "colorName": "green",
                                "name": "Done"
                            }
                        },
                        "priority": {
                            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
                            "name": "Major",
                            "id": "3"
                        },
                        "issuetype": {
                            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
                            "id": "4",
                            "description": "An improvement or enhancement to an existing feature or task.",
                            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
                            "name": "Improvement",
                            "subtask": false,
                            "avatarId": 21140
                        }
                    }
                }
            }
        ],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=willjones127",
            "name": "willjones127",
            "key": "willjones127",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34058",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34058",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34058",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34058"
            },
            "displayName": "Will Jones",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12333008",
                "id": "12333008",
                "name": "R"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=icook",
            "name": "icook",
            "key": "icook",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=icook&avatarId=29388",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=icook&avatarId=29388",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=icook&avatarId=29388",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=icook&avatarId=29388"
            },
            "displayName": "Ian Cook",
            "active": true,
            "timeZone": "America/New_York"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=icook",
            "name": "icook",
            "key": "icook",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=icook&avatarId=29388",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=icook&avatarId=29388",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=icook&avatarId=29388",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=icook&avatarId=29388"
            },
            "displayName": "Ian Cook",
            "active": true,
            "timeZone": "America/New_York"
        },
        "aggregateprogress": {
            "progress": 15000,
            "total": 15000,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 15000,
            "total": 15000,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-14029/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 25,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13401919/worklog/692135",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "github-actions[bot] commented on pull request #11894:\nURL: https://github.com/apache/arrow/pull/11894#issuecomment-988324730\n\n\n   https://issues.apache.org/jira/browse/ARROW-14029\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-07T23:03:35.351+0000",
                    "updated": "2021-12-07T23:03:35.351+0000",
                    "started": "2021-12-07T23:03:35.351+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "692135",
                    "issueId": "13401919"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13401919/worklog/693561",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wjones127 commented on a change in pull request #11894:\nURL: https://github.com/apache/arrow/pull/11894#discussion_r766164576\n\n\n\n##########\nFile path: r/vignettes/dataset.Rmd\n##########\n@@ -290,6 +290,64 @@ rows match the filter. Relatedly, since Parquet files contain row groups with\n statistics on the data within, there may be entire chunks of data you can\n avoid scanning because they have no rows where `total_amount > 100`.\n \n+### Processing data in batches\n\nReview comment:\n       This example was useful in testing, and hopefully gives some ideas for usage. Though perhaps it belongs more in the cookbook? LMK what you think.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-09T21:24:30.331+0000",
                    "updated": "2021-12-09T21:24:30.331+0000",
                    "started": "2021-12-09T21:24:30.331+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "693561",
                    "issueId": "13401919"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13401919/worklog/699340",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "paleolimbot commented on a change in pull request #11894:\nURL: https://github.com/apache/arrow/pull/11894#discussion_r773109692\n\n\n\n##########\nFile path: r/R/dataset-scan.R\n##########\n@@ -185,17 +183,29 @@ ScanTask <- R6Class(\"ScanTask\",\n #' `data.frame`? Default `TRUE`\n #' @export\n map_batches <- function(X, FUN, ..., .data.frame = TRUE) {\n-  if (.data.frame) {\n-    lapply <- map_dfr\n-  }\n-  scanner <- Scanner$create(ensure_group_vars(X))\n+  # TODO: possibly refactor do_exec_plan to return a RecordBatchReader\n+  plan <- ExecPlan$create()\n+  final_node <- plan$Build(X)\n+  reader <- plan$Run(final_node)\n   FUN <- as_mapper(FUN)\n-  lapply(scanner$ScanBatches(), function(batch) {\n-    # TODO: wrap batch in arrow_dplyr_query with X$selected_columns,\n-    # X$temp_columns, and X$group_by_vars\n-    # if X is arrow_dplyr_query, if some other arg (.dplyr?) == TRUE\n-    FUN(batch, ...)\n-  })\n+\n+  # TODO: wrap batch in arrow_dplyr_query with X$selected_columns,\n+  # X$temp_columns, and X$group_by_vars\n+  # if X is arrow_dplyr_query, if some other arg (.dplyr?) == TRUE\n+  batch <- reader$read_next_batch()\n+  res <- list()\n\nReview comment:\n       I'm not sure exactly how many batches are going to get processed here, but if it's over about 1000 the `append()` approach starts to get slow. The non-append approach isn't too verbose if you're interested:\r\n   \r\n   ``` r\r\n   append_with_initial_alloc <- function(n) {\r\n     res <- vector(\"list\", 1024)\r\n     i <- 0L\r\n     while (i < n) {\r\n       i <- i + 1L\r\n       # this will work even after i > n in R and\r\n       # is relatively fast because list()s are overallocated\r\n       # by about 5% for this express use-case\r\n       res[[i]] <- sprintf(\"result %d\", i)\r\n     }\r\n     \r\n     if (i < length(res)) {\r\n       res <- res[seq_len(i)]\r\n     }\r\n     invisible(res)\r\n   }\r\n   \r\n   append_without_initial_alloc <- function(n) {\r\n     res <- list()\r\n     i <- 0L\r\n     while (i < n) {\r\n       i <- i + 1L\r\n       res <- append(res, list(sprintf(\"result %d\", i)))\r\n     }\r\n     invisible(res)\r\n   }\r\n   \r\n   bench::mark(\r\n     append_with_initial_alloc(1e4),\r\n     append_without_initial_alloc(1e4)\r\n   )\r\n   #> Warning: Some expressions had a GC in every iteration; so filtering is disabled.\r\n   #> # A tibble: 2 \u00d7 6\r\n   #>   expression                               min   median `itr/sec` mem_alloc\r\n   #>   <bch:expr>                          <bch:tm> <bch:tm>     <dbl> <bch:byt>\r\n   #> 1 append_with_initial_alloc(10000)      6.64ms   6.78ms    134.      1.99MB\r\n   #> 2 append_without_initial_alloc(10000)  291.2ms 292.58ms      3.42  381.99MB\r\n   #> # \u2026 with 1 more variable: gc/sec <dbl>\r\n   ```\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-21T12:52:02.272+0000",
                    "updated": "2021-12-21T12:52:02.272+0000",
                    "started": "2021-12-21T12:52:02.271+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "699340",
                    "issueId": "13401919"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13401919/worklog/699479",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wjones127 commented on a change in pull request #11894:\nURL: https://github.com/apache/arrow/pull/11894#discussion_r773258073\n\n\n\n##########\nFile path: r/R/dataset-scan.R\n##########\n@@ -185,17 +183,29 @@ ScanTask <- R6Class(\"ScanTask\",\n #' `data.frame`? Default `TRUE`\n #' @export\n map_batches <- function(X, FUN, ..., .data.frame = TRUE) {\n-  if (.data.frame) {\n-    lapply <- map_dfr\n-  }\n-  scanner <- Scanner$create(ensure_group_vars(X))\n+  # TODO: possibly refactor do_exec_plan to return a RecordBatchReader\n+  plan <- ExecPlan$create()\n+  final_node <- plan$Build(X)\n+  reader <- plan$Run(final_node)\n   FUN <- as_mapper(FUN)\n-  lapply(scanner$ScanBatches(), function(batch) {\n-    # TODO: wrap batch in arrow_dplyr_query with X$selected_columns,\n-    # X$temp_columns, and X$group_by_vars\n-    # if X is arrow_dplyr_query, if some other arg (.dplyr?) == TRUE\n-    FUN(batch, ...)\n-  })\n+\n+  # TODO: wrap batch in arrow_dplyr_query with X$selected_columns,\n+  # X$temp_columns, and X$group_by_vars\n+  # if X is arrow_dplyr_query, if some other arg (.dplyr?) == TRUE\n+  batch <- reader$read_next_batch()\n+  res <- list()\n\nReview comment:\n       I wasn't aware that's how lists work. Thank you for the explanation! The difference in memory allocated is particularly surprising.\r\n   \r\n   I'll switch this over.\r\n   \r\n   \n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-21T16:01:23.437+0000",
                    "updated": "2021-12-21T16:01:23.437+0000",
                    "started": "2021-12-21T16:01:23.437+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "699479",
                    "issueId": "13401919"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13401919/worklog/704167",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wjones127 commented on pull request #11894:\nURL: https://github.com/apache/arrow/pull/11894#issuecomment-1006005568\n\n\n   @jonkeane If you have time to review, I think it would be cool to get this into 7.0.0.\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-01-05T19:14:45.687+0000",
                    "updated": "2022-01-05T19:14:45.687+0000",
                    "started": "2022-01-05T19:14:45.687+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "704167",
                    "issueId": "13401919"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13401919/worklog/704628",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jonkeane commented on a change in pull request #11894:\nURL: https://github.com/apache/arrow/pull/11894#discussion_r779659047\n\n\n\n##########\nFile path: r/tests/testthat/test-dataset.R\n##########\n@@ -453,15 +453,38 @@ test_that(\"Creating UnionDataset\", {\n })\n \n test_that(\"map_batches\", {\n-  skip(\"map_batches() is broken (ARROW-14029)\")\n   ds <- open_dataset(dataset_dir, partitioning = \"part\")\n+\n+  # summarize returns arrow_dplyr_query\n   expect_equal(\n     ds %>%\n       filter(int > 5) %>%\n       select(int, lgl) %>%\n-      map_batches(~ summarize(., min_int = min(int))),\n+      map_batches(~ summarize(., min_int = min(int))) %>%\n+      arrange(min_int),\n     tibble(min_int = c(6L, 101L))\n   )\n+\n+  # $num_rows returns integer vector\n+  expect_equal(\n+    ds %>%\n+      filter(int > 5) %>%\n+      select(int, lgl) %>%\n+      map_batches(~ .$num_rows, .data.frame = FALSE) %>%\n+      as.numeric() %>%\n+      sort(),\n+    c(5, 10)\n\nReview comment:\n       ```suggestion\r\n         map_batches(~ .$num_rows, .data.frame = FALSE) %>%\r\n         sort(),\r\n       c(5L, 10L)\r\n   ```\r\n   \r\n   Does this work? `as.numeric()` in there is a little suspicious \u2014 what issues do you have if you take it out?\n\n##########\nFile path: r/tests/testthat/test-dataset.R\n##########\n@@ -453,15 +453,38 @@ test_that(\"Creating UnionDataset\", {\n })\n \n test_that(\"map_batches\", {\n-  skip(\"map_batches() is broken (ARROW-14029)\")\n   ds <- open_dataset(dataset_dir, partitioning = \"part\")\n+\n+  # summarize returns arrow_dplyr_query\n   expect_equal(\n     ds %>%\n       filter(int > 5) %>%\n       select(int, lgl) %>%\n-      map_batches(~ summarize(., min_int = min(int))),\n+      map_batches(~ summarize(., min_int = min(int))) %>%\n+      arrange(min_int),\n     tibble(min_int = c(6L, 101L))\n   )\n+\n+  # $num_rows returns integer vector\n+  expect_equal(\n+    ds %>%\n+      filter(int > 5) %>%\n+      select(int, lgl) %>%\n+      map_batches(~ .$num_rows, .data.frame = FALSE) %>%\n+      as.numeric() %>%\n+      sort(),\n+    c(5, 10)\n+  )\n+\n+  # $Take returns RecordBatch\n\nReview comment:\n       Is this comment accurate here? It looks like it's returning a tibble? Or is that a side effect of `arrange()`?\n\n##########\nFile path: r/R/dataset-scan.R\n##########\n@@ -174,8 +174,6 @@ ScanTask <- R6Class(\"ScanTask\",\n #' a `data.frame` for further aggregation, even if you couldn't fit the whole\n #' `Dataset` result in memory.\n #'\n-#' This is experimental and not recommended for production use.\n\nReview comment:\n       We might want to still keep the experimental label here \u2014 it's working now, but as you mention, we might refactor it / have it possibly have different behavior in the future.\n\n##########\nFile path: r/R/dataset-scan.R\n##########\n@@ -185,17 +183,36 @@ ScanTask <- R6Class(\"ScanTask\",\n #' `data.frame`? Default `TRUE`\n #' @export\n map_batches <- function(X, FUN, ..., .data.frame = TRUE) {\n-  if (.data.frame) {\n-    lapply <- map_dfr\n-  }\n-  scanner <- Scanner$create(ensure_group_vars(X))\n+  # TODO: possibly refactor do_exec_plan to return a RecordBatchReader\n\nReview comment:\n       Would you mind making the Jira for this + put the number here? I don't know of one off the top of my head but we should get one if we think we'll (possibly) want to move in that direction\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-01-06T16:16:59.460+0000",
                    "updated": "2022-01-06T16:16:59.460+0000",
                    "started": "2022-01-06T16:16:59.460+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "704628",
                    "issueId": "13401919"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13401919/worklog/704640",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wjones127 commented on a change in pull request #11894:\nURL: https://github.com/apache/arrow/pull/11894#discussion_r779687169\n\n\n\n##########\nFile path: r/tests/testthat/test-dataset.R\n##########\n@@ -453,15 +453,38 @@ test_that(\"Creating UnionDataset\", {\n })\n \n test_that(\"map_batches\", {\n-  skip(\"map_batches() is broken (ARROW-14029)\")\n   ds <- open_dataset(dataset_dir, partitioning = \"part\")\n+\n+  # summarize returns arrow_dplyr_query\n   expect_equal(\n     ds %>%\n       filter(int > 5) %>%\n       select(int, lgl) %>%\n-      map_batches(~ summarize(., min_int = min(int))),\n+      map_batches(~ summarize(., min_int = min(int))) %>%\n+      arrange(min_int),\n     tibble(min_int = c(6L, 101L))\n   )\n+\n+  # $num_rows returns integer vector\n+  expect_equal(\n+    ds %>%\n+      filter(int > 5) %>%\n+      select(int, lgl) %>%\n+      map_batches(~ .$num_rows, .data.frame = FALSE) %>%\n+      as.numeric() %>%\n+      sort(),\n+    c(5, 10)\n\nReview comment:\n       `map_batches()` will return a list, but `sort()` only takes atomic vectors.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-01-06T16:43:30.961+0000",
                    "updated": "2022-01-06T16:43:30.961+0000",
                    "started": "2022-01-06T16:43:30.961+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "704640",
                    "issueId": "13401919"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13401919/worklog/704643",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wjones127 commented on a change in pull request #11894:\nURL: https://github.com/apache/arrow/pull/11894#discussion_r779694269\n\n\n\n##########\nFile path: r/tests/testthat/test-dataset.R\n##########\n@@ -453,15 +453,38 @@ test_that(\"Creating UnionDataset\", {\n })\n \n test_that(\"map_batches\", {\n-  skip(\"map_batches() is broken (ARROW-14029)\")\n   ds <- open_dataset(dataset_dir, partitioning = \"part\")\n+\n+  # summarize returns arrow_dplyr_query\n   expect_equal(\n     ds %>%\n       filter(int > 5) %>%\n       select(int, lgl) %>%\n-      map_batches(~ summarize(., min_int = min(int))),\n+      map_batches(~ summarize(., min_int = min(int))) %>%\n+      arrange(min_int),\n     tibble(min_int = c(6L, 101L))\n   )\n+\n+  # $num_rows returns integer vector\n+  expect_equal(\n+    ds %>%\n+      filter(int > 5) %>%\n+      select(int, lgl) %>%\n+      map_batches(~ .$num_rows, .data.frame = FALSE) %>%\n+      as.numeric() %>%\n+      sort(),\n+    c(5, 10)\n+  )\n+\n+  # $Take returns RecordBatch\n\nReview comment:\n       It returns a record batch within that function. But since the `.data.frame` option on `map_batches()` is `TRUE` by default, the results are combined into a tibble using `dplyr::bind_rows()`.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-01-06T16:53:09.622+0000",
                    "updated": "2022-01-06T16:53:09.622+0000",
                    "started": "2022-01-06T16:53:09.622+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "704643",
                    "issueId": "13401919"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13401919/worklog/704647",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wjones127 commented on a change in pull request #11894:\nURL: https://github.com/apache/arrow/pull/11894#discussion_r779696866\n\n\n\n##########\nFile path: r/R/dataset-scan.R\n##########\n@@ -174,8 +174,6 @@ ScanTask <- R6Class(\"ScanTask\",\n #' a `data.frame` for further aggregation, even if you couldn't fit the whole\n #' `Dataset` result in memory.\n #'\n-#' This is experimental and not recommended for production use.\n\nReview comment:\n       I think the `do_exec_plan` refactor wouldn't affect behavior of this. But not sure about the \"wrap in `arrow_dplyr_query`\" one.\r\n   \r\n   If we keep it experimental, we should either remove the vignette below or mark that as experimental as well.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-01-06T16:56:33.891+0000",
                    "updated": "2022-01-06T16:56:33.891+0000",
                    "started": "2022-01-06T16:56:33.891+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "704647",
                    "issueId": "13401919"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13401919/worklog/704648",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jonkeane commented on a change in pull request #11894:\nURL: https://github.com/apache/arrow/pull/11894#discussion_r779698651\n\n\n\n##########\nFile path: r/tests/testthat/test-dataset.R\n##########\n@@ -453,15 +453,38 @@ test_that(\"Creating UnionDataset\", {\n })\n \n test_that(\"map_batches\", {\n-  skip(\"map_batches() is broken (ARROW-14029)\")\n   ds <- open_dataset(dataset_dir, partitioning = \"part\")\n+\n+  # summarize returns arrow_dplyr_query\n   expect_equal(\n     ds %>%\n       filter(int > 5) %>%\n       select(int, lgl) %>%\n-      map_batches(~ summarize(., min_int = min(int))),\n+      map_batches(~ summarize(., min_int = min(int))) %>%\n+      arrange(min_int),\n     tibble(min_int = c(6L, 101L))\n   )\n+\n+  # $num_rows returns integer vector\n+  expect_equal(\n+    ds %>%\n+      filter(int > 5) %>%\n+      select(int, lgl) %>%\n+      map_batches(~ .$num_rows, .data.frame = FALSE) %>%\n+      as.numeric() %>%\n+      sort(),\n+    c(5, 10)\n\nReview comment:\n       Aaaaaah, I see now. Maybe it would be a bit cleared with `unlist()` instead of `as.numeric()`? \n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-01-06T16:58:50.758+0000",
                    "updated": "2022-01-06T16:58:50.758+0000",
                    "started": "2022-01-06T16:58:50.758+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "704648",
                    "issueId": "13401919"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13401919/worklog/704650",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jonkeane commented on a change in pull request #11894:\nURL: https://github.com/apache/arrow/pull/11894#discussion_r779700156\n\n\n\n##########\nFile path: r/R/dataset-scan.R\n##########\n@@ -174,8 +174,6 @@ ScanTask <- R6Class(\"ScanTask\",\n #' a `data.frame` for further aggregation, even if you couldn't fit the whole\n #' `Dataset` result in memory.\n #'\n-#' This is experimental and not recommended for production use.\n\nReview comment:\n       I think the vignette is helpful and useful. I would lean (slightly) towards marking this as experimental in both places, but only pretty weakly, happy to go with it if you would prefer to take the experimental marks off.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-01-06T17:00:56.136+0000",
                    "updated": "2022-01-06T17:00:56.136+0000",
                    "started": "2022-01-06T17:00:56.135+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "704650",
                    "issueId": "13401919"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13401919/worklog/704651",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jonkeane commented on a change in pull request #11894:\nURL: https://github.com/apache/arrow/pull/11894#discussion_r779700853\n\n\n\n##########\nFile path: r/tests/testthat/test-dataset.R\n##########\n@@ -453,15 +453,38 @@ test_that(\"Creating UnionDataset\", {\n })\n \n test_that(\"map_batches\", {\n-  skip(\"map_batches() is broken (ARROW-14029)\")\n   ds <- open_dataset(dataset_dir, partitioning = \"part\")\n+\n+  # summarize returns arrow_dplyr_query\n   expect_equal(\n     ds %>%\n       filter(int > 5) %>%\n       select(int, lgl) %>%\n-      map_batches(~ summarize(., min_int = min(int))),\n+      map_batches(~ summarize(., min_int = min(int))) %>%\n+      arrange(min_int),\n     tibble(min_int = c(6L, 101L))\n   )\n+\n+  # $num_rows returns integer vector\n+  expect_equal(\n+    ds %>%\n+      filter(int > 5) %>%\n+      select(int, lgl) %>%\n+      map_batches(~ .$num_rows, .data.frame = FALSE) %>%\n+      as.numeric() %>%\n+      sort(),\n+    c(5, 10)\n+  )\n+\n+  # $Take returns RecordBatch\n\nReview comment:\n       Ah I see, it might be good to add that to the comment so that it's clear what's going on there.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-01-06T17:01:50.311+0000",
                    "updated": "2022-01-06T17:01:50.311+0000",
                    "started": "2022-01-06T17:01:50.311+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "704651",
                    "issueId": "13401919"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13401919/worklog/704680",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wjones127 commented on a change in pull request #11894:\nURL: https://github.com/apache/arrow/pull/11894#discussion_r779754498\n\n\n\n##########\nFile path: r/R/dataset-scan.R\n##########\n@@ -185,17 +183,36 @@ ScanTask <- R6Class(\"ScanTask\",\n #' `data.frame`? Default `TRUE`\n #' @export\n map_batches <- function(X, FUN, ..., .data.frame = TRUE) {\n-  if (.data.frame) {\n-    lapply <- map_dfr\n-  }\n-  scanner <- Scanner$create(ensure_group_vars(X))\n+  # TODO: possibly refactor do_exec_plan to return a RecordBatchReader\n\nReview comment:\n       JIra created: https://issues.apache.org/jira/browse/ARROW-15271\r\n   \r\n   Added to the comment as well.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-01-06T18:09:17.784+0000",
                    "updated": "2022-01-06T18:09:17.784+0000",
                    "started": "2022-01-06T18:09:17.784+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "704680",
                    "issueId": "13401919"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13401919/worklog/704686",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wjones127 commented on a change in pull request #11894:\nURL: https://github.com/apache/arrow/pull/11894#discussion_r779761467\n\n\n\n##########\nFile path: r/R/dataset-scan.R\n##########\n@@ -174,8 +174,6 @@ ScanTask <- R6Class(\"ScanTask\",\n #' a `data.frame` for further aggregation, even if you couldn't fit the whole\n #' `Dataset` result in memory.\n #'\n-#' This is experimental and not recommended for production use.\n\nReview comment:\n       Okay, I've marked both as experimental. \n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-01-06T18:21:15.764+0000",
                    "updated": "2022-01-06T18:21:15.764+0000",
                    "started": "2022-01-06T18:21:15.764+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "704686",
                    "issueId": "13401919"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13401919/worklog/704693",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wjones127 commented on a change in pull request #11894:\nURL: https://github.com/apache/arrow/pull/11894#discussion_r779764431\n\n\n\n##########\nFile path: r/tests/testthat/test-dataset.R\n##########\n@@ -453,15 +453,38 @@ test_that(\"Creating UnionDataset\", {\n })\n \n test_that(\"map_batches\", {\n-  skip(\"map_batches() is broken (ARROW-14029)\")\n   ds <- open_dataset(dataset_dir, partitioning = \"part\")\n+\n+  # summarize returns arrow_dplyr_query\n   expect_equal(\n     ds %>%\n       filter(int > 5) %>%\n       select(int, lgl) %>%\n-      map_batches(~ summarize(., min_int = min(int))),\n+      map_batches(~ summarize(., min_int = min(int))) %>%\n+      arrange(min_int),\n     tibble(min_int = c(6L, 101L))\n   )\n+\n+  # $num_rows returns integer vector\n+  expect_equal(\n+    ds %>%\n+      filter(int > 5) %>%\n+      select(int, lgl) %>%\n+      map_batches(~ .$num_rows, .data.frame = FALSE) %>%\n+      as.numeric() %>%\n+      sort(),\n+    c(5, 10)\n+  )\n+\n+  # $Take returns RecordBatch\n\nReview comment:\n       Yes, I've added a couple clarifying comments.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-01-06T18:26:11.355+0000",
                    "updated": "2022-01-06T18:26:11.355+0000",
                    "started": "2022-01-06T18:26:11.355+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "704693",
                    "issueId": "13401919"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13401919/worklog/704830",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jonkeane commented on a change in pull request #11894:\nURL: https://github.com/apache/arrow/pull/11894#discussion_r779925693\n\n\n\n##########\nFile path: r/R/dataset-scan.R\n##########\n@@ -185,17 +185,36 @@ ScanTask <- R6Class(\"ScanTask\",\n #' `data.frame`? Default `TRUE`\n #' @export\n map_batches <- function(X, FUN, ..., .data.frame = TRUE) {\n-  if (.data.frame) {\n-    lapply <- map_dfr\n-  }\n-  scanner <- Scanner$create(ensure_group_vars(X))\n+  # TODO(ARROW-15271): possibly refactor do_exec_plan to return a RecordBatchReader\n\nReview comment:\n       ```suggestion\r\n     # TODO: ARROW-15271 possibly refactor do_exec_plan to return a RecordBatchReader\r\n   ```\r\n   \r\n   Super minor, but most of our TODOs have the semicolon and then the issue number (though there are others that do it with a space too)\n\n##########\nFile path: r/tests/testthat/test-dataset.R\n##########\n@@ -453,15 +453,38 @@ test_that(\"Creating UnionDataset\", {\n })\n \n test_that(\"map_batches\", {\n-  skip(\"map_batches() is broken (ARROW-14029)\")\n   ds <- open_dataset(dataset_dir, partitioning = \"part\")\n+\n+  # summarize returns arrow_dplyr_query, which gets collected into a tibble\n   expect_equal(\n     ds %>%\n       filter(int > 5) %>%\n       select(int, lgl) %>%\n-      map_batches(~ summarize(., min_int = min(int))),\n+      map_batches(~ summarize(., min_int = min(int))) %>%\n+      arrange(min_int),\n     tibble(min_int = c(6L, 101L))\n   )\n+\n+  # $num_rows returns integer vector\n+  expect_equal(\n+    ds %>%\n+      filter(int > 5) %>%\n+      select(int, lgl) %>%\n+      map_batches(~ .$num_rows, .data.frame = FALSE) %>%\n+      unlist() %>% # Returns list because .data.frame is FALSE\n\nReview comment:\n       Thanks for this fantastic _extra_ clarification!\n\n##########\nFile path: r/vignettes/dataset.Rmd\n##########\n@@ -290,6 +290,64 @@ rows match the filter. Relatedly, since Parquet files contain row groups with\n statistics on the data within, there may be entire chunks of data you can\n avoid scanning because they have no rows where `total_amount > 100`.\n \n+### Processing data in batches\n\nReview comment:\n       I like it a lot. And I think it totally belongs here in a vignette (especially in the tone you have here). But it wouldn't be bad to make an issue to add to the cookbook as well (though don't feel obligated to do that right now if you don't want to!). \n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-01-06T23:12:21.566+0000",
                    "updated": "2022-01-06T23:12:21.566+0000",
                    "started": "2022-01-06T23:12:21.566+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "704830",
                    "issueId": "13401919"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13401919/worklog/704835",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wjones127 commented on a change in pull request #11894:\nURL: https://github.com/apache/arrow/pull/11894#discussion_r779937113\n\n\n\n##########\nFile path: r/vignettes/dataset.Rmd\n##########\n@@ -290,6 +290,64 @@ rows match the filter. Relatedly, since Parquet files contain row groups with\n statistics on the data within, there may be entire chunks of data you can\n avoid scanning because they have no rows where `total_amount > 100`.\n \n+### Processing data in batches\n\nReview comment:\n       Created: https://issues.apache.org/jira/browse/ARROW-15276\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-01-06T23:39:48.186+0000",
                    "updated": "2022-01-06T23:39:48.186+0000",
                    "started": "2022-01-06T23:39:48.186+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "704835",
                    "issueId": "13401919"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13401919/worklog/705038",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jonkeane closed pull request #11894:\nURL: https://github.com/apache/arrow/pull/11894\n\n\n   \n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-01-07T14:08:26.633+0000",
                    "updated": "2022-01-07T14:08:26.633+0000",
                    "started": "2022-01-07T14:08:26.633+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "705038",
                    "issueId": "13401919"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13401919/worklog/705040",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ursabot commented on pull request #11894:\nURL: https://github.com/apache/arrow/pull/11894#issuecomment-1007435606\n\n\n   Benchmark runs are scheduled for baseline = e64480db51fc9622d02613f3ec60bac34d765092 and contender = f0544403b36c1d994f01d37d7ee77c08a87a6d29. f0544403b36c1d994f01d37d7ee77c08a87a6d29 is a master commit associated with this PR. Results will be available as each benchmark for each run completes.\n   Conbench compare runs links:\n   [Scheduled] [ec2-t3-xlarge-us-east-2](https://conbench.ursa.dev/compare/runs/37f7dcb0c33f4b01895fe2e3068890c7...3b36061e66314479946e0ec6cbbc6e17/)\n   [Scheduled] [ursa-i9-9960x](https://conbench.ursa.dev/compare/runs/c606099ce8a342fb869028700c6f0019...d60a2216582c451fab4993227b980b53/)\n   [Scheduled] [ursa-thinkcentre-m75q](https://conbench.ursa.dev/compare/runs/d9415ec5d54e4a78aed84f59f692a6bb...9c3dd5a85e014468a71372bddaef6875/)\n   Supported benchmarks:\n   ec2-t3-xlarge-us-east-2: Supported benchmark langs: Python. Runs only benchmarks with cloud = True\n   ursa-i9-9960x: Supported benchmark langs: Python, R, JavaScript\n   ursa-thinkcentre-m75q: Supported benchmark langs: C++, Java\n   \n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-01-07T14:11:29.089+0000",
                    "updated": "2022-01-07T14:11:29.089+0000",
                    "started": "2022-01-07T14:11:29.088+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "705040",
                    "issueId": "13401919"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13401919/worklog/705049",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ursabot edited a comment on pull request #11894:\nURL: https://github.com/apache/arrow/pull/11894#issuecomment-1007435606\n\n\n   Benchmark runs are scheduled for baseline = e64480db51fc9622d02613f3ec60bac34d765092 and contender = f0544403b36c1d994f01d37d7ee77c08a87a6d29. f0544403b36c1d994f01d37d7ee77c08a87a6d29 is a master commit associated with this PR. Results will be available as each benchmark for each run completes.\n   Conbench compare runs links:\n   [Finished :arrow_down:0.0% :arrow_up:0.0%] [ec2-t3-xlarge-us-east-2](https://conbench.ursa.dev/compare/runs/37f7dcb0c33f4b01895fe2e3068890c7...3b36061e66314479946e0ec6cbbc6e17/)\n   [Scheduled] [ursa-i9-9960x](https://conbench.ursa.dev/compare/runs/c606099ce8a342fb869028700c6f0019...d60a2216582c451fab4993227b980b53/)\n   [Scheduled] [ursa-thinkcentre-m75q](https://conbench.ursa.dev/compare/runs/d9415ec5d54e4a78aed84f59f692a6bb...9c3dd5a85e014468a71372bddaef6875/)\n   Supported benchmarks:\n   ec2-t3-xlarge-us-east-2: Supported benchmark langs: Python. Runs only benchmarks with cloud = True\n   ursa-i9-9960x: Supported benchmark langs: Python, R, JavaScript\n   ursa-thinkcentre-m75q: Supported benchmark langs: C++, Java\n   \n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-01-07T14:31:21.059+0000",
                    "updated": "2022-01-07T14:31:21.059+0000",
                    "started": "2022-01-07T14:31:21.058+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "705049",
                    "issueId": "13401919"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
            "id": "1",
            "description": "A problem which impairs or prevents the functions of the product.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
            "name": "Bug",
            "subtask": false,
            "avatarId": 21133
        },
        "timespent": 15000,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@78be5964[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@41a36491[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@5e61d62a[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@43ca69b[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@6a1841eb[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@4821277c[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@182168d4[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@79c81d35[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@51f70cfe[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@102ccb7b[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@3586662[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@3ac0f289[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 15000,
        "customfield_12312520": null,
        "customfield_12312521": "Fri Jan 07 14:08:09 UTC 2022",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2022-01-07T14:08:09.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-14029/watchers",
            "watchCount": 3,
            "isWatching": false
        },
        "created": "2021-09-17T20:16:32.000+0000",
        "updated": "2022-01-08T10:32:25.000+0000",
        "timeoriginalestimate": null,
        "description": "The experimental {{map_batches()}} function is broken. The\u00a0[one test for it|https://github.com/apache/arrow/blob/f8f2617d46e49616ab325e46542cf746293d0ebc/r/tests/testthat/test-dataset.R#L623-L636] has not been failing only because it calls the {{min()}} function which had no binding and thus triggered {{abandon_ship()}} to throw a warning and pull the data into R, preempting the error that would have happened later.",
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "4h 10m",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 15000
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[R] Repair map_batches()",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13401919/comment/17419414",
                    "id": "17419414",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=icook",
                        "name": "icook",
                        "key": "icook",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=icook&avatarId=29388",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=icook&avatarId=29388",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=icook&avatarId=29388",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=icook&avatarId=29388"
                        },
                        "displayName": "Ian Cook",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "[~npr]\u00a0do you think this is critical for 6.0.0?",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=icook",
                        "name": "icook",
                        "key": "icook",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=icook&avatarId=29388",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=icook&avatarId=29388",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=icook&avatarId=29388",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=icook&avatarId=29388"
                        },
                        "displayName": "Ian Cook",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2021-09-23T19:02:28.247+0000",
                    "updated": "2021-09-23T19:02:28.247+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13401919/comment/17419417",
                    "id": "17419417",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=npr",
                        "name": "npr",
                        "key": "npr",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
                        },
                        "displayName": "Neal Richardson",
                        "active": true,
                        "timeZone": "America/Los_Angeles"
                    },
                    "body": "No, but I've left it in scope in case I can squeeze it in after ARROW-14008 merges. If not, I'll bump it.",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=npr",
                        "name": "npr",
                        "key": "npr",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
                        },
                        "displayName": "Neal Richardson",
                        "active": true,
                        "timeZone": "America/Los_Angeles"
                    },
                    "created": "2021-09-23T19:14:32.734+0000",
                    "updated": "2021-09-23T19:14:32.734+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13401919/comment/17470632",
                    "id": "17470632",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=jonkeane",
                        "name": "jonkeane",
                        "key": "jonkeane",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34057",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34057",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34057",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34057"
                        },
                        "displayName": "Jonathan Keane",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "Issue resolved by pull request 11894\n[https://github.com/apache/arrow/pull/11894]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=jonkeane",
                        "name": "jonkeane",
                        "key": "jonkeane",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34057",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34057",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34057",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34057"
                        },
                        "displayName": "Jonathan Keane",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2022-01-07T14:08:09.043+0000",
                    "updated": "2022-01-07T14:08:09.043+0000"
                }
            ],
            "maxResults": 3,
            "total": 3,
            "startAt": 0
        },
        "customfield_12311820": "0|z0v1u0:",
        "customfield_12314139": null
    }
}