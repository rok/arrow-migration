{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13396405",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13396405",
    "key": "ARROW-13685",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12350323",
                "id": "12350323",
                "description": "",
                "name": "6.0.0",
                "archived": false,
                "released": true,
                "releaseDate": "2021-10-26"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "name": "Major",
            "id": "3"
        },
        "labels": [
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12349983",
                "id": "12349983",
                "description": "",
                "name": "5.0.0",
                "archived": false,
                "released": true,
                "releaseDate": "2021-07-28"
            }
        ],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=westonpace",
            "name": "westonpace",
            "key": "westonpace",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
            },
            "displayName": "Weston Pace",
            "active": true,
            "timeZone": "America/Los_Angeles"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12328935",
                "id": "12328935",
                "name": "C++"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=coverman",
            "name": "coverman",
            "key": "coverman",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
            },
            "displayName": "Caleb Overman",
            "active": true,
            "timeZone": "America/Chicago"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=coverman",
            "name": "coverman",
            "key": "coverman",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
            },
            "displayName": "Caleb Overman",
            "active": true,
            "timeZone": "America/Chicago"
        },
        "aggregateprogress": {
            "progress": 18600,
            "total": 18600,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 18600,
            "total": 18600,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-13685/votes",
            "votes": 1,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 31,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13396405/worklog/649558",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "westonpace opened a new pull request #11136:\nURL: https://github.com/apache/arrow/pull/11136\n\n\n   I still need to add a regression test.  I've been able to test by configuring my server with minio client.  I think it'd probably be easiest to create a crossbow test for this situation.  Current steps:\r\n   \r\n   ```\r\n   mc alias set myminio http://localhost:9000 minioadmin minioadmin\r\n   mc admin policy add myminio/ no-create-buckets ci/etc/minio-no-create-bucket-policy.json\r\n   mc admin user add myminio/ limited limited123\r\n   mc admin policy set myminio no-create-buckets user=limited\r\n   mc mb myminio/existing-bucket\r\n   ```\r\n   \r\n   Then, in python:\r\n   \r\n   ```\r\n   import pyarrow.fs as fs\r\n   filesystem = fs.S3FileSystem(access_key='limited', secret_key='limited123', endpoint_override='http://localhost:9000')\r\n   filesystem.create_dir('existing-bucket/foo') # This line fails without the change\r\n   ```\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-09-11T03:34:56.846+0000",
                    "updated": "2021-09-11T03:34:56.846+0000",
                    "started": "2021-09-11T03:34:56.846+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "649558",
                    "issueId": "13396405"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13396405/worklog/649559",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "github-actions[bot] commented on pull request #11136:\nURL: https://github.com/apache/arrow/pull/11136#issuecomment-917330704\n\n\n   https://issues.apache.org/jira/browse/ARROW-13685\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-09-11T03:35:21.049+0000",
                    "updated": "2021-09-11T03:35:21.049+0000",
                    "started": "2021-09-11T03:35:21.049+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "649559",
                    "issueId": "13396405"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13396405/worklog/649961",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "lidavidm commented on pull request #11136:\nURL: https://github.com/apache/arrow/pull/11136#issuecomment-918122454\n\n\n   The tests do spawn minio - maybe it would be possible to also ensure/check if `mc` is on the path and run the test that way?\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-09-13T12:03:22.779+0000",
                    "updated": "2021-09-13T12:03:22.779+0000",
                    "started": "2021-09-13T12:03:22.778+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "649961",
                    "issueId": "13396405"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13396405/worklog/650048",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on a change in pull request #11136:\nURL: https://github.com/apache/arrow/pull/11136#discussion_r707390053\n\n\n\n##########\nFile path: cpp/src/arrow/filesystem/s3fs.cc\n##########\n@@ -87,6 +85,7 @@\n #include \"arrow/util/optional.h\"\n #include \"arrow/util/task_group.h\"\n #include \"arrow/util/thread_pool.h\"\n+#include \"arrow/util/windows_fixup.h\"\n\nReview comment:\n       I don't know if moving this line is deliberate but it _might_ break Windows builds (or it might no; I honestly have no idea :-)).\n\n##########\nFile path: cpp/src/arrow/filesystem/s3fs.cc\n##########\n@@ -1530,6 +1529,23 @@ class S3FileSystem::Impl : public std::enable_shared_from_this<S3FileSystem::Imp\n     }\n   }\n \n+  // Tests to see if a bucket exists\n+  Result<bool> BucketExists(const std::string& bucket) {\n+    S3Model::HeadBucketRequest req;\n+    req.SetBucket(ToAwsString(bucket));\n+\n+    auto outcome = client_->HeadBucket(req);\n+    if (!outcome.IsSuccess()) {\n+      if (!IsNotFound(outcome.GetError())) {\n+        return ErrorToStatus(\n+            std::forward_as_tuple(\"When testing for bucket existence '\", bucket, \"': \"),\n\nReview comment:\n       \"for bucket existence 'xxx'\" -> \"for existence of bucket 'xxx'\" perhaps ?\n\n##########\nFile path: ci/etc/minio-no-create-bucket-policy.json\n##########\n@@ -0,0 +1,20 @@\n+{\n\nReview comment:\n       Hmm, this file doesn't seem used anywhere. Did you forget to add some other files?\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-09-13T14:31:33.544+0000",
                    "updated": "2021-09-13T14:31:33.544+0000",
                    "started": "2021-09-13T14:31:33.544+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "650048",
                    "issueId": "13396405"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13396405/worklog/651596",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "westonpace commented on a change in pull request #11136:\nURL: https://github.com/apache/arrow/pull/11136#discussion_r710006645\n\n\n\n##########\nFile path: ci/etc/minio-no-create-bucket-policy.json\n##########\n@@ -0,0 +1,20 @@\n+{\n\nReview comment:\n       It was intended for an eventual regression test (which I've now added).\n\n##########\nFile path: cpp/src/arrow/filesystem/s3fs.cc\n##########\n@@ -1530,6 +1529,23 @@ class S3FileSystem::Impl : public std::enable_shared_from_this<S3FileSystem::Imp\n     }\n   }\n \n+  // Tests to see if a bucket exists\n+  Result<bool> BucketExists(const std::string& bucket) {\n+    S3Model::HeadBucketRequest req;\n+    req.SetBucket(ToAwsString(bucket));\n+\n+    auto outcome = client_->HeadBucket(req);\n+    if (!outcome.IsSuccess()) {\n+      if (!IsNotFound(outcome.GetError())) {\n+        return ErrorToStatus(\n+            std::forward_as_tuple(\"When testing for bucket existence '\", bucket, \"': \"),\n\nReview comment:\n       Fixed up\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-09-16T10:54:11.636+0000",
                    "updated": "2021-09-16T10:54:11.636+0000",
                    "started": "2021-09-16T10:54:11.636+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "651596",
                    "issueId": "13396405"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13396405/worklog/651598",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "westonpace commented on a change in pull request #11136:\nURL: https://github.com/apache/arrow/pull/11136#discussion_r710006852\n\n\n\n##########\nFile path: cpp/src/arrow/filesystem/s3fs.cc\n##########\n@@ -87,6 +85,7 @@\n #include \"arrow/util/optional.h\"\n #include \"arrow/util/task_group.h\"\n #include \"arrow/util/thread_pool.h\"\n+#include \"arrow/util/windows_fixup.h\"\n\nReview comment:\n       I undid this change (over-zealous IDE)\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-09-16T10:54:29.871+0000",
                    "updated": "2021-09-16T10:54:29.871+0000",
                    "started": "2021-09-16T10:54:29.871+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "651598",
                    "issueId": "13396405"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13396405/worklog/651599",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "westonpace commented on pull request #11136:\nURL: https://github.com/apache/arrow/pull/11136#issuecomment-920796166\n\n\n   @kszucs Any chance you'd be able to take a look at this integration test?  It works but I'm not sure if you have any suggestions for doing it better.\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-09-16T10:55:38.320+0000",
                    "updated": "2021-09-16T10:55:38.320+0000",
                    "started": "2021-09-16T10:55:38.319+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "651599",
                    "issueId": "13396405"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13396405/worklog/651600",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "westonpace commented on pull request #11136:\nURL: https://github.com/apache/arrow/pull/11136#issuecomment-920797500\n\n\n   @lidavidm I considered running mc programmatically but since I have to run several different commands and there is quite a bit of boilerplate in s3_test_util.h I worried it would end up being more complex than a solution like this (using a nightly build job).  Also, it would add one more step for anyone wanting to run tests for local development.\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-09-16T10:57:48.650+0000",
                    "updated": "2021-09-16T10:57:48.650+0000",
                    "started": "2021-09-16T10:57:48.650+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "651600",
                    "issueId": "13396405"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13396405/worklog/651714",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on a change in pull request #11136:\nURL: https://github.com/apache/arrow/pull/11136#discussion_r710159406\n\n\n\n##########\nFile path: ci/scripts/integration_minio.py\n##########\n@@ -0,0 +1,24 @@\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#   http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing,\n+# software distributed under the License is distributed on an\n+# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+# KIND, either express or implied.  See the License for the\n+# specific language governing permissions and limitations\n+# under the License.\n+\n+# This file is called from the integration_minio crossbow job\n+\n+import pyarrow.fs as fs\n+\n+def test_can_create_bucket():\n+    filesystem = fs.S3FileSystem(access_key='limited', secret_key='limited123', endpoint_override='http://127.0.0.1:9000')\n+    filesystem.create_dir('existing-bucket/foo') # This line fails without the change\n\nReview comment:\n       Also, note the comment is a bit cryptic (what is \"the change\"? there should be probably be a JIRA reference here)\n\n##########\nFile path: ci/scripts/integration_minio.py\n##########\n@@ -0,0 +1,24 @@\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#   http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing,\n+# software distributed under the License is distributed on an\n+# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+# KIND, either express or implied.  See the License for the\n+# specific language governing permissions and limitations\n+# under the License.\n+\n+# This file is called from the integration_minio crossbow job\n+\n+import pyarrow.fs as fs\n+\n+def test_can_create_bucket():\n+    filesystem = fs.S3FileSystem(access_key='limited', secret_key='limited123', endpoint_override='http://127.0.0.1:9000')\n+    filesystem.create_dir('existing-bucket/foo') # This line fails without the change\n\nReview comment:\n       These files are probably not linted by `archery lint`, but can you ensure line length doesn't go over 80-85 characters?\n\n##########\nFile path: ci/scripts/integration_minio.sh\n##########\n@@ -0,0 +1,63 @@\n+#!/usr/bin/env bash\n+#\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#   http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing,\n+# software distributed under the License is distributed on an\n+# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+# KIND, either express or implied.  See the License for the\n+# specific language governing permissions and limitations\n+# under the License.\n+\n+set -e\n+\n+source_dir=${1}\n+build_dir=${2}\n+\n+mkdir ./minio_integration\n+\n+# Not ideal but need to run minio server in the background\n+# and ensure it is up and running.\n+minio server ./minio_integration --address 127.0.0.1:9000 &\n+sleep 30\n+\n+echo '{\n+  \"Version\": \"2012-10-17\",\n+  \"Statement\": [\n+    {\n+      \"Effect\": \"Allow\",\n+      \"Action\": [\n+          \"s3:ListAllMyBuckets\",\n+\t  \"s3:PutObject\",\n+\t  \"s3:GetObject\",\n+\t  \"s3:ListBucket\",\n+\t  \"s3:PutObjectTagging\",\n+\t  \"s3:DeleteObject\",\n+\t  \"s3:GetObjectVersion\"\n+      ],\n+      \"Resource\": [\n+        \"arn:aws:s3:::*\"\n+      ]\n+    }\n+  ]\n+}' > ./limited_policy.json\n+\n+# Create a user with limited permissions\n+mc alias set myminio http://127.0.0.1:9000 minioadmin minioadmin\n+mc admin policy add myminio/ no-create-buckets ./limited_policy.json\n+mc admin user add myminio/ limited limited123\n+mc admin policy set myminio no-create-buckets user=limited\n+# Create a bucket\n+mc mb myminio/existing-bucket\n+\n+# Run Arrow tests relying on limited permissions user\n+\n+python -mpytest ${source_dir}/ci/scripts/integration_minio.py\n\nReview comment:\n       I am not entirely sure an integration is deserved for this (after all we're just checking a single regression), though I have no strong opinion. @jorisvandenbossche What do you think?\n\n##########\nFile path: ci/docker/conda-python-minio.dockerfile\n##########\n@@ -0,0 +1,22 @@\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#   http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing,\n+# software distributed under the License is distributed on an\n+# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+# KIND, either express or implied.  See the License for the\n+# specific language governing permissions and limitations\n+# under the License.\n+\n+ARG repo\n+ARG arch=amd64\n+ARG python=3.6\n+FROM ${repo}:${arch}-conda-python-${python}\n\nReview comment:\n       Is this file useful, since it doesn't seem to add anything to `conda-python.dockerfile`?\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-09-16T14:14:31.704+0000",
                    "updated": "2021-09-16T14:14:31.704+0000",
                    "started": "2021-09-16T14:14:31.704+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "651714",
                    "issueId": "13396405"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13396405/worklog/652513",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "westonpace commented on a change in pull request #11136:\nURL: https://github.com/apache/arrow/pull/11136#discussion_r711418122\n\n\n\n##########\nFile path: ci/docker/conda-python-minio.dockerfile\n##########\n@@ -0,0 +1,22 @@\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#   http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing,\n+# software distributed under the License is distributed on an\n+# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+# KIND, either express or implied.  See the License for the\n+# specific language governing permissions and limitations\n+# under the License.\n+\n+ARG repo\n+ARG arch=amd64\n+ARG python=3.6\n+FROM ${repo}:${arch}-conda-python-${python}\n\nReview comment:\n       Good catch.  I removed this file.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-09-18T01:17:45.315+0000",
                    "updated": "2021-09-18T01:17:45.315+0000",
                    "started": "2021-09-18T01:17:45.314+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "652513",
                    "issueId": "13396405"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13396405/worklog/652514",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "westonpace commented on a change in pull request #11136:\nURL: https://github.com/apache/arrow/pull/11136#discussion_r711418182\n\n\n\n##########\nFile path: ci/scripts/integration_minio.py\n##########\n@@ -0,0 +1,24 @@\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#   http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing,\n+# software distributed under the License is distributed on an\n+# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+# KIND, either express or implied.  See the License for the\n+# specific language governing permissions and limitations\n+# under the License.\n+\n+# This file is called from the integration_minio crossbow job\n+\n+import pyarrow.fs as fs\n+\n+def test_can_create_bucket():\n+    filesystem = fs.S3FileSystem(access_key='limited', secret_key='limited123', endpoint_override='http://127.0.0.1:9000')\n+    filesystem.create_dir('existing-bucket/foo') # This line fails without the change\n\nReview comment:\n       I removed the comment and cleaned up the line lengths.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-09-18T01:18:18.823+0000",
                    "updated": "2021-09-18T01:18:18.823+0000",
                    "started": "2021-09-18T01:18:18.822+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "652514",
                    "issueId": "13396405"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13396405/worklog/652515",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "westonpace commented on a change in pull request #11136:\nURL: https://github.com/apache/arrow/pull/11136#discussion_r711418294\n\n\n\n##########\nFile path: ci/scripts/integration_minio.sh\n##########\n@@ -0,0 +1,63 @@\n+#!/usr/bin/env bash\n+#\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#   http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing,\n+# software distributed under the License is distributed on an\n+# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+# KIND, either express or implied.  See the License for the\n+# specific language governing permissions and limitations\n+# under the License.\n+\n+set -e\n+\n+source_dir=${1}\n+build_dir=${2}\n+\n+mkdir ./minio_integration\n+\n+# Not ideal but need to run minio server in the background\n+# and ensure it is up and running.\n+minio server ./minio_integration --address 127.0.0.1:9000 &\n+sleep 30\n+\n+echo '{\n+  \"Version\": \"2012-10-17\",\n+  \"Statement\": [\n+    {\n+      \"Effect\": \"Allow\",\n+      \"Action\": [\n+          \"s3:ListAllMyBuckets\",\n+\t  \"s3:PutObject\",\n+\t  \"s3:GetObject\",\n+\t  \"s3:ListBucket\",\n+\t  \"s3:PutObjectTagging\",\n+\t  \"s3:DeleteObject\",\n+\t  \"s3:GetObjectVersion\"\n+      ],\n+      \"Resource\": [\n+        \"arn:aws:s3:::*\"\n+      ]\n+    }\n+  ]\n+}' > ./limited_policy.json\n+\n+# Create a user with limited permissions\n+mc alias set myminio http://127.0.0.1:9000 minioadmin minioadmin\n+mc admin policy add myminio/ no-create-buckets ./limited_policy.json\n+mc admin user add myminio/ limited limited123\n+mc admin policy set myminio no-create-buckets user=limited\n+# Create a bucket\n+mc mb myminio/existing-bucket\n+\n+# Run Arrow tests relying on limited permissions user\n+\n+python -mpytest ${source_dir}/ci/scripts/integration_minio.py\n\nReview comment:\n       I agree it is a bit of overhead for a single regression.  My thinking is that it will be a good starting point that can be extended in the future in case we run into future issues that either require running against a real S3 instance / configuration or require specific permissions.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-09-18T01:19:13.665+0000",
                    "updated": "2021-09-18T01:19:13.665+0000",
                    "started": "2021-09-18T01:19:13.664+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "652515",
                    "issueId": "13396405"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13396405/worklog/652891",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on a change in pull request #11136:\nURL: https://github.com/apache/arrow/pull/11136#discussion_r712088692\n\n\n\n##########\nFile path: ci/scripts/integration_minio.sh\n##########\n@@ -0,0 +1,63 @@\n+#!/usr/bin/env bash\n+#\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#   http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing,\n+# software distributed under the License is distributed on an\n+# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+# KIND, either express or implied.  See the License for the\n+# specific language governing permissions and limitations\n+# under the License.\n+\n+set -e\n+\n+source_dir=${1}\n+build_dir=${2}\n+\n+mkdir ./minio_integration\n+\n+# Not ideal but need to run minio server in the background\n+# and ensure it is up and running.\n+minio server ./minio_integration --address 127.0.0.1:9000 &\n+sleep 30\n+\n+echo '{\n+  \"Version\": \"2012-10-17\",\n+  \"Statement\": [\n+    {\n+      \"Effect\": \"Allow\",\n+      \"Action\": [\n+          \"s3:ListAllMyBuckets\",\n+\t  \"s3:PutObject\",\n+\t  \"s3:GetObject\",\n+\t  \"s3:ListBucket\",\n+\t  \"s3:PutObjectTagging\",\n+\t  \"s3:DeleteObject\",\n+\t  \"s3:GetObjectVersion\"\n+      ],\n+      \"Resource\": [\n+        \"arn:aws:s3:::*\"\n+      ]\n+    }\n+  ]\n+}' > ./limited_policy.json\n+\n+# Create a user with limited permissions\n+mc alias set myminio http://127.0.0.1:9000 minioadmin minioadmin\n+mc admin policy add myminio/ no-create-buckets ./limited_policy.json\n+mc admin user add myminio/ limited limited123\n+mc admin policy set myminio no-create-buckets user=limited\n+# Create a bucket\n+mc mb myminio/existing-bucket\n+\n+# Run Arrow tests relying on limited permissions user\n+\n+python -mpytest ${source_dir}/ci/scripts/integration_minio.py\n\nReview comment:\n       Ah, fair enough.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-09-20T11:40:51.628+0000",
                    "updated": "2021-09-20T11:40:51.628+0000",
                    "started": "2021-09-20T11:40:51.627+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "652891",
                    "issueId": "13396405"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13396405/worklog/652892",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on pull request #11136:\nURL: https://github.com/apache/arrow/pull/11136#issuecomment-922851333\n\n\n   @github-actions crossbow submit test-conda-python-minio\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-09-20T11:41:25.252+0000",
                    "updated": "2021-09-20T11:41:25.252+0000",
                    "started": "2021-09-20T11:41:25.252+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "652892",
                    "issueId": "13396405"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13396405/worklog/652895",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "github-actions[bot] commented on pull request #11136:\nURL: https://github.com/apache/arrow/pull/11136#issuecomment-922851863\n\n\n   Revision: 1c4461ac3c13553a180ec9fb9a007a000a0aefd9\n   \n   Submitted crossbow builds: [ursacomputing/crossbow @ actions-846](https://github.com/ursacomputing/crossbow/branches/all?query=actions-846)\n   \n   |Task|Status|\n   |----|------|\n   |test-conda-python-minio|[![Github Actions](https://github.com/ursacomputing/crossbow/workflows/Crossbow/badge.svg?branch=actions-846-github-test-conda-python-minio)](https://github.com/ursacomputing/crossbow/actions?query=branch:actions-846-github-test-conda-python-minio)|\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-09-20T11:42:15.545+0000",
                    "updated": "2021-09-20T11:42:15.545+0000",
                    "started": "2021-09-20T11:42:15.545+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "652895",
                    "issueId": "13396405"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13396405/worklog/652931",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "kszucs commented on a change in pull request #11136:\nURL: https://github.com/apache/arrow/pull/11136#discussion_r712125039\n\n\n\n##########\nFile path: ci/scripts/install_minio.sh\n##########\n@@ -49,4 +49,6 @@ elif [[ ${version} != \"latest\" ]]; then\n fi\n \n wget -nv -P ${prefix}/bin https://dl.min.io/server/minio/release/${platform}-${arch}/minio\n+wget -nv -P ${prefix}/bin https://dl.min.io/client/mc/release/${platform}-${arch}/mc\n\nReview comment:\n       Handy!\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-09-20T12:36:55.751+0000",
                    "updated": "2021-09-20T12:36:55.751+0000",
                    "started": "2021-09-20T12:36:55.750+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "652931",
                    "issueId": "13396405"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13396405/worklog/652942",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "kszucs commented on pull request #11136:\nURL: https://github.com/apache/arrow/pull/11136#issuecomment-922904334\n\n\n   Couldn't we spin up another properly configured minio server from the pytest test suite and just exercise the regression test on it? \r\n   \r\n   Similarly like [we already do in conftest](https://github.com/apache/arrow/blob/master/python/pyarrow/tests/conftest.py#L276), but with additional configuration.\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-09-20T13:00:25.638+0000",
                    "updated": "2021-09-20T13:00:25.638+0000",
                    "started": "2021-09-20T13:00:25.638+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "652942",
                    "issueId": "13396405"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13396405/worklog/652943",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "kszucs edited a comment on pull request #11136:\nURL: https://github.com/apache/arrow/pull/11136#issuecomment-922904334\n\n\n   Couldn't we spin up another properly configured minio server from the pytest test suite and just exercise the regression test on it? That way we would always run that test, so no need for additional scripts, docker-compose service and crossbow task.\r\n   \r\n   Similarly like [we already do in conftest](https://github.com/apache/arrow/blob/master/python/pyarrow/tests/conftest.py#L276), but with additional configuration.\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-09-20T13:00:59.077+0000",
                    "updated": "2021-09-20T13:00:59.077+0000",
                    "started": "2021-09-20T13:00:59.077+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "652943",
                    "issueId": "13396405"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13396405/worklog/652944",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "kszucs commented on a change in pull request #11136:\nURL: https://github.com/apache/arrow/pull/11136#discussion_r712144024\n\n\n\n##########\nFile path: ci/scripts/integration_minio.py\n##########\n@@ -0,0 +1,31 @@\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#   http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing,\n+# software distributed under the License is distributed on an\n+# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+# KIND, either express or implied.  See the License for the\n+# specific language governing permissions and limitations\n+# under the License.\n+\n+# This file is called from the integration_minio crossbow job\n+# It is intended to test S3 integration features that cannot\n+# be tested in unit tests against a simple minio setup.\n+\n+# For example, issues which require a specific configuration\n+# of API permissions to reproduce.\n+\n+import pyarrow.fs as fs\n+\n+def test_can_create_bucket():\n\nReview comment:\n       I'd rather see this in the pyarrow testing suite.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-09-20T13:01:33.848+0000",
                    "updated": "2021-09-20T13:01:33.848+0000",
                    "started": "2021-09-20T13:01:33.848+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "652944",
                    "issueId": "13396405"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13396405/worklog/652945",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "kszucs commented on a change in pull request #11136:\nURL: https://github.com/apache/arrow/pull/11136#discussion_r712144497\n\n\n\n##########\nFile path: ci/scripts/integration_minio.sh\n##########\n@@ -0,0 +1,63 @@\n+#!/usr/bin/env bash\n+#\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#   http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing,\n+# software distributed under the License is distributed on an\n+# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+# KIND, either express or implied.  See the License for the\n+# specific language governing permissions and limitations\n+# under the License.\n+\n+set -e\n+\n+source_dir=${1}\n+build_dir=${2}\n+\n+mkdir ./minio_integration\n+\n+# Not ideal but need to run minio server in the background\n+# and ensure it is up and running.\n+minio server ./minio_integration --address 127.0.0.1:9000 &\n+sleep 30\n+\n+echo '{\n+  \"Version\": \"2012-10-17\",\n+  \"Statement\": [\n+    {\n+      \"Effect\": \"Allow\",\n+      \"Action\": [\n+          \"s3:ListAllMyBuckets\",\n+\t  \"s3:PutObject\",\n+\t  \"s3:GetObject\",\n+\t  \"s3:ListBucket\",\n+\t  \"s3:PutObjectTagging\",\n+\t  \"s3:DeleteObject\",\n+\t  \"s3:GetObjectVersion\"\n+      ],\n+      \"Resource\": [\n+        \"arn:aws:s3:::*\"\n+      ]\n+    }\n+  ]\n+}' > ./limited_policy.json\n+\n+# Create a user with limited permissions\n+mc alias set myminio http://127.0.0.1:9000 minioadmin minioadmin\n\nReview comment:\n       Any ways to configure the minio server on startup? \n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-09-20T13:01:57.308+0000",
                    "updated": "2021-09-20T13:01:57.308+0000",
                    "started": "2021-09-20T13:01:57.308+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "652945",
                    "issueId": "13396405"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
            "id": "1",
            "description": "A problem which impairs or prevents the functions of the product.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
            "name": "Bug",
            "subtask": false,
            "avatarId": 21133
        },
        "timespent": 18600,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@4789d11f[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@11e5942f[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@277dc9ed[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@1a0465c1[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@35c2a120[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@3416bec1[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@7ded3b0f[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@44fe731e[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@64151100[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@65f44bf5[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@71d53107[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@4604daa0[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 18600,
        "customfield_12312520": null,
        "customfield_12312521": "Thu Oct 07 17:22:45 UTC 2021",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2021-10-01T11:41:15.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-13685/watchers",
            "watchCount": 6,
            "isWatching": false
        },
        "created": "2021-08-20T16:52:41.000+0000",
        "updated": "2022-03-09T01:10:15.000+0000",
        "timeoriginalestimate": null,
        "description": "I'm trying to write a parquet file to an existing S3 bucket using the new S3FileSystem interface. However, this is failing with an AWS Access Denied error (I do have necessary access). It appears to be trying to recreate the bucket which already exists.\r\n{code:java}\r\nimport numpy as np\r\nimport pyarrow as pa\r\nfrom pyarrow import fs\r\nimport pyarrow.dataset as ds\r\n\r\ns3 = fs.S3FileSystem(region=\"us-west-2\")\r\ntable = pa.table({\"a\": range(10), \"b\": np.random.randn(10), \"c\": [1, 2] * 5})\r\nds.write_dataset(\r\n    table,\r\n    \"my-bucket/test.parquet\",\r\n    format=\"parquet\",\r\n    filesystem=s3,\r\n){code}\r\n{code:java}\r\nOSError: When creating bucket 'my-bucket': AWS Error [code 15]: Access Denied\r\n{code}\r\nI'm seeing the same behavior using {{S3FileSystem.create_dir}} when {{recursive=True}}.\r\n{code:java}\r\ns3.create_dir(\"my-bucket/test_dir/\", recursive=True) # Fails\r\ns3.create_dir(\"my-bucket/test_dir/\", recursive=False) # Succeeds\r\n{code}\r\n\u00a0",
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "5h 10m",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 18600
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[C++] Cannot write dataset to S3FileSystem if bucket already exists",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13396405/comment/17402391",
                    "id": "17402391",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=westonpace",
                        "name": "westonpace",
                        "key": "westonpace",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
                        },
                        "displayName": "Weston Pace",
                        "active": true,
                        "timeZone": "America/Los_Angeles"
                    },
                    "body": "Arrow will always try and create the bucket (unless creating a directory with recursive=False).  It then checks to see if the error is BUCKET_ALREADY_EXISTS or BUCKET_ALREADY_OWNED_BY_YOU and, if it is, it treats it as a success.\r\n\r\nDo you perhaps have some more sophisticated permissions set on the bucket?  Maybe your user is allowed to create files inside the bucket but not allowed to modify the bucket and so S3 is returning a permission denied error instead of BUCKET_ALREADY_EXISTS?",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=westonpace",
                        "name": "westonpace",
                        "key": "westonpace",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
                        },
                        "displayName": "Weston Pace",
                        "active": true,
                        "timeZone": "America/Los_Angeles"
                    },
                    "created": "2021-08-20T19:25:53.753+0000",
                    "updated": "2021-08-20T19:25:53.753+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13396405/comment/17403196",
                    "id": "17403196",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=coverman",
                        "name": "coverman",
                        "key": "coverman",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Caleb Overman",
                        "active": true,
                        "timeZone": "America/Chicago"
                    },
                    "body": "You are correct. I've got the following permissions on the bucket:\r\n{code:java}\r\n\"s3:PutObject\",\r\n\"s3:GetObjectAcl\",\r\n\"s3:GetObject\",\r\n\"s3:ListBucket\",\r\n\"s3:PutObjectTagging\",\r\n\"s3:DeleteObject\",\r\n\"s3:GetObjectVersion\"\r\n{code}",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=coverman",
                        "name": "coverman",
                        "key": "coverman",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Caleb Overman",
                        "active": true,
                        "timeZone": "America/Chicago"
                    },
                    "created": "2021-08-23T13:55:55.676+0000",
                    "updated": "2021-08-23T13:55:55.676+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13396405/comment/17403334",
                    "id": "17403334",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=westonpace",
                        "name": "westonpace",
                        "key": "westonpace",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
                        },
                        "displayName": "Weston Pace",
                        "active": true,
                        "timeZone": "America/Los_Angeles"
                    },
                    "body": "Thanks for the detailed information.  I confirm I get the same error when I setup with the permissions you've specified.  Then when I run as a root user everything works correctly.  It appears MinIO accepts the same kinds of policy files as S3 so I should be able to create a unit/regression test for this scenario.",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=westonpace",
                        "name": "westonpace",
                        "key": "westonpace",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
                        },
                        "displayName": "Weston Pace",
                        "active": true,
                        "timeZone": "America/Los_Angeles"
                    },
                    "created": "2021-08-23T18:42:21.975+0000",
                    "updated": "2021-08-23T18:42:21.975+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13396405/comment/17403361",
                    "id": "17403361",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=coverman",
                        "name": "coverman",
                        "key": "coverman",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Caleb Overman",
                        "active": true,
                        "timeZone": "America/Chicago"
                    },
                    "body": "Thank you for looking into this. I'm not familiar with the filesystem implementation, but if there's anything I can do to help please let me know!",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=coverman",
                        "name": "coverman",
                        "key": "coverman",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Caleb Overman",
                        "active": true,
                        "timeZone": "America/Chicago"
                    },
                    "created": "2021-08-23T19:46:13.994+0000",
                    "updated": "2021-08-23T19:46:13.994+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13396405/comment/17411449",
                    "id": "17411449",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=hamlinkn",
                        "name": "hamlinkn",
                        "key": "hamlinkn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10432",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10432",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10432",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10432"
                        },
                        "displayName": "Kyle Hamlin",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "I'm also now running into this issue after having the following issue resolved in 5.0.0: https://issues.apache.org/jira/browse/ARROW-13228\r\n\r\n[~westonpace] Curious what the intended resolution is as it's pretty uncommon to give create bucket permission to a data, ETL, or ML application. I think it would be preferable to have bucket creation separate from writing to a bucket/prefix or to have something like `create_bucket=True` as a parameter to write_dataset. ",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=hamlinkn",
                        "name": "hamlinkn",
                        "key": "hamlinkn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10432",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10432",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10432",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10432"
                        },
                        "displayName": "Kyle Hamlin",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2021-09-07T19:45:12.567+0000",
                    "updated": "2021-09-07T19:45:12.567+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13396405/comment/17411464",
                    "id": "17411464",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=westonpace",
                        "name": "westonpace",
                        "key": "westonpace",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
                        },
                        "displayName": "Weston Pace",
                        "active": true,
                        "timeZone": "America/Los_Angeles"
                    },
                    "body": "Hmm, datasets are filesystem-agnostic so I'd prefer to avoid `create_bucket` as a dataset option.  It could be an option added to the S3 filesystem (create_bucket_if_not_exists or something) but I think my preferred fix for this issue would be to modify S3FileSystem::CreateBucket so that it first does a check to see if the bucket exists.  I suspect the current implementation is the way that it is just to reduce complexity (why make more calls than needed) but it isn't working here so the more complex solution is warranted.  I'll go ahead and put a PR up for this soon.  The trickiest part will probably be the regression test more than the implementation.",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=westonpace",
                        "name": "westonpace",
                        "key": "westonpace",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
                        },
                        "displayName": "Weston Pace",
                        "active": true,
                        "timeZone": "America/Los_Angeles"
                    },
                    "created": "2021-09-07T20:22:28.466+0000",
                    "updated": "2021-09-07T20:22:28.466+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13396405/comment/17413256",
                    "id": "17413256",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=hamlinkn",
                        "name": "hamlinkn",
                        "key": "hamlinkn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10432",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10432",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10432",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10432"
                        },
                        "displayName": "Kyle Hamlin",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "[~westonpace] Checking for a buckets existence sound like a fine solution to me. Do you know what extra, if any, permissions would be required for that check?",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=hamlinkn",
                        "name": "hamlinkn",
                        "key": "hamlinkn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10432",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10432",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10432",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10432"
                        },
                        "displayName": "Kyle Hamlin",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2021-09-10T15:45:24.908+0000",
                    "updated": "2021-09-10T15:45:24.908+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13396405/comment/17413349",
                    "id": "17413349",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=westonpace",
                        "name": "westonpace",
                        "key": "westonpace",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
                        },
                        "displayName": "Weston Pace",
                        "active": true,
                        "timeZone": "America/Los_Angeles"
                    },
                    "body": "It appears [HeadBucket](https://docs.aws.amazon.com/AmazonS3/latest/API/API_HeadBucket.html) is the operation for this and it only requires permission to perform the \"s3:ListBucket\" action so it should suffice for [~coverman]'s case.",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=westonpace",
                        "name": "westonpace",
                        "key": "westonpace",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
                        },
                        "displayName": "Weston Pace",
                        "active": true,
                        "timeZone": "America/Los_Angeles"
                    },
                    "created": "2021-09-10T19:20:37.407+0000",
                    "updated": "2021-09-10T19:20:37.407+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13396405/comment/17423252",
                    "id": "17423252",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=westonpace",
                        "name": "westonpace",
                        "key": "westonpace",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
                        },
                        "displayName": "Weston Pace",
                        "active": true,
                        "timeZone": "America/Los_Angeles"
                    },
                    "body": "Issue resolved by pull request 11136\n[https://github.com/apache/arrow/pull/11136]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=westonpace",
                        "name": "westonpace",
                        "key": "westonpace",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
                        },
                        "displayName": "Weston Pace",
                        "active": true,
                        "timeZone": "America/Los_Angeles"
                    },
                    "created": "2021-10-01T11:41:15.305+0000",
                    "updated": "2021-10-01T11:41:15.305+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13396405/comment/17425435",
                    "id": "17425435",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=1mvdb",
                        "name": "1mvdb",
                        "key": "1mvdb",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Mark van der Broek",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "Not checking for existing buckets actually results in another issue if multiple processes try to create this bucket at exactly the same time.\r\n\r\n\u00a0\r\n\r\nI get the following error:\r\n\r\nOSError: When creating bucket '<MY-BUCKET>': AWS Error [code 100]: Unable to parse ExceptionName: OperationAborted Message: A conflicting conditional operation is currently in progress against this resource. Please try again.",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=1mvdb",
                        "name": "1mvdb",
                        "key": "1mvdb",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Mark van der Broek",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2021-10-07T09:30:31.295+0000",
                    "updated": "2021-10-07T09:30:31.295+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13396405/comment/17425706",
                    "id": "17425706",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=westonpace",
                        "name": "westonpace",
                        "key": "westonpace",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
                        },
                        "displayName": "Weston Pace",
                        "active": true,
                        "timeZone": "America/Los_Angeles"
                    },
                    "body": "[~1mvdb] I expect you would've been able to get this error with the old path too.  I didn't remove the old behavior or any checks, I just added an additional check.  It might be best to create a new JIRA.  It's not clear to me that translating error code 100 into \"bucket already exists\" is the correct thing to do.  We could maybe create an auto-retry if we see \"Please try again\" but from some googling it appears this condition could take 15 minutes or more to resolve in some situations (e.g. when creating a bucket with the same name as a recently deleted bucket).",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=westonpace",
                        "name": "westonpace",
                        "key": "westonpace",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
                        },
                        "displayName": "Weston Pace",
                        "active": true,
                        "timeZone": "America/Los_Angeles"
                    },
                    "created": "2021-10-07T17:22:45.743+0000",
                    "updated": "2021-10-07T17:22:45.743+0000"
                }
            ],
            "maxResults": 11,
            "total": 11,
            "startAt": 0
        },
        "customfield_12311820": "0|z0u3tk:",
        "customfield_12314139": null
    }
}