{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13300262",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13300262",
    "key": "ARROW-8553",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12347769",
                "id": "12347769",
                "description": "",
                "name": "1.0.0",
                "archived": false,
                "released": true,
                "releaseDate": "2020-07-24"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "name": "Major",
            "id": "3"
        },
        "labels": [
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12346687",
                "id": "12346687",
                "description": "",
                "name": "0.17.0",
                "archived": false,
                "released": true,
                "releaseDate": "2020-04-20"
            }
        ],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [
            {
                "id": "12588307",
                "self": "https://issues.apache.org/jira/rest/api/2/issueLink/12588307",
                "type": {
                    "id": "10030",
                    "name": "Reference",
                    "inward": "is related to",
                    "outward": "relates to",
                    "self": "https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"
                },
                "outwardIssue": {
                    "id": "13304129",
                    "key": "ARROW-8762",
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13304129",
                    "fields": {
                        "summary": "[C++][Gandiva] Replace Gandiva's BitmapAnd with common implementation",
                        "status": {
                            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
                            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
                            "name": "Resolved",
                            "id": "5",
                            "statusCategory": {
                                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                                "id": 3,
                                "key": "done",
                                "colorName": "green",
                                "name": "Done"
                            }
                        },
                        "priority": {
                            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
                            "name": "Major",
                            "id": "3"
                        },
                        "issuetype": {
                            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
                            "id": "4",
                            "description": "An improvement or enhancement to an existing feature or task.",
                            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
                            "name": "Improvement",
                            "subtask": false,
                            "avatarId": 21140
                        }
                    }
                }
            }
        ],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=yibocai",
            "name": "yibocai",
            "key": "yibo",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=yibo&avatarId=47542",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=yibo&avatarId=47542",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=yibo&avatarId=47542",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=yibo&avatarId=47542"
            },
            "displayName": "Yibo Cai",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12328935",
                "id": "12328935",
                "name": "C++"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
            "name": "apitrou",
            "key": "pitrou",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
            },
            "displayName": "Antoine Pitrou",
            "active": true,
            "timeZone": "Europe/Paris"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
            "name": "apitrou",
            "key": "pitrou",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
            },
            "displayName": "Antoine Pitrou",
            "active": true,
            "timeZone": "Europe/Paris"
        },
        "aggregateprogress": {
            "progress": 16800,
            "total": 16800,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 16800,
            "total": 16800,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-8553/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 28,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13300262/worklog/432356",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "cyb70289 opened a new pull request #7135:\nURL: https://github.com/apache/arrow/pull/7135\n\n\n   Unaligned bitmap operations are currently calculated bit-by-bit.\r\n   Processing it word-by-word in uint64 improves performance significantly.\r\n   BenchmarkBitmapAnd/32768/1 jumps from 56M/s to 4.1G/s on my test machine.\r\n   \r\n   This patch also improves unit test to cover new code thoroughly.\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-05-09T08:58:32.850+0000",
                    "updated": "2020-05-09T08:58:32.850+0000",
                    "started": "2020-05-09T08:58:32.850+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "432356",
                    "issueId": "13300262"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13300262/worklog/432357",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "cyb70289 commented on pull request #7135:\nURL: https://github.com/apache/arrow/pull/7135#issuecomment-626133175\n\n\n   Benchmark result of `release/arrow-bit-util-benchmark`, on AMD EPYC 7251, gcc-7.5\r\n   \r\n   Before this patch\r\n   ```\r\n   -------------------------------------------------------------------------------------------------\r\n   Benchmark                                       Time             CPU   Iterations UserCounters...\r\n   -------------------------------------------------------------------------------------------------\r\n   BitmapReader/8192                          131771 ns       131691 ns         5350 bytes_per_second=118.649M/s\r\n   VisitBits/8192                             126231 ns       126187 ns         5545 bytes_per_second=123.825M/s\r\n   VisitBitsUnrolled/8192                      46107 ns        46085 ns        15374 bytes_per_second=339.045M/s\r\n   BitmapWriter/8192                           89468 ns        89424 ns         7154 bytes_per_second=87.365M/s\r\n   FirstTimeBitmapWriter/8192                  78184 ns        78144 ns         8994 bytes_per_second=99.9755M/s\r\n   GenerateBits/8192                           84917 ns        84880 ns         8358 bytes_per_second=92.0416M/s\r\n   GenerateBitsUnrolled/8192                   42952 ns        42933 ns        16229 bytes_per_second=181.971M/s\r\n   CopyBitmapWithoutOffset/8192                  191 ns          191 ns      3612121 bytes_per_second=39.9542G/s\r\n   CopyBitmapWithOffset/8192                    8654 ns         8651 ns        81364 bytes_per_second=903.041M/s\r\n   BenchmarkBitmapAnd/32768/0                   4353 ns         4350 ns       161617 bytes_per_second=7.01486G/s\r\n   BenchmarkBitmapAnd/131072/0                 16896 ns        16887 ns        41278 bytes_per_second=7.22851G/s\r\n   BenchmarkBitmapAnd/32768/0                   4268 ns         4267 ns       162600 bytes_per_second=7.1523G/s\r\n   BenchmarkBitmapAnd/131072/0                 17009 ns        16998 ns        41089 bytes_per_second=7.18163G/s\r\n   \r\n   [XXXXXXXXX: unaligned bitmap operation]\r\n   BenchmarkBitmapAnd/32768/1                 552753 ns       552530 ns         1271 bytes_per_second=56.558M/s\r\n   BenchmarkBitmapAnd/131072/1               2230810 ns      2229574 ns          316 bytes_per_second=56.0645M/s\r\n   BenchmarkBitmapAnd/32768/2                 565404 ns       565094 ns         1266 bytes_per_second=55.3005M/s\r\n   BenchmarkBitmapAnd/131072/2               2215504 ns      2214782 ns          303 bytes_per_second=56.439M/s\r\n   \r\n   BenchmarkBitmapVisitBitsetAnd/32768/0     1493021 ns      1492271 ns          469 bytes_per_second=20.9412M/s\r\n   BenchmarkBitmapVisitBitsetAnd/131072/0    5974576 ns      5972560 ns          117 bytes_per_second=20.929M/s\r\n   BenchmarkBitmapVisitBitsetAnd/32768/0     1492997 ns      1492431 ns          469 bytes_per_second=20.939M/s\r\n   BenchmarkBitmapVisitBitsetAnd/131072/0    5977490 ns      5975855 ns          117 bytes_per_second=20.9175M/s\r\n   BenchmarkBitmapVisitBitsetAnd/32768/1     1493233 ns      1492718 ns          469 bytes_per_second=20.935M/s\r\n   BenchmarkBitmapVisitBitsetAnd/131072/1    5975924 ns      5973199 ns          117 bytes_per_second=20.9268M/s\r\n   BenchmarkBitmapVisitBitsetAnd/32768/2     1492305 ns      1491810 ns          467 bytes_per_second=20.9477M/s\r\n   BenchmarkBitmapVisitBitsetAnd/131072/2    5987022 ns      5984924 ns          117 bytes_per_second=20.8858M/s\r\n   BenchmarkBitmapVisitUInt8And/32768/0        83420 ns        83384 ns         8454 bytes_per_second=374.771M/s\r\n   BenchmarkBitmapVisitUInt8And/131072/0      330943 ns       330824 ns         2091 bytes_per_second=377.844M/s\r\n   BenchmarkBitmapVisitUInt8And/32768/0        83640 ns        83612 ns         8347 bytes_per_second=373.749M/s\r\n   BenchmarkBitmapVisitUInt8And/131072/0      330971 ns       330857 ns         2115 bytes_per_second=377.807M/s\r\n   BenchmarkBitmapVisitUInt8And/32768/1       104218 ns       104185 ns         6702 bytes_per_second=299.948M/s\r\n   BenchmarkBitmapVisitUInt8And/131072/1      413367 ns       413210 ns         1691 bytes_per_second=302.509M/s\r\n   BenchmarkBitmapVisitUInt8And/32768/2       104633 ns       104591 ns         6796 bytes_per_second=298.783M/s\r\n   BenchmarkBitmapVisitUInt8And/131072/2      409852 ns       409681 ns         1679 bytes_per_second=305.115M/s\r\n   BenchmarkBitmapVisitUInt64And/32768/0        7205 ns         7202 ns        97108 bytes_per_second=4.2372G/s\r\n   BenchmarkBitmapVisitUInt64And/131072/0      28334 ns        28326 ns        24630 bytes_per_second=4.30952G/s\r\n   BenchmarkBitmapVisitUInt64And/32768/0        7205 ns         7202 ns        97100 bytes_per_second=4.23729G/s\r\n   BenchmarkBitmapVisitUInt64And/131072/0      28334 ns        28324 ns        24693 bytes_per_second=4.30981G/s\r\n   BenchmarkBitmapVisitUInt64And/32768/1       10736 ns        10732 ns        65164 bytes_per_second=2.84349G/s\r\n   BenchmarkBitmapVisitUInt64And/131072/1      36150 ns        36137 ns        19364 bytes_per_second=3.378G/s\r\n   BenchmarkBitmapVisitUInt64And/32768/2       10739 ns        10734 ns        65218 bytes_per_second=2.84299G/s\r\n   BenchmarkBitmapVisitUInt64And/131072/2      36137 ns        36127 ns        19342 bytes_per_second=3.37896G/s\r\n   ```\r\n   \r\n   After this patch\r\n   ```\r\n   -------------------------------------------------------------------------------------------------\r\n   Benchmark                                       Time             CPU   Iterations UserCounters...\r\n   -------------------------------------------------------------------------------------------------\r\n   BitmapReader/8192                          130861 ns       130803 ns         5349 bytes_per_second=119.454M/s\r\n   VisitBits/8192                             125543 ns       125498 ns         5621 bytes_per_second=124.504M/s\r\n   VisitBitsUnrolled/8192                      45482 ns        45463 ns        15377 bytes_per_second=343.69M/s\r\n   BitmapWriter/8192                           89930 ns        89889 ns         7383 bytes_per_second=86.9129M/s\r\n   FirstTimeBitmapWriter/8192                  77582 ns        77547 ns         9009 bytes_per_second=100.745M/s\r\n   GenerateBits/8192                           83244 ns        83210 ns         8393 bytes_per_second=93.8886M/s\r\n   GenerateBitsUnrolled/8192                   42691 ns        42673 ns        15958 bytes_per_second=183.079M/s\r\n   CopyBitmapWithoutOffset/8192                  191 ns          191 ns      3661358 bytes_per_second=39.9303G/s\r\n   CopyBitmapWithOffset/8192                    8582 ns         8578 ns        81828 bytes_per_second=910.725M/s\r\n   BenchmarkBitmapAnd/32768/0                   4078 ns         4077 ns       171965 bytes_per_second=7.48507G/s\r\n   BenchmarkBitmapAnd/131072/0                 17269 ns        17262 ns        41975 bytes_per_second=7.07161G/s\r\n   BenchmarkBitmapAnd/32768/0                   4084 ns         4082 ns       171407 bytes_per_second=7.47578G/s\r\n   BenchmarkBitmapAnd/131072/0                 16135 ns        16129 ns        43454 bytes_per_second=7.5683G/s\r\n   \r\n   [XXXXXXXXX: unaligned bitmap operation]\r\n   BenchmarkBitmapAnd/32768/1                   7304 ns         7301 ns        95839 bytes_per_second=4.17989G/s\r\n   BenchmarkBitmapAnd/131072/1                 28344 ns        28332 ns        24730 bytes_per_second=4.3085G/s\r\n   BenchmarkBitmapAnd/32768/2                   7310 ns         7307 ns        95861 bytes_per_second=4.17663G/s\r\n   BenchmarkBitmapAnd/131072/2                 28289 ns        28274 ns        24733 bytes_per_second=4.31734G/s\r\n   \r\n   BenchmarkBitmapVisitBitsetAnd/32768/0     1495320 ns      1494883 ns          468 bytes_per_second=20.9047M/s\r\n   BenchmarkBitmapVisitBitsetAnd/131072/0    5986673 ns      5984492 ns          117 bytes_per_second=20.8873M/s\r\n   BenchmarkBitmapVisitBitsetAnd/32768/0     1495659 ns      1495153 ns          468 bytes_per_second=20.9009M/s\r\n   BenchmarkBitmapVisitBitsetAnd/131072/0    5985930 ns      5983460 ns          117 bytes_per_second=20.8909M/s\r\n   BenchmarkBitmapVisitBitsetAnd/32768/1     1495922 ns      1495411 ns          468 bytes_per_second=20.8973M/s\r\n   BenchmarkBitmapVisitBitsetAnd/131072/1    5981635 ns      5979222 ns          117 bytes_per_second=20.9057M/s\r\n   BenchmarkBitmapVisitBitsetAnd/32768/2     1494916 ns      1494250 ns          468 bytes_per_second=20.9135M/s\r\n   BenchmarkBitmapVisitBitsetAnd/131072/2    5986896 ns      5984091 ns          117 bytes_per_second=20.8887M/s\r\n   BenchmarkBitmapVisitUInt8And/32768/0        83954 ns        83920 ns         8442 bytes_per_second=372.377M/s\r\n   BenchmarkBitmapVisitUInt8And/131072/0      333061 ns       332921 ns         2081 bytes_per_second=375.465M/s\r\n   BenchmarkBitmapVisitUInt8And/32768/0        84111 ns        84071 ns         8339 bytes_per_second=371.709M/s\r\n   BenchmarkBitmapVisitUInt8And/131072/0      331619 ns       331460 ns         2104 bytes_per_second=377.119M/s\r\n   BenchmarkBitmapVisitUInt8And/32768/1       104625 ns       104585 ns         6699 bytes_per_second=298.801M/s\r\n   BenchmarkBitmapVisitUInt8And/131072/1      416265 ns       416111 ns         1680 bytes_per_second=300.401M/s\r\n   BenchmarkBitmapVisitUInt8And/32768/2       104083 ns       104044 ns         6794 bytes_per_second=300.353M/s\r\n   BenchmarkBitmapVisitUInt8And/131072/2      410391 ns       410236 ns         1679 bytes_per_second=304.703M/s\r\n   BenchmarkBitmapVisitUInt64And/32768/0        7215 ns         7213 ns        97053 bytes_per_second=4.2309G/s\r\n   BenchmarkBitmapVisitUInt64And/131072/0      28384 ns        28371 ns        24663 bytes_per_second=4.30262G/s\r\n   BenchmarkBitmapVisitUInt64And/32768/0        7213 ns         7210 ns        97340 bytes_per_second=4.23244G/s\r\n   BenchmarkBitmapVisitUInt64And/131072/0      28412 ns        28401 ns        24618 bytes_per_second=4.29805G/s\r\n   BenchmarkBitmapVisitUInt64And/32768/1       10703 ns        10698 ns        65420 bytes_per_second=2.85252G/s\r\n   BenchmarkBitmapVisitUInt64And/131072/1      36249 ns        36235 ns        19236 bytes_per_second=3.36889G/s\r\n   BenchmarkBitmapVisitUInt64And/32768/2       10704 ns        10700 ns        65459 bytes_per_second=2.85207G/s\r\n   BenchmarkBitmapVisitUInt64And/131072/2      36243 ns        36228 ns        19315 bytes_per_second=3.36946G/s\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-05-09T09:04:00.901+0000",
                    "updated": "2020-05-09T09:04:00.901+0000",
                    "started": "2020-05-09T09:04:00.901+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "432357",
                    "issueId": "13300262"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13300262/worklog/432358",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "github-actions[bot] commented on pull request #7135:\nURL: https://github.com/apache/arrow/pull/7135#issuecomment-626133990\n\n\n   https://issues.apache.org/jira/browse/ARROW-8553\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-05-09T09:10:02.545+0000",
                    "updated": "2020-05-09T09:10:02.545+0000",
                    "started": "2020-05-09T09:10:02.544+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "432358",
                    "issueId": "13300262"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13300262/worklog/432365",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "cyb70289 commented on a change in pull request #7135:\nURL: https://github.com/apache/arrow/pull/7135#discussion_r422476036\n\n\n\n##########\nFile path: cpp/src/arrow/util/bit_util.cc\n##########\n@@ -273,28 +274,115 @@ void AlignedBitmapOp(const uint8_t* left, int64_t left_offset, const uint8_t* ri\n   }\n }\n \n-template <typename Op>\n+template <template <typename> class BitOp, typename LogicalOp>\n void UnalignedBitmapOp(const uint8_t* left, int64_t left_offset, const uint8_t* right,\n                        int64_t right_offset, uint8_t* out, int64_t out_offset,\n                        int64_t length) {\n-  Op op;\n-  auto left_reader = internal::BitmapReader(left, left_offset, length);\n-  auto right_reader = internal::BitmapReader(right, right_offset, length);\n-  auto writer = internal::BitmapWriter(out, out_offset, length);\n-  for (int64_t i = 0; i < length; ++i) {\n-    if (op(left_reader.IsSet(), right_reader.IsSet())) {\n-      writer.Set();\n-    } else {\n-      writer.Clear();\n+  using Word = uint64_t;\n+\n+  left += left_offset / 8;\n+  right += right_offset / 8;\n+  out += out_offset / 8;\n+\n+  left_offset %= 8;\n+  right_offset %= 8;\n+  out_offset %= 8;\n+\n+  const int64_t min_offset = std::min({left_offset, right_offset, out_offset});\n+  const int64_t min_nbytes = BitUtil::BytesForBits(length + min_offset);\n+  int64_t nwords = min_nbytes / sizeof(Word);\n+\n+  // process in words, we may touch two words in each iteration\n\nReview comment:\n       I'm not using Bitmap::VisitWords() as the first word returned may be not full (e.g, only 63 bits are valid), and there's no easy way to get that valid bit count in visitor callback. It also causes special handling of first (and last) word.\r\n   So I'm handling the raw data here. In each iteration, pick 64 bits from `left` and `right`, and/or/xor them, then write to `out`. Remaining bits are treated bit by bit.\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-05-09T09:42:42.486+0000",
                    "updated": "2020-05-09T09:42:42.486+0000",
                    "started": "2020-05-09T09:42:42.486+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "432365",
                    "issueId": "13300262"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13300262/worklog/432402",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "kiszk commented on a change in pull request #7135:\nURL: https://github.com/apache/arrow/pull/7135#discussion_r422496709\n\n\n\n##########\nFile path: cpp/src/arrow/util/bit_util.cc\n##########\n@@ -273,28 +274,115 @@ void AlignedBitmapOp(const uint8_t* left, int64_t left_offset, const uint8_t* ri\n   }\n }\n \n-template <typename Op>\n+template <template <typename> class BitOp, typename LogicalOp>\n void UnalignedBitmapOp(const uint8_t* left, int64_t left_offset, const uint8_t* right,\n                        int64_t right_offset, uint8_t* out, int64_t out_offset,\n                        int64_t length) {\n-  Op op;\n-  auto left_reader = internal::BitmapReader(left, left_offset, length);\n-  auto right_reader = internal::BitmapReader(right, right_offset, length);\n-  auto writer = internal::BitmapWriter(out, out_offset, length);\n-  for (int64_t i = 0; i < length; ++i) {\n-    if (op(left_reader.IsSet(), right_reader.IsSet())) {\n-      writer.Set();\n-    } else {\n-      writer.Clear();\n+  using Word = uint64_t;\n+\n+  left += left_offset / 8;\n+  right += right_offset / 8;\n+  out += out_offset / 8;\n+\n+  left_offset %= 8;\n+  right_offset %= 8;\n+  out_offset %= 8;\n+\n+  const int64_t min_offset = std::min({left_offset, right_offset, out_offset});\n+  const int64_t min_nbytes = BitUtil::BytesForBits(length + min_offset);\n+  int64_t nwords = min_nbytes / sizeof(Word);\n+\n+  // process in words, we may touch two words in each iteration\n+  if (nwords > 1) {\n+    BitOp<Word> op;\n+    constexpr int64_t bits_per_word = sizeof(Word) * 8;\n+    const Word out_mask = (1U << out_offset) - 1;\n+\n+    length -= (nwords - 1) * bits_per_word;\n+    Word left_word0 = util::SafeLoadAs<Word>(left);\n+    Word right_word0 = util::SafeLoadAs<Word>(right);\n+    Word out_word0 = util::SafeLoadAs<Word>(out);\n+\n+    do {\n\nReview comment:\n       Does the current implementation of this optimization work for both little and big endian?\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-05-09T13:35:40.580+0000",
                    "updated": "2020-05-09T13:35:40.580+0000",
                    "started": "2020-05-09T13:35:40.580+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "432402",
                    "issueId": "13300262"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13300262/worklog/432405",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "cyb70289 commented on a change in pull request #7135:\nURL: https://github.com/apache/arrow/pull/7135#discussion_r422501522\n\n\n\n##########\nFile path: cpp/src/arrow/util/bit_util.cc\n##########\n@@ -273,28 +274,115 @@ void AlignedBitmapOp(const uint8_t* left, int64_t left_offset, const uint8_t* ri\n   }\n }\n \n-template <typename Op>\n+template <template <typename> class BitOp, typename LogicalOp>\n void UnalignedBitmapOp(const uint8_t* left, int64_t left_offset, const uint8_t* right,\n                        int64_t right_offset, uint8_t* out, int64_t out_offset,\n                        int64_t length) {\n-  Op op;\n-  auto left_reader = internal::BitmapReader(left, left_offset, length);\n-  auto right_reader = internal::BitmapReader(right, right_offset, length);\n-  auto writer = internal::BitmapWriter(out, out_offset, length);\n-  for (int64_t i = 0; i < length; ++i) {\n-    if (op(left_reader.IsSet(), right_reader.IsSet())) {\n-      writer.Set();\n-    } else {\n-      writer.Clear();\n+  using Word = uint64_t;\n+\n+  left += left_offset / 8;\n+  right += right_offset / 8;\n+  out += out_offset / 8;\n+\n+  left_offset %= 8;\n+  right_offset %= 8;\n+  out_offset %= 8;\n+\n+  const int64_t min_offset = std::min({left_offset, right_offset, out_offset});\n+  const int64_t min_nbytes = BitUtil::BytesForBits(length + min_offset);\n+  int64_t nwords = min_nbytes / sizeof(Word);\n+\n+  // process in words, we may touch two words in each iteration\n+  if (nwords > 1) {\n+    BitOp<Word> op;\n+    constexpr int64_t bits_per_word = sizeof(Word) * 8;\n+    const Word out_mask = (1U << out_offset) - 1;\n+\n+    length -= (nwords - 1) * bits_per_word;\n+    Word left_word0 = util::SafeLoadAs<Word>(left);\n+    Word right_word0 = util::SafeLoadAs<Word>(right);\n+    Word out_word0 = util::SafeLoadAs<Word>(out);\n+\n+    do {\n\nReview comment:\n       I think this code should be safe for big endian machine. But no hardware to test.\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-05-09T14:22:16.951+0000",
                    "updated": "2020-05-09T14:22:16.951+0000",
                    "started": "2020-05-09T14:22:16.950+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "432405",
                    "issueId": "13300262"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13300262/worklog/432476",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "kiszk commented on a change in pull request #7135:\nURL: https://github.com/apache/arrow/pull/7135#discussion_r422574885\n\n\n\n##########\nFile path: cpp/src/arrow/util/bit_util.cc\n##########\n@@ -273,28 +274,115 @@ void AlignedBitmapOp(const uint8_t* left, int64_t left_offset, const uint8_t* ri\n   }\n }\n \n-template <typename Op>\n+template <template <typename> class BitOp, typename LogicalOp>\n void UnalignedBitmapOp(const uint8_t* left, int64_t left_offset, const uint8_t* right,\n                        int64_t right_offset, uint8_t* out, int64_t out_offset,\n                        int64_t length) {\n-  Op op;\n-  auto left_reader = internal::BitmapReader(left, left_offset, length);\n-  auto right_reader = internal::BitmapReader(right, right_offset, length);\n-  auto writer = internal::BitmapWriter(out, out_offset, length);\n-  for (int64_t i = 0; i < length; ++i) {\n-    if (op(left_reader.IsSet(), right_reader.IsSet())) {\n-      writer.Set();\n-    } else {\n-      writer.Clear();\n+  using Word = uint64_t;\n+\n+  left += left_offset / 8;\n+  right += right_offset / 8;\n+  out += out_offset / 8;\n+\n+  left_offset %= 8;\n+  right_offset %= 8;\n+  out_offset %= 8;\n+\n+  const int64_t min_offset = std::min({left_offset, right_offset, out_offset});\n+  const int64_t min_nbytes = BitUtil::BytesForBits(length + min_offset);\n+  int64_t nwords = min_nbytes / sizeof(Word);\n+\n+  // process in words, we may touch two words in each iteration\n+  if (nwords > 1) {\n+    BitOp<Word> op;\n+    constexpr int64_t bits_per_word = sizeof(Word) * 8;\n+    const Word out_mask = (1U << out_offset) - 1;\n+\n+    length -= (nwords - 1) * bits_per_word;\n+    Word left_word0 = util::SafeLoadAs<Word>(left);\n+    Word right_word0 = util::SafeLoadAs<Word>(right);\n+    Word out_word0 = util::SafeLoadAs<Word>(out);\n+\n+    do {\n\nReview comment:\n       [Tests](https://travis-ci.org/github/apache/arrow/builds/684989945) have just started on TravisCI. Unfortunately, we are seeing a lot of error messages that are not related to this PR. \n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-05-10T02:44:12.506+0000",
                    "updated": "2020-05-10T02:44:12.506+0000",
                    "started": "2020-05-10T02:44:12.506+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "432476",
                    "issueId": "13300262"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13300262/worklog/432519",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "cyb70289 commented on a change in pull request #7135:\nURL: https://github.com/apache/arrow/pull/7135#discussion_r422619489\n\n\n\n##########\nFile path: cpp/src/arrow/util/bit_util.cc\n##########\n@@ -273,28 +274,115 @@ void AlignedBitmapOp(const uint8_t* left, int64_t left_offset, const uint8_t* ri\n   }\n }\n \n-template <typename Op>\n+template <template <typename> class BitOp, typename LogicalOp>\n void UnalignedBitmapOp(const uint8_t* left, int64_t left_offset, const uint8_t* right,\n                        int64_t right_offset, uint8_t* out, int64_t out_offset,\n                        int64_t length) {\n-  Op op;\n-  auto left_reader = internal::BitmapReader(left, left_offset, length);\n-  auto right_reader = internal::BitmapReader(right, right_offset, length);\n-  auto writer = internal::BitmapWriter(out, out_offset, length);\n-  for (int64_t i = 0; i < length; ++i) {\n-    if (op(left_reader.IsSet(), right_reader.IsSet())) {\n-      writer.Set();\n-    } else {\n-      writer.Clear();\n+  using Word = uint64_t;\n+\n+  left += left_offset / 8;\n+  right += right_offset / 8;\n+  out += out_offset / 8;\n+\n+  left_offset %= 8;\n+  right_offset %= 8;\n+  out_offset %= 8;\n+\n+  const int64_t min_offset = std::min({left_offset, right_offset, out_offset});\n+  const int64_t min_nbytes = BitUtil::BytesForBits(length + min_offset);\n+  int64_t nwords = min_nbytes / sizeof(Word);\n+\n+  // process in words, we may touch two words in each iteration\n+  if (nwords > 1) {\n+    BitOp<Word> op;\n+    constexpr int64_t bits_per_word = sizeof(Word) * 8;\n+    const Word out_mask = (1U << out_offset) - 1;\n+\n+    length -= (nwords - 1) * bits_per_word;\n+    Word left_word0 = util::SafeLoadAs<Word>(left);\n+    Word right_word0 = util::SafeLoadAs<Word>(right);\n+    Word out_word0 = util::SafeLoadAs<Word>(out);\n+\n+    do {\n\nReview comment:\n       I see lots of errors from BitmapOp.RandomXor, which is a new test added in this patch. Endianness change may be necessary for SafeLoad/SafeStore.\r\n   I just requested IBM LinuxONE account, hope can get access to a big endian vm soon.\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-05-10T09:48:56.982+0000",
                    "updated": "2020-05-10T09:48:56.982+0000",
                    "started": "2020-05-10T09:48:56.982+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "432519",
                    "issueId": "13300262"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13300262/worklog/432524",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "cyb70289 commented on a change in pull request #7135:\nURL: https://github.com/apache/arrow/pull/7135#discussion_r422632059\n\n\n\n##########\nFile path: cpp/src/arrow/util/bit_util.cc\n##########\n@@ -273,28 +274,115 @@ void AlignedBitmapOp(const uint8_t* left, int64_t left_offset, const uint8_t* ri\n   }\n }\n \n-template <typename Op>\n+template <template <typename> class BitOp, typename LogicalOp>\n void UnalignedBitmapOp(const uint8_t* left, int64_t left_offset, const uint8_t* right,\n                        int64_t right_offset, uint8_t* out, int64_t out_offset,\n                        int64_t length) {\n-  Op op;\n-  auto left_reader = internal::BitmapReader(left, left_offset, length);\n-  auto right_reader = internal::BitmapReader(right, right_offset, length);\n-  auto writer = internal::BitmapWriter(out, out_offset, length);\n-  for (int64_t i = 0; i < length; ++i) {\n-    if (op(left_reader.IsSet(), right_reader.IsSet())) {\n-      writer.Set();\n-    } else {\n-      writer.Clear();\n+  using Word = uint64_t;\n+\n+  left += left_offset / 8;\n+  right += right_offset / 8;\n+  out += out_offset / 8;\n+\n+  left_offset %= 8;\n+  right_offset %= 8;\n+  out_offset %= 8;\n+\n+  const int64_t min_offset = std::min({left_offset, right_offset, out_offset});\n+  const int64_t min_nbytes = BitUtil::BytesForBits(length + min_offset);\n+  int64_t nwords = min_nbytes / sizeof(Word);\n+\n+  // process in words, we may touch two words in each iteration\n+  if (nwords > 1) {\n+    BitOp<Word> op;\n+    constexpr int64_t bits_per_word = sizeof(Word) * 8;\n+    const Word out_mask = (1U << out_offset) - 1;\n+\n+    length -= (nwords - 1) * bits_per_word;\n+    Word left_word0 = util::SafeLoadAs<Word>(left);\n+    Word right_word0 = util::SafeLoadAs<Word>(right);\n+    Word out_word0 = util::SafeLoadAs<Word>(out);\n+\n+    do {\n\nReview comment:\n       I've updated code to support big endian. RandomXor test errors are fixed.\r\n   https://travis-ci.org/github/apache/arrow/jobs/685282203\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-05-10T11:35:44.574+0000",
                    "updated": "2020-05-10T11:35:44.574+0000",
                    "started": "2020-05-10T11:35:44.574+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "432524",
                    "issueId": "13300262"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13300262/worklog/432560",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on pull request #7135:\nURL: https://github.com/apache/arrow/pull/7135#issuecomment-626381392\n\n\n   FWIW the CI failure looks like a transient issue\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-05-10T20:01:10.092+0000",
                    "updated": "2020-05-10T20:01:10.092+0000",
                    "started": "2020-05-10T20:01:10.091+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "432560",
                    "issueId": "13300262"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13300262/worklog/432585",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "kou commented on a change in pull request #7135:\nURL: https://github.com/apache/arrow/pull/7135#discussion_r422718116\n\n\n\n##########\nFile path: cpp/src/arrow/util/bit_util.cc\n##########\n@@ -273,28 +274,115 @@ void AlignedBitmapOp(const uint8_t* left, int64_t left_offset, const uint8_t* ri\n   }\n }\n \n-template <typename Op>\n+template <template <typename> class BitOp, typename LogicalOp>\n void UnalignedBitmapOp(const uint8_t* left, int64_t left_offset, const uint8_t* right,\n                        int64_t right_offset, uint8_t* out, int64_t out_offset,\n                        int64_t length) {\n-  Op op;\n-  auto left_reader = internal::BitmapReader(left, left_offset, length);\n-  auto right_reader = internal::BitmapReader(right, right_offset, length);\n-  auto writer = internal::BitmapWriter(out, out_offset, length);\n-  for (int64_t i = 0; i < length; ++i) {\n-    if (op(left_reader.IsSet(), right_reader.IsSet())) {\n-      writer.Set();\n-    } else {\n-      writer.Clear();\n+  using Word = uint64_t;\n+\n+  left += left_offset / 8;\n+  right += right_offset / 8;\n+  out += out_offset / 8;\n+\n+  left_offset %= 8;\n+  right_offset %= 8;\n+  out_offset %= 8;\n+\n+  const int64_t min_offset = std::min({left_offset, right_offset, out_offset});\n+  const int64_t min_nbytes = BitUtil::BytesForBits(length + min_offset);\n+  int64_t nwords = min_nbytes / sizeof(Word);\n+\n+  // process in words, we may touch two words in each iteration\n+  if (nwords > 1) {\n+    BitOp<Word> op;\n+    constexpr int64_t bits_per_word = sizeof(Word) * 8;\n+    const Word out_mask = (1U << out_offset) - 1;\n+\n+    length -= (nwords - 1) * bits_per_word;\n+    Word left_word0 = util::SafeLoadAs<Word>(left);\n+    Word right_word0 = util::SafeLoadAs<Word>(right);\n+    Word out_word0 = util::SafeLoadAs<Word>(out);\n+\n+    do {\n\nReview comment:\n       FYI: You can test big-endian case on local by `ARCH=s390x UBUNTU=20.04 docker-compose run --rm ubuntu-cpp` and qemu-user-static that can be installed by `apt install -y qemu-user-static` on Debian family.\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-05-10T23:43:42.279+0000",
                    "updated": "2020-05-10T23:43:42.279+0000",
                    "started": "2020-05-10T23:43:42.278+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "432585",
                    "issueId": "13300262"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13300262/worklog/432586",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "kou commented on pull request #7135:\nURL: https://github.com/apache/arrow/pull/7135#issuecomment-626408103\n\n\n   The GLib on Windows failure isn't Apache Arrow related problem. It's a glib2 gem and the latest GLib on MSYS2 problem. I'll fix it in a few days.\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-05-10T23:44:25.890+0000",
                    "updated": "2020-05-10T23:44:25.890+0000",
                    "started": "2020-05-10T23:44:25.890+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "432586",
                    "issueId": "13300262"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13300262/worklog/432621",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "kiszk commented on a change in pull request #7135:\nURL: https://github.com/apache/arrow/pull/7135#discussion_r422764992\n\n\n\n##########\nFile path: cpp/src/arrow/util/bit_util.cc\n##########\n@@ -273,28 +274,115 @@ void AlignedBitmapOp(const uint8_t* left, int64_t left_offset, const uint8_t* ri\n   }\n }\n \n-template <typename Op>\n+template <template <typename> class BitOp, typename LogicalOp>\n void UnalignedBitmapOp(const uint8_t* left, int64_t left_offset, const uint8_t* right,\n                        int64_t right_offset, uint8_t* out, int64_t out_offset,\n                        int64_t length) {\n-  Op op;\n-  auto left_reader = internal::BitmapReader(left, left_offset, length);\n-  auto right_reader = internal::BitmapReader(right, right_offset, length);\n-  auto writer = internal::BitmapWriter(out, out_offset, length);\n-  for (int64_t i = 0; i < length; ++i) {\n-    if (op(left_reader.IsSet(), right_reader.IsSet())) {\n-      writer.Set();\n-    } else {\n-      writer.Clear();\n+  using Word = uint64_t;\n+\n+  left += left_offset / 8;\n+  right += right_offset / 8;\n+  out += out_offset / 8;\n+\n+  left_offset %= 8;\n+  right_offset %= 8;\n+  out_offset %= 8;\n+\n+  const int64_t min_offset = std::min({left_offset, right_offset, out_offset});\n+  const int64_t min_nbytes = BitUtil::BytesForBits(length + min_offset);\n+  int64_t nwords = min_nbytes / sizeof(Word);\n+\n+  // process in words, we may touch two words in each iteration\n+  if (nwords > 1) {\n+    BitOp<Word> op;\n+    constexpr int64_t bits_per_word = sizeof(Word) * 8;\n+    const Word out_mask = (1U << out_offset) - 1;\n+\n+    length -= (nwords - 1) * bits_per_word;\n+    Word left_word0 = util::SafeLoadAs<Word>(left);\n+    Word right_word0 = util::SafeLoadAs<Word>(right);\n+    Word out_word0 = util::SafeLoadAs<Word>(out);\n+\n+    do {\n\nReview comment:\n       Thank you very much for your fix.\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-05-11T03:52:56.491+0000",
                    "updated": "2020-05-11T03:52:56.491+0000",
                    "started": "2020-05-11T03:52:56.491+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "432621",
                    "issueId": "13300262"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13300262/worklog/433347",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on pull request #7135:\nURL: https://github.com/apache/arrow/pull/7135#issuecomment-628875060\n\n\n   @fsaintjacques @pitrou any more review needed on this or can it be merged?\r\n   \r\n   Should the aligned case be optimized to use word-wise operations? If so we should open a JIRA issue about that\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-05-14T20:40:03.034+0000",
                    "updated": "2020-05-14T20:40:03.034+0000",
                    "started": "2020-05-14T20:40:03.034+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "433347",
                    "issueId": "13300262"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13300262/worklog/433405",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "fsaintjacques commented on pull request #7135:\nURL: https://github.com/apache/arrow/pull/7135#issuecomment-628920728\n\n\n   The aligned version is auto-vectorized.\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-05-14T22:34:13.287+0000",
                    "updated": "2020-05-14T22:34:13.287+0000",
                    "started": "2020-05-14T22:34:13.287+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "433405",
                    "issueId": "13300262"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13300262/worklog/433414",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "fsaintjacques commented on pull request #7135:\nURL: https://github.com/apache/arrow/pull/7135#issuecomment-628922958\n\n\n   @ursabot --help\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-05-14T22:40:51.245+0000",
                    "updated": "2020-05-14T22:40:51.245+0000",
                    "started": "2020-05-14T22:40:51.245+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "433414",
                    "issueId": "13300262"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13300262/worklog/433415",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ursabot commented on pull request #7135:\nURL: https://github.com/apache/arrow/pull/7135#issuecomment-628922964\n\n\n   ```\n   Usage: @ursabot [OPTIONS] COMMAND [ARGS]...\n   \n     Ursabot\n   \n   Options:\n     --help  Show this message and exit.\n   \n   Commands:\n     benchmark  Run the benchmark suite in comparison mode.\n     build      Trigger all tests registered for this pull request.\n     crossbow   Trigger crossbow builds for this pull request\n   ```\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-05-14T22:40:54.660+0000",
                    "updated": "2020-05-14T22:40:54.660+0000",
                    "started": "2020-05-14T22:40:54.660+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "433415",
                    "issueId": "13300262"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13300262/worklog/433417",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "fsaintjacques commented on pull request #7135:\nURL: https://github.com/apache/arrow/pull/7135#issuecomment-628923053\n\n\n   @ursabot benchmark --help\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-05-14T22:41:09.142+0000",
                    "updated": "2020-05-14T22:41:09.142+0000",
                    "started": "2020-05-14T22:41:09.142+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "433417",
                    "issueId": "13300262"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13300262/worklog/433418",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ursabot commented on pull request #7135:\nURL: https://github.com/apache/arrow/pull/7135#issuecomment-628923055\n\n\n   ```\n   Usage: @ursabot benchmark [OPTIONS] [<baseline>]\n   \n     Run the benchmark suite in comparison mode.\n   \n     This command will run the benchmark suite for tip of the branch commit\n     against `<baseline>` (or master if not provided).\n   \n     Examples:\n   \n     # Run the all the benchmarks\n     @ursabot benchmark\n   \n     # Compare only benchmarks where the name matches the /^Sum/ regex\n     @ursabot benchmark --benchmark-filter=^Sum\n   \n     # Compare only benchmarks where the suite matches the /compute-/ regex.\n     # A suite is the C++ binary.\n     @ursabot benchmark --suite-filter=compute-\n   \n     # Sometimes a new optimization requires the addition of new benchmarks to\n     # quantify the performance increase. When doing this be sure to add the\n     # benchmark in a separate commit before introducing the optimization.\n     #\n     # Note that specifying the baseline is the only way to compare using a new\n     # benchmark, since master does not contain the new benchmark and no\n     # comparison is possible.\n     #\n     # The following command compares the results of matching benchmarks,\n     # compiling against HEAD and the provided baseline commit, e.g. eaf8302.\n     # You can use this to quantify the performance improvement of new\n     # optimizations or to check for regressions.\n     @ursabot benchmark --benchmark-filter=MyBenchmark eaf8302\n   \n   Options:\n     --suite-filter <regex>      Regex filtering benchmark suites.\n     --benchmark-filter <regex>  Regex filtering benchmarks.\n     --help                      Show this message and exit.\n   ```\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-05-14T22:41:12.508+0000",
                    "updated": "2020-05-14T22:41:12.508+0000",
                    "started": "2020-05-14T22:41:12.508+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "433418",
                    "issueId": "13300262"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13300262/worklog/433419",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "fsaintjacques commented on pull request #7135:\nURL: https://github.com/apache/arrow/pull/7135#issuecomment-628923180\n\n\n   @ursabot benchmark --suite-filter=arrow-bit-util-benchmark\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-05-14T22:41:36.035+0000",
                    "updated": "2020-05-14T22:41:36.035+0000",
                    "started": "2020-05-14T22:41:36.035+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "433419",
                    "issueId": "13300262"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
            "id": "4",
            "description": "An improvement or enhancement to an existing feature or task.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
            "name": "Improvement",
            "subtask": false,
            "avatarId": 21140
        },
        "timespent": 16800,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@3f43715c[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@218d011c[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@187d75[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@49d4098b[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@2369f06[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@fc762e7[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@4c7745bf[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@258685eb[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@137ee0f2[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@279a6820[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@51368bd1[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@408ee5c1[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 16800,
        "customfield_12312520": null,
        "customfield_12312521": "Fri May 15 15:09:21 UTC 2020",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2020-05-15T02:12:56.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-8553/watchers",
            "watchCount": 4,
            "isWatching": false
        },
        "created": "2020-04-22T12:43:22.000+0000",
        "updated": "2021-08-02T18:36:30.000+0000",
        "timeoriginalestimate": null,
        "description": "Currently, {{BitmapAnd}} uses a bit-by-bit loop for unaligned inputs. Using {{Bitmap::VisitWords}} instead would probably yield a manyfold performance increase.",
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "4h 40m",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 16800
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[C++] Optimize unaligned bitmap operations",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13300262/comment/17089638",
                    "id": "17089638",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "body": "cc [~yibocai]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=dfoulks",
                        "name": "dfoulks",
                        "key": "dfoulks",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34057",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34057",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34057",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34057"
                        },
                        "displayName": "Drew Foulks",
                        "active": true,
                        "timeZone": "America/Kentucky/Louisville"
                    },
                    "created": "2020-04-22T12:43:29.127+0000",
                    "updated": "2021-08-02T18:36:30.530+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13300262/comment/17090150",
                    "id": "17090150",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=yibocai",
                        "name": "yibocai",
                        "key": "yibo",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=yibo&avatarId=47542",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=yibo&avatarId=47542",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=yibo&avatarId=47542",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=yibo&avatarId=47542"
                        },
                        "displayName": "Yibo Cai",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "Will do some investigation.",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=yibocai",
                        "name": "yibocai",
                        "key": "yibo",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=yibo&avatarId=47542",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=yibo&avatarId=47542",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=yibo&avatarId=47542",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=yibo&avatarId=47542"
                        },
                        "displayName": "Yibo Cai",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2020-04-23T01:39:17.388+0000",
                    "updated": "2020-04-23T01:39:17.388+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13300262/comment/17102412",
                    "id": "17102412",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=yibocai",
                        "name": "yibocai",
                        "key": "yibo",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=yibo&avatarId=47542",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=yibo&avatarId=47542",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=yibo&avatarId=47542",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=yibo&avatarId=47542"
                        },
                        "displayName": "Yibo Cai",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "Did a quick test, performance improvement is promising with VisitWords(>10x).\r\n\r\nThere's one issue need to address. Would like to hear your comments [~apitrou], [~bkietz]\r\nVisitWords calls visitor on each word, but bits in first word is unknown to visitor, it may be less than a full word size. See [code|https://github.com/apache/arrow/blob/6002ec388840de5622e39af85abdc57a2cccc9b2/cpp/src/arrow/util/bit_util.h#L960].\r\nIt makes it hard to use VisitWords to handle bitmap operations (and, or, ...), as I don't how many valid bits to write to output buffer for first word, and bit offset of later words cannot be determined. VisitWords returns bit length of first word, but it's too late, all visitors are already finished.\r\n\r\nI recommend adding a parameter \"valid bits\" to visitor function, which tells how many bits are valid in current word. Only first and last word may be not full size.\r\nWhat's your opinion? Or are there better ways? Thanks.",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=yibocai",
                        "name": "yibocai",
                        "key": "yibo",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=yibo&avatarId=47542",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=yibo&avatarId=47542",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=yibo&avatarId=47542",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=yibo&avatarId=47542"
                        },
                        "displayName": "Yibo Cai",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2020-05-08T09:42:16.520+0000",
                    "updated": "2020-05-08T09:42:16.520+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13300262/comment/17103162",
                    "id": "17103162",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=yibocai",
                        "name": "yibocai",
                        "key": "yibo",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=yibo&avatarId=47542",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=yibo&avatarId=47542",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=yibo&avatarId=47542",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=yibo&avatarId=47542"
                        },
                        "displayName": "Yibo Cai",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "No worry about my comment above. Find a way to go forward.\r\nSee above 60x performance gain on my machine.",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=yibocai",
                        "name": "yibocai",
                        "key": "yibo",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=yibo&avatarId=47542",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=yibo&avatarId=47542",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=yibo&avatarId=47542",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=yibo&avatarId=47542"
                        },
                        "displayName": "Yibo Cai",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2020-05-09T07:26:07.868+0000",
                    "updated": "2020-05-09T07:26:07.868+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13300262/comment/17104396",
                    "id": "17104396",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "body": "I think it's fine to a \"valid bits\" parameter to the VisitWord visitor. ",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "created": "2020-05-11T12:17:57.798+0000",
                    "updated": "2020-05-11T12:17:57.798+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13300262/comment/17104397",
                    "id": "17104397",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "body": "(it can also be a bitmask parameter)",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "created": "2020-05-11T12:18:23.276+0000",
                    "updated": "2020-05-11T12:18:23.276+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13300262/comment/17107661",
                    "id": "17107661",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "As I commented on the patch, in the aligned case still only one byte is being processed at a time. Maybe that can be optimized as a follow up patch",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2020-05-14T20:44:55.008+0000",
                    "updated": "2020-05-14T20:44:55.008+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13300262/comment/17107850",
                    "id": "17107850",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=fsaintjacques",
                        "name": "fsaintjacques",
                        "key": "fsaintjacques",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fsaintjacques&avatarId=37276",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fsaintjacques&avatarId=37276",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fsaintjacques&avatarId=37276",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fsaintjacques&avatarId=37276"
                        },
                        "displayName": "Francois Saint-Jacques",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "Issue resolved by pull request 7135\n[https://github.com/apache/arrow/pull/7135]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=fsaintjacques",
                        "name": "fsaintjacques",
                        "key": "fsaintjacques",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fsaintjacques&avatarId=37276",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fsaintjacques&avatarId=37276",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fsaintjacques&avatarId=37276",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fsaintjacques&avatarId=37276"
                        },
                        "displayName": "Francois Saint-Jacques",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2020-05-15T02:12:56.187+0000",
                    "updated": "2020-05-15T02:12:56.187+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13300262/comment/17108159",
                    "id": "17108159",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=yibocai",
                        "name": "yibocai",
                        "key": "yibo",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=yibo&avatarId=47542",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=yibo&avatarId=47542",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=yibo&avatarId=47542",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=yibo&avatarId=47542"
                        },
                        "displayName": "Yibo Cai",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "[~wesm], the aligned case is simple enough for compiler to auto vectorize the code.\r\n\r\nDid a quick test with below patch, no obvious performance diff found.\r\n{code:c}\r\ndiff --git a/cpp/src/arrow/util/bit_util.cc b/cpp/src/arrow/util/bit_util.cc\r\nindex 395801f5e..8beaf6cb8 100644\r\n--- a/cpp/src/arrow/util/bit_util.cc\r\n+++ b/cpp/src/arrow/util/bit_util.cc\r\n@@ -261,7 +261,7 @@ template <template <typename> class BitOp>\r\n void AlignedBitmapOp(const uint8_t* left, int64_t left_offset, const uint8_t* right,\r\n                      int64_t right_offset, uint8_t* out, int64_t out_offset,\r\n                      int64_t length) {\r\n-  BitOp<uint8_t> op;\r\n+  BitOp<uint64_t> op;\r\n   DCHECK_EQ(left_offset % 8, right_offset % 8);\r\n   DCHECK_EQ(left_offset % 8, out_offset % 8);\r\n \r\n@@ -269,8 +269,11 @@ void AlignedBitmapOp(const uint8_t* left, int64_t left_offset, const uint8_t* ri\r\n   left += left_offset / 8;\r\n   right += right_offset / 8;\r\n   out += out_offset / 8;\r\n-  for (int64_t i = 0; i < nbytes; ++i) {\r\n-    out[i] = op(left[i], right[i]);\r\n+  uint64_t *out64 = (uint64_t*)out;\r\n+  uint64_t *left64 = (uint64_t*)left;\r\n+  uint64_t *right64 = (uint64_t*)right;\r\n+  for (int64_t i = 0; i < nbytes/8; ++i) {\r\n+    out64[i] = op(left64[i], right64[i]);\r\n   }\r\n }\r\n{code}\r\nBenchmark before this patch (in uint8)\r\n{code:c}\r\nBenchmarkBitmapAnd/32768/0                   4253 ns         4251 ns       164715 bytes_per_second=7.17813G/s\r\nBenchmarkBitmapAnd/131072/0                 16767 ns        16760 ns        41875 bytes_per_second=7.28348G/s\r\nBenchmarkBitmapAnd/32768/0                   4264 ns         4262 ns       165145 bytes_per_second=7.15959G/s\r\nBenchmarkBitmapAnd/131072/0                 16702 ns        16695 ns        41952 bytes_per_second=7.31158G/s\r\n{code}\r\nBenchmark after this patch (in uint64)\r\n{code:c}\r\nBenchmarkBitmapAnd/32768/0                   4133 ns         4131 ns       171808 bytes_per_second=7.38787G/s\r\nBenchmarkBitmapAnd/131072/0                 17167 ns        17157 ns        40529 bytes_per_second=7.11491G/s\r\nBenchmarkBitmapAnd/32768/0                   4103 ns         4101 ns       171883 bytes_per_second=7.44151G/s\r\nBenchmarkBitmapAnd/131072/0                 17351 ns        17343 ns        43299 bytes_per_second=7.0385G/s\r\n{code}",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=yibocai",
                        "name": "yibocai",
                        "key": "yibo",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=yibo&avatarId=47542",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=yibo&avatarId=47542",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=yibo&avatarId=47542",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=yibo&avatarId=47542"
                        },
                        "displayName": "Yibo Cai",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2020-05-15T10:33:35.446+0000",
                    "updated": "2020-05-15T10:33:35.446+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13300262/comment/17108382",
                    "id": "17108382",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "Thanks for looking into it, sounds good to me",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2020-05-15T15:09:21.534+0000",
                    "updated": "2020-05-15T15:09:21.534+0000"
                }
            ],
            "maxResults": 10,
            "total": 10,
            "startAt": 0
        },
        "customfield_12311820": "0|z0dy2g:",
        "customfield_12314139": null
    }
}