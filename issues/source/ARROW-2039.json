{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13133929",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13133929",
    "key": "ARROW-2039",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12341707",
                "id": "12341707",
                "description": "",
                "name": "0.9.0",
                "archived": false,
                "released": true,
                "releaseDate": "2018-03-19"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/4",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
            "name": "Minor",
            "id": "4"
        },
        "labels": [
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": null,
        "customfield_12312330": null,
        "versions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12341352",
                "id": "12341352",
                "name": "0.8.0",
                "archived": false,
                "released": true,
                "releaseDate": "2017-12-18"
            }
        ],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
            "name": "apitrou",
            "key": "pitrou",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
            },
            "displayName": "Antoine Pitrou",
            "active": true,
            "timeZone": "Europe/Paris"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12328936",
                "id": "12328936",
                "name": "Python"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": null,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=rshin",
            "name": "rshin",
            "key": "rshin",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34050",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34050",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34050",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34050"
            },
            "displayName": "Richard Shin",
            "active": true,
            "timeZone": "America/Los_Angeles"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=rshin",
            "name": "rshin",
            "key": "rshin",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34050",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34050",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34050",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34050"
            },
            "displayName": "Richard Shin",
            "active": true,
            "timeZone": "America/Los_Angeles"
        },
        "aggregateprogress": {
            "progress": 0,
            "total": 0
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 0,
            "total": 0
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-2039/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 0,
            "worklogs": []
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
            "id": "1",
            "description": "A problem which impairs or prevents the functions of the product.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
            "name": "Bug",
            "subtask": false,
            "avatarId": 21133
        },
        "timespent": null,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@7b361941[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@632e6bb[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@438d442f[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@529b65db[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@42cc3989[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@1f68b0d0[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@366d232e[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@3fd13d85[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@1cf25b87[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@464696f9[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@19eda94c[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@2fe682e1[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": null,
        "customfield_12312520": null,
        "customfield_12312521": "Thu Feb 15 16:35:11 UTC 2018",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2018-02-15T16:35:09.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-2039/watchers",
            "watchCount": 5,
            "isWatching": false
        },
        "created": "2018-01-26T05:17:45.000+0000",
        "updated": "2018-02-15T16:35:11.000+0000",
        "timeoriginalestimate": null,
        "description": "{{Python 2.7.12 (default, Nov 20 2017, 18:23:56)}}\r\n{{[GCC 5.4.0 20160609] on linux2}}\r\n{{Type \"help\", \"copyright\", \"credits\" or \"license\" for more information.}}\r\n{{>>> import pyarrow}}\r\n{{>>> pyarrow.__version__}}\r\n{{'0.8.0'}}\r\n{{>>> pyarrow.Buffer().to_pybytes()}}\r\n{{Segmentation fault (core dumped)}}",
        "customfield_10010": null,
        "timetracking": {},
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[Python] pyarrow.Buffer().to_pybytes() segfaults",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13133929/comment/16341324",
                    "id": "16341324",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "{{pyarrrow.Buffer()}} creates a malformed object. Would you expect this to error out or return an empty string?",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2018-01-26T17:29:49.688+0000",
                    "updated": "2018-01-26T17:29:49.688+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13133929/comment/16363972",
                    "id": "16363972",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "body": "IMHO malformed objects should error out.",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "created": "2018-02-14T13:12:22.802+0000",
                    "updated": "2018-02-14T13:12:22.802+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13133929/comment/16364071",
                    "id": "16364071",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "pitrou opened a new pull request #1605: ARROW-2039: [Python] Avoid crashing on uninitialized Buffer\nURL: https://github.com/apache/arrow/pull/1605\n \n \n   \n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2018-02-14T13:56:55.630+0000",
                    "updated": "2018-02-14T13:56:55.630+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13133929/comment/16365704",
                    "id": "16365704",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "wesm commented on issue #1605: ARROW-2039: [Python] Avoid crashing on uninitialized Buffer\nURL: https://github.com/apache/arrow/pull/1605#issuecomment-365956622\n \n \n   rebased, will merge once some of the Linux builds run\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2018-02-15T15:13:01.359+0000",
                    "updated": "2018-02-15T15:13:01.359+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13133929/comment/16365859",
                    "id": "16365859",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "Issue resolved by pull request 1605\n[https://github.com/apache/arrow/pull/1605]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2018-02-15T16:35:09.350+0000",
                    "updated": "2018-02-15T16:35:09.350+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13133929/comment/16365860",
                    "id": "16365860",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "wesm closed pull request #1605: ARROW-2039: [Python] Avoid crashing on uninitialized Buffer\nURL: https://github.com/apache/arrow/pull/1605\n \n \n   \n\nThis is a PR merged from a forked repository.\nAs GitHub hides the original diff on merge, it is displayed below for\nthe sake of provenance:\n\nAs this is a foreign pull request (from a fork), the diff is supplied\nbelow (as it won't show otherwise due to GitHub magic):\n\ndiff --git a/python/pyarrow/io.pxi b/python/pyarrow/io.pxi\nindex b0996f85e..aa2f7ed07 100644\n--- a/python/pyarrow/io.pxi\n+++ b/python/pyarrow/io.pxi\n@@ -595,22 +595,30 @@ cdef class Buffer:\n         self.shape[0] = self.size\n         self.strides[0] = <Py_ssize_t>(1)\n \n+    cdef int _check_nullptr(self) except -1:\n+        if self.buffer.get() == NULL:\n+            raise ReferenceError(\"operation on uninitialized Buffer object\")\n+        return 0\n+\n     def __len__(self):\n         return self.size\n \n     property size:\n \n         def __get__(self):\n+            self._check_nullptr()\n             return self.buffer.get().size()\n \n     property is_mutable:\n \n         def __get__(self):\n+            self._check_nullptr()\n             return self.buffer.get().is_mutable()\n \n     property parent:\n \n         def __get__(self):\n+            self._check_nullptr()\n             cdef shared_ptr[CBuffer] parent_buf = self.buffer.get().parent()\n \n             if parent_buf.get() == NULL:\n@@ -620,6 +628,7 @@ cdef class Buffer:\n \n     def __getitem__(self, key):\n         # TODO(wesm): buffer slicing\n+        self._check_nullptr()\n         raise NotImplementedError\n \n     def equals(self, Buffer other):\n@@ -634,17 +643,21 @@ cdef class Buffer:\n         -------\n         are_equal : True if buffer contents and size are equal\n         \"\"\"\n+        self._check_nullptr()\n+        other._check_nullptr()\n         cdef c_bool result = False\n         with nogil:\n             result = self.buffer.get().Equals(deref(other.buffer.get()))\n         return result\n \n     def to_pybytes(self):\n+        self._check_nullptr()\n         return cp.PyBytes_FromStringAndSize(\n             <const char*>self.buffer.get().data(),\n             self.buffer.get().size())\n \n     def __getbuffer__(self, cp.Py_buffer* buffer, int flags):\n+        self._check_nullptr()\n \n         buffer.buf = <char *>self.buffer.get().data()\n         buffer.format = 'b'\n@@ -662,11 +675,13 @@ cdef class Buffer:\n         buffer.suboffsets = NULL\n \n     def __getsegcount__(self, Py_ssize_t *len_out):\n+        self._check_nullptr()\n         if len_out != NULL:\n             len_out[0] = <Py_ssize_t>self.size\n         return 1\n \n     def __getreadbuffer__(self, Py_ssize_t idx, void **p):\n+        self._check_nullptr()\n         if idx != 0:\n             raise SystemError(\"accessing non-existent buffer segment\")\n         if p != NULL:\n@@ -674,6 +689,7 @@ cdef class Buffer:\n         return self.size\n \n     def __getwritebuffer__(self, Py_ssize_t idx, void **p):\n+        self._check_nullptr()\n         if not self.buffer.get().is_mutable():\n             raise SystemError(\"trying to write an immutable buffer\")\n         if idx != 0:\ndiff --git a/python/pyarrow/lib.pxd b/python/pyarrow/lib.pxd\nindex b1433ecde..31732a6e0 100644\n--- a/python/pyarrow/lib.pxd\n+++ b/python/pyarrow/lib.pxd\n@@ -321,6 +321,7 @@ cdef class Buffer:\n         Py_ssize_t strides[1]\n \n     cdef void init(self, const shared_ptr[CBuffer]& buffer)\n+    cdef int _check_nullptr(self) except -1\n \n \n cdef class ResizableBuffer(Buffer):\ndiff --git a/python/pyarrow/tests/test_io.py b/python/pyarrow/tests/test_io.py\nindex 0947cb7c7..736020f60 100644\n--- a/python/pyarrow/tests/test_io.py\n+++ b/python/pyarrow/tests/test_io.py\n@@ -15,6 +15,7 @@\n # specific language governing permissions and limitations\n # under the License.\n \n+from functools import partial\n from io import BytesIO, TextIOWrapper\n import gc\n import os\n@@ -176,6 +177,8 @@ def test_buffer_to_numpy():\n     buf = pa.frombuffer(byte_array)\n     array = np.frombuffer(buf, dtype=\"uint8\")\n     assert array[0] == byte_array[0]\n+    byte_array[0] += 1\n+    assert array[0] == byte_array[0]\n     assert array.base == buf\n \n \n@@ -192,6 +195,25 @@ def test_buffer_from_numpy():\n         buf = pa.frombuffer(arr.T[::2])\n \n \n+def test_buffer_equals():\n+    # Buffer.equals() returns true iff the buffers have the same contents\n+    b1 = b'some data!'\n+    b2 = bytearray(b1)\n+    b3 = bytearray(b1)\n+    b3[0] = 42\n+    buf1 = pa.frombuffer(b1)\n+    buf2 = pa.frombuffer(b2)\n+    buf3 = pa.frombuffer(b2)\n+    buf4 = pa.frombuffer(b3)\n+    buf5 = pa.frombuffer(np.frombuffer(b2, dtype=np.int16))\n+    assert buf1.equals(buf1)\n+    assert buf1.equals(buf2)\n+    assert buf2.equals(buf3)\n+    assert not buf2.equals(buf4)\n+    # Data type is indifferent\n+    assert buf2.equals(buf5)\n+\n+\n def test_allocate_buffer():\n     buf = pa.allocate_buffer(100)\n     assert buf.size == 100\n@@ -244,9 +266,11 @@ def test_buffer_memoryview_is_immutable():\n     val = b'some data'\n \n     buf = pa.frombuffer(val)\n+    assert not buf.is_mutable\n     assert isinstance(buf, pa.Buffer)\n \n     result = memoryview(buf)\n+    assert result.readonly\n \n     with pytest.raises(TypeError) as exc:\n         result[0] = b'h'\n@@ -258,6 +282,29 @@ def test_buffer_memoryview_is_immutable():\n         assert 'cannot modify read-only' in str(exc.value)\n \n \n+def test_uninitialized_buffer():\n+    # ARROW-2039: calling Buffer() directly creates an uninitialized object\n+    check_uninitialized = partial(pytest.raises,\n+                                  ReferenceError, match=\"uninitialized\")\n+    buf = pa.Buffer()\n+    with check_uninitialized():\n+        buf.size\n+    with check_uninitialized():\n+        len(buf)\n+    with check_uninitialized():\n+        buf.is_mutable\n+    with check_uninitialized():\n+        buf.parent\n+    with check_uninitialized():\n+        buf.to_pybytes()\n+    with check_uninitialized():\n+        memoryview(buf)\n+    with check_uninitialized():\n+        buf.equals(pa.frombuffer(b''))\n+    with check_uninitialized():\n+        pa.frombuffer(b'').equals(buf)\n+\n+\n def test_memory_output_stream():\n     # 10 bytes\n     val = b'dataabcdef'\n\n\n \n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2018-02-15T16:35:11.586+0000",
                    "updated": "2018-02-15T16:35:11.586+0000"
                }
            ],
            "maxResults": 6,
            "total": 6,
            "startAt": 0
        },
        "customfield_12311820": "0|i3pecn:",
        "customfield_12314139": null
    }
}