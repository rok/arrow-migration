{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13396940",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13396940",
    "key": "ARROW-13735",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12350591",
                "id": "12350591",
                "description": "",
                "name": "7.0.0",
                "archived": false,
                "released": true,
                "releaseDate": "2022-02-03"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "name": "Major",
            "id": "3"
        },
        "labels": [
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [
            {
                "id": "12627962",
                "self": "https://issues.apache.org/jira/rest/api/2/issueLink/12627962",
                "type": {
                    "id": "12310000",
                    "name": "Duplicate",
                    "inward": "is duplicated by",
                    "outward": "duplicates",
                    "self": "https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"
                },
                "inwardIssue": {
                    "id": "13415382",
                    "key": "ARROW-14983",
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13415382",
                    "fields": {
                        "summary": "[C++] Crash when build arrow::Array using arrow::ArrayBuilder",
                        "status": {
                            "self": "https://issues.apache.org/jira/rest/api/2/status/1",
                            "description": "The issue is open and ready for the assignee to start work on it.",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/open.png",
                            "name": "Open",
                            "id": "1",
                            "statusCategory": {
                                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2",
                                "id": 2,
                                "key": "new",
                                "colorName": "blue-gray",
                                "name": "To Do"
                            }
                        },
                        "priority": {
                            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
                            "name": "Major",
                            "id": "3"
                        },
                        "issuetype": {
                            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
                            "id": "1",
                            "description": "A problem which impairs or prevents the functions of the product.",
                            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
                            "name": "Bug",
                            "subtask": false,
                            "avatarId": 21133
                        }
                    }
                }
            }
        ],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=willjones127",
            "name": "willjones127",
            "key": "willjones127",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34058",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34058",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34058",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34058"
            },
            "displayName": "Will Jones",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12328936",
                "id": "12328936",
                "name": "Python"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=jorisvandenbossche",
            "name": "jorisvandenbossche",
            "key": "jorisvandenbossche",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
            },
            "displayName": "Joris Van den Bossche",
            "active": true,
            "timeZone": "Europe/Brussels"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=jorisvandenbossche",
            "name": "jorisvandenbossche",
            "key": "jorisvandenbossche",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
            },
            "displayName": "Joris Van den Bossche",
            "active": true,
            "timeZone": "Europe/Brussels"
        },
        "aggregateprogress": {
            "progress": 13200,
            "total": 13200,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 13200,
            "total": 13200,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-13735/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 22,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13396940/worklog/690326",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wjones127 opened a new pull request #11855:\nURL: https://github.com/apache/arrow/pull/11855\n\n\n   The segfault only happened in Debug build (which is why some weren't able to repro) because it was from a failing DCHECK on this line:\r\n   \r\n   https://github.com/apache/arrow/blob/e734856676a00335f3dfe79899a995d87286f5a9/cpp/src/arrow/array/array_nested.cc#L193\r\n   \r\n   The LHS of the DCHECK is missing field names, while the RHS has them.\r\n   \r\n   The basic problem is that MapBuilder doesn't preserve field names when creating the array.\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-03T21:17:13.243+0000",
                    "updated": "2021-12-03T21:17:13.243+0000",
                    "started": "2021-12-03T21:17:13.243+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "690326",
                    "issueId": "13396940"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13396940/worklog/690327",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "github-actions[bot] commented on pull request #11855:\nURL: https://github.com/apache/arrow/pull/11855#issuecomment-985833919\n\n\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-03T21:17:36.103+0000",
                    "updated": "2021-12-03T21:17:36.103+0000",
                    "started": "2021-12-03T21:17:36.103+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "690327",
                    "issueId": "13396940"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13396940/worklog/690411",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wjones127 commented on a change in pull request #11855:\nURL: https://github.com/apache/arrow/pull/11855#discussion_r762366744\n\n\n\n##########\nFile path: cpp/src/arrow/array/builder_nested.h\n##########\n@@ -329,9 +329,7 @@ class ARROW_EXPORT MapBuilder : public ArrayBuilder {\n   /// the Map to be built as a list of struct values.\n   ArrayBuilder* value_builder() const { return list_builder_->value_builder(); }\n \n-  std::shared_ptr<DataType> type() const override {\n-    return map(key_builder_->type(), item_builder_->type(), keys_sorted_);\n-  }\n+  std::shared_ptr<DataType> type() const override { return type_; }\n\nReview comment:\n       Note that the `map` construction I deleted is already used to set the type when it isn't explicitly passed.\r\n   \r\n   https://github.com/apache/arrow/blob/e734856676a00335f3dfe79899a995d87286f5a9/cpp/src/arrow/array/builder_nested.cc#L52-L55\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-04T01:27:27.901+0000",
                    "updated": "2021-12-04T01:27:27.901+0000",
                    "started": "2021-12-04T01:27:27.901+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "690411",
                    "issueId": "13396940"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13396940/worklog/690412",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wjones127 commented on a change in pull request #11855:\nURL: https://github.com/apache/arrow/pull/11855#discussion_r762366744\n\n\n\n##########\nFile path: cpp/src/arrow/array/builder_nested.h\n##########\n@@ -329,9 +329,7 @@ class ARROW_EXPORT MapBuilder : public ArrayBuilder {\n   /// the Map to be built as a list of struct values.\n   ArrayBuilder* value_builder() const { return list_builder_->value_builder(); }\n \n-  std::shared_ptr<DataType> type() const override {\n-    return map(key_builder_->type(), item_builder_->type(), keys_sorted_);\n-  }\n+  std::shared_ptr<DataType> type() const override { return type_; }\n\nReview comment:\n       Note that the `map` construction I deleted was already used to set the type when it isn't explicitly passed.\r\n   \r\n   https://github.com/apache/arrow/blob/e734856676a00335f3dfe79899a995d87286f5a9/cpp/src/arrow/array/builder_nested.cc#L52-L55\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-04T01:27:40.648+0000",
                    "updated": "2021-12-04T01:27:40.648+0000",
                    "started": "2021-12-04T01:27:40.648+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "690412",
                    "issueId": "13396940"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13396940/worklog/691151",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jorisvandenbossche commented on a change in pull request #11855:\nURL: https://github.com/apache/arrow/pull/11855#discussion_r763146334\n\n\n\n##########\nFile path: python/pyarrow/tests/test_array.py\n##########\n@@ -891,6 +891,14 @@ def test_list_from_arrays(list_array_type, list_type_factory):\n         result.validate(full=True)\n \n \n+def test_map_labelled():\n+    t = pa.map_(pa.field(\"name\", \"string\", nullable=False), \"int64\")\n+    arr = pa.array([[('a', 1), ('b', 2)], [('c', 3)]], type=t)\n+    assert arr.type.key_field == pa.field(\"name\", pa.utf8(), nullable=False)\n\nReview comment:\n       Would `assert arr.type == t` capture possible incorrect names as well?\n\n##########\nFile path: python/pyarrow/tests/test_array.py\n##########\n@@ -891,6 +891,14 @@ def test_list_from_arrays(list_array_type, list_type_factory):\n         result.validate(full=True)\n \n \n+def test_map_labelled():\n+    t = pa.map_(pa.field(\"name\", \"string\", nullable=False), \"int64\")\n\nReview comment:\n       ```suggestion\r\n   def test_map_labelled():\r\n       #  ARROW-13735\r\n       t = pa.map_(pa.field(\"name\", \"string\", nullable=False), \"int64\")\r\n   ```\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-06T16:04:34.868+0000",
                    "updated": "2021-12-06T16:04:34.868+0000",
                    "started": "2021-12-06T16:04:34.868+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "691151",
                    "issueId": "13396940"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13396940/worklog/691283",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wjones127 commented on a change in pull request #11855:\nURL: https://github.com/apache/arrow/pull/11855#discussion_r763269450\n\n\n\n##########\nFile path: python/pyarrow/tests/test_array.py\n##########\n@@ -891,6 +891,14 @@ def test_list_from_arrays(list_array_type, list_type_factory):\n         result.validate(full=True)\n \n \n+def test_map_labelled():\n+    t = pa.map_(pa.field(\"name\", \"string\", nullable=False), \"int64\")\n+    arr = pa.array([[('a', 1), ('b', 2)], [('c', 3)]], type=t)\n+    assert arr.type.key_field == pa.field(\"name\", pa.utf8(), nullable=False)\n\nReview comment:\n       I tried and it does not. I think that is intentional, given this test in C++:\r\n   \r\n   https://github.com/apache/arrow/blob/85b276dd13512d6676a0bc2dc703a0f9b6934236/cpp/src/arrow/type_test.cc#L1232-L1238\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-06T18:34:48.250+0000",
                    "updated": "2021-12-06T18:34:48.250+0000",
                    "started": "2021-12-06T18:34:48.249+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "691283",
                    "issueId": "13396940"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13396940/worklog/691307",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jorisvandenbossche commented on a change in pull request #11855:\nURL: https://github.com/apache/arrow/pull/11855#discussion_r763309088\n\n\n\n##########\nFile path: python/pyarrow/tests/test_array.py\n##########\n@@ -891,6 +891,14 @@ def test_list_from_arrays(list_array_type, list_type_factory):\n         result.validate(full=True)\n \n \n+def test_map_labelled():\n+    t = pa.map_(pa.field(\"name\", \"string\", nullable=False), \"int64\")\n+    arr = pa.array([[('a', 1), ('b', 2)], [('c', 3)]], type=t)\n+    assert arr.type.key_field == pa.field(\"name\", pa.utf8(), nullable=False)\n\nReview comment:\n       For for this PR (maybe for a new JIRA), but it seems we are not very consistent in this. For example for list type it seems to matter:\r\n   \r\n   ```\r\n   In [6]: l1 = pa.list_(pa.field(\"val\", pa.int64()))\r\n   \r\n   In [7]: l2 = pa.list_(pa.int64())\r\n   \r\n   In [8]: l1\r\n   Out[8]: ListType(list<val: int64>)\r\n   \r\n   In [9]: l2\r\n   Out[9]: ListType(list<item: int64>)\r\n   \r\n   In [10]: l1 == l2\r\n   Out[10]: False\r\n   ```\r\n   \r\n   Although for a map type, the name of the key field is maybe less important than the values for a list array\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-06T19:19:12.549+0000",
                    "updated": "2021-12-06T19:19:12.549+0000",
                    "started": "2021-12-06T19:19:12.549+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "691307",
                    "issueId": "13396940"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13396940/worklog/691346",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wjones127 commented on a change in pull request #11855:\nURL: https://github.com/apache/arrow/pull/11855#discussion_r763381855\n\n\n\n##########\nFile path: python/pyarrow/tests/test_array.py\n##########\n@@ -891,6 +891,14 @@ def test_list_from_arrays(list_array_type, list_type_factory):\n         result.validate(full=True)\n \n \n+def test_map_labelled():\n+    t = pa.map_(pa.field(\"name\", \"string\", nullable=False), \"int64\")\n+    arr = pa.array([[('a', 1), ('b', 2)], [('c', 3)]], type=t)\n+    assert arr.type.key_field == pa.field(\"name\", pa.utf8(), nullable=False)\n\nReview comment:\n       According to the spec:\r\n   \r\n   https://github.com/apache/arrow/blob/85b276dd13512d6676a0bc2dc703a0f9b6934236/format/Schema.fbs#L112-L115\r\n   \r\n   I don't see anything about the names for a list. IMO seems like a piece of metadata most people want to ignore. I'll create a JIRA to discuss that.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-06T20:54:02.045+0000",
                    "updated": "2021-12-06T20:54:02.045+0000",
                    "started": "2021-12-06T20:54:02.044+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "691346",
                    "issueId": "13396940"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13396940/worklog/691349",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wjones127 commented on a change in pull request #11855:\nURL: https://github.com/apache/arrow/pull/11855#discussion_r763385419\n\n\n\n##########\nFile path: python/pyarrow/tests/test_array.py\n##########\n@@ -891,6 +891,14 @@ def test_list_from_arrays(list_array_type, list_type_factory):\n         result.validate(full=True)\n \n \n+def test_map_labelled():\n+    t = pa.map_(pa.field(\"name\", \"string\", nullable=False), \"int64\")\n+    arr = pa.array([[('a', 1), ('b', 2)], [('c', 3)]], type=t)\n+    assert arr.type.key_field == pa.field(\"name\", pa.utf8(), nullable=False)\n\nReview comment:\n       https://issues.apache.org/jira/browse/ARROW-14999\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-06T20:58:02.447+0000",
                    "updated": "2021-12-06T20:58:02.447+0000",
                    "started": "2021-12-06T20:58:02.447+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "691349",
                    "issueId": "13396940"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13396940/worklog/692318",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jorisvandenbossche commented on a change in pull request #11855:\nURL: https://github.com/apache/arrow/pull/11855#discussion_r763309088\n\n\n\n##########\nFile path: python/pyarrow/tests/test_array.py\n##########\n@@ -891,6 +891,14 @@ def test_list_from_arrays(list_array_type, list_type_factory):\n         result.validate(full=True)\n \n \n+def test_map_labelled():\n+    t = pa.map_(pa.field(\"name\", \"string\", nullable=False), \"int64\")\n+    arr = pa.array([[('a', 1), ('b', 2)], [('c', 3)]], type=t)\n+    assert arr.type.key_field == pa.field(\"name\", pa.utf8(), nullable=False)\n\nReview comment:\n       Not for this PR (maybe for a new JIRA), but it seems we are not very consistent in this. For example for list type it seems to matter:\r\n   \r\n   ```\r\n   In [6]: l1 = pa.list_(pa.field(\"val\", pa.int64()))\r\n   \r\n   In [7]: l2 = pa.list_(pa.int64())\r\n   \r\n   In [8]: l1\r\n   Out[8]: ListType(list<val: int64>)\r\n   \r\n   In [9]: l2\r\n   Out[9]: ListType(list<item: int64>)\r\n   \r\n   In [10]: l1 == l2\r\n   Out[10]: False\r\n   ```\r\n   \r\n   Although for a map type, the name of the key field is maybe less important than the values for a list array\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-08T08:55:11.252+0000",
                    "updated": "2021-12-08T08:55:11.252+0000",
                    "started": "2021-12-08T08:55:11.252+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "692318",
                    "issueId": "13396940"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13396940/worklog/692734",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on a change in pull request #11855:\nURL: https://github.com/apache/arrow/pull/11855#discussion_r765050118\n\n\n\n##########\nFile path: cpp/src/arrow/array/builder_nested.h\n##########\n@@ -329,9 +329,7 @@ class ARROW_EXPORT MapBuilder : public ArrayBuilder {\n   /// the Map to be built as a list of struct values.\n   ArrayBuilder* value_builder() const { return list_builder_->value_builder(); }\n \n-  std::shared_ptr<DataType> type() const override {\n-    return map(key_builder_->type(), item_builder_->type(), keys_sorted_);\n-  }\n+  std::shared_ptr<DataType> type() const override { return type_; }\n\nReview comment:\n       Hmm... unfortunately, I don't think this is right. Some child builders can actually change type over time (for example the index width of a dictionary may increase depending on the dictionary size). So we have to keep the dynamic computation in the `type()` method.\r\n   \n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-08T16:56:40.359+0000",
                    "updated": "2021-12-08T16:56:40.359+0000",
                    "started": "2021-12-08T16:56:40.359+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "692734",
                    "issueId": "13396940"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13396940/worklog/696887",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wjones127 commented on a change in pull request #11855:\nURL: https://github.com/apache/arrow/pull/11855#discussion_r770046849\n\n\n\n##########\nFile path: cpp/src/arrow/array/builder_nested.h\n##########\n@@ -329,9 +329,7 @@ class ARROW_EXPORT MapBuilder : public ArrayBuilder {\n   /// the Map to be built as a list of struct values.\n   ArrayBuilder* value_builder() const { return list_builder_->value_builder(); }\n \n-  std::shared_ptr<DataType> type() const override {\n-    return map(key_builder_->type(), item_builder_->type(), keys_sorted_);\n-  }\n+  std::shared_ptr<DataType> type() const override { return type_; }\n\nReview comment:\n       Missed this. That makes sense. I think the problem is that those types don't have field names, so maybe the solution is to dynamically add back the field names within this method. \n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-15T21:18:45.419+0000",
                    "updated": "2021-12-15T21:18:45.419+0000",
                    "started": "2021-12-15T21:18:45.419+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "696887",
                    "issueId": "13396940"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13396940/worklog/697429",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wjones127 commented on a change in pull request #11855:\nURL: https://github.com/apache/arrow/pull/11855#discussion_r770819730\n\n\n\n##########\nFile path: cpp/src/arrow/array/builder_nested.h\n##########\n@@ -329,9 +329,7 @@ class ARROW_EXPORT MapBuilder : public ArrayBuilder {\n   /// the Map to be built as a list of struct values.\n   ArrayBuilder* value_builder() const { return list_builder_->value_builder(); }\n \n-  std::shared_ptr<DataType> type() const override {\n-    return map(key_builder_->type(), item_builder_->type(), keys_sorted_);\n-  }\n+  std::shared_ptr<DataType> type() const override { return type_; }\n\nReview comment:\n       @pitrou I've updated this part to rebuild the type with the child builders and the saved field names.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-16T18:45:14.766+0000",
                    "updated": "2021-12-16T18:45:14.766+0000",
                    "started": "2021-12-16T18:45:14.766+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "697429",
                    "issueId": "13396940"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13396940/worklog/698114",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wjones127 commented on a change in pull request #11855:\nURL: https://github.com/apache/arrow/pull/11855#discussion_r771708123\n\n\n\n##########\nFile path: cpp/src/arrow/array/builder_nested.h\n##########\n@@ -330,7 +330,14 @@ class ARROW_EXPORT MapBuilder : public ArrayBuilder {\n   ArrayBuilder* value_builder() const { return list_builder_->value_builder(); }\n \n   std::shared_ptr<DataType> type() const override {\n-    return map(key_builder_->type(), item_builder_->type(), keys_sorted_);\n+    // Key and Item builder may update types, but they don't contain the field names,\n+    // so we need to reconstruct the type. (See ARROW-13735.)\n+    return std::make_shared<MapType>(\n+        field(entries_name_,\n+              struct_({field(key_name_, key_builder_->type(), false),\n+                       field(item_name_, item_builder_->type())}),\n\nReview comment:\n       What if items is not nullable?\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-17T21:42:21.072+0000",
                    "updated": "2021-12-17T21:42:21.072+0000",
                    "started": "2021-12-17T21:42:21.072+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "698114",
                    "issueId": "13396940"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13396940/worklog/702358",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on a change in pull request #11855:\nURL: https://github.com/apache/arrow/pull/11855#discussion_r776812941\n\n\n\n##########\nFile path: cpp/src/arrow/array/array_list_test.cc\n##########\n@@ -717,6 +717,29 @@ TEST_F(TestMapArray, BuildingStringToInt) {\n   ASSERT_ARRAYS_EQUAL(*actual, expected);\n }\n \n+TEST_F(TestMapArray, BuildingWithFieldNames) {\n+  // Builder should preserve field names in output Array\n+  ASSERT_OK_AND_ASSIGN(auto map_type,\n+                       MapType::Make(field(\"some_entries\",\n+                                           struct_({field(\"some_key\", int16(), false),\n+                                                    field(\"some_value\", int16())}),\n+                                           false)));\n+\n+  auto key_builder = std::make_shared<Int16Builder>();\n+  auto item_builder = std::make_shared<Int16Builder>();\n+  MapBuilder map_builder(default_memory_pool(), key_builder, item_builder, map_type);\n+\n+  std::shared_ptr<Array> actual;\n+  ASSERT_OK(map_builder.Append());\n+  ASSERT_OK(key_builder->AppendValues({0, 1, 2, 3, 4, 5}));\n+  ASSERT_OK(item_builder->AppendValues({1, 1, 2, 3, 5, 8}));\n+  ASSERT_OK(map_builder.AppendNull());\n+  ASSERT_OK(map_builder.Finish(&actual));\n\nReview comment:\n       Can you add a test for `map_builder.type()`?\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-30T17:29:10.264+0000",
                    "updated": "2021-12-30T17:29:10.264+0000",
                    "started": "2021-12-30T17:29:10.264+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "702358",
                    "issueId": "13396940"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13396940/worklog/703067",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wjones127 commented on a change in pull request #11855:\nURL: https://github.com/apache/arrow/pull/11855#discussion_r777643434\n\n\n\n##########\nFile path: cpp/src/arrow/array/array_list_test.cc\n##########\n@@ -717,6 +717,29 @@ TEST_F(TestMapArray, BuildingStringToInt) {\n   ASSERT_ARRAYS_EQUAL(*actual, expected);\n }\n \n+TEST_F(TestMapArray, BuildingWithFieldNames) {\n+  // Builder should preserve field names in output Array\n+  ASSERT_OK_AND_ASSIGN(auto map_type,\n+                       MapType::Make(field(\"some_entries\",\n+                                           struct_({field(\"some_key\", int16(), false),\n+                                                    field(\"some_value\", int16())}),\n+                                           false)));\n+\n+  auto key_builder = std::make_shared<Int16Builder>();\n+  auto item_builder = std::make_shared<Int16Builder>();\n+  MapBuilder map_builder(default_memory_pool(), key_builder, item_builder, map_type);\n+\n+  std::shared_ptr<Array> actual;\n+  ASSERT_OK(map_builder.Append());\n+  ASSERT_OK(key_builder->AppendValues({0, 1, 2, 3, 4, 5}));\n+  ASSERT_OK(item_builder->AppendValues({1, 1, 2, 3, 5, 8}));\n+  ASSERT_OK(map_builder.AppendNull());\n+  ASSERT_OK(map_builder.Finish(&actual));\n\nReview comment:\n       Added a simple test.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-01-03T18:42:14.781+0000",
                    "updated": "2022-01-03T18:42:14.781+0000",
                    "started": "2022-01-03T18:42:14.781+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "703067",
                    "issueId": "13396940"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13396940/worklog/703344",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on pull request #11855:\nURL: https://github.com/apache/arrow/pull/11855#issuecomment-1004896133\n\n\n   Thanks for the update! I rebased and will merge if CI is green.\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-01-04T15:15:23.787+0000",
                    "updated": "2022-01-04T15:15:23.787+0000",
                    "started": "2022-01-04T15:15:23.786+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "703344",
                    "issueId": "13396940"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13396940/worklog/703386",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou closed pull request #11855:\nURL: https://github.com/apache/arrow/pull/11855\n\n\n   \n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-01-04T15:56:56.256+0000",
                    "updated": "2022-01-04T15:56:56.256+0000",
                    "started": "2022-01-04T15:56:56.255+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "703386",
                    "issueId": "13396940"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13396940/worklog/703734",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ursabot commented on pull request #11855:\nURL: https://github.com/apache/arrow/pull/11855#issuecomment-1005379375\n\n\n   Benchmark runs are scheduled for baseline = 7235698e7f7da021e6fa64201f69bf77d1625aac and contender = 31a07be1d9dc2f7c9720cc0fdcd7f083d947aba1. 31a07be1d9dc2f7c9720cc0fdcd7f083d947aba1 is a master commit associated with this PR. Results will be available as each benchmark for each run completes.\n   Conbench compare runs links:\n   [Scheduled] [ec2-t3-xlarge-us-east-2](https://conbench.ursa.dev/compare/runs/c1809ae52313432faf1eb6dec8b8e0e0...267baedc3d9d41f3a3a3ef263ff9187e/)\n   [Scheduled] [ursa-i9-9960x](https://conbench.ursa.dev/compare/runs/dc02bde6ec3a436083b6c736108e5bc2...12b49a67ff1d4420aab5273b8e68eb09/)\n   [Scheduled] [ursa-thinkcentre-m75q](https://conbench.ursa.dev/compare/runs/d7a151ed090942af8f21647e8576302d...14aa1ce144a84dc392d264fa451596e6/)\n   Supported benchmarks:\n   ec2-t3-xlarge-us-east-2: Supported benchmark langs: Python. Runs only benchmarks with cloud = True\n   ursa-i9-9960x: Supported benchmark langs: Python, R, JavaScript\n   ursa-thinkcentre-m75q: Supported benchmark langs: C++, Java\n   \n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-01-05T04:46:20.827+0000",
                    "updated": "2022-01-05T04:46:20.827+0000",
                    "started": "2022-01-05T04:46:20.827+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "703734",
                    "issueId": "13396940"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13396940/worklog/703752",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ursabot edited a comment on pull request #11855:\nURL: https://github.com/apache/arrow/pull/11855#issuecomment-1005379375\n\n\n   Benchmark runs are scheduled for baseline = 7235698e7f7da021e6fa64201f69bf77d1625aac and contender = 31a07be1d9dc2f7c9720cc0fdcd7f083d947aba1. 31a07be1d9dc2f7c9720cc0fdcd7f083d947aba1 is a master commit associated with this PR. Results will be available as each benchmark for each run completes.\n   Conbench compare runs links:\n   [Finished :arrow_down:0.0% :arrow_up:0.0%] [ec2-t3-xlarge-us-east-2](https://conbench.ursa.dev/compare/runs/c1809ae52313432faf1eb6dec8b8e0e0...267baedc3d9d41f3a3a3ef263ff9187e/)\n   [Scheduled] [ursa-i9-9960x](https://conbench.ursa.dev/compare/runs/dc02bde6ec3a436083b6c736108e5bc2...12b49a67ff1d4420aab5273b8e68eb09/)\n   [Scheduled] [ursa-thinkcentre-m75q](https://conbench.ursa.dev/compare/runs/d7a151ed090942af8f21647e8576302d...14aa1ce144a84dc392d264fa451596e6/)\n   Supported benchmarks:\n   ec2-t3-xlarge-us-east-2: Supported benchmark langs: Python. Runs only benchmarks with cloud = True\n   ursa-i9-9960x: Supported benchmark langs: Python, R, JavaScript\n   ursa-thinkcentre-m75q: Supported benchmark langs: C++, Java\n   \n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-01-05T05:51:24.416+0000",
                    "updated": "2022-01-05T05:51:24.416+0000",
                    "started": "2022-01-05T05:51:24.416+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "703752",
                    "issueId": "13396940"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
            "id": "1",
            "description": "A problem which impairs or prevents the functions of the product.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
            "name": "Bug",
            "subtask": false,
            "avatarId": 21133
        },
        "timespent": 13200,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@522c278e[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@2184dac[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@7f557da1[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@3f602aca[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@19b81b69[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@64ac622b[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@30c0a36a[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@ec8f9c2[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@57f2d821[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@504845ce[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@6526775e[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@2ce994d1[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 13200,
        "customfield_12312520": null,
        "customfield_12312521": "Tue Jan 04 15:56:55 UTC 2022",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2022-01-04T15:56:55.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-13735/watchers",
            "watchCount": 5,
            "isWatching": false
        },
        "created": "2021-08-24T13:18:03.000+0000",
        "updated": "2022-01-05T16:14:33.000+0000",
        "timeoriginalestimate": null,
        "description": "With ARROW-13696, you can create a MapType with non-default field names (the default being \"key\" and \"value\"). \r\nHowever, when then trying to create an array with it from python tuples, it crashes:\r\n\r\n{code:python}\r\n>>> t = pa.map_(pa.field(\"name\", \"string\", nullable=False), \"int64\")\r\n>>> pa.array([[('a', 1), ('b', 2)], [('c', 3)]], type=t)\r\n\r\n../src/arrow/array/array_nested.cc:192:  Check failed: self->list_type_->value_type()->Equals(data->child_data[0]->type) \r\n/home/joris/miniconda3/envs/arrow-dev/lib/libarrow.so.600(+0xf0b882)[0x7f298d497882]\r\n/home/joris/miniconda3/envs/arrow-dev/lib/libarrow.so.600(+0xf0b800)[0x7f298d497800]\r\n/home/joris/miniconda3/envs/arrow-dev/lib/libarrow.so.600(+0xf0b822)[0x7f298d497822]\r\n/home/joris/miniconda3/envs/arrow-dev/lib/libarrow.so.600(_ZN5arrow4util8ArrowLogD1Ev+0x47)[0x7f298d497b81]\r\n/home/joris/miniconda3/envs/arrow-dev/lib/libarrow.so.600(+0xb39d31)[0x7f298d0c5d31]\r\n/home/joris/miniconda3/envs/arrow-dev/lib/libarrow.so.600(_ZN5arrow8MapArray7SetDataERKSt10shared_ptrINS_9ArrayDataEE+0x198)[0x7f298d0c06be]\r\n/home/joris/miniconda3/envs/arrow-dev/lib/libarrow.so.600(_ZN5arrow8MapArrayC1ERKSt10shared_ptrINS_9ArrayDataEE+0x64)[0x7f298d0bed14]\r\n/home/joris/miniconda3/envs/arrow-dev/lib/libarrow.so.600(_ZN9__gnu_cxx13new_allocatorIN5arrow8MapArrayEE9constructIS2_JRKSt10shared_ptrINS1_9ArrayDataEEEEEvPT_DpOT0_+0x49)[0x7f298d1a0f13]\r\n/home/joris/miniconda3/envs/arrow-dev/lib/libarrow.so.600(_ZNSt16allocator_traitsISaIN5arrow8MapArrayEEE9constructIS1_JRKSt10shared_ptrINS0_9ArrayDataEEEEEvRS2_PT_DpOT0_+0x38)[0x7f298d19ebe6]\r\n/home/joris/miniconda3/envs/arrow-dev/lib/libarrow.so.600(_ZNSt23_Sp_counted_ptr_inplaceIN5arrow8MapArrayESaIS1_ELN9__gnu_cxx12_Lock_policyE2EEC1IJRKSt10shared_ptrINS0_9ArrayDataEEEEES2_DpOT_+0xaf)[0x7f298d19b547]\r\n/home/joris/miniconda3/envs/arrow-dev/lib/libarrow.so.600(_ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN5arrow8MapArrayESaIS5_EJRKSt10shared_ptrINS4_9ArrayDataEEEEERPT_St20_Sp_alloc_shared_tagIT0_EDpOT1_+0xb2)[0x7f298d195a64]\r\n/home/joris/miniconda3/envs/arrow-dev/lib/libarrow.so.600(_ZNSt12__shared_ptrIN5arrow8MapArrayELN9__gnu_cxx12_Lock_policyE2EEC2ISaIS1_EJRKSt10shared_ptrINS0_9ArrayDataEEEEESt20_Sp_alloc_shared_tagIT_EDpOT0_+0x4c)[0x7f298d1918bc]\r\n/home/joris/miniconda3/envs/arrow-dev/lib/libarrow.so.600(_ZNSt10shared_ptrIN5arrow8MapArrayEEC1ISaIS1_EJRKS_INS0_9ArrayDataEEEEESt20_Sp_alloc_shared_tagIT_EDpOT0_+0x39)[0x7f298d18f617]\r\n/home/joris/miniconda3/envs/arrow-dev/lib/libarrow.so.600(_ZSt15allocate_sharedIN5arrow8MapArrayESaIS1_EJRKSt10shared_ptrINS0_9ArrayDataEEEES3_IT_ERKT0_DpOT1_+0x38)[0x7f298d18d254]\r\n/home/joris/miniconda3/envs/arrow-dev/lib/libarrow.so.600(_ZSt11make_sharedIN5arrow8MapArrayEJRKSt10shared_ptrINS0_9ArrayDataEEEES2_IT_EDpOT0_+0x54)[0x7f298d1897b7]\r\n/home/joris/miniconda3/envs/arrow-dev/lib/libarrow.so.600(+0xbf5d6a)[0x7f298d181d6a]\r\n/home/joris/miniconda3/envs/arrow-dev/lib/libarrow.so.600(+0xbef0f3)[0x7f298d17b0f3]\r\n/home/joris/miniconda3/envs/arrow-dev/lib/libarrow.so.600(_ZN5arrow9MakeArrayERKSt10shared_ptrINS_9ArrayDataEE+0x99)[0x7f298d173f6b]\r\n/home/joris/miniconda3/envs/arrow-dev/lib/libarrow.so.600(_ZN5arrow12ArrayBuilder6FinishEPSt10shared_ptrINS_5ArrayEE+0x115)[0x7f298d0e4ed9]\r\n/home/joris/miniconda3/envs/arrow-dev/lib/libarrow.so.600(_ZN5arrow12ArrayBuilder6FinishEv+0x47)[0x7f298d0e4fb7]\r\n/home/joris/miniconda3/envs/arrow-dev/lib/libarrow_python.so.600(+0x28cc91)[0x7f29d05d2c91]\r\n/home/joris/miniconda3/envs/arrow-dev/lib/libarrow_python.so.600(+0x292774)[0x7f29d05d8774]\r\n/home/joris/miniconda3/envs/arrow-dev/lib/libarrow_python.so.600(+0x28ca00)[0x7f29d05d2a00]\r\n/home/joris/miniconda3/envs/arrow-dev/lib/libarrow_python.so.600(+0x288f63)[0x7f29d05cef63]\r\n/home/joris/miniconda3/envs/arrow-dev/lib/libarrow_python.so.600(_ZN5arrow2py17ConvertPySequenceEP7_objectS2_NS0_19PyConversionOptionsEPNS_10MemoryPoolE+0xa9d)[0x7f29d05cadb7]\r\n/home/joris/scipy/repos/arrow/python/pyarrow/lib.cpython-38-x86_64-linux-gnu.so(+0x1c890d)[0x7f29d08f190d]\r\n/home/joris/miniconda3/envs/arrow-dev/bin/python(PyCFunction_Call+0x54)[0x5581d331a814]\r\n/home/joris/miniconda3/envs/arrow-dev/bin/python(_PyObject_MakeTpCall+0x31e)[0x5581d332988e]\r\n/home/joris/miniconda3/envs/arrow-dev/bin/python(_PyEval_EvalFrameDefault+0x5683)[0x5581d33c1bb3]\r\n/home/joris/miniconda3/envs/arrow-dev/bin/python(_PyEval_EvalCodeWithName+0x2c3)[0x5581d339fb23]\r\n/home/joris/miniconda3/envs/arrow-dev/bin/python(PyEval_EvalCodeEx+0x39)[0x5581d33a0b79]\r\n/home/joris/miniconda3/envs/arrow-dev/bin/python(PyEval_EvalCode+0x1b)[0x5581d3442c0b]\r\n/home/joris/miniconda3/envs/arrow-dev/bin/python(+0x2724be)[0x5581d34614be]\r\n/home/joris/miniconda3/envs/arrow-dev/bin/python(+0x12875b)[0x5581d331775b]\r\n/home/joris/miniconda3/envs/arrow-dev/bin/python(_PyEval_EvalFrameDefault+0x92f)[0x5581d33bce5f]\r\n/home/joris/miniconda3/envs/arrow-dev/bin/python(+0x183c23)[0x5581d3372c23]\r\n/home/joris/miniconda3/envs/arrow-dev/bin/python(_PyEval_EvalFrameDefault+0x1d3b)[0x5581d33be26b]\r\n/home/joris/miniconda3/envs/arrow-dev/bin/python(+0x183c23)[0x5581d3372c23]\r\n/home/joris/miniconda3/envs/arrow-dev/bin/python(_PyEval_EvalFrameDefault+0x1d3b)[0x5581d33be26b]\r\n/home/joris/miniconda3/envs/arrow-dev/bin/python(+0x183c23)[0x5581d3372c23]\r\n/home/joris/miniconda3/envs/arrow-dev/bin/python(+0x196089)[0x5581d3385089]\r\n/home/joris/miniconda3/envs/arrow-dev/bin/python(_PyEval_EvalFrameDefault+0xa4b)[0x5581d33bcf7b]\r\n/home/joris/miniconda3/envs/arrow-dev/bin/python(_PyFunction_Vectorcall+0x1a7)[0x5581d33a0d27]\r\n/home/joris/miniconda3/envs/arrow-dev/bin/python(_PyEval_EvalFrameDefault+0x92f)[0x5581d33bce5f]\r\n/home/joris/miniconda3/envs/arrow-dev/bin/python(_PyFunction_Vectorcall+0x1a7)[0x5581d33a0d27]\r\n/home/joris/miniconda3/envs/arrow-dev/bin/python(_PyEval_EvalFrameDefault+0xa4b)[0x5581d33bcf7b]\r\n/home/joris/miniconda3/envs/arrow-dev/bin/python(_PyEval_EvalCodeWithName+0x2c3)[0x5581d339fb23]\r\n/home/joris/miniconda3/envs/arrow-dev/bin/python(+0x1b2637)[0x5581d33a1637]\r\n/home/joris/miniconda3/envs/arrow-dev/bin/python(_PyEval_EvalFrameDefault+0x1789)[0x5581d33bdcb9]\r\n/home/joris/miniconda3/envs/arrow-dev/bin/python(_PyEval_EvalCodeWithName+0x2c3)[0x5581d339fb23]\r\n/home/joris/miniconda3/envs/arrow-dev/bin/python(_PyFunction_Vectorcall+0x379)[0x5581d33a0ef9]\r\n/home/joris/miniconda3/envs/arrow-dev/bin/python(_PyEval_EvalFrameDefault+0xa4b)[0x5581d33bcf7b]\r\n/home/joris/miniconda3/envs/arrow-dev/bin/python(_PyEval_EvalCodeWithName+0x2c3)[0x5581d339fb23]\r\n/home/joris/miniconda3/envs/arrow-dev/bin/python(_PyFunction_Vectorcall+0x379)[0x5581d33a0ef9]\r\n/home/joris/miniconda3/envs/arrow-dev/bin/python(_PyEval_EvalFrameDefault+0xa4b)[0x5581d33bcf7b]\r\n/home/joris/miniconda3/envs/arrow-dev/bin/python(_PyFunction_Vectorcall+0x1a7)[0x5581d33a0d27]\r\n/home/joris/miniconda3/envs/arrow-dev/bin/python(_PyEval_EvalFrameDefault+0xa4b)[0x5581d33bcf7b]\r\n/home/joris/miniconda3/envs/arrow-dev/bin/python(_PyEval_EvalCodeWithName+0x2c3)[0x5581d339fb23]\r\n/home/joris/miniconda3/envs/arrow-dev/bin/python(_PyFunction_Vectorcall+0x379)[0x5581d33a0ef9]\r\n/home/joris/miniconda3/envs/arrow-dev/bin/python(+0x1b25c1)[0x5581d33a15c1]\r\n/home/joris/miniconda3/envs/arrow-dev/bin/python(PyObject_Call+0x5e)[0x5581d3313ace]\r\n/home/joris/miniconda3/envs/arrow-dev/bin/python(_PyEval_EvalFrameDefault+0x21c0)[0x5581d33be6f0]\r\n/home/joris/miniconda3/envs/arrow-dev/bin/python(_PyEval_EvalCodeWithName+0x2c3)[0x5581d339fb23]\r\n/home/joris/miniconda3/envs/arrow-dev/bin/python(_PyFunction_Vectorcall+0x379)[0x5581d33a0ef9]\r\n/home/joris/miniconda3/envs/arrow-dev/bin/python(_PyEval_EvalFrameDefault+0x92f)[0x5581d33bce5f]\r\n/home/joris/miniconda3/envs/arrow-dev/bin/python(_PyEval_EvalCodeWithName+0x2c3)[0x5581d339fb23]\r\n/home/joris/miniconda3/envs/arrow-dev/bin/python(PyEval_EvalCodeEx+0x39)[0x5581d33a0b79]\r\n/home/joris/miniconda3/envs/arrow-dev/bin/python(PyEval_EvalCode+0x1b)[0x5581d3442c0b]\r\n/home/joris/miniconda3/envs/arrow-dev/bin/python(+0x253ca3)[0x5581d3442ca3]\r\n/home/joris/miniconda3/envs/arrow-dev/bin/python(+0x26d8f3)[0x5581d345c8f3]\r\n/home/joris/miniconda3/envs/arrow-dev/bin/python(PyRun_FileExFlags+0x97)[0x5581d34618a7]\r\n/home/joris/miniconda3/envs/arrow-dev/bin/python(PyRun_SimpleFileExFlags+0x19c)[0x5581d3461a7c]\r\n/home/joris/miniconda3/envs/arrow-dev/bin/python(Py_RunMain+0x36d)[0x5581d3461ffd]\r\n/home/joris/miniconda3/envs/arrow-dev/bin/python(Py_BytesMain+0x39)[0x5581d34621b9]\r\n/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xf3)[0x7f29d5c6f0b3]\r\n/home/joris/miniconda3/envs/arrow-dev/bin/python(+0x1e6d19)[0x5581d33d5d19]\r\nAborted (core dumped)\r\n{code}",
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "3h 40m",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 13200
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[Python] Creating a Map array with non-default field names segfaults",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13396940/comment/17450761",
                    "id": "17450761",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=willjones127",
                        "name": "willjones127",
                        "key": "willjones127",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34058",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34058",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34058",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34058"
                        },
                        "displayName": "Will Jones",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "[~amol-] I was reproducing this segfault to test my Python/C++ debugger setup. Are you still working on this? If not I'd be happy to take over.\u00a0",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=willjones127",
                        "name": "willjones127",
                        "key": "willjones127",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34058",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34058",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34058",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34058"
                        },
                        "displayName": "Will Jones",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2021-11-29T23:01:24.872+0000",
                    "updated": "2021-11-29T23:01:24.872+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13396940/comment/17451903",
                    "id": "17451903",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=amol-",
                        "name": "amol-",
                        "key": "amol-",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=amol-&avatarId=46461",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=amol-&avatarId=46461",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=amol-&avatarId=46461",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=amol-&avatarId=46461"
                        },
                        "displayName": "Alessandro Molina",
                        "active": true,
                        "timeZone": "Europe/Rome"
                    },
                    "body": "[~willjones127] you can freely take this one over, I had it as a reminder to fix it but didn't have a chance to get to it yet.",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=amol-",
                        "name": "amol-",
                        "key": "amol-",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=amol-&avatarId=46461",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=amol-&avatarId=46461",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=amol-&avatarId=46461",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=amol-&avatarId=46461"
                        },
                        "displayName": "Alessandro Molina",
                        "active": true,
                        "timeZone": "Europe/Rome"
                    },
                    "created": "2021-12-01T16:01:05.862+0000",
                    "updated": "2021-12-01T16:01:05.862+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13396940/comment/17468702",
                    "id": "17468702",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "body": "Issue resolved by pull request 11855\n[https://github.com/apache/arrow/pull/11855]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "created": "2022-01-04T15:56:55.651+0000",
                    "updated": "2022-01-04T15:56:55.651+0000"
                }
            ],
            "maxResults": 3,
            "total": 3,
            "startAt": 0
        },
        "customfield_12311820": "0|z0u74g:",
        "customfield_12314139": null
    }
}