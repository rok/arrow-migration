{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13131683",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13131683",
    "key": "ARROW-2004",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12341707",
                "id": "12341707",
                "description": "",
                "name": "0.9.0",
                "archived": false,
                "released": true,
                "releaseDate": "2018-03-19"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "name": "Major",
            "id": "3"
        },
        "labels": [
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": null,
        "customfield_12312330": null,
        "versions": [],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
            "name": "wesm",
            "key": "wesmckinn",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
            },
            "displayName": "Wes McKinney",
            "active": true,
            "timeZone": "America/New_York"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12328935",
                "id": "12328935",
                "name": "C++"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": null,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
            "name": "wesm",
            "key": "wesmckinn",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
            },
            "displayName": "Wes McKinney",
            "active": true,
            "timeZone": "America/New_York"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
            "name": "wesm",
            "key": "wesmckinn",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
            },
            "displayName": "Wes McKinney",
            "active": true,
            "timeZone": "America/New_York"
        },
        "aggregateprogress": {
            "progress": 0,
            "total": 0
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 0,
            "total": 0
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-2004/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 0,
            "worklogs": []
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
            "id": "4",
            "description": "An improvement or enhancement to an existing feature or task.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
            "name": "Improvement",
            "subtask": false,
            "avatarId": 21140
        },
        "timespent": null,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@445077e5[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@3f0809d4[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@79dba851[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@6e24817[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@4ad71e62[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@6c7b2aaa[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@48468e54[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@5cf0d5bb[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@2ea6f449[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@1bbda54d[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@67f5bc40[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@3d72e008[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": null,
        "customfield_12312520": null,
        "customfield_12312521": "Thu Jan 18 15:56:26 UTC 2018",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2018-01-18T15:56:22.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-2004/watchers",
            "watchCount": 2,
            "isWatching": false
        },
        "created": "2018-01-17T20:01:09.000+0000",
        "updated": "2018-01-18T15:56:26.000+0000",
        "timeoriginalestimate": null,
        "description": "See discussion in\u00a0https://github.com/apache/arrow/pull/1481#discussion_r162157558",
        "customfield_10010": null,
        "timetracking": {},
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[C++] Add shrink_to_fit option in BufferBuilder::Resize",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13131683/comment/16329678",
                    "id": "16329678",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "wesm opened a new pull request #1486: ARROW-2004: [C++] Add shrink_to_fit parameter to BufferBuilder::Resize, add Reserve method\nURL: https://github.com/apache/arrow/pull/1486\n \n \n   I also relaxed the requirement to pass `const uint8_t*` so that one can pass `const void*` when writing to a `BufferBuilder`. This will not affect any downstream users\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2018-01-17T23:23:53.677+0000",
                    "updated": "2018-01-17T23:23:53.677+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13131683/comment/16330668",
                    "id": "16330668",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "Issue resolved by pull request 1486\n[https://github.com/apache/arrow/pull/1486]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2018-01-18T15:56:22.886+0000",
                    "updated": "2018-01-18T15:56:22.886+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13131683/comment/16330669",
                    "id": "16330669",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "wesm closed pull request #1486: ARROW-2004: [C++] Add shrink_to_fit parameter to BufferBuilder::Resize, add Reserve method\nURL: https://github.com/apache/arrow/pull/1486\n \n \n   \n\nThis is a PR merged from a forked repository.\nAs GitHub hides the original diff on merge, it is displayed below for\nthe sake of provenance:\n\nAs this is a foreign pull request (from a fork), the diff is supplied\nbelow (as it won't show otherwise due to GitHub magic):\n\ndiff --git a/cpp/src/arrow/buffer-test.cc b/cpp/src/arrow/buffer-test.cc\nindex 5fd2706f0..398cc0636 100644\n--- a/cpp/src/arrow/buffer-test.cc\n+++ b/cpp/src/arrow/buffer-test.cc\n@@ -194,4 +194,29 @@ TEST(TestBuffer, SliceMutableBuffer) {\n   ASSERT_TRUE(slice->Equals(expected));\n }\n \n+TEST(TestBufferBuilder, ResizeReserve) {\n+  const std::string data = \"some data\";\n+  auto data_ptr = data.c_str();\n+\n+  BufferBuilder builder;\n+\n+  ASSERT_OK(builder.Append(data_ptr, 9));\n+  ASSERT_EQ(9, builder.length());\n+\n+  ASSERT_OK(builder.Resize(128));\n+  ASSERT_EQ(128, builder.capacity());\n+\n+  // Do not shrink to fit\n+  ASSERT_OK(builder.Resize(64, false));\n+  ASSERT_EQ(128, builder.capacity());\n+\n+  // Shrink to fit\n+  ASSERT_OK(builder.Resize(64));\n+  ASSERT_EQ(64, builder.capacity());\n+\n+  // Reserve elements\n+  ASSERT_OK(builder.Reserve(60));\n+  ASSERT_EQ(128, builder.capacity());\n+}\n+\n }  // namespace arrow\ndiff --git a/cpp/src/arrow/buffer.h b/cpp/src/arrow/buffer.h\nindex 450a4c78b..b50b1a1aa 100644\n--- a/cpp/src/arrow/buffer.h\n+++ b/cpp/src/arrow/buffer.h\n@@ -25,6 +25,7 @@\n #include <string>\n #include <type_traits>\n \n+#include \"arrow/memory_pool.h\"\n #include \"arrow/status.h\"\n #include \"arrow/util/bit-util.h\"\n #include \"arrow/util/macros.h\"\n@@ -32,13 +33,12 @@\n \n namespace arrow {\n \n-class MemoryPool;\n-\n // ----------------------------------------------------------------------\n // Buffer classes\n \n-/// Immutable API for a chunk of bytes which may or may not be owned by the\n-/// class instance.\n+/// \\class Buffer\n+/// \\brief Object containing a pointer to a piece of contiguous memory with a\n+/// particular size. Base class does not own its memory\n ///\n /// Buffers have two related notions of length: size and capacity. Size is\n /// the number of bytes that might have valid data. Capacity is the number\n@@ -133,7 +133,8 @@ ARROW_EXPORT\n std::shared_ptr<Buffer> SliceMutableBuffer(const std::shared_ptr<Buffer>& buffer,\n                                            const int64_t offset, const int64_t length);\n \n-/// A Buffer whose contents can be mutated. May or may not own its data.\n+/// \\class MutableBuffer\n+/// \\brief A Buffer whose contents can be mutated. May or may not own its data.\n class ARROW_EXPORT MutableBuffer : public Buffer {\n  public:\n   MutableBuffer(uint8_t* data, const int64_t size) : Buffer(data, size) {\n@@ -148,6 +149,8 @@ class ARROW_EXPORT MutableBuffer : public Buffer {\n   MutableBuffer() : Buffer(NULLPTR, 0) {}\n };\n \n+/// \\class ResizableBuffer\n+/// \\brief A mutable buffer that can be resized\n class ARROW_EXPORT ResizableBuffer : public MutableBuffer {\n  public:\n   /// Change buffer reported size to indicated size, allocating memory if\n@@ -190,13 +193,22 @@ class ARROW_EXPORT PoolBuffer : public ResizableBuffer {\n   MemoryPool* pool_;\n };\n \n+/// \\class BufferBuilder\n+/// \\brief A class for incrementally building a contiguous chunk of in-memory data\n class ARROW_EXPORT BufferBuilder {\n  public:\n-  explicit BufferBuilder(MemoryPool* pool)\n+  explicit BufferBuilder(MemoryPool* pool ARROW_MEMORY_POOL_DEFAULT)\n       : pool_(pool), data_(NULLPTR), capacity_(0), size_(0) {}\n \n-  /// Resizes the buffer to the nearest multiple of 64 bytes per Layout.md\n-  Status Resize(const int64_t elements) {\n+  /// \\brief Resizes the buffer to the nearest multiple of 64 bytes\n+  ///\n+  /// \\param elements the new capacity of the of the builder. Will be rounded\n+  /// up to a multiple of 64 bytes for padding\n+  /// \\param shrink_to_fit if new capacity smaller than existing size,\n+  /// reallocate internal buffer. Set to false to avoid reallocations when\n+  /// shrinking the builder\n+  /// \\return Status\n+  Status Resize(const int64_t elements, bool shrink_to_fit = true) {\n     // Resize(0) is a no-op\n     if (elements == 0) {\n       return Status::OK();\n@@ -205,7 +217,7 @@ class ARROW_EXPORT BufferBuilder {\n       buffer_ = std::make_shared<PoolBuffer>(pool_);\n     }\n     int64_t old_capacity = capacity_;\n-    RETURN_NOT_OK(buffer_->Resize(elements));\n+    RETURN_NOT_OK(buffer_->Resize(elements, shrink_to_fit));\n     capacity_ = buffer_->capacity();\n     data_ = buffer_->mutable_data();\n     if (capacity_ > old_capacity) {\n@@ -214,7 +226,14 @@ class ARROW_EXPORT BufferBuilder {\n     return Status::OK();\n   }\n \n-  Status Append(const uint8_t* data, int64_t length) {\n+  /// \\brief Ensure that builder can accommodate the additional number of bytes\n+  /// without the need to perform allocations\n+  ///\n+  /// \\param size number of additional bytes to make space for\n+  /// \\return Status\n+  Status Reserve(const int64_t size) { return Resize(size_ + size, false); }\n+\n+  Status Append(const void* data, int64_t length) {\n     if (capacity_ < length + size_) {\n       int64_t new_capacity = BitUtil::NextPower2(length + size_);\n       RETURN_NOT_OK(Resize(new_capacity));\n@@ -248,7 +267,7 @@ class ARROW_EXPORT BufferBuilder {\n   }\n \n   // Unsafe methods don't check existing size\n-  void UnsafeAppend(const uint8_t* data, int64_t length) {\n+  void UnsafeAppend(const void* data, int64_t length) {\n     memcpy(data_ + size_, data, static_cast<size_t>(length));\n     size_ += length;\n   }\n\n\n \n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2018-01-18T15:56:26.898+0000",
                    "updated": "2018-01-18T15:56:26.898+0000"
                }
            ],
            "maxResults": 3,
            "total": 3,
            "startAt": 0
        },
        "customfield_12311820": "0|i3p13b:",
        "customfield_12314139": null
    }
}