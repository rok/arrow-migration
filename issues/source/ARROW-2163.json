{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13138795",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13138795",
    "key": "ARROW-2163",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12341707",
                "id": "12341707",
                "description": "",
                "name": "0.9.0",
                "archived": false,
                "released": true,
                "releaseDate": "2018-03-19"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "name": "Major",
            "id": "3"
        },
        "labels": [
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": null,
        "customfield_12312330": null,
        "versions": [],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
            "name": "apitrou",
            "key": "pitrou",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
            },
            "displayName": "Antoine Pitrou",
            "active": true,
            "timeZone": "Europe/Paris"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12333244",
                "id": "12333244",
                "name": "Continuous Integration"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": null,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
            "name": "wesm",
            "key": "wesmckinn",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
            },
            "displayName": "Wes McKinney",
            "active": true,
            "timeZone": "America/New_York"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
            "name": "wesm",
            "key": "wesmckinn",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
            },
            "displayName": "Wes McKinney",
            "active": true,
            "timeZone": "America/New_York"
        },
        "aggregateprogress": {
            "progress": 0,
            "total": 0
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 0,
            "total": 0
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-2163/votes",
            "votes": 1,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 0,
            "worklogs": []
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
            "id": "4",
            "description": "An improvement or enhancement to an existing feature or task.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
            "name": "Improvement",
            "subtask": false,
            "avatarId": 21140
        },
        "timespent": null,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@46579f85[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@4b1d2c4a[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@2581ab27[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@75caca1[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@4bffbba2[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@1112d1e6[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@39e29870[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@5bb90249[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@6d2d8037[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@6a37e195[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@473bd5bb[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@54033c5f[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": null,
        "customfield_12312520": null,
        "customfield_12312521": "Mon Feb 19 15:53:58 UTC 2018",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2018-02-19T15:53:54.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-2163/watchers",
            "watchCount": 2,
            "isWatching": false
        },
        "created": "2018-02-15T15:44:31.000+0000",
        "updated": "2019-06-03T12:37:40.000+0000",
        "timeoriginalestimate": null,
        "description": "This would also allow us to run the detect changes script earlier than installing apt dependencies, so unnecessary builds will terminate faster",
        "customfield_10010": null,
        "timetracking": {},
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "Install apt dependencies separate from built-in Travis commands, retry on flakiness",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13138795/comment/16368870",
                    "id": "16368870",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "pitrou opened a new pull request #1625: ARROW-2163: [CI] Make apt installs explicit\nURL: https://github.com/apache/arrow/pull/1625\n \n \n   Together with increasing timeouts and retries, this will hopefully make the builds less flaky. Besides, we can now skip installing for jobs that don't have related changes (e.g. Python jobs when a Java-only change is tested), speeding up builds slightly.\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2018-02-19T08:27:20.182+0000",
                    "updated": "2018-02-19T08:27:20.182+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13138795/comment/16369250",
                    "id": "16369250",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "Issue resolved by pull request 1625\n[https://github.com/apache/arrow/pull/1625]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2018-02-19T15:53:54.528+0000",
                    "updated": "2018-02-19T15:53:54.528+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13138795/comment/16369251",
                    "id": "16369251",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "wesm closed pull request #1625: ARROW-2163: [CI] Make apt installs explicit\nURL: https://github.com/apache/arrow/pull/1625\n \n \n   \n\nThis is a PR merged from a forked repository.\nAs GitHub hides the original diff on merge, it is displayed below for\nthe sake of provenance:\n\nAs this is a foreign pull request (from a fork), the diff is supplied\nbelow (as it won't show otherwise due to GitHub magic):\n\ndiff --git a/.travis.yml b/.travis.yml\nindex 9ef16b5cf..73a9f4642 100644\n--- a/.travis.yml\n+++ b/.travis.yml\n@@ -17,23 +17,6 @@\n \n sudo: required\n dist: trusty\n-addons:\n-  apt:\n-    sources:\n-    - ubuntu-toolchain-r-test\n-    packages:\n-    - gcc-4.9   # Needed for C++11\n-    - g++-4.9   # Needed for C++11\n-    - gdb\n-    - ccache\n-    - valgrind\n-    - libboost-dev\n-    - libboost-filesystem-dev\n-    - libboost-system-dev\n-    - libjemalloc-dev\n-    - gtk-doc-tools\n-    - autoconf-archive\n-    - libgirepository1.0-dev\n \n services:\n   - docker\n@@ -41,6 +24,18 @@ services:\n cache:\n   ccache: true\n \n+before_install:\n+  # Common pre-install steps for all builds\n+  - ulimit -c unlimited -S\n+  - |\n+      if [ $TRAVIS_OS_NAME == \"linux\" ]; then\n+        sudo bash -c \"echo -e 'Acquire::Retries 10; Acquire::http::Timeout \\\"20\\\";' > /etc/apt/apt.conf.d/99-travis-retry\"\n+        sudo add-apt-repository -y ppa:ubuntu-toolchain-r/test\n+        sudo apt-get update -qq\n+      fi\n+  - eval `python $TRAVIS_BUILD_DIR/ci/travis_detect_changes.py`\n+\n+\n matrix:\n   fast_finish: true\n   allow_failures:\n@@ -51,24 +46,27 @@ matrix:\n     language: cpp\n     os: linux\n     group: deprecated\n+    env:\n+    - ARROW_TRAVIS_USE_TOOLCHAIN=1\n+    - ARROW_TRAVIS_VALGRIND=1\n+    - ARROW_TRAVIS_PLASMA=1\n+    - ARROW_TRAVIS_ORC=1\n+    - ARROW_TRAVIS_CLANG_FORMAT=1\n+    - ARROW_BUILD_WARNING_LEVEL=CHECKIN\n+    - CC=\"clang-5.0\"\n+    - CXX=\"clang++-5.0\"\n     before_script:\n-    - eval `python $TRAVIS_BUILD_DIR/ci/travis_detect_changes.py`\n-    - export ARROW_TRAVIS_USE_TOOLCHAIN=1\n-    - export ARROW_TRAVIS_VALGRIND=1\n-    - export ARROW_TRAVIS_PLASMA=1\n-    - export ARROW_TRAVIS_ORC=1\n-    - export ARROW_TRAVIS_CLANG_FORMAT=1\n-    - export ARROW_BUILD_WARNING_LEVEL=CHECKIN\n-    - export CC=\"clang-5.0\"\n-    - export CXX=\"clang++-5.0\"\n+    # (ARROW_CI_CPP_AFFECTED implies ARROW_CI_PYTHON_AFFECTED)\n+    - if [ $ARROW_CI_PYTHON_AFFECTED != \"1\" ]; then exit; fi\n+    - $TRAVIS_BUILD_DIR/ci/travis_install_linux.sh\n     - $TRAVIS_BUILD_DIR/ci/travis_install_clang_tools.sh\n     - $TRAVIS_BUILD_DIR/ci/travis_lint.sh\n     - if [ $ARROW_CI_CPP_AFFECTED == \"1\" ]; then $TRAVIS_BUILD_DIR/ci/travis_before_script_cpp.sh; fi\n     script:\n     - if [ $ARROW_CI_CPP_AFFECTED == \"1\" ]; then $TRAVIS_BUILD_DIR/ci/travis_script_cpp.sh; fi\n-    - if [ $ARROW_CI_PYTHON_AFFECTED == \"1\" ]; then $TRAVIS_BUILD_DIR/ci/travis_build_parquet_cpp.sh; fi\n-    - if [ $ARROW_CI_PYTHON_AFFECTED == \"1\" ]; then $TRAVIS_BUILD_DIR/ci/travis_script_python.sh 2.7; fi\n-    - if [ $ARROW_CI_PYTHON_AFFECTED == \"1\" ]; then $TRAVIS_BUILD_DIR/ci/travis_script_python.sh 3.6; fi\n+    - $TRAVIS_BUILD_DIR/ci/travis_build_parquet_cpp.sh\n+    - $TRAVIS_BUILD_DIR/ci/travis_script_python.sh 2.7\n+    - $TRAVIS_BUILD_DIR/ci/travis_script_python.sh 3.6\n   # [OS X] C++ & Python w/ XCode 6.4\n   - compiler: clang\n     language: cpp\n@@ -76,22 +74,22 @@ matrix:\n     os: osx\n     cache:\n     addons:\n+    env:\n+    - ARROW_TRAVIS_USE_TOOLCHAIN=1\n+    - ARROW_TRAVIS_PLASMA=1\n+    - ARROW_TRAVIS_ORC=1\n+    - ARROW_BUILD_WARNING_LEVEL=CHECKIN\n     before_script:\n-    - eval `python $TRAVIS_BUILD_DIR/ci/travis_detect_changes.py`\n-    - export ARROW_TRAVIS_USE_TOOLCHAIN=1\n-    - export ARROW_TRAVIS_PLASMA=1\n-    - export ARROW_TRAVIS_ORC=1\n-    - export ARROW_BUILD_WARNING_LEVEL=CHECKIN\n+    - if [ $ARROW_CI_PYTHON_AFFECTED != \"1\" ]; then exit; fi\n     - if [ $ARROW_CI_CPP_AFFECTED == \"1\" ]; then travis_wait 50 $TRAVIS_BUILD_DIR/ci/travis_before_script_cpp.sh; fi\n     script:\n     - if [ $ARROW_CI_CPP_AFFECTED == \"1\" ]; then $TRAVIS_BUILD_DIR/ci/travis_script_cpp.sh; fi\n-    - if [ $ARROW_CI_PYTHON_AFFECTED == \"1\" ]; then $TRAVIS_BUILD_DIR/ci/travis_build_parquet_cpp.sh; fi\n-    - if [ $ARROW_CI_PYTHON_AFFECTED == \"1\" ]; then $TRAVIS_BUILD_DIR/ci/travis_script_python.sh 2.7; fi\n-    - if [ $ARROW_CI_PYTHON_AFFECTED == \"1\" ]; then $TRAVIS_BUILD_DIR/ci/travis_script_python.sh 3.6; fi\n+    - $TRAVIS_BUILD_DIR/ci/travis_build_parquet_cpp.sh\n+    - $TRAVIS_BUILD_DIR/ci/travis_script_python.sh 2.7\n+    - $TRAVIS_BUILD_DIR/ci/travis_script_python.sh 3.6\n   # [manylinux1] Python\n   - language: cpp\n     before_script:\n-    - eval `python $TRAVIS_BUILD_DIR/ci/travis_detect_changes.py`\n     - if [ $ARROW_CI_PYTHON_AFFECTED == \"1\" ]; then docker pull quay.io/xhochy/arrow_manylinux1_x86_64_base:latest; fi\n     script:\n     - if [ $ARROW_CI_PYTHON_AFFECTED == \"1\" ]; then $TRAVIS_BUILD_DIR/ci/travis_script_manylinux.sh; fi\n@@ -100,18 +98,19 @@ matrix:\n     os: linux\n     jdk: openjdk7\n     before_script:\n-    - eval `python $TRAVIS_BUILD_DIR/ci/travis_detect_changes.py`\n+    - if [ $ARROW_CI_JAVA_AFFECTED != \"1\" ]; then exit; fi\n+    - $TRAVIS_BUILD_DIR/ci/travis_install_linux.sh\n     script:\n-    - if [ $ARROW_CI_JAVA_AFFECTED == \"1\" ]; then $TRAVIS_BUILD_DIR/ci/travis_script_java.sh; fi\n-    - if [ $ARROW_CI_JAVA_AFFECTED == \"1\" ]; then $TRAVIS_BUILD_DIR/ci/travis_script_javadoc.sh; fi\n+    - $TRAVIS_BUILD_DIR/ci/travis_script_java.sh\n+    - $TRAVIS_BUILD_DIR/ci/travis_script_javadoc.sh\n   # Java w/ Oracle JDK 9\n   - language: java\n     os: linux\n     jdk: oraclejdk9\n     before_script:\n-    - eval `python $TRAVIS_BUILD_DIR/ci/travis_detect_changes.py`\n+    - if [ $ARROW_CI_JAVA_AFFECTED != \"1\" ]; then exit; fi\n     script:\n-    - if [ $ARROW_CI_JAVA_AFFECTED == \"1\" ]; then $TRAVIS_BUILD_DIR/ci/travis_script_java.sh; fi\n+    - $TRAVIS_BUILD_DIR/ci/travis_script_java.sh\n     addons:\n       apt:\n         packages:\n@@ -121,51 +120,58 @@ matrix:\n     os: linux\n     env: ARROW_TEST_GROUP=integration\n     jdk: openjdk8\n+    env:\n+    - CC=\"clang-5.0\"\n+    - CXX=\"clang++-5.0\"\n     before_script:\n-    - eval `python $TRAVIS_BUILD_DIR/ci/travis_detect_changes.py`\n-    - source $TRAVIS_BUILD_DIR/ci/travis_install_clang_tools.sh\n-    - export CC=\"clang-5.0\"\n-    - export CXX=\"clang++-5.0\"\n+    - if [ $ARROW_CI_INTEGRATION_AFFECTED != \"1\" ]; then exit; fi\n+    - $TRAVIS_BUILD_DIR/ci/travis_install_linux.sh\n+    - $TRAVIS_BUILD_DIR/ci/travis_install_clang_tools.sh\n     - nvm install node\n-    - if [ $ARROW_CI_INTEGRATION_AFFECTED == \"1\" ]; then $TRAVIS_BUILD_DIR/ci/travis_before_script_js.sh; fi\n-    - if [ $ARROW_CI_INTEGRATION_AFFECTED == \"1\" ]; then $TRAVIS_BUILD_DIR/ci/travis_before_script_cpp.sh; fi\n+    - $TRAVIS_BUILD_DIR/ci/travis_before_script_js.sh\n+    - $TRAVIS_BUILD_DIR/ci/travis_before_script_cpp.sh\n     script:\n-    - if [ $ARROW_CI_INTEGRATION_AFFECTED == \"1\" ]; then $TRAVIS_BUILD_DIR/ci/travis_script_integration.sh; fi\n+    - $TRAVIS_BUILD_DIR/ci/travis_script_integration.sh\n   # NodeJS\n   - language: node_js\n     os: linux\n     node_js: node\n     before_script:\n-    - eval `python $TRAVIS_BUILD_DIR/ci/travis_detect_changes.py`\n-    - if [ $ARROW_CI_JS_AFFECTED == \"1\" ]; then $TRAVIS_BUILD_DIR/ci/travis_before_script_js.sh; fi\n+    - if [ $ARROW_CI_JS_AFFECTED != \"1\" ]; then exit; fi\n+    - $TRAVIS_BUILD_DIR/ci/travis_install_linux.sh\n+    - $TRAVIS_BUILD_DIR/ci/travis_before_script_js.sh\n     script:\n-    - if [ $ARROW_CI_JS_AFFECTED == \"1\" ]; then $TRAVIS_BUILD_DIR/ci/travis_script_js.sh; fi\n+    - $TRAVIS_BUILD_DIR/ci/travis_script_js.sh\n   # C++ & glib w/ gcc 4.9 & autotools\n   - compiler: gcc\n     language: cpp\n     os: linux\n-    env: BUILD_SYSTEM=autotools BUILD_TORCH_EXAMPLE=no\n+    env:\n+    - BUILD_SYSTEM=autotools BUILD_TORCH_EXAMPLE=no\n+    - CC=\"gcc-4.9\"\n+    - CXX=\"g++-4.9\"\n     before_script:\n-    - eval `python $TRAVIS_BUILD_DIR/ci/travis_detect_changes.py`\n-    - export CC=\"gcc-4.9\"\n-    - export CXX=\"g++-4.9\"\n-    - if [ $ARROW_CI_C_GLIB_AFFECTED == \"1\" ]; then $TRAVIS_BUILD_DIR/ci/travis_before_script_cpp.sh --only-library; fi\n-    - if [ $ARROW_CI_C_GLIB_AFFECTED == \"1\" ]; then $TRAVIS_BUILD_DIR/ci/travis_before_script_c_glib.sh; fi\n+    - if [ $ARROW_CI_C_GLIB_AFFECTED != \"1\" ]; then exit; fi\n+    - $TRAVIS_BUILD_DIR/ci/travis_install_linux.sh\n+    - $TRAVIS_BUILD_DIR/ci/travis_before_script_cpp.sh --only-library\n+    - $TRAVIS_BUILD_DIR/ci/travis_before_script_c_glib.sh\n     script:\n-    - if [ $ARROW_CI_C_GLIB_AFFECTED == \"1\" ]; then $TRAVIS_BUILD_DIR/ci/travis_script_c_glib.sh; fi\n+    - $TRAVIS_BUILD_DIR/ci/travis_script_c_glib.sh\n   # C++ & glib w/ gcc 4.9 & meson\n   - compiler: gcc\n     language: cpp\n     os: linux\n-    env: BUILD_SYSTEM=meson BUILD_TORCH_EXAMPLE=no\n+    env:\n+    - BUILD_SYSTEM=meson BUILD_TORCH_EXAMPLE=no\n+    - CC=\"gcc-4.9\"\n+    - CXX=\"g++-4.9\"\n     before_script:\n-    - eval `python $TRAVIS_BUILD_DIR/ci/travis_detect_changes.py`\n-    - export CC=\"gcc-4.9\"\n-    - export CXX=\"g++-4.9\"\n-    - if [ $ARROW_CI_C_GLIB_AFFECTED == \"1\" ]; then $TRAVIS_BUILD_DIR/ci/travis_before_script_cpp.sh --only-library; fi\n-    - if [ $ARROW_CI_C_GLIB_AFFECTED == \"1\" ]; then $TRAVIS_BUILD_DIR/ci/travis_before_script_c_glib.sh; fi\n+    - if [ $ARROW_CI_C_GLIB_AFFECTED != \"1\" ]; then exit; fi\n+    - $TRAVIS_BUILD_DIR/ci/travis_install_linux.sh\n+    - $TRAVIS_BUILD_DIR/ci/travis_before_script_cpp.sh --only-library\n+    - $TRAVIS_BUILD_DIR/ci/travis_before_script_c_glib.sh\n     script:\n-    - if [ $ARROW_CI_C_GLIB_AFFECTED == \"1\" ]; then $TRAVIS_BUILD_DIR/ci/travis_script_c_glib.sh; fi\n+    - $TRAVIS_BUILD_DIR/ci/travis_script_c_glib.sh\n   # [OS X] C++ & glib w/ XCode 8.3 & autotools\n   - compiler: clang\n     osx_image: xcode8.3\n@@ -173,17 +179,14 @@ matrix:\n     cache:\n     addons:\n     rvm: 2.2\n-    env: BUILD_SYSTEM=autotools\n+    env:\n+    - BUILD_SYSTEM=autotools\n     before_script:\n-    - eval `python $TRAVIS_BUILD_DIR/ci/travis_detect_changes.py`\n-    - if [ $ARROW_CI_C_GLIB_AFFECTED == \"1\" ]; then brew update && brew bundle --file=$TRAVIS_BUILD_DIR/c_glib/Brewfile; fi\n-    - if [ $ARROW_CI_C_GLIB_AFFECTED == \"1\" ]; then $TRAVIS_BUILD_DIR/ci/travis_before_script_cpp.sh --only-library; fi\n-    - if [ $ARROW_CI_C_GLIB_AFFECTED == \"1\" ]; then $TRAVIS_BUILD_DIR/ci/travis_before_script_c_glib.sh; fi\n+    - if [ $ARROW_CI_C_GLIB_AFFECTED != \"1\" ]; then exit; fi\n+    - $TRAVIS_BUILD_DIR/ci/travis_before_script_cpp.sh --only-library\n+    - $TRAVIS_BUILD_DIR/ci/travis_before_script_c_glib.sh\n     script:\n-    - if [ $ARROW_CI_C_GLIB_AFFECTED == \"1\" ]; then $TRAVIS_BUILD_DIR/ci/travis_script_c_glib.sh; fi\n-\n-before_install:\n-- ulimit -c unlimited -S\n+    - $TRAVIS_BUILD_DIR/ci/travis_script_c_glib.sh\n \n after_failure:\n - COREFILE=$(find . -maxdepth 2 -name \"core*\" | head -n 1)\ndiff --git a/ci/travis_before_script_c_glib.sh b/ci/travis_before_script_c_glib.sh\nindex 9d07e02a8..27d1e86fd 100755\n--- a/ci/travis_before_script_c_glib.sh\n+++ b/ci/travis_before_script_c_glib.sh\n@@ -21,6 +21,12 @@ set -ex\n \n source $TRAVIS_BUILD_DIR/ci/travis_env_common.sh\n \n+if [ $TRAVIS_OS_NAME = \"osx\" ]; then\n+  brew update && brew bundle --file=$TRAVIS_BUILD_DIR/c_glib/Brewfile\n+else  # Linux\n+  sudo apt-get install -y -q gtk-doc-tools autoconf-archive libgirepository1.0-dev\n+fi\n+\n if [ $TRAVIS_OS_NAME = \"osx\" ]; then\n   export PKG_CONFIG_PATH=$PKG_CONFIG_PATH:/usr/local/opt/libffi/lib/pkgconfig\n   export XML_CATALOG_FILES=/usr/local/etc/xml/catalog\ndiff --git a/ci/travis_install_clang_tools.sh b/ci/travis_install_clang_tools.sh\nindex 630c09e31..9c89253df 100755\n--- a/ci/travis_install_clang_tools.sh\n+++ b/ci/travis_install_clang_tools.sh\n@@ -20,5 +20,5 @@\n wget -O - http://llvm.org/apt/llvm-snapshot.gpg.key|sudo apt-key add -\n sudo apt-add-repository -y \\\n      \"deb http://llvm.org/apt/trusty/ llvm-toolchain-trusty-5.0 main\"\n-sudo apt-get update -q\n+sudo apt-get update -qq\n sudo apt-get install -q clang-5.0 clang-format-5.0 clang-tidy-5.0\ndiff --git a/ci/travis_install_linux.sh b/ci/travis_install_linux.sh\nnew file mode 100755\nindex 000000000..acee9ebcb\n--- /dev/null\n+++ b/ci/travis_install_linux.sh\n@@ -0,0 +1,26 @@\n+#!/usr/bin/env bash\n+\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#   http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing,\n+# software distributed under the License is distributed on an\n+# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+# KIND, either express or implied.  See the License for the\n+# specific language governing permissions and limitations\n+# under the License.\n+\n+sudo apt-get install -y -q \\\n+    gdb ccache libboost-dev libboost-filesystem-dev \\\n+    libboost-system-dev libjemalloc-dev\n+\n+if [ \"$ARROW_TRAVIS_VALGRIND\" == \"1\" ]; then\n+    sudo apt-get install -y -q valgrind\n+fi\n\n\n \n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2018-02-19T15:53:58.376+0000",
                    "updated": "2018-02-19T15:53:58.376+0000"
                }
            ],
            "maxResults": 3,
            "total": 3,
            "startAt": 0
        },
        "customfield_12311820": "0|i3q8c7:",
        "customfield_12314139": null
    }
}