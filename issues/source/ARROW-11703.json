{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13359705",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13359705",
    "key": "ARROW-11703",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12349493",
                "id": "12349493",
                "description": "",
                "name": "4.0.0",
                "archived": false,
                "released": true,
                "releaseDate": "2021-04-26"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "name": "Major",
            "id": "3"
        },
        "labels": [
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [
            {
                "id": "12610992",
                "self": "https://issues.apache.org/jira/rest/api/2/issueLink/12610992",
                "type": {
                    "id": "10001",
                    "name": "dependent",
                    "inward": "is depended upon by",
                    "outward": "depends upon",
                    "self": "https://issues.apache.org/jira/rest/api/2/issueLinkType/10001"
                },
                "outwardIssue": {
                    "id": "13293624",
                    "key": "ARROW-8199",
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13293624",
                    "fields": {
                        "summary": "[C++] Add support for multi-column sort on Table",
                        "status": {
                            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
                            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
                            "name": "Resolved",
                            "id": "5",
                            "statusCategory": {
                                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                                "id": 3,
                                "key": "done",
                                "colorName": "green",
                                "name": "Done"
                            }
                        },
                        "priority": {
                            "self": "https://issues.apache.org/jira/rest/api/2/priority/4",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
                            "name": "Minor",
                            "id": "4"
                        },
                        "issuetype": {
                            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/5",
                            "id": "5",
                            "description": "General wishlist item.",
                            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
                            "name": "Wish",
                            "subtask": false,
                            "avatarId": 21140
                        }
                    }
                }
            }
        ],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=icook",
            "name": "icook",
            "key": "icook",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=icook&avatarId=29388",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=icook&avatarId=29388",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=icook&avatarId=29388",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=icook&avatarId=29388"
            },
            "displayName": "Ian Cook",
            "active": true,
            "timeZone": "America/New_York"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12333008",
                "id": "12333008",
                "name": "R"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=npr",
            "name": "npr",
            "key": "npr",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
            },
            "displayName": "Neal Richardson",
            "active": true,
            "timeZone": "America/Los_Angeles"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=npr",
            "name": "npr",
            "key": "npr",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
            },
            "displayName": "Neal Richardson",
            "active": true,
            "timeZone": "America/Los_Angeles"
        },
        "aggregateprogress": {
            "progress": 43800,
            "total": 43800,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 43800,
            "total": 43800,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-11703/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 73,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13359705/worklog/568074",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ianmcook opened a new pull request #9745:\nURL: https://github.com/apache/arrow/pull/9745\n\n\n   \n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-03-18T03:48:47.379+0000",
                    "updated": "2021-03-18T03:48:47.379+0000",
                    "started": "2021-03-18T03:48:47.379+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "568074",
                    "issueId": "13359705"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13359705/worklog/568075",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "github-actions[bot] commented on pull request #9745:\nURL: https://github.com/apache/arrow/pull/9745#issuecomment-801599144\n\n\n   https://issues.apache.org/jira/browse/ARROW-11703\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-03-18T03:49:13.918+0000",
                    "updated": "2021-03-18T03:49:13.918+0000",
                    "started": "2021-03-18T03:49:13.918+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "568075",
                    "issueId": "13359705"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13359705/worklog/568669",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ianmcook commented on pull request #9745:\nURL: https://github.com/apache/arrow/pull/9745#issuecomment-802366183\n\n\n   `sort()` is an S3 generic so it was easy to implement methods for the `ArrowDatum` types. It would nice to implement `order()` methods too, but `order()` is not an S3 generic. Looking at what the bit64 developer did to implement `sort()`, I think it is not worthwhile here.\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-03-18T22:55:56.449+0000",
                    "updated": "2021-03-18T22:55:56.449+0000",
                    "started": "2021-03-18T22:55:56.448+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "568669",
                    "issueId": "13359705"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13359705/worklog/568695",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ianmcook commented on a change in pull request #9745:\nURL: https://github.com/apache/arrow/pull/9745#discussion_r597327538\n\n\n\n##########\nFile path: r/R/chunked-array.R\n##########\n@@ -89,7 +89,11 @@ ChunkedArray <- R6Class(\"ChunkedArray\", inherit = ArrowDatum,\n       assert_that(is.logical(descending))\n       assert_that(length(descending) == 1L)\n       assert_that(!is.na(descending))\n-      call_function(\"array_sort_indices\", self, options = list(order = descending))\n+      call_function(\n+        \"sort_indices\",\n+        self,\n+        options = list(names = \"\", orders = as.integer(descending))\n+      )\n\nReview comment:\n       Before this change:\r\n   ```r\r\n   ChunkedArray$create(c(2L, 1L), c(4L, 3L))$SortIndices()\r\n   ## ChunkedArray\r\n   ## [\r\n   ##   [\r\n   ##     1,\r\n   ##     0\r\n   ##   ],\r\n   ##   [\r\n   ##     1,\r\n   ##     0\r\n   ##   ]\r\n   ## ]\r\n   ```\r\n   After this change:\r\n   ```r\r\n   ChunkedArray$create(c(2L, 1L), c(4L, 3L))$SortIndices()\r\n   ## Array\r\n   ## <uint64>\r\n   ## [\r\n   ##   1,\r\n   ##   0,\r\n   ##   3,\r\n   ##   2\r\n   ## ]\r\n   ```\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-03-19T00:23:26.356+0000",
                    "updated": "2021-03-19T00:23:26.356+0000",
                    "started": "2021-03-19T00:23:26.356+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "568695",
                    "issueId": "13359705"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13359705/worklog/568992",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nealrichardson commented on a change in pull request #9745:\nURL: https://github.com/apache/arrow/pull/9745#discussion_r597793008\n\n\n\n##########\nFile path: r/R/array.R\n##########\n@@ -291,3 +299,11 @@ is.Array <- function(x, type = NULL) {\n   }\n   is_it\n }\n+\n+#' @export\n+sort.Array <- function(x, decreasing = FALSE, na.last = TRUE, ...) {\n\nReview comment:\n       Is there a reason you can't make this `sort.ArrowDatum`? \n\n##########\nFile path: r/R/array.R\n##########\n@@ -291,3 +299,11 @@ is.Array <- function(x, type = NULL) {\n   }\n   is_it\n }\n+\n+#' @export\n+sort.Array <- function(x, decreasing = FALSE, na.last = TRUE, ...) {\n+  if (!identical(na.last, TRUE)) {\n+    stop(\"Arrow only supports sort() with na.last = TRUE\", call. = FALSE)\n\nReview comment:\n       Do we need a C++ JIRA for this?\r\n   \r\n   Is there an R workaround that would allow supporting this?\n\n##########\nFile path: r/R/dplyr.R\n##########\n@@ -390,6 +409,25 @@ collect.arrow_dplyr_query <- function(x, as_data_frame = TRUE, ...) {\n         tab <- RecordBatch$create(!!!cols)\n       }\n     }\n+    # Arrange rows\n+    # TODO: support sorting by expressions, not just field names\n\nReview comment:\n       So you can sort on an expression, but that expression won't just `mutate()`? Hmm.\n\n##########\nFile path: r/R/dplyr.R\n##########\n@@ -631,17 +669,98 @@ abandon_ship <- function(call, .data, msg = NULL) {\n   eval.parent(call, 2)\n }\n \n-arrange.arrow_dplyr_query <- function(.data, ...) {\n+arrange.arrow_dplyr_query <- function(.data, ..., .by_group = FALSE) {\n+  # TODO: handle .by_group argument\n+  if (!isFALSE(.by_group)) {\n+    stop(\".by_group argument not supported for Arrow objects\", call. = FALSE)\n+  }\n+\n+  call <- match.call()\n+  exprs <- quos(...)\n+\n+  if (length(exprs) == 0) {\n+    # Nothing to do\n+    return(.data)\n+  }\n+\n   .data <- arrow_dplyr_query(.data)\n+\n+  # Restrict the cases we support for now\n   if (query_on_dataset(.data)) {\n     not_implemented_for_dataset(\"arrange()\")\n   }\n-  # TODO(ARROW-11703) move this to Arrow\n-  call <- match.call()\n-  abandon_ship(call, .data)\n+  is_grouped <- length(dplyr::group_vars(.data)) > 0\n\nReview comment:\n       does this matter if .by_group is FALSE?\n\n##########\nFile path: r/R/dplyr.R\n##########\n@@ -390,6 +409,25 @@ collect.arrow_dplyr_query <- function(x, as_data_frame = TRUE, ...) {\n         tab <- RecordBatch$create(!!!cols)\n       }\n     }\n+    # Arrange rows\n+    # TODO: support sorting by expressions, not just field names\n+    # TODO: support sorting by names and expressions that are valid *before* the\n\nReview comment:\n       This is solvable if you use the same machinery that we do for filter and mutate: the expressions they build always map all the way down to the underlying data. \r\n   \n\n##########\nFile path: r/R/dplyr.R\n##########\n@@ -46,7 +46,12 @@ arrow_dplyr_query <- function(.data) {\n       # drop_empty_groups is a logical value indicating whether to drop\n       # groups formed by factor levels that don't appear in the data. It\n       # should be non-null only when the data is grouped.\n-      drop_empty_groups = NULL\n+      drop_empty_groups = NULL,\n+      # arrange_vars will be a list of expressions\n+      arrange_vars = list(),\n\nReview comment:\n       Why isn't this a character vector like `group_by_vars`?\n\n##########\nFile path: r/R/array.R\n##########\n@@ -131,6 +133,12 @@ Array <- R6Class(\"Array\",\n       assert_is(i, \"Array\")\n       call_function(\"filter\", self, i, options = list(keep_na = keep_na))\n     },\n+    SortIndices = function(descending = FALSE) {\n\nReview comment:\n       IMO `SortIndices` feels a little odd as an R6 method. An alternative approach you could take would be like `match_arrow` in compute.R: create an `order_arrow` function that behaves like `order`, just to encapsulate any logic of how to format the inputs etc. Then you can call that in `sort` and `arrange`.\n\n##########\nFile path: r/R/dplyr.R\n##########\n@@ -631,17 +669,98 @@ abandon_ship <- function(call, .data, msg = NULL) {\n   eval.parent(call, 2)\n }\n \n-arrange.arrow_dplyr_query <- function(.data, ...) {\n+arrange.arrow_dplyr_query <- function(.data, ..., .by_group = FALSE) {\n+  # TODO: handle .by_group argument\n+  if (!isFALSE(.by_group)) {\n+    stop(\".by_group argument not supported for Arrow objects\", call. = FALSE)\n+  }\n+\n+  call <- match.call()\n+  exprs <- quos(...)\n+\n+  if (length(exprs) == 0) {\n+    # Nothing to do\n+    return(.data)\n+  }\n+\n   .data <- arrow_dplyr_query(.data)\n+\n+  # Restrict the cases we support for now\n   if (query_on_dataset(.data)) {\n     not_implemented_for_dataset(\"arrange()\")\n   }\n-  # TODO(ARROW-11703) move this to Arrow\n-  call <- match.call()\n-  abandon_ship(call, .data)\n+  is_grouped <- length(dplyr::group_vars(.data)) > 0\n+  if (is_grouped) {\n+    return(abandon_ship(call, .data, 'arrange() on grouped data not supported in Arrow'))\n+  }\n+  is_dataset <- query_on_dataset(.data)\n+  if (is_dataset) {\n+    return(abandon_ship(call, .data))\n+  }\n+\n+  # find and remove any dplyr::desc() and tidy-eval\n+  # the arrange expressions inside an Arrow data_mask\n+  sorts <- vector(\"list\", length(exprs))\n+  descs <- logical(0)\n+  mask <- arrow_mask(.data)\n+  for (i in seq_along(exprs)) {\n+    x <- find_and_remove_desc(exprs[[i]])\n+    exprs[[i]] <- x[[\"quos\"]]\n+    sorts[[i]] <- arrow_eval(exprs[[i]], mask)\n\nReview comment:\n       Ah so you are using `arrow_eval`, so this should handle expressions and later mutating just fine (though of course you should trust the tests and not take my word for it).\n\n##########\nFile path: r/tests/testthat/helper-data.R\n##########\n@@ -134,3 +134,17 @@ example_with_logical_factors <- tibble::tibble(\n     \"hey buddy\"\n   )\n )\n+\n+# the values in each column of this tibble are in ascending order in the C locale.\n+# there are some ties, but sorting by any two columns will give a deterministic order.\n+example_data_for_sorting <- tibble::tibble(\n+  int = c(-.Machine$integer.max, -101L, -100L, 0L, 0L, 1L, 100L, 1000L, .Machine$integer.max, NA_integer_),\n+  dbl = c(-Inf, -.Machine$double.xmax, -.Machine$double.xmin, 0, .Machine$double.xmin, pi, .Machine$double.xmax, Inf, NaN, NA_real_),\n+  # R string collation varies by locale, while libarrow always uses the C locale for string collation\n+  # (in other words: string values in libarrow are ordered lexicographically as bytestrings)\n+  # to make R sort functions use the C locale, run Sys.setlocale(\"LC_COLLATE\", \"C\")\n\nReview comment:\n       Doesn't testthat set that?\n\n##########\nFile path: r/R/dplyr.R\n##########\n@@ -46,7 +46,12 @@ arrow_dplyr_query <- function(.data) {\n       # drop_empty_groups is a logical value indicating whether to drop\n       # groups formed by factor levels that don't appear in the data. It\n       # should be non-null only when the data is grouped.\n-      drop_empty_groups = NULL\n+      drop_empty_groups = NULL,\n+      # arrange_vars will be a list of expressions\n+      arrange_vars = list(),\n+      # arrange_desc will be a logical vector indicating the sort order for each\n+      # expression in arrange_vars (FALSE for ascending, TRUE for descending)\n+      arrange_desc = logical()\n\nReview comment:\n       Alternatively, `arrange_vars` could be a logical vector with names being the column names and values being the `descending` logical value.\n\n##########\nFile path: r/R/expression.R\n##########\n@@ -181,6 +181,20 @@ find_array_refs <- function(x) {\n   unlist(out)\n }\n \n+get_field_name <-  function(x, msg = NULL) {\n\nReview comment:\n       How does this relate to `get_field_names()` in dplyr.R?\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-03-19T16:14:21.104+0000",
                    "updated": "2021-03-19T16:14:21.104+0000",
                    "started": "2021-03-19T16:14:21.103+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "568992",
                    "issueId": "13359705"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13359705/worklog/569105",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ianmcook commented on a change in pull request #9745:\nURL: https://github.com/apache/arrow/pull/9745#discussion_r597959815\n\n\n\n##########\nFile path: r/R/array.R\n##########\n@@ -291,3 +299,11 @@ is.Array <- function(x, type = NULL) {\n   }\n   is_it\n }\n+\n+#' @export\n+sort.Array <- function(x, decreasing = FALSE, na.last = TRUE, ...) {\n\nReview comment:\n       Because the method for `Scalar` is defined differently\r\n   https://github.com/apache/arrow/pull/9745/commits/003b6f7036601f8444cc305bf394b8806b0d9062#diff-631d7e73ccb129db2ba09fe78b6a26e7164476e6142e926ba0fb4753599b7026R73\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-03-19T20:35:11.428+0000",
                    "updated": "2021-03-19T20:35:11.428+0000",
                    "started": "2021-03-19T20:35:11.427+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "569105",
                    "issueId": "13359705"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13359705/worklog/569115",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ianmcook commented on a change in pull request #9745:\nURL: https://github.com/apache/arrow/pull/9745#discussion_r597966525\n\n\n\n##########\nFile path: r/R/array.R\n##########\n@@ -131,6 +133,12 @@ Array <- R6Class(\"Array\",\n       assert_is(i, \"Array\")\n       call_function(\"filter\", self, i, options = list(keep_na = keep_na))\n     },\n+    SortIndices = function(descending = FALSE) {\n\nReview comment:\n       I think if `Take` and `Filter` are R6 methods, then it makes sense for `SortIndices` to be an R6 method. In the C++ compute API, these three functions are all defined in the same way (see [`cpp/src/arrow/compute/api_vector.h`](https://github.com/apache/arrow/blob/master/cpp/src/arrow/compute/api_vector.h)).\r\n   \r\n   My preference would be to keep it as an R6 method and create a separate `order_arrow` function the behaves like `order()` if we want that. \n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-03-19T20:48:48.207+0000",
                    "updated": "2021-03-19T20:48:48.207+0000",
                    "started": "2021-03-19T20:48:48.207+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "569115",
                    "issueId": "13359705"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13359705/worklog/569116",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ianmcook commented on a change in pull request #9745:\nURL: https://github.com/apache/arrow/pull/9745#discussion_r597966525\n\n\n\n##########\nFile path: r/R/array.R\n##########\n@@ -131,6 +133,12 @@ Array <- R6Class(\"Array\",\n       assert_is(i, \"Array\")\n       call_function(\"filter\", self, i, options = list(keep_na = keep_na))\n     },\n+    SortIndices = function(descending = FALSE) {\n\nReview comment:\n       I think if `Take` and `Filter` are R6 methods, then it makes sense for `SortIndices` to be an R6 method. In the C++ compute API, these three functions are all defined in the same way (see [`cpp/src/arrow/compute/api_vector.h`](https://github.com/apache/arrow/blob/master/cpp/src/arrow/compute/api_vector.h)).\r\n   \r\n   My preference would be to keep it as an R6 method and create a separate `order_arrow()` function the behaves like `order()` if we want that. \n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-03-19T20:49:01.113+0000",
                    "updated": "2021-03-19T20:49:01.113+0000",
                    "started": "2021-03-19T20:49:01.113+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "569116",
                    "issueId": "13359705"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13359705/worklog/569117",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nealrichardson commented on a change in pull request #9745:\nURL: https://github.com/apache/arrow/pull/9745#discussion_r597966858\n\n\n\n##########\nFile path: r/R/array.R\n##########\n@@ -291,3 +299,11 @@ is.Array <- function(x, type = NULL) {\n   }\n   is_it\n }\n+\n+#' @export\n+sort.Array <- function(x, decreasing = FALSE, na.last = TRUE, ...) {\n\nReview comment:\n       That's fine, S3 inheritance will handle that right?\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-03-19T20:49:34.389+0000",
                    "updated": "2021-03-19T20:49:34.389+0000",
                    "started": "2021-03-19T20:49:34.389+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "569117",
                    "issueId": "13359705"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13359705/worklog/569121",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ianmcook commented on a change in pull request #9745:\nURL: https://github.com/apache/arrow/pull/9745#discussion_r597968134\n\n\n\n##########\nFile path: r/R/array.R\n##########\n@@ -291,3 +299,11 @@ is.Array <- function(x, type = NULL) {\n   }\n   is_it\n }\n+\n+#' @export\n+sort.Array <- function(x, decreasing = FALSE, na.last = TRUE, ...) {\n+  if (!identical(na.last, TRUE)) {\n+    stop(\"Arrow only supports sort() with na.last = TRUE\", call. = FALSE)\n\nReview comment:\n       I can work around it in R. I'll create a C++ JIRA too because controlling where missing values sort is common across different languages (e.g. `na_position` in pandas and `NULLS FIRST` and `NULLS LAST` in SQL)\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-03-19T20:52:06.753+0000",
                    "updated": "2021-03-19T20:52:06.753+0000",
                    "started": "2021-03-19T20:52:06.753+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "569121",
                    "issueId": "13359705"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13359705/worklog/569122",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nealrichardson commented on a change in pull request #9745:\nURL: https://github.com/apache/arrow/pull/9745#discussion_r597968473\n\n\n\n##########\nFile path: r/R/array.R\n##########\n@@ -131,6 +133,12 @@ Array <- R6Class(\"Array\",\n       assert_is(i, \"Array\")\n       call_function(\"filter\", self, i, options = list(keep_na = keep_na))\n     },\n+    SortIndices = function(descending = FALSE) {\n\nReview comment:\n       Fair point that they go together in that header, but that might mean that Take and Filter don't need to be R6 methods either. Historically, Take and Filter required different handling for Array vs. ChunkedArray etc., but now that the `call_function` interface exists, that's not the case, and in fact the C++ interface is functional rather than methods-based in that sense. Anyway, something to think about.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-03-19T20:53:00.013+0000",
                    "updated": "2021-03-19T20:53:00.013+0000",
                    "started": "2021-03-19T20:53:00.012+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "569122",
                    "issueId": "13359705"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13359705/worklog/569125",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ianmcook commented on a change in pull request #9745:\nURL: https://github.com/apache/arrow/pull/9745#discussion_r597969857\n\n\n\n##########\nFile path: r/R/dplyr.R\n##########\n@@ -46,7 +46,12 @@ arrow_dplyr_query <- function(.data) {\n       # drop_empty_groups is a logical value indicating whether to drop\n       # groups formed by factor levels that don't appear in the data. It\n       # should be non-null only when the data is grouped.\n-      drop_empty_groups = NULL\n+      drop_empty_groups = NULL,\n+      # arrange_vars will be a list of expressions\n+      arrange_vars = list(),\n\nReview comment:\n       `dplyr::arrange()` supports sorting by expressions, not just columns, so I designed this to support that. It just needs to be wired up in the `collect` method which I'm still workking out how best to do.\n\n##########\nFile path: r/R/dplyr.R\n##########\n@@ -46,7 +46,12 @@ arrow_dplyr_query <- function(.data) {\n       # drop_empty_groups is a logical value indicating whether to drop\n       # groups formed by factor levels that don't appear in the data. It\n       # should be non-null only when the data is grouped.\n-      drop_empty_groups = NULL\n+      drop_empty_groups = NULL,\n+      # arrange_vars will be a list of expressions\n+      arrange_vars = list(),\n\nReview comment:\n       `dplyr::arrange()` supports sorting by expressions, not just columns, so I designed this to support that. It just needs to be wired up in the `collect` method which I'm still working out how best to do.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-03-19T20:56:10.915+0000",
                    "updated": "2021-03-19T20:56:10.915+0000",
                    "started": "2021-03-19T20:56:10.915+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "569125",
                    "issueId": "13359705"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13359705/worklog/569128",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ianmcook commented on a change in pull request #9745:\nURL: https://github.com/apache/arrow/pull/9745#discussion_r597970687\n\n\n\n##########\nFile path: r/R/dplyr.R\n##########\n@@ -46,7 +46,12 @@ arrow_dplyr_query <- function(.data) {\n       # drop_empty_groups is a logical value indicating whether to drop\n       # groups formed by factor levels that don't appear in the data. It\n       # should be non-null only when the data is grouped.\n-      drop_empty_groups = NULL\n+      drop_empty_groups = NULL,\n+      # arrange_vars will be a list of expressions\n+      arrange_vars = list(),\n+      # arrange_desc will be a logical vector indicating the sort order for each\n+      # expression in arrange_vars (FALSE for ascending, TRUE for descending)\n+      arrange_desc = logical()\n\nReview comment:\n       I thought of doing that, but we would lose support for sorting by arbitrary expressions. I experimented with some various ways to avoid having two parallel structures like this, but those all seemed messier.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-03-19T20:57:47.078+0000",
                    "updated": "2021-03-19T20:57:47.078+0000",
                    "started": "2021-03-19T20:57:47.078+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "569128",
                    "issueId": "13359705"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13359705/worklog/569130",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nealrichardson commented on a change in pull request #9745:\nURL: https://github.com/apache/arrow/pull/9745#discussion_r597971507\n\n\n\n##########\nFile path: r/R/dplyr.R\n##########\n@@ -46,7 +46,12 @@ arrow_dplyr_query <- function(.data) {\n       # drop_empty_groups is a logical value indicating whether to drop\n       # groups formed by factor levels that don't appear in the data. It\n       # should be non-null only when the data is grouped.\n-      drop_empty_groups = NULL\n+      drop_empty_groups = NULL,\n+      # arrange_vars will be a list of expressions\n+      arrange_vars = list(),\n+      # arrange_desc will be a logical vector indicating the sort order for each\n+      # expression in arrange_vars (FALSE for ascending, TRUE for descending)\n+      arrange_desc = logical()\n\nReview comment:\n       Yeah I saw further down that you were trying to support arbitrary expressions, so I guess then we have to treat these more like filter/mutate than group_by.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-03-19T20:59:21.273+0000",
                    "updated": "2021-03-19T20:59:21.273+0000",
                    "started": "2021-03-19T20:59:21.273+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "569130",
                    "issueId": "13359705"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13359705/worklog/569131",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ianmcook commented on a change in pull request #9745:\nURL: https://github.com/apache/arrow/pull/9745#discussion_r597972335\n\n\n\n##########\nFile path: r/R/dplyr.R\n##########\n@@ -390,6 +409,25 @@ collect.arrow_dplyr_query <- function(x, as_data_frame = TRUE, ...) {\n         tab <- RecordBatch$create(!!!cols)\n       }\n     }\n+    # Arrange rows\n+    # TODO: support sorting by expressions, not just field names\n\nReview comment:\n       Something like that, yes. But it might be cleaner to construct the Vector of mutated values to sort on outside of the Table/RecordBatch so we don't need to deal with column naming and removing it after. I'm still experimenting with that.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-03-19T21:01:04.525+0000",
                    "updated": "2021-03-19T21:01:04.525+0000",
                    "started": "2021-03-19T21:01:04.525+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "569131",
                    "issueId": "13359705"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13359705/worklog/569132",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ianmcook commented on a change in pull request #9745:\nURL: https://github.com/apache/arrow/pull/9745#discussion_r597972480\n\n\n\n##########\nFile path: r/R/dplyr.R\n##########\n@@ -390,6 +409,25 @@ collect.arrow_dplyr_query <- function(x, as_data_frame = TRUE, ...) {\n         tab <- RecordBatch$create(!!!cols)\n       }\n     }\n+    # Arrange rows\n+    # TODO: support sorting by expressions, not just field names\n+    # TODO: support sorting by names and expressions that are valid *before* the\n\nReview comment:\n       Ok cool, I need to look closer at that.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-03-19T21:01:27.545+0000",
                    "updated": "2021-03-19T21:01:27.545+0000",
                    "started": "2021-03-19T21:01:27.545+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "569132",
                    "issueId": "13359705"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13359705/worklog/569133",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ianmcook commented on a change in pull request #9745:\nURL: https://github.com/apache/arrow/pull/9745#discussion_r597972842\n\n\n\n##########\nFile path: r/R/dplyr.R\n##########\n@@ -631,17 +669,98 @@ abandon_ship <- function(call, .data, msg = NULL) {\n   eval.parent(call, 2)\n }\n \n-arrange.arrow_dplyr_query <- function(.data, ...) {\n+arrange.arrow_dplyr_query <- function(.data, ..., .by_group = FALSE) {\n+  # TODO: handle .by_group argument\n+  if (!isFALSE(.by_group)) {\n+    stop(\".by_group argument not supported for Arrow objects\", call. = FALSE)\n+  }\n+\n+  call <- match.call()\n+  exprs <- quos(...)\n+\n+  if (length(exprs) == 0) {\n+    # Nothing to do\n+    return(.data)\n+  }\n+\n   .data <- arrow_dplyr_query(.data)\n+\n+  # Restrict the cases we support for now\n   if (query_on_dataset(.data)) {\n     not_implemented_for_dataset(\"arrange()\")\n   }\n-  # TODO(ARROW-11703) move this to Arrow\n-  call <- match.call()\n-  abandon_ship(call, .data)\n+  is_grouped <- length(dplyr::group_vars(.data)) > 0\n+  if (is_grouped) {\n+    return(abandon_ship(call, .data, 'arrange() on grouped data not supported in Arrow'))\n+  }\n+  is_dataset <- query_on_dataset(.data)\n+  if (is_dataset) {\n+    return(abandon_ship(call, .data))\n+  }\n+\n+  # find and remove any dplyr::desc() and tidy-eval\n+  # the arrange expressions inside an Arrow data_mask\n+  sorts <- vector(\"list\", length(exprs))\n+  descs <- logical(0)\n+  mask <- arrow_mask(.data)\n+  for (i in seq_along(exprs)) {\n+    x <- find_and_remove_desc(exprs[[i]])\n+    exprs[[i]] <- x[[\"quos\"]]\n+    sorts[[i]] <- arrow_eval(exprs[[i]], mask)\n\nReview comment:\n       Cool, if so that's great; I will experiment with that next.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-03-19T21:02:21.555+0000",
                    "updated": "2021-03-19T21:02:21.555+0000",
                    "started": "2021-03-19T21:02:21.554+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "569133",
                    "issueId": "13359705"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13359705/worklog/569138",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ianmcook commented on a change in pull request #9745:\nURL: https://github.com/apache/arrow/pull/9745#discussion_r597976468\n\n\n\n##########\nFile path: r/R/expression.R\n##########\n@@ -181,6 +181,20 @@ find_array_refs <- function(x) {\n   unlist(out)\n }\n \n+get_field_name <-  function(x, msg = NULL) {\n\nReview comment:\n       I should probably rename this. It takes a single `array_expression` as input. If the expression is just a bare column reference, it returns its name deparsed as a character string. If the expression is something more than just a bare column reference, it errors. This function will change or go away when I implement support for sorting by expressions.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-03-19T21:10:09.430+0000",
                    "updated": "2021-03-19T21:10:09.430+0000",
                    "started": "2021-03-19T21:10:09.430+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "569138",
                    "issueId": "13359705"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13359705/worklog/569140",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ianmcook commented on a change in pull request #9745:\nURL: https://github.com/apache/arrow/pull/9745#discussion_r597976995\n\n\n\n##########\nFile path: r/tests/testthat/helper-data.R\n##########\n@@ -134,3 +134,17 @@ example_with_logical_factors <- tibble::tibble(\n     \"hey buddy\"\n   )\n )\n+\n+# the values in each column of this tibble are in ascending order in the C locale.\n+# there are some ties, but sorting by any two columns will give a deterministic order.\n+example_data_for_sorting <- tibble::tibble(\n+  int = c(-.Machine$integer.max, -101L, -100L, 0L, 0L, 1L, 100L, 1000L, .Machine$integer.max, NA_integer_),\n+  dbl = c(-Inf, -.Machine$double.xmax, -.Machine$double.xmin, 0, .Machine$double.xmin, pi, .Machine$double.xmax, Inf, NaN, NA_real_),\n+  # R string collation varies by locale, while libarrow always uses the C locale for string collation\n+  # (in other words: string values in libarrow are ordered lexicographically as bytestrings)\n+  # to make R sort functions use the C locale, run Sys.setlocale(\"LC_COLLATE\", \"C\")\n\nReview comment:\n       Does it? I don't know\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-03-19T21:11:28.478+0000",
                    "updated": "2021-03-19T21:11:28.478+0000",
                    "started": "2021-03-19T21:11:28.478+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "569140",
                    "issueId": "13359705"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13359705/worklog/569141",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "ianmcook commented on a change in pull request #9745:\nURL: https://github.com/apache/arrow/pull/9745#discussion_r597977464\n\n\n\n##########\nFile path: r/R/array.R\n##########\n@@ -291,3 +299,11 @@ is.Array <- function(x, type = NULL) {\n   }\n   is_it\n }\n+\n+#' @export\n+sort.Array <- function(x, decreasing = FALSE, na.last = TRUE, ...) {\n\nReview comment:\n       Oh right, ok, I'll check that and change it if it works \ud83d\udc4d \n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-03-19T21:12:35.261+0000",
                    "updated": "2021-03-19T21:12:35.261+0000",
                    "started": "2021-03-19T21:12:35.261+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "569141",
                    "issueId": "13359705"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/2",
            "id": "2",
            "description": "A new feature of the product, which has yet to be developed.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21141&avatarType=issuetype",
            "name": "New Feature",
            "subtask": false,
            "avatarId": 21141
        },
        "timespent": 43800,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@1a442969[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@de1b3fc[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@297330e5[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@290d0864[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@7383146[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@2f32e7e0[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@1ff60efb[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@5e796b49[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@180dc3c1[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@20b82ac7[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@f9669fd[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@1aa06865[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 43800,
        "customfield_12312520": null,
        "customfield_12312521": "Fri Mar 26 02:11:28 UTC 2021",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2021-03-26T02:11:28.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-11703/watchers",
            "watchCount": 2,
            "isWatching": false
        },
        "created": "2021-02-19T21:54:49.000+0000",
        "updated": "2021-03-26T02:11:41.000+0000",
        "timeoriginalestimate": null,
        "description": "Only for Table/RecordBatch for now. There are sorting functions in the compute module now (https://arrow.apache.org/docs/cpp/compute.html#sorts-and-partitions) and I think they have Python bindings already.",
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "12h 10m",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 43800
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[R] Implement dplyr::arrange()",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13359705/comment/17309083",
                    "id": "17309083",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=npr",
                        "name": "npr",
                        "key": "npr",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
                        },
                        "displayName": "Neal Richardson",
                        "active": true,
                        "timeZone": "America/Los_Angeles"
                    },
                    "body": "Issue resolved by pull request 9745\n[https://github.com/apache/arrow/pull/9745]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=npr",
                        "name": "npr",
                        "key": "npr",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
                        },
                        "displayName": "Neal Richardson",
                        "active": true,
                        "timeZone": "America/Los_Angeles"
                    },
                    "created": "2021-03-26T02:11:28.812+0000",
                    "updated": "2021-03-26T02:11:28.812+0000"
                }
            ],
            "maxResults": 1,
            "total": 1,
            "startAt": 0
        },
        "customfield_12311820": "0|z0nv3c:",
        "customfield_12314139": null
    }
}