{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13190783",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13190783",
    "key": "ARROW-3484",
    "fields": {
        "fixVersions": [],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/10003",
            "id": "10003",
            "description": "Resolved",
            "name": "Resolved"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "name": "Major",
            "id": "3"
        },
        "labels": [
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [],
        "customfield_12313825": null,
        "assignee": null,
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/6",
            "description": "The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/closed.png",
            "name": "Closed",
            "id": "6",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12333008",
                "id": "12333008",
                "name": "R"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=javierluraschi",
            "name": "javierluraschi",
            "key": "javierluraschi",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
            },
            "displayName": "Javier Luraschi",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=javierluraschi",
            "name": "javierluraschi",
            "key": "javierluraschi",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
            },
            "displayName": "Javier Luraschi",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "aggregateprogress": {
            "progress": 4800,
            "total": 4800,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 4800,
            "total": 4800,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-3484/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 8,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13190783/worklog/153321",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "javierluraschi opened a new pull request #2741: [ARROW-3484] [R] Support to read record_batch from stream\nURL: https://github.com/apache/arrow/pull/2741\n \n \n   https://issues.apache.org/jira/browse/ARROW-3479 enabled \r\n   \r\n   ```r\r\n   library(arrow)\r\n   \r\n   record <- arrow::record_batch(data.frame(a = c(1,2,3)))\r\n   stream <- record$to_stream()\r\n   ```\r\n   \r\n   This PR implements the reverse operation by running:\r\n   \r\n   ```r\r\n   read_record_batch_stream(stream)\r\n   ```\r\n   ```\r\n   [[1]]\r\n   # A tibble: 3 x 1\r\n         a\r\n     <dbl>\r\n   1     1\r\n   2     2\r\n   3     3\r\n   ```\r\n   \r\n   Notice that `read_record_batch_stream()` returns a list of data frames since the original data is batched. I considered being more efficient and returning a single data frame; however, this is not trivial since we would have to refactor our `*Array_to_Vector` Rcpp functions to support assembling chunks efficiently. Instead, for my use case, I much rather handle this in Spark to ensure Spark returns a single batch instead of multiple ones. Additionally, the problem of binding lists of data frames to single data frames is well studied in R, as a users I would call `dplyr::bind_rows()` which has been optimized already. This is not to say that we should not consider optimizing this further, but at least, for my use case, this is good enough to get me going. There is also a case to be said here to support a proper streaming interface with a callback function, etc. Then again, this interface is good enough for me at the moment.\r\n   \r\n   Also, this PR makes `read_record_batch()` public to have parity to `read_record_batch_stream()`, the former operates over a file while the latter over a stream. @romainfrancois, I can revert this change if we did not intend to make `read_record_batch()` public, but it made sense to me to expose both as I was looking at this change.\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-10-10T23:23:25.900+0000",
                    "updated": "2018-10-10T23:23:25.900+0000",
                    "started": "2018-10-10T23:23:25.899+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "153321",
                    "issueId": "13190783"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13190783/worklog/153415",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "romainfrancois commented on issue #2741: [ARROW-3484] [R] Support to read record_batch from stream\nURL: https://github.com/apache/arrow/pull/2741#issuecomment-428831558\n \n \n   I think it's unfortunate you did this before #2714 is merged. \r\n   \r\n   I'll take the idea of being able to read from a raw vector (not sure it's a good idea to call these streams, as streams are different things, e.g. InputStream ...), so I'll update #2714 with a `read_record_batch.raw` method so that you can do: \r\n   \r\n   ```\r\n   vec <- .... # raw vector with the batch bytes\r\n   read_record_batch(vec)\r\n   ```\r\n   \r\n   Also having `read_record_batch_stream` to return a list of data frames does not play well with the rest. I'll rather implement `read_table.raw`\r\n   \r\n   An `arrow::Table` is just that, a set of record batch sharing the same schema, and a `Table` can be converted to a `tibble` with the canonical `as_tibble` method. \r\n   \r\n   \r\n   \r\n   \n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-10-11T06:04:48.785+0000",
                    "updated": "2018-10-11T06:04:48.785+0000",
                    "started": "2018-10-11T06:04:48.780+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "153415",
                    "issueId": "13190783"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13190783/worklog/153418",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "romainfrancois commented on a change in pull request #2741: [ARROW-3484] [R] Support to read record_batch from stream\nURL: https://github.com/apache/arrow/pull/2741#discussion_r224339451\n \n \n\n ##########\n File path: r/src/RecordBatch.cpp\n ##########\n @@ -113,6 +113,34 @@ RawVector RecordBatch__to_stream(const std::shared_ptr<arrow::RecordBatch>& batc\n   return res;\n }\n \n+// [[Rcpp::export]]\n+List read_record_batch_stream_(SEXP stream) {\n+  RawVector vec(stream);\n+\n+  std::shared_ptr<arrow::Buffer> buffer;\n+  buffer.reset(new arrow::Buffer(vec.begin(), vec.size()));\n+\n+  io::BufferReader buffer_reader(buffer);\n+\n+  std::shared_ptr<RecordBatchReader> batch_reader;\n+  R_ERROR_NOT_OK(\n+      arrow::ipc::RecordBatchStreamReader::Open(&buffer_reader, &batch_reader));\n+\n+  List batches;\n+\n+  std::shared_ptr<RecordBatch> chunk;\n+  while (true) {\n+    R_ERROR_NOT_OK(batch_reader->ReadNext(&chunk));\n+    if (chunk == nullptr) {\n+      break;\n+    }\n+\n+    batches.push_back(RecordBatch__to_dataframe(chunk));\n \n Review comment:\n   \ud83d\ude2c you don't really want to use `List::push_back` \n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-10-11T07:19:19.702+0000",
                    "updated": "2018-10-11T07:19:19.702+0000",
                    "started": "2018-10-11T07:19:19.701+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "153418",
                    "issueId": "13190783"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13190783/worklog/153661",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "javierluraschi commented on a change in pull request #2741: ARROW-3484: [R] Support to read record_batch from stream\nURL: https://github.com/apache/arrow/pull/2741#discussion_r224575449\n \n \n\n ##########\n File path: r/src/RecordBatch.cpp\n ##########\n @@ -113,6 +113,34 @@ RawVector RecordBatch__to_stream(const std::shared_ptr<arrow::RecordBatch>& batc\n   return res;\n }\n \n+// [[Rcpp::export]]\n+List read_record_batch_stream_(SEXP stream) {\n+  RawVector vec(stream);\n+\n+  std::shared_ptr<arrow::Buffer> buffer;\n+  buffer.reset(new arrow::Buffer(vec.begin(), vec.size()));\n+\n+  io::BufferReader buffer_reader(buffer);\n+\n+  std::shared_ptr<RecordBatchReader> batch_reader;\n+  R_ERROR_NOT_OK(\n+      arrow::ipc::RecordBatchStreamReader::Open(&buffer_reader, &batch_reader));\n+\n+  List batches;\n+\n+  std::shared_ptr<RecordBatch> chunk;\n+  while (true) {\n+    R_ERROR_NOT_OK(batch_reader->ReadNext(&chunk));\n+    if (chunk == nullptr) {\n+      break;\n+    }\n+\n+    batches.push_back(RecordBatch__to_dataframe(chunk));\n \n Review comment:\n   Looks like `Rcpp::List` is implemented as an `Rcpp::Vector`. However, when I look at the implementation of `push_back()` [Vector.h#L622-L646](https://github.com/RcppCore/Rcpp/blob/f3c5a34e06e774532227470b01c63a8f08ce4313/inst/include/Rcpp/vector/Vector.h#L622-L646), looks like the vector would contain `SEXP` elements. From what I understand `SEXP` would wrap the data frame `List` over each entry in the `Vector` which would cause the `SEXP` to be copied many times, but not the underlined data frame, correct?\r\n   \r\n   The contents inside a batch are usually pretty big so there should be only a very few batches coming from Spark, not sure how other clients would use batches though, so as long as the `SEXP` is not triggering a a copy of the entire data frame for every call to `push_bac()`, which I believe is not, we would only incur the cost of copying a few `SXEP`s which shouldn't be terrible.\r\n   \r\n   That said, if there are use cases where one would create a lot of small batches of `record_batch` records, I agree using `push_back()` here could be an issue. Is there a more efficient way to append an element to a list in `Rcpp`? I also wonder why `Rcpp` relies on this loop:\r\n   \r\n   ```cpp\r\n   for( ; it < position; ++it, ++target_it){\r\n     *target_it = *it ;\r\n   }\r\n   ```\r\n   \r\n   Instead of `std::copy()` the `SEXP`s, there is probably a good reason I'm missing.\r\n   \r\n   Did I missed something else to consider?\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-10-11T19:27:44.076+0000",
                    "updated": "2018-10-11T19:27:44.076+0000",
                    "started": "2018-10-11T19:27:44.076+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "153661",
                    "issueId": "13190783"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13190783/worklog/153663",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "javierluraschi commented on issue #2741: ARROW-3484: [R] Support to read record_batch from stream\nURL: https://github.com/apache/arrow/pull/2741#issuecomment-429088867\n \n \n   Not unfortunate at all, been learning at all so happy to close this one is needed... However, related to this comment: https://github.com/apache/arrow/pull/2714/files#r224516362, while I could consider using `read_record_batch.raw()`, it seems like it only reads one record... but I rather need a function that would read many record batches from a `raw()`. So it feels to me like we still need this function to read the whole stream of record batches, correct? Am I missing something here?\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-10-11T19:31:45.632+0000",
                    "updated": "2018-10-11T19:31:45.632+0000",
                    "started": "2018-10-11T19:31:45.631+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "153663",
                    "issueId": "13190783"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13190783/worklog/153668",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "romainfrancois commented on issue #2741: ARROW-3484: [R] Support to read record_batch from stream\nURL: https://github.com/apache/arrow/pull/2741#issuecomment-429094403\n \n \n   Nope, I am. \n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-10-11T19:49:29.075+0000",
                    "updated": "2018-10-11T19:49:29.075+0000",
                    "started": "2018-10-11T19:49:29.074+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "153668",
                    "issueId": "13190783"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13190783/worklog/153676",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "romainfrancois commented on issue #2741: ARROW-3484: [R] Support to read record_batch from stream\nURL: https://github.com/apache/arrow/pull/2741#issuecomment-429099415\n \n \n   An Rcpp::List is indeed a vector of R objects, aka SEXP. They don\u2019t grow, so when you push_back what happens is that a new list with one more element is created and the data is copied. This usually is bad performance. It\u2019s usually better to use a structure that knows how to grow such as a std::vector. \r\n   \r\n   And in any case, dealing with multiple record batches of the same format is the job of an arrow::Table\r\n   \r\n   \n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-10-11T20:05:04.060+0000",
                    "updated": "2018-10-11T20:05:04.060+0000",
                    "started": "2018-10-11T20:05:04.060+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "153676",
                    "issueId": "13190783"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13190783/worklog/153679",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "romainfrancois commented on issue #2741: ARROW-3484: [R] Support to read record_batch from stream\nURL: https://github.com/apache/arrow/pull/2741#issuecomment-429099743\n \n \n   I need to revise what read_record_batch does, see the comments on the pr that was merged a few hours ago. \n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-10-11T20:06:17.188+0000",
                    "updated": "2018-10-11T20:06:17.188+0000",
                    "started": "2018-10-11T20:06:17.188+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "153679",
                    "issueId": "13190783"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
            "id": "4",
            "description": "An improvement or enhancement to an existing feature or task.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
            "name": "Improvement",
            "subtask": false,
            "avatarId": 21140
        },
        "timespent": 4800,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@1fd96fed[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@2b99e8e5[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@1185e877[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@753ff462[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@3680caef[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@4981eb55[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@77796442[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@7d6f022b[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@4d0868db[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@b15e96c[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@3772c738[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@3209e5a7[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 4800,
        "customfield_12312520": null,
        "customfield_12312521": "Tue Oct 16 12:37:41 UTC 2018",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2018-10-16T12:38:08.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-3484/watchers",
            "watchCount": 2,
            "isWatching": false
        },
        "created": "2018-10-10T23:11:08.000+0000",
        "updated": "2018-10-17T21:31:38.000+0000",
        "timeoriginalestimate": null,
        "description": "https://issues.apache.org/jira/browse/ARROW-3479\u00a0enabled\u00a0\r\n{code:java}\r\nrecord <- arrow::record_batch(data.frame(a = c(1,2,3)))\r\nstream <- record$to_stream()\r\n{code}\r\nThis issues tracks implementing the reverse operation by running:\r\n{code:java}\r\nread_record_batch_stream(stream){code}",
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "1h 20m",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 4800
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[R] Support to read record_batch from stream",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13190783/comment/16651609",
                    "id": "16651609",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=romainfrancois",
                        "name": "romainfrancois",
                        "key": "romainfrancois",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=romainfrancois&avatarId=35092",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=romainfrancois&avatarId=35092",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=romainfrancois&avatarId=35092",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=romainfrancois&avatarId=35092"
                        },
                        "displayName": "Romain Francois",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "This is superseded by 3505",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=romainfrancois",
                        "name": "romainfrancois",
                        "key": "romainfrancois",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=romainfrancois&avatarId=35092",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=romainfrancois&avatarId=35092",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=romainfrancois&avatarId=35092",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=romainfrancois&avatarId=35092"
                        },
                        "displayName": "Romain Francois",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2018-10-16T12:37:41.946+0000",
                    "updated": "2018-10-16T12:37:41.946+0000"
                }
            ],
            "maxResults": 1,
            "total": 1,
            "startAt": 0
        },
        "customfield_12311820": "0|i3z273:",
        "customfield_12314139": null
    }
}