{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13129654",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13129654",
    "key": "ARROW-1979",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12341707",
                "id": "12341707",
                "description": "",
                "name": "0.9.0",
                "archived": false,
                "released": true,
                "releaseDate": "2018-03-19"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "name": "Major",
            "id": "3"
        },
        "labels": [
            "ci-failure",
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": null,
        "customfield_12312330": null,
        "versions": [],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=paul.e.taylor",
            "name": "paul.e.taylor",
            "key": "paul.e.taylor",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
            },
            "displayName": "Paul Taylor",
            "active": true,
            "timeZone": "America/Los_Angeles"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12332552",
                "id": "12332552",
                "name": "JavaScript"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": null,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
            "name": "wesm",
            "key": "wesmckinn",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
            },
            "displayName": "Wes McKinney",
            "active": true,
            "timeZone": "America/New_York"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
            "name": "wesm",
            "key": "wesmckinn",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
            },
            "displayName": "Wes McKinney",
            "active": true,
            "timeZone": "America/New_York"
        },
        "aggregateprogress": {
            "progress": 0,
            "total": 0
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 0,
            "total": 0
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-1979/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 0,
            "worklogs": []
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
            "id": "1",
            "description": "A problem which impairs or prevents the functions of the product.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
            "name": "Bug",
            "subtask": false,
            "avatarId": 21133
        },
        "timespent": null,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@476b3522[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@77d43364[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@284a758e[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@7e533cf0[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@63c42bae[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@6172dfd1[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@1a6f2074[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@7dbc2b75[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@3fe7e637[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@481c2a4d[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@2b13dfba[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@3768ae2e[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": null,
        "customfield_12312520": null,
        "customfield_12312521": "Thu Jan 11 23:35:19 UTC 2018",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2018-01-11T23:35:19.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-1979/watchers",
            "watchCount": 2,
            "isWatching": false
        },
        "created": "2018-01-09T20:29:12.000+0000",
        "updated": "2019-03-01T23:49:53.000+0000",
        "timeoriginalestimate": null,
        "description": "see https://travis-ci.org/apache/arrow/jobs/326537559#L1288",
        "customfield_10010": null,
        "timetracking": {},
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[JS] JS builds handing in es2015:umd tests",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13129654/comment/16319093",
                    "id": "16319093",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "cc [~paul.e.taylor]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2018-01-09T20:29:24.211+0000",
                    "updated": "2018-01-09T20:29:24.211+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13129654/comment/16321650",
                    "id": "16321650",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "trxcllnt opened a new pull request #1471: ARROW-1979: [JS] Fix JS builds hanging in es2015\nURL: https://github.com/apache/arrow/pull/1471\n \n \n   Also fixes [ARROW-1903](https://issues.apache.org/jira/browse/ARROW-1903)\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2018-01-11T03:40:03.894+0000",
                    "updated": "2018-01-11T03:40:03.894+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13129654/comment/16323220",
                    "id": "16323220",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "wesm closed pull request #1471: ARROW-1979: [JS] Fix JS builds hanging in es2015\nURL: https://github.com/apache/arrow/pull/1471\n \n \n   \n\nThis is a PR merged from a forked repository.\nAs GitHub hides the original diff on merge, it is displayed below for\nthe sake of provenance:\n\nAs this is a foreign pull request (from a fork), the diff is supplied\nbelow (as it won't show otherwise due to GitHub magic):\n\ndiff --git a/js/README.md b/js/README.md\nindex e58d335cd..b427923e3 100644\n--- a/js/README.md\n+++ b/js/README.md\n@@ -178,7 +178,7 @@ The base `apache-arrow` package includes all the compilation targets for conveni\n The targets are also published under the `@apache-arrow` namespace:\n \n ```sh\n-npm install apache-arrow # <-- combined es5/CommonJS + UMD, es2015/ESModules + UMD, and TypeScript package\n+npm install apache-arrow # <-- combined es5/UMD, es2015/CommonJS/ESModules/UMD, and TypeScript package\n npm install @apache-arrow/ts # standalone TypeScript package\n npm install @apache-arrow/es5-cjs # standalone es5/CommonJS package\n npm install @apache-arrow/es5-esm # standalone es5/ESModules package\ndiff --git a/js/gulp/arrow-task.js b/js/gulp/arrow-task.js\nindex cc33ee144..d1e8046e6 100644\n--- a/js/gulp/arrow-task.js\n+++ b/js/gulp/arrow-task.js\n@@ -28,8 +28,8 @@ const { Observable, ReplaySubject } = require('rxjs');\n \n const arrowTask = ((cache) => memoizeTask(cache, function copyMain(target, format) {\n     const out = targetDir(target);\n-    const srcGlob = `src/**/*.ts`;\n-    const es5Glob = `${targetDir(`es5`, `cjs`)}/**/*.js`;\n+    const dtsGlob = `${targetDir(`es2015`, `cjs`)}/**/*.ts`;\n+    const cjsGlob = `${targetDir(`es2015`, `cjs`)}/**/*.js`;\n     const esmGlob = `${targetDir(`es2015`, `esm`)}/**/*.js`;\n     const es5UmdGlob = `${targetDir(`es5`, `umd`)}/**/*.js`;\n     const es5UmdMaps = `${targetDir(`es5`, `umd`)}/**/*.map`;\n@@ -38,8 +38,8 @@ const arrowTask = ((cache) => memoizeTask(cache, function copyMain(target, forma\n     const ch_ext = (ext) => gulpRename((p) => { p.extname = ext; });\n     const append = (ap) => gulpRename((p) => { p.basename += ap; });\n     return Observable.forkJoin(\n-      observableFromStreams(gulp.src(srcGlob), gulp.dest(out)), // copy src ts files\n-      observableFromStreams(gulp.src(es5Glob), gulp.dest(out)), // copy es5 cjs files\n+      observableFromStreams(gulp.src(dtsGlob), gulp.dest(out)), // copy d.ts files\n+      observableFromStreams(gulp.src(cjsGlob), gulp.dest(out)), // copy es2015 cjs files\n       observableFromStreams(gulp.src(esmGlob), ch_ext(`.mjs`), gulp.dest(out)), // copy es2015 esm files and rename to `.mjs`\n       observableFromStreams(gulp.src(es5UmdGlob), append(`.es5.min`), gulp.dest(out)), // copy es5 umd files and add `.min`\n       observableFromStreams(gulp.src(es5UmdMaps),                     gulp.dest(out)), // copy es5 umd sourcemap files, but don't rename\ndiff --git a/js/gulp/package-task.js b/js/gulp/package-task.js\nindex fc9596435..2976d0ad4 100644\n--- a/js/gulp/package-task.js\n+++ b/js/gulp/package-task.js\n@@ -46,8 +46,8 @@ const createMainPackageJson = (target, format) => (orig) => ({\n     name: npmPkgName,\n     main: mainExport,\n     module: `${mainExport}.mjs`,\n-    browser: `${mainExport}.es5.min.js`,\n-    [`browser:es2015`]: `${mainExport}.es2015.min.js`,\n+    dist: `${mainExport}.es5.min.js`,\n+    [`dist:es2015`]: `${mainExport}.es2015.min.js`,\n     [`@std/esm`]: { esm: `mjs` }\n });\n   \n@@ -67,7 +67,7 @@ const createScopedPackageJSON = (target, format) => (({ name, ...orig }) =>\n         (xs, key) => ({ ...xs, [key]: xs[key] || orig[key] }),\n         { name: `${npmOrgName}/${packageName(target, format)}`,\n           version: undefined, main: `${mainExport}.js`, types: `${mainExport}.d.ts`,\n-          browser: undefined, [`browser:es2015`]: undefined, module: undefined, [`@std/esm`]: undefined }\n+          dist: undefined, [`dist:es2015`]: undefined, module: undefined, [`@std/esm`]: undefined }\n       )\n     )\n );\ndiff --git a/js/gulp/test-task.js b/js/gulp/test-task.js\nindex f21aaf236..ab280b092 100644\n--- a/js/gulp/test-task.js\n+++ b/js/gulp/test-task.js\n@@ -34,7 +34,7 @@ argv.update && jestArgv.push(`-u`);\n argv.verbose && jestArgv.push(`--verbose`);\n argv.coverage && jestArgv.push(`--coverage`);\n \n-const debugArgv = [`--runInBand`, `--env`, `jest-environment-node-debug`];\n+const debugArgv = [`--runInBand`, `--env`, `node-debug`];\n const jest = require.resolve(path.join(`..`, `node_modules`, `.bin`, `jest`));\n const testOptions = {\n     env: { ...process.env },\ndiff --git a/js/package.json b/js/package.json\nindex 3903d1eed..d68e7a627 100644\n--- a/js/package.json\n+++ b/js/package.json\n@@ -49,10 +49,8 @@\n     \"gulpfile.js\",\n     \"npm-release.sh\"\n   ],\n-  \"peerDependencies\": {\n-    \"command-line-usage\": \"4.0.1\"\n-  },\n   \"dependencies\": {\n+    \"@types/text-encoding-utf-8\": \"1.0.1\",\n     \"command-line-args\": \"4.0.7\",\n     \"command-line-usage\": \"4.0.2\",\n     \"flatbuffers\": \"trxcllnt/flatbuffers-esm\",\n@@ -61,45 +59,44 @@\n     \"tslib\": \"1.8.1\"\n   },\n   \"devDependencies\": {\n-    \"@std/esm\": \"0.18.0\",\n+    \"@std/esm\": \"0.19.1\",\n     \"@types/flatbuffers\": \"1.6.5\",\n     \"@types/glob\": \"5.0.34\",\n-    \"@types/jest\": \"21.1.8\",\n-    \"@types/node\": \"8.5.0\",\n-    \"@types/text-encoding\": \"0.0.32\",\n+    \"@types/jest\": \"22.0.1\",\n+    \"@types/node\": \"9.3.0\",\n     \"ast-types\": \"0.10.1\",\n     \"benchmark\": \"2.1.4\",\n     \"coveralls\": \"3.0.0\",\n     \"del\": \"3.0.0\",\n-    \"esdoc\": \"1.0.3\",\n+    \"esdoc\": \"1.0.4\",\n     \"esdoc-standard-plugin\": \"1.0.0\",\n     \"glob\": \"7.1.2\",\n-    \"google-closure-compiler\": \"20171203.0.0\",\n+    \"google-closure-compiler\": \"20180101.0.0\",\n     \"gulp\": \"github:gulpjs/gulp#6d71a658c61edb3090221579d8f97dbe086ba2ed\",\n     \"gulp-json-transform\": \"0.4.5\",\n     \"gulp-rename\": \"1.2.2\",\n-    \"gulp-sourcemaps\": \"2.6.1\",\n+    \"gulp-sourcemaps\": \"2.6.3\",\n     \"gulp-transform-js-ast\": \"1.0.2\",\n     \"gulp-typescript\": \"3.2.3\",\n     \"ix\": \"2.3.4\",\n-    \"jest\": \"21.2.1\",\n+    \"jest\": \"22.0.5\",\n     \"jest-environment-node-debug\": \"2.0.0\",\n     \"json\": \"9.0.6\",\n-    \"lerna\": \"2.5.1\",\n+    \"lerna\": \"2.6.0\",\n     \"lint-staged\": \"6.0.0\",\n-    \"merge2\": \"1.2.0\",\n+    \"merge2\": \"1.2.1\",\n     \"mkdirp\": \"0.5.1\",\n     \"npm-run-all\": \"4.1.2\",\n     \"pump\": \"1.0.2\",\n     \"rimraf\": \"2.6.2\",\n-    \"rxjs\": \"5.5.5\",\n+    \"rxjs\": \"5.5.6\",\n     \"shx\": \"0.2.2\",\n     \"source-map-loader\": \"0.2.3\",\n     \"trash\": \"4.2.1\",\n-    \"ts-jest\": \"21.2.4\",\n-    \"tslint\": \"5.8.0\",\n+    \"ts-jest\": \"22.0.1\",\n+    \"tslint\": \"5.9.1\",\n     \"typescript\": \"2.6.2\",\n-    \"uglifyjs-webpack-plugin\": \"1.1.2\",\n+    \"uglifyjs-webpack-plugin\": \"1.1.6\",\n     \"webpack\": \"3.10.0\",\n     \"xml2js\": \"0.4.19\"\n   },\n@@ -134,9 +131,12 @@\n       \"/node_modules/\"\n     ],\n     \"transform\": {\n-      \".(ts|tsx)\": \"<rootDir>/node_modules/ts-jest/preprocessor.js\",\n-      \".(js|jsx)\": \"<rootDir>/node_modules/babel-jest/build/index.js\"\n+      \".(ts|tsx)\": \"./node_modules/ts-jest/preprocessor.js\",\n+      \".(js|jsx)\": \"./node_modules/babel-jest/build/index.js\"\n     },\n+    \"transformIgnorePatterns\": [\n+      \"/node_modules/\", \"/(es2015|esnext)\\/umd/\"\n+    ],\n     \"testRegex\": \"(.*(-|\\\\.)(test|spec)s?)\\\\.(ts|tsx|js)$\"\n   }\n }\ndiff --git a/js/src/text-encoding-utf-8.d.ts b/js/src/text-encoding-utf-8.d.ts\ndeleted file mode 100644\nindex 68ba4dfd9..000000000\n--- a/js/src/text-encoding-utf-8.d.ts\n+++ /dev/null\n@@ -1,4 +0,0 @@\n-declare module 'text-encoding-utf-8' {\n-    import * as TextEncoding from 'text-encoding';\n-    export = TextEncoding;\n-}\ndiff --git a/js/src/vector/numeric.ts b/js/src/vector/numeric.ts\nindex fe4767809..830d6082b 100644\n--- a/js/src/vector/numeric.ts\n+++ b/js/src/vector/numeric.ts\n@@ -34,10 +34,10 @@ export class NumericVector<T, TArray extends TypedArray> extends Vector<T> {\n     concat(...vectors: Vector<T>[]): Vector<T> {\n         return new VirtualVector(this.data.constructor as TypedArrayConstructor, this, ...vectors);\n     }\n-    slice(start?: number, end?: number) {\n+    slice<R = TArray>(start?: number, end?: number): R {\n         const { data, stride } = this, from = start! | 0;\n         const to = end === undefined ? data.length : Math.max(end | 0, from);\n-        return data.subarray(Math.min(from, to) * stride | 0, to * stride | 0);\n+        return data.subarray(Math.min(from, to) * stride | 0, to * stride | 0) as any as R;\n     }\n }\n \n@@ -49,7 +49,8 @@ export class FixedWidthNumericVector<T, TArray extends TypedArray> extends Numer\n \n export class BoolVector extends NumericVector<boolean, Uint8Array> {\n     static pack(values: Iterable<any>) {\n-        let xs = [], n, i = 0;\n+        let n = 0, i = 0;\n+        let xs: number[] = [];\n         let bit = 0, byte = 0;\n         for (const value of values) {\n             value && (byte |= 1 << bit);\ndiff --git a/js/src/vector/virtual.ts b/js/src/vector/virtual.ts\nindex 6ec3a8eef..42db78706 100644\n--- a/js/src/vector/virtual.ts\n+++ b/js/src/vector/virtual.ts\n@@ -93,7 +93,7 @@ export class VirtualVector<T> implements Vector<T> {\n                 // this is a significant improvement as we avoid the memcpy \ud83c\udf89\n                 if ((source.length / vector.stride | 0) < total) {\n                     let vectorsLength = vectors.length;\n-                    let count = 0, length = 0, sources = [];\n+                    let count = 0, length = 0, sources = [] as any[];\n                     do {\n                         sources.push(source);\n                         length += source.length;\ndiff --git a/js/test/Arrow.ts b/js/test/Arrow.ts\nindex 87641e52b..f2c4e930f 100644\n--- a/js/test/Arrow.ts\n+++ b/js/test/Arrow.ts\n@@ -16,7 +16,7 @@\n // under the License.\n \n /* tslint:disable */\n-// Dynamically load an Ix target build based on command line arguments\n+// Dynamically load an Arrow target build based on command line arguments\n \n const path = require('path');\n const target = process.env.TEST_TARGET!;\ndiff --git a/js/test/integration/validate-tests.ts b/js/test/integration/validate-tests.ts\nindex c8778ba2b..c612d62ad 100644\n--- a/js/test/integration/validate-tests.ts\n+++ b/js/test/integration/validate-tests.ts\n@@ -37,7 +37,7 @@ const arrowBuffers: Uint8Array[] = [fs.readFileSync(arrowPath)];\n \n import Arrow from '../Arrow';\n import { zip } from 'ix/iterable/zip';\n-import { toArray } from 'ix/iterable/toArray';\n+import { toArray } from 'ix/iterable/toarray';\n \n const { Table, read } = Arrow;\n \n\n\n \n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2018-01-11T23:35:17.823+0000",
                    "updated": "2018-01-11T23:35:17.823+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13129654/comment/16323221",
                    "id": "16323221",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "Issue resolved by pull request 1471\n[https://github.com/apache/arrow/pull/1471]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2018-01-11T23:35:19.194+0000",
                    "updated": "2018-01-11T23:35:19.194+0000"
                }
            ],
            "maxResults": 4,
            "total": 4,
            "startAt": 0
        },
        "customfield_12311820": "0|i3opfz:",
        "customfield_12314139": null
    }
}