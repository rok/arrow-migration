{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13413497",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413497",
    "key": "ARROW-14804",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12350591",
                "id": "12350591",
                "description": "",
                "name": "7.0.0",
                "archived": false,
                "released": true,
                "releaseDate": "2022-02-03"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "name": "Major",
            "id": "3"
        },
        "labels": [
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [
            {
                "id": "12629050",
                "self": "https://issues.apache.org/jira/rest/api/2/issueLink/12629050",
                "type": {
                    "id": "10001",
                    "name": "dependent",
                    "inward": "is depended upon by",
                    "outward": "depends upon",
                    "self": "https://issues.apache.org/jira/rest/api/2/issueLinkType/10001"
                },
                "inwardIssue": {
                    "id": "13418682",
                    "key": "ARROW-15169",
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13418682",
                    "fields": {
                        "summary": "[Python] _import_from_c() / _export_to_c() methods should accept capsules",
                        "status": {
                            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
                            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
                            "name": "Resolved",
                            "id": "5",
                            "statusCategory": {
                                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                                "id": 3,
                                "key": "done",
                                "colorName": "green",
                                "name": "Done"
                            }
                        },
                        "priority": {
                            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
                            "name": "Major",
                            "id": "3"
                        },
                        "issuetype": {
                            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
                            "id": "4",
                            "description": "An improvement or enhancement to an existing feature or task.",
                            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
                            "name": "Improvement",
                            "subtask": false,
                            "avatarId": 21140
                        }
                    }
                }
            }
        ],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=amol-",
            "name": "amol-",
            "key": "amol-",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=amol-&avatarId=46461",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=amol-&avatarId=46461",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=amol-&avatarId=46461",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=amol-&avatarId=46461"
            },
            "displayName": "Alessandro Molina",
            "active": true,
            "timeZone": "Europe/Rome"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12333008",
                "id": "12333008",
                "name": "R"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=paleolimbot",
            "name": "paleolimbot",
            "key": "paleolimbot",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=paleolimbot&avatarId=47795",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=paleolimbot&avatarId=47795",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=paleolimbot&avatarId=47795",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=paleolimbot&avatarId=47795"
            },
            "displayName": "Dewey Dunnington",
            "active": true,
            "timeZone": "America/Halifax"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=paleolimbot",
            "name": "paleolimbot",
            "key": "paleolimbot",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=paleolimbot&avatarId=47795",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=paleolimbot&avatarId=47795",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=paleolimbot&avatarId=47795",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=paleolimbot&avatarId=47795"
            },
            "displayName": "Dewey Dunnington",
            "active": true,
            "timeZone": "America/Halifax"
        },
        "aggregateprogress": {
            "progress": 21000,
            "total": 21000,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 21000,
            "total": 21000,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-14804/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 35,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413497/worklog/693415",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "paleolimbot opened a new pull request #11919:\nURL: https://github.com/apache/arrow/pull/11919\n\n\n   This PR limits the use of external pointers whose value is casted to double. It only uses the double-casted pointer when passing a pointer to Python because this is the only way I can get this to work (perhaps there is a better way that will result from this review or that could be implemented in the future). The PR changes the implementation of the `Pointer<>` wrapper to:\r\n   \r\n   - Do the right thing and use R's externalptr type internally (and accept pointers defined in this way).\r\n   - Accept pointers defined as `void*` casted to `uintptr_t` casted to `double` (for backward compatibility)\r\n   - Accept pointers defined as `integer64` (because it's what @amol- thought to do at first and somebody else might, too)\r\n   - Accept pointers defined as `raw(<pointer size>)` (because it's a way that pointers could get passed to Python without changing reticulate)\r\n   - Accept pointers defined as a character representation (as parsed by `strtoll()`) (as suggested by @pitrou)\r\n   \r\n   I imagine that we don't have to use one or more of these, but thought it best to implement and test them all and use the review to eliminate any options that will never get used.\r\n   \r\n   Things I'm not sure about:\r\n   \r\n   - My implementations of parsing and exporting pointers (new to this!)\r\n   - The non-unwind-protected-ness of the `Pointer<>` constructor...it's written such that it's unlikely to longjmp but could possibly use `cpp11::safe[]()` to make this impossible. This doesn't seem to be used elsewhere in the Arrow R package so I didn't implement it here.\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-09T17:21:13.735+0000",
                    "updated": "2021-12-09T17:21:13.735+0000",
                    "started": "2021-12-09T17:21:13.734+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "693415",
                    "issueId": "13413497"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413497/worklog/693416",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "github-actions[bot] commented on pull request #11919:\nURL: https://github.com/apache/arrow/pull/11919#issuecomment-990057651\n\n\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-09T17:21:38.569+0000",
                    "updated": "2021-12-09T17:21:38.569+0000",
                    "started": "2021-12-09T17:21:38.568+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "693416",
                    "issueId": "13413497"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413497/worklog/693430",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on pull request #11919:\nURL: https://github.com/apache/arrow/pull/11919#issuecomment-990070903\n\n\n   > It only uses the double-casted pointer when passing a pointer to Python because this is the only way I can get this to work (perhaps there is a better way that will result from this review or that could be implemented in the future).\r\n   \r\n   I think we can do that in a future PR indeed.\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-09T17:38:10.340+0000",
                    "updated": "2021-12-09T17:38:10.340+0000",
                    "started": "2021-12-09T17:38:10.339+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "693430",
                    "issueId": "13413497"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413497/worklog/693433",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou edited a comment on pull request #11919:\nURL: https://github.com/apache/arrow/pull/11919#issuecomment-990070903\n\n\n   > It only uses the double-casted pointer when passing a pointer to Python because this is the only way I can get this to work (perhaps there is a better way that will result from this review or that could be implemented in the future).\r\n   \r\n   I think we can do that in a future PR indeed: we should be able to accept the Python \"capsule object\" that's produced by `r_to_py`.\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-09T17:39:28.772+0000",
                    "updated": "2021-12-09T17:39:28.772+0000",
                    "started": "2021-12-09T17:39:28.772+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "693433",
                    "issueId": "13413497"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413497/worklog/693434",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on a change in pull request #11919:\nURL: https://github.com/apache/arrow/pull/11919#discussion_r766015524\n\n\n\n##########\nFile path: r/src/arrowExports.cpp\n##########\n@@ -5,55 +5,55 @@\n #include \"./arrow_types.h\"\n \n // altrep.cpp\n-#if defined(ARROW_R_WITH_ARROW)\n-void test_SET_STRING_ELT(SEXP s);\n+  #if defined(ARROW_R_WITH_ARROW)\n+  void test_SET_STRING_ELT(SEXP s);\n\nReview comment:\n       Why are there so many changes in this file? Did your editor apply automatic changes? If so, it would be nice to disable them.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-09T17:40:36.161+0000",
                    "updated": "2021-12-09T17:40:36.161+0000",
                    "started": "2021-12-09T17:40:36.161+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "693434",
                    "issueId": "13413497"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413497/worklog/693436",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on a change in pull request #11919:\nURL: https://github.com/apache/arrow/pull/11919#discussion_r766017291\n\n\n\n##########\nFile path: r/src/arrow_cpp11.h\n##########\n@@ -57,13 +57,45 @@ namespace r {\n template <typename T>\n struct Pointer {\n   Pointer() : ptr_(new T()) {}\n-  explicit Pointer(SEXP x)\n-      : ptr_(reinterpret_cast<T*>(static_cast<uintptr_t>(REAL(x)[0]))) {}\n+  explicit Pointer(SEXP x) {\n+    if (TYPEOF(x) == EXTPTRSXP) {\n+      ptr_ = (T*)R_ExternalPtrAddr(x);\n+    } else if (TYPEOF(x) == STRSXP && Rf_length(x) == 1) {\n+      // User passed an character representation of the pointer address\n+      SEXP char0 = STRING_ELT(x, 0);\n+      if (char0 == NA_STRING) {\n+        cpp11::stop(\"Can't convert NA_character_ to pointer\");\n+      }\n+\n+      const char* input_chars = CHAR(char0);\n+      char* endptr;\n+      uint64_t ptr_value = strtoll(input_chars, &endptr, 0);\n\nReview comment:\n       Perhaps use `strotoull`, since you're converting to unsigned?\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-09T17:42:53.533+0000",
                    "updated": "2021-12-09T17:42:53.533+0000",
                    "started": "2021-12-09T17:42:53.533+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "693436",
                    "issueId": "13413497"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413497/worklog/693437",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on a change in pull request #11919:\nURL: https://github.com/apache/arrow/pull/11919#discussion_r766018570\n\n\n\n##########\nFile path: r/src/py-to-r.cpp\n##########\n@@ -21,6 +21,41 @@\n \n #include <arrow/c/bridge.h>\n \n+// [[arrow::export]]\n+double external_pointer_addr_double(SEXP external_pointer) {\n+  // potentially lossy conversion to double needed for the current\n+  // implementation of import/export to Python\n+  return reinterpret_cast<uintptr_t>(R_ExternalPtrAddr(external_pointer));\n+}\n+\n+// [[arrow::export]]\n+std::string external_pointer_addr_character(SEXP external_pointer) {\n+  void* ptr_void = R_ExternalPtrAddr(external_pointer);\n+  uint64_t ptr_int64 = reinterpret_cast<uintptr_t>(ptr_void);\n+  char ptr_chars[128];\n+  memset(ptr_chars, 0, 128);\n+  int nchar = sprintf(ptr_chars, \"%llu\", ptr_int64);\n\nReview comment:\n       You can use `std::to_string`: https://en.cppreference.com/w/cpp/string/basic_string/to_string\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-09T17:44:28.700+0000",
                    "updated": "2021-12-09T17:44:28.700+0000",
                    "started": "2021-12-09T17:44:28.700+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "693437",
                    "issueId": "13413497"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413497/worklog/693439",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on a change in pull request #11919:\nURL: https://github.com/apache/arrow/pull/11919#discussion_r766019940\n\n\n\n##########\nFile path: r/tests/testthat/test-python.R\n##########\n@@ -143,3 +143,70 @@ test_that(\"RecordBatchReader from python\", {\n   expect_r6_class(rt_table, \"Table\")\n   expect_identical(as.data.frame(rt_table), example_data)\n })\n+\n+test_that(\"Pointer wrapper accepts external pointers\", {\n+  ptr <- allocate_arrow_schema()\n+  exportable <- int32()\n+  exportable$export_to_c(ptr)\n+\n+  # make sure exportable is released and deleted\n+  expect_equal(DataType$import_from_c(ptr), int32())\n+  delete_arrow_schema(ptr)\n+})\n+\n+test_that(\"Pointer wrapper accepts double-casted pointers\", {\n+  ptr <- allocate_arrow_schema()\n+  exportable <- int32()\n+  exportable$export_to_c(external_pointer_addr_double(ptr))\n+\n+  # make sure exportable is released and deleted\n+  expect_equal(DataType$import_from_c(ptr), int32())\n\nReview comment:\n       Should `import_from_c` also take `external_pointer_addr_double(ptr)`?\r\n   (same question below)\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-09T17:46:24.426+0000",
                    "updated": "2021-12-09T17:46:24.426+0000",
                    "started": "2021-12-09T17:46:24.426+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "693439",
                    "issueId": "13413497"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413497/worklog/693462",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "paleolimbot commented on a change in pull request #11919:\nURL: https://github.com/apache/arrow/pull/11919#discussion_r766050050\n\n\n\n##########\nFile path: r/src/arrowExports.cpp\n##########\n@@ -5,55 +5,55 @@\n #include \"./arrow_types.h\"\n \n // altrep.cpp\n-#if defined(ARROW_R_WITH_ARROW)\n-void test_SET_STRING_ELT(SEXP s);\n+  #if defined(ARROW_R_WITH_ARROW)\n+  void test_SET_STRING_ELT(SEXP s);\n\nReview comment:\n       I'll look into this...I think a cpp11 update caused this change (the file is auto-generated) but I'll see if I can minimize the diff for this PR.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-09T18:29:11.124+0000",
                    "updated": "2021-12-09T18:29:11.124+0000",
                    "started": "2021-12-09T18:29:11.124+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "693462",
                    "issueId": "13413497"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413497/worklog/693473",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "paleolimbot commented on a change in pull request #11919:\nURL: https://github.com/apache/arrow/pull/11919#discussion_r766058487\n\n\n\n##########\nFile path: r/tests/testthat/test-python.R\n##########\n@@ -143,3 +143,70 @@ test_that(\"RecordBatchReader from python\", {\n   expect_r6_class(rt_table, \"Table\")\n   expect_identical(as.data.frame(rt_table), example_data)\n })\n+\n+test_that(\"Pointer wrapper accepts external pointers\", {\n+  ptr <- allocate_arrow_schema()\n+  exportable <- int32()\n+  exportable$export_to_c(ptr)\n+\n+  # make sure exportable is released and deleted\n+  expect_equal(DataType$import_from_c(ptr), int32())\n+  delete_arrow_schema(ptr)\n+})\n+\n+test_that(\"Pointer wrapper accepts double-casted pointers\", {\n+  ptr <- allocate_arrow_schema()\n+  exportable <- int32()\n+  exportable$export_to_c(external_pointer_addr_double(ptr))\n+\n+  # make sure exportable is released and deleted\n+  expect_equal(DataType$import_from_c(ptr), int32())\n\nReview comment:\n       They do! It's the `Pointer<>` wrapper that's automatically invoked for all import/export methods (but I added the test for the import method for DataType also because it was easy). I could also test more than just `DataType`'s import/export but it's just a proxy for the `Pointer<>` here.\n\n##########\nFile path: r/src/arrow_cpp11.h\n##########\n@@ -57,13 +57,45 @@ namespace r {\n template <typename T>\n struct Pointer {\n   Pointer() : ptr_(new T()) {}\n-  explicit Pointer(SEXP x)\n-      : ptr_(reinterpret_cast<T*>(static_cast<uintptr_t>(REAL(x)[0]))) {}\n+  explicit Pointer(SEXP x) {\n+    if (TYPEOF(x) == EXTPTRSXP) {\n+      ptr_ = (T*)R_ExternalPtrAddr(x);\n+    } else if (TYPEOF(x) == STRSXP && Rf_length(x) == 1) {\n+      // User passed an character representation of the pointer address\n+      SEXP char0 = STRING_ELT(x, 0);\n+      if (char0 == NA_STRING) {\n+        cpp11::stop(\"Can't convert NA_character_ to pointer\");\n+      }\n+\n+      const char* input_chars = CHAR(char0);\n+      char* endptr;\n+      uint64_t ptr_value = strtoll(input_chars, &endptr, 0);\n\nReview comment:\n       Done!\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-09T18:41:22.813+0000",
                    "updated": "2021-12-09T18:41:22.813+0000",
                    "started": "2021-12-09T18:41:22.812+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "693473",
                    "issueId": "13413497"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413497/worklog/693516",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nealrichardson commented on a change in pull request #11919:\nURL: https://github.com/apache/arrow/pull/11919#discussion_r766100486\n\n\n\n##########\nFile path: r/src/arrowExports.cpp\n##########\n@@ -5,55 +5,55 @@\n #include \"./arrow_types.h\"\n \n // altrep.cpp\n-#if defined(ARROW_R_WITH_ARROW)\n-void test_SET_STRING_ELT(SEXP s);\n+  #if defined(ARROW_R_WITH_ARROW)\n+  void test_SET_STRING_ELT(SEXP s);\n\nReview comment:\n       This file is all generated by https://github.com/apache/arrow/blob/master/r/data-raw/codegen.R, not cpp11. Neither have changed recently (cpp11 is vendored currently)\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-09T19:43:22.485+0000",
                    "updated": "2021-12-09T19:43:22.485+0000",
                    "started": "2021-12-09T19:43:22.485+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "693516",
                    "issueId": "13413497"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413497/worklog/693518",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nealrichardson commented on a change in pull request #11919:\nURL: https://github.com/apache/arrow/pull/11919#discussion_r766100971\n\n\n\n##########\nFile path: r/src/arrowExports.cpp\n##########\n@@ -5,55 +5,55 @@\n #include \"./arrow_types.h\"\n \n // altrep.cpp\n-#if defined(ARROW_R_WITH_ARROW)\n-void test_SET_STRING_ELT(SEXP s);\n+  #if defined(ARROW_R_WITH_ARROW)\n+  void test_SET_STRING_ELT(SEXP s);\n\nReview comment:\n       Maybe `glue` changed how it deals with leading whitespace? https://github.com/apache/arrow/blob/master/r/data-raw/codegen.R#L126-L135\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-09T19:44:08.239+0000",
                    "updated": "2021-12-09T19:44:08.239+0000",
                    "started": "2021-12-09T19:44:08.239+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "693518",
                    "issueId": "13413497"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413497/worklog/693526",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "paleolimbot commented on a change in pull request #11919:\nURL: https://github.com/apache/arrow/pull/11919#discussion_r766111948\n\n\n\n##########\nFile path: r/src/arrowExports.cpp\n##########\n@@ -5,55 +5,55 @@\n #include \"./arrow_types.h\"\n \n // altrep.cpp\n-#if defined(ARROW_R_WITH_ARROW)\n-void test_SET_STRING_ELT(SEXP s);\n+  #if defined(ARROW_R_WITH_ARROW)\n+  void test_SET_STRING_ELT(SEXP s);\n\nReview comment:\n       Thank you for tracking this down and sorry for the indirection...I re-rendered with glue 1.5.0 and opened a JIRA about it (ARROW-15049).\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-09T19:59:54.153+0000",
                    "updated": "2021-12-09T19:59:54.153+0000",
                    "started": "2021-12-09T19:59:54.153+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "693526",
                    "issueId": "13413497"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413497/worklog/693547",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jonkeane commented on a change in pull request #11919:\nURL: https://github.com/apache/arrow/pull/11919#discussion_r766141468\n\n\n\n##########\nFile path: r/tests/testthat/test-python.R\n##########\n@@ -143,3 +143,70 @@ test_that(\"RecordBatchReader from python\", {\n   expect_r6_class(rt_table, \"Table\")\n   expect_identical(as.data.frame(rt_table), example_data)\n })\n+\n+test_that(\"Pointer wrapper accepts external pointers\", {\n\nReview comment:\n       It's totally fine to keep these here, they certainly are mostly tested with Python, but I wonder if these should go in a file dedicated to c-stream interactions (especially now that we have DuckDB using some of the same infrastructure  \n\n##########\nFile path: r/src/arrow_cpp11.h\n##########\n@@ -57,13 +57,45 @@ namespace r {\n template <typename T>\n struct Pointer {\n   Pointer() : ptr_(new T()) {}\n-  explicit Pointer(SEXP x)\n-      : ptr_(reinterpret_cast<T*>(static_cast<uintptr_t>(REAL(x)[0]))) {}\n+  explicit Pointer(SEXP x) {\n+    if (TYPEOF(x) == EXTPTRSXP) {\n+      ptr_ = (T*)R_ExternalPtrAddr(x);\n+    } else if (TYPEOF(x) == STRSXP && Rf_length(x) == 1) {\n+      // User passed an character representation of the pointer address\n\nReview comment:\n       Super minor\r\n   \r\n   ```suggestion\r\n         // User passed a character representation of the pointer address\r\n   ```\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-09T20:47:16.262+0000",
                    "updated": "2021-12-09T20:47:16.262+0000",
                    "started": "2021-12-09T20:47:16.261+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "693547",
                    "issueId": "13413497"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413497/worklog/693550",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "paleolimbot commented on a change in pull request #11919:\nURL: https://github.com/apache/arrow/pull/11919#discussion_r766146825\n\n\n\n##########\nFile path: r/tests/testthat/test-python.R\n##########\n@@ -143,3 +143,70 @@ test_that(\"RecordBatchReader from python\", {\n   expect_r6_class(rt_table, \"Table\")\n   expect_identical(as.data.frame(rt_table), example_data)\n })\n+\n+test_that(\"Pointer wrapper accepts external pointers\", {\n\nReview comment:\n       I agree! Should I do that (and rename the corresponding .cpp file) in this PR?\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-09T20:54:47.993+0000",
                    "updated": "2021-12-09T20:54:47.993+0000",
                    "started": "2021-12-09T20:54:47.993+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "693550",
                    "issueId": "13413497"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413497/worklog/693819",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "romainfrancois commented on a change in pull request #11919:\nURL: https://github.com/apache/arrow/pull/11919#discussion_r766524355\n\n\n\n##########\nFile path: r/src/py-to-r.cpp\n##########\n@@ -21,6 +21,38 @@\n \n #include <arrow/c/bridge.h>\n \n+// [[arrow::export]]\n+double external_pointer_addr_double(SEXP external_pointer) {\n+  // potentially lossy conversion to double needed for the current\n+  // implementation of import/export to Python\n+  return reinterpret_cast<uintptr_t>(R_ExternalPtrAddr(external_pointer));\n\nReview comment:\n       Can this be something like ?\r\n   \r\n   ```c\r\n   double out;\r\n   void* ptr = R_ExternalPtrAddr(external_pointer);\r\n   memcpy(&out, R_ExternalPtrAddr(external_pointer), sizeof(double));\r\n   return out;\r\n   ```\n\n##########\nFile path: r/src/py-to-r.cpp\n##########\n@@ -21,6 +21,38 @@\n \n #include <arrow/c/bridge.h>\n \n+// [[arrow::export]]\n+double external_pointer_addr_double(SEXP external_pointer) {\n+  // potentially lossy conversion to double needed for the current\n+  // implementation of import/export to Python\n+  return reinterpret_cast<uintptr_t>(R_ExternalPtrAddr(external_pointer));\n\nReview comment:\n       It seems to be what is done in `external_pointer_addr_integer64()` below. Maybe if this returned a `cpp11::doubles` ?\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-10T09:51:37.355+0000",
                    "updated": "2021-12-10T09:51:37.355+0000",
                    "started": "2021-12-10T09:51:37.354+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "693819",
                    "issueId": "13413497"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413497/worklog/693939",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "paleolimbot commented on a change in pull request #11919:\nURL: https://github.com/apache/arrow/pull/11919#discussion_r766656781\n\n\n\n##########\nFile path: r/src/py-to-r.cpp\n##########\n@@ -21,6 +21,38 @@\n \n #include <arrow/c/bridge.h>\n \n+// [[arrow::export]]\n+double external_pointer_addr_double(SEXP external_pointer) {\n+  // potentially lossy conversion to double needed for the current\n+  // implementation of import/export to Python\n+  return reinterpret_cast<uintptr_t>(R_ExternalPtrAddr(external_pointer));\n\nReview comment:\n       I think this one needs to stay like this because it's the exact code that was previously used to convert a `Pointer<>` to `SEXP` (and is what the Python library relies on to recreate the pointer).\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-10T12:56:45.390+0000",
                    "updated": "2021-12-10T12:56:45.390+0000",
                    "started": "2021-12-10T12:56:45.390+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "693939",
                    "issueId": "13413497"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413497/worklog/694012",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "romainfrancois commented on a change in pull request #11919:\nURL: https://github.com/apache/arrow/pull/11919#discussion_r766734547\n\n\n\n##########\nFile path: r/src/py-to-r.cpp\n##########\n@@ -21,6 +21,38 @@\n \n #include <arrow/c/bridge.h>\n \n+// [[arrow::export]]\n+double external_pointer_addr_double(SEXP external_pointer) {\n+  // potentially lossy conversion to double needed for the current\n+  // implementation of import/export to Python\n+  return reinterpret_cast<uintptr_t>(R_ExternalPtrAddr(external_pointer));\n\nReview comment:\n       I see. It sort of feels wrong though. \n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-10T14:45:51.299+0000",
                    "updated": "2021-12-10T14:45:51.299+0000",
                    "started": "2021-12-10T14:45:51.299+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "694012",
                    "issueId": "13413497"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413497/worklog/694057",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "paleolimbot commented on a change in pull request #11919:\nURL: https://github.com/apache/arrow/pull/11919#discussion_r766791379\n\n\n\n##########\nFile path: r/src/py-to-r.cpp\n##########\n@@ -21,6 +21,38 @@\n \n #include <arrow/c/bridge.h>\n \n+// [[arrow::export]]\n+double external_pointer_addr_double(SEXP external_pointer) {\n+  // potentially lossy conversion to double needed for the current\n+  // implementation of import/export to Python\n+  return reinterpret_cast<uintptr_t>(R_ExternalPtrAddr(external_pointer));\n\nReview comment:\n       For sure! The motivation of this PR is to provide all the machinery on the R side that we need to avoid doing it (with a PR on the Python side to follow).\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-10T15:56:22.759+0000",
                    "updated": "2021-12-10T15:56:22.759+0000",
                    "started": "2021-12-10T15:56:22.759+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "694057",
                    "issueId": "13413497"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413497/worklog/695125",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jonkeane commented on a change in pull request #11919:\nURL: https://github.com/apache/arrow/pull/11919#discussion_r767831587\n\n\n\n##########\nFile path: r/tests/testthat/test-python.R\n##########\n@@ -143,3 +143,70 @@ test_that(\"RecordBatchReader from python\", {\n   expect_r6_class(rt_table, \"Table\")\n   expect_identical(as.data.frame(rt_table), example_data)\n })\n+\n+test_that(\"Pointer wrapper accepts external pointers\", {\n\nReview comment:\n       If it's not too much trouble, go for it\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-12-13T14:55:11.641+0000",
                    "updated": "2021-12-13T14:55:11.641+0000",
                    "started": "2021-12-13T14:55:11.641+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "695125",
                    "issueId": "13413497"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
            "id": "4",
            "description": "An improvement or enhancement to an existing feature or task.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
            "name": "Improvement",
            "subtask": false,
            "avatarId": 21140
        },
        "timespent": 21000,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@27957e6d[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@175879e0[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@3be35c43[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@6fa0b5a6[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@63747533[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@1dd5d4f6[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@3cf5824b[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@56121df6[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@168f27ea[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@25ce33a9[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@35390a81[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@73025c7d[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 21000,
        "customfield_12312520": null,
        "customfield_12312521": "Mon Dec 20 17:41:41 UTC 2021",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2021-12-20T17:41:41.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-14804/watchers",
            "watchCount": 3,
            "isWatching": false
        },
        "created": "2021-11-24T00:34:55.000+0000",
        "updated": "2021-12-20T23:31:22.000+0000",
        "timeoriginalestimate": null,
        "description": "The import and export to C methods for Field, Shema, DataType, Array, RecordBatch, and RecordBatchReader all require the pointer to be passed as a {{double}} (casted from {{uintptr_t}} casted from {{*}}. I imagine there's good reason for this path to exist; however, the R externalptr type and 64-bit integer are more natural types and I think it would not be hard to allow pointers to be passed in this way. A [short discussion|https://github.com/apache/arrow/pull/11679#discussion_r755178800] of this occurred when updating the Python docs on how to pass Array pointers to R.\r\n\r\nThe implementation lives in [arrow_cpp11.h|https://github.com/apache/arrow/blob/eb2fa2df6dedf2743047df9dd19d7ed4f4482c22/r/src/arrow_cpp11.h#L49-L54] and it seems like it would be easy to allow a user to pass something more R-like while still keeping the double route open for the packages that need it.\r\n\r\nI see that this is getting used for pointers that R6 objects are storing for the underlying C++ objects...I imagine there's a good reason for this but I wonder if there's a way to make the places where this interacts with other packages more intuitive.",
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "5h 50m",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 21000
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[R] import_from_c() / export_to_c() methods should accept external pointers",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413497/comment/17448452",
                    "id": "17448452",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "body": "Not only dedicated pointer types may be \"more natural\", but {{double}} is actually _insufficient_. A double precision floating-point number has 53 bits of mantissa, which is not enough to represent every possible 64-bit pointer. \r\n\r\nI suppose pointer values are often clustered around 0, which makes them exactly representable as a {{double}}, but that's just luck and there's no guarantee that pointers will always be like that.",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "created": "2021-11-24T08:43:22.391+0000",
                    "updated": "2021-11-24T08:43:22.391+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413497/comment/17462748",
                    "id": "17462748",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=jonkeane",
                        "name": "jonkeane",
                        "key": "jonkeane",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34057",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34057",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34057",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34057"
                        },
                        "displayName": "Jonathan Keane",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "Issue resolved by pull request 11919\n[https://github.com/apache/arrow/pull/11919]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=jonkeane",
                        "name": "jonkeane",
                        "key": "jonkeane",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34057",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34057",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34057",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34057"
                        },
                        "displayName": "Jonathan Keane",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2021-12-20T17:41:41.847+0000",
                    "updated": "2021-12-20T17:41:41.847+0000"
                }
            ],
            "maxResults": 2,
            "total": 2,
            "startAt": 0
        },
        "customfield_12311820": "0|z0x12w:",
        "customfield_12314139": null
    }
}