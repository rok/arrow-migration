{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13204559",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13204559",
    "key": "ARROW-4031",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12343937",
                "id": "12343937",
                "description": "",
                "name": "0.13.0",
                "archived": false,
                "released": true,
                "releaseDate": "2019-04-01"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/4",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
            "name": "Minor",
            "id": "4"
        },
        "labels": [
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=bkietz",
            "name": "bkietz",
            "key": "bkietz",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=bkietz&avatarId=37277",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bkietz&avatarId=37277",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bkietz&avatarId=37277",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bkietz&avatarId=37277"
            },
            "displayName": "Ben Kietzman",
            "active": true,
            "timeZone": "America/New_York"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12328935",
                "id": "12328935",
                "name": "C++"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=bkietz",
            "name": "bkietz",
            "key": "bkietz",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=bkietz&avatarId=37277",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bkietz&avatarId=37277",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bkietz&avatarId=37277",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bkietz&avatarId=37277"
            },
            "displayName": "Ben Kietzman",
            "active": true,
            "timeZone": "America/New_York"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=bkietz",
            "name": "bkietz",
            "key": "bkietz",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=bkietz&avatarId=37277",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bkietz&avatarId=37277",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bkietz&avatarId=37277",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bkietz&avatarId=37277"
            },
            "displayName": "Ben Kietzman",
            "active": true,
            "timeZone": "America/New_York"
        },
        "aggregateprogress": {
            "progress": 12600,
            "total": 12600,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 12600,
            "total": 12600,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-4031/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 22,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13204559/worklog/182335",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on pull request #3336: ARROW-4031: [C++] Refactor bitmap building\nURL: https://github.com/apache/arrow/pull/3336#discussion_r245958461\n \n \n\n ##########\n File path: cpp/src/arrow/buffer.h\n ##########\n @@ -28,6 +28,7 @@\n \n #include \"arrow/memory_pool.h\"\n #include \"arrow/status.h\"\n+#include \"arrow/util/bit-util.h\"\n \n Review comment:\n   I'm curious why this needs to be added here?\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-01-08T11:38:50.148+0000",
                    "updated": "2019-01-08T11:38:50.148+0000",
                    "started": "2019-01-08T11:38:50.148+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "182335",
                    "issueId": "13204559"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13204559/worklog/182336",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on pull request #3336: ARROW-4031: [C++] Refactor bitmap building\nURL: https://github.com/apache/arrow/pull/3336#discussion_r245958778\n \n \n\n ##########\n File path: cpp/src/arrow/util/bit-util.h\n ##########\n @@ -329,6 +327,30 @@ static inline void SetBitTo(uint8_t* bits, int64_t i, bool bit_is_set) {\n                  kBitmask[i % 8];\n }\n \n+static inline void SetBitsTo(uint8_t* bits, int64_t i_begin, int64_t i_end,\n \n Review comment:\n   Add a docstring?\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-01-08T11:38:50.177+0000",
                    "updated": "2019-01-08T11:38:50.177+0000",
                    "started": "2019-01-08T11:38:50.176+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "182336",
                    "issueId": "13204559"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13204559/worklog/182337",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on pull request #3336: ARROW-4031: [C++] Refactor bitmap building\nURL: https://github.com/apache/arrow/pull/3336#discussion_r245963683\n \n \n\n ##########\n File path: cpp/src/arrow/buffer-builder.h\n ##########\n @@ -74,59 +74,63 @@ class ARROW_EXPORT BufferBuilder {\n   /// \\brief Ensure that builder can accommodate the additional number of bytes\n   /// without the need to perform allocations\n   ///\n-  /// \\param size number of additional bytes to make space for\n+  /// \\param additional_bytes number of additional bytes to make space for\n   /// \\return Status\n-  Status Reserve(const int64_t size) { return Resize(size_ + size, false); }\n+  Status Reserve(const int64_t additional_bytes) {\n+    return Resize(size_ + additional_bytes, false);\n+  }\n+\n+  /// \\brief Return a capacity expanded by a growth factor of 2\n+  static int64_t GrowByFactor(const int64_t min_capacity) {\n+    // If the capacity was not already a multiple of 2, do so here\n+    // TODO(emkornfield) doubling isn't great default allocation practice\n+    // see https://github.com/facebook/folly/blob/master/folly/docs/FBVector.md\n+    // for discussion\n+    return BitUtil::NextPower2(min_capacity);\n+  }\n \n   /// \\brief Append the given data to the buffer\n   ///\n   /// The buffer is automatically expanded if necessary.\n-  Status Append(const void* data, int64_t length) {\n-    if (capacity_ < length + size_) {\n-      int64_t new_capacity = BitUtil::NextPower2(length + size_);\n-      ARROW_RETURN_NOT_OK(Resize(new_capacity));\n-    }\n+  Status Append(const void* data, const int64_t length) {\n+    ARROW_RETURN_NOT_OK(Resize(GrowByFactor(length + size_), false));\n     UnsafeAppend(data, length);\n     return Status::OK();\n   }\n \n+  /// \\brief Append copies of a value to the buffer\n+  ///\n+  /// The buffer is automatically expanded if necessary.\n+  Status Append(const int64_t num_copies, uint8_t value) {\n+    ARROW_RETURN_NOT_OK(Resize(GrowByFactor(num_copies + size_), false));\n \n Review comment:\n   In `Resize`, `buffer_->Resize` is a virtual method that will be called everytime even if no resizing is necessary.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-01-08T11:38:50.179+0000",
                    "updated": "2019-01-08T11:38:50.179+0000",
                    "started": "2019-01-08T11:38:50.179+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "182337",
                    "issueId": "13204559"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13204559/worklog/182338",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on pull request #3336: ARROW-4031: [C++] Refactor bitmap building\nURL: https://github.com/apache/arrow/pull/3336#discussion_r245964132\n \n \n\n ##########\n File path: cpp/src/arrow/buffer-builder.h\n ##########\n @@ -45,23 +45,23 @@ class ARROW_EXPORT BufferBuilder {\n \n   /// \\brief Resize the buffer to the nearest multiple of 64 bytes\n   ///\n-  /// \\param elements the new capacity of the of the builder. Will be rounded\n+  /// \\param new_capacity the new capacity of the of the builder. Will be rounded\n   /// up to a multiple of 64 bytes for padding\n   /// \\param shrink_to_fit if new capacity is smaller than the existing size,\n   /// reallocate internal buffer. Set to false to avoid reallocations when\n   /// shrinking the builder.\n   /// \\return Status\n-  Status Resize(const int64_t elements, bool shrink_to_fit = true) {\n+  Status Resize(const int64_t new_capacity, bool shrink_to_fit = true) {\n     // Resize(0) is a no-op\n-    if (elements == 0) {\n+    if (new_capacity == 0) {\n       return Status::OK();\n     }\n     int64_t old_capacity = capacity_;\n \n     if (buffer_ == NULLPTR) {\n-      ARROW_RETURN_NOT_OK(AllocateResizableBuffer(pool_, elements, &buffer_));\n+      ARROW_RETURN_NOT_OK(AllocateResizableBuffer(pool_, new_capacity, &buffer_));\n     } else {\n-      ARROW_RETURN_NOT_OK(buffer_->Resize(elements, shrink_to_fit));\n+      ARROW_RETURN_NOT_OK(buffer_->Resize(new_capacity, shrink_to_fit));\n     }\n     capacity_ = buffer_->capacity();\n     data_ = buffer_->mutable_data();\n \n Review comment:\n   It would be good to evaluate whether we really need the `memset` below, since it sounds like it can be wasteful for large upsizes. Ideally, only the padding area needs to be zeroed (see `ResizePoolBuffer` in `buffer.cc`).\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-01-08T11:38:50.394+0000",
                    "updated": "2019-01-08T11:38:50.394+0000",
                    "started": "2019-01-08T11:38:50.393+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "182338",
                    "issueId": "13204559"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13204559/worklog/182339",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on pull request #3336: ARROW-4031: [C++] Refactor bitmap building\nURL: https://github.com/apache/arrow/pull/3336#discussion_r245961184\n \n \n\n ##########\n File path: cpp/src/arrow/util/bit-util.h\n ##########\n @@ -329,6 +327,30 @@ static inline void SetBitTo(uint8_t* bits, int64_t i, bool bit_is_set) {\n                  kBitmask[i % 8];\n }\n \n+static inline void SetBitsTo(uint8_t* bits, int64_t i_begin, int64_t i_end,\n+                             bool bits_are_set) {\n+  if (i_begin == i_end) return;\n+\n+  auto bytes_begin = i_begin / 8;\n+  auto bytes_end = CeilDiv(i_end, 8);\n+\n+  auto first_byte = bits[bytes_begin];\n+  auto last_byte = bits[bytes_end - 1];\n+\n+  std::memset(bits + bytes_begin, bits_are_set ? 0xFF : 0x00,\n+              static_cast<size_t>(bytes_end - bytes_begin));\n+\n+  auto first_byte_mask = kPrecedingBitmask[i_begin % 8];\n \n Review comment:\n   Ideally I think we would like to treat the first byte independently before the `memset`, in case the specified length is larger than the CPU cache.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-01-08T11:38:50.556+0000",
                    "updated": "2019-01-08T11:38:50.556+0000",
                    "started": "2019-01-08T11:38:50.556+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "182339",
                    "issueId": "13204559"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13204559/worklog/182340",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on pull request #3336: ARROW-4031: [C++] Refactor bitmap building\nURL: https://github.com/apache/arrow/pull/3336#discussion_r245957884\n \n \n\n ##########\n File path: cpp/src/arrow/buffer-builder.h\n ##########\n @@ -153,51 +157,187 @@ class ARROW_EXPORT BufferBuilder {\n   int64_t capacity() const { return capacity_; }\n   int64_t length() const { return size_; }\n   const uint8_t* data() const { return data_; }\n+  uint8_t* mutable_data() { return data_; }\n \n- protected:\n+ private:\n   std::shared_ptr<ResizableBuffer> buffer_;\n   MemoryPool* pool_;\n   uint8_t* data_;\n   int64_t capacity_;\n   int64_t size_;\n };\n \n-/// \\brief A BufferBuilder subclass with convenience methods to append typed data\n+template <typename T, typename Enable = void>\n+class TypedBufferBuilder;\n+\n+/// \\brief A BufferBuilder for building a buffer of arithmetic elements\n template <typename T>\n-class ARROW_EXPORT TypedBufferBuilder : public BufferBuilder {\n+class TypedBufferBuilder<T, typename std::enable_if<std::is_arithmetic<T>::value>::type> {\n  public:\n-  explicit TypedBufferBuilder(MemoryPool* pool) : BufferBuilder(pool) {}\n+  explicit TypedBufferBuilder(MemoryPool* pool ARROW_MEMORY_POOL_DEFAULT)\n+      : bytes_builder_(pool) {}\n \n-  Status Append(T arithmetic_value) {\n-    static_assert(std::is_arithmetic<T>::value,\n-                  \"Convenience buffer append only supports arithmetic types\");\n-    return BufferBuilder::Append(reinterpret_cast<uint8_t*>(&arithmetic_value),\n-                                 sizeof(T));\n+  Status Append(T value) {\n+    return bytes_builder_.Append(reinterpret_cast<uint8_t*>(&value), sizeof(T));\n   }\n \n-  Status Append(const T* arithmetic_values, int64_t num_elements) {\n-    static_assert(std::is_arithmetic<T>::value,\n-                  \"Convenience buffer append only supports arithmetic types\");\n-    return BufferBuilder::Append(reinterpret_cast<const uint8_t*>(arithmetic_values),\n+  Status Append(const T* values, int64_t num_elements) {\n+    return bytes_builder_.Append(reinterpret_cast<const uint8_t*>(values),\n                                  num_elements * sizeof(T));\n   }\n \n-  void UnsafeAppend(T arithmetic_value) {\n-    static_assert(std::is_arithmetic<T>::value,\n-                  \"Convenience buffer append only supports arithmetic types\");\n-    BufferBuilder::UnsafeAppend(reinterpret_cast<uint8_t*>(&arithmetic_value), sizeof(T));\n+  void Append(const int64_t num_copies, T value) {\n+    ARROW_RETURN_NOT_OK(Resize(GrowByFactor(num_copies + size_), false));\n+    UnsafeAppend(num_copies, value);\n+    return Status::OK();\n   }\n \n-  void UnsafeAppend(const T* arithmetic_values, int64_t num_elements) {\n-    static_assert(std::is_arithmetic<T>::value,\n-                  \"Convenience buffer append only supports arithmetic types\");\n-    BufferBuilder::UnsafeAppend(reinterpret_cast<const uint8_t*>(arithmetic_values),\n+  void UnsafeAppend(T value) {\n+    bytes_builder_.UnsafeAppend(reinterpret_cast<uint8_t*>(&value), sizeof(T));\n+  }\n+\n+  void UnsafeAppend(const T* values, int64_t num_elements) {\n+    bytes_builder_.UnsafeAppend(reinterpret_cast<const uint8_t*>(values),\n                                 num_elements * sizeof(T));\n   }\n \n-  const T* data() const { return reinterpret_cast<const T*>(data_); }\n-  int64_t length() const { return size_ / sizeof(T); }\n-  int64_t capacity() const { return capacity_ / sizeof(T); }\n+  void UnsafeAppend(const int64_t num_copies, T value) {\n+    auto data = mutable_data() + length();\n+    bytes_builder_.UnsafeAppend(num_copies * sizeof(T), 0);\n+    for (const auto end = data + num_copies; data != end; ++data) {\n+      *data = value;\n+    }\n+  }\n+\n+  Status Resize(const int64_t new_capacity, bool shrink_to_fit = true) {\n+    return bytes_builder_.Resize(new_capacity * sizeof(T), shrink_to_fit);\n+  }\n+\n+  Status Reserve(const int64_t additional_elements) {\n+    return bytes_builder_.Reserve(additional_elements * sizeof(T));\n+  }\n+\n+  Status Advance(const int64_t length) {\n+    return bytes_builder_.Advance(length * sizeof(T));\n+  }\n+\n+  Status Finish(std::shared_ptr<Buffer>* out, bool shrink_to_fit = true) {\n+    return bytes_builder_.Finish(out, shrink_to_fit);\n+  }\n+\n+  void Reset() { bytes_builder_.Reset(); }\n+\n+  int64_t length() const { return bytes_builder_.length() / sizeof(T); }\n+  int64_t capacity() const { return bytes_builder_.capacity() / sizeof(T); }\n+  const T* data() const { return reinterpret_cast<const T*>(bytes_builder_.data()); }\n+  T* mutable_data() { return reinterpret_cast<T*>(bytes_builder_.mutable_data()); }\n+\n+ private:\n+  BufferBuilder bytes_builder_;\n+};\n+\n+/// \\brief A BufferBuilder for building a buffer containing a bitmap\n+template <>\n+class TypedBufferBuilder<bool> {\n+ public:\n+  explicit TypedBufferBuilder(MemoryPool* pool ARROW_MEMORY_POOL_DEFAULT)\n+      : bytes_builder_(pool) {}\n+\n+  Status Append(bool value) {\n+    ARROW_RETURN_NOT_OK(ResizeWithGrowthFactor(bit_length_ + 1));\n+    UnsafeAppend(value);\n+    return Status::OK();\n+  }\n+\n+  Status Append(const uint8_t* valid_bytes, int64_t num_elements) {\n+    ARROW_RETURN_NOT_OK(ResizeWithGrowthFactor(bit_length_ + num_elements));\n+    UnsafeAppend(valid_bytes, num_elements);\n+    return Status::OK();\n+  }\n+\n+  Status Append(const int64_t num_copies, bool value) {\n+    ARROW_RETURN_NOT_OK(ResizeWithGrowthFactor(bit_length_ + num_copies));\n+    UnsafeAppend(num_copies, value);\n+    return Status::OK();\n+  }\n+\n+  void UnsafeAppend(bool value) {\n+    BitUtil::SetBitTo(mutable_data(), bit_length_, value);\n+    if (!value) {\n+      ++false_count_;\n+    }\n+    ++bit_length_;\n+  }\n+\n+  void UnsafeAppend(const uint8_t* bytes, int64_t num_elements) {\n+    if (num_elements == 0) return;\n+    internal::FirstTimeBitmapWriter writer(mutable_data(), bit_length_, num_elements);\n \n Review comment:\n   You could use `GenerateBitsUnrolled` for higher performance.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-01-08T11:38:50.599+0000",
                    "updated": "2019-01-08T11:38:50.599+0000",
                    "started": "2019-01-08T11:38:50.599+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "182340",
                    "issueId": "13204559"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13204559/worklog/182345",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on pull request #3336: ARROW-4031: [C++] Refactor bitmap building\nURL: https://github.com/apache/arrow/pull/3336#discussion_r245964132\n \n \n\n ##########\n File path: cpp/src/arrow/buffer-builder.h\n ##########\n @@ -45,23 +45,23 @@ class ARROW_EXPORT BufferBuilder {\n \n   /// \\brief Resize the buffer to the nearest multiple of 64 bytes\n   ///\n-  /// \\param elements the new capacity of the of the builder. Will be rounded\n+  /// \\param new_capacity the new capacity of the of the builder. Will be rounded\n   /// up to a multiple of 64 bytes for padding\n   /// \\param shrink_to_fit if new capacity is smaller than the existing size,\n   /// reallocate internal buffer. Set to false to avoid reallocations when\n   /// shrinking the builder.\n   /// \\return Status\n-  Status Resize(const int64_t elements, bool shrink_to_fit = true) {\n+  Status Resize(const int64_t new_capacity, bool shrink_to_fit = true) {\n     // Resize(0) is a no-op\n-    if (elements == 0) {\n+    if (new_capacity == 0) {\n       return Status::OK();\n     }\n     int64_t old_capacity = capacity_;\n \n     if (buffer_ == NULLPTR) {\n-      ARROW_RETURN_NOT_OK(AllocateResizableBuffer(pool_, elements, &buffer_));\n+      ARROW_RETURN_NOT_OK(AllocateResizableBuffer(pool_, new_capacity, &buffer_));\n     } else {\n-      ARROW_RETURN_NOT_OK(buffer_->Resize(elements, shrink_to_fit));\n+      ARROW_RETURN_NOT_OK(buffer_->Resize(new_capacity, shrink_to_fit));\n     }\n     capacity_ = buffer_->capacity();\n     data_ = buffer_->mutable_data();\n \n Review comment:\n   It would be good to evaluate whether we really need the `memset` below, since it sounds like it can be wasteful for large upsizes. Ideally, only the padding area needs to be zeroed (using `buffer->ZeroPadding`), and perhaps only at the end when finishing the buffer.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-01-08T11:41:33.959+0000",
                    "updated": "2019-01-08T11:41:33.959+0000",
                    "started": "2019-01-08T11:41:33.958+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "182345",
                    "issueId": "13204559"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13204559/worklog/182385",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on pull request #3336: ARROW-4031: [C++] Refactor bitmap building\nURL: https://github.com/apache/arrow/pull/3336#discussion_r245997825\n \n \n\n ##########\n File path: cpp/src/arrow/util/bit-util.h\n ##########\n @@ -329,6 +327,30 @@ static inline void SetBitTo(uint8_t* bits, int64_t i, bool bit_is_set) {\n                  kBitmask[i % 8];\n }\n \n+static inline void SetBitsTo(uint8_t* bits, int64_t i_begin, int64_t i_end,\n \n Review comment:\n   Another concern: other bit-util APIs take `start, length` arguments, taking `start, end` here makes things a bit confusing and error-prone.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-01-08T13:37:36.666+0000",
                    "updated": "2019-01-08T13:37:36.666+0000",
                    "started": "2019-01-08T13:37:36.665+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "182385",
                    "issueId": "13204559"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13204559/worklog/188441",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on issue #3336: ARROW-4031: [C++] Refactor bitmap building\nURL: https://github.com/apache/arrow/pull/3336#issuecomment-456527466\n \n \n   Let me know when this is ready for review again. Can you post the before/after builder benchmarks (using compare.py not necessary)?\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-01-22T19:18:42.185+0000",
                    "updated": "2019-01-22T19:18:42.185+0000",
                    "started": "2019-01-22T19:18:42.185+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "188441",
                    "issueId": "13204559"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13204559/worklog/188443",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "bkietz commented on issue #3336: ARROW-4031: [C++] Refactor bitmap building\nURL: https://github.com/apache/arrow/pull/3336#issuecomment-456528966\n \n \n   Will do, I just wanted to get all the tests passing\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-01-22T19:23:06.549+0000",
                    "updated": "2019-01-22T19:23:06.549+0000",
                    "started": "2019-01-22T19:23:06.549+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "188443",
                    "issueId": "13204559"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13204559/worklog/188444",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "bkietz commented on issue #3336: ARROW-4031: [C++] Refactor bitmap building\nURL: https://github.com/apache/arrow/pull/3336#issuecomment-456530164\n \n \n   Before:\r\n   ```\r\n   BM_BuildPrimitiveArrayNoNulls/repeats:2_mean                 348524 us     348531 us          1   2.37661GB/s\r\n   BM_BuildVectorNoNulls/repeats:2_mean                         519088 us     519099 us          1   986.324MB/s\r\n   BM_BuildBooleanArrayNoNulls/repeats:2_mean                   117693 us     117696 us          6   4.24825GB/s\r\n   BM_BuildAdaptiveIntNoNulls/repeats:2_mean                     12996 us      12996 us         54   4.80906GB/s\r\n   BM_BuildAdaptiveIntNoNullsScalarAppend/repeats:3_mean         28023 us      28023 us         25   2.23021GB/s\r\n   BM_BuildAdaptiveUIntNoNulls/repeats:2_mean                    25464 us      25465 us         27   4.90871GB/s\r\n   BM_BuildAdaptiveUIntNoNullsScalarAppend/repeats:2_mean        27139 us      27140 us         26   2.30283GB/s\r\n   BM_BuildFixedSizeBinaryArray/repeats:2_mean                   10992 us      10992 us         64   909.773MB/s\r\n   BM_BuildInt64DictionaryArrayRandom/repeats:2_mean               125 us        125 us       5528    610.84MB/s\r\n   BM_BuildInt64DictionaryArraySequential/repeats:2_mean           114 us        114 us       6115   666.426MB/s\r\n   BM_BuildInt64DictionaryArraySimilar/repeats:2_mean              116 us        116 us       6012   655.087MB/s\r\n   BM_BuildStringDictionaryArray/repeats:2_mean                    315 us        315 us       2221   316.973MB/s\r\n   ```\r\n   \r\n   After:\r\n   ```\r\n   BM_BuildPrimitiveArrayNoNulls/repeats:2_mean                 348707 us     348714 us          1   2.37383GB/s\r\n   BM_BuildVectorNoNulls/repeats:2_mean                         519442 us     519450 us          1   985.657MB/s\r\n   BM_BuildBooleanArrayNoNulls/repeats:2_mean                   119073 us     119075 us          6   4.19902GB/s\r\n   BM_BuildAdaptiveIntNoNulls/repeats:2_mean                     13071 us      13071 us         53   4.78135GB/s\r\n   BM_BuildAdaptiveIntNoNullsScalarAppend/repeats:3_mean         27999 us      27999 us         25   2.23213GB/s\r\n   BM_BuildAdaptiveUIntNoNulls/repeats:2_mean                    25322 us      25322 us         28   4.93639GB/s\r\n   BM_BuildAdaptiveUIntNoNullsScalarAppend/repeats:2_mean        27185 us      27185 us         26   2.29899GB/s\r\n   BM_BuildFixedSizeBinaryArray/repeats:2_mean                   11770 us      11770 us         59   849.628MB/s\r\n   BM_BuildInt64DictionaryArrayRandom/repeats:2_mean               136 us        136 us       5148   562.287MB/s\r\n   BM_BuildInt64DictionaryArraySequential/repeats:2_mean           124 us        124 us       5630   613.942MB/s\r\n   BM_BuildInt64DictionaryArraySimilar/repeats:2_mean              126 us        126 us       5548   604.773MB/s\r\n   BM_BuildStringDictionaryArray/repeats:2_mean                    321 us        321 us       2184   311.782MB/s\r\n   ```\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-01-22T19:26:24.861+0000",
                    "updated": "2019-01-22T19:26:24.861+0000",
                    "started": "2019-01-22T19:26:24.861+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "188444",
                    "issueId": "13204559"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13204559/worklog/188611",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on issue #3336: ARROW-4031: [C++] Refactor bitmap building\nURL: https://github.com/apache/arrow/pull/3336#issuecomment-456645442\n \n \n   Would you mind avoiding `git merge` in PRs? It makes it hard/impossible for maintainers to rebase (our preferred method of updating branches), and I usually give up and squash into a single commit\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-01-23T02:32:02.249+0000",
                    "updated": "2019-01-23T02:32:02.249+0000",
                    "started": "2019-01-23T02:32:02.218+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "188611",
                    "issueId": "13204559"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13204559/worklog/188631",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on issue #3336: ARROW-4031: [C++] Refactor bitmap building\nURL: https://github.com/apache/arrow/pull/3336#issuecomment-456655888\n \n \n   @pitrou @bkietz so after spending some time scrutinizing flamegraphs and benchmarks I discovered that performance of all of our BinaryBuilder classes is being hurt by `ArrayBuilder::Reserve` not being inline. I fixed that and it resulted in almost ~20% performance improvement in the `FixedSizeBinaryBuilder` benchmark\r\n   \r\n   before\r\n   \r\n   ```\r\n   -----------------------------------------------------------------------------------\r\n   Benchmark                                            Time           CPU Iterations\r\n   -----------------------------------------------------------------------------------\r\n   BM_BuildFixedSizeBinaryArray/min_time:3.000       9609 us       9580 us        441   1043.83MB/s\r\n   ```\r\n   \r\n   after\r\n   \r\n   ```\r\n   -----------------------------------------------------------------------------------\r\n   Benchmark                                            Time           CPU Iterations\r\n   -----------------------------------------------------------------------------------\r\n   BM_BuildFixedSizeBinaryArray/min_time:3.000       8072 us       8072 us        551   1.20979GB/s\r\n   ```\r\n   \r\n   It is imperative that we get our automated benchmarks set up ASAP so we aren't playing guesswork (via ad hoc benchmarks) with these code paths. I'm going to merge this once the build is passing\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-01-23T03:27:35.553+0000",
                    "updated": "2019-01-23T03:27:35.553+0000",
                    "started": "2019-01-23T03:27:35.552+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "188631",
                    "issueId": "13204559"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13204559/worklog/188635",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on pull request #3336: ARROW-4031: [C++] Refactor bitmap building\nURL: https://github.com/apache/arrow/pull/3336#discussion_r250045841\n \n \n\n ##########\n File path: cpp/src/arrow/buffer-builder.h\n ##########\n @@ -45,23 +45,23 @@ class ARROW_EXPORT BufferBuilder {\n \n   /// \\brief Resize the buffer to the nearest multiple of 64 bytes\n   ///\n-  /// \\param elements the new capacity of the of the builder. Will be rounded\n+  /// \\param new_capacity the new capacity of the of the builder. Will be rounded\n   /// up to a multiple of 64 bytes for padding\n   /// \\param shrink_to_fit if new capacity is smaller than the existing size,\n   /// reallocate internal buffer. Set to false to avoid reallocations when\n   /// shrinking the builder.\n   /// \\return Status\n-  Status Resize(const int64_t elements, bool shrink_to_fit = true) {\n+  Status Resize(const int64_t new_capacity, bool shrink_to_fit = true) {\n     // Resize(0) is a no-op\n-    if (elements == 0) {\n+    if (new_capacity == 0) {\n       return Status::OK();\n     }\n     int64_t old_capacity = capacity_;\n \n     if (buffer_ == NULLPTR) {\n-      ARROW_RETURN_NOT_OK(AllocateResizableBuffer(pool_, elements, &buffer_));\n+      ARROW_RETURN_NOT_OK(AllocateResizableBuffer(pool_, new_capacity, &buffer_));\n     } else {\n-      ARROW_RETURN_NOT_OK(buffer_->Resize(elements, shrink_to_fit));\n+      ARROW_RETURN_NOT_OK(buffer_->Resize(new_capacity, shrink_to_fit));\n     }\n     capacity_ = buffer_->capacity();\n     data_ = buffer_->mutable_data();\n \n Review comment:\n   I'm looking into this right now\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-01-23T03:33:07.558+0000",
                    "updated": "2019-01-23T03:33:07.558+0000",
                    "started": "2019-01-23T03:33:07.557+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "188635",
                    "issueId": "13204559"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13204559/worklog/188640",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on issue #3336: ARROW-4031: [C++] Refactor bitmap building\nURL: https://github.com/apache/arrow/pull/3336#issuecomment-456659018\n \n \n   @pitrou good call on removing the memset statements. I removed them and added `ZeroPadding` to `BufferBuilder::Finish`. The valgrind tests all passed. Performance improved by another ~5% or so\r\n   \r\n   ```\r\n   -----------------------------------------------------------------------------------\r\n   Benchmark                                            Time           CPU Iterations\r\n   -----------------------------------------------------------------------------------\r\n   BM_BuildFixedSizeBinaryArray/min_time:3.000       7486 us       7485 us        556   1.30468GB/s\r\n   ```\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-01-23T03:44:50.470+0000",
                    "updated": "2019-01-23T03:44:50.470+0000",
                    "started": "2019-01-23T03:44:50.469+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "188640",
                    "issueId": "13204559"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13204559/worklog/188642",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on issue #3336: ARROW-4031: [C++] Refactor bitmap building\nURL: https://github.com/apache/arrow/pull/3336#issuecomment-456660867\n \n \n   I realized TurboBoost was enabled on my laptop, so I disabled and made sure I'm on \"performance\" CPU governor, pinned all cores to 2.8 GHz on my mobile Xeon, the final benchmarks for the concerning BuildFixedSizeBinaryArray benchmark are\r\n   \r\n   before:\r\n   \r\n   ```\r\n   -----------------------------------------------------------------------------------\r\n   Benchmark                                            Time           CPU Iterations\r\n   -----------------------------------------------------------------------------------\r\n   BM_BuildFixedSizeBinaryArray/min_time:3.000      11627 us      11633 us        360   859.632MB/s\r\n   ```\r\n   \r\n   after\r\n   \r\n   ```\r\n   -----------------------------------------------------------------------------------\r\n   Benchmark                                            Time           CPU Iterations\r\n   -----------------------------------------------------------------------------------\r\n   BM_BuildFixedSizeBinaryArray/min_time:3.000       9004 us       9009 us        461   1110.06MB/s\r\n   ```\r\n   \r\n   So this patch is roughly 30% improvement\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-01-23T03:56:00.416+0000",
                    "updated": "2019-01-23T03:56:00.416+0000",
                    "started": "2019-01-23T03:56:00.414+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "188642",
                    "issueId": "13204559"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13204559/worklog/189034",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on issue #3336: ARROW-4031: [C++] Refactor bitmap building\nURL: https://github.com/apache/arrow/pull/3336#issuecomment-456864161\n \n \n   I just merged with upstream (since I couldn't rebase). Performance got worse after merging so we might investigate which commit caused a performance regression in this code path\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-01-23T16:15:54.886+0000",
                    "updated": "2019-01-23T16:15:54.886+0000",
                    "started": "2019-01-23T16:15:54.885+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "189034",
                    "issueId": "13204559"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13204559/worklog/189036",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on issue #3336: ARROW-4031: [C++] Refactor bitmap building\nURL: https://github.com/apache/arrow/pull/3336#issuecomment-456865190\n \n \n   False alarm. Don't know why perf got worse on this machine since last night but \u00af\\_(\u30c4)_/\u00af\r\n   \r\n   ```\r\n   -----------------------------------------------------------------------------------\r\n   Benchmark                                            Time           CPU Iterations\r\n   -----------------------------------------------------------------------------------\r\n   BM_BuildFixedSizeBinaryArray/min_time:3.000       9648 us       9648 us        431   1036.52MB/s\r\n   ```\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-01-23T16:18:35.485+0000",
                    "updated": "2019-01-23T16:18:35.485+0000",
                    "started": "2019-01-23T16:18:35.484+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "189036",
                    "issueId": "13204559"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13204559/worklog/189122",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on issue #3336: ARROW-4031: [C++] Refactor bitmap building\nURL: https://github.com/apache/arrow/pull/3336#issuecomment-456916928\n \n \n   +1. One of the Travis jobs failed with the spurious\r\n   \r\n   ```\r\n   [ERROR] Tests run: 21, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 9.542 s <<< FAILURE! - in org.apache.arrow.gandiva.evaluator.ProjectorTest\r\n   [ERROR] testMakeProjector(org.apache.arrow.gandiva.evaluator.ProjectorTest)  Time elapsed: 0.079 s  <<< FAILURE!\r\n   java.lang.AssertionError\r\n   \tat org.apache.arrow.gandiva.evaluator.ProjectorTest.testMakeProjector(ProjectorTest.java:164)\r\n   ```\r\n   \r\n   @pravindra do you know what this is? I'll merge once the Appveyor build looks OK\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-01-23T18:37:09.685+0000",
                    "updated": "2019-01-23T18:37:09.685+0000",
                    "started": "2019-01-23T18:37:09.684+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "189122",
                    "issueId": "13204559"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13204559/worklog/189126",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on issue #3336: ARROW-4031: [C++] Refactor bitmap building\nURL: https://github.com/apache/arrow/pull/3336#issuecomment-456918171\n \n \n   I opened https://issues.apache.org/jira/browse/ARROW-4341 as follow up\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2019-01-23T18:40:46.546+0000",
                    "updated": "2019-01-23T18:40:46.546+0000",
                    "started": "2019-01-23T18:40:46.545+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "189126",
                    "issueId": "13204559"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
            "id": "4",
            "description": "An improvement or enhancement to an existing feature or task.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
            "name": "Improvement",
            "subtask": false,
            "avatarId": 21140
        },
        "timespent": 12600,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@71995d95[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@6e983bf[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@a7c34e5[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@4042aa6e[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@30f16802[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@14f2f305[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@7f423662[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@2a06f23e[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@110c3e04[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@12e59dfb[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@7c7a48e3[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@61f0d250[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 12600,
        "customfield_12312520": null,
        "customfield_12312521": "Wed Jan 23 19:48:04 UTC 2019",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2019-01-23T19:48:03.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-4031/watchers",
            "watchCount": 2,
            "isWatching": false
        },
        "created": "2018-12-14T19:11:02.000+0000",
        "updated": "2019-01-23T19:48:18.000+0000",
        "timeoriginalestimate": null,
        "description": "It would be useful to have a specialization of TypedBufferBuilder to simplify building buffers of bits. This could then be utilized by ArrayBuilder (for the null bitmap) and BooleanBuilder (for values)",
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "3.5h",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 12600
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[C++] Refactor ArrayBuilder bitmap logic into TypedBufferBuilder<bool>",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13204559/comment/16721715",
                    "id": "16721715",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "Makes sense. If you do start working on this you may want to hold off until https://github.com/apache/arrow/pull/3171 is merged (since a bunch of the code is moved around)",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2018-12-14T19:18:51.275+0000",
                    "updated": "2018-12-14T19:18:51.275+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13204559/comment/16750386",
                    "id": "16750386",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "Issue resolved by pull request 3336\n[https://github.com/apache/arrow/pull/3336]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2019-01-23T19:48:04.001+0000",
                    "updated": "2019-01-23T19:48:04.001+0000"
                }
            ],
            "maxResults": 2,
            "total": 2,
            "startAt": 0
        },
        "customfield_12311820": "0|s01jhk:",
        "customfield_12314139": null
    }
}