{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13150644",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13150644",
    "key": "ARROW-2411",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12342562",
                "id": "12342562",
                "description": "",
                "name": "0.10.0",
                "archived": false,
                "released": true,
                "releaseDate": "2018-08-06"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "name": "Major",
            "id": "3"
        },
        "labels": [
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": null,
        "customfield_12312330": null,
        "versions": [],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=kou",
            "name": "kou",
            "key": "kou",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=kou&avatarId=30762",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kou&avatarId=30762",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kou&avatarId=30762",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kou&avatarId=30762"
            },
            "displayName": "Kouhei Sutou",
            "active": true,
            "timeZone": "Asia/Tokyo"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12328935",
                "id": "12328935",
                "name": "C++"
            },
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12332430",
                "id": "12332430",
                "name": "GLib"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": null,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=uwe",
            "name": "uwe",
            "key": "xhochy",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=xhochy&avatarId=30652",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=xhochy&avatarId=30652",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=xhochy&avatarId=30652",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=xhochy&avatarId=30652"
            },
            "displayName": "Uwe Korn",
            "active": true,
            "timeZone": "Europe/Berlin"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=uwe",
            "name": "uwe",
            "key": "xhochy",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=xhochy&avatarId=30652",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=xhochy&avatarId=30652",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=xhochy&avatarId=30652",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=xhochy&avatarId=30652"
            },
            "displayName": "Uwe Korn",
            "active": true,
            "timeZone": "Europe/Berlin"
        },
        "aggregateprogress": {
            "progress": 0,
            "total": 0
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 0,
            "total": 0
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-2411/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 0,
            "worklogs": []
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
            "id": "4",
            "description": "An improvement or enhancement to an existing feature or task.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
            "name": "Improvement",
            "subtask": false,
            "avatarId": 21140
        },
        "timespent": null,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@7ca982cc[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@24d3e574[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@54c84447[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@6f8bf3ef[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@43e8958d[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@1fdcf88c[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@9207d4c[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@3984f30c[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@3ec74d4c[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@46a7ca80[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@4ce71505[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@52e58306[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": null,
        "customfield_12312520": null,
        "customfield_12312521": "Tue Apr 10 17:16:11 UTC 2018",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2018-04-10T17:15:22.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-2411/watchers",
            "watchCount": 2,
            "isWatching": false
        },
        "created": "2018-04-06T16:09:11.000+0000",
        "updated": "2018-04-10T17:16:11.000+0000",
        "timeoriginalestimate": null,
        "description": "We should add a method {{StringBuilder::AppendCStrings(const char** values, const uint8_t* valid_bytes = NULLPTR)}} to the {{StringBuilder}}\u00a0class to have fast inserts for these strings. See https://github.com/apache/arrow/pull/1845/files for a use case.",
        "customfield_10010": null,
        "timetracking": {},
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[C++] Add method to append batches of null-terminated strings to StringBuilder",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13150644/comment/16429363",
                    "id": "16429363",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "kou opened a new pull request #1852: ARROW-2411: [C++] Add StringBuilder::Append(const char **values)\nURL: https://github.com/apache/arrow/pull/1852\n \n \n   This implementation uses not NULL-terminated C strings and the length of values instead of NULL-terminated C strings. Because other builder uses the interface such as `PrimitiveBuilder::Append()`.\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2018-04-07T13:48:10.407+0000",
                    "updated": "2018-04-07T13:48:10.407+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13150644/comment/16429425",
                    "id": "16429425",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "pitrou commented on a change in pull request #1852: ARROW-2411: [C++] Add StringBuilder::Append(const char **values)\nURL: https://github.com/apache/arrow/pull/1852#discussion_r179919633\n \n \n\n ##########\n File path: cpp/src/arrow/builder.h\n ##########\n @@ -720,6 +720,16 @@ class ARROW_EXPORT StringBuilder : public BinaryBuilder {\n \n   Status Append(const std::vector<std::string>& values,\n                 const uint8_t* valid_bytes = NULLPTR);\n+\n+  /// \\brief Append a sequence of C strings in one shot\n \n Review comment:\n   \"nul-terminated C strings\".\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2018-04-07T15:44:20.303+0000",
                    "updated": "2018-04-07T15:44:20.303+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13150644/comment/16429426",
                    "id": "16429426",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "pitrou commented on a change in pull request #1852: ARROW-2411: [C++] Add StringBuilder::Append(const char **values)\nURL: https://github.com/apache/arrow/pull/1852#discussion_r179919647\n \n \n\n ##########\n File path: cpp/src/arrow/builder.cc\n ##########\n @@ -1413,6 +1413,41 @@ Status StringBuilder::Append(const std::vector<std::string>& values,\n   return Status::OK();\n }\n \n+Status StringBuilder::Append(const char** values,\n+                             int64_t length,\n+                             const uint8_t* valid_bytes) {\n+  std::size_t total_length = 0;\n+  std::vector<std::size_t> value_lengths(length);\n+  for (int64_t i = 0; i < length; ++i) {\n+    if (values[i]) {\n+      auto value_length = strlen(values[i]);\n+      value_lengths[i] = value_length;\n+      total_length += value_length;\n+    }\n+  }\n+  RETURN_NOT_OK(Reserve(length));\n+  RETURN_NOT_OK(value_data_builder_.Reserve(total_length));\n+  RETURN_NOT_OK(offsets_builder_.Reserve(length));\n+\n+  if (valid_bytes) {\n+    for (int64_t i = 0; i < length; ++i) {\n+      RETURN_NOT_OK(AppendNextOffset());\n+      if (valid_bytes[i]) {\n+        RETURN_NOT_OK(value_data_builder_.Append(\n+            reinterpret_cast<const uint8_t*>(values[i]), value_lengths[i]));\n+      }\n+    }\n+  } else {\n+    for (int64_t i = 0; i < length; ++i) {\n+      RETURN_NOT_OK(AppendNextOffset());\n+      RETURN_NOT_OK(value_data_builder_.Append(\n+          reinterpret_cast<const uint8_t*>(values[i]), value_lengths[i]));\n \n Review comment:\n   Does this create a non-null array item even if `values[i]` is NULL?\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2018-04-07T15:44:20.323+0000",
                    "updated": "2018-04-07T15:44:20.323+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13150644/comment/16429427",
                    "id": "16429427",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "pitrou commented on a change in pull request #1852: ARROW-2411: [C++] Add StringBuilder::Append(const char **values)\nURL: https://github.com/apache/arrow/pull/1852#discussion_r179919834\n \n \n\n ##########\n File path: cpp/src/arrow/array-test.cc\n ##########\n @@ -1022,6 +1022,39 @@ TEST_F(TestStringBuilder, TestAppendVector) {\n   }\n }\n \n+TEST_F(TestStringBuilder, TestAppendCStrings) {\n \n Review comment:\n   You should also write a test without a `valid_bytes` argument.\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2018-04-07T15:44:20.422+0000",
                    "updated": "2018-04-07T15:44:20.422+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13150644/comment/16429428",
                    "id": "16429428",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "pitrou commented on a change in pull request #1852: ARROW-2411: [C++] Add StringBuilder::Append(const char **values)\nURL: https://github.com/apache/arrow/pull/1852#discussion_r179919627\n \n \n\n ##########\n File path: cpp/src/arrow/builder.h\n ##########\n @@ -720,6 +720,16 @@ class ARROW_EXPORT StringBuilder : public BinaryBuilder {\n \n   Status Append(const std::vector<std::string>& values,\n                 const uint8_t* valid_bytes = NULLPTR);\n+\n+  /// \\brief Append a sequence of C strings in one shot\n+  /// \\param[in] values a contiguous C array of C strings\n+  /// \\param[in] length the number of values to append\n+  /// \\param[in] valid_bytes an optional sequence of bytes where non-zero\n+  /// indicates a valid (non-null) value\n+  /// \\return Status\n+  Status Append(const char** values,\n \n Review comment:\n   I'd rather have it called `AppendCStrings` as @xhochy proposed. Too many overloads can create ambiguity.\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2018-04-07T15:44:20.431+0000",
                    "updated": "2018-04-07T15:44:20.431+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13150644/comment/16429429",
                    "id": "16429429",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "pitrou commented on issue #1852: ARROW-2411: [C++] Add StringBuilder::Append(const char **values)\nURL: https://github.com/apache/arrow/pull/1852#issuecomment-379478751\n \n \n   > This implementation uses not NULL-terminated C strings and the length of values instead of NULL-terminated C strings\r\n   \r\n   \"NULL-terminated C strings\" means each C string is terminated by a nul char, not that the array is terminated by a NULL pointer :-)\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2018-04-07T15:45:23.797+0000",
                    "updated": "2018-04-07T15:45:23.797+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13150644/comment/16429637",
                    "id": "16429637",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "kou commented on a change in pull request #1852: ARROW-2411: [C++] Add StringBuilder::Append(const char **values)\nURL: https://github.com/apache/arrow/pull/1852#discussion_r179936398\n \n \n\n ##########\n File path: cpp/src/arrow/builder.h\n ##########\n @@ -720,6 +720,16 @@ class ARROW_EXPORT StringBuilder : public BinaryBuilder {\n \n   Status Append(const std::vector<std::string>& values,\n                 const uint8_t* valid_bytes = NULLPTR);\n+\n+  /// \\brief Append a sequence of C strings in one shot\n+  /// \\param[in] values a contiguous C array of C strings\n+  /// \\param[in] length the number of values to append\n+  /// \\param[in] valid_bytes an optional sequence of bytes where non-zero\n+  /// indicates a valid (non-null) value\n+  /// \\return Status\n+  Status Append(const char** values,\n \n Review comment:\n   Umm. We already use `Append()` for scalar append and vector append in other builders.\r\n   If we use separated names for append variations, it may be better that we also change the current vector append methods to `AppendValues()` or something for consistency.\r\n   \r\n   @xhochy what do you think about this?\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2018-04-08T06:01:50.625+0000",
                    "updated": "2018-04-08T06:01:50.625+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13150644/comment/16429638",
                    "id": "16429638",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "kou commented on a change in pull request #1852: ARROW-2411: [C++] Add StringBuilder::Append(const char **values)\nURL: https://github.com/apache/arrow/pull/1852#discussion_r179936463\n \n \n\n ##########\n File path: cpp/src/arrow/builder.h\n ##########\n @@ -720,6 +720,16 @@ class ARROW_EXPORT StringBuilder : public BinaryBuilder {\n \n   Status Append(const std::vector<std::string>& values,\n                 const uint8_t* valid_bytes = NULLPTR);\n+\n+  /// \\brief Append a sequence of C strings in one shot\n \n Review comment:\n   I'm using \"C string\" as \"nul-terminated char *\".\r\n   \r\n   I changed to use \"nul-terminated char*\" instead of \"C string\". It'll be more clearer.\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2018-04-08T06:05:06.606+0000",
                    "updated": "2018-04-08T06:05:06.606+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13150644/comment/16429642",
                    "id": "16429642",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "kou commented on a change in pull request #1852: ARROW-2411: [C++] Add StringBuilder::Append(const char **values)\nURL: https://github.com/apache/arrow/pull/1852#discussion_r179936915\n \n \n\n ##########\n File path: cpp/src/arrow/builder.cc\n ##########\n @@ -1413,6 +1413,41 @@ Status StringBuilder::Append(const std::vector<std::string>& values,\n   return Status::OK();\n }\n \n+Status StringBuilder::Append(const char** values,\n+                             int64_t length,\n+                             const uint8_t* valid_bytes) {\n+  std::size_t total_length = 0;\n+  std::vector<std::size_t> value_lengths(length);\n+  for (int64_t i = 0; i < length; ++i) {\n+    if (values[i]) {\n+      auto value_length = strlen(values[i]);\n+      value_lengths[i] = value_length;\n+      total_length += value_length;\n+    }\n+  }\n+  RETURN_NOT_OK(Reserve(length));\n+  RETURN_NOT_OK(value_data_builder_.Reserve(total_length));\n+  RETURN_NOT_OK(offsets_builder_.Reserve(length));\n+\n+  if (valid_bytes) {\n+    for (int64_t i = 0; i < length; ++i) {\n+      RETURN_NOT_OK(AppendNextOffset());\n+      if (valid_bytes[i]) {\n+        RETURN_NOT_OK(value_data_builder_.Append(\n+            reinterpret_cast<const uint8_t*>(values[i]), value_lengths[i]));\n+      }\n+    }\n+  } else {\n+    for (int64_t i = 0; i < length; ++i) {\n+      RETURN_NOT_OK(AppendNextOffset());\n+      RETURN_NOT_OK(value_data_builder_.Append(\n+          reinterpret_cast<const uint8_t*>(values[i]), value_lengths[i]));\n \n Review comment:\n   It's interesting.\r\n   I've implemented as the followings:\r\n   \r\n     * If `values[i]` is `NULL` and `valid_bytes` isn't `nullptr`, the value is an empty string not a null value. It's for respecting `valid_bytes` data.\r\n     * If `values[i]` is `NULL` and `valid_bytes` is `nullptr`, the value is a null value.\r\n   \r\n   But users may be confused...\r\n   \n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2018-04-08T06:27:04.015+0000",
                    "updated": "2018-04-08T06:27:04.015+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13150644/comment/16429643",
                    "id": "16429643",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "kou commented on a change in pull request #1852: ARROW-2411: [C++] Add StringBuilder::Append(const char **values)\nURL: https://github.com/apache/arrow/pull/1852#discussion_r179936937\n \n \n\n ##########\n File path: cpp/src/arrow/array-test.cc\n ##########\n @@ -1022,6 +1022,39 @@ TEST_F(TestStringBuilder, TestAppendVector) {\n   }\n }\n \n+TEST_F(TestStringBuilder, TestAppendCStrings) {\n \n Review comment:\n   Exactly.\r\n   I've added.\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2018-04-08T06:27:38.111+0000",
                    "updated": "2018-04-08T06:27:38.111+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13150644/comment/16429645",
                    "id": "16429645",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "kou commented on issue #1852: ARROW-2411: [C++] Add StringBuilder::Append(const char **values)\nURL: https://github.com/apache/arrow/pull/1852#issuecomment-379524557\n \n \n   > \"NULL-terminated  C strings\" means each C string is terminated by a nul char, not that  the array is terminated by a NULL pointer :-)\r\n   \r\n   Thanks for the English lesson. :-)\r\n   It's very helpful to me because I'm not a native English speaker.\r\n   \n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2018-04-08T06:29:32.578+0000",
                    "updated": "2018-04-08T06:29:32.578+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13150644/comment/16429793",
                    "id": "16429793",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "pitrou commented on a change in pull request #1852: ARROW-2411: [C++] Add StringBuilder::Append(const char **values)\nURL: https://github.com/apache/arrow/pull/1852#discussion_r179952045\n \n \n\n ##########\n File path: cpp/src/arrow/builder.cc\n ##########\n @@ -1413,6 +1413,41 @@ Status StringBuilder::Append(const std::vector<std::string>& values,\n   return Status::OK();\n }\n \n+Status StringBuilder::Append(const char** values,\n+                             int64_t length,\n+                             const uint8_t* valid_bytes) {\n+  std::size_t total_length = 0;\n+  std::vector<std::size_t> value_lengths(length);\n+  for (int64_t i = 0; i < length; ++i) {\n+    if (values[i]) {\n+      auto value_length = strlen(values[i]);\n+      value_lengths[i] = value_length;\n+      total_length += value_length;\n+    }\n+  }\n+  RETURN_NOT_OK(Reserve(length));\n+  RETURN_NOT_OK(value_data_builder_.Reserve(total_length));\n+  RETURN_NOT_OK(offsets_builder_.Reserve(length));\n+\n+  if (valid_bytes) {\n+    for (int64_t i = 0; i < length; ++i) {\n+      RETURN_NOT_OK(AppendNextOffset());\n+      if (valid_bytes[i]) {\n+        RETURN_NOT_OK(value_data_builder_.Append(\n+            reinterpret_cast<const uint8_t*>(values[i]), value_lengths[i]));\n+      }\n+    }\n+  } else {\n+    for (int64_t i = 0; i < length; ++i) {\n+      RETURN_NOT_OK(AppendNextOffset());\n+      RETURN_NOT_OK(value_data_builder_.Append(\n+          reinterpret_cast<const uint8_t*>(values[i]), value_lengths[i]));\n \n Review comment:\n   Hmm, yes, I think it's a bad idea. If we accept `NULL` value pointers, it should IMHO *always* mean a null item in the array (regardless of `valid_bytes`). If we don't accept `NULL` value pointers, we should at least add a DCHECK against them.\r\n   \r\n   I think it's a good idea to accept them, that way people don't have to allocate a separate `valid_bytes` array.\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2018-04-08T15:55:15.853+0000",
                    "updated": "2018-04-08T15:55:15.853+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13150644/comment/16432148",
                    "id": "16432148",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "pitrou commented on a change in pull request #1852: ARROW-2411: [C++] Add StringBuilder::Append(const char **values)\nURL: https://github.com/apache/arrow/pull/1852#discussion_r180394086\n \n \n\n ##########\n File path: cpp/src/arrow/builder.h\n ##########\n @@ -720,6 +720,16 @@ class ARROW_EXPORT StringBuilder : public BinaryBuilder {\n \n   Status Append(const std::vector<std::string>& values,\n                 const uint8_t* valid_bytes = NULLPTR);\n+\n+  /// \\brief Append a sequence of C strings in one shot\n+  /// \\param[in] values a contiguous C array of C strings\n+  /// \\param[in] length the number of values to append\n+  /// \\param[in] valid_bytes an optional sequence of bytes where non-zero\n+  /// indicates a valid (non-null) value\n+  /// \\return Status\n+  Status Append(const char** values,\n \n Review comment:\n   I would agree to rename other vector append method to `AppendValues`, to avoid ambiguities and user errors, but I don't know how much we value API stability at this point. @xhochy ?\r\n   \r\n   (for example, in Python `list.append` always appends a single item and `list.extend` must be called to append multiple items at once)\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2018-04-10T12:05:08.756+0000",
                    "updated": "2018-04-10T12:05:08.756+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13150644/comment/16432215",
                    "id": "16432215",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "xhochy commented on a change in pull request #1852: ARROW-2411: [C++] Add StringBuilder::Append(const char **values)\nURL: https://github.com/apache/arrow/pull/1852#discussion_r180411014\n \n \n\n ##########\n File path: cpp/src/arrow/builder.h\n ##########\n @@ -720,6 +720,16 @@ class ARROW_EXPORT StringBuilder : public BinaryBuilder {\n \n   Status Append(const std::vector<std::string>& values,\n                 const uint8_t* valid_bytes = NULLPTR);\n+\n+  /// \\brief Append a sequence of C strings in one shot\n+  /// \\param[in] values a contiguous C array of C strings\n+  /// \\param[in] length the number of values to append\n+  /// \\param[in] valid_bytes an optional sequence of bytes where non-zero\n+  /// indicates a valid (non-null) value\n+  /// \\return Status\n+  Status Append(const char** values,\n \n Review comment:\n   I'm happy to have methods with better names. We should deprecate the old variants then and leave them in for one release. Removing methods completely between release without deprecation already creates a lot of overhead in the libraries consuming Arrow. While there are not that many public visible, I would like to keep maintenance for them as smooth as possible.\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2018-04-10T13:01:10.649+0000",
                    "updated": "2018-04-10T13:01:10.649+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13150644/comment/16432225",
                    "id": "16432225",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "pitrou commented on a change in pull request #1852: ARROW-2411: [C++] Add StringBuilder::Append(const char **values)\nURL: https://github.com/apache/arrow/pull/1852#discussion_r180414507\n \n \n\n ##########\n File path: cpp/src/arrow/builder.h\n ##########\n @@ -720,6 +720,16 @@ class ARROW_EXPORT StringBuilder : public BinaryBuilder {\n \n   Status Append(const std::vector<std::string>& values,\n                 const uint8_t* valid_bytes = NULLPTR);\n+\n+  /// \\brief Append a sequence of C strings in one shot\n+  /// \\param[in] values a contiguous C array of C strings\n+  /// \\param[in] length the number of values to append\n+  /// \\param[in] valid_bytes an optional sequence of bytes where non-zero\n+  /// indicates a valid (non-null) value\n+  /// \\return Status\n+  Status Append(const char** values,\n \n Review comment:\n   Ok, I think we can do this in a separate PR.\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2018-04-10T13:12:45.966+0000",
                    "updated": "2018-04-10T13:12:45.966+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13150644/comment/16432604",
                    "id": "16432604",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "body": "Issue resolved by pull request 1852\n[https://github.com/apache/arrow/pull/1852]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=apitrou",
                        "name": "apitrou",
                        "key": "pitrou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=pitrou&avatarId=35049",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pitrou&avatarId=35049",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pitrou&avatarId=35049",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pitrou&avatarId=35049"
                        },
                        "displayName": "Antoine Pitrou",
                        "active": true,
                        "timeZone": "Europe/Paris"
                    },
                    "created": "2018-04-10T17:15:22.020+0000",
                    "updated": "2018-04-10T17:15:22.020+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13150644/comment/16432605",
                    "id": "16432605",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "pitrou closed pull request #1852: ARROW-2411: [C++] Add StringBuilder::Append(const char **values)\nURL: https://github.com/apache/arrow/pull/1852\n \n \n   \n\nThis is a PR merged from a forked repository.\nAs GitHub hides the original diff on merge, it is displayed below for\nthe sake of provenance:\n\nAs this is a foreign pull request (from a fork), the diff is supplied\nbelow (as it won't show otherwise due to GitHub magic):\n\ndiff --git a/cpp/src/arrow/array-test.cc b/cpp/src/arrow/array-test.cc\nindex fb1bebfca..2ae9f48db 100644\n--- a/cpp/src/arrow/array-test.cc\n+++ b/cpp/src/arrow/array-test.cc\n@@ -1022,6 +1022,72 @@ TEST_F(TestStringBuilder, TestAppendVector) {\n   }\n }\n \n+TEST_F(TestStringBuilder, TestAppendCStringsWithValidBytes) {\n+  const char* strings[] = {nullptr, \"aaa\", nullptr, \"ignored\", \"\"};\n+  vector<uint8_t> valid_bytes = {1, 1, 1, 0, 1};\n+\n+  int N = static_cast<int>(sizeof(strings) / sizeof(strings[0]));\n+  int reps = 1000;\n+\n+  for (int j = 0; j < reps; ++j) {\n+    ASSERT_OK(builder_->Append(strings, N, valid_bytes.data()));\n+  }\n+  Done();\n+\n+  ASSERT_EQ(reps * N, result_->length());\n+  ASSERT_EQ(reps * 3, result_->null_count());\n+  ASSERT_EQ(reps * 3, result_->value_data()->size());\n+\n+  int32_t length;\n+  int32_t pos = 0;\n+  for (int i = 0; i < N * reps; ++i) {\n+    auto string = strings[i % N];\n+    if (string && valid_bytes[i % N]) {\n+      ASSERT_FALSE(result_->IsNull(i));\n+      result_->GetValue(i, &length);\n+      ASSERT_EQ(pos, result_->value_offset(i));\n+      ASSERT_EQ(static_cast<int32_t>(strlen(string)), length);\n+      ASSERT_EQ(strings[i % N], result_->GetString(i));\n+\n+      pos += length;\n+    } else {\n+      ASSERT_TRUE(result_->IsNull(i));\n+    }\n+  }\n+}\n+\n+TEST_F(TestStringBuilder, TestAppendCStringsWithoutValidBytes) {\n+  const char* strings[] = {\"\", \"bb\", \"a\", nullptr, \"ccc\"};\n+\n+  int N = static_cast<int>(sizeof(strings) / sizeof(strings[0]));\n+  int reps = 1000;\n+\n+  for (int j = 0; j < reps; ++j) {\n+    ASSERT_OK(builder_->Append(strings, N));\n+  }\n+  Done();\n+\n+  ASSERT_EQ(reps * N, result_->length());\n+  ASSERT_EQ(reps, result_->null_count());\n+  ASSERT_EQ(reps * 6, result_->value_data()->size());\n+\n+  int32_t length;\n+  int32_t pos = 0;\n+  for (int i = 0; i < N * reps; ++i) {\n+    if (strings[i % N]) {\n+      ASSERT_FALSE(result_->IsNull(i));\n+      result_->GetValue(i, &length);\n+      ASSERT_EQ(pos, result_->value_offset(i));\n+      ASSERT_EQ(static_cast<int32_t>(strlen(strings[i % N])), length);\n+      ASSERT_EQ(strings[i % N], result_->GetString(i));\n+\n+      pos += length;\n+    } else {\n+      ASSERT_TRUE(result_->IsNull(i));\n+    }\n+  }\n+}\n+\n TEST_F(TestStringBuilder, TestZeroLength) {\n   // All buffers are null\n   Done();\ndiff --git a/cpp/src/arrow/builder.cc b/cpp/src/arrow/builder.cc\nindex c97253e64..78c42f4fc 100644\n--- a/cpp/src/arrow/builder.cc\n+++ b/cpp/src/arrow/builder.cc\n@@ -1413,6 +1413,64 @@ Status StringBuilder::Append(const std::vector<std::string>& values,\n   return Status::OK();\n }\n \n+Status StringBuilder::Append(const char** values, int64_t length,\n+                             const uint8_t* valid_bytes) {\n+  std::size_t total_length = 0;\n+  std::vector<std::size_t> value_lengths(length);\n+  bool have_null_value = false;\n+  for (int64_t i = 0; i < length; ++i) {\n+    if (values[i]) {\n+      auto value_length = strlen(values[i]);\n+      value_lengths[i] = value_length;\n+      total_length += value_length;\n+    } else {\n+      have_null_value = true;\n+    }\n+  }\n+  RETURN_NOT_OK(Reserve(length));\n+  RETURN_NOT_OK(value_data_builder_.Reserve(total_length));\n+  RETURN_NOT_OK(offsets_builder_.Reserve(length));\n+\n+  if (valid_bytes) {\n+    int64_t valid_bytes_offset = 0;\n+    for (int64_t i = 0; i < length; ++i) {\n+      RETURN_NOT_OK(AppendNextOffset());\n+      if (valid_bytes[i]) {\n+        if (values[i]) {\n+          RETURN_NOT_OK(value_data_builder_.Append(\n+              reinterpret_cast<const uint8_t*>(values[i]), value_lengths[i]));\n+        } else {\n+          UnsafeAppendToBitmap(valid_bytes + valid_bytes_offset, i - valid_bytes_offset);\n+          UnsafeAppendToBitmap(false);\n+          valid_bytes_offset = i + 1;\n+        }\n+      }\n+    }\n+    UnsafeAppendToBitmap(valid_bytes + valid_bytes_offset, length - valid_bytes_offset);\n+  } else {\n+    if (have_null_value) {\n+      std::vector<uint8_t> valid_vector(length, 0);\n+      for (int64_t i = 0; i < length; ++i) {\n+        RETURN_NOT_OK(AppendNextOffset());\n+        if (values[i]) {\n+          RETURN_NOT_OK(value_data_builder_.Append(\n+              reinterpret_cast<const uint8_t*>(values[i]), value_lengths[i]));\n+          valid_vector[i] = 1;\n+        }\n+      }\n+      UnsafeAppendToBitmap(valid_vector.data(), length);\n+    } else {\n+      for (int64_t i = 0; i < length; ++i) {\n+        RETURN_NOT_OK(AppendNextOffset());\n+        RETURN_NOT_OK(value_data_builder_.Append(\n+            reinterpret_cast<const uint8_t*>(values[i]), value_lengths[i]));\n+      }\n+      UnsafeAppendToBitmap(nullptr, length);\n+    }\n+  }\n+  return Status::OK();\n+}\n+\n // ----------------------------------------------------------------------\n // Fixed width binary\n \ndiff --git a/cpp/src/arrow/builder.h b/cpp/src/arrow/builder.h\nindex b0f77bd98..54ce1dfec 100644\n--- a/cpp/src/arrow/builder.h\n+++ b/cpp/src/arrow/builder.h\n@@ -720,6 +720,18 @@ class ARROW_EXPORT StringBuilder : public BinaryBuilder {\n \n   Status Append(const std::vector<std::string>& values,\n                 const uint8_t* valid_bytes = NULLPTR);\n+\n+  /// \\brief Append a sequence of nul-terminated strings in one shot.\n+  ///        If one of the values is NULL, it is processed as a null\n+  ///        value even if the corresponding valid_bytes entry is 1.\n+  ///\n+  /// \\param[in] values a contiguous C array of nul-terminated char *\n+  /// \\param[in] length the number of values to append\n+  /// \\param[in] valid_bytes an optional sequence of bytes where non-zero\n+  /// indicates a valid (non-null) value\n+  /// \\return Status\n+  Status Append(const char** values, int64_t length,\n+                const uint8_t* valid_bytes = NULLPTR);\n };\n \n // ----------------------------------------------------------------------\n\n\n \n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2018-04-10T17:15:24.094+0000",
                    "updated": "2018-04-10T17:15:24.094+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13150644/comment/16432608",
                    "id": "16432608",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "pitrou commented on issue #1852: ARROW-2411: [C++] Add StringBuilder::Append(const char **values)\nURL: https://github.com/apache/arrow/pull/1852#issuecomment-380179127\n \n \n   Thanks @kou !\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2018-04-10T17:16:11.426+0000",
                    "updated": "2018-04-10T17:16:11.426+0000"
                }
            ],
            "maxResults": 18,
            "total": 18,
            "startAt": 0
        },
        "customfield_12311820": "0|i3s8tb:",
        "customfield_12314139": null
    }
}