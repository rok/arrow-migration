{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13337057",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13337057",
    "key": "ARROW-10386",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12348823",
                "id": "12348823",
                "description": "",
                "name": "3.0.0",
                "archived": false,
                "released": true,
                "releaseDate": "2021-01-25"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "name": "Major",
            "id": "3"
        },
        "labels": [
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12345977",
                "id": "12345977",
                "description": "",
                "name": "2.0.0",
                "archived": false,
                "released": true,
                "releaseDate": "2020-10-19"
            }
        ],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [
            {
                "id": "12606518",
                "self": "https://issues.apache.org/jira/rest/api/2/issueLink/12606518",
                "type": {
                    "id": "12310000",
                    "name": "Duplicate",
                    "inward": "is duplicated by",
                    "outward": "duplicates",
                    "self": "https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"
                },
                "inwardIssue": {
                    "id": "13352094",
                    "key": "ARROW-11241",
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13352094",
                    "fields": {
                        "summary": "[R] backwards/forwards compatibility for compressed metadata",
                        "status": {
                            "self": "https://issues.apache.org/jira/rest/api/2/status/6",
                            "description": "The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/closed.png",
                            "name": "Closed",
                            "id": "6",
                            "statusCategory": {
                                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                                "id": 3,
                                "key": "done",
                                "colorName": "green",
                                "name": "Done"
                            }
                        },
                        "priority": {
                            "self": "https://issues.apache.org/jira/rest/api/2/priority/4",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
                            "name": "Minor",
                            "id": "4"
                        },
                        "issuetype": {
                            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
                            "id": "4",
                            "description": "An improvement or enhancement to an existing feature or task.",
                            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
                            "name": "Improvement",
                            "subtask": false,
                            "avatarId": 21140
                        }
                    }
                }
            }
        ],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=romainfrancois",
            "name": "romainfrancois",
            "key": "romainfrancois",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=romainfrancois&avatarId=35092",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=romainfrancois&avatarId=35092",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=romainfrancois&avatarId=35092",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=romainfrancois&avatarId=35092"
            },
            "displayName": "Romain Francois",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12333008",
                "id": "12333008",
                "name": "R"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=ptrbchl",
            "name": "ptrbchl",
            "key": "ptrbchl",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
            },
            "displayName": "Petr Bouchal",
            "active": true,
            "timeZone": "Europe/Prague"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=ptrbchl",
            "name": "ptrbchl",
            "key": "ptrbchl",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
            },
            "displayName": "Petr Bouchal",
            "active": true,
            "timeZone": "Europe/Prague"
        },
        "aggregateprogress": {
            "progress": 15600,
            "total": 15600,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 15600,
            "total": 15600,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-10386/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 26,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13337057/worklog/506169",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "romainfrancois opened a new pull request #8549:\nURL: https://github.com/apache/arrow/pull/8549\n\n\n   On the original example: \r\n   \r\n   ``` r\r\n   library(arrow)\r\n   #> \r\n   #> Attaching package: 'arrow'\r\n   #> The following object is masked from 'package:utils':\r\n   #> \r\n   #>     timestamp\r\n   library(sf)\r\n   #> Warning: package 'sf' was built under R version 4.0.2\r\n   #> Linking to GEOS 3.8.1, GDAL 3.1.1, PROJ 6.3.1\r\n   \r\n   fname <- system.file(\"shape/nc.shp\", package=\"sf\")\r\n   df_spatial <- st_read(fname)\r\n   #> Reading layer `nc' from data source `/Users/romainfrancois/.R/library/4.0/sf/shape/nc.shp' using driver `ESRI Shapefile'\r\n   #> Simple feature collection with 100 features and 14 fields\r\n   #> geometry type:  MULTIPOLYGON\r\n   #> dimension:      XY\r\n   #> bbox:           xmin: -84.32385 ymin: 33.88199 xmax: -75.45698 ymax: 36.58965\r\n   #> geographic CRS: NAD27\r\n   df_spatial\r\n   #> Simple feature collection with 100 features and 14 fields\r\n   #> geometry type:  MULTIPOLYGON\r\n   #> dimension:      XY\r\n   #> bbox:           xmin: -84.32385 ymin: 33.88199 xmax: -75.45698 ymax: 36.58965\r\n   #> geographic CRS: NAD27\r\n   #> First 10 features:\r\n   #>     AREA PERIMETER CNTY_ CNTY_ID        NAME  FIPS FIPSNO CRESS_ID BIR74 SID74\r\n   #> 1  0.114     1.442  1825    1825        Ashe 37009  37009        5  1091     1\r\n   #> 2  0.061     1.231  1827    1827   Alleghany 37005  37005        3   487     0\r\n   #> 3  0.143     1.630  1828    1828       Surry 37171  37171       86  3188     5\r\n   #> 4  0.070     2.968  1831    1831   Currituck 37053  37053       27   508     1\r\n   #> 5  0.153     2.206  1832    1832 Northampton 37131  37131       66  1421     9\r\n   #> 6  0.097     1.670  1833    1833    Hertford 37091  37091       46  1452     7\r\n   #> 7  0.062     1.547  1834    1834      Camden 37029  37029       15   286     0\r\n   #> 8  0.091     1.284  1835    1835       Gates 37073  37073       37   420     0\r\n   #> 9  0.118     1.421  1836    1836      Warren 37185  37185       93   968     4\r\n   #> 10 0.124     1.428  1837    1837      Stokes 37169  37169       85  1612     1\r\n   #>    NWBIR74 BIR79 SID79 NWBIR79                       geometry\r\n   #> 1       10  1364     0      19 MULTIPOLYGON (((-81.47276 3...\r\n   #> 2       10   542     3      12 MULTIPOLYGON (((-81.23989 3...\r\n   #> 3      208  3616     6     260 MULTIPOLYGON (((-80.45634 3...\r\n   #> 4      123   830     2     145 MULTIPOLYGON (((-76.00897 3...\r\n   #> 5     1066  1606     3    1197 MULTIPOLYGON (((-77.21767 3...\r\n   #> 6      954  1838     5    1237 MULTIPOLYGON (((-76.74506 3...\r\n   #> 7      115   350     2     139 MULTIPOLYGON (((-76.00897 3...\r\n   #> 8      254   594     2     371 MULTIPOLYGON (((-76.56251 3...\r\n   #> 9      748  1190     2     844 MULTIPOLYGON (((-78.30876 3...\r\n   #> 10     160  2038     5     176 MULTIPOLYGON (((-80.02567 3...\r\n   \r\n   tab <- Table$create(df_spatial)\r\n   roundtripped <- as.data.frame(tab)\r\n   roundtripped\r\n   #> Simple feature collection with 100 features and 14 fields\r\n   #> geometry type:  MULTIPOLYGON\r\n   #> dimension:      XY\r\n   #> bbox:           xmin: -84.32385 ymin: 33.88199 xmax: -75.45698 ymax: 36.58965\r\n   #> geographic CRS: NAD27\r\n   #> First 10 features:\r\n   #>     AREA PERIMETER CNTY_ CNTY_ID        NAME  FIPS FIPSNO CRESS_ID BIR74 SID74\r\n   #> 1  0.114     1.442  1825    1825        Ashe 37009  37009        5  1091     1\r\n   #> 2  0.061     1.231  1827    1827   Alleghany 37005  37005        3   487     0\r\n   #> 3  0.143     1.630  1828    1828       Surry 37171  37171       86  3188     5\r\n   #> 4  0.070     2.968  1831    1831   Currituck 37053  37053       27   508     1\r\n   #> 5  0.153     2.206  1832    1832 Northampton 37131  37131       66  1421     9\r\n   #> 6  0.097     1.670  1833    1833    Hertford 37091  37091       46  1452     7\r\n   #> 7  0.062     1.547  1834    1834      Camden 37029  37029       15   286     0\r\n   #> 8  0.091     1.284  1835    1835       Gates 37073  37073       37   420     0\r\n   #> 9  0.118     1.421  1836    1836      Warren 37185  37185       93   968     4\r\n   #> 10 0.124     1.428  1837    1837      Stokes 37169  37169       85  1612     1\r\n   #>    NWBIR74 BIR79 SID79 NWBIR79                       geometry\r\n   #> 1       10  1364     0      19 MULTIPOLYGON (((-81.47276 3...\r\n   #> 2       10   542     3      12 MULTIPOLYGON (((-81.23989 3...\r\n   #> 3      208  3616     6     260 MULTIPOLYGON (((-80.45634 3...\r\n   #> 4      123   830     2     145 MULTIPOLYGON (((-76.00897 3...\r\n   #> 5     1066  1606     3    1197 MULTIPOLYGON (((-77.21767 3...\r\n   #> 6      954  1838     5    1237 MULTIPOLYGON (((-76.74506 3...\r\n   #> 7      115   350     2     139 MULTIPOLYGON (((-76.00897 3...\r\n   #> 8      254   594     2     371 MULTIPOLYGON (((-76.56251 3...\r\n   #> 9      748  1190     2     844 MULTIPOLYGON (((-78.30876 3...\r\n   #> 10     160  2038     5     176 MULTIPOLYGON (((-80.02567 3...\r\n   \r\n   attributes(roundtripped$geometry[[1]])\r\n   #> $class\r\n   #> [1] \"XY\"           \"MULTIPOLYGON\" \"sfg\"\r\n   attributes(df_spatial$geometry[[1]])\r\n   #> $class\r\n   #> [1] \"XY\"           \"MULTIPOLYGON\" \"sfg\"\r\n   ```\r\n   \r\n   <sup>Created on 2020-10-29 by the [reprex package](https://reprex.tidyverse.org) (v0.3.0.9001)</sup>\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-10-29T11:24:22.772+0000",
                    "updated": "2020-10-29T11:24:22.772+0000",
                    "started": "2020-10-29T11:24:22.772+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "506169",
                    "issueId": "13337057"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13337057/worklog/506173",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "romainfrancois commented on pull request #8549:\nURL: https://github.com/apache/arrow/pull/8549#issuecomment-718689459\n\n\n   This increases again the weight of the metadata, which now has to include attributes for each element of a list column, aka a struct array, but this seems on this example to work. \r\n   \r\n   Can't use `sf` on the tests, so using something simpler: \r\n   \r\n   ```r\r\n   test_that(\"metadata of list elements (ARROW-10386)\", {\r\n     df <- data.frame(x = I(list(structure(1, foo = \"bar\"), structure(2, foo = \"bar\"))))\r\n     tab <- Table$create(df)\r\n     expect_identical(attr(as.data.frame(tab)$x[[1]], \"foo\"), \"bar\")\r\n     expect_identical(attr(as.data.frame(tab)$x[[2]], \"foo\"), \"bar\")\r\n   })\r\n   ```\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-10-29T11:26:59.180+0000",
                    "updated": "2020-10-29T11:26:59.180+0000",
                    "started": "2020-10-29T11:26:59.179+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "506173",
                    "issueId": "13337057"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13337057/worklog/506177",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "github-actions[bot] commented on pull request #8549:\nURL: https://github.com/apache/arrow/pull/8549#issuecomment-718697703\n\n\n   https://issues.apache.org/jira/browse/ARROW-10386\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-10-29T11:39:59.579+0000",
                    "updated": "2020-10-29T11:39:59.579+0000",
                    "started": "2020-10-29T11:39:59.579+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "506177",
                    "issueId": "13337057"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13337057/worklog/530910",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jonkeane commented on a change in pull request #8549:\nURL: https://github.com/apache/arrow/pull/8549#discussion_r551552588\n\n\n\n##########\nFile path: r/R/record-batch.R\n##########\n@@ -286,6 +286,20 @@ as.data.frame.RecordBatch <- function(x, row.names = NULL, optional = FALSE, ...\n \n apply_arrow_r_metadata <- function(x, r_metadata) {\n   tryCatch({\n+    columns_metadata <- r_metadata$columns\n+    if (is.data.frame(x)) {\n+      if (length(names(x)) && !is.null(columns_metadata)) {\n+        for (name in intersect(names(columns_metadata), names(x))) {\n+          x[[name]] <- apply_arrow_r_metadata(x[[name]], columns_metadata[[name]])\n+        }\n+      }\n+    } else if(is.list(x) && !inherits(x, \"POSIXlt\") && !is.null(columns_metadata)) {\n+      x <- map2(x, columns_metadata, function(.x, .y) {\n+        apply_arrow_r_metadata(.x, .y)\n+      })\n+      x\n+    }\n\nReview comment:\n       Could we move `!is.null(columns_metadata)` up to line 290 instead of having it on both 291 and 296?\n\n##########\nFile path: r/tests/testthat/test-metadata.R\n##########\n@@ -134,3 +134,10 @@ test_that(\"metadata keeps attribute of top level data frame\", {\n   expect_identical(attr(as.data.frame(tab), \"foo\"), \"bar\")\n   expect_identical(as.data.frame(tab), df)\n })\n+\n+test_that(\"metadata of list elements (ARROW-10386)\", {\n+  df <- data.frame(x = I(list(structure(1, foo = \"bar\"), structure(2, foo = \"bar\"))))\n+  tab <- Table$create(df)\n+  expect_identical(attr(as.data.frame(tab)$x[[1]], \"foo\"), \"bar\")\n+  expect_identical(attr(as.data.frame(tab)$x[[2]], \"foo\"), \"bar\")\n\nReview comment:\n       I wonder if it would be clearer to have different attributes on each item/row to make it super obvious that we're not picking the attributes of the first item/row and copying them for the whole column.\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-01-04T21:31:57.160+0000",
                    "updated": "2021-01-04T21:31:57.160+0000",
                    "started": "2021-01-04T21:31:57.159+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "530910",
                    "issueId": "13337057"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13337057/worklog/530931",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nealrichardson commented on pull request #8549:\nURL: https://github.com/apache/arrow/pull/8549#issuecomment-754251796\n\n\n   > This increases again the weight of the metadata, which now has to include attributes for each element of a list column\r\n   \r\n   How much does it blow up the metadata? Is this going to scale to be able to handle normal/large shapefiles? \r\n   \r\n   Is there a more efficient representation for this metadata (considering that we have to serialize it to a string)? Should we special-case `sf` objects?\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-01-04T22:05:39.939+0000",
                    "updated": "2021-01-04T22:05:39.939+0000",
                    "started": "2021-01-04T22:05:39.939+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "530931",
                    "issueId": "13337057"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13337057/worklog/535108",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jonkeane opened a new pull request #9182:\nURL: https://github.com/apache/arrow/pull/9182\n\n\n   \n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-01-13T00:09:37.419+0000",
                    "updated": "2021-01-13T00:09:37.419+0000",
                    "started": "2021-01-13T00:09:37.419+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "535108",
                    "issueId": "13337057"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13337057/worklog/535109",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "github-actions[bot] commented on pull request #9182:\nURL: https://github.com/apache/arrow/pull/9182#issuecomment-759116630\n\n\n   <!--\n     Licensed to the Apache Software Foundation (ASF) under one\n     or more contributor license agreements.  See the NOTICE file\n     distributed with this work for additional information\n     regarding copyright ownership.  The ASF licenses this file\n     to you under the Apache License, Version 2.0 (the\n     \"License\"); you may not use this file except in compliance\n     with the License.  You may obtain a copy of the License at\n   \n       http://www.apache.org/licenses/LICENSE-2.0\n   \n     Unless required by applicable law or agreed to in writing,\n     software distributed under the License is distributed on an\n     \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n     KIND, either express or implied.  See the License for the\n     specific language governing permissions and limitations\n     under the License.\n   -->\n   \n   Thanks for opening a pull request!\n   \n   Could you open an issue for this pull request on JIRA?\n   https://issues.apache.org/jira/browse/ARROW\n   \n   Then could you also rename pull request title in the following format?\n   \n       ARROW-${JIRA_ID}: [${COMPONENT}] ${SUMMARY}\n   \n   See also:\n   \n     * [Other pull requests](https://github.com/apache/arrow/pulls/)\n     * [Contribution Guidelines - How to contribute patches](https://arrow.apache.org/docs/developers/contributing.html#how-to-contribute-patches)\n   \n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-01-13T00:10:00.383+0000",
                    "updated": "2021-01-13T00:10:00.383+0000",
                    "started": "2021-01-13T00:10:00.382+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "535109",
                    "issueId": "13337057"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13337057/worklog/535111",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jonkeane commented on pull request #9182:\nURL: https://github.com/apache/arrow/pull/9182#issuecomment-759117314\n\n\n   @github-actions crossbow submit test-r-version-compatibility\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-01-13T00:12:08.024+0000",
                    "updated": "2021-01-13T00:12:08.024+0000",
                    "started": "2021-01-13T00:12:08.024+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "535111",
                    "issueId": "13337057"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13337057/worklog/535113",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "github-actions[bot] commented on pull request #9182:\nURL: https://github.com/apache/arrow/pull/9182#issuecomment-759118483\n\n\n   https://issues.apache.org/jira/browse/ARROW-10386\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-01-13T00:15:34.771+0000",
                    "updated": "2021-01-13T00:15:34.771+0000",
                    "started": "2021-01-13T00:15:34.771+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "535113",
                    "issueId": "13337057"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13337057/worklog/535122",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jonkeane commented on pull request #9182:\nURL: https://github.com/apache/arrow/pull/9182#issuecomment-759131692\n\n\n   @github-actions crossbow submit test-r-version-compatibility\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-01-13T00:54:44.962+0000",
                    "updated": "2021-01-13T00:54:44.962+0000",
                    "started": "2021-01-13T00:54:44.962+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "535122",
                    "issueId": "13337057"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13337057/worklog/535123",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "github-actions[bot] commented on pull request #9182:\nURL: https://github.com/apache/arrow/pull/9182#issuecomment-759131979\n\n\n   Revision: d18222dca3587269aa2abc27ee9033cd352351f4\n   \n   Submitted crossbow builds: [ursa-labs/crossbow @ actions-878](https://github.com/ursa-labs/crossbow/branches/all?query=actions-878)\n   \n   |Task|Status|\n   |----|------|\n   |test-r-version-compatibility|[![Github Actions](https://github.com/ursa-labs/crossbow/workflows/Crossbow/badge.svg?branch=actions-878-github-test-r-version-compatibility)](https://github.com/ursa-labs/crossbow/actions?query=branch:actions-878-github-test-r-version-compatibility)|\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-01-13T00:55:39.018+0000",
                    "updated": "2021-01-13T00:55:39.018+0000",
                    "started": "2021-01-13T00:55:39.018+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "535123",
                    "issueId": "13337057"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13337057/worklog/535615",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nealrichardson commented on a change in pull request #9182:\nURL: https://github.com/apache/arrow/pull/9182#discussion_r556739981\n\n\n\n##########\nFile path: r/R/schema.R\n##########\n@@ -50,6 +50,34 @@\n #' - `$metadata`: returns the key-value metadata as a named list.\n #'    Modify or replace by assigning in (`sch$metadata <- new_metadata`).\n #'    All list elements are coerced to string.\n+#'\n+#' @section Metadata:\n+#'\n+#'   Attributes from the `data.frame` are saved alongside tables so that the\n\nReview comment:\n       \"When converting a `data.frame` to an Arrow `Table` or `RecordBatch`, \"\n\n##########\nFile path: r/R/schema.R\n##########\n@@ -50,6 +50,34 @@\n #' - `$metadata`: returns the key-value metadata as a named list.\n #'    Modify or replace by assigning in (`sch$metadata <- new_metadata`).\n #'    All list elements are coerced to string.\n+#'\n+#' @section Metadata:\n\nReview comment:\n       This section should either be called something like \"R Metadata\", or it should start by discussing the key-value metadata more generally.\n\n##########\nFile path: r/R/schema.R\n##########\n@@ -50,6 +50,34 @@\n #' - `$metadata`: returns the key-value metadata as a named list.\n #'    Modify or replace by assigning in (`sch$metadata <- new_metadata`).\n #'    All list elements are coerced to string.\n+#'\n+#' @section Metadata:\n+#'\n+#'   Attributes from the `data.frame` are saved alongside tables so that the\n+#'   object can be reconstructed faithfully in R (e.g. with `as.data.frame()`).\n+#'   This metadata can be both at the top-level of the `data.frame` (e.g.\n+#'   `attributes(df)`) or at the column (e.g. `attributes(df$col_a)`) or element\n+#'   level (e.g. `attributes(df[1, \"col_a\"])`). For example, this allows for\n+#'   storing `haven` columns in a table and being able to faithfully re-create\n+#'   them when pulled back into R. This metadata is separate from the schema\n+#'   (e.g. types of the columns) which is compatible with other Arrow clients.\n+#'   The R metadata is only read by R and is ignored by other clients (e.g.\n+#'   pyarrow which has its own custom metadata for things like Pandas metadata).\n\nReview comment:\n       I believe it is Pandas only that stores extra metadata, not pyarrow itself.\n\n##########\nFile path: r/R/schema.R\n##########\n@@ -50,6 +50,34 @@\n #' - `$metadata`: returns the key-value metadata as a named list.\n #'    Modify or replace by assigning in (`sch$metadata <- new_metadata`).\n #'    All list elements are coerced to string.\n+#'\n+#' @section Metadata:\n+#'\n+#'   Attributes from the `data.frame` are saved alongside tables so that the\n+#'   object can be reconstructed faithfully in R (e.g. with `as.data.frame()`).\n+#'   This metadata can be both at the top-level of the `data.frame` (e.g.\n+#'   `attributes(df)`) or at the column (e.g. `attributes(df$col_a)`) or element\n+#'   level (e.g. `attributes(df[1, \"col_a\"])`). For example, this allows for\n\nReview comment:\n       According to the code, this is only true for list columns (which makes sense because regular vectors can't have attributes on elements)\n\n##########\nFile path: r/R/schema.R\n##########\n@@ -50,6 +50,34 @@\n #' - `$metadata`: returns the key-value metadata as a named list.\n #'    Modify or replace by assigning in (`sch$metadata <- new_metadata`).\n #'    All list elements are coerced to string.\n+#'\n+#' @section Metadata:\n+#'\n+#'   Attributes from the `data.frame` are saved alongside tables so that the\n+#'   object can be reconstructed faithfully in R (e.g. with `as.data.frame()`).\n+#'   This metadata can be both at the top-level of the `data.frame` (e.g.\n+#'   `attributes(df)`) or at the column (e.g. `attributes(df$col_a)`) or element\n+#'   level (e.g. `attributes(df[1, \"col_a\"])`). For example, this allows for\n+#'   storing `haven` columns in a table and being able to faithfully re-create\n+#'   them when pulled back into R. This metadata is separate from the schema\n+#'   (e.g. types of the columns) which is compatible with other Arrow clients.\n+#'   The R metadata is only read by R and is ignored by other clients (e.g.\n+#'   pyarrow which has its own custom metadata for things like Pandas metadata).\n+#'   This metadata is stored (and can be accessed with) `table$metadata$r`.\n\nReview comment:\n       Shouldn't say table here, we're in the `Schema` docs.\r\n   \r\n   ```suggestion\r\n   #'   This metadata is stored in `$metadata$r`.\r\n   ```\n\n##########\nFile path: r/R/schema.R\n##########\n@@ -50,6 +50,34 @@\n #' - `$metadata`: returns the key-value metadata as a named list.\n #'    Modify or replace by assigning in (`sch$metadata <- new_metadata`).\n #'    All list elements are coerced to string.\n+#'\n+#' @section Metadata:\n+#'\n+#'   Attributes from the `data.frame` are saved alongside tables so that the\n+#'   object can be reconstructed faithfully in R (e.g. with `as.data.frame()`).\n+#'   This metadata can be both at the top-level of the `data.frame` (e.g.\n+#'   `attributes(df)`) or at the column (e.g. `attributes(df$col_a)`) or element\n+#'   level (e.g. `attributes(df[1, \"col_a\"])`). For example, this allows for\n+#'   storing `haven` columns in a table and being able to faithfully re-create\n+#'   them when pulled back into R. This metadata is separate from the schema\n+#'   (e.g. types of the columns) which is compatible with other Arrow clients.\n+#'   The R metadata is only read by R and is ignored by other clients (e.g.\n+#'   pyarrow which has its own custom metadata for things like Pandas metadata).\n+#'   This metadata is stored (and can be accessed with) `table$metadata$r`.\n+#'\n+#'   This metadata is saved by serializing R's attribute list structure to a\n\nReview comment:\n       \"Since Schema metadata keys and values must be strings, ...\"\n\n##########\nFile path: r/R/schema.R\n##########\n@@ -50,6 +50,34 @@\n #' - `$metadata`: returns the key-value metadata as a named list.\n #'    Modify or replace by assigning in (`sch$metadata <- new_metadata`).\n #'    All list elements are coerced to string.\n+#'\n+#' @section Metadata:\n+#'\n+#'   Attributes from the `data.frame` are saved alongside tables so that the\n+#'   object can be reconstructed faithfully in R (e.g. with `as.data.frame()`).\n+#'   This metadata can be both at the top-level of the `data.frame` (e.g.\n+#'   `attributes(df)`) or at the column (e.g. `attributes(df$col_a)`) or element\n+#'   level (e.g. `attributes(df[1, \"col_a\"])`). For example, this allows for\n+#'   storing `haven` columns in a table and being able to faithfully re-create\n+#'   them when pulled back into R. This metadata is separate from the schema\n+#'   (e.g. types of the columns) which is compatible with other Arrow clients.\n\nReview comment:\n       ```suggestion\r\n   #'   (column names and types), which is compatible with other Arrow clients.\r\n   ```\n\n##########\nFile path: r/R/schema.R\n##########\n@@ -50,6 +50,34 @@\n #' - `$metadata`: returns the key-value metadata as a named list.\n #'    Modify or replace by assigning in (`sch$metadata <- new_metadata`).\n #'    All list elements are coerced to string.\n+#'\n+#' @section Metadata:\n+#'\n+#'   Attributes from the `data.frame` are saved alongside tables so that the\n+#'   object can be reconstructed faithfully in R (e.g. with `as.data.frame()`).\n+#'   This metadata can be both at the top-level of the `data.frame` (e.g.\n+#'   `attributes(df)`) or at the column (e.g. `attributes(df$col_a)`) or element\n+#'   level (e.g. `attributes(df[1, \"col_a\"])`). For example, this allows for\n+#'   storing `haven` columns in a table and being able to faithfully re-create\n+#'   them when pulled back into R. This metadata is separate from the schema\n+#'   (e.g. types of the columns) which is compatible with other Arrow clients.\n+#'   The R metadata is only read by R and is ignored by other clients (e.g.\n+#'   pyarrow which has its own custom metadata for things like Pandas metadata).\n+#'   This metadata is stored (and can be accessed with) `table$metadata$r`.\n+#'\n+#'   This metadata is saved by serializing R's attribute list structure to a\n+#'   serialized string. Because of this, large amounts of metadata can quickly\n+#'   increase the size of tables (and therefore the size of tables written to\n+#'   parquet or feather files). If the (serialized) metadata exceeds 100Kbs in\n+#'   size, it is first compressed before saving. To disable this compression\n+#'   (e.g. for tables that are compatible with Arrow versions before 3.0.0 and\n+#'   include large amounts of metadata) you can set the option\n+#'   `arrow.compress_metadata` to `FALSE`.\n+#'\n+#'   One exception to storing all metadata: `readr`'s `problems` attribute if it\n\nReview comment:\n       I don't think this paragraph is necessary.\n\n##########\nFile path: r/R/schema.R\n##########\n@@ -50,6 +50,34 @@\n #' - `$metadata`: returns the key-value metadata as a named list.\n #'    Modify or replace by assigning in (`sch$metadata <- new_metadata`).\n #'    All list elements are coerced to string.\n+#'\n+#' @section Metadata:\n+#'\n+#'   Attributes from the `data.frame` are saved alongside tables so that the\n+#'   object can be reconstructed faithfully in R (e.g. with `as.data.frame()`).\n+#'   This metadata can be both at the top-level of the `data.frame` (e.g.\n+#'   `attributes(df)`) or at the column (e.g. `attributes(df$col_a)`) or element\n+#'   level (e.g. `attributes(df[1, \"col_a\"])`). For example, this allows for\n+#'   storing `haven` columns in a table and being able to faithfully re-create\n+#'   them when pulled back into R. This metadata is separate from the schema\n+#'   (e.g. types of the columns) which is compatible with other Arrow clients.\n+#'   The R metadata is only read by R and is ignored by other clients (e.g.\n+#'   pyarrow which has its own custom metadata for things like Pandas metadata).\n+#'   This metadata is stored (and can be accessed with) `table$metadata$r`.\n+#'\n+#'   This metadata is saved by serializing R's attribute list structure to a\n+#'   serialized string. Because of this, large amounts of metadata can quickly\n+#'   increase the size of tables (and therefore the size of tables written to\n+#'   parquet or feather files). If the (serialized) metadata exceeds 100Kbs in\n+#'   size, it is first compressed before saving. To disable this compression\n+#'   (e.g. for tables that are compatible with Arrow versions before 3.0.0 and\n+#'   include large amounts of metadata) you can set the option\n+#'   `arrow.compress_metadata` to `FALSE`.\n\nReview comment:\n       ```suggestion\r\n   #'   string. If the serialized metadata exceeds 100Kbs in size, by default\r\n   #'   it is compressed starting in version 3.0.0. To disable this compression\r\n   #'   (e.g. for tables that are compatible with Arrow versions before 3.0.0 and\r\n   #'   include large amounts of metadata), set the option\r\n   #'   `arrow.compress_metadata` to `FALSE`. Files with compressed metadata\r\n   #'   are readable by older versions of arrow, but the metadata is dropped.\r\n   ```\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-01-13T18:41:54.406+0000",
                    "updated": "2021-01-13T18:41:54.406+0000",
                    "started": "2021-01-13T18:41:54.405+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "535615",
                    "issueId": "13337057"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13337057/worklog/535664",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nealrichardson commented on pull request #8549:\nURL: https://github.com/apache/arrow/pull/8549#issuecomment-759688988\n\n\n   Closing in favor of #9182; relevant commits cherry-picked to there.\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-01-13T19:40:36.638+0000",
                    "updated": "2021-01-13T19:40:36.638+0000",
                    "started": "2021-01-13T19:40:36.637+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "535664",
                    "issueId": "13337057"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13337057/worklog/535665",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nealrichardson closed pull request #8549:\nURL: https://github.com/apache/arrow/pull/8549\n\n\n   \n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-01-13T19:40:39.980+0000",
                    "updated": "2021-01-13T19:40:39.980+0000",
                    "started": "2021-01-13T19:40:39.980+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "535665",
                    "issueId": "13337057"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13337057/worklog/535669",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nealrichardson commented on pull request #9182:\nURL: https://github.com/apache/arrow/pull/9182#issuecomment-759708496\n\n\n   Do we have any backwards compat testing with this feature? \n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-01-13T20:05:05.195+0000",
                    "updated": "2021-01-13T20:05:05.195+0000",
                    "started": "2021-01-13T20:05:05.195+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "535669",
                    "issueId": "13337057"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13337057/worklog/535672",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jonkeane commented on pull request #9182:\nURL: https://github.com/apache/arrow/pull/9182#issuecomment-759709484\n\n\n   No, but I'll make a Jira + work on adding one/some\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-01-13T20:07:05.837+0000",
                    "updated": "2021-01-13T20:07:05.837+0000",
                    "started": "2021-01-13T20:07:05.837+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "535672",
                    "issueId": "13337057"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13337057/worklog/535684",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nealrichardson commented on pull request #9182:\nURL: https://github.com/apache/arrow/pull/9182#issuecomment-759716475\n\n\n   Also this deserves a NEWS bullet, including a special mention of `sf` data.\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-01-13T20:21:08.577+0000",
                    "updated": "2021-01-13T20:21:08.577+0000",
                    "started": "2021-01-13T20:21:08.577+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "535684",
                    "issueId": "13337057"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13337057/worklog/535698",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nealrichardson commented on pull request #9182:\nURL: https://github.com/apache/arrow/pull/9182#issuecomment-759735475\n\n\n   > No, but I'll make a Jira + work on adding one/some\r\n   \r\n   TBH I think we need something in this PR since we're up against the release deadline. Don't need the full spectrum of feather/parquet/compression, just pick one, and make sure that we can read a data.frame, likely with a warning about invalid metadata.\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-01-13T20:58:09.685+0000",
                    "updated": "2021-01-13T20:58:09.685+0000",
                    "started": "2021-01-13T20:58:09.685+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "535698",
                    "issueId": "13337057"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13337057/worklog/535699",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jonkeane commented on pull request #9182:\nURL: https://github.com/apache/arrow/pull/9182#issuecomment-759736265\n\n\n   Oops, yeah I just realized I mis-read the notifications on this \u2014 I thought this had been merged already. I'll put them here and we can close the (now extraneous) ARROW-11241\r\n   \n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-01-13T20:59:44.745+0000",
                    "updated": "2021-01-13T20:59:44.745+0000",
                    "started": "2021-01-13T20:59:44.745+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "535699",
                    "issueId": "13337057"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13337057/worklog/535705",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jonkeane commented on pull request #9182:\nURL: https://github.com/apache/arrow/pull/9182#issuecomment-759742842\n\n\n   @github-actions crossbow submit test-r-version-compatibility\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2021-01-13T21:13:09.235+0000",
                    "updated": "2021-01-13T21:13:09.235+0000",
                    "started": "2021-01-13T21:13:09.234+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "535705",
                    "issueId": "13337057"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
            "id": "1",
            "description": "A problem which impairs or prevents the functions of the product.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
            "name": "Bug",
            "subtask": false,
            "avatarId": 21133
        },
        "timespent": 15600,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@28535880[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@2420afcd[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@392d0e16[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@18d28039[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@1512617c[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@58d24649[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@95ebefb[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@50124a1[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@39eacfc[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@493442c8[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@35618473[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@39c99a52[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 15600,
        "customfield_12312520": null,
        "customfield_12312521": "Mon Apr 26 13:21:42 UTC 2021",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2021-01-13T23:16:10.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-10386/watchers",
            "watchCount": 4,
            "isWatching": false
        },
        "created": "2020-10-24T19:15:53.000+0000",
        "updated": "2021-04-26T13:21:42.000+0000",
        "timeoriginalestimate": null,
        "description": "Hi all - thanks for the improvement addressed in ARROW-9271.\r\n\r\nIn arrow 2.0 spatial data (class sf) now retains metadata at column level, but still does not roundtrip correctly as metadata (attributes) are lost at the level of individual elements of the list-columns; at least I think that is the problem as that is where I can see changes in the metadata.) Is this something that is addressable?\r\n\r\nSee reprex below on what happens + what attributes exist at the element level.\r\n\r\nFWIW a workaround with spatial data using sf would be to convert to WKT before writing it out (sf::st_as_text()). It might be useful to note this somewhere in the docs.\r\n\r\nThis is using arrow 2.0 and sf 0.9-6.\r\n\r\nReproducible example:\r\n\r\n{code:R}\r\n\r\n library(arrow)\r\n #> \r\n #> Attaching package: 'arrow'\r\n #> The following object is masked from 'package:utils':\r\n #> \r\n #> timestamp\r\n library(sf)\r\n #> Linking to GEOS 3.8.1, GDAL 3.1.1, PROJ 6.3.1\r\n\r\nfname <- system.file(\"shape/nc.shp\", package=\"sf\")\r\n df_spatial <- st_read(fname)\r\n #> Reading layer `nc' from data source `/Users/petr/Library/R/4.0/library/sf/shape/nc.shp' using driver `ESRI Shapefile'\r\n #> Simple feature collection with 100 features and 14 fields\r\n #> geometry type: MULTIPOLYGON\r\n #> dimension: XY\r\n #> bbox: xmin: -84.32385 ymin: 33.88199 xmax: -75.45698 ymax: 36.58965\r\n #> geographic CRS: NAD27\r\n\r\nwrite_parquet(df_spatial, \"spatial.parquet\")\r\n roundtripped <- read_parquet(\"spatial.parquet\")\r\n roundtripped\r\n #> Simple feature collection with 100 features and 14 fields\r\n #> geometry type: MULTIPOLYGON\r\n #> dimension: arrow_list\r\n #> bbox: xmin: -84.32385 ymin: 33.88199 xmax: -75.45698 ymax: 36.58965\r\n #> geographic CRS: NAD27\r\n #> First 10 features:\r\n #> Error in vapply(lst, class, rep(NA_character_, 3)): values must be length 3,\r\n #> but FUN(X[[1]]) result is length 1\r\n\r\nattributes(roundtripped$geometry[[1]])\r\n #> $class\r\n #> [1] \"arrow_list\" \"vctrs_list_of\" \"vctrs_vctr\" \"list\" \r\n #> \r\n #> $ptype\r\n #> <list<double>[0]>\r\n\r\nattributes(df_spatial$geometry[[1]])\r\n #> $class\r\n #> [1] \"XY\" \"MULTIPOLYGON\" \"sfg\"\r\n{code}",
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "4h 20m",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 15600
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[R] List column class attributes not preserved in roundtrip",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": "Mac OS 10.15.7\r\nR 4.0.2\r\narrow 2.0\r\nsf 0.9-6",
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13337057/comment/17264482",
                    "id": "17264482",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=npr",
                        "name": "npr",
                        "key": "npr",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
                        },
                        "displayName": "Neal Richardson",
                        "active": true,
                        "timeZone": "America/Los_Angeles"
                    },
                    "body": "Issue resolved by pull request 9182\n[https://github.com/apache/arrow/pull/9182]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=npr",
                        "name": "npr",
                        "key": "npr",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34045",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34045",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34045",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34045"
                        },
                        "displayName": "Neal Richardson",
                        "active": true,
                        "timeZone": "America/Los_Angeles"
                    },
                    "created": "2021-01-13T23:16:10.637+0000",
                    "updated": "2021-01-13T23:16:10.637+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13337057/comment/17331326",
                    "id": "17331326",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=jaredlander",
                        "name": "jaredlander",
                        "key": "jaredlander",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=jaredlander&avatarId=45411",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jaredlander&avatarId=45411",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jaredlander&avatarId=45411",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jaredlander&avatarId=45411"
                        },
                        "displayName": "Jared Lander",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "Did this make it into 3.0.0? I just checked using R 4.0.5 with arrow 3.0.0 and when I write an sf object to parquet, then read it in, the geometry column comes back as a list column, not geometry. The class of the data.frame object is `\"tbl_df\" \"tbl\" \"data.frame\"` and the class of the geometry column is `\"arrow_list\" \"vctrs_list_of\" \"vctrs_vctr\" \"list\"`.",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=jaredlander",
                        "name": "jaredlander",
                        "key": "jaredlander",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=jaredlander&avatarId=45411",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jaredlander&avatarId=45411",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jaredlander&avatarId=45411",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jaredlander&avatarId=45411"
                        },
                        "displayName": "Jared Lander",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2021-04-24T21:41:02.817+0000",
                    "updated": "2021-04-24T21:41:02.817+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13337057/comment/17331532",
                    "id": "17331532",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=jonkeane",
                        "name": "jonkeane",
                        "key": "jonkeane",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34057",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34057",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34057",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34057"
                        },
                        "displayName": "Jonathan Keane",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "This fix was included in 3.0.0 so you shouldn't be seeing that same issue still. Do you have or could you make a file / data frame that isn't being preserving the column classes like it should?",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=jonkeane",
                        "name": "jonkeane",
                        "key": "jonkeane",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34057",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34057",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34057",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34057"
                        },
                        "displayName": "Jonathan Keane",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2021-04-25T13:58:15.906+0000",
                    "updated": "2021-04-25T13:58:15.906+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13337057/comment/17331615",
                    "id": "17331615",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=jaredlander",
                        "name": "jaredlander",
                        "key": "jaredlander",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=jaredlander&avatarId=45411",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jaredlander&avatarId=45411",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jaredlander&avatarId=45411",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jaredlander&avatarId=45411"
                        },
                        "displayName": "Jared Lander",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "Last night I had a great example code that showed the problem. Then today I ran it and there is no problem! Hopefully the problem was the aberration. But I had to abandon parquet anyway because writing and reading the files caused massive memory issues (I opened an issue for that).",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=jaredlander",
                        "name": "jaredlander",
                        "key": "jaredlander",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=jaredlander&avatarId=45411",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jaredlander&avatarId=45411",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jaredlander&avatarId=45411",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jaredlander&avatarId=45411"
                        },
                        "displayName": "Jared Lander",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2021-04-25T18:58:09.708+0000",
                    "updated": "2021-04-25T18:58:09.708+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13337057/comment/17331668",
                    "id": "17331668",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=jaredlander",
                        "name": "jaredlander",
                        "key": "jaredlander",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=jaredlander&avatarId=45411",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jaredlander&avatarId=45411",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jaredlander&avatarId=45411",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jaredlander&avatarId=45411"
                        },
                        "displayName": "Jared Lander",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "OK, I actually have recreated a similar issue. In the following code, I create an sf object and write it as a dataset to parquet files. I then call open_dataset() on the files.\r\n\r\nIf I collect() the dataset I get back an sf object, no problem.\r\n\r\nBut if I first filter() the dataset then collect() I get an error.\r\n{code:java}\r\nlibrary(sf)\r\nlibrary(arrow)\r\nlibrary(dplyr)\r\n\r\nn <- 10000\r\n\r\nfake <- tibble(\r\n    ID=seq(n),\r\n    Date=sample(seq(as.Date('2019-01-01'), as.Date('2021-04-01'), by=1), size=n, replace=TRUE),\r\n    x=runif(n=n, min=-170, max=170),\r\n    y=runif(n=n, min=-60, max=70),\r\n    text1=sample(x=state.name, size=n, replace=TRUE),\r\n    text2=sample(x=state.name, size=n, replace=TRUE),\r\n    text3=sample(x=state.division, size=n, replace=TRUE),\r\n    text4=sample(x=state.region, size=n, replace=TRUE),\r\n    text5=sample(x=state.abb, size=n, replace=TRUE),\r\n    num1=sample(x=state.center$x, size=n, replace=TRUE),\r\n    num2=sample(x=state.center$y, size=n, replace=TRUE),\r\n    num3=sample(x=state.area, size=n, replace=TRUE),\r\n    Rand1=rnorm(n=n),\r\n    Rand2=rnorm(n=n, mean=100, sd=3),\r\n    Rand3=rbinom(n=n, size=10, prob=0.4)\r\n)\r\n\r\n# make it into an sf object\r\nspat <- fake %>% \r\n    st_as_sf(coords=c('x', 'y'), remove=FALSE, crs = 4326)\r\n\r\nclass(spat)\r\nclass(spat$geometry)\r\n\r\n# create new columns for partitioning and write to disk\r\nspat %>% \r\n    mutate(Year=lubridate::year(Date), Month=lubridate::month(Date)) %>% \r\n    group_by(Year, Month) %>% \r\n    write_dataset('data/splits/', format='parquet')\r\n\r\nspat_in <- open_dataset('data/splits/')\r\n\r\nclass(spat_in)\r\n\r\n# it's an sf as expected\r\nspat_in %>% collect() %>% class()\r\nspat_in %>% collect() %>% pull(geometry) %>% class()\r\n\r\n# it even plots\r\nleaflet::leaflet() %>% \r\n    leaflet::addTiles() %>% \r\n    leafgl::addGlPoints(data=spat_in %>% collect())\r\n\r\n# but if we filter first\r\nspat_in %>% \r\n    filter(Year == 2020 & Month == 2) %>% \r\n    collect()\r\n\r\n# we get this error\r\nError in st_geometry.sf(x) : \r\n  attr(obj, \"sf_column\") does not point to a geometry column.\r\nDid you rename it, without setting st_geometry(obj) <- \"newname\"?\r\nIn addition: Warning message:\r\nInvalid metadata$r {code}",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=jaredlander",
                        "name": "jaredlander",
                        "key": "jaredlander",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=jaredlander&avatarId=45411",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jaredlander&avatarId=45411",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jaredlander&avatarId=45411",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jaredlander&avatarId=45411"
                        },
                        "displayName": "Jared Lander",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2021-04-26T01:12:30.788+0000",
                    "updated": "2021-04-26T01:12:30.788+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13337057/comment/17332299",
                    "id": "17332299",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=jonkeane",
                        "name": "jonkeane",
                        "key": "jonkeane",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34057",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34057",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34057",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34057"
                        },
                        "displayName": "Jonathan Keane",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "Ah ha! Thanks for that additional info. That does look separate (or possibly a place that we need to implement the same thing as we did for single files), I've created https://issues.apache.org/jira/browse/ARROW-12542 to track that. (and I'm looking into the memory ticket you submitted as well. ",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=jonkeane",
                        "name": "jonkeane",
                        "key": "jonkeane",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34057",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34057",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34057",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34057"
                        },
                        "displayName": "Jonathan Keane",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2021-04-26T13:21:42.033+0000",
                    "updated": "2021-04-26T13:21:42.033+0000"
                }
            ],
            "maxResults": 6,
            "total": 6,
            "startAt": 0
        },
        "customfield_12311820": "0|z0jz9k:",
        "customfield_12314139": null
    }
}