{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13329480",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13329480",
    "key": "ARROW-10099",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12345977",
                "id": "12345977",
                "description": "",
                "name": "2.0.0",
                "archived": false,
                "released": true,
                "releaseDate": "2020-10-19"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "name": "Major",
            "id": "3"
        },
        "labels": [
            "dataset",
            "dataset-dask-integration",
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=bkietz",
            "name": "bkietz",
            "key": "bkietz",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=bkietz&avatarId=37277",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bkietz&avatarId=37277",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bkietz&avatarId=37277",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bkietz&avatarId=37277"
            },
            "displayName": "Ben Kietzman",
            "active": true,
            "timeZone": "America/New_York"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12328935",
                "id": "12328935",
                "name": "C++"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=jorisvandenbossche",
            "name": "jorisvandenbossche",
            "key": "jorisvandenbossche",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
            },
            "displayName": "Joris Van den Bossche",
            "active": true,
            "timeZone": "Europe/Brussels"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=jorisvandenbossche",
            "name": "jorisvandenbossche",
            "key": "jorisvandenbossche",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
            },
            "displayName": "Joris Van den Bossche",
            "active": true,
            "timeZone": "Europe/Brussels"
        },
        "aggregateprogress": {
            "progress": 4200,
            "total": 4200,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 4200,
            "total": 4200,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-10099/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 7,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13329480/worklog/496108",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "bkietz opened a new pull request #8367:\nURL: https://github.com/apache/arrow/pull/8367\n\n\n   Removed cardinality considerations for inferring partition field types. There is now a boolean flag (`inspect_dictionary`, default false) which if set causes fields to be inferred as a dictionary encoded type instead of the corresponding value type.\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-10-06T18:55:06.800+0000",
                    "updated": "2020-10-06T18:55:06.800+0000",
                    "started": "2020-10-06T18:55:06.800+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "496108",
                    "issueId": "13329480"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13329480/worklog/496116",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "github-actions[bot] commented on pull request #8367:\nURL: https://github.com/apache/arrow/pull/8367#issuecomment-704490021\n\n\n   https://issues.apache.org/jira/browse/ARROW-10099\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-10-06T19:02:55.959+0000",
                    "updated": "2020-10-06T19:02:55.959+0000",
                    "started": "2020-10-06T19:02:55.959+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "496116",
                    "issueId": "13329480"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13329480/worklog/496572",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jorisvandenbossche commented on a change in pull request #8367:\nURL: https://github.com/apache/arrow/pull/8367#discussion_r500973567\n\n\n\n##########\nFile path: python/pyarrow/_dataset.pyx\n##########\n@@ -1321,38 +1321,36 @@ cdef class DirectoryPartitioning(Partitioning):\n         self.directory_partitioning = <CDirectoryPartitioning*> sp.get()\n \n     @staticmethod\n-    def discover(field_names, object max_partition_dictionary_size=0):\n+    def discover(field_names, inspect_dictionary=False):\n         \"\"\"\n         Discover a DirectoryPartitioning.\n \n         Parameters\n         ----------\n         field_names : list of str\n             The names to associate with the values from the subdirectory names.\n-        max_partition_dictionary_size : int or None, default 0\n-            The maximum number of unique values to consider for dictionary\n-            encoding. By default no field will be inferred as dictionary\n-            encoded. If None is provided dictionary encoding will be used for\n-            every string field.\n+        inspect_dictionary : bool, default False\n+            When inferring a schema for partition fields, yield dictionary\n+            encoded types instead of plain. This can be more efficient when\n\nReview comment:\n       ```suggestion\r\n               encoded types instead of plain types. This can be more efficient when\r\n   ```\n\n##########\nFile path: python/pyarrow/_dataset.pyx\n##########\n@@ -1321,38 +1321,36 @@ cdef class DirectoryPartitioning(Partitioning):\n         self.directory_partitioning = <CDirectoryPartitioning*> sp.get()\n \n     @staticmethod\n-    def discover(field_names, object max_partition_dictionary_size=0):\n+    def discover(field_names, inspect_dictionary=False):\n\nReview comment:\n       It might be useful to still accept `max_partition_dictionary_size=None/-1` for now, and if that is passed, set `inspect_dictionary` to True. \r\n   That would help a bit for dask to write a parquet reader that works both on pyarrow 1.0 and 2.0, on the short term.\n\n##########\nFile path: cpp/src/arrow/dataset/partition.h\n##########\n@@ -85,14 +85,11 @@ class ARROW_DS_EXPORT Partitioning {\n };\n \n struct PartitioningFactoryOptions {\n-  /// When inferring a schema for partition fields, string fields may be inferred as\n-  /// a dictionary type instead. This can be more efficient when materializing virtual\n-  /// columns. If the number of discovered unique values of a string field exceeds\n-  /// max_partition_dictionary_size, it will instead be inferred as a string.\n-  ///\n-  /// max_partition_dictionary_size = 0: No fields will be inferred as dictionary.\n-  /// max_partition_dictionary_size = -1: All fields will be inferred as dictionary.\n-  int max_partition_dictionary_size = 0;\n+  /// When inferring a schema for partition fields, yield dictionary encoded types\n+  /// instead of plain. This can be more efficient when materializing virtual\n+  /// columns, and Expressions parsed by the finished Partitioning will include\n+  /// dictionaries of all unique inspected values for each field.\n+  bool inspect_dictionary = false;\n\nReview comment:\n       Or maybe `use_dictionary` or `infer_dictionary` ?\r\n   The \"inspect\" is pointing to the fact that we inspect all paths to get the dictionary values? \r\n   \r\n   \n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-10-07T12:56:23.564+0000",
                    "updated": "2020-10-07T12:56:23.564+0000",
                    "started": "2020-10-07T12:56:23.564+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "496572",
                    "issueId": "13329480"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13329480/worklog/496632",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "bkietz commented on a change in pull request #8367:\nURL: https://github.com/apache/arrow/pull/8367#discussion_r501056321\n\n\n\n##########\nFile path: cpp/src/arrow/dataset/partition.h\n##########\n@@ -85,14 +85,11 @@ class ARROW_DS_EXPORT Partitioning {\n };\n \n struct PartitioningFactoryOptions {\n-  /// When inferring a schema for partition fields, string fields may be inferred as\n-  /// a dictionary type instead. This can be more efficient when materializing virtual\n-  /// columns. If the number of discovered unique values of a string field exceeds\n-  /// max_partition_dictionary_size, it will instead be inferred as a string.\n-  ///\n-  /// max_partition_dictionary_size = 0: No fields will be inferred as dictionary.\n-  /// max_partition_dictionary_size = -1: All fields will be inferred as dictionary.\n-  int max_partition_dictionary_size = 0;\n+  /// When inferring a schema for partition fields, yield dictionary encoded types\n+  /// instead of plain. This can be more efficient when materializing virtual\n+  /// columns, and Expressions parsed by the finished Partitioning will include\n+  /// dictionaries of all unique inspected values for each field.\n+  bool inspect_dictionary = false;\n\nReview comment:\n       I'll rename to `infer_dictionary`\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-10-07T14:25:44.201+0000",
                    "updated": "2020-10-07T14:25:44.201+0000",
                    "started": "2020-10-07T14:25:44.201+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "496632",
                    "issueId": "13329480"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13329480/worklog/496634",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "bkietz commented on a change in pull request #8367:\nURL: https://github.com/apache/arrow/pull/8367#discussion_r501056901\n\n\n\n##########\nFile path: python/pyarrow/_dataset.pyx\n##########\n@@ -1321,38 +1321,36 @@ cdef class DirectoryPartitioning(Partitioning):\n         self.directory_partitioning = <CDirectoryPartitioning*> sp.get()\n \n     @staticmethod\n-    def discover(field_names, object max_partition_dictionary_size=0):\n+    def discover(field_names, inspect_dictionary=False):\n\nReview comment:\n       Alright, I'll add that keyword back and document that it has been replaced\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-10-07T14:26:38.438+0000",
                    "updated": "2020-10-07T14:26:38.438+0000",
                    "started": "2020-10-07T14:26:38.437+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "496634",
                    "issueId": "13329480"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13329480/worklog/496679",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jorisvandenbossche commented on a change in pull request #8367:\nURL: https://github.com/apache/arrow/pull/8367#discussion_r501100412\n\n\n\n##########\nFile path: python/pyarrow/_dataset.pyx\n##########\n@@ -1403,34 +1412,42 @@ cdef class HivePartitioning(Partitioning):\n         self.hive_partitioning = <CHivePartitioning*> sp.get()\n \n     @staticmethod\n-    def discover(object max_partition_dictionary_size=0):\n+    def discover(infer_dictionary=False, max_partition_dictionary_size=0):\n         \"\"\"\n         Discover a HivePartitioning.\n \n-        Params\n-        ------\n-        max_partition_dictionary_size : int or None, default 0\n-            The maximum number of unique values to consider for dictionary\n-            encoding. By default no field will be inferred as dictionary\n-            encoded. If -1 is provided dictionary encoding will be used for\n-            every string field.\n+        Parameters\n+        ----------\n+        infer_dictionary : bool, default False\n+            When inferring a schema for partition fields, yield dictionary\n+            encoded types instead of plain. This can be more efficient when\n+            materializing virtual columns, and Expressions parsed by the\n+            finished Partitioning will include dictionaries of all unique\n+            inspected values for each field.\n+        max_partition_dictionary_size : int, default 0\n+            Synonymous with infer_dictionary for backwards compatibility with\n+            1.0: setting this to -1 or None is equivalent to passing\n+            infer_dictionary=True.\n \n         Returns\n         -------\n         PartitioningFactory\n             To be used in the FileSystemFactoryOptions.\n         \"\"\"\n         cdef:\n-            CPartitioningFactoryOptions options\n+            CPartitioningFactoryOptions c_options\n \n-        if max_partition_dictionary_size is None:\n-            max_partition_dictionary_size = -1\n+        if max_partition_dictionary_size in {-1, None}:\n+            infer_dictionary = True\n+        else if max_partition_dictionary_size != 0:\n\nReview comment:\n       ```suggestion\r\n           elif max_partition_dictionary_size != 0:\r\n   ```\n\n##########\nFile path: python/pyarrow/_dataset.pyx\n##########\n@@ -1321,38 +1321,47 @@ cdef class DirectoryPartitioning(Partitioning):\n         self.directory_partitioning = <CDirectoryPartitioning*> sp.get()\n \n     @staticmethod\n-    def discover(field_names, object max_partition_dictionary_size=0):\n+    def discover(field_names, infer_dictionary=False,\n+                 max_partition_dictionary_size=0):\n         \"\"\"\n         Discover a DirectoryPartitioning.\n \n         Parameters\n         ----------\n         field_names : list of str\n             The names to associate with the values from the subdirectory names.\n-        max_partition_dictionary_size : int or None, default 0\n-            The maximum number of unique values to consider for dictionary\n-            encoding. By default no field will be inferred as dictionary\n-            encoded. If None is provided dictionary encoding will be used for\n-            every string field.\n+        infer_dictionary : bool, default False\n+            When inferring a schema for partition fields, yield dictionary\n+            encoded types instead of plain types. This can be more efficient\n+            when materializing virtual columns, and Expressions parsed by the\n+            finished Partitioning will include dictionaries of all unique\n+            inspected values for each field.\n+        max_partition_dictionary_size : int, default 0\n+            Synonymous with infer_dictionary for backwards compatibility with\n+            1.0: setting this to -1 or None is equivalent to passing\n+            infer_dictionary=True.\n \n         Returns\n         -------\n         DirectoryPartitioningFactory\n             To be used in the FileSystemFactoryOptions.\n         \"\"\"\n         cdef:\n-            CPartitioningFactoryOptions options\n+            CPartitioningFactoryOptions c_options\n             vector[c_string] c_field_names\n \n-        if max_partition_dictionary_size is None:\n-            max_partition_dictionary_size = -1\n+        if max_partition_dictionary_size in {-1, None}:\n+            infer_dictionary = True\n+        else if max_partition_dictionary_size != 0:\n\nReview comment:\n       ```suggestion\r\n           elif max_partition_dictionary_size != 0:\r\n   ```\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-10-07T15:21:50.105+0000",
                    "updated": "2020-10-07T15:21:50.105+0000",
                    "started": "2020-10-07T15:21:50.104+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "496679",
                    "issueId": "13329480"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13329480/worklog/496932",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "bkietz closed pull request #8367:\nURL: https://github.com/apache/arrow/pull/8367\n\n\n   \n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-10-07T20:39:52.517+0000",
                    "updated": "2020-10-07T20:39:52.517+0000",
                    "started": "2020-10-07T20:39:52.516+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "496932",
                    "issueId": "13329480"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
            "id": "4",
            "description": "An improvement or enhancement to an existing feature or task.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
            "name": "Improvement",
            "subtask": false,
            "avatarId": 21140
        },
        "timespent": 4200,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@2d53b1ac[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@5ab5c0c9[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@1589ca8e[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@61cef37e[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@2955ddc8[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@32238c84[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@69a5edf4[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@7f66b6bd[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@785a8f04[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@56336b27[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@10bfe658[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@5aa669ac[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 4200,
        "customfield_12312520": null,
        "customfield_12312521": "Wed Oct 07 20:39:38 UTC 2020",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2020-10-07T20:39:38.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-10099/watchers",
            "watchCount": 1,
            "isWatching": false
        },
        "created": "2020-09-25T19:40:45.000+0000",
        "updated": "2020-10-07T20:39:53.000+0000",
        "timeoriginalestimate": null,
        "description": "In ARROW-8647, we added the option to indicate that you partition field columns should be dictionary encoded, but it currently does only do this for string type, and not for integer type (wiht the reasoning that for integers, it is not giving any memory efficiency gains to use dictionary encoding). \r\n\r\nIn dask, they have been using categorical dtypes for _all_ partition fields, also if they are integers. They would like to keep doing this (apart from memory efficiency, using categorical/dictionary type also gives information about all uniques values of the column, without having to calculate this), so it would be nice to enable this use case. \r\n\r\nSo I think we could either simply always dictionary encode also integers when {{max_partition_dictionary_size}} indicates partition fields should be dictionary encoded, or either have an additional option to indicate also integer partition fields should be encoded (if the other option indicates dictionary encoding should be used).\r\n\r\nBased on feedback from the dask PR using the dataset API at https://github.com/dask/dask/pull/6534#issuecomment-698723009\r\n\r\ncc [~rjzamora] [~bkietz]",
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "1h 10m",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 4200
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[C++][Dataset] Also allow integer partition fields to be dictionary encoded",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13329480/comment/17209852",
                    "id": "17209852",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=bkietz",
                        "name": "bkietz",
                        "key": "bkietz",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=bkietz&avatarId=37277",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bkietz&avatarId=37277",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bkietz&avatarId=37277",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bkietz&avatarId=37277"
                        },
                        "displayName": "Ben Kietzman",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "Issue resolved by pull request 8367\n[https://github.com/apache/arrow/pull/8367]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=bkietz",
                        "name": "bkietz",
                        "key": "bkietz",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=bkietz&avatarId=37277",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bkietz&avatarId=37277",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bkietz&avatarId=37277",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bkietz&avatarId=37277"
                        },
                        "displayName": "Ben Kietzman",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2020-10-07T20:39:38.112+0000",
                    "updated": "2020-10-07T20:39:38.112+0000"
                }
            ],
            "maxResults": 1,
            "total": 1,
            "startAt": 0
        },
        "customfield_12311820": "0|z0ixi0:",
        "customfield_12314139": null
    }
}