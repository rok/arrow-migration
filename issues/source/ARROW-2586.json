{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13159527",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13159527",
    "key": "ARROW-2586",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12342562",
                "id": "12342562",
                "description": "",
                "name": "0.10.0",
                "archived": false,
                "released": true,
                "releaseDate": "2018-08-06"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
            "name": "Blocker",
            "id": "1"
        },
        "labels": [
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=joshuastorck",
            "name": "joshuastorck",
            "key": "joshuastorck",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
            },
            "displayName": "Joshua Storck",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12328935",
                "id": "12328935",
                "name": "C++"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=joshuastorck",
            "name": "joshuastorck",
            "key": "joshuastorck",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
            },
            "displayName": "Joshua Storck",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=joshuastorck",
            "name": "joshuastorck",
            "key": "joshuastorck",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
            },
            "displayName": "Joshua Storck",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "aggregateprogress": {
            "progress": 3600,
            "total": 3600,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 3600,
            "total": 3600,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-2586/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 6,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13159527/worklog/102298",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "codecov-io commented on issue #2034: ARROW-2586: [C++] Changing the type of ListBuilder's and StructBuilder's children from unique_ptr to shared_ptr so that it can support deserialization from Parquet to Arrow with arbitrary nesting\nURL: https://github.com/apache/arrow/pull/2034#issuecomment-389326143\n \n \n   # [Codecov](https://codecov.io/gh/apache/arrow/pull/2034?src=pr&el=h1) Report\n   > Merging [#2034](https://codecov.io/gh/apache/arrow/pull/2034?src=pr&el=desc) into [master](https://codecov.io/gh/apache/arrow/commit/1d42efaf358bd01fb3fc4c5a9bdd5a7a22cd9f1a?src=pr&el=desc) will **increase** coverage by `0.04%`.\n   > The diff coverage is `100%`.\n   \n   [![Impacted file tree graph](https://codecov.io/gh/apache/arrow/pull/2034/graphs/tree.svg?token=LpTCFbqVT1&src=pr&width=650&height=150)](https://codecov.io/gh/apache/arrow/pull/2034?src=pr&el=tree)\n   \n   ```diff\n   @@            Coverage Diff             @@\n   ##           master    #2034      +/-   ##\n   ==========================================\n   + Coverage   87.42%   87.47%   +0.04%     \n   ==========================================\n     Files         189      178      -11     \n     Lines       29289    28593     -696     \n   ==========================================\n   - Hits        25607    25012     -595     \n   + Misses       3682     3581     -101\n   ```\n   \n   \n   | [Impacted Files](https://codecov.io/gh/apache/arrow/pull/2034?src=pr&el=tree) | Coverage \u0394 | |\n   |---|---|---|\n   | [cpp/src/arrow/builder.h](https://codecov.io/gh/apache/arrow/pull/2034/diff?src=pr&el=tree#diff-Y3BwL3NyYy9hcnJvdy9idWlsZGVyLmg=) | `91.71% <\u00f8> (\u00f8)` | :arrow_up: |\n   | [cpp/src/arrow/builder.cc](https://codecov.io/gh/apache/arrow/pull/2034/diff?src=pr&el=tree#diff-Y3BwL3NyYy9hcnJvdy9idWlsZGVyLmNj) | `81.67% <100%> (-0.05%)` | :arrow_down: |\n   | [cpp/src/arrow/util/io-util.cc](https://codecov.io/gh/apache/arrow/pull/2034/diff?src=pr&el=tree#diff-Y3BwL3NyYy9hcnJvdy91dGlsL2lvLXV0aWwuY2M=) | `82.83% <0%> (-3.26%)` | :arrow_down: |\n   | [cpp/src/arrow/compare.cc](https://codecov.io/gh/apache/arrow/pull/2034/diff?src=pr&el=tree#diff-Y3BwL3NyYy9hcnJvdy9jb21wYXJlLmNj) | `90.17% <0%> (-0.2%)` | :arrow_down: |\n   | [cpp/src/arrow/util/thread-pool.h](https://codecov.io/gh/apache/arrow/pull/2034/diff?src=pr&el=tree#diff-Y3BwL3NyYy9hcnJvdy91dGlsL3RocmVhZC1wb29sLmg=) | `92.3% <0%> (\u00f8)` | :arrow_up: |\n   | [cpp/src/arrow/array-test.cc](https://codecov.io/gh/apache/arrow/pull/2034/diff?src=pr&el=tree#diff-Y3BwL3NyYy9hcnJvdy9hcnJheS10ZXN0LmNj) | `100% <0%> (\u00f8)` | :arrow_up: |\n   | [cpp/src/arrow/array.h](https://codecov.io/gh/apache/arrow/pull/2034/diff?src=pr&el=tree#diff-Y3BwL3NyYy9hcnJvdy9hcnJheS5o) | `100% <0%> (\u00f8)` | :arrow_up: |\n   | [cpp/src/arrow/util/compression-test.cc](https://codecov.io/gh/apache/arrow/pull/2034/diff?src=pr&el=tree#diff-Y3BwL3NyYy9hcnJvdy91dGlsL2NvbXByZXNzaW9uLXRlc3QuY2M=) | `100% <0%> (\u00f8)` | :arrow_up: |\n   | [rust/src/bitmap.rs](https://codecov.io/gh/apache/arrow/pull/2034/diff?src=pr&el=tree#diff-cnVzdC9zcmMvYml0bWFwLnJz) | | |\n   | [rust/src/lib.rs](https://codecov.io/gh/apache/arrow/pull/2034/diff?src=pr&el=tree#diff-cnVzdC9zcmMvbGliLnJz) | | |\n   | ... and [14 more](https://codecov.io/gh/apache/arrow/pull/2034/diff?src=pr&el=tree-more) | |\n   \n   ------\n   \n   [Continue to review full report at Codecov](https://codecov.io/gh/apache/arrow/pull/2034?src=pr&el=continue).\n   > **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n   > `\u0394 = absolute <relative> (impact)`, `\u00f8 = not affected`, `? = missing data`\n   > Powered by [Codecov](https://codecov.io/gh/apache/arrow/pull/2034?src=pr&el=footer). Last update [1d42efa...b2e47b6](https://codecov.io/gh/apache/arrow/pull/2034?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n   \n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-05-15T21:55:53.140+0000",
                    "updated": "2018-05-15T21:55:53.140+0000",
                    "started": "2018-05-15T21:55:53.139+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "102298",
                    "issueId": "13159527"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13159527/worklog/102496",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pitrou commented on a change in pull request #2034: ARROW-2586: [C++] Changing the type of ListBuilder's and StructBuilder's children from unique_ptr to shared_ptr so that it can support deserialization from Parquet to Arrow with arbitrary nesting\nURL: https://github.com/apache/arrow/pull/2034#discussion_r188640990\n \n \n\n ##########\n File path: cpp/src/arrow/builder.cc\n ##########\n @@ -1279,14 +1279,15 @@ Status Decimal128Builder::FinishInternal(std::shared_ptr<ArrayData>* out) {\n // ----------------------------------------------------------------------\n // ListBuilder\n \n-ListBuilder::ListBuilder(MemoryPool* pool, std::unique_ptr<ArrayBuilder> value_builder,\n+ListBuilder::ListBuilder(MemoryPool* pool,\n+                         std::shared_ptr<ArrayBuilder> const& value_builder,\n \n Review comment:\n   Nit: we're using the `const PtrType&` spelling elsewhere, not `PtrType const&`.\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-05-16T14:14:19.920+0000",
                    "updated": "2018-05-16T14:14:19.920+0000",
                    "started": "2018-05-16T14:14:19.920+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "102496",
                    "issueId": "13159527"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13159527/worklog/103100",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on issue #2034: ARROW-2586: [C++] Changing the type of ListBuilder's and StructBuilder's children from unique_ptr to shared_ptr so that it can support deserialization from Parquet to Arrow with arbitrary nesting\nURL: https://github.com/apache/arrow/pull/2034#issuecomment-390002267\n \n \n   I'm fine with changing to `shared_ptr` for the extra flexibility -- I think this was the case in the past, and at some point I changed to `unique_ptr`. Users will need to be mindful about referencing child builders inside loops, but if performance is an issue they will probably want to grab raw pointers to the child builders and store them somewhere else. \n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-05-17T20:34:54.233+0000",
                    "updated": "2018-05-17T20:34:54.233+0000",
                    "started": "2018-05-17T20:34:54.232+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "103100",
                    "issueId": "13159527"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13159527/worklog/124723",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on issue #2034: ARROW-2586: [C++] Changing the type of ListBuilder's and StructBuilder's children from unique_ptr to shared_ptr so that it can support deserialization from Parquet to Arrow with arbitrary nesting\nURL: https://github.com/apache/arrow/pull/2034#issuecomment-406119374\n \n \n   I added this to 0.10.0. I will rebase and make sure it doesn't cause any issues\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-07-19T00:54:35.022+0000",
                    "updated": "2018-07-19T00:54:35.022+0000",
                    "started": "2018-07-19T00:54:35.022+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "124723",
                    "issueId": "13159527"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13159527/worklog/126358",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "codecov-io edited a comment on issue #2034: ARROW-2586: [C++] Changing the type of ListBuilder's and StructBuilder's children from unique_ptr to shared_ptr so that it can support deserialization from Parquet to Arrow with arbitrary nesting\nURL: https://github.com/apache/arrow/pull/2034#issuecomment-389326143\n \n \n   # [Codecov](https://codecov.io/gh/apache/arrow/pull/2034?src=pr&el=h1) Report\n   > Merging [#2034](https://codecov.io/gh/apache/arrow/pull/2034?src=pr&el=desc) into [master](https://codecov.io/gh/apache/arrow/commit/491114bd284cecd542c4ae341178e13a48a815de?src=pr&el=desc) will **increase** coverage by `2.36%`.\n   > The diff coverage is `100%`.\n   \n   [![Impacted file tree graph](https://codecov.io/gh/apache/arrow/pull/2034/graphs/tree.svg?token=LpTCFbqVT1&src=pr&width=650&height=150)](https://codecov.io/gh/apache/arrow/pull/2034?src=pr&el=tree)\n   \n   ```diff\n   @@            Coverage Diff             @@\n   ##           master    #2034      +/-   ##\n   ==========================================\n   + Coverage   84.39%   86.75%   +2.36%     \n   ==========================================\n     Files         293      237      -56     \n     Lines       44789    42046    -2743     \n   ==========================================\n   - Hits        37799    36479    -1320     \n   + Misses       6963     5567    -1396     \n   + Partials       27        0      -27\n   ```\n   \n   \n   | [Impacted Files](https://codecov.io/gh/apache/arrow/pull/2034?src=pr&el=tree) | Coverage \u0394 | |\n   |---|---|---|\n   | [cpp/src/arrow/builder.h](https://codecov.io/gh/apache/arrow/pull/2034/diff?src=pr&el=tree#diff-Y3BwL3NyYy9hcnJvdy9idWlsZGVyLmg=) | `97.26% <\u00f8> (\u00f8)` | :arrow_up: |\n   | [cpp/src/arrow/builder.cc](https://codecov.io/gh/apache/arrow/pull/2034/diff?src=pr&el=tree#diff-Y3BwL3NyYy9hcnJvdy9idWlsZGVyLmNj) | `79.71% <100%> (-0.05%)` | :arrow_down: |\n   | [go/arrow/array/bufferbuilder.go](https://codecov.io/gh/apache/arrow/pull/2034/diff?src=pr&el=tree#diff-Z28vYXJyb3cvYXJyYXkvYnVmZmVyYnVpbGRlci5nbw==) | | |\n   | [rust/src/builder.rs](https://codecov.io/gh/apache/arrow/pull/2034/diff?src=pr&el=tree#diff-cnVzdC9zcmMvYnVpbGRlci5ycw==) | | |\n   | [go/arrow/array/numericbuilder.gen.go](https://codecov.io/gh/apache/arrow/pull/2034/diff?src=pr&el=tree#diff-Z28vYXJyb3cvYXJyYXkvbnVtZXJpY2J1aWxkZXIuZ2VuLmdv) | | |\n   | [go/arrow/math/int64\\_sse4\\_amd64.go](https://codecov.io/gh/apache/arrow/pull/2034/diff?src=pr&el=tree#diff-Z28vYXJyb3cvbWF0aC9pbnQ2NF9zc2U0X2FtZDY0Lmdv) | | |\n   | [go/arrow/math/uint64.go](https://codecov.io/gh/apache/arrow/pull/2034/diff?src=pr&el=tree#diff-Z28vYXJyb3cvbWF0aC91aW50NjQuZ28=) | | |\n   | [go/arrow/memory/go\\_allocator.go](https://codecov.io/gh/apache/arrow/pull/2034/diff?src=pr&el=tree#diff-Z28vYXJyb3cvbWVtb3J5L2dvX2FsbG9jYXRvci5nbw==) | | |\n   | [go/arrow/datatype\\_numeric.gen.go](https://codecov.io/gh/apache/arrow/pull/2034/diff?src=pr&el=tree#diff-Z28vYXJyb3cvZGF0YXR5cGVfbnVtZXJpYy5nZW4uZ28=) | | |\n   | [go/arrow/array/bufferbuilder\\_byte.go](https://codecov.io/gh/apache/arrow/pull/2034/diff?src=pr&el=tree#diff-Z28vYXJyb3cvYXJyYXkvYnVmZmVyYnVpbGRlcl9ieXRlLmdv) | | |\n   | ... and [49 more](https://codecov.io/gh/apache/arrow/pull/2034/diff?src=pr&el=tree-more) | |\n   \n   ------\n   \n   [Continue to review full report at Codecov](https://codecov.io/gh/apache/arrow/pull/2034?src=pr&el=continue).\n   > **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n   > `\u0394 = absolute <relative> (impact)`, `\u00f8 = not affected`, `? = missing data`\n   > Powered by [Codecov](https://codecov.io/gh/apache/arrow/pull/2034?src=pr&el=footer). Last update [491114b...d5aac22](https://codecov.io/gh/apache/arrow/pull/2034?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n   \n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-07-23T23:56:28.685+0000",
                    "updated": "2018-07-23T23:56:28.685+0000",
                    "started": "2018-07-23T23:56:28.685+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "126358",
                    "issueId": "13159527"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13159527/worklog/126379",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm closed pull request #2034: ARROW-2586: [C++] Changing the type of ListBuilder's and StructBuilder's children from unique_ptr to shared_ptr so that it can support deserialization from Parquet to Arrow with arbitrary nesting\nURL: https://github.com/apache/arrow/pull/2034\n \n \n   \n\nThis is a PR merged from a forked repository.\nAs GitHub hides the original diff on merge, it is displayed below for\nthe sake of provenance:\n\nAs this is a foreign pull request (from a fork), the diff is supplied\nbelow (as it won't show otherwise due to GitHub magic):\n\ndiff --git a/cpp/src/arrow/builder.cc b/cpp/src/arrow/builder.cc\nindex 152f1fc260..b81d914927 100644\n--- a/cpp/src/arrow/builder.cc\n+++ b/cpp/src/arrow/builder.cc\n@@ -1273,14 +1273,15 @@ Status Decimal128Builder::FinishInternal(std::shared_ptr<ArrayData>* out) {\n // ----------------------------------------------------------------------\n // ListBuilder\n \n-ListBuilder::ListBuilder(MemoryPool* pool, std::unique_ptr<ArrayBuilder> value_builder,\n+ListBuilder::ListBuilder(MemoryPool* pool,\n+                         std::shared_ptr<ArrayBuilder> const& value_builder,\n                          const std::shared_ptr<DataType>& type)\n     : ArrayBuilder(type ? type\n                         : std::static_pointer_cast<DataType>(\n                               std::make_shared<ListType>(value_builder->type())),\n                    pool),\n       offsets_builder_(pool),\n-      value_builder_(std::move(value_builder)) {}\n+      value_builder_(value_builder) {}\n \n Status ListBuilder::AppendValues(const int32_t* offsets, int64_t length,\n                                  const uint8_t* valid_bytes) {\n@@ -1620,10 +1621,8 @@ const uint8_t* FixedSizeBinaryBuilder::GetValue(int64_t i) const {\n // Struct\n \n StructBuilder::StructBuilder(const std::shared_ptr<DataType>& type, MemoryPool* pool,\n-                             std::vector<std::unique_ptr<ArrayBuilder>>&& field_builders)\n-    : ArrayBuilder(type, pool) {\n-  field_builders_ = std::move(field_builders);\n-}\n+                             std::vector<std::shared_ptr<ArrayBuilder>>&& field_builders)\n+    : ArrayBuilder(type, pool), field_builders_(std::move(field_builders)) {}\n \n void StructBuilder::Reset() {\n   ArrayBuilder::Reset();\n@@ -1700,7 +1699,7 @@ Status MakeBuilder(MemoryPool* pool, const std::shared_ptr<DataType>& type,\n \n     case Type::STRUCT: {\n       const std::vector<std::shared_ptr<Field>>& fields = type->children();\n-      std::vector<std::unique_ptr<ArrayBuilder>> values_builder;\n+      std::vector<std::shared_ptr<ArrayBuilder>> values_builder;\n \n       for (auto it : fields) {\n         std::unique_ptr<ArrayBuilder> builder;\ndiff --git a/cpp/src/arrow/builder.h b/cpp/src/arrow/builder.h\nindex 06093a2ea3..0d60dbd49c 100644\n--- a/cpp/src/arrow/builder.h\n+++ b/cpp/src/arrow/builder.h\n@@ -658,6 +658,7 @@ class ARROW_EXPORT AdaptiveIntBuilder : public internal::AdaptiveIntBuilderBase\n \n class ARROW_EXPORT BooleanBuilder : public ArrayBuilder {\n  public:\n+  using value_type = bool;\n   explicit BooleanBuilder(MemoryPool* pool ARROW_MEMORY_POOL_DEFAULT);\n \n   explicit BooleanBuilder(const std::shared_ptr<DataType>& type, MemoryPool* pool);\n@@ -860,7 +861,7 @@ class ARROW_EXPORT ListBuilder : public ArrayBuilder {\n  public:\n   /// Use this constructor to incrementally build the value array along with offsets and\n   /// null bitmap.\n-  ListBuilder(MemoryPool* pool, std::unique_ptr<ArrayBuilder> value_builder,\n+  ListBuilder(MemoryPool* pool, std::shared_ptr<ArrayBuilder> const& value_builder,\n               const std::shared_ptr<DataType>& type = NULLPTR);\n \n   Status Init(int64_t elements) override;\n@@ -891,7 +892,7 @@ class ARROW_EXPORT ListBuilder : public ArrayBuilder {\n \n  protected:\n   TypedBufferBuilder<int32_t> offsets_builder_;\n-  std::unique_ptr<ArrayBuilder> value_builder_;\n+  std::shared_ptr<ArrayBuilder> value_builder_;\n   std::shared_ptr<Array> values_;\n \n   Status AppendNextOffset();\n@@ -1065,7 +1066,7 @@ using DecimalBuilder = Decimal128Builder;\n class ARROW_EXPORT StructBuilder : public ArrayBuilder {\n  public:\n   StructBuilder(const std::shared_ptr<DataType>& type, MemoryPool* pool,\n-                std::vector<std::unique_ptr<ArrayBuilder>>&& field_builders);\n+                std::vector<std::shared_ptr<ArrayBuilder>>&& field_builders);\n \n   Status FinishInternal(std::shared_ptr<ArrayData>* out) override;\n \n@@ -1101,7 +1102,7 @@ class ARROW_EXPORT StructBuilder : public ArrayBuilder {\n   int num_fields() const { return static_cast<int>(field_builders_.size()); }\n \n  protected:\n-  std::vector<std::unique_ptr<ArrayBuilder>> field_builders_;\n+  std::vector<std::shared_ptr<ArrayBuilder>> field_builders_;\n };\n \n // ----------------------------------------------------------------------\n\n\n \n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-07-24T01:20:03.997+0000",
                    "updated": "2018-07-24T01:20:03.997+0000",
                    "started": "2018-07-24T01:20:03.997+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "126379",
                    "issueId": "13159527"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
            "id": "4",
            "description": "An improvement or enhancement to an existing feature or task.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
            "name": "Improvement",
            "subtask": false,
            "avatarId": 21140
        },
        "timespent": 3600,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@7cc53a8f[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@5c4ff764[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@8b5be4f[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@2b629cea[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@382cd81d[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@6abe99a2[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@4f5c057c[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@70e645b1[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@2ed49780[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@30b97871[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@1f61fcff[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@5de8f96f[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 3600,
        "customfield_12312520": null,
        "customfield_12312521": "Tue Jul 24 01:19:58 UTC 2018",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2018-07-24T01:19:58.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-2586/watchers",
            "watchCount": 1,
            "isWatching": false
        },
        "created": "2018-05-15T20:54:00.000+0000",
        "updated": "2018-07-24T03:25:40.000+0000",
        "timeoriginalestimate": null,
        "description": "This is needed for changes in this PR that make it possible to deserialize arbitrary nested structures in parquet (ARROW-1644): https://github.com/apache/parquet-cpp/pull/462 ",
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "1h",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 3600
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[C++] Make child builders of ListBuilder and StructBuilder shared_ptr's",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13159527/comment/16553657",
                    "id": "16553657",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "Issue resolved by pull request 2034\n[https://github.com/apache/arrow/pull/2034]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wesm",
                        "name": "wesm",
                        "key": "wesmckinn",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=wesmckinn&avatarId=29931",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wesmckinn&avatarId=29931",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wesmckinn&avatarId=29931",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wesmckinn&avatarId=29931"
                        },
                        "displayName": "Wes McKinney",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2018-07-24T01:19:58.061+0000",
                    "updated": "2018-07-24T01:19:58.061+0000"
                }
            ],
            "maxResults": 1,
            "total": 1,
            "startAt": 0
        },
        "customfield_12311820": "0|i3tqxj:",
        "customfield_12314139": null
    }
}