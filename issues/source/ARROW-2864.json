{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13172549",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13172549",
    "key": "ARROW-2864",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12342562",
                "id": "12342562",
                "description": "",
                "name": "0.10.0",
                "archived": false,
                "released": true,
                "releaseDate": "2018-08-06"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "name": "Major",
            "id": "3"
        },
        "labels": [
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=guoyuhong85",
            "name": "guoyuhong85",
            "key": "guoyuhong85",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=guoyuhong85&avatarId=36251",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=guoyuhong85&avatarId=36251",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=guoyuhong85&avatarId=36251",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=guoyuhong85&avatarId=36251"
            },
            "displayName": "Yuhong Guo",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12332956",
                "id": "12332956",
                "name": "C++ - Plasma"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=guoyuhong85",
            "name": "guoyuhong85",
            "key": "guoyuhong85",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=guoyuhong85&avatarId=36251",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=guoyuhong85&avatarId=36251",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=guoyuhong85&avatarId=36251",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=guoyuhong85&avatarId=36251"
            },
            "displayName": "Yuhong Guo",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=guoyuhong85",
            "name": "guoyuhong85",
            "key": "guoyuhong85",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=guoyuhong85&avatarId=36251",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=guoyuhong85&avatarId=36251",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=guoyuhong85&avatarId=36251",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=guoyuhong85&avatarId=36251"
            },
            "displayName": "Yuhong Guo",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "aggregateprogress": {
            "progress": 8400,
            "total": 8400,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 8400,
            "total": 8400,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-2864/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 14,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13172549/worklog/123909",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "guoyuhong commented on issue #2273: ARROW-2864: [Plasma] Add deletion cache to delete objects later when they are not in use.\nURL: https://github.com/apache/arrow/pull/2273#issuecomment-405449070\n \n \n   JIRA issue created: https://issues.apache.org/jira/browse/ARROW-2864\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-07-17T03:34:12.484+0000",
                    "updated": "2018-07-17T03:34:12.484+0000",
                    "started": "2018-07-17T03:34:12.483+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "123909",
                    "issueId": "13172549"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13172549/worklog/124287",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pcmoritz commented on a change in pull request #2273: ARROW-2864: [Plasma] Add deletion cache to delete objects later when they are not in use.\nURL: https://github.com/apache/arrow/pull/2273#discussion_r203232175\n \n \n\n ##########\n File path: cpp/src/plasma/test/client_tests.cc\n ##########\n @@ -202,14 +207,28 @@ TEST_F(TestPlasmaStore, DeleteObjectsTest) {\n   ARROW_CHECK_OK(client_.Seal(object_id1));\n   ARROW_CHECK_OK(client_.Create(object_id2, data_size, metadata, metadata_size, &data));\n   ARROW_CHECK_OK(client_.Seal(object_id2));\n-  // Objects are in use.\n-  result = client_.Delete(std::vector<ObjectID>{object_id1, object_id2});\n-  // TODO: Guarantee that the in-use object will be deleted when it is released.\n-  ARROW_CHECK_OK(result);\n-  // Avoid race condition of Plasma Manager waiting for notification.\n+  // Release the ref count of Create function.\n   ARROW_CHECK_OK(client_.Release(object_id1));\n   ARROW_CHECK_OK(client_.Release(object_id2));\n-  ARROW_CHECK_OK(client_.Delete(std::vector<ObjectID>{object_id1, object_id2}));\n+  // Increase the ref count by calling Get.\n+  std::vector<ObjectBuffer> object_buffers;\n+  ARROW_CHECK_OK(client_.Get({object_id1, object_id2}, 0, &object_buffers));\n+  // Objects are still in use.\n+  result = client_.Delete(std::vector<ObjectID>{object_id1, object_id2});\n+  ARROW_CHECK_OK(result);\n+  // The object is occupies and it should not be deleted right now.\n+  bool has_object = false;\n+  ARROW_CHECK_OK(client_.Contains(object_id1, &has_object));\n+  ASSERT_TRUE(has_object);\n+  ARROW_CHECK_OK(client_.Contains(object_id2, &has_object));\n+  ASSERT_TRUE(has_object);\n+  // Decrease the ref count by deleting the ObjectBuffer.\n+  object_buffers.clear();\n+  // The two objects will not be deleted since Get function increased the ref count.\n \n Review comment:\n   Do you mean objects are now deleted in the comment here?\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-07-18T01:57:45.236+0000",
                    "updated": "2018-07-18T01:57:45.236+0000",
                    "started": "2018-07-18T01:57:45.236+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "124287",
                    "issueId": "13172549"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13172549/worklog/124298",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "guoyuhong commented on a change in pull request #2273: ARROW-2864: [Plasma] Add deletion cache to delete objects later when they are not in use.\nURL: https://github.com/apache/arrow/pull/2273#discussion_r203239300\n \n \n\n ##########\n File path: cpp/src/plasma/test/client_tests.cc\n ##########\n @@ -202,14 +207,28 @@ TEST_F(TestPlasmaStore, DeleteObjectsTest) {\n   ARROW_CHECK_OK(client_.Seal(object_id1));\n   ARROW_CHECK_OK(client_.Create(object_id2, data_size, metadata, metadata_size, &data));\n   ARROW_CHECK_OK(client_.Seal(object_id2));\n-  // Objects are in use.\n-  result = client_.Delete(std::vector<ObjectID>{object_id1, object_id2});\n-  // TODO: Guarantee that the in-use object will be deleted when it is released.\n-  ARROW_CHECK_OK(result);\n-  // Avoid race condition of Plasma Manager waiting for notification.\n+  // Release the ref count of Create function.\n   ARROW_CHECK_OK(client_.Release(object_id1));\n   ARROW_CHECK_OK(client_.Release(object_id2));\n-  ARROW_CHECK_OK(client_.Delete(std::vector<ObjectID>{object_id1, object_id2}));\n+  // Increase the ref count by calling Get.\n+  std::vector<ObjectBuffer> object_buffers;\n+  ARROW_CHECK_OK(client_.Get({object_id1, object_id2}, 0, &object_buffers));\n+  // Objects are still in use.\n+  result = client_.Delete(std::vector<ObjectID>{object_id1, object_id2});\n+  ARROW_CHECK_OK(result);\n+  // The object is occupies and it should not be deleted right now.\n+  bool has_object = false;\n+  ARROW_CHECK_OK(client_.Contains(object_id1, &has_object));\n+  ASSERT_TRUE(has_object);\n+  ARROW_CHECK_OK(client_.Contains(object_id2, &has_object));\n+  ASSERT_TRUE(has_object);\n+  // Decrease the ref count by deleting the ObjectBuffer.\n+  object_buffers.clear();\n+  // The two objects will not be deleted since Get function increased the ref count.\n \n Review comment:\n   Yes, when PlasmaBuffer (in ObjectBuffer) is destructed, it will call Release function. And in Release function, if the ref count is down to 0, it will call Delete function.\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-07-18T03:00:56.656+0000",
                    "updated": "2018-07-18T03:00:56.656+0000",
                    "started": "2018-07-18T03:00:56.656+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "124298",
                    "issueId": "13172549"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13172549/worklog/124299",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "guoyuhong commented on issue #2273: ARROW-2864: [Plasma] Add deletion cache to delete objects later when they are not in use.\nURL: https://github.com/apache/arrow/pull/2273#issuecomment-405795782\n \n \n   Thanks for your time~ This code change will check the Release function to see whether an object is not in use and this object will be deleted once it is free and it was in the list of Delete function. One obscure part is that the destruction function of PlasmaBuffer will call Release and some object will be deleted after PlasmaBuffer is destructed.\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-07-18T03:16:06.138+0000",
                    "updated": "2018-07-18T03:16:06.138+0000",
                    "started": "2018-07-18T03:16:06.137+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "124299",
                    "issueId": "13172549"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13172549/worklog/124300",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pcmoritz commented on a change in pull request #2273: ARROW-2864: [Plasma] Add deletion cache to delete objects later when they are not in use.\nURL: https://github.com/apache/arrow/pull/2273#discussion_r203241226\n \n \n\n ##########\n File path: cpp/src/plasma/test/client_tests.cc\n ##########\n @@ -202,14 +207,28 @@ TEST_F(TestPlasmaStore, DeleteObjectsTest) {\n   ARROW_CHECK_OK(client_.Seal(object_id1));\n   ARROW_CHECK_OK(client_.Create(object_id2, data_size, metadata, metadata_size, &data));\n   ARROW_CHECK_OK(client_.Seal(object_id2));\n-  // Objects are in use.\n-  result = client_.Delete(std::vector<ObjectID>{object_id1, object_id2});\n-  // TODO: Guarantee that the in-use object will be deleted when it is released.\n-  ARROW_CHECK_OK(result);\n-  // Avoid race condition of Plasma Manager waiting for notification.\n+  // Release the ref count of Create function.\n   ARROW_CHECK_OK(client_.Release(object_id1));\n   ARROW_CHECK_OK(client_.Release(object_id2));\n-  ARROW_CHECK_OK(client_.Delete(std::vector<ObjectID>{object_id1, object_id2}));\n+  // Increase the ref count by calling Get.\n+  std::vector<ObjectBuffer> object_buffers;\n+  ARROW_CHECK_OK(client_.Get({object_id1, object_id2}, 0, &object_buffers));\n+  // Objects are still in use.\n+  result = client_.Delete(std::vector<ObjectID>{object_id1, object_id2});\n+  ARROW_CHECK_OK(result);\n+  // The object is occupies and it should not be deleted right now.\n+  bool has_object = false;\n+  ARROW_CHECK_OK(client_.Contains(object_id1, &has_object));\n+  ASSERT_TRUE(has_object);\n+  ARROW_CHECK_OK(client_.Contains(object_id2, &has_object));\n+  ASSERT_TRUE(has_object);\n+  // Decrease the ref count by deleting the ObjectBuffer.\n+  object_buffers.clear();\n+  // The two objects will not be deleted since Get function increased the ref count.\n \n Review comment:\n   Ok, so maybe \"After decreasing the ref count, the objects are now deleted\" is a better comment then?\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-07-18T03:21:02.141+0000",
                    "updated": "2018-07-18T03:21:02.141+0000",
                    "started": "2018-07-18T03:21:02.140+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "124300",
                    "issueId": "13172549"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13172549/worklog/124309",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "guoyuhong commented on a change in pull request #2273: ARROW-2864: [Plasma] Add deletion cache to delete objects later when they are not in use.\nURL: https://github.com/apache/arrow/pull/2273#discussion_r203242560\n \n \n\n ##########\n File path: cpp/src/plasma/test/client_tests.cc\n ##########\n @@ -202,14 +207,28 @@ TEST_F(TestPlasmaStore, DeleteObjectsTest) {\n   ARROW_CHECK_OK(client_.Seal(object_id1));\n   ARROW_CHECK_OK(client_.Create(object_id2, data_size, metadata, metadata_size, &data));\n   ARROW_CHECK_OK(client_.Seal(object_id2));\n-  // Objects are in use.\n-  result = client_.Delete(std::vector<ObjectID>{object_id1, object_id2});\n-  // TODO: Guarantee that the in-use object will be deleted when it is released.\n-  ARROW_CHECK_OK(result);\n-  // Avoid race condition of Plasma Manager waiting for notification.\n+  // Release the ref count of Create function.\n   ARROW_CHECK_OK(client_.Release(object_id1));\n   ARROW_CHECK_OK(client_.Release(object_id2));\n-  ARROW_CHECK_OK(client_.Delete(std::vector<ObjectID>{object_id1, object_id2}));\n+  // Increase the ref count by calling Get.\n+  std::vector<ObjectBuffer> object_buffers;\n+  ARROW_CHECK_OK(client_.Get({object_id1, object_id2}, 0, &object_buffers));\n+  // Objects are still in use.\n+  result = client_.Delete(std::vector<ObjectID>{object_id1, object_id2});\n+  ARROW_CHECK_OK(result);\n+  // The object is occupies and it should not be deleted right now.\n+  bool has_object = false;\n+  ARROW_CHECK_OK(client_.Contains(object_id1, &has_object));\n+  ASSERT_TRUE(has_object);\n+  ARROW_CHECK_OK(client_.Contains(object_id2, &has_object));\n+  ASSERT_TRUE(has_object);\n+  // Decrease the ref count by deleting the ObjectBuffer.\n+  object_buffers.clear();\n+  // The two objects will not be deleted since Get function increased the ref count.\n \n Review comment:\n   Yes, of course.\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-07-18T03:33:55.044+0000",
                    "updated": "2018-07-18T03:33:55.044+0000",
                    "started": "2018-07-18T03:33:55.043+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "124309",
                    "issueId": "13172549"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13172549/worklog/124415",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "guoyuhong commented on issue #2273: ARROW-2864: [Plasma] Add deletion cache to delete objects later when they are not in use.\nURL: https://github.com/apache/arrow/pull/2273#issuecomment-405935745\n \n \n   @pcmoritz Hi Philipp, I would like to hold this PR. I found that there are at least 3 clients are used in ray. The client in the driver should be the key component. Even one client sent the Delete request but the other client are using one object, this object still won't be deleted. I will change this PR later on.\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-07-18T13:43:56.196+0000",
                    "updated": "2018-07-18T13:43:56.196+0000",
                    "started": "2018-07-18T13:43:56.195+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "124415",
                    "issueId": "13172549"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13172549/worklog/125014",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "guoyuhong commented on issue #2273: ARROW-2864: [Plasma] Add deletion cache to delete objects later when they are not in use.\nURL: https://github.com/apache/arrow/pull/2273#issuecomment-406300962\n \n \n   @pcmoritz Hi, Philipp, I have added some code to this PR. I think now it is fine. Could you please take a look?\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-07-19T14:42:37.213+0000",
                    "updated": "2018-07-19T14:42:37.213+0000",
                    "started": "2018-07-19T14:42:37.213+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "125014",
                    "issueId": "13172549"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13172549/worklog/125459",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "codecov-io edited a comment on issue #2273: ARROW-2864: [Plasma] Add deletion cache to delete objects later when they are not in use.\nURL: https://github.com/apache/arrow/pull/2273#issuecomment-405143554\n \n \n   # [Codecov](https://codecov.io/gh/apache/arrow/pull/2273?src=pr&el=h1) Report\n   > Merging [#2273](https://codecov.io/gh/apache/arrow/pull/2273?src=pr&el=desc) into [master](https://codecov.io/gh/apache/arrow/commit/7d2fbeba31763c978d260a9771184a13a63aaaf7?src=pr&el=desc) will **increase** coverage by `2.39%`.\n   > The diff coverage is `86.95%`.\n   \n   [![Impacted file tree graph](https://codecov.io/gh/apache/arrow/pull/2273/graphs/tree.svg?width=650&src=pr&token=LpTCFbqVT1&height=150)](https://codecov.io/gh/apache/arrow/pull/2273?src=pr&el=tree)\n   \n   ```diff\n   @@            Coverage Diff             @@\n   ##           master    #2273      +/-   ##\n   ==========================================\n   + Coverage   84.29%   86.69%   +2.39%     \n   ==========================================\n     Files         292      236      -56     \n     Lines       44559    41856    -2703     \n   ==========================================\n   - Hits        37562    36285    -1277     \n   + Misses       6966     5571    -1395     \n   + Partials       31        0      -31\n   ```\n   \n   \n   | [Impacted Files](https://codecov.io/gh/apache/arrow/pull/2273?src=pr&el=tree) | Coverage \u0394 | |\n   |---|---|---|\n   | [cpp/src/plasma/store.h](https://codecov.io/gh/apache/arrow/pull/2273/diff?src=pr&el=tree#diff-Y3BwL3NyYy9wbGFzbWEvc3RvcmUuaA==) | `100% <\u00f8> (\u00f8)` | :arrow_up: |\n   | [python/pyarrow/\\_plasma.pyx](https://codecov.io/gh/apache/arrow/pull/2273/diff?src=pr&el=tree#diff-cHl0aG9uL3B5YXJyb3cvX3BsYXNtYS5weXg=) | `56.66% <0%> (-1.62%)` | :arrow_down: |\n   | [cpp/src/plasma/client.cc](https://codecov.io/gh/apache/arrow/pull/2273/diff?src=pr&el=tree#diff-Y3BwL3NyYy9wbGFzbWEvY2xpZW50LmNj) | `84.21% <100%> (+0.34%)` | :arrow_up: |\n   | [cpp/src/plasma/test/client\\_tests.cc](https://codecov.io/gh/apache/arrow/pull/2273/diff?src=pr&el=tree#diff-Y3BwL3NyYy9wbGFzbWEvdGVzdC9jbGllbnRfdGVzdHMuY2M=) | `100% <100%> (\u00f8)` | :arrow_up: |\n   | [cpp/src/plasma/store.cc](https://codecov.io/gh/apache/arrow/pull/2273/diff?src=pr&el=tree#diff-Y3BwL3NyYy9wbGFzbWEvc3RvcmUuY2M=) | `88.96% <87.5%> (+0.12%)` | :arrow_up: |\n   | [cpp/src/arrow/util/thread-pool-test.cc](https://codecov.io/gh/apache/arrow/pull/2273/diff?src=pr&el=tree#diff-Y3BwL3NyYy9hcnJvdy91dGlsL3RocmVhZC1wb29sLXRlc3QuY2M=) | `98.91% <0%> (-0.55%)` | :arrow_down: |\n   | [go/arrow/math/uint64\\_amd64.go](https://codecov.io/gh/apache/arrow/pull/2273/diff?src=pr&el=tree#diff-Z28vYXJyb3cvbWF0aC91aW50NjRfYW1kNjQuZ28=) | | |\n   | [go/arrow/math/uint64\\_avx2\\_amd64.go](https://codecov.io/gh/apache/arrow/pull/2273/diff?src=pr&el=tree#diff-Z28vYXJyb3cvbWF0aC91aW50NjRfYXZ4Ml9hbWQ2NC5nbw==) | | |\n   | [go/arrow/type\\_string.go](https://codecov.io/gh/apache/arrow/pull/2273/diff?src=pr&el=tree#diff-Z28vYXJyb3cvdHlwZV9zdHJpbmcuZ28=) | | |\n   | [rust/src/list.rs](https://codecov.io/gh/apache/arrow/pull/2273/diff?src=pr&el=tree#diff-cnVzdC9zcmMvbGlzdC5ycw==) | | |\n   | ... and [52 more](https://codecov.io/gh/apache/arrow/pull/2273/diff?src=pr&el=tree-more) | |\n   \n   ------\n   \n   [Continue to review full report at Codecov](https://codecov.io/gh/apache/arrow/pull/2273?src=pr&el=continue).\n   > **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n   > `\u0394 = absolute <relative> (impact)`, `\u00f8 = not affected`, `? = missing data`\n   > Powered by [Codecov](https://codecov.io/gh/apache/arrow/pull/2273?src=pr&el=footer). Last update [7d2fbeb...af55bae](https://codecov.io/gh/apache/arrow/pull/2273?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n   \n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-07-20T11:33:06.874+0000",
                    "updated": "2018-07-20T11:33:06.874+0000",
                    "started": "2018-07-20T11:33:06.873+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "125459",
                    "issueId": "13172549"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13172549/worklog/126667",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "guoyuhong commented on issue #2273: ARROW-2864: [Plasma] Add deletion cache to delete objects later when they are not in use.\nURL: https://github.com/apache/arrow/pull/2273#issuecomment-407446006\n \n \n   @pcmoritz Could you also review this PR? This will be useful in implementing `ray.internal.free()`.\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-07-24T15:21:38.700+0000",
                    "updated": "2018-07-24T15:21:38.700+0000",
                    "started": "2018-07-24T15:21:38.699+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "126667",
                    "issueId": "13172549"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13172549/worklog/126671",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on issue #2273: ARROW-2864: [Plasma] Add deletion cache to delete objects later when they are not in use.\nURL: https://github.com/apache/arrow/pull/2273#issuecomment-407447723\n \n \n   I added this to the 0.10.0 release milestone\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-07-24T15:26:23.826+0000",
                    "updated": "2018-07-24T15:26:23.826+0000",
                    "started": "2018-07-24T15:26:23.825+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "126671",
                    "issueId": "13172549"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13172549/worklog/126938",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "codecov-io edited a comment on issue #2273: ARROW-2864: [Plasma] Add deletion cache to delete objects later when they are not in use.\nURL: https://github.com/apache/arrow/pull/2273#issuecomment-405143554\n \n \n   # [Codecov](https://codecov.io/gh/apache/arrow/pull/2273?src=pr&el=h1) Report\n   > Merging [#2273](https://codecov.io/gh/apache/arrow/pull/2273?src=pr&el=desc) into [master](https://codecov.io/gh/apache/arrow/commit/7d2fbeba31763c978d260a9771184a13a63aaaf7?src=pr&el=desc) will **increase** coverage by `2.48%`.\n   > The diff coverage is `86.95%`.\n   \n   [![Impacted file tree graph](https://codecov.io/gh/apache/arrow/pull/2273/graphs/tree.svg?width=650&height=150&src=pr&token=LpTCFbqVT1)](https://codecov.io/gh/apache/arrow/pull/2273?src=pr&el=tree)\n   \n   ```diff\n   @@            Coverage Diff             @@\n   ##           master    #2273      +/-   ##\n   ==========================================\n   + Coverage   84.29%   86.78%   +2.48%     \n   ==========================================\n     Files         292      237      -55     \n     Lines       44559    42159    -2400     \n   ==========================================\n   - Hits        37562    36588     -974     \n   + Misses       6966     5571    -1395     \n   + Partials       31        0      -31\n   ```\n   \n   \n   | [Impacted Files](https://codecov.io/gh/apache/arrow/pull/2273?src=pr&el=tree) | Coverage \u0394 | |\n   |---|---|---|\n   | [cpp/src/plasma/store.h](https://codecov.io/gh/apache/arrow/pull/2273/diff?src=pr&el=tree#diff-Y3BwL3NyYy9wbGFzbWEvc3RvcmUuaA==) | `100% <\u00f8> (\u00f8)` | :arrow_up: |\n   | [python/pyarrow/\\_plasma.pyx](https://codecov.io/gh/apache/arrow/pull/2273/diff?src=pr&el=tree#diff-cHl0aG9uL3B5YXJyb3cvX3BsYXNtYS5weXg=) | `56.66% <0%> (-1.62%)` | :arrow_down: |\n   | [cpp/src/plasma/client.cc](https://codecov.io/gh/apache/arrow/pull/2273/diff?src=pr&el=tree#diff-Y3BwL3NyYy9wbGFzbWEvY2xpZW50LmNj) | `84.21% <100%> (+0.34%)` | :arrow_up: |\n   | [cpp/src/plasma/test/client\\_tests.cc](https://codecov.io/gh/apache/arrow/pull/2273/diff?src=pr&el=tree#diff-Y3BwL3NyYy9wbGFzbWEvdGVzdC9jbGllbnRfdGVzdHMuY2M=) | `100% <100%> (\u00f8)` | :arrow_up: |\n   | [cpp/src/plasma/store.cc](https://codecov.io/gh/apache/arrow/pull/2273/diff?src=pr&el=tree#diff-Y3BwL3NyYy9wbGFzbWEvc3RvcmUuY2M=) | `89% <87.5%> (+0.16%)` | :arrow_up: |\n   | [python/pyarrow/formatting.py](https://codecov.io/gh/apache/arrow/pull/2273/diff?src=pr&el=tree#diff-cHl0aG9uL3B5YXJyb3cvZm9ybWF0dGluZy5weQ==) | `43.75% <0%> (-52.55%)` | :arrow_down: |\n   | [python/pyarrow/scalar.pxi](https://codecov.io/gh/apache/arrow/pull/2273/diff?src=pr&el=tree#diff-cHl0aG9uL3B5YXJyb3cvc2NhbGFyLnB4aQ==) | `60.74% <0%> (-1.66%)` | :arrow_down: |\n   | [python/pyarrow/io.pxi](https://codecov.io/gh/apache/arrow/pull/2273/diff?src=pr&el=tree#diff-cHl0aG9uL3B5YXJyb3cvaW8ucHhp) | `60.72% <0%> (-1.47%)` | :arrow_down: |\n   | [cpp/src/arrow/array.cc](https://codecov.io/gh/apache/arrow/pull/2273/diff?src=pr&el=tree#diff-Y3BwL3NyYy9hcnJvdy9hcnJheS5jYw==) | `85.97% <0%> (-1.37%)` | :arrow_down: |\n   | [cpp/src/arrow/util/thread-pool-test.cc](https://codecov.io/gh/apache/arrow/pull/2273/diff?src=pr&el=tree#diff-Y3BwL3NyYy9hcnJvdy91dGlsL3RocmVhZC1wb29sLXRlc3QuY2M=) | `98.91% <0%> (-0.55%)` | :arrow_down: |\n   | ... and [84 more](https://codecov.io/gh/apache/arrow/pull/2273/diff?src=pr&el=tree-more) | |\n   \n   ------\n   \n   [Continue to review full report at Codecov](https://codecov.io/gh/apache/arrow/pull/2273?src=pr&el=continue).\n   > **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n   > `\u0394 = absolute <relative> (impact)`, `\u00f8 = not affected`, `? = missing data`\n   > Powered by [Codecov](https://codecov.io/gh/apache/arrow/pull/2273?src=pr&el=footer). Last update [7d2fbeb...10ee293](https://codecov.io/gh/apache/arrow/pull/2273?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n   \n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-07-24T22:44:16.691+0000",
                    "updated": "2018-07-24T22:44:16.691+0000",
                    "started": "2018-07-24T22:44:16.690+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "126938",
                    "issueId": "13172549"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13172549/worklog/126945",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "pcmoritz closed pull request #2273: ARROW-2864: [Plasma] Add deletion cache to delete objects later when they are not in use.\nURL: https://github.com/apache/arrow/pull/2273\n \n \n   \n\nThis is a PR merged from a forked repository.\nAs GitHub hides the original diff on merge, it is displayed below for\nthe sake of provenance:\n\nAs this is a foreign pull request (from a fork), the diff is supplied\nbelow (as it won't show otherwise due to GitHub magic):\n\ndiff --git a/cpp/src/plasma/client.cc b/cpp/src/plasma/client.cc\nindex e7d9d448db..04fe11ca7c 100644\n--- a/cpp/src/plasma/client.cc\n+++ b/cpp/src/plasma/client.cc\n@@ -40,6 +40,7 @@\n #include <deque>\n #include <mutex>\n #include <unordered_map>\n+#include <unordered_set>\n #include <vector>\n \n #include \"arrow/buffer.h\"\n@@ -269,6 +270,8 @@ class PlasmaClient::Impl : public std::enable_shared_from_this<PlasmaClient::Imp\n   /// information to make sure that it does not delay in releasing so much\n   /// memory that the store is unable to evict enough objects to free up space.\n   int64_t store_capacity_;\n+  /// A hash set to record the ids that users want to delete but still in use.\n+  std::unordered_set<ObjectID> deletion_cache_;\n \n #ifdef PLASMA_GPU\n   /// Cuda Device Manager.\n@@ -630,11 +633,22 @@ Status PlasmaClient::Impl::PerformRelease(const ObjectID& object_id) {\n     // Tell the store that the client no longer needs the object.\n     RETURN_NOT_OK(UnmapObject(object_id));\n     RETURN_NOT_OK(SendReleaseRequest(store_conn_, object_id));\n+    auto iter = deletion_cache_.find(object_id);\n+    if (iter != deletion_cache_.end()) {\n+      deletion_cache_.erase(object_id);\n+      RETURN_NOT_OK(Delete({object_id}));\n+    }\n   }\n   return Status::OK();\n }\n \n Status PlasmaClient::Impl::Release(const ObjectID& object_id) {\n+  // If an object is in the deletion cache, handle it directly without waiting.\n+  auto iter = deletion_cache_.find(object_id);\n+  if (iter != deletion_cache_.end()) {\n+    RETURN_NOT_OK(PerformRelease(object_id));\n+    return Status::OK();\n+  }\n   // If the client is already disconnected, ignore release requests.\n   if (store_conn_ < 0) {\n     return Status::OK();\n@@ -820,6 +834,8 @@ Status PlasmaClient::Impl::Delete(const std::vector<ObjectID>& object_ids) {\n     // If the object is in used, skip it.\n     if (objects_in_use_.count(object_id) == 0) {\n       not_in_use_ids.push_back(object_id);\n+    } else {\n+      deletion_cache_.emplace(object_id);\n     }\n   }\n   if (not_in_use_ids.size() > 0) {\ndiff --git a/cpp/src/plasma/store.cc b/cpp/src/plasma/store.cc\nindex 999aa6a1b3..b34f8d0af6 100644\n--- a/cpp/src/plasma/store.cc\n+++ b/cpp/src/plasma/store.cc\n@@ -400,10 +400,17 @@ int PlasmaStore::RemoveFromClientObjectIds(ObjectTableEntry* entry, Client* clie\n     // If no more clients are using this object, notify the eviction policy\n     // that the object is no longer being used.\n     if (entry->ref_count == 0) {\n-      // Tell the eviction policy that this object is no longer being used.\n-      std::vector<ObjectID> objects_to_evict;\n-      eviction_policy_.EndObjectAccess(entry->object_id, &objects_to_evict);\n-      DeleteObjects(objects_to_evict);\n+      if (deletion_cache_.count(entry->object_id) == 0) {\n+        // Tell the eviction policy that this object is no longer being used.\n+        std::vector<ObjectID> objects_to_evict;\n+        eviction_policy_.EndObjectAccess(entry->object_id, &objects_to_evict);\n+        DeleteObjects(objects_to_evict);\n+      } else {\n+        // Above code does not really delete an object. Instead, it just put an\n+        // object to LRU cache which will be cleaned when the memory is not enough.\n+        deletion_cache_.erase(entry->object_id);\n+        DeleteObjects({entry->object_id});\n+      }\n     }\n     // Return 1 to indicate that the client was removed.\n     return 1;\n@@ -474,11 +481,15 @@ PlasmaError PlasmaStore::DeleteObject(ObjectID& object_id) {\n \n   if (entry->state != ObjectState::PLASMA_SEALED) {\n     // To delete an object it must have been sealed.\n+    // Put it into deletion cache, it will be deleted later.\n+    deletion_cache_.emplace(object_id);\n     return PlasmaError::ObjectNotSealed;\n   }\n \n   if (entry->ref_count != 0) {\n     // To delete an object, there must be no clients currently using it.\n+    // Put it into deletion cache, it will be deleted later.\n+    deletion_cache_.emplace(object_id);\n     return PlasmaError::ObjectInUse;\n   }\n \ndiff --git a/cpp/src/plasma/store.h b/cpp/src/plasma/store.h\nindex 782e234961..40412a8d6a 100644\n--- a/cpp/src/plasma/store.h\n+++ b/cpp/src/plasma/store.h\n@@ -209,6 +209,8 @@ class PlasmaStore {\n   NotificationMap pending_notifications_;\n \n   std::unordered_map<int, std::unique_ptr<Client>> connected_clients_;\n+\n+  std::unordered_set<ObjectID> deletion_cache_;\n #ifdef PLASMA_GPU\n   arrow::gpu::CudaDeviceManager* manager_;\n #endif\ndiff --git a/cpp/src/plasma/test/client_tests.cc b/cpp/src/plasma/test/client_tests.cc\nindex e40f6d9491..8868f94464 100644\n--- a/cpp/src/plasma/test/client_tests.cc\n+++ b/cpp/src/plasma/test/client_tests.cc\n@@ -177,11 +177,16 @@ TEST_F(TestPlasmaStore, DeleteTest) {\n   ARROW_CHECK_OK(client_.Seal(object_id));\n \n   result = client_.Delete(object_id);\n-  // TODO: Guarantee that the in-use object will be deleted when it is released.\n   ARROW_CHECK_OK(result);\n+  bool has_object = false;\n+  ARROW_CHECK_OK(client_.Contains(object_id, &has_object));\n+  ASSERT_TRUE(has_object);\n \n   // Avoid race condition of Plasma Manager waiting for notification.\n   ARROW_CHECK_OK(client_.Release(object_id));\n+  // object_id is marked as to-be-deleted, when it is not in use, it will be deleted.\n+  ARROW_CHECK_OK(client_.Contains(object_id, &has_object));\n+  ASSERT_FALSE(has_object);\n   ARROW_CHECK_OK(client_.Delete(object_id));\n }\n \n@@ -202,14 +207,37 @@ TEST_F(TestPlasmaStore, DeleteObjectsTest) {\n   ARROW_CHECK_OK(client_.Seal(object_id1));\n   ARROW_CHECK_OK(client_.Create(object_id2, data_size, metadata, metadata_size, &data));\n   ARROW_CHECK_OK(client_.Seal(object_id2));\n-  // Objects are in use.\n-  result = client_.Delete(std::vector<ObjectID>{object_id1, object_id2});\n-  // TODO: Guarantee that the in-use object will be deleted when it is released.\n-  ARROW_CHECK_OK(result);\n-  // Avoid race condition of Plasma Manager waiting for notification.\n+  // Release the ref count of Create function.\n   ARROW_CHECK_OK(client_.Release(object_id1));\n   ARROW_CHECK_OK(client_.Release(object_id2));\n-  ARROW_CHECK_OK(client_.Delete(std::vector<ObjectID>{object_id1, object_id2}));\n+  // Increase the ref count by calling Get using client2_.\n+  std::vector<ObjectBuffer> object_buffers;\n+  ARROW_CHECK_OK(client2_.Get({object_id1, object_id2}, 0, &object_buffers));\n+  // Objects are still used by client2_.\n+  result = client_.Delete(std::vector<ObjectID>{object_id1, object_id2});\n+  ARROW_CHECK_OK(result);\n+  // The object is used and it should not be deleted right now.\n+  bool has_object = false;\n+  ARROW_CHECK_OK(client_.Contains(object_id1, &has_object));\n+  ASSERT_TRUE(has_object);\n+  ARROW_CHECK_OK(client_.Contains(object_id2, &has_object));\n+  ASSERT_TRUE(has_object);\n+  // Decrease the ref count by deleting the PlasmaBuffer (in ObjectBuffer).\n+  // client2_ won't send the release request immediately because the trigger\n+  // condition is not reached. The release is only added to release cache.\n+  object_buffers.clear();\n+  // The reference count went to zero, but the objects are still in the release\n+  // cache.\n+  ARROW_CHECK_OK(client_.Contains(object_id1, &has_object));\n+  ASSERT_TRUE(has_object);\n+  ARROW_CHECK_OK(client_.Contains(object_id2, &has_object));\n+  ASSERT_TRUE(has_object);\n+  // The Delete call will flush release cache and send the Delete request.\n+  result = client2_.Delete(std::vector<ObjectID>{object_id1, object_id2});\n+  ARROW_CHECK_OK(client_.Contains(object_id1, &has_object));\n+  ASSERT_FALSE(has_object);\n+  ARROW_CHECK_OK(client_.Contains(object_id2, &has_object));\n+  ASSERT_FALSE(has_object);\n }\n \n TEST_F(TestPlasmaStore, ContainsTest) {\ndiff --git a/python/pyarrow/_plasma.pyx b/python/pyarrow/_plasma.pyx\nindex ba528220ff..5787c38ff9 100644\n--- a/python/pyarrow/_plasma.pyx\n+++ b/python/pyarrow/_plasma.pyx\n@@ -114,6 +114,7 @@ cdef extern from \"plasma/client.h\" nogil:\n         CStatus Transfer(const char* addr, int port,\n                          const CUniqueID& object_id)\n \n+        CStatus Delete(const c_vector[CUniqueID] object_ids)\n \n cdef extern from \"plasma/client.h\" nogil:\n \n@@ -647,6 +648,22 @@ cdef class PlasmaClient:\n         with nogil:\n             check_status(self.client.get().Disconnect())\n \n+    def delete(self, object_ids):\n+        \"\"\"\n+        Delete the objects with the given IDs from other object store.\n+\n+        Parameters\n+        ----------\n+        object_ids : list\n+            A list of strings used to identify the objects.\n+        \"\"\"\n+        cdef c_vector[CUniqueID] ids\n+        cdef ObjectID object_id\n+        for object_id in object_ids:\n+            ids.push_back(object_id.data)\n+        with nogil:\n+            check_status(self.client.get().Delete(ids))\n+\n \n def connect(store_socket_name, manager_socket_name, int release_delay,\n             int num_retries=-1):\n\n\n \n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-07-24T22:59:04.659+0000",
                    "updated": "2018-07-24T22:59:04.659+0000",
                    "started": "2018-07-24T22:59:04.659+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "126945",
                    "issueId": "13172549"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13172549/worklog/127023",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "guoyuhong commented on issue #2273: ARROW-2864: [Plasma] Add deletion cache to delete objects later when they are not in use.\nURL: https://github.com/apache/arrow/pull/2273#issuecomment-407616002\n \n \n   Thanks, @pcmoritz !\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-07-25T02:47:18.667+0000",
                    "updated": "2018-07-25T02:47:18.667+0000",
                    "started": "2018-07-25T02:47:18.666+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "127023",
                    "issueId": "13172549"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
            "id": "4",
            "description": "An improvement or enhancement to an existing feature or task.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
            "name": "Improvement",
            "subtask": false,
            "avatarId": 21140
        },
        "timespent": 8400,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@3a083b22[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@68e87838[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@4ea57c31[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@6527f465[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@6eb02f88[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@27f2e19f[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@425355a4[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@188d1557[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@772ea5a1[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@47605cc2[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@1fc6dfff[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@6f1156fd[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 8400,
        "customfield_12312520": null,
        "customfield_12312521": "Tue Jul 24 22:59:13 UTC 2018",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2018-07-24T22:59:13.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-2864/watchers",
            "watchCount": 1,
            "isWatching": false
        },
        "created": "2018-07-17T03:30:26.000+0000",
        "updated": "2018-07-25T02:47:18.000+0000",
        "timeoriginalestimate": null,
        "description": "Currently, the Delete function will skip the objects that are in use. If you want to delete the objects later, you need to call the Delete function again. We need to guarantee that the objects will be deleted when they are not in use later.",
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "2h 20m",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 8400
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[Plasma] Add deletion cache to delete objects later",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": "2018-07-20",
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13172549/comment/16554884",
                    "id": "16554884",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=pcmoritz",
                        "name": "pcmoritz",
                        "key": "pcmoritz",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Philipp Moritz",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "Issue resolved by pull request 2273\n[https://github.com/apache/arrow/pull/2273]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=pcmoritz",
                        "name": "pcmoritz",
                        "key": "pcmoritz",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Philipp Moritz",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2018-07-24T22:59:13.389+0000",
                    "updated": "2018-07-24T22:59:13.389+0000"
                }
            ],
            "maxResults": 1,
            "total": 1,
            "startAt": 0
        },
        "customfield_12311820": "0|i3vyjb:",
        "customfield_12314139": null
    }
}