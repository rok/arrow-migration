{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13192430",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13192430",
    "key": "ARROW-3549",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12343858",
                "id": "12343858",
                "description": "",
                "name": "0.12.0",
                "archived": false,
                "released": true,
                "releaseDate": "2019-01-20"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/4",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
            "name": "Minor",
            "id": "4"
        },
        "labels": [
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=csun",
            "name": "csun",
            "key": "csun",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=csun&avatarId=23340",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=csun&avatarId=23340",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=csun&avatarId=23340",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=csun&avatarId=23340"
            },
            "displayName": "Chao Sun",
            "active": true,
            "timeZone": "America/Los_Angeles"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12333773",
                "id": "12333773",
                "name": "Rust"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=csun",
            "name": "csun",
            "key": "csun",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=csun&avatarId=23340",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=csun&avatarId=23340",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=csun&avatarId=23340",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=csun&avatarId=23340"
            },
            "displayName": "Chao Sun",
            "active": true,
            "timeZone": "America/Los_Angeles"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=csun",
            "name": "csun",
            "key": "csun",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=csun&avatarId=23340",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=csun&avatarId=23340",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=csun&avatarId=23340",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=csun&avatarId=23340"
            },
            "displayName": "Chao Sun",
            "active": true,
            "timeZone": "America/Los_Angeles"
        },
        "aggregateprogress": {
            "progress": 3600,
            "total": 3600,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 3600,
            "total": 3600,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-3549/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 6,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13192430/worklog/155700",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "sunchao opened a new pull request #2784: ARROW-3549: [Rust] Replace i64 with usize for some bit utility functions\nURL: https://github.com/apache/arrow/pull/2784\n \n \n   We currently use `i64` in some bit utility functions. This can be replaced by `usize` to avoid unnecessary type conversions and invalid argument.\r\n   \r\n   \n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-10-18T05:36:02.632+0000",
                    "updated": "2018-10-18T05:36:02.632+0000",
                    "started": "2018-10-18T05:36:02.631+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "155700",
                    "issueId": "13192430"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13192430/worklog/155706",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "sunchao commented on issue #2784: ARROW-3549: [Rust] Replace i64 with usize for some bit utility functions\nURL: https://github.com/apache/arrow/pull/2784#issuecomment-430888833\n \n \n   cc @kszucs @crepererum @paddyhoran @andygrove . Could you review this PR? Thanks.\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-10-18T06:20:11.636+0000",
                    "updated": "2018-10-18T06:20:11.636+0000",
                    "started": "2018-10-18T06:20:11.636+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "155706",
                    "issueId": "13192430"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13192430/worklog/155765",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "crepererum commented on issue #2784: ARROW-3549: [Rust] Replace i64 with usize for some bit utility functions\nURL: https://github.com/apache/arrow/pull/2784#issuecomment-430927255\n \n \n   I think the asserts should be tested (maybe in another PR), but otherwise that looks good. Thank you.\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-10-18T08:46:45.945+0000",
                    "updated": "2018-10-18T08:46:45.945+0000",
                    "started": "2018-10-18T08:46:45.944+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "155765",
                    "issueId": "13192430"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13192430/worklog/155793",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "kszucs commented on issue #2784: ARROW-3549: [Rust] Replace i64 with usize for some bit utility functions\nURL: https://github.com/apache/arrow/pull/2784#issuecomment-430939463\n \n \n   Thanks @crepererum ! Merging.\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-10-18T09:25:36.599+0000",
                    "updated": "2018-10-18T09:25:36.599+0000",
                    "started": "2018-10-18T09:25:36.599+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "155793",
                    "issueId": "13192430"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13192430/worklog/155794",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "kszucs closed pull request #2784: ARROW-3549: [Rust] Replace i64 with usize for some bit utility functions\nURL: https://github.com/apache/arrow/pull/2784\n \n \n   \n\nThis is a PR merged from a forked repository.\nAs GitHub hides the original diff on merge, it is displayed below for\nthe sake of provenance:\n\nAs this is a foreign pull request (from a fork), the diff is supplied\nbelow (as it won't show otherwise due to GitHub magic):\n\ndiff --git a/rust/src/array.rs b/rust/src/array.rs\nindex 9eca9ebbb7..963a235940 100644\n--- a/rust/src/array.rs\n+++ b/rust/src/array.rs\n@@ -220,7 +220,7 @@ macro_rules! def_primitive_array {\n                     let null_slice = null_buf.data_mut();\n                     for (i, v) in data.iter().enumerate() {\n                         if let Some(n) = v {\n-                            bit_util::set_bit(null_slice, i as i64);\n+                            bit_util::set_bit(null_slice, i);\n                             // unwrap() in the following should be safe here since we've\n                             // made sure enough space is allocated for the values.\n                             val_buf.write(&n.to_byte_slice()).unwrap();\n@@ -306,10 +306,10 @@ impl PrimitiveArray<bool> {\n     }\n \n     /// Returns the boolean value at index `i`.\n-    ///\n-    /// Note this doesn't do any bound checking, for performance reason.\n     pub fn value(&self, i: i64) -> bool {\n-        unsafe { bit_util::get_bit_raw(self.raw_values.get() as *const u8, i + self.offset()) }\n+        let offset = i + self.offset();\n+        assert!(offset < self.data.len());\n+        unsafe { bit_util::get_bit_raw(self.raw_values.get() as *const u8, offset as usize) }\n     }\n }\n \n@@ -322,7 +322,7 @@ impl From<Vec<bool>> for PrimitiveArray<bool> {\n             let mut_slice = mut_buf.data_mut();\n             for (i, b) in data.iter().enumerate() {\n                 if *b {\n-                    bit_util::set_bit(mut_slice, i as i64);\n+                    bit_util::set_bit(mut_slice, i);\n                 }\n             }\n         }\n@@ -347,9 +347,9 @@ impl From<Vec<Option<bool>>> for PrimitiveArray<bool> {\n \n             for (i, v) in data.iter().enumerate() {\n                 if let Some(b) = v {\n-                    bit_util::set_bit(null_slice, i as i64);\n+                    bit_util::set_bit(null_slice, i);\n                     if *b {\n-                        bit_util::set_bit(val_slice, i as i64);\n+                        bit_util::set_bit(val_slice, i);\n                     }\n                 }\n             }\ndiff --git a/rust/src/array_data.rs b/rust/src/array_data.rs\nindex 180d3f92b3..055c8d91e7 100644\n--- a/rust/src/array_data.rs\n+++ b/rust/src/array_data.rs\n@@ -68,7 +68,7 @@ impl ArrayData {\n     ) -> Self {\n         if null_count < 0 {\n             null_count = if let Some(ref buf) = null_bit_buffer {\n-                len - bit_util::count_set_bits_offset(buf.data(), offset)\n+                len - bit_util::count_set_bits_offset(buf.data(), offset as usize)\n             } else {\n                 0\n             };\ndiff --git a/rust/src/bitmap.rs b/rust/src/bitmap.rs\nindex 2fdcf87232..6cec4d51bb 100644\n--- a/rust/src/bitmap.rs\n+++ b/rust/src/bitmap.rs\n@@ -46,7 +46,8 @@ impl Bitmap {\n     }\n \n     pub fn is_set(&self, i: i64) -> bool {\n-        bit_util::get_bit(self.bits.data(), i)\n+        assert!(i < (self.bits.len() << 3) as i64);\n+        unsafe { bit_util::get_bit_raw(self.bits.raw_data(), i as usize) }\n     }\n }\n \ndiff --git a/rust/src/util/bit_util.rs b/rust/src/util/bit_util.rs\nindex 5e4c35c765..e652281775 100644\n--- a/rust/src/util/bit_util.rs\n+++ b/rust/src/util/bit_util.rs\n@@ -43,8 +43,8 @@ fn round_upto_power_of_2(num: i64, factor: i64) -> i64 {\n \n /// Returns whether bit at position `i` in `data` is set or not\n #[inline]\n-pub fn get_bit(data: &[u8], i: i64) -> bool {\n-    (data[(i >> 3) as usize] & BIT_MASK[(i & 7) as usize]) != 0\n+pub fn get_bit(data: &[u8], i: usize) -> bool {\n+    (data[i >> 3] & BIT_MASK[i & 7]) != 0\n }\n \n /// Returns whether bit at position `i` in `data` is set or not.\n@@ -52,14 +52,14 @@ pub fn get_bit(data: &[u8], i: i64) -> bool {\n /// Note this doesn't do any bound checking, for performance reason. The caller is\n /// responsible to guarantee that `i` is within bounds.\n #[inline]\n-pub unsafe fn get_bit_raw(data: *const u8, i: i64) -> bool {\n-    (*data.offset((i >> 3) as isize) & BIT_MASK[(i & 7) as usize]) != 0\n+pub unsafe fn get_bit_raw(data: *const u8, i: usize) -> bool {\n+    (*data.offset((i >> 3) as isize) & BIT_MASK[i & 7]) != 0\n }\n \n /// Sets bit at position `i` for `data`\n #[inline]\n-pub fn set_bit(data: &mut [u8], i: i64) {\n-    data[(i >> 3) as usize] |= BIT_MASK[(i & 7) as usize]\n+pub fn set_bit(data: &mut [u8], i: usize) {\n+    data[i >> 3] |= BIT_MASK[i & 7]\n }\n \n /// Returns the number of 1-bits in `data`\n@@ -74,8 +74,8 @@ pub fn count_set_bits(data: &[u8]) -> i64 {\n \n /// Returns the number of 1-bits in `data`, starting from `offset`.\n #[inline]\n-pub fn count_set_bits_offset(data: &[u8], offset: i64) -> i64 {\n-    debug_assert!(offset <= (data.len() * 8) as i64);\n+pub fn count_set_bits_offset(data: &[u8], offset: usize) -> i64 {\n+    debug_assert!(offset <= (data.len() << 3));\n \n     let start_byte_pos = (offset >> 3) as usize;\n     let start_bit_pos = offset & 7;\n@@ -86,7 +86,7 @@ pub fn count_set_bits_offset(data: &[u8], offset: i64) -> i64 {\n         let mut result = 0;\n         result += count_set_bits(&data[start_byte_pos + 1..]);\n         for i in start_bit_pos..8 {\n-            if get_bit(&data[start_byte_pos..start_byte_pos + 1], i as i64) {\n+            if get_bit(&data[start_byte_pos..start_byte_pos + 1], i as usize) {\n                 result += 1;\n             }\n         }\n@@ -158,14 +158,14 @@ mod tests {\n             let b = rng.gen_bool(0.5);\n             expected.push(b);\n             if b {\n-                set_bit(&mut buf[..], i as i64)\n+                set_bit(&mut buf[..], i)\n             }\n         }\n \n         let raw_ptr = buf.as_ptr();\n         for (i, b) in expected.iter().enumerate() {\n             unsafe {\n-                assert_eq!(*b, get_bit_raw(raw_ptr, i as i64));\n+                assert_eq!(*b, get_bit_raw(raw_ptr, i));\n             }\n         }\n     }\n@@ -192,10 +192,10 @@ mod tests {\n         for _ in 0..NUM_SETS {\n             let offset = rng.gen_range(0, 8 * NUM_BYTES);\n             v.insert(offset);\n-            set_bit(&mut buffer[..], offset as i64);\n+            set_bit(&mut buffer[..], offset);\n         }\n         for i in 0..NUM_BYTES * 8 {\n-            assert_eq!(v.contains(&i), get_bit(&buffer[..], i as i64));\n+            assert_eq!(v.contains(&i), get_bit(&buffer[..], i));\n         }\n     }\n \n\n\n \n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-10-18T09:26:52.221+0000",
                    "updated": "2018-10-18T09:26:52.221+0000",
                    "started": "2018-10-18T09:26:52.221+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "155794",
                    "issueId": "13192430"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13192430/worklog/155964",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "sunchao commented on issue #2784: ARROW-3549: [Rust] Replace i64 with usize for some bit utility functions\nURL: https://github.com/apache/arrow/pull/2784#issuecomment-431055996\n \n \n   Thanks for reviewing and merging! will add the assertion test in a future PR.\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2018-10-18T15:34:04.651+0000",
                    "updated": "2018-10-18T15:34:04.651+0000",
                    "started": "2018-10-18T15:34:04.650+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "155964",
                    "issueId": "13192430"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
            "id": "1",
            "description": "A problem which impairs or prevents the functions of the product.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
            "name": "Bug",
            "subtask": false,
            "avatarId": 21133
        },
        "timespent": 3600,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@3917227[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@727c2df2[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@40e440a8[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@5364e6fb[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@29b5db7b[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@1ef7fd6[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@636c8e43[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@17cbffeb[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@1022906a[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@6ac95c77[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@6d50d9fb[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@252c571d[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 3600,
        "customfield_12312520": null,
        "customfield_12312521": "Thu Oct 18 09:26:44 UTC 2018",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2018-10-18T09:26:44.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-3549/watchers",
            "watchCount": 1,
            "isWatching": false
        },
        "created": "2018-10-18T05:33:36.000+0000",
        "updated": "2018-10-18T15:34:04.000+0000",
        "timeoriginalestimate": null,
        "description": "We currently use {{i64}} in some bit utility functions. This can be replaced by {{usize}} to avoid unnecessary type conversions and invalid argument.",
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "1h",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 3600
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[Rust] Replace i64 with usize for some bit utility functions",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13192430/comment/16654915",
                    "id": "16654915",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=kszucs",
                        "name": "kszucs",
                        "key": "kszucs",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Krisztian Szucs",
                        "active": true,
                        "timeZone": "Europe/Budapest"
                    },
                    "body": "Issue resolved by pull request 2784\n[https://github.com/apache/arrow/pull/2784]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=kszucs",
                        "name": "kszucs",
                        "key": "kszucs",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Krisztian Szucs",
                        "active": true,
                        "timeZone": "Europe/Budapest"
                    },
                    "created": "2018-10-18T09:26:44.223+0000",
                    "updated": "2018-10-18T09:26:44.223+0000"
                }
            ],
            "maxResults": 1,
            "total": 1,
            "startAt": 0
        },
        "customfield_12311820": "0|i3zcbb:",
        "customfield_12314139": null
    }
}