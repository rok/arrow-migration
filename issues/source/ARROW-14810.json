{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13413592",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413592",
    "key": "ARROW-14810",
    "fields": {
        "parent": {
            "id": "13413587",
            "key": "ARROW-14806",
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13413587",
            "fields": {
                "summary": "[R] Implement bindings for lubridate component extraction functions",
                "status": {
                    "self": "https://issues.apache.org/jira/rest/api/2/status/5",
                    "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
                    "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
                    "name": "Resolved",
                    "id": "5",
                    "statusCategory": {
                        "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                        "id": 3,
                        "key": "done",
                        "colorName": "green",
                        "name": "Done"
                    }
                },
                "priority": {
                    "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
                    "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
                    "name": "Major",
                    "id": "3"
                },
                "issuetype": {
                    "self": "https://issues.apache.org/jira/rest/api/2/issuetype/2",
                    "id": "2",
                    "description": "A new feature of the product, which has yet to be developed.",
                    "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21141&avatarType=issuetype",
                    "name": "New Feature",
                    "subtask": false,
                    "avatarId": 21141
                }
            }
        },
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12351051",
                "id": "12351051",
                "description": "",
                "name": "8.0.0",
                "archived": false,
                "released": true,
                "releaseDate": "2022-05-06"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "name": "Major",
            "id": "3"
        },
        "labels": [
            "good-first-issue",
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [
            {
                "id": "12627202",
                "self": "https://issues.apache.org/jira/rest/api/2/issueLink/12627202",
                "type": {
                    "id": "10001",
                    "name": "dependent",
                    "inward": "is depended upon by",
                    "outward": "depends upon",
                    "self": "https://issues.apache.org/jira/rest/api/2/issueLinkType/10001"
                },
                "outwardIssue": {
                    "id": "13408454",
                    "key": "ARROW-14471",
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13408454",
                    "fields": {
                        "summary": "[R] Implement lubridate's individual date/time parsers",
                        "status": {
                            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
                            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
                            "name": "Resolved",
                            "id": "5",
                            "statusCategory": {
                                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                                "id": 3,
                                "key": "done",
                                "colorName": "green",
                                "name": "Done"
                            }
                        },
                        "priority": {
                            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
                            "name": "Major",
                            "id": "3"
                        },
                        "issuetype": {
                            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/7",
                            "id": "7",
                            "description": "The sub-task of the issue",
                            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21146&avatarType=issuetype",
                            "name": "Sub-task",
                            "subtask": true,
                            "avatarId": 21146
                        }
                    }
                }
            },
            {
                "id": "12636278",
                "self": "https://issues.apache.org/jira/rest/api/2/issueLink/12636278",
                "type": {
                    "id": "10001",
                    "name": "dependent",
                    "inward": "is depended upon by",
                    "outward": "depends upon",
                    "self": "https://issues.apache.org/jira/rest/api/2/issueLinkType/10001"
                },
                "outwardIssue": {
                    "id": "13417456",
                    "key": "ARROW-15098",
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13417456",
                    "fields": {
                        "summary": "[R] Add binding for lubridate::duration() and/or as.difftime()",
                        "status": {
                            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
                            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
                            "name": "Resolved",
                            "id": "5",
                            "statusCategory": {
                                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                                "id": 3,
                                "key": "done",
                                "colorName": "green",
                                "name": "Done"
                            }
                        },
                        "priority": {
                            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
                            "name": "Major",
                            "id": "3"
                        },
                        "issuetype": {
                            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/7",
                            "id": "7",
                            "description": "The sub-task of the issue",
                            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21146&avatarType=issuetype",
                            "name": "Sub-task",
                            "subtask": true,
                            "avatarId": 21146
                        }
                    }
                }
            }
        ],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=dragosmg",
            "name": "dragosmg",
            "key": "dragosmg",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34061",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34061",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34061",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34061"
            },
            "displayName": "Drago\u0219 Moldovan-Gr\u00fcnfeld",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12333008",
                "id": "12333008",
                "name": "R"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=thisisnic",
            "name": "thisisnic",
            "key": "thisisnic",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=39937",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=39937",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=39937",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=39937"
            },
            "displayName": "Nicola Crane",
            "active": true,
            "timeZone": "Africa/Casablanca"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=thisisnic",
            "name": "thisisnic",
            "key": "thisisnic",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=39937",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=39937",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=39937",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=39937"
            },
            "displayName": "Nicola Crane",
            "active": true,
            "timeZone": "Africa/Casablanca"
        },
        "aggregateprogress": {
            "progress": 16800,
            "total": 16800,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 16800,
            "total": 16800,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-14810/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 28,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413592/worklog/748843",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jonkeane commented on a change in pull request #12707:\nURL: https://github.com/apache/arrow/pull/12707#discussion_r836749769\n\n\n\n##########\nFile path: r/R/dplyr-funcs-datetime.R\n##########\n@@ -300,6 +312,34 @@ register_bindings_duration <- function() {\n \n     build_expr(\"cast\", x, options = cast_options(to_type = duration(unit = \"s\")))\n   })\n+  register_binding(\"decimal_date\", function(date) {\n+    # browser()\n+    y <- build_expr(\"year\", date)\n+    # timezone <- call_binding(\"tz\", date)\n+    start <- call_binding(\"make_datetime\", year = y, tz = \"UTC\")\n+    end <- call_binding(\"make_datetime\", year = y + 1L, tz = \"UTC\")\n+    # maybe use yday here\n\nReview comment:\n       Yeah, I htink `yday / if (leapyrea(...)) 366 else 365` would probably be a bit cleaner (unless | until the number of days in a year changes, I guess)\n\n##########\nFile path: r/R/dplyr-funcs-datetime.R\n##########\n@@ -300,6 +312,34 @@ register_bindings_duration <- function() {\n \n     build_expr(\"cast\", x, options = cast_options(to_type = duration(unit = \"s\")))\n   })\n+  register_binding(\"decimal_date\", function(date) {\n+    # browser()\n+    y <- build_expr(\"year\", date)\n+    # timezone <- call_binding(\"tz\", date)\n\nReview comment:\n       ```suggestion\r\n   ```\n\n##########\nFile path: r/R/dplyr-funcs-datetime.R\n##########\n@@ -300,6 +312,34 @@ register_bindings_duration <- function() {\n \n     build_expr(\"cast\", x, options = cast_options(to_type = duration(unit = \"s\")))\n   })\n+  register_binding(\"decimal_date\", function(date) {\n+    # browser()\n+    y <- build_expr(\"year\", date)\n+    # timezone <- call_binding(\"tz\", date)\n+    start <- call_binding(\"make_datetime\", year = y, tz = \"UTC\")\n+    end <- call_binding(\"make_datetime\", year = y + 1L, tz = \"UTC\")\n+    # maybe use yday here\n+    sofar <- call_binding(\"difftime\", date, start, units = \"secs\")\n+    total <- call_binding(\"difftime\", end, start, units = \"secs\")\n+    y + sofar$cast(int64()) / total$cast(int64())\n+  })\n+  register_binding(\"date_decimal\", function(decimal, tz = \"UTC\") {\n+    y <- build_expr(\n+      \"cast\",\n+      decimal,\n+      options = cast_options(to_type = int32(), safe = FALSE)\n+    )\n+\n+    start <- call_binding(\"make_datetime\", year = y, tz = tz)\n+    end <- call_binding(\"make_datetime\", year = y + 1, tz = tz)\n+\n+    seconds <- call_binding(\"difftime\", end, start, units = \"secs\")\n+    fraction <- decimal - y\n+    delta <- seconds$cast(int64()) * fraction\n+    delta <- delta$cast(int64(), safe = FALSE)\n\nReview comment:\n       You're looking for `floor` or `trunc` here, yeah? `safe = FALSE` will do truncation, but will also overflow and other things we probably don't want.\n\n##########\nFile path: r/tests/testthat/test-dplyr-funcs-datetime.R\n##########\n@@ -1130,6 +1130,17 @@ test_that(\"difftime works correctly\", {\n     test_df_with_tz\n   )\n \n+  test_df_with_tz %>%\n+    arrow_table() %>%\n+    mutate(\n+      secs2 = difftime(\n+        as.POSIXct(\"2022-03-07\", tz = \"Europe/Bucharest\"),\n+        time1,\n+        units = \"secs\"\n+      )\n+    ) %>%\n+    collect()\n\nReview comment:\n       Is there an expectation for this test? Also, is the timezone here something important about Bucharest or intended to be not-UTC default?\n\n##########\nFile path: r/tests/testthat/test-dplyr-funcs-datetime.R\n##########\n@@ -1213,3 +1224,25 @@ test_that(\"as.difftime()\", {\n       collect()\n   )\n })\n+\n+test_that(\"`decimal_date()` and `date_decimal()`\", {\n+  test_df <- tibble(\n+    a = c(2007.38998954347, 1970.77732069883, 2020.96061799722,\n+          2009.43465948477, 1975.71251467871, NA),\n+    b = as.POSIXct(\n+      c(\"2007-05-23 08:18:30\", \"1970-10-11 17:19:45\", \"2020-12-17 14:04:06\",\n+        \"2009-06-08 15:37:01\", \"1975-09-18 01:37:42\", NA)\n+    )\n\nReview comment:\n       Could we also add a test case that has `Date`s as inputs?\n\n##########\nFile path: r/R/dplyr-funcs-datetime.R\n##########\n@@ -300,6 +312,34 @@ register_bindings_duration <- function() {\n \n     build_expr(\"cast\", x, options = cast_options(to_type = duration(unit = \"s\")))\n   })\n+  register_binding(\"decimal_date\", function(date) {\n+    # browser()\n\nReview comment:\n       ```suggestion\r\n   ```\n\n##########\nFile path: r/R/dplyr-funcs-datetime.R\n##########\n@@ -261,6 +261,18 @@ register_bindings_duration <- function() {\n       time2 <- build_expr(\"cast\", time2, options = cast_options(to_type = timestamp(timezone = \"UTC\")))\n     }\n \n+    # if time1 or time2 are timestamps they cannot be expressed in \"s\" /seconds\n+    # otherwise they cannot be added subtracted with durations\n+    if (inherits(time1, \"Expression\") &&\n+        time1$type_id() %in% Type[c(\"TIMESTAMP\")] && time1$type()$unit() != 2L) {\n+      time1 <- build_expr(\"cast\", time1, options = cast_options(to_type = timestamp(\"us\")))\n+    }\n+\n+    if (inherits(time2, \"Expression\") &&\n+        time2$type_id() %in% Type[c(\"TIMESTAMP\")] && time2$type()$unit() != 2L) {\n+      time2 <- build_expr(\"cast\", time2, options = cast_options(to_type = timestamp(\"us\")))\n+    }\n+\n\nReview comment:\n       Is there a jira for clearing this up in the C++?\n\n##########\nFile path: r/R/dplyr-funcs-datetime.R\n##########\n@@ -300,6 +312,34 @@ register_bindings_duration <- function() {\n \n     build_expr(\"cast\", x, options = cast_options(to_type = duration(unit = \"s\")))\n   })\n+  register_binding(\"decimal_date\", function(date) {\n+    # browser()\n+    y <- build_expr(\"year\", date)\n+    # timezone <- call_binding(\"tz\", date)\n+    start <- call_binding(\"make_datetime\", year = y, tz = \"UTC\")\n+    end <- call_binding(\"make_datetime\", year = y + 1L, tz = \"UTC\")\n+    # maybe use yday here\n+    sofar <- call_binding(\"difftime\", date, start, units = \"secs\")\n+    total <- call_binding(\"difftime\", end, start, units = \"secs\")\n+    y + sofar$cast(int64()) / total$cast(int64())\n+  })\n+  register_binding(\"date_decimal\", function(decimal, tz = \"UTC\") {\n+    y <- build_expr(\n+      \"cast\",\n+      decimal,\n+      options = cast_options(to_type = int32(), safe = FALSE)\n+    )\n+\n+    start <- call_binding(\"make_datetime\", year = y, tz = tz)\n+    end <- call_binding(\"make_datetime\", year = y + 1, tz = tz)\n+\n+    seconds <- call_binding(\"difftime\", end, start, units = \"secs\")\n\nReview comment:\n       `seconds` here is effectively the number of seconds in a year, yeah? Would it be better or worse to have 31536000 (or 31622400 for leap years) instead of calculating and constructing it here?\n\n##########\nFile path: r/R/dplyr-funcs-datetime.R\n##########\n@@ -300,6 +312,34 @@ register_bindings_duration <- function() {\n \n     build_expr(\"cast\", x, options = cast_options(to_type = duration(unit = \"s\")))\n   })\n+  register_binding(\"decimal_date\", function(date) {\n+    # browser()\n+    y <- build_expr(\"year\", date)\n+    # timezone <- call_binding(\"tz\", date)\n+    start <- call_binding(\"make_datetime\", year = y, tz = \"UTC\")\n+    end <- call_binding(\"make_datetime\", year = y + 1L, tz = \"UTC\")\n+    # maybe use yday here\n+    sofar <- call_binding(\"difftime\", date, start, units = \"secs\")\n+    total <- call_binding(\"difftime\", end, start, units = \"secs\")\n+    y + sofar$cast(int64()) / total$cast(int64())\n+  })\n+  register_binding(\"date_decimal\", function(decimal, tz = \"UTC\") {\n+    y <- build_expr(\n+      \"cast\",\n+      decimal,\n+      options = cast_options(to_type = int32(), safe = FALSE)\n\nReview comment:\n       You're looking for floor or trunc here, yeah? safe = FALSE will do truncation, but will also overflow and other things we probably don't want.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-03-28T19:19:36.179+0000",
                    "updated": "2022-03-28T19:19:36.179+0000",
                    "started": "2022-03-28T19:19:36.179+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "748843",
                    "issueId": "13413592"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413592/worklog/748898",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "github-actions[bot] commented on pull request #12707:\nURL: https://github.com/apache/arrow/pull/12707#issuecomment-1081120099\n\n\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-03-28T20:40:39.929+0000",
                    "updated": "2022-03-28T20:40:39.929+0000",
                    "started": "2022-03-28T20:40:39.929+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "748898",
                    "issueId": "13413592"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413592/worklog/749251",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "dragosmg commented on a change in pull request #12707:\nURL: https://github.com/apache/arrow/pull/12707#discussion_r837298422\n\n\n\n##########\nFile path: r/R/dplyr-funcs-datetime.R\n##########\n@@ -300,6 +312,34 @@ register_bindings_duration <- function() {\n \n     build_expr(\"cast\", x, options = cast_options(to_type = duration(unit = \"s\")))\n   })\n+  register_binding(\"decimal_date\", function(date) {\n+    # browser()\n\nReview comment:\n       Removed\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-03-29T10:08:15.198+0000",
                    "updated": "2022-03-29T10:08:15.198+0000",
                    "started": "2022-03-29T10:08:15.198+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "749251",
                    "issueId": "13413592"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413592/worklog/749258",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "dragosmg commented on a change in pull request #12707:\nURL: https://github.com/apache/arrow/pull/12707#discussion_r837315593\n\n\n\n##########\nFile path: r/R/dplyr-funcs-datetime.R\n##########\n@@ -300,6 +312,34 @@ register_bindings_duration <- function() {\n \n     build_expr(\"cast\", x, options = cast_options(to_type = duration(unit = \"s\")))\n   })\n+  register_binding(\"decimal_date\", function(date) {\n+    # browser()\n+    y <- build_expr(\"year\", date)\n+    # timezone <- call_binding(\"tz\", date)\n+    start <- call_binding(\"make_datetime\", year = y, tz = \"UTC\")\n+    end <- call_binding(\"make_datetime\", year = y + 1L, tz = \"UTC\")\n+    # maybe use yday here\n\nReview comment:\n       I think using `difftime` might be a bit more robust since the number of seconds (not days) from the beginning of the year would give us a more precise decimal representation (and that is what lubridate does). \n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-03-29T10:28:10.015+0000",
                    "updated": "2022-03-29T10:28:10.015+0000",
                    "started": "2022-03-29T10:28:10.014+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "749258",
                    "issueId": "13413592"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413592/worklog/749260",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "dragosmg commented on a change in pull request #12707:\nURL: https://github.com/apache/arrow/pull/12707#discussion_r837315593\n\n\n\n##########\nFile path: r/R/dplyr-funcs-datetime.R\n##########\n@@ -300,6 +312,34 @@ register_bindings_duration <- function() {\n \n     build_expr(\"cast\", x, options = cast_options(to_type = duration(unit = \"s\")))\n   })\n+  register_binding(\"decimal_date\", function(date) {\n+    # browser()\n+    y <- build_expr(\"year\", date)\n+    # timezone <- call_binding(\"tz\", date)\n+    start <- call_binding(\"make_datetime\", year = y, tz = \"UTC\")\n+    end <- call_binding(\"make_datetime\", year = y + 1L, tz = \"UTC\")\n+    # maybe use yday here\n\nReview comment:\n       I think using `difftime` might be a bit more robust since the number of seconds (not days) from the beginning of the year would give us a more precise decimal representation (and that is what lubridate does). This is especially important if we need to convert a date time (something like `\"2009-06-08 15:37:01\"`) to a decimal date.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-03-29T10:29:27.327+0000",
                    "updated": "2022-03-29T10:29:27.327+0000",
                    "started": "2022-03-29T10:29:27.327+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "749260",
                    "issueId": "13413592"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413592/worklog/749261",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "dragosmg commented on a change in pull request #12707:\nURL: https://github.com/apache/arrow/pull/12707#discussion_r837316719\n\n\n\n##########\nFile path: r/R/dplyr-funcs-datetime.R\n##########\n@@ -300,6 +312,34 @@ register_bindings_duration <- function() {\n \n     build_expr(\"cast\", x, options = cast_options(to_type = duration(unit = \"s\")))\n   })\n+  register_binding(\"decimal_date\", function(date) {\n+    # browser()\n+    y <- build_expr(\"year\", date)\n+    # timezone <- call_binding(\"tz\", date)\n\nReview comment:\n       removed \n\n##########\nFile path: r/R/dplyr-funcs-datetime.R\n##########\n@@ -300,6 +312,34 @@ register_bindings_duration <- function() {\n \n     build_expr(\"cast\", x, options = cast_options(to_type = duration(unit = \"s\")))\n   })\n+  register_binding(\"decimal_date\", function(date) {\n+    # browser()\n+    y <- build_expr(\"year\", date)\n+    # timezone <- call_binding(\"tz\", date)\n+    start <- call_binding(\"make_datetime\", year = y, tz = \"UTC\")\n+    end <- call_binding(\"make_datetime\", year = y + 1L, tz = \"UTC\")\n+    # maybe use yday here\n+    sofar <- call_binding(\"difftime\", date, start, units = \"secs\")\n+    total <- call_binding(\"difftime\", end, start, units = \"secs\")\n+    y + sofar$cast(int64()) / total$cast(int64())\n+  })\n+  register_binding(\"date_decimal\", function(decimal, tz = \"UTC\") {\n+    y <- build_expr(\n+      \"cast\",\n+      decimal,\n+      options = cast_options(to_type = int32(), safe = FALSE)\n+    )\n+\n+    start <- call_binding(\"make_datetime\", year = y, tz = tz)\n+    end <- call_binding(\"make_datetime\", year = y + 1, tz = tz)\n+\n+    seconds <- call_binding(\"difftime\", end, start, units = \"secs\")\n\nReview comment:\n       done\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-03-29T10:29:49.948+0000",
                    "updated": "2022-03-29T10:29:49.948+0000",
                    "started": "2022-03-29T10:29:49.948+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "749261",
                    "issueId": "13413592"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413592/worklog/749263",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "dragosmg commented on a change in pull request #12707:\nURL: https://github.com/apache/arrow/pull/12707#discussion_r837320160\n\n\n\n##########\nFile path: r/tests/testthat/test-dplyr-funcs-datetime.R\n##########\n@@ -1130,6 +1130,17 @@ test_that(\"difftime works correctly\", {\n     test_df_with_tz\n   )\n \n+  test_df_with_tz %>%\n+    arrow_table() %>%\n+    mutate(\n+      secs2 = difftime(\n+        as.POSIXct(\"2022-03-07\", tz = \"Europe/Bucharest\"),\n+        time1,\n+        units = \"secs\"\n+      )\n+    ) %>%\n+    collect()\n\nReview comment:\n       Removed. This whole chunk is probably an oversight after a rebase. `tz` swapped for `\"Pacific/Marquesas\"`.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-03-29T10:33:48.007+0000",
                    "updated": "2022-03-29T10:33:48.007+0000",
                    "started": "2022-03-29T10:33:48.006+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "749263",
                    "issueId": "13413592"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413592/worklog/749275",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "dragosmg commented on a change in pull request #12707:\nURL: https://github.com/apache/arrow/pull/12707#discussion_r837370842\n\n\n\n##########\nFile path: r/R/dplyr-funcs-datetime.R\n##########\n@@ -300,6 +312,34 @@ register_bindings_duration <- function() {\n \n     build_expr(\"cast\", x, options = cast_options(to_type = duration(unit = \"s\")))\n   })\n+  register_binding(\"decimal_date\", function(date) {\n+    # browser()\n+    y <- build_expr(\"year\", date)\n+    # timezone <- call_binding(\"tz\", date)\n+    start <- call_binding(\"make_datetime\", year = y, tz = \"UTC\")\n+    end <- call_binding(\"make_datetime\", year = y + 1L, tz = \"UTC\")\n+    # maybe use yday here\n+    sofar <- call_binding(\"difftime\", date, start, units = \"secs\")\n+    total <- call_binding(\"difftime\", end, start, units = \"secs\")\n+    y + sofar$cast(int64()) / total$cast(int64())\n+  })\n+  register_binding(\"date_decimal\", function(decimal, tz = \"UTC\") {\n+    y <- build_expr(\n+      \"cast\",\n+      decimal,\n+      options = cast_options(to_type = int32(), safe = FALSE)\n+    )\n+\n+    start <- call_binding(\"make_datetime\", year = y, tz = tz)\n+    end <- call_binding(\"make_datetime\", year = y + 1, tz = tz)\n+\n+    seconds <- call_binding(\"difftime\", end, start, units = \"secs\")\n+    fraction <- decimal - y\n+    delta <- seconds$cast(int64()) * fraction\n+    delta <- delta$cast(int64(), safe = FALSE)\n\nReview comment:\n       Done\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-03-29T11:36:53.810+0000",
                    "updated": "2022-03-29T11:36:53.810+0000",
                    "started": "2022-03-29T11:36:53.809+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "749275",
                    "issueId": "13413592"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413592/worklog/749276",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "dragosmg commented on a change in pull request #12707:\nURL: https://github.com/apache/arrow/pull/12707#discussion_r837370961\n\n\n\n##########\nFile path: r/tests/testthat/test-dplyr-funcs-datetime.R\n##########\n@@ -1213,3 +1224,25 @@ test_that(\"as.difftime()\", {\n       collect()\n   )\n })\n+\n+test_that(\"`decimal_date()` and `date_decimal()`\", {\n+  test_df <- tibble(\n+    a = c(2007.38998954347, 1970.77732069883, 2020.96061799722,\n+          2009.43465948477, 1975.71251467871, NA),\n+    b = as.POSIXct(\n+      c(\"2007-05-23 08:18:30\", \"1970-10-11 17:19:45\", \"2020-12-17 14:04:06\",\n+        \"2009-06-08 15:37:01\", \"1975-09-18 01:37:42\", NA)\n+    )\n\nReview comment:\n       Done\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-03-29T11:37:06.334+0000",
                    "updated": "2022-03-29T11:37:06.334+0000",
                    "started": "2022-03-29T11:37:06.333+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "749276",
                    "issueId": "13413592"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413592/worklog/749279",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "dragosmg commented on a change in pull request #12707:\nURL: https://github.com/apache/arrow/pull/12707#discussion_r837376233\n\n\n\n##########\nFile path: r/R/dplyr-funcs-datetime.R\n##########\n@@ -300,6 +312,34 @@ register_bindings_duration <- function() {\n \n     build_expr(\"cast\", x, options = cast_options(to_type = duration(unit = \"s\")))\n   })\n+  register_binding(\"decimal_date\", function(date) {\n+    # browser()\n+    y <- build_expr(\"year\", date)\n+    # timezone <- call_binding(\"tz\", date)\n+    start <- call_binding(\"make_datetime\", year = y, tz = \"UTC\")\n+    end <- call_binding(\"make_datetime\", year = y + 1L, tz = \"UTC\")\n+    # maybe use yday here\n+    sofar <- call_binding(\"difftime\", date, start, units = \"secs\")\n+    total <- call_binding(\"difftime\", end, start, units = \"secs\")\n+    y + sofar$cast(int64()) / total$cast(int64())\n+  })\n+  register_binding(\"date_decimal\", function(decimal, tz = \"UTC\") {\n+    y <- build_expr(\n+      \"cast\",\n+      decimal,\n+      options = cast_options(to_type = int32(), safe = FALSE)\n\nReview comment:\n       Done\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-03-29T11:43:41.180+0000",
                    "updated": "2022-03-29T11:43:41.180+0000",
                    "started": "2022-03-29T11:43:41.180+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "749279",
                    "issueId": "13413592"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413592/worklog/749302",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "dragosmg commented on a change in pull request #12707:\nURL: https://github.com/apache/arrow/pull/12707#discussion_r837426441\n\n\n\n##########\nFile path: r/R/dplyr-funcs-datetime.R\n##########\n@@ -261,6 +261,18 @@ register_bindings_duration <- function() {\n       time2 <- build_expr(\"cast\", time2, options = cast_options(to_type = timestamp(timezone = \"UTC\")))\n     }\n \n+    # if time1 or time2 are timestamps they cannot be expressed in \"s\" /seconds\n+    # otherwise they cannot be added subtracted with durations\n+    if (inherits(time1, \"Expression\") &&\n+        time1$type_id() %in% Type[c(\"TIMESTAMP\")] && time1$type()$unit() != 2L) {\n+      time1 <- build_expr(\"cast\", time1, options = cast_options(to_type = timestamp(\"us\")))\n+    }\n+\n+    if (inherits(time2, \"Expression\") &&\n+        time2$type_id() %in% Type[c(\"TIMESTAMP\")] && time2$type()$unit() != 2L) {\n+      time2 <- build_expr(\"cast\", time2, options = cast_options(to_type = timestamp(\"us\")))\n+    }\n+\n\nReview comment:\n       https://issues.apache.org/jira/browse/ARROW-16060\r\n   \n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-03-29T12:41:26.096+0000",
                    "updated": "2022-03-29T12:41:26.096+0000",
                    "started": "2022-03-29T12:41:26.096+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "749302",
                    "issueId": "13413592"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413592/worklog/749446",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jonkeane commented on a change in pull request #12707:\nURL: https://github.com/apache/arrow/pull/12707#discussion_r837685361\n\n\n\n##########\nFile path: r/R/dplyr-funcs-datetime.R\n##########\n@@ -300,6 +314,34 @@ register_bindings_duration <- function() {\n \n     build_expr(\"cast\", x, options = cast_options(to_type = duration(unit = \"s\")))\n   })\n+  register_binding(\"decimal_date\", function(date) {\n+    y <- build_expr(\"year\", date)\n+    start <- call_binding(\"make_datetime\", year = y, tz = \"UTC\")\n+    sofar <- call_binding(\"difftime\", date, start, units = \"secs\")\n+    total <- call_binding(\n+      \"if_else\",\n+      build_expr(\"is_leap_year\", date),\n+      call_binding(\"as.integer64\", 31622400L),  # number of seconds in a leap year (366 days)\n+      call_binding(\"as.integer64\", 31536000L)   # number of seconds in a regular year (365 days)\n\nReview comment:\n       Could these be `Expression$scalar(31622400L)`?\n\n##########\nFile path: r/R/dplyr-funcs-datetime.R\n##########\n@@ -300,6 +314,34 @@ register_bindings_duration <- function() {\n \n     build_expr(\"cast\", x, options = cast_options(to_type = duration(unit = \"s\")))\n   })\n+  register_binding(\"decimal_date\", function(date) {\n+    y <- build_expr(\"year\", date)\n+    start <- call_binding(\"make_datetime\", year = y, tz = \"UTC\")\n+    sofar <- call_binding(\"difftime\", date, start, units = \"secs\")\n+    total <- call_binding(\n+      \"if_else\",\n+      build_expr(\"is_leap_year\", date),\n+      call_binding(\"as.integer64\", 31622400L),  # number of seconds in a leap year (366 days)\n+      call_binding(\"as.integer64\", 31536000L)   # number of seconds in a regular year (365 days)\n+      )\n+    y + sofar$cast(int64()) / total\n+  })\n+  register_binding(\"date_decimal\", function(decimal, tz = \"UTC\") {\n+    y <- build_expr(\"floor\", decimal)\n+\n+    start <- call_binding(\"make_datetime\", year = y, tz = tz)\n+    seconds <- call_binding(\n+      \"if_else\",\n+      build_expr(\"is_leap_year\", start),\n+      call_binding(\"as.integer64\", 31622400L),  # number of seconds in a leap year (366 days)\n+      call_binding(\"as.integer64\", 31536000L)   # number of seconds in a regular year (365 days)\n+    )\n\nReview comment:\n       I think this implementation is fine for now, but we might consider raising a jira for a C++ function that would return the number of seconds in a year. That seems like it might be useful elsewhere, and would let us catch some of the very very edge cases that might happen here (e.g. where we have leap seconds).\r\n   \r\n   \n\n##########\nFile path: r/R/dplyr-funcs-datetime.R\n##########\n@@ -261,6 +261,20 @@ register_bindings_duration <- function() {\n       time2 <- build_expr(\"cast\", time2, options = cast_options(to_type = timestamp(timezone = \"UTC\")))\n     }\n \n+    # if time1 or time2 are timestamps they cannot be expressed in \"s\" /seconds\n+    # otherwise they cannot be added subtracted with durations\n+    # TODO delete the casting to \"us\" once\n+    # https://issues.apache.org/jira/browse/ARROW-16060 is solved\n+    if (inherits(time1, \"Expression\") &&\n+        time1$type_id() %in% Type[c(\"TIMESTAMP\")] && time1$type()$unit() != 2L) {\n+      time1 <- build_expr(\"cast\", time1, options = cast_options(to_type = timestamp(\"us\")))\n+    }\n+\n+    if (inherits(time2, \"Expression\") &&\n+        time2$type_id() %in% Type[c(\"TIMESTAMP\")] && time2$type()$unit() != 2L) {\n+      time2 <- build_expr(\"cast\", time2, options = cast_options(to_type = timestamp(\"us\")))\n+    }\n+\n\nReview comment:\n       This is mostly to ensure that I'm reading this correctly: We no longer actually need these lines of code fro `date_decimal` and `decimal_date`, right? \r\n   \r\n   I know it's helpful for if someone has timestamps as seconds, so we can leave it in here, but want to confirm that's a separate thing now. \n\n##########\nFile path: r/R/dplyr-funcs-datetime.R\n##########\n@@ -300,6 +314,34 @@ register_bindings_duration <- function() {\n \n     build_expr(\"cast\", x, options = cast_options(to_type = duration(unit = \"s\")))\n   })\n+  register_binding(\"decimal_date\", function(date) {\n+    y <- build_expr(\"year\", date)\n+    start <- call_binding(\"make_datetime\", year = y, tz = \"UTC\")\n+    sofar <- call_binding(\"difftime\", date, start, units = \"secs\")\n+    total <- call_binding(\n+      \"if_else\",\n+      build_expr(\"is_leap_year\", date),\n+      call_binding(\"as.integer64\", 31622400L),  # number of seconds in a leap year (366 days)\n+      call_binding(\"as.integer64\", 31536000L)   # number of seconds in a regular year (365 days)\n\nReview comment:\n       It would be nice to do a bit of benchmarking (even micro bench with {bench}) on these implementation details (honestly, even the old implementation of doing strptime more...) I would be curious if any of them are better or worse for performance (my gut says this is quicker than strptime a bunch, but I might be totally wrong about that!)\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-03-29T16:44:53.960+0000",
                    "updated": "2022-03-29T16:44:53.960+0000",
                    "started": "2022-03-29T16:44:53.959+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "749446",
                    "issueId": "13413592"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413592/worklog/749474",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "dragosmg commented on a change in pull request #12707:\nURL: https://github.com/apache/arrow/pull/12707#discussion_r837716368\n\n\n\n##########\nFile path: r/R/dplyr-funcs-datetime.R\n##########\n@@ -261,6 +261,20 @@ register_bindings_duration <- function() {\n       time2 <- build_expr(\"cast\", time2, options = cast_options(to_type = timestamp(timezone = \"UTC\")))\n     }\n \n+    # if time1 or time2 are timestamps they cannot be expressed in \"s\" /seconds\n+    # otherwise they cannot be added subtracted with durations\n+    # TODO delete the casting to \"us\" once\n+    # https://issues.apache.org/jira/browse/ARROW-16060 is solved\n+    if (inherits(time1, \"Expression\") &&\n+        time1$type_id() %in% Type[c(\"TIMESTAMP\")] && time1$type()$unit() != 2L) {\n+      time1 <- build_expr(\"cast\", time1, options = cast_options(to_type = timestamp(\"us\")))\n+    }\n+\n+    if (inherits(time2, \"Expression\") &&\n+        time2$type_id() %in% Type[c(\"TIMESTAMP\")] && time2$type()$unit() != 2L) {\n+      time2 <- build_expr(\"cast\", time2, options = cast_options(to_type = timestamp(\"us\")))\n+    }\n+\n\nReview comment:\n       We do need them. They are used when we pass a `Date` to `decimal_date()` which ultimately passes it down to `difftime` which ultimately calls `-` which then errors.\r\n   \r\n   ```r\r\n   test_df <- tibble(\r\n        a = c(2007.38998954347, 1970.77732069883, 2020.96061799722,\r\n              2009.43465948477, 1975.71251467871, NA),\r\n        b = as.POSIXct(\r\n          c(\"2007-05-23 08:18:30\", \"1970-10-11 17:19:45\", \"2020-12-17 14:04:06\",\r\n            \"2009-06-08 15:37:01\", \"1975-09-18 01:37:42\", NA)\r\n        ),\r\n        c = as.Date(\r\n          c(\"2007-05-23\", \"1970-10-11\", \"2020-12-17\", \"2009-06-08\", \"1975-09-18\", NA)\r\n        )\r\n      )\r\n    \r\n   test_df %>%\r\n        arrow_table() %>%\r\n        mutate(\r\n          decimal_date_from_date = decimal_date(c)\r\n        ) %>%\r\n        collect()\r\n   \r\n   Error in `handle_csv_read_error()` at r/R/dplyr-collect.R:33:6:\r\n   ! NotImplemented: Function 'subtract_checked' has no kernel matching input types (array[date32[day]], array[timestamp[s]])\r\n   (...)\r\n   ``` \n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-03-29T17:12:21.353+0000",
                    "updated": "2022-03-29T17:12:21.353+0000",
                    "started": "2022-03-29T17:12:21.353+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "749474",
                    "issueId": "13413592"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413592/worklog/749488",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jonkeane commented on a change in pull request #12707:\nURL: https://github.com/apache/arrow/pull/12707#discussion_r837733257\n\n\n\n##########\nFile path: r/R/dplyr-funcs-datetime.R\n##########\n@@ -261,6 +261,20 @@ register_bindings_duration <- function() {\n       time2 <- build_expr(\"cast\", time2, options = cast_options(to_type = timestamp(timezone = \"UTC\")))\n     }\n \n+    # if time1 or time2 are timestamps they cannot be expressed in \"s\" /seconds\n+    # otherwise they cannot be added subtracted with durations\n+    # TODO delete the casting to \"us\" once\n+    # https://issues.apache.org/jira/browse/ARROW-16060 is solved\n+    if (inherits(time1, \"Expression\") &&\n+        time1$type_id() %in% Type[c(\"TIMESTAMP\")] && time1$type()$unit() != 2L) {\n+      time1 <- build_expr(\"cast\", time1, options = cast_options(to_type = timestamp(\"us\")))\n+    }\n+\n+    if (inherits(time2, \"Expression\") &&\n+        time2$type_id() %in% Type[c(\"TIMESTAMP\")] && time2$type()$unit() != 2L) {\n+      time2 <- build_expr(\"cast\", time2, options = cast_options(to_type = timestamp(\"us\")))\n+    }\n+\n\nReview comment:\n       Ah, got it\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-03-29T17:31:59.187+0000",
                    "updated": "2022-03-29T17:31:59.187+0000",
                    "started": "2022-03-29T17:31:59.187+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "749488",
                    "issueId": "13413592"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413592/worklog/749577",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "dragosmg commented on a change in pull request #12707:\nURL: https://github.com/apache/arrow/pull/12707#discussion_r837841240\n\n\n\n##########\nFile path: r/R/dplyr-funcs-datetime.R\n##########\n@@ -300,6 +314,34 @@ register_bindings_duration <- function() {\n \n     build_expr(\"cast\", x, options = cast_options(to_type = duration(unit = \"s\")))\n   })\n+  register_binding(\"decimal_date\", function(date) {\n+    y <- build_expr(\"year\", date)\n+    start <- call_binding(\"make_datetime\", year = y, tz = \"UTC\")\n+    sofar <- call_binding(\"difftime\", date, start, units = \"secs\")\n+    total <- call_binding(\n+      \"if_else\",\n+      build_expr(\"is_leap_year\", date),\n+      call_binding(\"as.integer64\", 31622400L),  # number of seconds in a leap year (366 days)\n+      call_binding(\"as.integer64\", 31536000L)   # number of seconds in a regular year (365 days)\n\nReview comment:\n       You are 100% right. The newer implementation is quicker. By how much - it depends, but always quicker. In general it takes half the time.\r\n   ![image](https://user-images.githubusercontent.com/13176361/160692542-c110b82a-19f2-43e2-938c-5e60e06fc7a2.png)\r\n   \r\n    \n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-03-29T19:32:02.145+0000",
                    "updated": "2022-03-29T19:32:02.145+0000",
                    "started": "2022-03-29T19:32:02.144+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "749577",
                    "issueId": "13413592"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413592/worklog/749584",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "dragosmg commented on a change in pull request #12707:\nURL: https://github.com/apache/arrow/pull/12707#discussion_r837850177\n\n\n\n##########\nFile path: r/R/dplyr-funcs-datetime.R\n##########\n@@ -300,6 +314,34 @@ register_bindings_duration <- function() {\n \n     build_expr(\"cast\", x, options = cast_options(to_type = duration(unit = \"s\")))\n   })\n+  register_binding(\"decimal_date\", function(date) {\n+    y <- build_expr(\"year\", date)\n+    start <- call_binding(\"make_datetime\", year = y, tz = \"UTC\")\n+    sofar <- call_binding(\"difftime\", date, start, units = \"secs\")\n+    total <- call_binding(\n+      \"if_else\",\n+      build_expr(\"is_leap_year\", date),\n+      call_binding(\"as.integer64\", 31622400L),  # number of seconds in a leap year (366 days)\n+      call_binding(\"as.integer64\", 31536000L)   # number of seconds in a regular year (365 days)\n+      )\n+    y + sofar$cast(int64()) / total\n+  })\n+  register_binding(\"date_decimal\", function(decimal, tz = \"UTC\") {\n+    y <- build_expr(\"floor\", decimal)\n+\n+    start <- call_binding(\"make_datetime\", year = y, tz = tz)\n+    seconds <- call_binding(\n+      \"if_else\",\n+      build_expr(\"is_leap_year\", start),\n+      call_binding(\"as.integer64\", 31622400L),  # number of seconds in a leap year (366 days)\n+      call_binding(\"as.integer64\", 31536000L)   # number of seconds in a regular year (365 days)\n+    )\n\nReview comment:\n       https://issues.apache.org/jira/browse/ARROW-16066\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-03-29T19:44:39.035+0000",
                    "updated": "2022-03-29T19:44:39.035+0000",
                    "started": "2022-03-29T19:44:39.034+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "749584",
                    "issueId": "13413592"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413592/worklog/749585",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "dragosmg commented on a change in pull request #12707:\nURL: https://github.com/apache/arrow/pull/12707#discussion_r837850177\n\n\n\n##########\nFile path: r/R/dplyr-funcs-datetime.R\n##########\n@@ -300,6 +314,34 @@ register_bindings_duration <- function() {\n \n     build_expr(\"cast\", x, options = cast_options(to_type = duration(unit = \"s\")))\n   })\n+  register_binding(\"decimal_date\", function(date) {\n+    y <- build_expr(\"year\", date)\n+    start <- call_binding(\"make_datetime\", year = y, tz = \"UTC\")\n+    sofar <- call_binding(\"difftime\", date, start, units = \"secs\")\n+    total <- call_binding(\n+      \"if_else\",\n+      build_expr(\"is_leap_year\", date),\n+      call_binding(\"as.integer64\", 31622400L),  # number of seconds in a leap year (366 days)\n+      call_binding(\"as.integer64\", 31536000L)   # number of seconds in a regular year (365 days)\n+      )\n+    y + sofar$cast(int64()) / total\n+  })\n+  register_binding(\"date_decimal\", function(decimal, tz = \"UTC\") {\n+    y <- build_expr(\"floor\", decimal)\n+\n+    start <- call_binding(\"make_datetime\", year = y, tz = tz)\n+    seconds <- call_binding(\n+      \"if_else\",\n+      build_expr(\"is_leap_year\", start),\n+      call_binding(\"as.integer64\", 31622400L),  # number of seconds in a leap year (366 days)\n+      call_binding(\"as.integer64\", 31536000L)   # number of seconds in a regular year (365 days)\n+    )\n\nReview comment:\n       [ARROW-16066](https://issues.apache.org/jira/browse/ARROW-16066)\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-03-29T19:45:13.424+0000",
                    "updated": "2022-03-29T19:45:13.424+0000",
                    "started": "2022-03-29T19:45:13.423+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "749585",
                    "issueId": "13413592"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413592/worklog/749668",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "jonkeane commented on a change in pull request #12707:\nURL: https://github.com/apache/arrow/pull/12707#discussion_r837944089\n\n\n\n##########\nFile path: r/R/dplyr-funcs-datetime.R\n##########\n@@ -300,6 +314,34 @@ register_bindings_duration <- function() {\n \n     build_expr(\"cast\", x, options = cast_options(to_type = duration(unit = \"s\")))\n   })\n+  register_binding(\"decimal_date\", function(date) {\n+    y <- build_expr(\"year\", date)\n+    start <- call_binding(\"make_datetime\", year = y, tz = \"UTC\")\n+    sofar <- call_binding(\"difftime\", date, start, units = \"secs\")\n+    total <- call_binding(\n+      \"if_else\",\n+      build_expr(\"is_leap_year\", date),\n+      call_binding(\"as.integer64\", 31622400L),  # number of seconds in a leap year (366 days)\n+      call_binding(\"as.integer64\", 31536000L)   # number of seconds in a regular year (365 days)\n\nReview comment:\n       What kind of scale are those numbers on? Could you post or link to the code you used to run that, I would be interested to see how you got there!\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-03-29T21:58:55.107+0000",
                    "updated": "2022-03-29T21:58:55.107+0000",
                    "started": "2022-03-29T21:58:55.106+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "749668",
                    "issueId": "13413592"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413592/worklog/749960",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "dragosmg commented on a change in pull request #12707:\nURL: https://github.com/apache/arrow/pull/12707#discussion_r838323417\n\n\n\n##########\nFile path: r/R/dplyr-funcs-datetime.R\n##########\n@@ -300,6 +314,34 @@ register_bindings_duration <- function() {\n \n     build_expr(\"cast\", x, options = cast_options(to_type = duration(unit = \"s\")))\n   })\n+  register_binding(\"decimal_date\", function(date) {\n+    y <- build_expr(\"year\", date)\n+    start <- call_binding(\"make_datetime\", year = y, tz = \"UTC\")\n+    sofar <- call_binding(\"difftime\", date, start, units = \"secs\")\n+    total <- call_binding(\n+      \"if_else\",\n+      build_expr(\"is_leap_year\", date),\n+      call_binding(\"as.integer64\", 31622400L),  # number of seconds in a leap year (366 days)\n+      call_binding(\"as.integer64\", 31536000L)   # number of seconds in a regular year (365 days)\n\nReview comment:\n       https://gist.github.com/dragosmg/673a5b23a434adbe0d4e972d7b8a4620\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-03-30T09:25:20.912+0000",
                    "updated": "2022-03-30T09:25:20.912+0000",
                    "started": "2022-03-30T09:25:20.912+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "749960",
                    "issueId": "13413592"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413592/worklog/749966",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "dragosmg commented on a change in pull request #12707:\nURL: https://github.com/apache/arrow/pull/12707#discussion_r838326323\n\n\n\n##########\nFile path: r/R/dplyr-funcs-datetime.R\n##########\n@@ -300,6 +314,34 @@ register_bindings_duration <- function() {\n \n     build_expr(\"cast\", x, options = cast_options(to_type = duration(unit = \"s\")))\n   })\n+  register_binding(\"decimal_date\", function(date) {\n+    y <- build_expr(\"year\", date)\n+    start <- call_binding(\"make_datetime\", year = y, tz = \"UTC\")\n+    sofar <- call_binding(\"difftime\", date, start, units = \"secs\")\n+    total <- call_binding(\n+      \"if_else\",\n+      build_expr(\"is_leap_year\", date),\n+      call_binding(\"as.integer64\", 31622400L),  # number of seconds in a leap year (366 days)\n+      call_binding(\"as.integer64\", 31536000L)   # number of seconds in a regular year (365 days)\n\nReview comment:\n       ```r\r\n   summary(test1, relative = TRUE)\r\n   #>  A tibble: 2 \u00d7 13\r\n   #>   expression           min median `itr/sec` mem_alloc `gc/sec` n_itr  n_gc total_time result   memory     time       gc      \r\n   #>   <bch:expr>         <dbl>  <dbl>     <dbl>     <dbl>    <dbl> <int> <dbl>   <bch:tm> <list>   <list>     <list>     <list>  \r\n   #> 1 new_implementation  1      1         1.40      1        1.03    94     6      1.32s <tibble> <Rprofmem> <bench_tm> <tibble>\r\n   #> 2 old_implementation  1.46   1.46      1         1.27     1       92     8      1.81s <tibble> <Rprofmem> <bench_tm> <tibble>\r\n   \r\n   test1\r\n   #>  A tibble: 2 \u00d7 13\r\n   #>   expression              min  median `itr/sec` mem_alloc `gc/sec` n_itr  n_gc total_time result   memory     time       gc      \r\n   #>   <bch:expr>         <bch:tm> <bch:t>     <dbl> <bch:byt>    <dbl> <int> <dbl>   <bch:tm> <list>   <list>     <list>     <list>  \r\n   #> 1 new_implementation   12.7ms  13.3ms      71.1    76.1KB     4.54    94     6      1.32s <tibble> <Rprofmem> <bench_tm> <tibble>\r\n   #> 2 old_implementation   18.5ms  19.4ms      50.8    96.9KB     4.42    92     8      1.81s <tibble> <Rprofmem> <bench_tm> <tibble>\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-03-30T09:28:22.791+0000",
                    "updated": "2022-03-30T09:28:22.791+0000",
                    "started": "2022-03-30T09:28:22.790+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "749966",
                    "issueId": "13413592"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/7",
            "id": "7",
            "description": "The sub-task of the issue",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21146&avatarType=issuetype",
            "name": "Sub-task",
            "subtask": true,
            "avatarId": 21146
        },
        "timespent": 16800,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@1e20d37d[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@33c80a24[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@4e1e5252[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@3df4f89f[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@7c2b3e13[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@44e80a85[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@78585c88[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@6272731c[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@470c12e7[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@433484a1[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@79b23c53[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@8295aea[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 16800,
        "customfield_12312520": null,
        "customfield_12312521": "Mon Apr 11 18:16:21 UTC 2022",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2022-04-11T18:16:21.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-14810/watchers",
            "watchCount": 1,
            "isWatching": false
        },
        "created": "2021-11-24T11:53:25.000+0000",
        "updated": "2022-08-16T08:48:14.000+0000",
        "timeoriginalestimate": null,
        "description": null,
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "4h 40m",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 16800
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[R] Implement bindings for lubridate's date_decimal and decimal_date",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13413592/comment/17520753",
                    "id": "17520753",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=jonkeane",
                        "name": "jonkeane",
                        "key": "jonkeane",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34057",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34057",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34057",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34057"
                        },
                        "displayName": "Jonathan Keane",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "Issue resolved by pull request 12707\n[https://github.com/apache/arrow/pull/12707]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=jonkeane",
                        "name": "jonkeane",
                        "key": "jonkeane",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34057",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34057",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34057",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34057"
                        },
                        "displayName": "Jonathan Keane",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2022-04-11T18:16:21.758+0000",
                    "updated": "2022-04-11T18:16:21.758+0000"
                }
            ],
            "maxResults": 1,
            "total": 1,
            "startAt": 0
        },
        "customfield_12311820": "0|z0x1o0:",
        "customfield_12314139": null
    }
}