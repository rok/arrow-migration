{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13417347",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13417347",
    "key": "ARROW-15092",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12351051",
                "id": "12351051",
                "description": "",
                "name": "8.0.0",
                "archived": false,
                "released": true,
                "releaseDate": "2022-05-06"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "name": "Major",
            "id": "3"
        },
        "labels": [
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12350712",
                "id": "12350712",
                "description": "",
                "name": "6.0.1",
                "archived": false,
                "released": true,
                "releaseDate": "2021-11-18"
            }
        ],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [
            {
                "id": "12633019",
                "self": "https://issues.apache.org/jira/rest/api/2/issueLink/12633019",
                "type": {
                    "id": "10020",
                    "name": "Cloners",
                    "inward": "is cloned by",
                    "outward": "is a clone of",
                    "self": "https://issues.apache.org/jira/rest/api/2/issueLinkType/10020"
                },
                "inwardIssue": {
                    "id": "13427125",
                    "key": "ARROW-15608",
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13427125",
                    "fields": {
                        "summary": "[R] create_package_with_all_dependencies() fails on Windows 10",
                        "status": {
                            "self": "https://issues.apache.org/jira/rest/api/2/status/6",
                            "description": "The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/closed.png",
                            "name": "Closed",
                            "id": "6",
                            "statusCategory": {
                                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                                "id": 3,
                                "key": "done",
                                "colorName": "green",
                                "name": "Done"
                            }
                        },
                        "priority": {
                            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
                            "name": "Major",
                            "id": "3"
                        },
                        "issuetype": {
                            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
                            "id": "1",
                            "description": "A problem which impairs or prevents the functions of the product.",
                            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
                            "name": "Bug",
                            "subtask": false,
                            "avatarId": 21133
                        }
                    }
                }
            },
            {
                "id": "12637455",
                "self": "https://issues.apache.org/jira/rest/api/2/issueLink/12637455",
                "type": {
                    "id": "12310660",
                    "name": "Completes",
                    "inward": "is fixed by",
                    "outward": "fixes",
                    "self": "https://issues.apache.org/jira/rest/api/2/issueLinkType/12310660"
                },
                "outwardIssue": {
                    "id": "13437548",
                    "key": "ARROW-16103",
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13437548",
                    "fields": {
                        "summary": "[R] arrow::create_package_with_all_dependencies() fails to download third party dependencies",
                        "status": {
                            "self": "https://issues.apache.org/jira/rest/api/2/status/6",
                            "description": "The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/closed.png",
                            "name": "Closed",
                            "id": "6",
                            "statusCategory": {
                                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                                "id": 3,
                                "key": "done",
                                "colorName": "green",
                                "name": "Done"
                            }
                        },
                        "priority": {
                            "self": "https://issues.apache.org/jira/rest/api/2/priority/4",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
                            "name": "Minor",
                            "id": "4"
                        },
                        "issuetype": {
                            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
                            "id": "1",
                            "description": "A problem which impairs or prevents the functions of the product.",
                            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
                            "name": "Bug",
                            "subtask": false,
                            "avatarId": 21133
                        }
                    }
                }
            },
            {
                "id": "12638568",
                "self": "https://issues.apache.org/jira/rest/api/2/issueLink/12638568",
                "type": {
                    "id": "12310000",
                    "name": "Duplicate",
                    "inward": "is duplicated by",
                    "outward": "duplicates",
                    "self": "https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"
                },
                "inwardIssue": {
                    "id": "13427125",
                    "key": "ARROW-15608",
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13427125",
                    "fields": {
                        "summary": "[R] create_package_with_all_dependencies() fails on Windows 10",
                        "status": {
                            "self": "https://issues.apache.org/jira/rest/api/2/status/6",
                            "description": "The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/closed.png",
                            "name": "Closed",
                            "id": "6",
                            "statusCategory": {
                                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                                "id": 3,
                                "key": "done",
                                "colorName": "green",
                                "name": "Done"
                            }
                        },
                        "priority": {
                            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
                            "name": "Major",
                            "id": "3"
                        },
                        "issuetype": {
                            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
                            "id": "1",
                            "description": "A problem which impairs or prevents the functions of the product.",
                            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
                            "name": "Bug",
                            "subtask": false,
                            "avatarId": 21133
                        }
                    }
                }
            },
            {
                "id": "12637771",
                "self": "https://issues.apache.org/jira/rest/api/2/issueLink/12637771",
                "type": {
                    "id": "10030",
                    "name": "Reference",
                    "inward": "is related to",
                    "outward": "relates to",
                    "self": "https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"
                },
                "outwardIssue": {
                    "id": "13437548",
                    "key": "ARROW-16103",
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13437548",
                    "fields": {
                        "summary": "[R] arrow::create_package_with_all_dependencies() fails to download third party dependencies",
                        "status": {
                            "self": "https://issues.apache.org/jira/rest/api/2/status/6",
                            "description": "The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/closed.png",
                            "name": "Closed",
                            "id": "6",
                            "statusCategory": {
                                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                                "id": 3,
                                "key": "done",
                                "colorName": "green",
                                "name": "Done"
                            }
                        },
                        "priority": {
                            "self": "https://issues.apache.org/jira/rest/api/2/priority/4",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
                            "name": "Minor",
                            "id": "4"
                        },
                        "issuetype": {
                            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
                            "id": "1",
                            "description": "A problem which impairs or prevents the functions of the product.",
                            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
                            "name": "Bug",
                            "subtask": false,
                            "avatarId": 21133
                        }
                    }
                }
            }
        ],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=karldw",
            "name": "karldw",
            "key": "karldw",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=karldw&avatarId=39070",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=karldw&avatarId=39070",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=karldw&avatarId=39070",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=karldw&avatarId=39070"
            },
            "displayName": "Karl Dunkle Werner",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12333008",
                "id": "12333008",
                "name": "R"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=max_koe",
            "name": "max_koe",
            "key": "JIRAUSER281318",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34050",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34050",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34050",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34050"
            },
            "displayName": "Maximilian K\u00f6nig",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=max_koe",
            "name": "max_koe",
            "key": "JIRAUSER281318",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34050",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34050",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34050",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34050"
            },
            "displayName": "Maximilian K\u00f6nig",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "aggregateprogress": {
            "progress": 17400,
            "total": 17400,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 17400,
            "total": 17400,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-15092/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 29,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13417347/worklog/754879",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "karldw opened a new pull request, #12849:\nURL: https://github.com/apache/arrow/pull/12849\n\n   This PR aims to address ARROW-15092 and ARROW-15608, allowing the function `create_package_with_all_dependencies()` to be run on non-linux systems.\r\n   \r\n   To accomplish this, the code parses the [versions.txt](https://github.com/apache/arrow/blob/master/cpp/thirdparty/versions.txt) file in R. This process is a little hairy, because the existing code in versions.txt and [download_dependencies.sh](https://github.com/apache/arrow/blob/master/cpp/thirdparty/download_dependencies.sh) depend on shell substitution and array parsing.\r\n   \r\n   In writing this PR, I assumed that only base R functions were available, and the format of versions.txt couldn't be changed to make things easier. I wrote some roxygen-like documentation, but didn't actually want to generate the `*.Rd` files, so just started the lines with `#` instead of `#'`.\r\n   \r\n   I'd be very grateful for feedback here. The first question is whether this approach makes sense at a macro level, and then whether my implementation seems reasonable.\n\n\n",
                    "created": "2022-04-09T03:14:31.601+0000",
                    "updated": "2022-04-09T03:14:31.601+0000",
                    "started": "2022-04-09T03:14:31.600+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "754879",
                    "issueId": "13417347"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13417347/worklog/754880",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "github-actions[bot] commented on PR #12849:\nURL: https://github.com/apache/arrow/pull/12849#issuecomment-1093630332\n\n   https://issues.apache.org/jira/browse/ARROW-15092\n\n\n",
                    "created": "2022-04-09T03:14:47.983+0000",
                    "updated": "2022-04-09T03:14:47.983+0000",
                    "started": "2022-04-09T03:14:47.983+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "754880",
                    "issueId": "13417347"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13417347/worklog/754881",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "github-actions[bot] commented on PR #12849:\nURL: https://github.com/apache/arrow/pull/12849#issuecomment-1093630345\n\n   :warning: Ticket **has not been started in JIRA**, please click 'Start Progress'.\n\n\n",
                    "created": "2022-04-09T03:14:49.767+0000",
                    "updated": "2022-04-09T03:14:49.767+0000",
                    "started": "2022-04-09T03:14:49.766+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "754881",
                    "issueId": "13417347"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13417347/worklog/755244",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "assignUser commented on code in PR #12849:\nURL: https://github.com/apache/arrow/pull/12849#discussion_r847372973\n\n\n##########\nr/R/install-arrow.R:\n##########\n@@ -137,6 +137,262 @@ reload_arrow <- function() {\n   }\n }\n \n+# Substitute like the bash shell\n+#\n+# @param one_string A length-1 character vector\n+# @param possible_values A dictionary-ish set of variables that could provide\n+#   values to substitute in.\n+# @return `one_string`, with values substituted like bash would.\n+#\n+# Only supports a small subset of bash substitution patterns. May have multiple\n+# bash variables in `one_string`\n+# Used as a helper to parse versions.txt\n+..install_substitute_like_bash <- function(one_string, possible_values) {\n\nReview Comment:\n   I think it is not necessary to use the dot-prefix for internal functions as it is done nowhere else in the package. Nice job keeping a consistent naming scheme though! \ud83d\udc4d \n\n\n\n##########\nr/R/install-arrow.R:\n##########\n@@ -137,6 +137,262 @@ reload_arrow <- function() {\n   }\n }\n \n+# Substitute like the bash shell\n+#\n+# @param one_string A length-1 character vector\n+# @param possible_values A dictionary-ish set of variables that could provide\n+#   values to substitute in.\n+# @return `one_string`, with values substituted like bash would.\n+#\n+# Only supports a small subset of bash substitution patterns. May have multiple\n+# bash variables in `one_string`\n+# Used as a helper to parse versions.txt\n+..install_substitute_like_bash <- function(one_string, possible_values) {\n+  stopifnot(\n+    !is.null(names(possible_values)),\n+    !any(names(possible_values) == \"\"),\n+    anyDuplicated(names(possible_values)) == 0,\n+    length(one_string) == 1,\n+    !anyNA(possible_values)\n+  )\n+  # Find the name of the version we want, something like\n+  # ARROW_RAPIDJSON_BUILD_VERSION\n+  # The `(//./_|:1)` is a special case to handle some bash fanciness.\n+  version_regex <- \"\\\\$\\\\{(ARROW_[A-Z0-9_]+?_VERSION)(//./_|:1)?\\\\}\"\n+  # Extract the matched groups. If the pattern occurs multiple times, we need\n+  # all (non-overlapping) matches. stringr::str_extract_all() or\n+  # base::gregexec() would be useful here, but gregexec was only introduced in\n+  # R 4.1.\n+  matched_substrings <- regmatches(\n+    one_string,\n+    gregexpr(version_regex, one_string, perl = TRUE)\n+  )[[1]] # Subset [[1]] because one_string has length 1\n+  # `matched_substrings` is a character vector with length equal to the number\n+  # of non-overlapping matches of `version_regex` in `one_string`. `match_list`\n+  # is a list (same length as `matched_substrings`), where each list element is\n+  # a length-3 character vector. The first element of the vector is the value\n+  # from `matched_substrings` (e.g. \"${ARROW_ZZZ_VERSION//./_}\"). The following\n+  #  two values are the captured groups specified in `version_regex` e.g.\n+  # \"ARROW_ZZZ_VERSION\" and \"//./_\".\n+  match_list <- regmatches(\n+    matched_substrings,\n+    regexec(version_regex, matched_substrings, perl = TRUE)\n+  )\n+  # Small helper to take slices of match_list\n+  extract_chr_by_idx <- function(lst, idx) {\n+    vapply(lst, function(x) x[idx], FUN.VALUE = character(1L))\n+  }\n+  string_to_sub <- extract_chr_by_idx(match_list, 1L)\n+  version_varnames <- extract_chr_by_idx(match_list, 2L)\n+  bash_special_cases <- extract_chr_by_idx(match_list, 3L)\n+  version_values <- possible_values[version_varnames]\n+  version_values <- ifelse(\n+    bash_special_cases == \"\", version_values, ifelse(\n+      bash_special_cases == \":1\", substring(version_values, 2), ifelse(\n+        bash_special_cases == \"//./_\", gsub(\".\", \"_\", version_values, fixed = TRUE),\n+        NA_character_ # otherwise\n+      )\n+    )\n+  )\n+  num_to_sub <- length(string_to_sub)\n+  stopifnot(\n+    all(version_varnames %in% names(possible_values)),\n+    !anyNA(version_values),\n+    num_to_sub >= 1,\n+    num_to_sub < 10 # Something has gone wrong if we're doing 10+\n+  )\n+  out <- one_string\n+  for (idx in seq_len(num_to_sub)) {\n+    # not gsub in case there are duplicates\n+    out <- sub(string_to_sub[idx], version_values[idx], out, fixed = TRUE)\n+  }\n+  out\n+}\n+\n+# Substitute all values in the filenames and URLs of versions.txt\n+#\n+# @param deps_unsubstituted A list with two elements, `filenames` and `urls`\n+# @param possible_values A dictionary-ish set of variables that could provide\n+#   values to substitute in.\n+# @return A list with two elements, `filenames` and `urls`, with values\n+#   substituted into the strings like bash would.\n+#\n+# Used as a helper to parse versions.txt\n+..install_substitute_all <- function(deps_unsubstituted, possible_values) {\n+  file_substituted <- vapply(\n+    deps_unsubstituted$filenames,\n+    ..install_substitute_like_bash,\n+    FUN.VALUE = character(1),\n+    possible_values = possible_values\n+  )\n+  url_substituted <- vapply(\n+    deps_unsubstituted$urls,\n+    ..install_substitute_like_bash,\n+    FUN.VALUE = character(1),\n+    possible_values = possible_values\n+  )\n+  list(\n+    filenames = unname(file_substituted),\n+    urls = unname(url_substituted)\n+  )\n+}\n+\n+# Parse the version lines portion of versions.txt\n+#\n+# @param version_lines A character vector of lines read from versions.txt\n+# @return The parsed and bash-substiuted version values\n+#\n+# Used as a helper to parse versions.txt\n+..install_parse_version_lines <- function(version_lines) {\n+  version_lines <- trimws(version_lines)\n+  version_regex <- \"^(ARROW_[A-Z0-9_]+_)(VERSION|SHA256_CHECKSUM)=([^=]+)$\"\n+  if (!all(grepl(version_regex, version_lines, perl = TRUE))) {\n+    stop(\"Failed to parse version lines\")\n+  }\n+  match_list <- regmatches(\n+    version_lines,\n+    regexec(version_regex, version_lines, perl = TRUE)\n+  )\n+  # Find the lines where the second regex match group is that are \"VERSION\" (as\n+  # opposed to \"SHA256_CHECKSUM\")\n+  version_idx <- vapply(\n+    match_list,\n+    function(m) m[[3]] == \"VERSION\",\n+    FUN.VALUE = logical(1)\n+  )\n+  version_matches <- match_list[version_idx]\n+  # Fancy indexing here is just to pull the first and second regex match out,\n+  # e.g. \"ARROW_RAPIDJSON_BUILD_\" and \"VERSION\"\n+  version_varnames <- vapply(\n+    version_matches,\n+    function(m) paste0(m[[2]], m[[3]]),\n+    FUN.VALUE = character(1)\n+  )\n+  version_values <- vapply(version_matches,\n+    function(m) m[[4]],\n+    FUN.VALUE = character(1)\n+  )\n+  names(version_values) <- version_varnames\n+  return(version_values)\n+}\n+\n+# Parse the URL + filename array portion of versions.txt\n+#\n+# @param array_lines Characer vector of lines from the versions.txt file with\n+#   the filename and URL array\n+# @return A list with two character vectors, with names `filenames` and `urls`\n+#\n+# The output of this function has split out the filename and URL components,\n+# but has not yet substituted in the version numbers. The output is next passed\n+# to `..install_substitute_all()`\n+#\n+# Used as a helper to parse versions.txt\n+..install_parse_dependency_array <- function(array_lines) {\n+  stopifnot(\n+    length(array_lines) >= 1,\n+    is.character(array_lines),\n+    !anyNA(array_lines)\n+  )\n+  array_lines <- trimws(array_lines)\n+\n+  # Parse the array_lines with a regex. Each line of the array is a different\n+  # component, with a format like `\"<component name> <filename> <url>\"` (quotes\n+  # included). The filename and URL include some version string that's defined\n+  # earlier in the file.\n+  # Regex in words:\n+  # Start with `\"ARROW_`, then any capital ASCII letter, number, or underscore.\n+  # After a space, find anything except a space, colon, or forward slash. (No\n+  # space is essential, and would be essential to parsing the array in bash.\n+  # The colon and slash are just basic guards that this is a filename.) Next, a\n+  # space. Then a URL, starting with https://, and including anything except a\n+  # space. (This is the URL before substituting in the version sting, so normal\n+  # URL parsing rules don't apply.)\n+  dep_array_regex <- '^\"(ARROW_[A-Z0-9_]+_URL) ([^ :/\"]+) (https://[^ \"]+)\"$'\n+  if (!all(grepl(dep_array_regex, array_lines, perl = TRUE))) {\n+    stop(\"Cannot parse thirdparty dependency array in expected format.\")\n+  }\n+  list(\n+    filenames = gsub(dep_array_regex, \"\\\\2\", array_lines, perl = TRUE),\n+    urls      = gsub(dep_array_regex, \"\\\\3\", array_lines, perl = TRUE)\n+  )\n+}\n+\n+# Parse the versions.txt file\n+#\n+# @param versions_file Filename pointing to versions.txt\n+# @return The parsed and ready-to-use values, as a named list of vectors\n+#\n+#\n+# The versions.txt file is included as part of the R tar file, and is here:\n+# https://github.com/apache/arrow/blob/master/cpp/thirdparty/versions.txt\n+#\n+# Used as a helper to parse versions.txt\n+..install_parse_lines <- function(versions_file) {\n+  orig_lines <- readLines(versions_file)\n+\n+  lines <- gsub(\"#.*\", \"\", orig_lines, perl = TRUE)\n+  lines <- lines[lines != \"\"]\n+\n+  dep_array_start_idx <- grep(\"^DEPENDENCIES=\\\\($\", lines, perl = TRUE)\n+  dep_array_lines <- lines[\n+    seq.int(from = dep_array_start_idx + 1, to = length(lines) - 1, by = 1)\n+  ]\n+  version_lines <- lines[seq.int(1, dep_array_start_idx - 1, by = 1)]\n+  version_info <- ..install_parse_version_lines(version_lines)\n+\n+  failed_to_parse <- c(\n+    anyNA(orig_lines),\n+    length(orig_lines) > 1000,\n+    length(lines) == 0,\n+    length(dep_array_start_idx) != 1,\n+    dep_array_start_idx <= 1,\n+    dep_array_start_idx >= length(lines) - 3,\n+    lines[length(lines)] != \")\",\n+    length(dep_array_lines) == 0,\n+    anyNA(version_info)\n+  )\n+\n+  if (any(failed_to_parse)) {\n+    stop(\n\nReview Comment:\n   You could use `rlang::abort` here but that is very heterogenous in the package so \ud83e\udd37 (and you aimed for base R which is good!) \n\n\n\n##########\nr/R/install-arrow.R:\n##########\n@@ -137,6 +137,262 @@ reload_arrow <- function() {\n   }\n }\n \n+# Substitute like the bash shell\n+#\n+# @param one_string A length-1 character vector\n+# @param possible_values A dictionary-ish set of variables that could provide\n+#   values to substitute in.\n+# @return `one_string`, with values substituted like bash would.\n+#\n+# Only supports a small subset of bash substitution patterns. May have multiple\n+# bash variables in `one_string`\n+# Used as a helper to parse versions.txt\n+..install_substitute_like_bash <- function(one_string, possible_values) {\n+  stopifnot(\n+    !is.null(names(possible_values)),\n+    !any(names(possible_values) == \"\"),\n+    anyDuplicated(names(possible_values)) == 0,\n+    length(one_string) == 1,\n+    !anyNA(possible_values)\n+  )\n+  # Find the name of the version we want, something like\n+  # ARROW_RAPIDJSON_BUILD_VERSION\n+  # The `(//./_|:1)` is a special case to handle some bash fanciness.\n+  version_regex <- \"\\\\$\\\\{(ARROW_[A-Z0-9_]+?_VERSION)(//./_|:1)?\\\\}\"\n+  # Extract the matched groups. If the pattern occurs multiple times, we need\n+  # all (non-overlapping) matches. stringr::str_extract_all() or\n+  # base::gregexec() would be useful here, but gregexec was only introduced in\n+  # R 4.1.\n+  matched_substrings <- regmatches(\n+    one_string,\n+    gregexpr(version_regex, one_string, perl = TRUE)\n+  )[[1]] # Subset [[1]] because one_string has length 1\n+  # `matched_substrings` is a character vector with length equal to the number\n+  # of non-overlapping matches of `version_regex` in `one_string`. `match_list`\n+  # is a list (same length as `matched_substrings`), where each list element is\n+  # a length-3 character vector. The first element of the vector is the value\n+  # from `matched_substrings` (e.g. \"${ARROW_ZZZ_VERSION//./_}\"). The following\n+  #  two values are the captured groups specified in `version_regex` e.g.\n+  # \"ARROW_ZZZ_VERSION\" and \"//./_\".\n\nReview Comment:\n   \ud83d\udc4d \n\n\n\n##########\nr/R/install-arrow.R:\n##########\n@@ -137,6 +137,262 @@ reload_arrow <- function() {\n   }\n }\n \n+# Substitute like the bash shell\n+#\n+# @param one_string A length-1 character vector\n+# @param possible_values A dictionary-ish set of variables that could provide\n+#   values to substitute in.\n+# @return `one_string`, with values substituted like bash would.\n+#\n+# Only supports a small subset of bash substitution patterns. May have multiple\n+# bash variables in `one_string`\n+# Used as a helper to parse versions.txt\n+..install_substitute_like_bash <- function(one_string, possible_values) {\n\nReview Comment:\n   > I wrote some roxygen-like documentation, but didn't actually want to generate the `*.Rd` files, so just started the lines with `#` instead of `#'`.\r\n   \r\n   You can prevent the creation of an Rd file by using `@noRd` .\n\n\n\n",
                    "created": "2022-04-11T14:21:40.949+0000",
                    "updated": "2022-04-11T14:21:40.949+0000",
                    "started": "2022-04-11T14:21:40.948+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "755244",
                    "issueId": "13417347"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13417347/worklog/755266",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nealrichardson commented on PR #12849:\nURL: https://github.com/apache/arrow/pull/12849#issuecomment-1095191610\n\n   @karldw thanks for taking a stab at this and apologies for missing your earlier ping on jira (I get lots of jira notifications). From the error message reported on the issue, it looks like the problem is the call to `readlink` in the download_dependencies.sh script. Reading the man page for that, it looks like it exists only to resolve any symlinks that might be in the `DESTDIR`. I'm not sure why exactly (ARROW-4033 last edited this line; the change was initially added in #2673 with no discussion). Before adding all of this R code, I might try editing that line to\r\n   \r\n   ```\r\n   DESTDIR=$(readlink -f \"${DESTDIR}\" || readlink \"${DESTDIR}\" || ${DESTDIR})\r\n   ```\r\n   \r\n   (macOS has readlink but doesn't support -f; `|| ${DESTDIR}` because it probably doesn't matter anyway).\r\n   \r\n   In general I think trying to download_dependencies.sh work on more platforms is the right solution, rather than hacking around it in R.\n\n\n",
                    "created": "2022-04-11T15:22:56.722+0000",
                    "updated": "2022-04-11T15:22:56.722+0000",
                    "started": "2022-04-11T15:22:56.722+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "755266",
                    "issueId": "13417347"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13417347/worklog/755278",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "assignUser commented on PR #12849:\nURL: https://github.com/apache/arrow/pull/12849#issuecomment-1095219531\n\n   > In general I think trying to download_dependencies.sh work on more platforms is the right solution, rather than hacking around it in R.\r\n   \r\n   Is there a setup agnostic way to run bash scripts on windows from R? The only possibility I see is using WSL or checking for git-bash (which is not on path by default afaik).\n\n\n",
                    "created": "2022-04-11T15:43:48.927+0000",
                    "updated": "2022-04-11T15:43:48.927+0000",
                    "started": "2022-04-11T15:43:48.926+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "755278",
                    "issueId": "13417347"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13417347/worklog/755301",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wjones127 commented on PR #12849:\nURL: https://github.com/apache/arrow/pull/12849#issuecomment-1095279149\n\n   > Is there a setup agnostic way to run bash scripts on windows from R? The only possibility I see is using WSL or checking for git-bash (which is not on path by default afaik).\r\n   \r\n   On Windows I think we can take for granted that if a user is building a package they have already installed RTools (or should do so).\r\n   \r\n   It looks like pkgbuild has a function `with_build_tools()` ([docs](https://r-lib.github.io/pkgbuild/reference/has_build_tools.html)) that can temporarily add the appropriate RTools to the PATH before running a supplied script. Perhaps that is the appropriate thing to use here?\n\n\n",
                    "created": "2022-04-11T16:33:42.207+0000",
                    "updated": "2022-04-11T16:33:42.207+0000",
                    "started": "2022-04-11T16:33:42.206+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "755301",
                    "issueId": "13417347"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13417347/worklog/755377",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nealrichardson commented on PR #12849:\nURL: https://github.com/apache/arrow/pull/12849#issuecomment-1095433531\n\n   Yeah it is safe to assume bash these days, especially for scripts that CRAN won't run.\n\n\n",
                    "created": "2022-04-11T18:52:52.853+0000",
                    "updated": "2022-04-11T18:52:52.853+0000",
                    "started": "2022-04-11T18:52:52.853+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "755377",
                    "issueId": "13417347"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13417347/worklog/755389",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "assignUser commented on PR #12849:\nURL: https://github.com/apache/arrow/pull/12849#issuecomment-1095455087\n\n   @wjones127 `create_package_with_all_dependencies` itself doesn't build the package, so rtools wouldn't necessarily be installed (windows binaries are on CRAN after all) but requiring rtools would be fine if there is a proper error message if it isn't found vs. the unclear error that we have now. Although `pkgbuild` is neither a soft or hard dependency at the moment so we would need to add that, which is a con in my opinion.\r\n   \r\n   In the end the R solution works everywhere and does not require new dependencies but adds a lot of code and is brittle to changes in `versions.txt`.  Where as the bash solution requires less changes/new code but (maybe) disadvantages windows users and possibly adds a new soft dependency. \ud83e\udd37 \r\n   \r\n   I'll defer to your experience with the package and userbase @wjones127 @nealrichardson \n\n\n",
                    "created": "2022-04-11T19:12:07.981+0000",
                    "updated": "2022-04-11T19:12:07.981+0000",
                    "started": "2022-04-11T19:12:07.981+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "755389",
                    "issueId": "13417347"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13417347/worklog/755399",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nealrichardson commented on PR #12849:\nURL: https://github.com/apache/arrow/pull/12849#issuecomment-1095477558\n\n   > I'll defer to your experience with the package and userbase @wjones127 @nealrichardson\r\n   \r\n   IMO the bash script should be fixed anyway since it's not robust. I suspect that will solve the issue here too, in which case we don't need all of this R code (though I recognize and appreciate the effort).\n\n\n",
                    "created": "2022-04-11T19:32:25.016+0000",
                    "updated": "2022-04-11T19:32:25.016+0000",
                    "started": "2022-04-11T19:32:25.015+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "755399",
                    "issueId": "13417347"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13417347/worklog/755522",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "karldw commented on PR #12849:\nURL: https://github.com/apache/arrow/pull/12849#issuecomment-1095796331\n\n   Okay, great! @nealrichardson, just to confirm: do you want to go with the suggestion to add `pkgbuild` as a new dependency? I added it and tweaked the bash script - let's see how tests go on this new version.\r\n   \r\n   --------------------\r\n   \r\n   Specific replies:\r\n   \r\n   @nealrichardson:\r\n   \r\n   I think `readlink` without `-f` isn't useful here, so I removed it from the chain. I also had to change the syntax a little to get things working, but I might be missing some clever bash-ism.\r\n   \r\n   Just to repeat @assignUser's earlier comment, the use case I have in my head is that the package is downloaded on one machine, then installed on another. For that reason, I was trying not to make too many assumptions about the build capabilities on the downloading machine. But this offline build is a pretty niche demand, and it's probably okay to ask those users to make sure they have bash available when downloading.\r\n   \r\n   \r\n   @assignUser:\r\n   \r\n   > I noticed that there are no tests for `create_package_with_all_dependencies` so that might be something we could add in this PR.\r\n   \r\n   Running `create_package_with_all_dependencies` requires downloading ~100MB of files, which seemed like a pretty heavy test to run every time. I added a test for `run_download_script` that skips the actual download, but checks that the requirements are in place.\r\n   \r\n   \r\n   @assignUser and @wjones127, thanks for the tips!\r\n   \n\n\n",
                    "created": "2022-04-12T01:43:42.166+0000",
                    "updated": "2022-04-12T01:43:42.166+0000",
                    "started": "2022-04-12T01:43:42.166+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "755522",
                    "issueId": "13417347"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13417347/worklog/755949",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wjones127 commented on code in PR #12849:\nURL: https://github.com/apache/arrow/pull/12849#discussion_r848772353\n\n\n##########\nr/R/install-arrow.R:\n##########\n@@ -137,6 +137,54 @@ reload_arrow <- function() {\n   }\n }\n \n+#' Run download script\n+#'\n+#' @param tools_dir The `tools/` directory in the package.\n+#' @param skip_download Skip doing the actual download?\n+#' Note: we only need bash and wget here, not a full compiler suite.\n+#' These will often be missing on Windows, but are typically present on other\n+#' systems.\n+#' @noRd\n+run_download_script <- function(tools_dir, skip_download = FALSE) {\n+  if (.Platform$OS.type == \"windows\") {\n+    if (!requireNamespace(\"pkgbuild\", quietly = TRUE)) {\n+      stop(\"pkgbuild is required on Windows\")\n+    }\n+    if (!pkgbuild::has_build_tools()) {\n+      stop(\"This script requires bash and wget. Please install Rtools or run this in WSL.\")\n+    }\n+    # Have build tools available for the rest of this function\n+    pkgbuild::local_build_tools()\n+  }\n+  suppressWarnings(\n+    is_wget_available <- system2(\n+      \"bash\", c(\"-c\", \"'wget -V'\"),\n+      stdout = FALSE, stderr = FALSE\n+    ) == 0\n+  )\n+  if (!is_wget_available) {\n+    stop(\"Can't run wget - will not be able to download files\")\n+  }\n+  bash_file <- file.path(tools_dir, \"cpp/thirdparty/download_dependencies.sh\")\n+  if (!file.exists(bash_file)) {\n+    stop(\"Can't find expected download_dependencies.sh file.\")\n+  }\n+  # If you change this path, also need to edit nixlibs.R\n+  download_dir <- file.path(tools_dir, \"thirdparty_dependencies\")\n+  dir.create(download_dir)\n+\n+  if (!skip_download) {\n\nReview Comment:\n   Do we need `skip_download` outside of testing? What might be better is to temporarily override `system2` within the test to always return 0 and do nothing. That would also avoid the issue of the error on missing wget in the test environment.\n\n\n\n",
                    "created": "2022-04-12T18:55:55.510+0000",
                    "updated": "2022-04-12T18:55:55.510+0000",
                    "started": "2022-04-12T18:55:55.510+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "755949",
                    "issueId": "13417347"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13417347/worklog/756122",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "karldw commented on PR #12849:\nURL: https://github.com/apache/arrow/pull/12849#issuecomment-1097448316\n\n   \r\n   There are three categories of failed test here:\r\n   \r\n   1. Test failures I think I understand and can fix. In these first two builds, I think the issues is that the build doesn't [copy](https://github.com/apache/arrow/blob/d5db0ef78290898a6c64e4a79e8722e5cde6dfd1/r/Makefile#L42) files into `tools/` when I expected. That's fine.\r\n       - R / AMD64 Ubuntu 20.04 R 4.1\r\n       - R / rstudio/r-base:4.0-centos7 \r\n       - R / rhub/debian-gcc-devel:latest (This one fails because `wget` isn't installed. Surprising, to me, but also fine.)\r\n   2. Test failures I think aren't related to the changes I made, but please let me know if that's wrong.\r\n       - Python / AMD64 MacOS 10.15 Python 3: Segfault in pytest.\r\n       - C++ / AMD64 MacOS 10.15 C++: Core dump in `TestS3FS.GetFileInfoRoot`\r\n   3. Test failures I don't understand, and could use help diagnosing. All of these fail at [`is_wget_available`](https://github.com/apache/arrow/pull/12849/files#diff-85f1f83b021c999b209e5671ed98c291287a3361ae55dcfd57e9380ebff623f2R160-R163), but I thought `bash -c 'wget -V'` would run successfully on all of these:\r\n       - R / AMD64 Windows R 3.6 RTools 35\r\n       - R / AMD64 Windows R 4.1 RTools 40\r\n       - R / AMD64 Windows R devel RTools 42 \r\n   \r\n   I can add code to skip the test if `wget` isn't available, but first it seems important to track down what's happening in the cases I thought `wget` would be available, but isn't. I don't have a Windows system to test on ",
                    "created": "2022-04-13T01:10:32.935+0000",
                    "updated": "2022-04-13T01:10:32.935+0000",
                    "started": "2022-04-13T01:10:32.935+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "756122",
                    "issueId": "13417347"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13417347/worklog/756123",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "karldw commented on code in PR #12849:\nURL: https://github.com/apache/arrow/pull/12849#discussion_r848986139\n\n\n##########\nr/R/install-arrow.R:\n##########\n@@ -137,6 +137,54 @@ reload_arrow <- function() {\n   }\n }\n \n+#' Run download script\n+#'\n+#' @param tools_dir The `tools/` directory in the package.\n+#' @param skip_download Skip doing the actual download?\n+#' Note: we only need bash and wget here, not a full compiler suite.\n+#' These will often be missing on Windows, but are typically present on other\n+#' systems.\n+#' @noRd\n+run_download_script <- function(tools_dir, skip_download = FALSE) {\n+  if (.Platform$OS.type == \"windows\") {\n+    if (!requireNamespace(\"pkgbuild\", quietly = TRUE)) {\n+      stop(\"pkgbuild is required on Windows\")\n+    }\n+    if (!pkgbuild::has_build_tools()) {\n+      stop(\"This script requires bash and wget. Please install Rtools or run this in WSL.\")\n+    }\n+    # Have build tools available for the rest of this function\n+    pkgbuild::local_build_tools()\n+  }\n+  suppressWarnings(\n+    is_wget_available <- system2(\n+      \"bash\", c(\"-c\", \"'wget -V'\"),\n+      stdout = FALSE, stderr = FALSE\n+    ) == 0\n+  )\n+  if (!is_wget_available) {\n+    stop(\"Can't run wget - will not be able to download files\")\n+  }\n+  bash_file <- file.path(tools_dir, \"cpp/thirdparty/download_dependencies.sh\")\n+  if (!file.exists(bash_file)) {\n+    stop(\"Can't find expected download_dependencies.sh file.\")\n+  }\n+  # If you change this path, also need to edit nixlibs.R\n+  download_dir <- file.path(tools_dir, \"thirdparty_dependencies\")\n+  dir.create(download_dir)\n+\n+  if (!skip_download) {\n\nReview Comment:\n   We don't need `skip_download` outside of testing. Do you mean temporarily redefining the `system2` function? That seems like it could lead to some hard-to-diagnose bugs if a future reader is expecting `base::system2` when they see `system2`.\n\n\n\n",
                    "created": "2022-04-13T01:10:44.723+0000",
                    "updated": "2022-04-13T01:10:44.723+0000",
                    "started": "2022-04-13T01:10:44.722+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "756123",
                    "issueId": "13417347"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13417347/worklog/756129",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wjones127 commented on code in PR #12849:\nURL: https://github.com/apache/arrow/pull/12849#discussion_r849004739\n\n\n##########\nr/R/install-arrow.R:\n##########\n@@ -137,6 +137,54 @@ reload_arrow <- function() {\n   }\n }\n \n+#' Run download script\n+#'\n+#' @param tools_dir The `tools/` directory in the package.\n+#' @param skip_download Skip doing the actual download?\n+#' Note: we only need bash and wget here, not a full compiler suite.\n+#' These will often be missing on Windows, but are typically present on other\n+#' systems.\n+#' @noRd\n+run_download_script <- function(tools_dir, skip_download = FALSE) {\n+  if (.Platform$OS.type == \"windows\") {\n+    if (!requireNamespace(\"pkgbuild\", quietly = TRUE)) {\n+      stop(\"pkgbuild is required on Windows\")\n+    }\n+    if (!pkgbuild::has_build_tools()) {\n+      stop(\"This script requires bash and wget. Please install Rtools or run this in WSL.\")\n+    }\n+    # Have build tools available for the rest of this function\n+    pkgbuild::local_build_tools()\n+  }\n+  suppressWarnings(\n+    is_wget_available <- system2(\n+      \"bash\", c(\"-c\", \"'wget -V'\"),\n+      stdout = FALSE, stderr = FALSE\n+    ) == 0\n+  )\n+  if (!is_wget_available) {\n+    stop(\"Can't run wget - will not be able to download files\")\n+  }\n+  bash_file <- file.path(tools_dir, \"cpp/thirdparty/download_dependencies.sh\")\n+  if (!file.exists(bash_file)) {\n+    stop(\"Can't find expected download_dependencies.sh file.\")\n+  }\n+  # If you change this path, also need to edit nixlibs.R\n+  download_dir <- file.path(tools_dir, \"thirdparty_dependencies\")\n+  dir.create(download_dir)\n+\n+  if (!skip_download) {\n\nReview Comment:\n   > Do you mean temporarily redefining the system2 function? \r\n   \r\n   Yes, I mean redefining within the scope of the test, also called mocking. I think you'd have to use `mockery::stub` and not `testthat::with_mock` or mockr, since the latter don't work with functions in base. Would look something like (though I haven't tested this code):\r\n   \r\n   ```r\r\n     test_that(\"Prep thirdparty download\", {\r\n       skip_on_cran()\r\n       # Replaces system2 with a function that always returns 0 when called from run_download_script\r\n       mockery::stub(run_download_script, 'system2', 0)\r\n       tools_dir <- tempdir()\r\n       run_download_script(tools_dir)\r\n     })\r\n   ```\r\n   \r\n   See: https://github.com/r-lib/mockery#examples\r\n   \r\n   This would mean adding mockery as a dev dependency. \n\n\n\n",
                    "created": "2022-04-13T01:59:05.047+0000",
                    "updated": "2022-04-13T01:59:05.047+0000",
                    "started": "2022-04-13T01:59:05.047+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "756129",
                    "issueId": "13417347"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13417347/worklog/756131",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wjones127 commented on PR #12849:\nURL: https://github.com/apache/arrow/pull/12849#issuecomment-1097472807\n\n   > I don't have a Windows system to test on ",
                    "created": "2022-04-13T02:00:27.457+0000",
                    "updated": "2022-04-13T02:00:27.457+0000",
                    "started": "2022-04-13T02:00:27.457+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "756131",
                    "issueId": "13417347"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13417347/worklog/756241",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "assignUser commented on PR #12849:\nURL: https://github.com/apache/arrow/pull/12849#issuecomment-1097706749\n\n   @karldw I checked and it looks like rtools40 does not come with `wget` (and it can't be installed with `pacman` either. That would explain the test failures under 3.\n\n\n",
                    "created": "2022-04-13T08:28:25.929+0000",
                    "updated": "2022-04-13T08:28:25.929+0000",
                    "started": "2022-04-13T08:28:25.928+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "756241",
                    "issueId": "13417347"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13417347/worklog/756444",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wjones127 commented on PR #12849:\nURL: https://github.com/apache/arrow/pull/12849#issuecomment-1098149969\n\n   Yeah maybe we need to download with curl instead?\n\n\n",
                    "created": "2022-04-13T14:52:22.177+0000",
                    "updated": "2022-04-13T14:52:22.177+0000",
                    "started": "2022-04-13T14:52:22.176+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "756444",
                    "issueId": "13417347"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13417347/worklog/756735",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "nealrichardson commented on PR #12849:\nURL: https://github.com/apache/arrow/pull/12849#issuecomment-1098523529\n\n   What about a different approach? We don't need to use the download script itself to download the files, but we do need to use versions.txt. We could use a slightly different bash script to generate R syntax that would download the files, then use R to download--no wget or curl or other system things required beyond what R already has, just need bash.\r\n   \r\n   To illustrate, I patched the existing download script:\r\n   \r\n   ```\r\n   diff --git a/cpp/thirdparty/download_dependencies.sh b/cpp/thirdparty/download_dependencies.sh\r\n   index 7ffffa08c..2c0447cdb 100755\r\n   -",
                    "created": "2022-04-13T21:54:45.686+0000",
                    "updated": "2022-04-13T21:54:45.686+0000",
                    "started": "2022-04-13T21:54:45.686+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "756735",
                    "issueId": "13417347"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13417347/worklog/757549",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "karldw commented on PR #12849:\nURL: https://github.com/apache/arrow/pull/12849#issuecomment-1100513434\n\n   Thanks, that's clever!\r\n   \r\n   Since we're only using `versions.txt` from `cpp/thirdparty/`, I also changed the Makefile to skip the other bundled files.\r\n   \r\n   I also left the `readline` changes in the original `download_dependencies.sh` file ",
                    "created": "2022-04-16T02:34:57.700+0000",
                    "updated": "2022-04-16T02:34:57.700+0000",
                    "started": "2022-04-16T02:34:57.700+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "757549",
                    "issueId": "13417347"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
            "id": "1",
            "description": "A problem which impairs or prevents the functions of the product.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
            "name": "Bug",
            "subtask": false,
            "avatarId": 21133
        },
        "timespent": 17400,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@2b2f46d0[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@32694bfe[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@7d1dcb91[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@5d34977[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@236093d0[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@273923c8[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@34eb25fd[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@2b6c5ae6[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@c35a248[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@62fce765[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@fd5f20a[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@46a7227c[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 17400,
        "customfield_12312520": null,
        "customfield_12312521": "Wed Apr 20 18:27:12 UTC 2022",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2022-04-20T18:27:12.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-15092/watchers",
            "watchCount": 5,
            "isWatching": false
        },
        "created": "2021-12-14T09:33:38.000+0000",
        "updated": "2022-04-23T20:27:57.000+0000",
        "timeoriginalestimate": null,
        "description": "I installed the Arrow Package inside a fresh R-Install on Mac OS 11.2 (BigSur) and tried to use the function create_package_with_all_dependencies():\r\n\r\n{code}\r\n> library(arrow)\r\n> create_package_with_all_dependencies('/home/max/test.tar.gz')\r\nDownloading Arrow source file\r\nversuche URL 'https://mirror.dogado.de/cran/src/contrib/arrow_6.0.1.tar.gz'\r\nContent type 'application/octet-stream' length 4774511 bytes (4.6 MB)\r\n===================================================\r\ndownloaded 4.6 MB\r\n\r\nDownloading files to /var/folders/dn/v941w15111s7858wxz6xwzzh0000gn/T//RtmpBjlYTP/file78c52918a/4e/arrow/tools/thirdparty_dependencies\r\nreadlink: illegal option -- f\r\nusage: readlink [-n] [file ...]\r\nFehler in create_package_with_all_dependencies(\"/home/max/test.tar.gz\") :\r\n  Failed to download thirdparty dependencies\r\n{code}",
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "4h 50m",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 17400
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[R] create_package_with_all_dependencies() fails on MacOS 11.2",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": "R on MacOS 11.2 (Big Sur)",
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13417347/comment/17484835",
                    "id": "17484835",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=paleolimbot",
                        "name": "paleolimbot",
                        "key": "paleolimbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=paleolimbot&avatarId=47795",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=paleolimbot&avatarId=47795",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=paleolimbot&avatarId=47795",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=paleolimbot&avatarId=47795"
                        },
                        "displayName": "Dewey Dunnington",
                        "active": true,
                        "timeZone": "America/Halifax"
                    },
                    "body": "Thank you for reporting this! I can replicate this on MacOS as well:\r\n\r\n{code:R}\r\narrow::create_package_with_all_dependencies(tempfile())\r\n#> Downloading Arrow source file\r\n#> Downloading files to /var/folders/gt/l87wjg8s7312zs9s7c1fgs900000gn/T//RtmplKo3qJ/file19d4737d41d5/arrow/tools/thirdparty_dependencies\r\n#> Error in arrow::create_package_with_all_dependencies(tempfile()): Failed to download thirdparty dependencies\r\n{code}\r\n\r\n\r\n{noformat}\r\ntrying URL 'https://cran.rstudio.com/src/contrib/arrow_6.0.1.tar.gz'\r\nContent type 'application/x-gzip' length 4774511 bytes (4.6 MB)\r\n==================================================\r\ndownloaded 4.6 MB\r\n\r\nreadlink: illegal option -- f\r\nusage: readlink [-n] [file ...]\r\n{noformat}\r\n\r\nIt looks like the error is coming from here:\r\n\r\nhttps://github.com/apache/arrow/blob/master/cpp/thirdparty/download_dependencies.sh#L33",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=paleolimbot",
                        "name": "paleolimbot",
                        "key": "paleolimbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=paleolimbot&avatarId=47795",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=paleolimbot&avatarId=47795",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=paleolimbot&avatarId=47795",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=paleolimbot&avatarId=47795"
                        },
                        "displayName": "Dewey Dunnington",
                        "active": true,
                        "timeZone": "America/Halifax"
                    },
                    "created": "2022-01-31T18:13:19.216+0000",
                    "updated": "2022-01-31T18:13:19.216+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13417347/comment/17485257",
                    "id": "17485257",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=thisisnic",
                        "name": "thisisnic",
                        "key": "thisisnic",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=39937",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=39937",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=39937",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=39937"
                        },
                        "displayName": "Nicola Crane",
                        "active": true,
                        "timeZone": "Africa/Casablanca"
                    },
                    "body": "Looking into this, it looks like this is a Linux utility that doesn't exist on MacOS.  I think we could either update this script to manually perform the steps instead of using readlink or using greadlink (if installed?) when on MacOS - see the below links for more info:\r\n\r\n* https://stackoverflow.com/questions/1055671/how-can-i-get-the-behavior-of-gnus-readlink-f-on-a-mac\r\n* http://biercoff.com/fixing-readlink-illegal-option-f-error-on-a-mac/",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=thisisnic",
                        "name": "thisisnic",
                        "key": "thisisnic",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=39937",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=39937",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=39937",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=39937"
                        },
                        "displayName": "Nicola Crane",
                        "active": true,
                        "timeZone": "Africa/Casablanca"
                    },
                    "created": "2022-02-01T13:45:06.671+0000",
                    "updated": "2022-02-01T13:45:06.671+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13417347/comment/17485398",
                    "id": "17485398",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=jonkeane",
                        "name": "jonkeane",
                        "key": "jonkeane",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34057",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34057",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34057",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34057"
                        },
                        "displayName": "Jonathan Keane",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "I would be curious if you could add a bit more information about what you're using this for [~max_koe] If you're trying to install arrow on an airgapped mac, you might have better luck downloading binaries from cran and installing those directly (e.g. from https://cran.r-project.org/web/packages/arrow/index.html).",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=jonkeane",
                        "name": "jonkeane",
                        "key": "jonkeane",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34057",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34057",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34057",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34057"
                        },
                        "displayName": "Jonathan Keane",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2022-02-01T17:57:51.647+0000",
                    "updated": "2022-02-01T17:57:51.647+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13417347/comment/17485604",
                    "id": "17485604",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=max_koe",
                        "name": "max_koe",
                        "key": "JIRAUSER281318",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34050",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34050",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34050",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34050"
                        },
                        "displayName": "Maximilian K\u00f6nig",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "I was trying to use a Mac Laptop simply to download the artifacts necessary to install ARROW on an offline Machine (internal protected linux server). (Cf. ARROW-15000)\r\n\r\nI had both a Windows and a Mac machine at my disposal, both failed in different ways when trying to use this function (create_package_with_all_dependencies)\r\n\r\nFor myself I finally managed to achive my task by setting up a new linux machine in AWS and using that. I reported this in the hope that future some user will not run into this same hurdle.\r\n(I should also open the issue that occured on Windows probably).",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=max_koe",
                        "name": "max_koe",
                        "key": "JIRAUSER281318",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34050",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34050",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34050",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34050"
                        },
                        "displayName": "Maximilian K\u00f6nig",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2022-02-02T07:34:42.118+0000",
                    "updated": "2022-02-02T07:36:29.788+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13417347/comment/17485845",
                    "id": "17485845",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=jonkeane",
                        "name": "jonkeane",
                        "key": "jonkeane",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34057",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34057",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34057",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34057"
                        },
                        "displayName": "Jonathan Keane",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "Ah, yes either a separate issue, or even the error output on this one for windows would be helpful to try and make sure this is possible.\r\n\r\nWe also might want to make sure that none of the dependencies that we're downloading are platform dependent (I don't think they are, but we should double check that) to ensure that this is true",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=jonkeane",
                        "name": "jonkeane",
                        "key": "jonkeane",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34057",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34057",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34057",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34057"
                        },
                        "displayName": "Jonathan Keane",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2022-02-02T14:32:06.970+0000",
                    "updated": "2022-02-02T14:32:06.970+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13417347/comment/17488673",
                    "id": "17488673",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=max_koe",
                        "name": "max_koe",
                        "key": "JIRAUSER281318",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34050",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34050",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34050",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34050"
                        },
                        "displayName": "Maximilian K\u00f6nig",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "I now created the bug report for windows, it is ARROW-15608",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=max_koe",
                        "name": "max_koe",
                        "key": "JIRAUSER281318",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34050",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34050",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34050",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34050"
                        },
                        "displayName": "Maximilian K\u00f6nig",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2022-02-08T08:48:20.397+0000",
                    "updated": "2022-02-08T08:48:28.016+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13417347/comment/17495066",
                    "id": "17495066",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=karldw",
                        "name": "karldw",
                        "key": "karldw",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=karldw&avatarId=39070",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=karldw&avatarId=39070",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=karldw&avatarId=39070",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=karldw&avatarId=39070"
                        },
                        "displayName": "Karl Dunkle Werner",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "Thanks for flagging these! I helped with parts of the offline installation scripting, and I'd be happy to help here.\r\n\r\n{{create_package_with_all_dependencies()}} is currently designed to be run on a linux machine to produce a dependency bundle for offline installation on another linux machine. As you all have found, it hits minor snags on a Mac, and major snags when it tries to run the [download_dependencies.sh|https://github.com/apache/arrow/blob/master/cpp/thirdparty/download_dependencies.sh] shell script on a Windows machine.\r\n\r\nThe underlying files that are downloaded are listed in [versions.txt|https://github.com/apache/arrow/blob/master/cpp/thirdparty/versions.txt]. The files that get downloaded do not depend on the system running the command, and cmake will check the files' hashes to be sure.\r\n\u00a0\r\nOne way to make this function more platform-independent would be to continue using {{{}versions.txt{}}}, but run the downloads in R instead of using {{{}download_dependencies.sh{}}}. Does that seem reasonable? This change might be easier said than done, because we need the [{{DEPENDENCIES}} array|https://github.com/apache/arrow/blob/f9f2c0827e1e605717d954c6899fe07b08f599cb/cpp/thirdparty/versions.txt#L106-L139] with all the variables substituted in.",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=karldw",
                        "name": "karldw",
                        "key": "karldw",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=karldw&avatarId=39070",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=karldw&avatarId=39070",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=karldw&avatarId=39070",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=karldw&avatarId=39070"
                        },
                        "displayName": "Karl Dunkle Werner",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2022-02-19T23:14:18.218+0000",
                    "updated": "2022-02-19T23:14:18.218+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13417347/comment/17497078",
                    "id": "17497078",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=karldw",
                        "name": "karldw",
                        "key": "karldw",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=karldw&avatarId=39070",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=karldw&avatarId=39070",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=karldw&avatarId=39070",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=karldw&avatarId=39070"
                        },
                        "displayName": "Karl Dunkle Werner",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "Okay, I wrote some code that parses versions.txt. This overall approach might be too fragile to changes in the structure of versions.txt, but if it's worth building on, let me know, and I can open a PR. (CC [~npr])\r\n[https://gist.github.com/karldw/1038f9b8605b4ee97842f4b65ed6c09f]\r\n\u00a0\r\n\r\nI assumed a few design constraints:\r\n * Cannot edit the form of versions.txt\r\n * Only base R functions",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=karldw",
                        "name": "karldw",
                        "key": "karldw",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=karldw&avatarId=39070",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=karldw&avatarId=39070",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=karldw&avatarId=39070",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=karldw&avatarId=39070"
                        },
                        "displayName": "Karl Dunkle Werner",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2022-02-23T23:57:34.150+0000",
                    "updated": "2022-02-23T23:57:34.150+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13417347/comment/17519515",
                    "id": "17519515",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=assignUser",
                        "name": "assignUser",
                        "key": "JIRAUSER287549",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34052",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34052",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34052",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34052"
                        },
                        "displayName": "Jacob Wujciak-Jens",
                        "active": true,
                        "timeZone": "Europe/Berlin"
                    },
                    "body": "Hi [~karldw] are you still interested in doing a PR for this? If so feel free to open one! Otherwise let me know :)",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=assignUser",
                        "name": "assignUser",
                        "key": "JIRAUSER287549",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34052",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34052",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34052",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34052"
                        },
                        "displayName": "Jacob Wujciak-Jens",
                        "active": true,
                        "timeZone": "Europe/Berlin"
                    },
                    "created": "2022-04-08T11:14:04.620+0000",
                    "updated": "2022-04-08T11:14:04.620+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13417347/comment/17519864",
                    "id": "17519864",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=karldw",
                        "name": "karldw",
                        "key": "karldw",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=karldw&avatarId=39070",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=karldw&avatarId=39070",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=karldw&avatarId=39070",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=karldw&avatarId=39070"
                        },
                        "displayName": "Karl Dunkle Werner",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "Started: [https://github.com/apache/arrow/pull/12849]\r\n\r\nFeedback is very welcome here.",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=karldw",
                        "name": "karldw",
                        "key": "karldw",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=karldw&avatarId=39070",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=karldw&avatarId=39070",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=karldw&avatarId=39070",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=karldw&avatarId=39070"
                        },
                        "displayName": "Karl Dunkle Werner",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2022-04-09T03:16:12.969+0000",
                    "updated": "2022-04-09T03:16:12.969+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13417347/comment/17525180",
                    "id": "17525180",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=jonkeane",
                        "name": "jonkeane",
                        "key": "jonkeane",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34057",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34057",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34057",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34057"
                        },
                        "displayName": "Jonathan Keane",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "Issue resolved by pull request 12849\n[https://github.com/apache/arrow/pull/12849]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=jonkeane",
                        "name": "jonkeane",
                        "key": "jonkeane",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34057",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34057",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34057",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34057"
                        },
                        "displayName": "Jonathan Keane",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2022-04-20T18:27:12.141+0000",
                    "updated": "2022-04-20T18:27:12.141+0000"
                }
            ],
            "maxResults": 11,
            "total": 11,
            "startAt": 0
        },
        "customfield_12311820": "0|z0xoc0:",
        "customfield_12314139": null
    }
}