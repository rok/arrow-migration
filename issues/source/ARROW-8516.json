{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13299466",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13299466",
    "key": "ARROW-8516",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12347769",
                "id": "12347769",
                "description": "",
                "name": "1.0.0",
                "archived": false,
                "released": true,
                "releaseDate": "2020-07-24"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/5",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/trivial.svg",
            "name": "Trivial",
            "id": "5"
        },
        "labels": [
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=tustvold",
            "name": "tustvold",
            "key": "tustvold",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34044",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34044",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34044",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34044"
            },
            "displayName": "Raphael Taylor-Davies",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12333773",
                "id": "12333773",
                "name": "Rust"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=tustvold",
            "name": "tustvold",
            "key": "tustvold",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34044",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34044",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34044",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34044"
            },
            "displayName": "Raphael Taylor-Davies",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=tustvold",
            "name": "tustvold",
            "key": "tustvold",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34044",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34044",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34044",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34044"
            },
            "displayName": "Raphael Taylor-Davies",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "aggregateprogress": {
            "progress": 9600,
            "total": 9600,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 9600,
            "total": 9600,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-8516/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 16,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13299466/worklog/425063",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "tustvold commented on pull request #6980: ARROW-8516: [Rust] Improve PrimitiveBuilder::append_slice performance\nURL: https://github.com/apache/arrow/pull/6980\n \n \n   BufferBuilder<BooleanType>::append_slice is called by PrimitiveBuilder::append_slice with a constructed vector of true values.\r\n   \r\n   Even in release builds the associated allocations and iterations are not optimised out, resulting in a third of the time to parse a parquet file containing single integers being spent in PrimitiveBuilder::append_slice.\r\n   \r\n   This PR adds an append_n method to the BufferBuilderTrait that allows this to be handled more efficiently. My rather unscientific testing shows it to halve the amount of time spent in this method yielding an ~20% speedup for my particular workload.\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-04-19T13:11:34.575+0000",
                    "updated": "2020-04-19T13:11:34.575+0000",
                    "started": "2020-04-19T13:11:34.575+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "425063",
                    "issueId": "13299466"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13299466/worklog/425066",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "github-actions[bot] commented on issue #6980: ARROW-8516: [Rust] Improve PrimitiveBuilder::append_slice performance\nURL: https://github.com/apache/arrow/pull/6980#issuecomment-616132274\n \n \n   https://issues.apache.org/jira/browse/ARROW-8516\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-04-19T13:16:34.291+0000",
                    "updated": "2020-04-19T13:16:34.291+0000",
                    "started": "2020-04-19T13:16:34.291+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "425066",
                    "issueId": "13299466"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13299466/worklog/425075",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "tustvold commented on issue #6980: ARROW-8516: [Rust] Improve PrimitiveBuilder::append_slice performance\nURL: https://github.com/apache/arrow/pull/6980#issuecomment-616139276\n \n \n   I'm not really sure what is going on with the CI, but the failures don't appear to be related to my changes...\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-04-19T13:49:35.474+0000",
                    "updated": "2020-04-19T13:49:35.474+0000",
                    "started": "2020-04-19T13:49:35.474+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "425075",
                    "issueId": "13299466"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13299466/worklog/425076",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "tustvold commented on issue #6980: ARROW-8516: [Rust] Improve PrimitiveBuilder::append_slice performance\nURL: https://github.com/apache/arrow/pull/6980#issuecomment-616139772\n \n \n   I'm not really sure what is going on with the CI, but the failures don't appear to be related to my changes... One is a linker error and the other looks like it is missing test resources\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-04-19T13:51:49.280+0000",
                    "updated": "2020-04-19T13:51:49.280+0000",
                    "started": "2020-04-19T13:51:49.280+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "425076",
                    "issueId": "13299466"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13299466/worklog/425077",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "tustvold commented on issue #6980: ARROW-8516: [Rust] Improve PrimitiveBuilder::append_slice performance\nURL: https://github.com/apache/arrow/pull/6980#issuecomment-616139276\n \n \n   I'm not really sure what is going on with the CI, but the failures don't appear to be related to my changes...\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-04-19T13:51:55.727+0000",
                    "updated": "2020-04-19T13:51:55.727+0000",
                    "started": "2020-04-19T13:51:55.727+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "425077",
                    "issueId": "13299466"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13299466/worklog/425100",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "paddyhoran commented on pull request #6980: ARROW-8516: [Rust] Improve PrimitiveBuilder::append_slice performance\nURL: https://github.com/apache/arrow/pull/6980#discussion_r410947635\n \n \n\n ##########\n File path: rust/arrow/src/array/builder.rs\n ##########\n @@ -301,6 +324,21 @@ impl BufferBuilderTrait<BooleanType> for BufferBuilder<BooleanType> {\n         Ok(())\n     }\n \n+    fn append_n(&mut self, n: usize, v: bool) -> Result<()> {\n+        self.reserve(n)?;\n+        if v {\n+            unsafe {\n+                bit_util::set_bits_raw(\n+                    self.buffer.raw_data() as *mut u8,\n \n Review comment:\n   This can be `raw_data_mut` instead, right?\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-04-19T17:06:41.280+0000",
                    "updated": "2020-04-19T17:06:41.280+0000",
                    "started": "2020-04-19T17:06:41.280+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "425100",
                    "issueId": "13299466"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13299466/worklog/425135",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "wesm commented on issue #6980: ARROW-8516: [Rust] Improve PrimitiveBuilder::append_slice performance\nURL: https://github.com/apache/arrow/pull/6980#issuecomment-616220537\n \n \n   You should be able to repro the CI build that's failing with the `debian-rust` docker-compose entry\r\n   \r\n   https://github.com/apache/arrow/blob/master/.github/workflows/rust.yml#L45\n \n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n \nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-04-19T20:32:20.104+0000",
                    "updated": "2020-04-19T20:32:20.104+0000",
                    "started": "2020-04-19T20:32:20.104+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "425135",
                    "issueId": "13299466"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13299466/worklog/426513",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "tustvold commented on issue #6980:\nURL: https://github.com/apache/arrow/pull/6980#issuecomment-618389453\n\n\n   Rebased on current master and the CI now builds :tada: \n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-04-23T13:01:21.278+0000",
                    "updated": "2020-04-23T13:01:21.278+0000",
                    "started": "2020-04-23T13:01:21.278+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "426513",
                    "issueId": "13299466"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13299466/worklog/426574",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "paddyhoran commented on a change in pull request #6980:\nURL: https://github.com/apache/arrow/pull/6980#discussion_r413903768\n\n\n\n##########\nFile path: rust/arrow/src/array/builder.rs\n##########\n@@ -236,6 +251,14 @@ impl<T: ArrowPrimitiveType> BufferBuilderTrait<T> for BufferBuilder<T> {\n         self.write_bytes(v.to_byte_slice(), 1)\n     }\n \n+    default fn append_n(&mut self, n: usize, v: T::Native) -> Result<()> {\n+        self.reserve(n)?;\n+        for _ in 0..n {\n+            self.write_bytes(v.to_byte_slice(), 1)?;\n+        }\n\nReview comment:\n       You can use `to_byte_slice` on a `Vec` or slice also.  To be clear, I'm just guessing here.  @vertexclique do you want to expand on your comment or can I merge this?\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-04-23T15:37:35.125+0000",
                    "updated": "2020-04-23T15:37:35.125+0000",
                    "started": "2020-04-23T15:37:35.125+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "426574",
                    "issueId": "13299466"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13299466/worklog/426605",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "vertexclique commented on a change in pull request #6980:\nURL: https://github.com/apache/arrow/pull/6980#discussion_r413951534\n\n\n\n##########\nFile path: rust/arrow/src/array/builder.rs\n##########\n@@ -236,6 +251,14 @@ impl<T: ArrowPrimitiveType> BufferBuilderTrait<T> for BufferBuilder<T> {\n         self.write_bytes(v.to_byte_slice(), 1)\n     }\n \n+    default fn append_n(&mut self, n: usize, v: T::Native) -> Result<()> {\n+        self.reserve(n)?;\n+        for _ in 0..n {\n+            self.write_bytes(v.to_byte_slice(), 1)?;\n+        }\n\nReview comment:\n       So, `for _ in 0..n` kind of code, even you don't use, checks the boundaries. This is one of the infamous code pieces that Rust has and discourages. In [here]() you can see one of the examples. Range check exists here:\r\n   ```\r\n   mov     rax, qword ptr [rip + core::iter::range::<impl core::iter::traits::iterator::Iterator for core::ops::range::Range<A>>::next@GOTPCREL]\r\n   ```\r\n   This call makes checked_add and which makes range checks. So that is slowing down for big iterations as you saw in the link. Since this is an open issue in the compiler please consider using iterator methods instead of for loops whenever you see.\r\n   \r\n   As you can also see, in this very code 5 cycles spent every range check (in minimal), so that said it is always better to use iterator methods. Bringing the example here :) \r\n   ```\r\n   (0..n)\r\n   .for_each(|_| {\r\n       self.write_bytes(v.to_byte_slice(), 1)?;\r\n   })\r\n   ```\r\n   \r\n   This will be completely pruned in `-C opt-level=3` most probably :)\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-04-23T16:38:30.502+0000",
                    "updated": "2020-04-23T16:38:30.502+0000",
                    "started": "2020-04-23T16:38:30.501+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "426605",
                    "issueId": "13299466"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13299466/worklog/426607",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "vertexclique commented on a change in pull request #6980:\nURL: https://github.com/apache/arrow/pull/6980#discussion_r413951534\n\n\n\n##########\nFile path: rust/arrow/src/array/builder.rs\n##########\n@@ -236,6 +251,14 @@ impl<T: ArrowPrimitiveType> BufferBuilderTrait<T> for BufferBuilder<T> {\n         self.write_bytes(v.to_byte_slice(), 1)\n     }\n \n+    default fn append_n(&mut self, n: usize, v: T::Native) -> Result<()> {\n+        self.reserve(n)?;\n+        for _ in 0..n {\n+            self.write_bytes(v.to_byte_slice(), 1)?;\n+        }\n\nReview comment:\n       So, `for _ in 0..n` kind of code, even you don't use, checks the boundaries. This is one of the infamous code pieces that Rust has. Personally I don't use this whenever its possible :). In [here]() you can see one of the examples. Range check exists here:\r\n   ```\r\n   mov     rax, qword ptr [rip + core::iter::range::<impl core::iter::traits::iterator::Iterator for core::ops::range::Range<A>>::next@GOTPCREL]\r\n   ```\r\n   This call makes checked_add and which makes range checks. So that is slowing down for big iterations as you saw in the link. Since this is an open issue in the compiler please consider using iterator methods instead of for loops whenever you see.\r\n   \r\n   As you can also see, in this very code 5 cycles spent every range check (in minimal), so that said it is always better to use iterator methods. Bringing the example here :) \r\n   ```\r\n   (0..n)\r\n   .for_each(|_| {\r\n       self.write_bytes(v.to_byte_slice(), 1)?;\r\n   })\r\n   ```\r\n   \r\n   This will be completely pruned in `-C opt-level=3` most probably :)\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-04-23T16:39:38.322+0000",
                    "updated": "2020-04-23T16:39:38.322+0000",
                    "started": "2020-04-23T16:39:38.321+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "426607",
                    "issueId": "13299466"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13299466/worklog/426608",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "vertexclique commented on a change in pull request #6980:\nURL: https://github.com/apache/arrow/pull/6980#discussion_r413951534\n\n\n\n##########\nFile path: rust/arrow/src/array/builder.rs\n##########\n@@ -236,6 +251,14 @@ impl<T: ArrowPrimitiveType> BufferBuilderTrait<T> for BufferBuilder<T> {\n         self.write_bytes(v.to_byte_slice(), 1)\n     }\n \n+    default fn append_n(&mut self, n: usize, v: T::Native) -> Result<()> {\n+        self.reserve(n)?;\n+        for _ in 0..n {\n+            self.write_bytes(v.to_byte_slice(), 1)?;\n+        }\n\nReview comment:\n       So, `for _ in 0..n` kind of code, even you don't use, checks the boundaries. This is one of the infamous code pieces that Rust has. Personally I don't use this whenever its possible :). In [here](https://godbolt.org/z/55sggc) you can see one of the examples. Range check exists here:\r\n   ```\r\n   mov     rax, qword ptr [rip + core::iter::range::<impl core::iter::traits::iterator::Iterator for core::ops::range::Range<A>>::next@GOTPCREL]\r\n   ```\r\n   This call makes checked_add and which makes range checks. So that is slowing down for big iterations as you saw in the link. Since this is an open issue in the compiler please consider using iterator methods instead of for loops whenever you see.\r\n   \r\n   As you can also see, in this very code 5 cycles spent every range check (in minimal), so that said it is always better to use iterator methods. Bringing the example here :) \r\n   ```\r\n   (0..n)\r\n   .for_each(|_| {\r\n       self.write_bytes(v.to_byte_slice(), 1)?;\r\n   })\r\n   ```\r\n   \r\n   This will be completely pruned in `-C opt-level=3` most probably :)\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-04-23T16:40:01.852+0000",
                    "updated": "2020-04-23T16:40:01.852+0000",
                    "started": "2020-04-23T16:40:01.852+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "426608",
                    "issueId": "13299466"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13299466/worklog/426630",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "tustvold commented on a change in pull request #6980:\nURL: https://github.com/apache/arrow/pull/6980#discussion_r413969298\n\n\n\n##########\nFile path: rust/arrow/src/array/builder.rs\n##########\n@@ -236,6 +251,14 @@ impl<T: ArrowPrimitiveType> BufferBuilderTrait<T> for BufferBuilder<T> {\n         self.write_bytes(v.to_byte_slice(), 1)\n     }\n \n+    default fn append_n(&mut self, n: usize, v: T::Native) -> Result<()> {\n+        self.reserve(n)?;\n+        for _ in 0..n {\n+            self.write_bytes(v.to_byte_slice(), 1)?;\n+        }\n\nReview comment:\n       Thanks, I was not aware of this particular compiler bug. In this particular case the codegen at opt-level 2 or higher is identical, I think the problem as described [here](https://github.com/rust-lang/rust/issues/35981) only manifests on nested for loops.\r\n   \r\n   I can update if necessary but error propagation out of the closure if pretty clunky...\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-04-23T17:03:30.634+0000",
                    "updated": "2020-04-23T17:03:30.634+0000",
                    "started": "2020-04-23T17:03:30.634+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "426630",
                    "issueId": "13299466"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13299466/worklog/426635",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "vertexclique commented on a change in pull request #6980:\nURL: https://github.com/apache/arrow/pull/6980#discussion_r413972358\n\n\n\n##########\nFile path: rust/arrow/src/array/builder.rs\n##########\n@@ -236,6 +251,14 @@ impl<T: ArrowPrimitiveType> BufferBuilderTrait<T> for BufferBuilder<T> {\n         self.write_bytes(v.to_byte_slice(), 1)\n     }\n \n+    default fn append_n(&mut self, n: usize, v: T::Native) -> Result<()> {\n+        self.reserve(n)?;\n+        for _ in 0..n {\n+            self.write_bytes(v.to_byte_slice(), 1)?;\n+        }\n\nReview comment:\n       The place that you are doing byte masking can be a good alternative. Since that place is also accessing with index:\r\n   https://github.com/apache/arrow/pull/6980/files#diff-76c0ed0285da0826a55cf62676556c87R102\r\n   \r\n   If that's extreme, just forget about it. :)\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-04-23T17:07:57.437+0000",
                    "updated": "2020-04-23T17:07:57.437+0000",
                    "started": "2020-04-23T17:07:57.437+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "426635",
                    "issueId": "13299466"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13299466/worklog/426660",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "tustvold commented on a change in pull request #6980:\nURL: https://github.com/apache/arrow/pull/6980#discussion_r413987657\n\n\n\n##########\nFile path: rust/arrow/src/array/builder.rs\n##########\n@@ -236,6 +251,14 @@ impl<T: ArrowPrimitiveType> BufferBuilderTrait<T> for BufferBuilder<T> {\n         self.write_bytes(v.to_byte_slice(), 1)\n     }\n \n+    default fn append_n(&mut self, n: usize, v: T::Native) -> Result<()> {\n+        self.reserve(n)?;\n+        for _ in 0..n {\n+            self.write_bytes(v.to_byte_slice(), 1)?;\n+        }\n\nReview comment:\n       When unoptimised both forms contain a checked_add, it is just hard to see as the foreach+closure isn't inlined, and the codegen for the iterator form is significantly worse in general. When optimised the codegen is identical for both forms.\r\n   \r\n   Given this, I'm inclined to optimise for readability and use the simpler form, but ultimately it is up to you as the maintainers :)\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-04-23T17:29:53.934+0000",
                    "updated": "2020-04-23T17:29:53.934+0000",
                    "started": "2020-04-23T17:29:53.933+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "426660",
                    "issueId": "13299466"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13299466/worklog/426817",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "paddyhoran commented on a change in pull request #6980:\nURL: https://github.com/apache/arrow/pull/6980#discussion_r414230710\n\n\n\n##########\nFile path: rust/arrow/src/array/builder.rs\n##########\n@@ -236,6 +251,14 @@ impl<T: ArrowPrimitiveType> BufferBuilderTrait<T> for BufferBuilder<T> {\n         self.write_bytes(v.to_byte_slice(), 1)\n     }\n \n+    default fn append_n(&mut self, n: usize, v: T::Native) -> Result<()> {\n+        self.reserve(n)?;\n+        for _ in 0..n {\n+            self.write_bytes(v.to_byte_slice(), 1)?;\n+        }\n\nReview comment:\n       I'm not sure that there is consensus on a single \"best\" implementation so I'm going move forward with the current implementation as it is more readable.  \r\n   \r\n   @vertexclique feel free to open another JIRA and PR (preferable with a benchmark) if you feel strongly.\r\n   \r\n   p.s. sorry for causing more confusion than anything else above...  \n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-04-24T01:32:53.730+0000",
                    "updated": "2020-04-24T01:32:53.730+0000",
                    "started": "2020-04-24T01:32:53.730+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "426817",
                    "issueId": "13299466"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
            "id": "4",
            "description": "An improvement or enhancement to an existing feature or task.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
            "name": "Improvement",
            "subtask": false,
            "avatarId": 21140
        },
        "timespent": 9600,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@147179f[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@3af5d580[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@26ece102[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@32a1698a[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@206676f9[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@481436ac[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@9b13a5d[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@3065ffd8[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@23a78693[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@4a6f651d[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@4a0ccddf[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@55087079[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 9600,
        "customfield_12312520": null,
        "customfield_12312521": "Fri Apr 24 01:34:51 UTC 2020",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2020-04-24T01:34:51.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-8516/watchers",
            "watchCount": 1,
            "isWatching": false
        },
        "created": "2020-04-19T13:02:06.000+0000",
        "updated": "2020-04-24T01:34:51.000+0000",
        "timeoriginalestimate": null,
        "description": "{color:#000000}BufferBuilder{color}{color:#0073bf}<{color}{color:#000000}BooleanType>::append_slice is called by PrimitiveBuilder{color}{color:#000000}::append_slice with a constructed vector of true values. {color}\r\n\r\n{color:#000000}Even in release builds the associated allocations and iterations are not optimised out, resulting in a third of the time to parse a parquet file containing single integers being spent in PrimitiveBuilder::append_slice.{color}\r\n\r\n{color:#000000}This PR adds an append_n method to the BufferBuilderTrait that allows this to be handled more efficiently. My rather unscientific testing shows it to halve the amount of time spent in this method yielding an ~20% speedup for my particular workload.{color}\r\n\r\n\u00a0",
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "2h 40m",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 9600
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[Rust] Slow BufferBuilder<BooleanType> inserts within PrimitiveBuilder::append_slice",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13299466/comment/17091080",
                    "id": "17091080",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=paddyhoran",
                        "name": "paddyhoran",
                        "key": "paddyhoran",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Paddy Horan",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "Issue resolved by pull request 6980\n[https://github.com/apache/arrow/pull/6980]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=paddyhoran",
                        "name": "paddyhoran",
                        "key": "paddyhoran",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Paddy Horan",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2020-04-24T01:34:51.167+0000",
                    "updated": "2020-04-24T01:34:51.167+0000"
                }
            ],
            "maxResults": 1,
            "total": 1,
            "startAt": 0
        },
        "customfield_12311820": "0|z0dt68:",
        "customfield_12314139": null
    }
}