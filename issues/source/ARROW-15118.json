{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13417769",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13417769",
    "key": "ARROW-15118",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12351051",
                "id": "12351051",
                "description": "",
                "name": "8.0.0",
                "archived": false,
                "released": true,
                "releaseDate": "2022-05-06"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/4",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
            "name": "Minor",
            "id": "4"
        },
        "labels": [
            "good-second-issue",
            "kernel",
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=pradeepgarigipati",
            "name": "pradeepgarigipati",
            "key": "pradeepgarigipati",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34058",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34058",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34058",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34058"
            },
            "displayName": "Pradeep Garigipati",
            "active": true,
            "timeZone": "Asia/Kolkata"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12328935",
                "id": "12328935",
                "name": "C++"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=edponce",
            "name": "edponce",
            "key": "edponce",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=edponce&avatarId=45496",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=edponce&avatarId=45496",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=edponce&avatarId=45496",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=edponce&avatarId=45496"
            },
            "displayName": "Eduardo Ponce",
            "active": true,
            "timeZone": "America/New_York"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=edponce",
            "name": "edponce",
            "key": "edponce",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=edponce&avatarId=45496",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=edponce&avatarId=45496",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=edponce&avatarId=45496",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=edponce&avatarId=45496"
            },
            "displayName": "Eduardo Ponce",
            "active": true,
            "timeZone": "America/New_York"
        },
        "aggregateprogress": {
            "progress": 18000,
            "total": 18000,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 18000,
            "total": 18000,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-15118/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 30,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13417769/worklog/703793",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "9prady9 opened a new pull request #12080:\nURL: https://github.com/apache/arrow/pull/12080\n\n\n   Don't set bitmap buffer for scalar kernels when all values of inputs are valid\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-01-05T07:48:36.035+0000",
                    "updated": "2022-01-05T07:48:36.035+0000",
                    "started": "2022-01-05T07:48:36.035+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "703793",
                    "issueId": "13417769"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13417769/worklog/703794",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "github-actions[bot] commented on pull request #12080:\nURL: https://github.com/apache/arrow/pull/12080#issuecomment-1005454339\n\n\n   https://issues.apache.org/jira/browse/ARROW-15118\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-01-05T07:48:50.203+0000",
                    "updated": "2022-01-05T07:48:50.203+0000",
                    "started": "2022-01-05T07:48:50.203+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "703794",
                    "issueId": "13417769"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13417769/worklog/703795",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "9prady9 commented on pull request #12080:\nURL: https://github.com/apache/arrow/pull/12080#issuecomment-1005454957\n\n\n   Ideally, I think `validity_preallocated_` should be set to `false` inside `ScalarExecutor::SetupPreallocation`. But I am not sure how to fetch null count details inside ScalarExecutor. Any alternative suggestions or help is appreciated. Thank you!\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-01-05T07:50:15.018+0000",
                    "updated": "2022-01-05T07:50:15.018+0000",
                    "started": "2022-01-05T07:50:15.018+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "703795",
                    "issueId": "13417769"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13417769/worklog/703796",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "9prady9 edited a comment on pull request #12080:\nURL: https://github.com/apache/arrow/pull/12080#issuecomment-1005454957\n\n\n   Ideally, I think `validity_preallocated_` should be set to `false` inside `ScalarExecutor::SetupPreallocation`. But I am not sure how to fetch null count details inside ScalarExecutor. Any alternative suggestions or help is appreciated. Thank you! @edponce @lidavidm @pitrou\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-01-05T07:51:31.180+0000",
                    "updated": "2022-01-05T07:51:31.180+0000",
                    "started": "2022-01-05T07:51:31.180+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "703796",
                    "issueId": "13417769"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13417769/worklog/703940",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "lidavidm commented on pull request #12080:\nURL: https://github.com/apache/arrow/pull/12080#issuecomment-1005691660\n\n\n   Right, you don't get to see the actual data during preallocation. However it's called from here: https://github.com/apache/arrow/blob/ecacff0f4e1059887ea6ff78254c4ae9ff3ea102/cpp/src/arrow/compute/exec.cc#L732\r\n   \r\n   It seems you could pass through the actual data in that case.\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-01-05T13:36:47.188+0000",
                    "updated": "2022-01-05T13:36:47.188+0000",
                    "started": "2022-01-05T13:36:47.188+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "703940",
                    "issueId": "13417769"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13417769/worklog/704454",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "edponce commented on a change in pull request #12080:\nURL: https://github.com/apache/arrow/pull/12080#discussion_r779356911\n\n\n\n##########\nFile path: cpp/src/arrow/compute/exec.cc\n##########\n@@ -370,12 +370,15 @@ class NullPropagator {\n  public:\n   NullPropagator(KernelContext* ctx, const ExecBatch& batch, ArrayData* output)\n       : ctx_(ctx), batch_(batch), output_(output) {\n+    bool are_all_ins_valids = false;\n\nReview comment:\n       Maybe `are_all_ins_valids` --> `are_all_values_valid`\n\n##########\nFile path: cpp/src/arrow/compute/exec.cc\n##########\n@@ -370,12 +370,15 @@ class NullPropagator {\n  public:\n   NullPropagator(KernelContext* ctx, const ExecBatch& batch, ArrayData* output)\n       : ctx_(ctx), batch_(batch), output_(output) {\n+    bool are_all_ins_valids = false;\n     for (const Datum& datum : batch_.values) {\n       auto null_generalization = NullGeneralization::Get(datum);\n \n       if (null_generalization == NullGeneralization::ALL_NULL) {\n         is_all_null_ = true;\n       }\n+      are_all_ins_valids =\n+          are_all_ins_valids && (null_generalization == NullGeneralization::ALL_VALID);\n\nReview comment:\n       This logic is not correct bc `are_all_ins_valids` is initialized with `false` and performing and AND will always result in `false`.\r\n   \r\n   Also, since `null_generalization` is already checked against \"not ALL_VALID\", you can invert the logic to reduce the number of operations and restructure the checks.\r\n   ```c++\r\n   // This would also reset the bitmap if there are no buffer values, which AFAIK should not occur and if it occurs, then resetting the null bitmap also makes sense.\r\n   bool are_all_ins_valids = true;\r\n   for (...) {\r\n     if (null_generalization != NullGeneralization::ALL_VALID) {\r\n       are_all_ins_valids = false;\r\n       if (null_generalization == NullGeneralization::ALL_NULL) {\r\n         is_all_null_ = true;\r\n       }\r\n       if (datum.kind() == Datum::ARRAY) {\r\n         arrays_with_nulls_.push_back(datum.array().get());\r\n       }\r\n     }\r\n     ...\r\n   }\r\n   ```\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-01-06T08:09:22.947+0000",
                    "updated": "2022-01-06T08:09:22.947+0000",
                    "started": "2022-01-06T08:09:22.947+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "704454",
                    "issueId": "13417769"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13417769/worklog/704459",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "9prady9 commented on a change in pull request #12080:\nURL: https://github.com/apache/arrow/pull/12080#discussion_r779374250\n\n\n\n##########\nFile path: cpp/src/arrow/compute/exec.cc\n##########\n@@ -370,12 +370,15 @@ class NullPropagator {\n  public:\n   NullPropagator(KernelContext* ctx, const ExecBatch& batch, ArrayData* output)\n       : ctx_(ctx), batch_(batch), output_(output) {\n+    bool are_all_ins_valids = false;\n\nReview comment:\n       I would think it will be a bit ambiguous, since it is checking if all inputs have all valid values. \n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-01-06T08:24:43.732+0000",
                    "updated": "2022-01-06T08:24:43.732+0000",
                    "started": "2022-01-06T08:24:43.732+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "704459",
                    "issueId": "13417769"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13417769/worklog/704460",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "9prady9 commented on a change in pull request #12080:\nURL: https://github.com/apache/arrow/pull/12080#discussion_r779375284\n\n\n\n##########\nFile path: cpp/src/arrow/compute/exec.cc\n##########\n@@ -370,12 +370,15 @@ class NullPropagator {\n  public:\n   NullPropagator(KernelContext* ctx, const ExecBatch& batch, ArrayData* output)\n       : ctx_(ctx), batch_(batch), output_(output) {\n+    bool are_all_ins_valids = false;\n     for (const Datum& datum : batch_.values) {\n       auto null_generalization = NullGeneralization::Get(datum);\n \n       if (null_generalization == NullGeneralization::ALL_NULL) {\n         is_all_null_ = true;\n       }\n+      are_all_ins_valids =\n+          are_all_ins_valids && (null_generalization == NullGeneralization::ALL_VALID);\n\nReview comment:\n       yes, I have corrected that locally already. In fact, I have reverted this change. Now. I am trying to set `validity_preallocate_` inside `SetupPreallocation` by passing `vector<Datum> args` to it.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-01-06T08:26:41.978+0000",
                    "updated": "2022-01-06T08:26:41.978+0000",
                    "started": "2022-01-06T08:26:41.978+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "704460",
                    "issueId": "13417769"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13417769/worklog/704461",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "9prady9 commented on a change in pull request #12080:\nURL: https://github.com/apache/arrow/pull/12080#discussion_r779375284\n\n\n\n##########\nFile path: cpp/src/arrow/compute/exec.cc\n##########\n@@ -370,12 +370,15 @@ class NullPropagator {\n  public:\n   NullPropagator(KernelContext* ctx, const ExecBatch& batch, ArrayData* output)\n       : ctx_(ctx), batch_(batch), output_(output) {\n+    bool are_all_ins_valids = false;\n     for (const Datum& datum : batch_.values) {\n       auto null_generalization = NullGeneralization::Get(datum);\n \n       if (null_generalization == NullGeneralization::ALL_NULL) {\n         is_all_null_ = true;\n       }\n+      are_all_ins_valids =\n+          are_all_ins_valids && (null_generalization == NullGeneralization::ALL_VALID);\n\nReview comment:\n       yes, I have corrected that locally already. In fact, I have reverted this change. Now. I am trying to set `validity_preallocate_` inside `SetupPreallocation` by passing `vector<Datum> args` to it.\r\n   \r\n   With the new change, I am hitting some other issue - working on that currently\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-01-06T08:27:16.996+0000",
                    "updated": "2022-01-06T08:27:16.996+0000",
                    "started": "2022-01-06T08:27:16.996+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "704461",
                    "issueId": "13417769"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13417769/worklog/704464",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "edponce commented on a change in pull request #12080:\nURL: https://github.com/apache/arrow/pull/12080#discussion_r779376706\n\n\n\n##########\nFile path: cpp/src/arrow/compute/exec.cc\n##########\n@@ -370,12 +370,15 @@ class NullPropagator {\n  public:\n   NullPropagator(KernelContext* ctx, const ExecBatch& batch, ArrayData* output)\n       : ctx_(ctx), batch_(batch), output_(output) {\n+    bool are_all_ins_valids = false;\n\nReview comment:\n       True, so `are_all_inputs_valid`\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-01-06T08:29:25.464+0000",
                    "updated": "2022-01-06T08:29:25.464+0000",
                    "started": "2022-01-06T08:29:25.463+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "704464",
                    "issueId": "13417769"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13417769/worklog/704465",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "edponce commented on a change in pull request #12080:\nURL: https://github.com/apache/arrow/pull/12080#discussion_r779376706\n\n\n\n##########\nFile path: cpp/src/arrow/compute/exec.cc\n##########\n@@ -370,12 +370,15 @@ class NullPropagator {\n  public:\n   NullPropagator(KernelContext* ctx, const ExecBatch& batch, ArrayData* output)\n       : ctx_(ctx), batch_(batch), output_(output) {\n+    bool are_all_ins_valids = false;\n\nReview comment:\n       True, so `are_all_inputs_valid` is more readable and grammatically correct.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-01-06T08:30:02.332+0000",
                    "updated": "2022-01-06T08:30:02.332+0000",
                    "started": "2022-01-06T08:30:02.332+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "704465",
                    "issueId": "13417769"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13417769/worklog/704466",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "edponce commented on a change in pull request #12080:\nURL: https://github.com/apache/arrow/pull/12080#discussion_r779366434\n\n\n\n##########\nFile path: cpp/src/arrow/compute/exec.cc\n##########\n@@ -370,12 +370,15 @@ class NullPropagator {\n  public:\n   NullPropagator(KernelContext* ctx, const ExecBatch& batch, ArrayData* output)\n       : ctx_(ctx), batch_(batch), output_(output) {\n+    bool are_all_ins_valids = false;\n     for (const Datum& datum : batch_.values) {\n       auto null_generalization = NullGeneralization::Get(datum);\n \n       if (null_generalization == NullGeneralization::ALL_NULL) {\n         is_all_null_ = true;\n       }\n+      are_all_ins_valids =\n+          are_all_ins_valids && (null_generalization == NullGeneralization::ALL_VALID);\n\nReview comment:\n       This logic is not correct bc `are_all_ins_valids` is initialized with `false` and performing an AND will always result in `false`.\r\n   \r\n   Also, since `null_generalization` is already checked against \"not ALL_VALID\", you can invert the logic to reduce the number of operations and restructure the checks.\r\n   ```c++\r\n   // This would also reset the bitmap if there are no buffer values, which AFAIK should not occur and if it occurs, then resetting the null bitmap also makes sense.\r\n   bool are_all_ins_valids = true;\r\n   for (...) {\r\n     if (null_generalization != NullGeneralization::ALL_VALID) {\r\n       are_all_ins_valids = false;\r\n       if (null_generalization == NullGeneralization::ALL_NULL) {\r\n         is_all_null_ = true;\r\n       }\r\n       if (datum.kind() == Datum::ARRAY) {\r\n         arrays_with_nulls_.push_back(datum.array().get());\r\n       }\r\n     }\r\n     ...\r\n   }\r\n   ```\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-01-06T08:30:40.043+0000",
                    "updated": "2022-01-06T08:30:40.043+0000",
                    "started": "2022-01-06T08:30:40.043+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "704466",
                    "issueId": "13417769"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13417769/worklog/732130",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "9prady9 commented on pull request #12080:\nURL: https://github.com/apache/arrow/pull/12080#issuecomment-1049507634\n\n\n   I have been able to successfully avoid bitmap allocation for the case where null handling is `INTERSECTION` and all input Datums have all valid values. One simple test case has been added for cast kernel, I would think adding such tests for all compute functions would be prudent.\r\n   \r\n   I did however encounter one unexpected error when in an existing unit test `TestCallScalarFunction.PreallocationCases`. At this moment, I am not sure why a modified context would change Datum kind. Please see the error message of test failure \r\n   ```\r\n   /home/pradeep/gitroot/ArrowWorkspace/worktrees/15118/cpp/src/arrow/datum.cc:71:  \r\n   Check failed: (Datum::ARRAY) == (this->kind()) \r\n   ```\r\n   This is triggered from line 789 of `exec_test.cc`. There is an identical test just few lines above where context argument isn't passed along and that runs fine.\r\n   \r\n   Any hints at what I am missing here is appreciated. Thank you!\r\n   \r\n   Command to run the specific test to see the problem on my branch is given below:\r\n   \r\n   ```\r\n   ./debug/arrow-compute-internals-test --gtest_filter=TestCallScalarFunction.PreallocationCases\r\n   ```\r\n   assuming build type is `debug`\r\n   \r\n   @lidavidm  @edponce \n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-02-24T05:26:25.926+0000",
                    "updated": "2022-02-24T05:26:25.926+0000",
                    "started": "2022-02-24T05:26:25.926+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "732130",
                    "issueId": "13417769"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13417769/worklog/732134",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "9prady9 commented on a change in pull request #12080:\nURL: https://github.com/apache/arrow/pull/12080#discussion_r813557396\n\n\n\n##########\nFile path: cpp/src/arrow/compute/kernels/scalar_if_else_test.cc\n##########\n@@ -3424,5 +3424,31 @@ TEST(TestChooseKernel, Errors) {\n                    {ArrayFromJSON(int64(), \"[-1]\"), ArrayFromJSON(int32(), \"[0]\")}));\n }\n \n+TYPED_TEST(TestIfElsePrimitive, DISABLED_Debug) {\n\nReview comment:\n       I will remove this before my final push.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-02-24T05:28:17.897+0000",
                    "updated": "2022-02-24T05:28:17.897+0000",
                    "started": "2022-02-24T05:28:17.897+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "732134",
                    "issueId": "13417769"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13417769/worklog/732299",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "lidavidm commented on a change in pull request #12080:\nURL: https://github.com/apache/arrow/pull/12080#discussion_r813887878\n\n\n\n##########\nFile path: cpp/src/arrow/compute/exec.cc\n##########\n@@ -772,14 +769,27 @@ class ScalarExecutor : public KernelExecutorImpl<ScalarKernel> {\n     return Status::OK();\n   }\n \n-  Status SetupPreallocation(int64_t total_length) {\n+  Status SetupPreallocation(int64_t total_length, const std::vector<Datum>& args) {\n     output_num_buffers_ = static_cast<int>(output_descr_.type->layout().buffers.size());\n-\n-    // Decide if we need to preallocate memory for this kernel\n-    validity_preallocated_ =\n-        (kernel_->null_handling != NullHandling::COMPUTED_NO_PREALLOCATE &&\n-         kernel_->null_handling != NullHandling::OUTPUT_NOT_NULL &&\n-         output_descr_.type->id() != Type::NA);\n+    auto out_type_id = output_descr_.type->id();\n+    // Default to no validity pre-allocation for following cases:\n+    // - Output Array is NullArray\n+    // - kernel_->null_handling is COMPUTED_NO_PREALLOCATE or OUTPUT_NOT_NULL\n+    validity_preallocated_ = false;\n+    if (out_type_id != Type::NA) {\n+      if (kernel_->null_handling == NullHandling::COMPUTED_PREALLOCATE) {\n+        // Override the flag if kernel asks for pre-allocation\n+        validity_preallocated_ = true;\n+      } else if (kernel_->null_handling == NullHandling::INTERSECTION) {\n+        bool are_all_inputs_valid = true;\n+        for (auto& arg : args) {\n+          auto null_gen = NullGeneralization::Get(arg) == NullGeneralization::ALL_VALID;\n+          are_all_inputs_valid = are_all_inputs_valid && null_gen;\n+        }\n+        validity_preallocated_ =\n+            !(are_all_inputs_valid || kernel_->can_write_into_slices);\n\nReview comment:\n       Why does `can_write_into_slices` disable preallocation?\n\n##########\nFile path: cpp/src/arrow/compute/exec.cc\n##########\n@@ -792,7 +802,7 @@ class ScalarExecutor : public KernelExecutorImpl<ScalarKernel> {\n     preallocate_contiguous_ =\n         (exec_context()->preallocate_contiguous() && kernel_->can_write_into_slices &&\n          validity_preallocated_ && !is_nested(output_descr_.type->id()) &&\n-         !is_dictionary(output_descr_.type->id()) &&\n+         !is_dictionary(out_type_id) &&\n\nReview comment:\n       nit: if we're going to update this here, also update the usage of `output_descr_.type->id()` on the previous line?\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-02-24T13:47:25.909+0000",
                    "updated": "2022-02-24T13:47:25.909+0000",
                    "started": "2022-02-24T13:47:25.909+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "732299",
                    "issueId": "13417769"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13417769/worklog/732300",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "lidavidm commented on pull request #12080:\nURL: https://github.com/apache/arrow/pull/12080#issuecomment-1049878605\n\n\n   Reading the test case, the context is requesting that the kernel be executed in smaller chunks. And inspecting the value in a debugger, the result is now a ChunkedArray. So it seems before, the output was preallocated and now it is not.\r\n   \r\n   The reason relates to my question above - why does `can_write_into_slices` disable preallocation? If `true`, what is expected to happen is that the output will be allocated all at once, and the kernel will be executed on small slices of the input, writing into slices of the output. But that breaks down if we prevent preallocation.\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-02-24T13:48:53.202+0000",
                    "updated": "2022-02-24T13:48:53.202+0000",
                    "started": "2022-02-24T13:48:53.202+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "732300",
                    "issueId": "13417769"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13417769/worklog/732327",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "9prady9 commented on a change in pull request #12080:\nURL: https://github.com/apache/arrow/pull/12080#discussion_r813914506\n\n\n\n##########\nFile path: cpp/src/arrow/compute/exec.cc\n##########\n@@ -772,14 +769,27 @@ class ScalarExecutor : public KernelExecutorImpl<ScalarKernel> {\n     return Status::OK();\n   }\n \n-  Status SetupPreallocation(int64_t total_length) {\n+  Status SetupPreallocation(int64_t total_length, const std::vector<Datum>& args) {\n     output_num_buffers_ = static_cast<int>(output_descr_.type->layout().buffers.size());\n-\n-    // Decide if we need to preallocate memory for this kernel\n-    validity_preallocated_ =\n-        (kernel_->null_handling != NullHandling::COMPUTED_NO_PREALLOCATE &&\n-         kernel_->null_handling != NullHandling::OUTPUT_NOT_NULL &&\n-         output_descr_.type->id() != Type::NA);\n+    auto out_type_id = output_descr_.type->id();\n+    // Default to no validity pre-allocation for following cases:\n+    // - Output Array is NullArray\n+    // - kernel_->null_handling is COMPUTED_NO_PREALLOCATE or OUTPUT_NOT_NULL\n+    validity_preallocated_ = false;\n+    if (out_type_id != Type::NA) {\n+      if (kernel_->null_handling == NullHandling::COMPUTED_PREALLOCATE) {\n+        // Override the flag if kernel asks for pre-allocation\n+        validity_preallocated_ = true;\n+      } else if (kernel_->null_handling == NullHandling::INTERSECTION) {\n+        bool are_all_inputs_valid = true;\n+        for (auto& arg : args) {\n+          auto null_gen = NullGeneralization::Get(arg) == NullGeneralization::ALL_VALID;\n+          are_all_inputs_valid = are_all_inputs_valid && null_gen;\n+        }\n+        validity_preallocated_ =\n+            !(are_all_inputs_valid || kernel_->can_write_into_slices);\n\nReview comment:\n       Good catch, I forgot to post the question about this one - some how without this some kernels are failing tests, I will provide errors soon. I didn't expect this to cause such failures because the name doesn't indicate anything related to allocation. Just added it temporarily to see if it resolves anything.\n\n\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-02-24T14:09:29.395+0000",
                    "updated": "2022-02-24T14:09:29.395+0000",
                    "started": "2022-02-24T14:09:29.395+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "732327",
                    "issueId": "13417769"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13417769/worklog/732330",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "9prady9 commented on pull request #12080:\nURL: https://github.com/apache/arrow/pull/12080#issuecomment-1049900659\n\n\n    @lidavidm  An Array as input , irrespective of the size, can result in output type of chucked array ?\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-02-24T14:13:22.346+0000",
                    "updated": "2022-02-24T14:13:22.346+0000",
                    "started": "2022-02-24T14:13:22.346+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "732330",
                    "issueId": "13417769"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13417769/worklog/732351",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "lidavidm commented on pull request #12080:\nURL: https://github.com/apache/arrow/pull/12080#issuecomment-1049923761\n\n\n   The kernels infrastructure can execute the kernel over smaller chunks of the input. In this case, either the kernel needs to be able to write into a slice of a preallocated region, or else the output has to be chunked.\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-02-24T14:36:53.477+0000",
                    "updated": "2022-02-24T14:36:53.477+0000",
                    "started": "2022-02-24T14:36:53.477+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "732351",
                    "issueId": "13417769"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13417769/worklog/733485",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "9prady9 commented on pull request #12080:\nURL: https://github.com/apache/arrow/pull/12080#issuecomment-1051803064\n\n\n   `C++ /AMD64 Windows Ming=GW 64 C++` job failed due to some sort io stream issue it seems\n\n\n-- \nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nTo unsubscribe, e-mail: github-unsubscribe@arrow.apache.org\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2022-02-26T08:10:34.253+0000",
                    "updated": "2022-02-26T08:10:34.253+0000",
                    "started": "2022-02-26T08:10:34.253+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "733485",
                    "issueId": "13417769"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
            "id": "4",
            "description": "An improvement or enhancement to an existing feature or task.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
            "name": "Improvement",
            "subtask": false,
            "avatarId": 21140
        },
        "timespent": 18000,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@7f1e3fb0[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@179e6308[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@62e52cfd[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@687958a[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@79a68671[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@566a0fc3[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@1d234337[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@2732bedc[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@6a6a3145[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@6c783fdc[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@6bc5f39f[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@59337465[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 18000,
        "customfield_12312520": null,
        "customfield_12312521": "Tue Mar 01 13:14:43 UTC 2022",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2022-03-01T13:14:43.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-15118/watchers",
            "watchCount": 3,
            "isWatching": false
        },
        "created": "2021-12-15T16:24:47.000+0000",
        "updated": "2022-03-01T18:31:57.000+0000",
        "timeoriginalestimate": null,
        "description": "Cast kernels seem to always create and populate the null bitmap even if the input data structure had a {{nullptr}} null bitmap. This automatic and extra allocation is not desirable, and not consistent.\r\n\r\nIt seems some cast kernels use COMPUTED_NO_PREALLOCATE and others use the default (INTERSECTION). We could change INTERSECTION to be a general case where if all inputs have no nulls, then a null bitmap should not be emitted.",
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "5h",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 18000
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[C++] Avoid bitmap buffer if all inputs are all valid for Scalar Kernels",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13417769/comment/17460072",
                    "id": "17460072",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=lidavidm",
                        "name": "lidavidm",
                        "key": "lidavidm",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "David Li",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "Or as Antoine noted, we can generalize it and change INTERSECTION to not emit a null bitmap if all inputs have no nulls.",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=lidavidm",
                        "name": "lidavidm",
                        "key": "lidavidm",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "David Li",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2021-12-15T16:26:21.729+0000",
                    "updated": "2021-12-15T16:26:21.729+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13417769/comment/17495978",
                    "id": "17495978",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=pradeepgarigipati",
                        "name": "pradeepgarigipati",
                        "key": "pradeepgarigipati",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34058",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34058",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34058",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34058"
                        },
                        "displayName": "Pradeep Garigipati",
                        "active": true,
                        "timeZone": "Asia/Kolkata"
                    },
                    "body": "[~edponce] Can you please point me to the cast kernels that are doing INTERSECTION ? Grep for `null_handling` on files with `cast` word in them gave the following output and none seem to be setting null_handling as `INTERSECTION`.\r\n\r\n\r\n{quote}\r\nsrc/arrow/compute/kernels/scalar_cast_dictionary.cc:  kernel.null_handling = NullHandling::COMPUTED_NO_PREALLOCATE;\r\nsrc/arrow/compute/kernels/scalar_cast_internal.cc:  kernel.null_handling = NullHandling::COMPUTED_NO_PREALLOCATE;\r\nsrc/arrow/compute/kernels/scalar_cast_internal.cc:  kernel.null_handling = NullHandling::COMPUTED_NO_PREALLOCATE;\r\nsrc/arrow/compute/kernels/scalar_cast_nested.cc:  kernel.null_handling = NullHandling::COMPUTED_NO_PREALLOCATE;\r\nsrc/arrow/compute/kernels/scalar_cast_nested.cc:  kernel.null_handling = NullHandling::COMPUTED_NO_PREALLOCATE;\r\n{quote}\r\n\r\nPerhaps, it is being set somewhere but I haven't been able to place it yet.",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=pradeepgarigipati",
                        "name": "pradeepgarigipati",
                        "key": "pradeepgarigipati",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34058",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34058",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34058",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34058"
                        },
                        "displayName": "Pradeep Garigipati",
                        "active": true,
                        "timeZone": "Asia/Kolkata"
                    },
                    "created": "2022-02-22T09:44:18.582+0000",
                    "updated": "2022-02-22T09:45:33.623+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13417769/comment/17499525",
                    "id": "17499525",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=lidavidm",
                        "name": "lidavidm",
                        "key": "lidavidm",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "David Li",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "body": "Issue resolved by pull request 12080\n[https://github.com/apache/arrow/pull/12080]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=lidavidm",
                        "name": "lidavidm",
                        "key": "lidavidm",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "David Li",
                        "active": true,
                        "timeZone": "America/New_York"
                    },
                    "created": "2022-03-01T13:14:43.723+0000",
                    "updated": "2022-03-01T13:14:43.723+0000"
                }
            ],
            "maxResults": 3,
            "total": 3,
            "startAt": 0
        },
        "customfield_12311820": "0|z0xqxk:",
        "customfield_12314139": null
    }
}