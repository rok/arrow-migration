{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13310492",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13310492",
    "key": "ARROW-9084",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12347769",
                "id": "12347769",
                "description": "",
                "name": "1.0.0",
                "archived": false,
                "released": true,
                "releaseDate": "2020-07-24"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "name": "Major",
            "id": "3"
        },
        "labels": [
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12348202",
                "id": "12348202",
                "name": "0.17.1",
                "archived": false,
                "released": true,
                "releaseDate": "2020-05-18"
            }
        ],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [],
        "customfield_12313825": null,
        "assignee": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=veprbl",
            "name": "veprbl",
            "key": "veprbl",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
            },
            "displayName": "Dmitry Kalinkin",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12328935",
                "id": "12328935",
                "name": "C++"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=veprbl",
            "name": "veprbl",
            "key": "veprbl",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
            },
            "displayName": "Dmitry Kalinkin",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=veprbl",
            "name": "veprbl",
            "key": "veprbl",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
            },
            "displayName": "Dmitry Kalinkin",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "aggregateprogress": {
            "progress": 12600,
            "total": 12600,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 12600,
            "total": 12600,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-9084/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 21,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13310492/worklog/443459",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "veprbl opened a new pull request #7388:\nURL: https://github.com/apache/arrow/pull/7388\n\n\n   ZSTD::zstd target is expected to exist, but zstd exports\r\n   ZSTD::zstd_{shared,static}.\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-06-09T23:11:01.358+0000",
                    "updated": "2020-06-09T23:11:01.358+0000",
                    "started": "2020-06-09T23:11:01.358+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "443459",
                    "issueId": "13310492"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13310492/worklog/443460",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "github-actions[bot] commented on pull request #7388:\nURL: https://github.com/apache/arrow/pull/7388#issuecomment-641629188\n\n\n   https://issues.apache.org/jira/browse/ARROW-9084\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-06-09T23:16:48.427+0000",
                    "updated": "2020-06-09T23:16:48.427+0000",
                    "started": "2020-06-09T23:16:48.427+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "443460",
                    "issueId": "13310492"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13310492/worklog/443472",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "kou commented on a change in pull request #7388:\nURL: https://github.com/apache/arrow/pull/7388#discussion_r437780818\n\n\n\n##########\nFile path: cpp/cmake_modules/ThirdpartyToolchain.cmake\n##########\n@@ -1879,13 +1879,19 @@ macro(build_zstd)\n \n   add_dependencies(toolchain zstd_ep)\n   add_dependencies(ZSTD::zstd zstd_ep)\n+  set(ZSTD_LIBRARIES ZSTD::zstd)\n endmacro()\n \n if(ARROW_WITH_ZSTD)\n   resolve_dependency(ZSTD)\n \n+  # \"SYSTEM\" source will prioritize cmake config, which exports\n+  # zstd::libzstd_{static,shared}\n+  if(TARGET zstd::libzstd_static)\n+    set(ZSTD_LIBRARIES zstd::libzstd_static)\n\nReview comment:\n       Why do you choose `zstd_static` not `zstd_shared`.\r\n   I think that we should `zstd_shared` for security reason.\r\n   If zstd has a security problem, we just need to update zstd with `zstd_shared`. But we need to update zstd and rebuild Apache Arrow with `zstd_static`.\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-06-09T23:40:35.490+0000",
                    "updated": "2020-06-09T23:40:35.490+0000",
                    "started": "2020-06-09T23:40:35.490+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "443472",
                    "issueId": "13310492"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13310492/worklog/443481",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "veprbl commented on a change in pull request #7388:\nURL: https://github.com/apache/arrow/pull/7388#discussion_r437787687\n\n\n\n##########\nFile path: cpp/cmake_modules/ThirdpartyToolchain.cmake\n##########\n@@ -1879,13 +1879,19 @@ macro(build_zstd)\n \n   add_dependencies(toolchain zstd_ep)\n   add_dependencies(ZSTD::zstd zstd_ep)\n+  set(ZSTD_LIBRARIES ZSTD::zstd)\n endmacro()\n \n if(ARROW_WITH_ZSTD)\n   resolve_dependency(ZSTD)\n \n+  # \"SYSTEM\" source will prioritize cmake config, which exports\n+  # zstd::libzstd_{static,shared}\n+  if(TARGET zstd::libzstd_static)\n+    set(ZSTD_LIBRARIES zstd::libzstd_static)\n\nReview comment:\n       > Why do you choose `zstd_static` not `zstd_shared`.\r\n   \r\n   I just used the same setting as is used for the vendored library:\r\n   https://github.com/apache/arrow/blob/b058cf0d1c26ad7984c104bb84322cc7dcc66f00/cpp/cmake_modules/ThirdpartyToolchain.cmake#L1840-L1841\r\n   I was not sure what implications shared linking would have when arrow-cpp is itself built as a static library, so I sticked to doing what is already being done.\r\n   \r\n   > I think that we should `zstd_shared` for security reason.\r\n   > If zstd has a security problem, we just need to update zstd with `zstd_shared`. But we need to update zstd and rebuild Apache Arrow with `zstd_static`.\r\n   \r\n   My use case is packaging for downstream, where the reverse dependencies (arrow-cpp) would be also rebuilt. Following your argument, one could argue that unbreaking build against non-vendored zstd is in itself a security improvement.\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-06-10T00:03:53.628+0000",
                    "updated": "2020-06-10T00:03:53.628+0000",
                    "started": "2020-06-10T00:03:53.628+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "443481",
                    "issueId": "13310492"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13310492/worklog/443483",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "veprbl commented on pull request #7388:\nURL: https://github.com/apache/arrow/pull/7388#issuecomment-641642689\n\n\n   @kou Thanks a lot for format fix, I was unable to address that with cmake-format 0.6.10\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-06-10T00:04:59.458+0000",
                    "updated": "2020-06-10T00:04:59.458+0000",
                    "started": "2020-06-10T00:04:59.458+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "443483",
                    "issueId": "13310492"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13310492/worklog/443499",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "kou commented on pull request #7388:\nURL: https://github.com/apache/arrow/pull/7388#issuecomment-641650133\n\n\n   We need cmake-format 0.5.2: https://github.com/apache/arrow/blob/master/dev/archery/requirements-lint.txt#L3\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-06-10T00:30:03.623+0000",
                    "updated": "2020-06-10T00:30:03.623+0000",
                    "started": "2020-06-10T00:30:03.623+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "443499",
                    "issueId": "13310492"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13310492/worklog/443505",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "kou commented on a change in pull request #7388:\nURL: https://github.com/apache/arrow/pull/7388#discussion_r437795928\n\n\n\n##########\nFile path: cpp/cmake_modules/ThirdpartyToolchain.cmake\n##########\n@@ -1879,13 +1879,19 @@ macro(build_zstd)\n \n   add_dependencies(toolchain zstd_ep)\n   add_dependencies(ZSTD::zstd zstd_ep)\n+  set(ZSTD_LIBRARIES ZSTD::zstd)\n endmacro()\n \n if(ARROW_WITH_ZSTD)\n   resolve_dependency(ZSTD)\n \n+  # \"SYSTEM\" source will prioritize cmake config, which exports\n+  # zstd::libzstd_{static,shared}\n+  if(TARGET zstd::libzstd_static)\n+    set(ZSTD_LIBRARIES zstd::libzstd_static)\n\nReview comment:\n       OK.\r\n   We use static library for vendored libraries and shared library for external libraries. If we use static library for external libraries, we provide an option to use static library and the option is off by default. e.g. `ARROW_BOOST_USE_SHARED` is `ON` by default: https://github.com/apache/arrow/blob/master/cpp/cmake_modules/DefineOptions.cmake#L278\r\n   \r\n   \n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-06-10T00:34:11.463+0000",
                    "updated": "2020-06-10T00:34:11.463+0000",
                    "started": "2020-06-10T00:34:11.463+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "443505",
                    "issueId": "13310492"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13310492/worklog/443748",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "tobim commented on a change in pull request #7388:\nURL: https://github.com/apache/arrow/pull/7388#discussion_r438140636\n\n\n\n##########\nFile path: cpp/cmake_modules/FindZSTD.cmake\n##########\n@@ -65,4 +66,5 @@ if(ZSTD_FOUND)\n   set_target_properties(ZSTD::zstd\n                         PROPERTIES IMPORTED_LOCATION \"${ZSTD_LIB}\"\n                                    INTERFACE_INCLUDE_DIRECTORIES \"${ZSTD_INCLUDE_DIR}\")\n+  set(ZSTD_LIBRARIES ZSTD::zstd)\n\nReview comment:\n       Why do you introduce this extra indirection? The target could just as well be renamed to `zstd::libzstd_{shared,static}` depending on `ARROW_ZSTD_USE_SHARED`.\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-06-10T13:54:52.545+0000",
                    "updated": "2020-06-10T13:54:52.545+0000",
                    "started": "2020-06-10T13:54:52.545+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "443748",
                    "issueId": "13310492"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13310492/worklog/443750",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "tobim commented on a change in pull request #7388:\nURL: https://github.com/apache/arrow/pull/7388#discussion_r438141186\n\n\n\n##########\nFile path: cpp/cmake_modules/ThirdpartyToolchain.cmake\n##########\n@@ -1879,13 +1879,26 @@ macro(build_zstd)\n \n   add_dependencies(toolchain zstd_ep)\n   add_dependencies(ZSTD::zstd zstd_ep)\n+  set(ZSTD_LIBRARIES ZSTD::zstd)\n endmacro()\n \n if(ARROW_WITH_ZSTD)\n   resolve_dependency(ZSTD)\n \n+  # \"SYSTEM\" source will prioritize cmake config, which exports\n+  # zstd::libzstd_{static,shared}\n+  if(ARROW_ZSTD_USE_SHARED)\n+    if(TARGET zstd::libzstd_shared)\n+      set(ZSTD_LIBRARIES zstd::libzstd_shared)\n+    endif()\n+  else()\n+    if(TARGET zstd::libzstd_static)\n+      set(ZSTD_LIBRARIES zstd::libzstd_static)\n+    endif()\n+  endif()\n+\n   # TODO: Don't use global includes but rather target_include_directories\n-  get_target_property(ZSTD_INCLUDE_DIR ZSTD::zstd INTERFACE_INCLUDE_DIRECTORIES)\n+  get_target_property(ZSTD_INCLUDE_DIR ${ZSTD_LIBRARIES} INTERFACE_INCLUDE_DIRECTORIES)\n\nReview comment:\n       It would be better to remove those 2 lines, but maybe not for this PR?\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-06-10T13:55:40.279+0000",
                    "updated": "2020-06-10T13:55:40.279+0000",
                    "started": "2020-06-10T13:55:40.279+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "443750",
                    "issueId": "13310492"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13310492/worklog/443762",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "veprbl commented on a change in pull request #7388:\nURL: https://github.com/apache/arrow/pull/7388#discussion_r438155204\n\n\n\n##########\nFile path: cpp/cmake_modules/FindZSTD.cmake\n##########\n@@ -65,4 +66,5 @@ if(ZSTD_FOUND)\n   set_target_properties(ZSTD::zstd\n                         PROPERTIES IMPORTED_LOCATION \"${ZSTD_LIB}\"\n                                    INTERFACE_INCLUDE_DIRECTORIES \"${ZSTD_INCLUDE_DIR}\")\n+  set(ZSTD_LIBRARIES ZSTD::zstd)\n\nReview comment:\n       I did not find a way to rename, `add_library(foo ALIAS bar)` doesn't work in this case.\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-06-10T14:14:36.003+0000",
                    "updated": "2020-06-10T14:14:36.003+0000",
                    "started": "2020-06-10T14:14:36.002+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "443762",
                    "issueId": "13310492"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13310492/worklog/443764",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "veprbl commented on a change in pull request #7388:\nURL: https://github.com/apache/arrow/pull/7388#discussion_r438157379\n\n\n\n##########\nFile path: cpp/cmake_modules/ThirdpartyToolchain.cmake\n##########\n@@ -1879,13 +1879,26 @@ macro(build_zstd)\n \n   add_dependencies(toolchain zstd_ep)\n   add_dependencies(ZSTD::zstd zstd_ep)\n+  set(ZSTD_LIBRARIES ZSTD::zstd)\n endmacro()\n \n if(ARROW_WITH_ZSTD)\n   resolve_dependency(ZSTD)\n \n+  # \"SYSTEM\" source will prioritize cmake config, which exports\n+  # zstd::libzstd_{static,shared}\n+  if(ARROW_ZSTD_USE_SHARED)\n+    if(TARGET zstd::libzstd_shared)\n+      set(ZSTD_LIBRARIES zstd::libzstd_shared)\n+    endif()\n+  else()\n+    if(TARGET zstd::libzstd_static)\n+      set(ZSTD_LIBRARIES zstd::libzstd_static)\n+    endif()\n+  endif()\n+\n   # TODO: Don't use global includes but rather target_include_directories\n-  get_target_property(ZSTD_INCLUDE_DIR ZSTD::zstd INTERFACE_INCLUDE_DIRECTORIES)\n+  get_target_property(ZSTD_INCLUDE_DIR ${ZSTD_LIBRARIES} INTERFACE_INCLUDE_DIRECTORIES)\n\nReview comment:\n       These are not specific to zstd, so I didn't look into this.\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-06-10T14:17:18.418+0000",
                    "updated": "2020-06-10T14:17:18.418+0000",
                    "started": "2020-06-10T14:17:18.417+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "443764",
                    "issueId": "13310492"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13310492/worklog/443982",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "tobim commented on a change in pull request #7388:\nURL: https://github.com/apache/arrow/pull/7388#discussion_r438399869\n\n\n\n##########\nFile path: cpp/cmake_modules/FindZSTD.cmake\n##########\n@@ -65,4 +66,5 @@ if(ZSTD_FOUND)\n   set_target_properties(ZSTD::zstd\n                         PROPERTIES IMPORTED_LOCATION \"${ZSTD_LIB}\"\n                                    INTERFACE_INCLUDE_DIRECTORIES \"${ZSTD_INCLUDE_DIR}\")\n+  set(ZSTD_LIBRARIES ZSTD::zstd)\n\nReview comment:\n       I was thinking of something like\r\n   ```cmake\r\n   if(ZSTD_FOUND)\r\n     if(ARROW_ZSTD_USE_SHARED)\r\n       set(ZSTD_TARGET zstd::libzstd_shared)\r\n     else()\r\n       set(ZSTD_TARGET zstd::libzstd_static)\r\n     endif()\r\n     add_library(${ZSTD_TARGET} UNKNOWN_IMPORTED)\r\n     set_target_properties(${ZSTD_TARGET}\r\n                           PROPERTIES IMPORTED_LOCATION \"${ZSTD_LIB}\"\r\n                                      INTERFACE_INCLUDE_DIRECTORIES \"${ZSTD_INCLUDE_DIR}\")\r\n   endif()\r\n   ```\r\n   The intention is to align the interface of `FindZSTD` with the exported targets file from upstream.\r\n   \n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-06-10T20:49:34.850+0000",
                    "updated": "2020-06-10T20:49:34.850+0000",
                    "started": "2020-06-10T20:49:34.850+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "443982",
                    "issueId": "13310492"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13310492/worklog/443985",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "kou commented on a change in pull request #7388:\nURL: https://github.com/apache/arrow/pull/7388#discussion_r438396958\n\n\n\n##########\nFile path: cpp/cmake_modules/FindZSTD.cmake\n##########\n@@ -65,4 +66,5 @@ if(ZSTD_FOUND)\n   set_target_properties(ZSTD::zstd\n                         PROPERTIES IMPORTED_LOCATION \"${ZSTD_LIB}\"\n                                    INTERFACE_INCLUDE_DIRECTORIES \"${ZSTD_INCLUDE_DIR}\")\n+  set(ZSTD_LIBRARIES ZSTD::zstd)\n\nReview comment:\n       I think that @tobim wants to say:\r\n   \r\n   ```cmake\r\n   if(ARROW_ZSTD_USE_SHARED)\r\n     add_library(ZSTD::zstd_shared ...)\r\n   else()\r\n     add_library(ZSTD::zstd_static ...)\r\n   endif\r\n   ```\r\n   \r\n   If we don't have this abstraction layer, we need to check `ARROW_ZSTD_USE_SHARED` where we want to use zstd. We want to avoid it. So we need this abstraction layer.\r\n   \r\n   But we want to add this abstraction layer in `cpp/cmake_modules/ThirdpartyToolchain.cmake` instead of `Find*.cmake` like `ARROW_PROTOBUF_LIBPROTOC`:\r\n   \r\n   ```diff\r\n   diff --git a/cpp/CMakeLists.txt b/cpp/CMakeLists.txt\r\n   index be6aeb038..8c05d4b84 100644\r\n   --- a/cpp/CMakeLists.txt\r\n   +++ b/cpp/CMakeLists.txt\r\n   @@ -676,8 +676,8 @@ if(ARROW_WITH_ZLIB)\r\n    endif()\r\n    \r\n    if(ARROW_WITH_ZSTD)\r\n   -  list(APPEND ARROW_STATIC_LINK_LIBS ${ZSTD_LIBRARIES})\r\n   -  list(APPEND ARROW_STATIC_INSTALL_INTERFACE_LIBS ${ZSTD_LIBRARIES})\r\n   +  list(APPEND ARROW_STATIC_LINK_LIBS ${ARROW_ZSTD_LIBZSTD})\r\n   +  list(APPEND ARROW_STATIC_INSTALL_INTERFACE_LIBS ${ARROW_ZSTD_LIBZSTD})\r\n    endif()\r\n    \r\n    if(ARROW_ORC)\r\n   diff --git a/cpp/cmake_modules/FindZSTD.cmake b/cpp/cmake_modules/FindZSTD.cmake\r\n   index 91d7dd37f..6c1acaf89 100644\r\n   --- a/cpp/cmake_modules/FindZSTD.cmake\r\n   +++ b/cpp/cmake_modules/FindZSTD.cmake\r\n   @@ -66,5 +66,4 @@ if(ZSTD_FOUND)\r\n      set_target_properties(ZSTD::zstd\r\n                            PROPERTIES IMPORTED_LOCATION \"${ZSTD_LIB}\"\r\n                                       INTERFACE_INCLUDE_DIRECTORIES \"${ZSTD_INCLUDE_DIR}\")\r\n   -  set(ZSTD_LIBRARIES ZSTD::zstd)\r\n    endif()\r\n   diff --git a/cpp/cmake_modules/ThirdpartyToolchain.cmake b/cpp/cmake_modules/ThirdpartyToolchain.cmake\r\n   index 10ba6bfae..852da506b 100644\r\n   --- a/cpp/cmake_modules/ThirdpartyToolchain.cmake\r\n   +++ b/cpp/cmake_modules/ThirdpartyToolchain.cmake\r\n   @@ -1880,26 +1880,25 @@ macro(build_zstd)\r\n    \r\n      add_dependencies(toolchain zstd_ep)\r\n      add_dependencies(ZSTD::zstd zstd_ep)\r\n   -  set(ZSTD_LIBRARIES ZSTD::zstd)\r\n    endmacro()\r\n    \r\n    if(ARROW_WITH_ZSTD)\r\n      resolve_dependency(ZSTD)\r\n    \r\n   -  # \"SYSTEM\" source will prioritize cmake config, which exports\r\n   -  # zstd::libzstd_{static,shared}\r\n   -  if(ARROW_ZSTD_USE_SHARED)\r\n   -    if(TARGET zstd::libzstd_shared)\r\n   -      set(ZSTD_LIBRARIES zstd::libzstd_shared)\r\n   -    endif()\r\n   +  if(TARGET ZSTD::zstd)\r\n   +    set(ARROW_ZSTD_LIBZSTD ZSTD::zstd)\r\n      else()\r\n   -    if(TARGET zstd::libzstd_static)\r\n   -      set(ZSTD_LIBRARIES zstd::libzstd_static)\r\n   +    # \"SYSTEM\" source will prioritize cmake config, which exports\r\n   +    # zstd::libzstd_{static,shared}\r\n   +    if(ARROW_ZSTD_USE_SHARED)\r\n   +      set(ARROW_ZSTD_LIBZSTD zstd::libzstd_shared)\r\n   +    else()\r\n   +      set(ARROW_ZSTD_LIBZSTD zstd::libzstd_static)\r\n        endif()\r\n      endif()\r\n    \r\n      # TODO: Don't use global includes but rather target_include_directories\r\n   -  get_target_property(ZSTD_INCLUDE_DIR ${ZSTD_LIBRARIES} INTERFACE_INCLUDE_DIRECTORIES)\r\n   +  get_target_property(ZSTD_INCLUDE_DIR ${ARROW_ZSTD_LIBZSTD} INTERFACE_INCLUDE_DIRECTORIES)\r\n      include_directories(SYSTEM ${ZSTD_INCLUDE_DIR})\r\n    endif()\r\n    ```\n\n##########\nFile path: cpp/cmake_modules/ThirdpartyToolchain.cmake\n##########\n@@ -1879,13 +1879,26 @@ macro(build_zstd)\n \n   add_dependencies(toolchain zstd_ep)\n   add_dependencies(ZSTD::zstd zstd_ep)\n+  set(ZSTD_LIBRARIES ZSTD::zstd)\n endmacro()\n \n if(ARROW_WITH_ZSTD)\n   resolve_dependency(ZSTD)\n \n+  # \"SYSTEM\" source will prioritize cmake config, which exports\n+  # zstd::libzstd_{static,shared}\n+  if(ARROW_ZSTD_USE_SHARED)\n+    if(TARGET zstd::libzstd_shared)\n+      set(ZSTD_LIBRARIES zstd::libzstd_shared)\n+    endif()\n+  else()\n+    if(TARGET zstd::libzstd_static)\n+      set(ZSTD_LIBRARIES zstd::libzstd_static)\n+    endif()\n+  endif()\n+\n   # TODO: Don't use global includes but rather target_include_directories\n-  get_target_property(ZSTD_INCLUDE_DIR ZSTD::zstd INTERFACE_INCLUDE_DIRECTORIES)\n+  get_target_property(ZSTD_INCLUDE_DIR ${ZSTD_LIBRARIES} INTERFACE_INCLUDE_DIRECTORIES)\n\nReview comment:\n       Ah, this block will be able to be removed because `ZSTD_INCLUDE_DIR` is already associated to the `ZSTD::zstd` target.\r\n   Could you try removing this block?\n\n##########\nFile path: cpp/cmake_modules/FindZSTD.cmake\n##########\n@@ -65,4 +66,5 @@ if(ZSTD_FOUND)\n   set_target_properties(ZSTD::zstd\n                         PROPERTIES IMPORTED_LOCATION \"${ZSTD_LIB}\"\n                                    INTERFACE_INCLUDE_DIRECTORIES \"${ZSTD_INCLUDE_DIR}\")\n+  set(ZSTD_LIBRARIES ZSTD::zstd)\n\nReview comment:\n       (It's better that we rename our internal `ZSTD::zstd` target name to `zstd::libzstd` because the official `ZSTDConfig.cmake` uses `zstd::libzstd*`.)\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-06-10T20:50:22.108+0000",
                    "updated": "2020-06-10T20:50:22.108+0000",
                    "started": "2020-06-10T20:50:22.107+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "443985",
                    "issueId": "13310492"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13310492/worklog/443994",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "tobim commented on a change in pull request #7388:\nURL: https://github.com/apache/arrow/pull/7388#discussion_r438407248\n\n\n\n##########\nFile path: cpp/cmake_modules/FindZSTD.cmake\n##########\n@@ -65,4 +66,5 @@ if(ZSTD_FOUND)\n   set_target_properties(ZSTD::zstd\n                         PROPERTIES IMPORTED_LOCATION \"${ZSTD_LIB}\"\n                                    INTERFACE_INCLUDE_DIRECTORIES \"${ZSTD_INCLUDE_DIR}\")\n+  set(ZSTD_LIBRARIES ZSTD::zstd)\n\nReview comment:\n       @kou, yes that is what I meant, it would make your suggested abstraction for `ARROW_ZSTD_LIBZSTD` a little simpler because you won't have to do an extra check for `ZSTD::zstd`.\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-06-10T21:04:01.278+0000",
                    "updated": "2020-06-10T21:04:01.278+0000",
                    "started": "2020-06-10T21:04:01.278+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "443994",
                    "issueId": "13310492"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13310492/worklog/443995",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "tobim commented on a change in pull request #7388:\nURL: https://github.com/apache/arrow/pull/7388#discussion_r438407635\n\n\n\n##########\nFile path: cpp/cmake_modules/ThirdpartyToolchain.cmake\n##########\n@@ -1879,13 +1879,26 @@ macro(build_zstd)\n \n   add_dependencies(toolchain zstd_ep)\n   add_dependencies(ZSTD::zstd zstd_ep)\n+  set(ZSTD_LIBRARIES ZSTD::zstd)\n endmacro()\n \n if(ARROW_WITH_ZSTD)\n   resolve_dependency(ZSTD)\n \n+  # \"SYSTEM\" source will prioritize cmake config, which exports\n+  # zstd::libzstd_{static,shared}\n+  if(ARROW_ZSTD_USE_SHARED)\n+    if(TARGET zstd::libzstd_shared)\n+      set(ZSTD_LIBRARIES zstd::libzstd_shared)\n+    endif()\n+  else()\n+    if(TARGET zstd::libzstd_static)\n+      set(ZSTD_LIBRARIES zstd::libzstd_static)\n+    endif()\n+  endif()\n+\n   # TODO: Don't use global includes but rather target_include_directories\n-  get_target_property(ZSTD_INCLUDE_DIR ZSTD::zstd INTERFACE_INCLUDE_DIRECTORIES)\n+  get_target_property(ZSTD_INCLUDE_DIR ${ZSTD_LIBRARIES} INTERFACE_INCLUDE_DIRECTORIES)\n\nReview comment:\n       Yes, the comment above is also quite misleading actually.\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-06-10T21:04:56.315+0000",
                    "updated": "2020-06-10T21:04:56.315+0000",
                    "started": "2020-06-10T21:04:56.314+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "443995",
                    "issueId": "13310492"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13310492/worklog/444032",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "kou commented on a change in pull request #7388:\nURL: https://github.com/apache/arrow/pull/7388#discussion_r438438723\n\n\n\n##########\nFile path: cpp/cmake_modules/FindZSTD.cmake\n##########\n@@ -21,13 +21,17 @@ endif()\n \n set(ZSTD_STATIC_LIB_SUFFIX \"${ZSTD_MSVC_STATIC_LIB_SUFFIX}${CMAKE_STATIC_LIBRARY_SUFFIX}\")\n set(ZSTD_STATIC_LIB_NAME ${CMAKE_STATIC_LIBRARY_PREFIX}zstd${ZSTD_STATIC_LIB_SUFFIX})\n+if(ARROW_ZSTD_USE_SHARED)\n+  set(ZSTD_LIB_NAMES \"${CMAKE_SHARED_LIBRARY_PREFIX}zstd${CMAKE_SHARED_LIBRARY_SUFFIX}\")\n+else()\n+  set(ZSTD_LIB_NAMES \"${ZSTD_STATIC_LIB_NAME}\" \"lib${ZSTD_STATIC_LIB_NAME}\")\n+endif()\n \n # First, find via if specified ZTD_ROOT\n if(ZSTD_ROOT)\n   message(STATUS \"Using ZSTD_ROOT: ${ZSTD_ROOT}\")\n   find_library(ZSTD_LIB\n-               NAMES zstd \"${ZSTD_STATIC_LIB_NAME}\" \"lib${ZSTD_STATIC_LIB_NAME}\"\n-                     \"${CMAKE_SHARED_LIBRARY_PREFIX}zstd${CMAKE_SHARED_LIBRARY_SUFFIX}\"\n+               NAMES ${ZSTD_LIB_NAMES}\n\nReview comment:\n       Conda on Windows failed: https://ci.appveyor.com/project/ApacheSoftwareFoundation/arrow/builds/33446250/job/5pyasx9g6mscq7hm\r\n   \r\n   ```text\r\n   -- Using ZSTD_ROOT: C:\\Miniconda37-x64\\envs\\arrow/Library\r\n   CMake Error at C:/Miniconda37-x64/envs/arrow/Library/share/cmake-3.17/Modules/FindPackageHandleStandardArgs.cmake:164 (message):\r\n     Could NOT find ZSTD (missing: ZSTD_LIB)\r\n   Call Stack (most recent call first):\r\n     C:/Miniconda37-x64/envs/arrow/Library/share/cmake-3.17/Modules/FindPackageHandleStandardArgs.cmake:445 (_FPHSA_FAILURE_MESSAGE)\r\n     cmake_modules/FindZSTD.cmake:62 (find_package_handle_standard_args)\r\n     cmake_modules/ThirdpartyToolchain.cmake:156 (find_package)\r\n     cmake_modules/ThirdpartyToolchain.cmake:1887 (resolve_dependency)\r\n     CMakeLists.txt:463 (include)\r\n   ```\r\n   \r\n   Files in win-64/zstd-1.4.4-h9f78265_3.tar.bz2 at https://anaconda.org/conda-forge/zstd/files :\r\n   \r\n   ```text\r\n   zstd-1.4.4-h9f78265_3\r\n   |-- Library\r\n   |   |-- bin\r\n   |   |   |-- libzstd.dll\r\n   |   |   |-- zstd.dll\r\n   |   |   `-- zstd.exe\r\n   |   |-- include\r\n   |   |   |-- cover.h\r\n   |   |   |-- zbuff.h\r\n   |   |   |-- zdict.h\r\n   |   |   |-- zstd.h\r\n   |   |   `-- zstd_errors.h\r\n   |   `-- lib\r\n   |       |-- libzstd.lib\r\n   |       |-- libzstd_static.lib\r\n   |       |-- zstd.lib\r\n   |       `-- zstd_static.lib\r\n   `-- info\r\n       |-- about.json\r\n       |-- files\r\n       |-- git\r\n       |-- hash_input.json\r\n       |-- index.json\r\n       |-- licenses\r\n       |   `-- LICENSE\r\n       |-- paths.json\r\n       |-- recipe\r\n       |   |-- bld.bat\r\n       |   |-- build.sh\r\n       |   |-- conda_build_config.yaml\r\n       |   |-- meta.yaml\r\n       |   `-- meta.yaml.template\r\n       |-- run_exports.json\r\n       `-- test\r\n           `-- run_test.bat\r\n   ```\r\n   \n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-06-10T22:18:42.945+0000",
                    "updated": "2020-06-10T22:18:42.945+0000",
                    "started": "2020-06-10T22:18:42.945+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "444032",
                    "issueId": "13310492"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13310492/worklog/444051",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "kou commented on a change in pull request #7388:\nURL: https://github.com/apache/arrow/pull/7388#discussion_r438470424\n\n\n\n##########\nFile path: cpp/cmake_modules/FindZSTD.cmake\n##########\n@@ -21,13 +21,17 @@ endif()\n \n set(ZSTD_STATIC_LIB_SUFFIX \"${ZSTD_MSVC_STATIC_LIB_SUFFIX}${CMAKE_STATIC_LIBRARY_SUFFIX}\")\n set(ZSTD_STATIC_LIB_NAME ${CMAKE_STATIC_LIBRARY_PREFIX}zstd${ZSTD_STATIC_LIB_SUFFIX})\n+if(ARROW_ZSTD_USE_SHARED)\n+  set(ZSTD_LIB_NAMES \"${CMAKE_SHARED_LIBRARY_PREFIX}zstd${CMAKE_SHARED_LIBRARY_SUFFIX}\")\n+else()\n+  set(ZSTD_LIB_NAMES \"${ZSTD_STATIC_LIB_NAME}\" \"lib${ZSTD_STATIC_LIB_NAME}\")\n+endif()\n \n # First, find via if specified ZTD_ROOT\n if(ZSTD_ROOT)\n   message(STATUS \"Using ZSTD_ROOT: ${ZSTD_ROOT}\")\n   find_library(ZSTD_LIB\n-               NAMES zstd \"${ZSTD_STATIC_LIB_NAME}\" \"lib${ZSTD_STATIC_LIB_NAME}\"\n-                     \"${CMAKE_SHARED_LIBRARY_PREFIX}zstd${CMAKE_SHARED_LIBRARY_SUFFIX}\"\n+               NAMES ${ZSTD_LIB_NAMES}\n\nReview comment:\n       `CMAKE_FIND_DEBUG_MODE` will help us:\r\n   \r\n   ```diff\r\n   diff --git a/ci/appveyor-cpp-build.bat b/ci/appveyor-cpp-build.bat\r\n   index a2ce07656..246029928 100644\r\n   --- a/ci/appveyor-cpp-build.bat\r\n   +++ b/ci/appveyor-cpp-build.bat\r\n   @@ -45,6 +45,7 @@ if \"%JOB%\" == \"Build_Debug\" (\r\n            -DARROW_USE_PRECOMPILED_HEADERS=OFF ^\r\n            -DARROW_VERBOSE_THIRDPARTY_BUILD=OFF ^\r\n            -DCMAKE_BUILD_TYPE=\"Debug\" ^\r\n   +        -DCMAKE_FIND_DEBUG_MODE=ON ^\r\n            -DCMAKE_UNITY_BUILD=ON ^\r\n            .. || exit /B\r\n   \r\n   ```\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-06-10T23:59:48.990+0000",
                    "updated": "2020-06-10T23:59:48.990+0000",
                    "started": "2020-06-10T23:59:48.990+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "444051",
                    "issueId": "13310492"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13310492/worklog/444055",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "veprbl commented on a change in pull request #7388:\nURL: https://github.com/apache/arrow/pull/7388#discussion_r438472409\n\n\n\n##########\nFile path: cpp/cmake_modules/FindZSTD.cmake\n##########\n@@ -21,13 +21,17 @@ endif()\n \n set(ZSTD_STATIC_LIB_SUFFIX \"${ZSTD_MSVC_STATIC_LIB_SUFFIX}${CMAKE_STATIC_LIBRARY_SUFFIX}\")\n set(ZSTD_STATIC_LIB_NAME ${CMAKE_STATIC_LIBRARY_PREFIX}zstd${ZSTD_STATIC_LIB_SUFFIX})\n+if(ARROW_ZSTD_USE_SHARED)\n+  set(ZSTD_LIB_NAMES \"${CMAKE_SHARED_LIBRARY_PREFIX}zstd${CMAKE_SHARED_LIBRARY_SUFFIX}\")\n+else()\n+  set(ZSTD_LIB_NAMES \"${ZSTD_STATIC_LIB_NAME}\" \"lib${ZSTD_STATIC_LIB_NAME}\")\n+endif()\n \n # First, find via if specified ZTD_ROOT\n if(ZSTD_ROOT)\n   message(STATUS \"Using ZSTD_ROOT: ${ZSTD_ROOT}\")\n   find_library(ZSTD_LIB\n-               NAMES zstd \"${ZSTD_STATIC_LIB_NAME}\" \"lib${ZSTD_STATIC_LIB_NAME}\"\n-                     \"${CMAKE_SHARED_LIBRARY_PREFIX}zstd${CMAKE_SHARED_LIBRARY_SUFFIX}\"\n+               NAMES ${ZSTD_LIB_NAMES}\n\nReview comment:\n       It's probably because I intentionally removed plain \"zstd\" from the library names.\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-06-11T00:06:56.126+0000",
                    "updated": "2020-06-11T00:06:56.126+0000",
                    "started": "2020-06-11T00:06:56.126+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "444055",
                    "issueId": "13310492"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13310492/worklog/445258",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "kou commented on a change in pull request #7388:\nURL: https://github.com/apache/arrow/pull/7388#discussion_r439701060\n\n\n\n##########\nFile path: cpp/cmake_modules/ThirdpartyToolchain.cmake\n##########\n@@ -1879,13 +1879,26 @@ macro(build_zstd)\n \n   add_dependencies(toolchain zstd_ep)\n   add_dependencies(ZSTD::zstd zstd_ep)\n+  set(ZSTD_LIBRARIES ZSTD::zstd)\n endmacro()\n \n if(ARROW_WITH_ZSTD)\n   resolve_dependency(ZSTD)\n \n+  # \"SYSTEM\" source will prioritize cmake config, which exports\n+  # zstd::libzstd_{static,shared}\n+  if(ARROW_ZSTD_USE_SHARED)\n+    if(TARGET zstd::libzstd_shared)\n+      set(ZSTD_LIBRARIES zstd::libzstd_shared)\n+    endif()\n+  else()\n+    if(TARGET zstd::libzstd_static)\n+      set(ZSTD_LIBRARIES zstd::libzstd_static)\n+    endif()\n+  endif()\n+\n   # TODO: Don't use global includes but rather target_include_directories\n-  get_target_property(ZSTD_INCLUDE_DIR ZSTD::zstd INTERFACE_INCLUDE_DIRECTORIES)\n+  get_target_property(ZSTD_INCLUDE_DIR ${ZSTD_LIBRARIES} INTERFACE_INCLUDE_DIRECTORIES)\n\nReview comment:\n       This block is needed.\r\n   We need to set zstd dependencies explicitly.\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-06-13T02:25:44.075+0000",
                    "updated": "2020-06-13T02:25:44.075+0000",
                    "started": "2020-06-13T02:25:44.075+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "445258",
                    "issueId": "13310492"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13310492/worklog/445260",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "kou closed pull request #7388:\nURL: https://github.com/apache/arrow/pull/7388\n\n\n   \n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-06-13T02:30:43.849+0000",
                    "updated": "2020-06-13T02:30:43.849+0000",
                    "started": "2020-06-13T02:30:43.848+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "445260",
                    "issueId": "13310492"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
            "id": "1",
            "description": "A problem which impairs or prevents the functions of the product.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
            "name": "Bug",
            "subtask": false,
            "avatarId": 21133
        },
        "timespent": 12600,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@232d7dda[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@751aea98[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@149cd13b[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@36f0a71a[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@1a7e592f[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@7b2ebf7a[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@949ac2d[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@3ab21269[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@52ed8331[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@5c362379[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@185ad416[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@32d1bc2e[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 12600,
        "customfield_12312520": null,
        "customfield_12312521": "Sat Jun 13 02:30:35 UTC 2020",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2020-06-13T02:30:35.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-9084/watchers",
            "watchCount": 1,
            "isWatching": false
        },
        "created": "2020-06-09T23:08:23.000+0000",
        "updated": "2020-06-13T03:01:40.000+0000",
        "timeoriginalestimate": null,
        "description": "A following problem occurs when arrow-cpp is built against system zstd:\r\n{noformat}\r\nCMake Error at cmake_modules/ThirdpartyToolchain.cmake:1860 (get_target_property):\r\n  get_target_property() called with non-existent target \"ZSTD::zstd\".\r\n{noformat}",
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "3.5h",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 12600
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[C++] CMake is unable to find zstd target when ZSTD_SOURCE=SYSTEM",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": "zstd 1.4.5",
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13310492/comment/17134632",
                    "id": "17134632",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=kou",
                        "name": "kou",
                        "key": "kou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=kou&avatarId=30762",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kou&avatarId=30762",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kou&avatarId=30762",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kou&avatarId=30762"
                        },
                        "displayName": "Kouhei Sutou",
                        "active": true,
                        "timeZone": "Asia/Tokyo"
                    },
                    "body": "Issue resolved by pull request 7388\n[https://github.com/apache/arrow/pull/7388]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=kou",
                        "name": "kou",
                        "key": "kou",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=kou&avatarId=30762",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kou&avatarId=30762",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kou&avatarId=30762",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kou&avatarId=30762"
                        },
                        "displayName": "Kouhei Sutou",
                        "active": true,
                        "timeZone": "Asia/Tokyo"
                    },
                    "created": "2020-06-13T02:30:35.914+0000",
                    "updated": "2020-06-13T02:30:35.914+0000"
                }
            ],
            "maxResults": 1,
            "total": 1,
            "startAt": 0
        },
        "customfield_12311820": "0|z0foso:",
        "customfield_12314139": null
    }
}