{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13327804",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13327804",
    "key": "ARROW-10023",
    "fields": {
        "fixVersions": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/version/12345977",
                "id": "12345977",
                "description": "",
                "name": "2.0.0",
                "archived": false,
                "released": true,
                "releaseDate": "2020-10-19"
            }
        ],
        "resolution": {
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
            "id": "1",
            "description": "A fix for this issue is checked into the tree and tested.",
            "name": "Fixed"
        },
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12312321": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312326": null,
        "customfield_12310300": null,
        "customfield_12312327": null,
        "customfield_12312324": null,
        "customfield_12312720": null,
        "customfield_12312325": null,
        "lastViewed": null,
        "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "name": "Major",
            "id": "3"
        },
        "labels": [
            "pull-request-available"
        ],
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12313422": "false",
        "customfield_12310310": "0.0",
        "customfield_12312331": null,
        "customfield_12312332": null,
        "aggregatetimeoriginalestimate": null,
        "timeestimate": 0,
        "customfield_12312330": null,
        "versions": [],
        "customfield_12311120": null,
        "customfield_12313826": null,
        "customfield_12312339": null,
        "issuelinks": [],
        "customfield_12313825": null,
        "assignee": null,
        "customfield_12312337": null,
        "customfield_12313823": null,
        "customfield_12312338": null,
        "customfield_12311920": null,
        "customfield_12313822": null,
        "customfield_12312335": null,
        "customfield_12313821": null,
        "customfield_12312336": null,
        "customfield_12313820": null,
        "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "name": "Resolved",
            "id": "5",
            "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
            }
        },
        "components": [
            {
                "self": "https://issues.apache.org/jira/rest/api/2/component/12334626",
                "id": "12334626",
                "name": "C++ - Gandiva"
            }
        ],
        "customfield_12312026": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "aggregatetimeestimate": 0,
        "customfield_12312022": null,
        "customfield_12310921": null,
        "customfield_12310920": "9223372036854775807",
        "customfield_12312823": null,
        "creator": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=namanu",
            "name": "namanu",
            "key": "namanu",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34050",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34050",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34050",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34050"
            },
            "displayName": "Naman Udasi",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "subtasks": [],
        "reporter": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=namanu",
            "name": "namanu",
            "key": "namanu",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34050",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34050",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34050",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34050"
            },
            "displayName": "Naman Udasi",
            "active": true,
            "timeZone": "Etc/UTC"
        },
        "aggregateprogress": {
            "progress": 9000,
            "total": 9000,
            "percent": 100
        },
        "customfield_12313520": null,
        "customfield_12310250": null,
        "progress": {
            "progress": 9000,
            "total": 9000,
            "percent": 100
        },
        "customfield_12313924": null,
        "votes": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-10023/votes",
            "votes": 0,
            "hasVoted": false
        },
        "worklog": {
            "startAt": 0,
            "maxResults": 20,
            "total": 15,
            "worklogs": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13327804/worklog/489444",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "github-actions[bot] commented on pull request #8231:\nURL: https://github.com/apache/arrow/pull/8231#issuecomment-697188782\n\n\n   https://issues.apache.org/jira/browse/ARROW-10023\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-09-23T07:33:18.667+0000",
                    "updated": "2020-09-23T07:33:18.667+0000",
                    "started": "2020-09-23T07:33:18.666+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "489444",
                    "issueId": "13327804"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13327804/worklog/489445",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "naman1996 commented on pull request #8231:\nURL: https://github.com/apache/arrow/pull/8231#issuecomment-697189413\n\n\n   Functionality - Takes in 3 arguments. String, split_string, and index. Will split the given string by using split_string as delimitersand return the string at index position. Eg - \r\n   \r\n   split_part(\"A,B,C\", \",\", 2) will output B\r\n   \r\n   \"A,B,C\" -> [A, B, C] -> (return 2nd split element i.e. B)\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-09-23T07:34:46.886+0000",
                    "updated": "2020-09-23T07:34:46.886+0000",
                    "started": "2020-09-23T07:34:46.886+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "489445",
                    "issueId": "13327804"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13327804/worklog/491882",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "vvellanki commented on a change in pull request #8231:\nURL: https://github.com/apache/arrow/pull/8231#discussion_r495801708\n\n\n\n##########\nFile path: cpp/src/gandiva/precompiled/string_ops.cc\n##########\n@@ -835,6 +845,59 @@ const char* replace_utf8_utf8_utf8(gdv_int64 context, const char* text,\n                                              out_len);\n }\n \n+FORCE_INLINE\n+const char* split_part(gdv_int64 context, const char* text, gdv_int32 text_len,\n+                       const char* delimiter, gdv_int32 delim_len, gdv_int32 index,\n+                       gdv_int32* out_len) {\n+  char* ret;\n+  if (index < 1) {\n+    gdv_fn_context_set_error_msg(context, \"Index should be >= 1\");\n+    return \"\";\n+  }\n+\n+  if (delim_len == 0 || text_len == 0) {\n+    // output will just be text if no delimiter is provided\n+    return text;\n+  }\n+\n+  // converting both c style arrays to string for easy processing\n+  std::string input = std::string(text);\n\nReview comment:\n       Does this work with utf-8 strings and utf-8 delimiters?\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-09-28T09:21:05.595+0000",
                    "updated": "2020-09-28T09:21:05.595+0000",
                    "started": "2020-09-28T09:21:05.595+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "491882",
                    "issueId": "13327804"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13327804/worklog/491906",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "praveenbingo commented on a change in pull request #8231:\nURL: https://github.com/apache/arrow/pull/8231#discussion_r495825647\n\n\n\n##########\nFile path: cpp/src/gandiva/precompiled/string_ops.cc\n##########\n@@ -835,6 +845,59 @@ const char* replace_utf8_utf8_utf8(gdv_int64 context, const char* text,\n                                              out_len);\n }\n \n+FORCE_INLINE\n+const char* split_part(gdv_int64 context, const char* text, gdv_int32 text_len,\n+                       const char* delimiter, gdv_int32 delim_len, gdv_int32 index,\n+                       gdv_int32* out_len) {\n+  char* ret;\n+  if (index < 1) {\n+    gdv_fn_context_set_error_msg(context, \"Index should be >= 1\");\n\nReview comment:\n       need to also set NativeFunction::kCanReturnErrors in the function definition\n\n##########\nFile path: cpp/src/gandiva/precompiled/string_ops.cc\n##########\n@@ -40,6 +40,16 @@ gdv_int32 bit_length_binary(const gdv_binary input, gdv_int32 length) {\n   return length * 8;\n }\n \n+int match_string(std::string str, int startPos, std::string splitter) {\n\nReview comment:\n       we avoid use of std::string since that causes linking issues in some environments..please use const char * instead\n\n##########\nFile path: cpp/src/gandiva/precompiled/string_ops.cc\n##########\n@@ -835,6 +845,59 @@ const char* replace_utf8_utf8_utf8(gdv_int64 context, const char* text,\n                                              out_len);\n }\n \n+FORCE_INLINE\n+const char* split_part(gdv_int64 context, const char* text, gdv_int32 text_len,\n+                       const char* delimiter, gdv_int32 delim_len, gdv_int32 index,\n+                       gdv_int32* out_len) {\n+  char* ret;\n+  if (index < 1) {\n+    gdv_fn_context_set_error_msg(context, \"Index should be >= 1\");\n+    return \"\";\n+  }\n+\n+  if (delim_len == 0 || text_len == 0) {\n+    // output will just be text if no delimiter is provided\n+    return text;\n+  }\n+\n+  // converting both c style arrays to string for easy processing\n+  std::string input = std::string(text);\n+  std::string splitter = std::string(delimiter);\n+  std::string out_str = \"\";\n\nReview comment:\n       please avoid use of std::string throughout..\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-09-28T10:01:53.118+0000",
                    "updated": "2020-09-28T10:01:53.118+0000",
                    "started": "2020-09-28T10:01:53.118+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "491906",
                    "issueId": "13327804"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13327804/worklog/491953",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "naman1996 commented on a change in pull request #8231:\nURL: https://github.com/apache/arrow/pull/8231#discussion_r495902001\n\n\n\n##########\nFile path: cpp/src/gandiva/precompiled/string_ops.cc\n##########\n@@ -835,6 +845,59 @@ const char* replace_utf8_utf8_utf8(gdv_int64 context, const char* text,\n                                              out_len);\n }\n \n+FORCE_INLINE\n+const char* split_part(gdv_int64 context, const char* text, gdv_int32 text_len,\n+                       const char* delimiter, gdv_int32 delim_len, gdv_int32 index,\n+                       gdv_int32* out_len) {\n+  char* ret;\n+  if (index < 1) {\n+    gdv_fn_context_set_error_msg(context, \"Index should be >= 1\");\n+    return \"\";\n+  }\n+\n+  if (delim_len == 0 || text_len == 0) {\n+    // output will just be text if no delimiter is provided\n+    return text;\n+  }\n+\n+  // converting both c style arrays to string for easy processing\n+  std::string input = std::string(text);\n\nReview comment:\n       currently this will work but after refactor to remove string won't. Will need to handle that separately after removing std::string.\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-09-28T12:32:02.911+0000",
                    "updated": "2020-09-28T12:32:02.911+0000",
                    "started": "2020-09-28T12:32:02.910+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "491953",
                    "issueId": "13327804"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13327804/worklog/492062",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "naman1996 commented on a change in pull request #8231:\nURL: https://github.com/apache/arrow/pull/8231#discussion_r496091512\n\n\n\n##########\nFile path: cpp/src/gandiva/precompiled/string_ops.cc\n##########\n@@ -835,6 +845,59 @@ const char* replace_utf8_utf8_utf8(gdv_int64 context, const char* text,\n                                              out_len);\n }\n \n+FORCE_INLINE\n+const char* split_part(gdv_int64 context, const char* text, gdv_int32 text_len,\n+                       const char* delimiter, gdv_int32 delim_len, gdv_int32 index,\n+                       gdv_int32* out_len) {\n+  char* ret;\n+  if (index < 1) {\n+    gdv_fn_context_set_error_msg(context, \"Index should be >= 1\");\n+    return \"\";\n+  }\n+\n+  if (delim_len == 0 || text_len == 0) {\n+    // output will just be text if no delimiter is provided\n+    return text;\n+  }\n+\n+  // converting both c style arrays to string for easy processing\n+  std::string input = std::string(text);\n\nReview comment:\n       Have removed usages of std::string and have also added some unit tests for utf-8 strings and utf-8 delimiters.\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-09-28T16:46:08.299+0000",
                    "updated": "2020-09-28T16:46:08.299+0000",
                    "started": "2020-09-28T16:46:08.299+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "492062",
                    "issueId": "13327804"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13327804/worklog/495913",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "naman1996 closed pull request #8231:\nURL: https://github.com/apache/arrow/pull/8231\n\n\n   \n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-10-06T13:47:58.591+0000",
                    "updated": "2020-10-06T13:47:58.591+0000",
                    "started": "2020-10-06T13:47:58.591+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "495913",
                    "issueId": "13327804"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13327804/worklog/495914",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "naman1996 opened a new pull request #8231:\nURL: https://github.com/apache/arrow/pull/8231\n\n\n   \n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-10-06T13:48:11.460+0000",
                    "updated": "2020-10-06T13:48:11.460+0000",
                    "started": "2020-10-06T13:48:11.459+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "495914",
                    "issueId": "13327804"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13327804/worklog/496561",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "praveenbingo commented on a change in pull request #8231:\nURL: https://github.com/apache/arrow/pull/8231#discussion_r498103645\n\n\n\n##########\nFile path: cpp/src/gandiva/precompiled/string_ops.cc\n##########\n@@ -40,6 +40,18 @@ gdv_int32 bit_length_binary(const gdv_binary input, gdv_int32 length) {\n   return length * 8;\n }\n \n+int match_string(const char* input, gdv_int32 input_len, gdv_int32 start_pos,\n\nReview comment:\n       please force inline..\n\n##########\nFile path: cpp/src/gandiva/precompiled/string_ops.cc\n##########\n@@ -40,6 +40,18 @@ gdv_int32 bit_length_binary(const gdv_binary input, gdv_int32 length) {\n   return length * 8;\n }\n \n+int match_string(const char* input, gdv_int32 input_len, gdv_int32 start_pos,\n\nReview comment:\n       are we intentionally not inling this?\n\n##########\nFile path: cpp/src/gandiva/precompiled/string_ops.cc\n##########\n@@ -835,6 +847,66 @@ const char* replace_utf8_utf8_utf8(gdv_int64 context, const char* text,\n                                              out_len);\n }\n \n+FORCE_INLINE\n+const char* split_part(gdv_int64 context, const char* text, gdv_int32 text_len,\n+                       const char* delimiter, gdv_int32 delim_len, gdv_int32 index,\n+                       gdv_int32* out_len) {\n+  if (index < 1) {\n+    char error_message[100];\n+    snprintf(error_message, sizeof(error_message),\n+             \"Index in split_part must be positive, value provided was %d\", index);\n+    gdv_fn_context_set_error_msg(context, error_message);\n+    *out_len = 0;\n+    return \"\";\n+  }\n+\n+  if (delim_len == 0 || text_len == 0) {\n+    // output will just be text if no delimiter is provided\n+    *out_len = text_len;\n+    return text;\n+  }\n+\n+  int i = 0, match_no = 1;\n+\n+  while (i < text_len) {\n+    // find the position where delimiter matched for the first time\n+    int match_pos = match_string(text, text_len, i, delimiter, delim_len);\n+    if (match_pos == -1 && match_no != index) {\n+      // reached the end without finding a match.\n+      *out_len = 0;\n+      return \"\";\n+    } else {\n+      // Found a match. If the match number is index then return this match\n+      if (match_no == index) {\n+        int end_pos = match_pos - delim_len;\n+\n+        if (match_pos == -1) {\n+          // end position should be last position of the string as we have the last\n+          // delimiter\n+          end_pos = text_len;\n+        }\n+\n+        *out_len = end_pos - i;\n+        char* out_str =\n+            reinterpret_cast<char*>(gdv_fn_context_arena_malloc(context, *out_len));\n+        if (out_str == nullptr) {\n+          gdv_fn_context_set_error_msg(context,\n+                                       \"Could not allocate memory for output string\");\n+          *out_len = 0;\n\nReview comment:\n       intialize this to 0 in the beginning and only override in the positive case? avoids missing setting this value for e.g. the last return misses this i guess?\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-10-07T12:48:43.526+0000",
                    "updated": "2020-10-07T12:48:43.526+0000",
                    "started": "2020-10-07T12:48:43.525+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "496561",
                    "issueId": "13327804"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13327804/worklog/497186",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "naman1996 commented on a change in pull request #8231:\nURL: https://github.com/apache/arrow/pull/8231#discussion_r501558799\n\n\n\n##########\nFile path: cpp/src/gandiva/precompiled/string_ops.cc\n##########\n@@ -835,6 +847,66 @@ const char* replace_utf8_utf8_utf8(gdv_int64 context, const char* text,\n                                              out_len);\n }\n \n+FORCE_INLINE\n+const char* split_part(gdv_int64 context, const char* text, gdv_int32 text_len,\n+                       const char* delimiter, gdv_int32 delim_len, gdv_int32 index,\n+                       gdv_int32* out_len) {\n+  if (index < 1) {\n+    char error_message[100];\n+    snprintf(error_message, sizeof(error_message),\n+             \"Index in split_part must be positive, value provided was %d\", index);\n+    gdv_fn_context_set_error_msg(context, error_message);\n+    *out_len = 0;\n+    return \"\";\n+  }\n+\n+  if (delim_len == 0 || text_len == 0) {\n+    // output will just be text if no delimiter is provided\n+    *out_len = text_len;\n+    return text;\n+  }\n+\n+  int i = 0, match_no = 1;\n+\n+  while (i < text_len) {\n+    // find the position where delimiter matched for the first time\n+    int match_pos = match_string(text, text_len, i, delimiter, delim_len);\n+    if (match_pos == -1 && match_no != index) {\n+      // reached the end without finding a match.\n+      *out_len = 0;\n+      return \"\";\n+    } else {\n+      // Found a match. If the match number is index then return this match\n+      if (match_no == index) {\n+        int end_pos = match_pos - delim_len;\n+\n+        if (match_pos == -1) {\n+          // end position should be last position of the string as we have the last\n+          // delimiter\n+          end_pos = text_len;\n+        }\n+\n+        *out_len = end_pos - i;\n+        char* out_str =\n+            reinterpret_cast<char*>(gdv_fn_context_arena_malloc(context, *out_len));\n+        if (out_str == nullptr) {\n+          gdv_fn_context_set_error_msg(context,\n+                                       \"Could not allocate memory for output string\");\n+          *out_len = 0;\n\nReview comment:\n       added out_len 0 in the beginning\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-10-08T08:59:46.559+0000",
                    "updated": "2020-10-08T08:59:46.559+0000",
                    "started": "2020-10-08T08:59:46.558+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "497186",
                    "issueId": "13327804"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13327804/worklog/497200",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "naman1996 commented on a change in pull request #8231:\nURL: https://github.com/apache/arrow/pull/8231#discussion_r501578740\n\n\n\n##########\nFile path: cpp/src/gandiva/precompiled/string_ops.cc\n##########\n@@ -40,6 +40,18 @@ gdv_int32 bit_length_binary(const gdv_binary input, gdv_int32 length) {\n   return length * 8;\n }\n \n+int match_string(const char* input, gdv_int32 input_len, gdv_int32 start_pos,\n\nReview comment:\n       added\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-10-08T09:31:30.486+0000",
                    "updated": "2020-10-08T09:31:30.486+0000",
                    "started": "2020-10-08T09:31:30.485+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "497200",
                    "issueId": "13327804"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13327804/worklog/497201",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "naman1996 commented on a change in pull request #8231:\nURL: https://github.com/apache/arrow/pull/8231#discussion_r501579527\n\n\n\n##########\nFile path: cpp/src/gandiva/precompiled/string_ops.cc\n##########\n@@ -835,6 +847,66 @@ const char* replace_utf8_utf8_utf8(gdv_int64 context, const char* text,\n                                              out_len);\n }\n \n+FORCE_INLINE\n+const char* split_part(gdv_int64 context, const char* text, gdv_int32 text_len,\n+                       const char* delimiter, gdv_int32 delim_len, gdv_int32 index,\n+                       gdv_int32* out_len) {\n+  if (index < 1) {\n+    char error_message[100];\n+    snprintf(error_message, sizeof(error_message),\n+             \"Index in split_part must be positive, value provided was %d\", index);\n+    gdv_fn_context_set_error_msg(context, error_message);\n+    *out_len = 0;\n+    return \"\";\n+  }\n+\n+  if (delim_len == 0 || text_len == 0) {\n+    // output will just be text if no delimiter is provided\n+    *out_len = text_len;\n+    return text;\n+  }\n+\n+  int i = 0, match_no = 1;\n+\n+  while (i < text_len) {\n+    // find the position where delimiter matched for the first time\n+    int match_pos = match_string(text, text_len, i, delimiter, delim_len);\n+    if (match_pos == -1 && match_no != index) {\n+      // reached the end without finding a match.\n+      *out_len = 0;\n+      return \"\";\n+    } else {\n+      // Found a match. If the match number is index then return this match\n+      if (match_no == index) {\n+        int end_pos = match_pos - delim_len;\n+\n+        if (match_pos == -1) {\n+          // end position should be last position of the string as we have the last\n+          // delimiter\n+          end_pos = text_len;\n+        }\n+\n+        *out_len = end_pos - i;\n+        char* out_str =\n+            reinterpret_cast<char*>(gdv_fn_context_arena_malloc(context, *out_len));\n+        if (out_str == nullptr) {\n+          gdv_fn_context_set_error_msg(context,\n+                                       \"Could not allocate memory for output string\");\n+          *out_len = 0;\n\nReview comment:\n       I cannot refactor this output length out as we set this before trying to allocate memory. In rest of the places I have removed *out_len = 0 in the PR and added it in the beginning.\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-10-08T09:32:35.837+0000",
                    "updated": "2020-10-08T09:32:35.837+0000",
                    "started": "2020-10-08T09:32:35.836+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "497201",
                    "issueId": "13327804"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13327804/worklog/497265",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "praveenbingo closed pull request #8231:\nURL: https://github.com/apache/arrow/pull/8231\n\n\n   \n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-10-08T11:55:12.091+0000",
                    "updated": "2020-10-08T11:55:12.091+0000",
                    "started": "2020-10-08T11:55:12.091+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "497265",
                    "issueId": "13327804"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13327804/worklog/498195",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "praveenbingo closed pull request #8231:\nURL: https://github.com/apache/arrow/pull/8231\n\n\n   \n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-10-09T13:47:54.999+0000",
                    "updated": "2020-10-09T13:47:54.999+0000",
                    "started": "2020-10-09T13:47:54.999+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "498195",
                    "issueId": "13327804"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13327804/worklog/498472",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot",
                        "name": "githubbot",
                        "key": "githubbot",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "ASF GitHub Bot",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "comment": "naman1996 commented on a change in pull request #8231:\nURL: https://github.com/apache/arrow/pull/8231#discussion_r501558799\n\n\n\n##########\nFile path: cpp/src/gandiva/precompiled/string_ops.cc\n##########\n@@ -835,6 +847,66 @@ const char* replace_utf8_utf8_utf8(gdv_int64 context, const char* text,\n                                              out_len);\n }\n \n+FORCE_INLINE\n+const char* split_part(gdv_int64 context, const char* text, gdv_int32 text_len,\n+                       const char* delimiter, gdv_int32 delim_len, gdv_int32 index,\n+                       gdv_int32* out_len) {\n+  if (index < 1) {\n+    char error_message[100];\n+    snprintf(error_message, sizeof(error_message),\n+             \"Index in split_part must be positive, value provided was %d\", index);\n+    gdv_fn_context_set_error_msg(context, error_message);\n+    *out_len = 0;\n+    return \"\";\n+  }\n+\n+  if (delim_len == 0 || text_len == 0) {\n+    // output will just be text if no delimiter is provided\n+    *out_len = text_len;\n+    return text;\n+  }\n+\n+  int i = 0, match_no = 1;\n+\n+  while (i < text_len) {\n+    // find the position where delimiter matched for the first time\n+    int match_pos = match_string(text, text_len, i, delimiter, delim_len);\n+    if (match_pos == -1 && match_no != index) {\n+      // reached the end without finding a match.\n+      *out_len = 0;\n+      return \"\";\n+    } else {\n+      // Found a match. If the match number is index then return this match\n+      if (match_no == index) {\n+        int end_pos = match_pos - delim_len;\n+\n+        if (match_pos == -1) {\n+          // end position should be last position of the string as we have the last\n+          // delimiter\n+          end_pos = text_len;\n+        }\n+\n+        *out_len = end_pos - i;\n+        char* out_str =\n+            reinterpret_cast<char*>(gdv_fn_context_arena_malloc(context, *out_len));\n+        if (out_str == nullptr) {\n+          gdv_fn_context_set_error_msg(context,\n+                                       \"Could not allocate memory for output string\");\n+          *out_len = 0;\n\nReview comment:\n       added out_len 0 in the beginning\n\n##########\nFile path: cpp/src/gandiva/precompiled/string_ops.cc\n##########\n@@ -40,6 +40,18 @@ gdv_int32 bit_length_binary(const gdv_binary input, gdv_int32 length) {\n   return length * 8;\n }\n \n+int match_string(const char* input, gdv_int32 input_len, gdv_int32 start_pos,\n\nReview comment:\n       added\n\n##########\nFile path: cpp/src/gandiva/precompiled/string_ops.cc\n##########\n@@ -835,6 +847,66 @@ const char* replace_utf8_utf8_utf8(gdv_int64 context, const char* text,\n                                              out_len);\n }\n \n+FORCE_INLINE\n+const char* split_part(gdv_int64 context, const char* text, gdv_int32 text_len,\n+                       const char* delimiter, gdv_int32 delim_len, gdv_int32 index,\n+                       gdv_int32* out_len) {\n+  if (index < 1) {\n+    char error_message[100];\n+    snprintf(error_message, sizeof(error_message),\n+             \"Index in split_part must be positive, value provided was %d\", index);\n+    gdv_fn_context_set_error_msg(context, error_message);\n+    *out_len = 0;\n+    return \"\";\n+  }\n+\n+  if (delim_len == 0 || text_len == 0) {\n+    // output will just be text if no delimiter is provided\n+    *out_len = text_len;\n+    return text;\n+  }\n+\n+  int i = 0, match_no = 1;\n+\n+  while (i < text_len) {\n+    // find the position where delimiter matched for the first time\n+    int match_pos = match_string(text, text_len, i, delimiter, delim_len);\n+    if (match_pos == -1 && match_no != index) {\n+      // reached the end without finding a match.\n+      *out_len = 0;\n+      return \"\";\n+    } else {\n+      // Found a match. If the match number is index then return this match\n+      if (match_no == index) {\n+        int end_pos = match_pos - delim_len;\n+\n+        if (match_pos == -1) {\n+          // end position should be last position of the string as we have the last\n+          // delimiter\n+          end_pos = text_len;\n+        }\n+\n+        *out_len = end_pos - i;\n+        char* out_str =\n+            reinterpret_cast<char*>(gdv_fn_context_arena_malloc(context, *out_len));\n+        if (out_str == nullptr) {\n+          gdv_fn_context_set_error_msg(context,\n+                                       \"Could not allocate memory for output string\");\n+          *out_len = 0;\n\nReview comment:\n       I cannot refactor this output length out as we set this before trying to allocate memory. In rest of the places I have removed *out_len = 0 in the PR and added it in the beginning.\n\n\n\n\n----------------------------------------------------------------\nThis is an automated message from the Apache Git Service.\nTo respond to the message, please log on to GitHub and use the\nURL above to go to the specific comment.\n\nFor queries about this service, please contact Infrastructure at:\nusers@infra.apache.org\n",
                    "created": "2020-10-09T14:10:11.896+0000",
                    "updated": "2020-10-09T14:10:11.896+0000",
                    "started": "2020-10-09T14:10:11.895+0000",
                    "timeSpent": "10m",
                    "timeSpentSeconds": 600,
                    "id": "498472",
                    "issueId": "13327804"
                }
            ]
        },
        "customfield_12313920": null,
        "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/2",
            "id": "2",
            "description": "A new feature of the product, which has yet to be developed.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21141&avatarType=issuetype",
            "name": "New Feature",
            "subtask": false,
            "avatarId": 21141
        },
        "timespent": 9000,
        "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@546b5559[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@5b1dca82[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@5b2ec827[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@6ed2501a[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@e3d59f7[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@57773d09[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@7a35b830[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@61b75ec[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@628d7639[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@c7c8014[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@5bdf5d93[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@636e711[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}",
        "customfield_12314141": null,
        "customfield_12314140": null,
        "project": {
            "self": "https://issues.apache.org/jira/rest/api/2/project/12319525",
            "id": "12319525",
            "key": "ARROW",
            "name": "Apache Arrow",
            "projectTypeKey": "software",
            "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12319525&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12319525&avatarId=10011",
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12319525&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12319525&avatarId=10011"
            },
            "projectCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/13960",
                "id": "13960",
                "description": "Apache Arrow",
                "name": "Arrow"
            }
        },
        "aggregatetimespent": 9000,
        "customfield_12312520": null,
        "customfield_12312521": "Thu Oct 08 11:55:03 UTC 2020",
        "customfield_12314422": null,
        "customfield_12314421": null,
        "customfield_12314146": null,
        "customfield_12314420": null,
        "customfield_12314145": null,
        "customfield_12314144": null,
        "customfield_12314143": null,
        "resolutiondate": "2020-10-08T11:55:03.000+0000",
        "workratio": -1,
        "customfield_12312923": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "watches": {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ARROW-10023/watchers",
            "watchCount": 3,
            "isWatching": false
        },
        "created": "2020-09-16T07:38:30.000+0000",
        "updated": "2020-10-09T14:10:12.000+0000",
        "timeoriginalestimate": null,
        "description": null,
        "customfield_10010": null,
        "timetracking": {
            "remainingEstimate": "0h",
            "timeSpent": "2.5h",
            "remainingEstimateSeconds": 0,
            "timeSpentSeconds": 9000
        },
        "customfield_12314523": null,
        "customfield_12314127": null,
        "customfield_12314522": null,
        "customfield_12314126": null,
        "customfield_12314521": null,
        "customfield_12314125": null,
        "customfield_12314520": null,
        "customfield_12314124": null,
        "attachment": [],
        "customfield_12312340": null,
        "customfield_12314123": null,
        "customfield_12312341": null,
        "customfield_12312220": null,
        "customfield_12314122": null,
        "customfield_12314121": null,
        "customfield_12314120": null,
        "customfield_12314129": null,
        "customfield_12314524": null,
        "customfield_12314128": null,
        "summary": "[Gandiva][C++] Implementing Split part function in gandiva",
        "customfield_12314130": null,
        "customfield_12310291": null,
        "customfield_12310290": null,
        "customfield_12314138": null,
        "customfield_12314137": null,
        "environment": null,
        "customfield_12314136": null,
        "customfield_12314135": null,
        "customfield_12311020": null,
        "customfield_12314134": null,
        "duedate": null,
        "customfield_12314132": null,
        "customfield_12314131": null,
        "comment": {
            "comments": [
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13327804/comment/17196785",
                    "id": "17196785",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=maartenbreddels",
                        "name": "maartenbreddels",
                        "key": "maartenbreddels",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Maarten Breddels",
                        "active": true,
                        "timeZone": "Europe/Amsterdam"
                    },
                    "body": "Probably related to https://issues.apache.org/jira/browse/ARROW-9991\u00a0\r\nWe didn't really explore the gandvia-string kernels connection yet, but this might be a good reason to.",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=maartenbreddels",
                        "name": "maartenbreddels",
                        "key": "maartenbreddels",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Maarten Breddels",
                        "active": true,
                        "timeZone": "Europe/Amsterdam"
                    },
                    "created": "2020-09-16T08:32:56.177+0000",
                    "updated": "2020-09-16T08:32:56.177+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13327804/comment/17197846",
                    "id": "17197846",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=namanu",
                        "name": "namanu",
                        "key": "namanu",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34050",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34050",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34050",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34050"
                        },
                        "displayName": "Naman Udasi",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "[~maartenbreddels] Where will the split functions mentioned in ARROW-9991 be implemented? I think if possible we can make them reusable ?",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=namanu",
                        "name": "namanu",
                        "key": "namanu",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34050",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34050",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34050",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34050"
                        },
                        "displayName": "Naman Udasi",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2020-09-17T17:13:20.133+0000",
                    "updated": "2020-09-17T17:14:54.484+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13327804/comment/17197892",
                    "id": "17197892",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=maartenbreddels",
                        "name": "maartenbreddels",
                        "key": "maartenbreddels",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Maarten Breddels",
                        "active": true,
                        "timeZone": "Europe/Amsterdam"
                    },
                    "body": "It's gonna be in C++, I can push an initial version when I find the time, so you can take a look. I do a split into a list of strings, with a pattern separator, whitespace (ascii and utf8), and still need to finish reverse utf8 whitespace. You want a version that splits, and only takes the n-th part right?\u00a0",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=maartenbreddels",
                        "name": "maartenbreddels",
                        "key": "maartenbreddels",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Maarten Breddels",
                        "active": true,
                        "timeZone": "Europe/Amsterdam"
                    },
                    "created": "2020-09-17T18:27:06.906+0000",
                    "updated": "2020-09-17T18:27:06.906+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13327804/comment/17200628",
                    "id": "17200628",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=namanu",
                        "name": "namanu",
                        "key": "namanu",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34050",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34050",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34050",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34050"
                        },
                        "displayName": "Naman Udasi",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "yes. Split_part - \u00a0It should split and return the nth split",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=namanu",
                        "name": "namanu",
                        "key": "namanu",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34050",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34050",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34050",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34050"
                        },
                        "displayName": "Naman Udasi",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2020-09-23T07:29:24.397+0000",
                    "updated": "2020-09-23T07:29:24.397+0000"
                },
                {
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/13327804/comment/17210169",
                    "id": "17210169",
                    "author": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=praveenbingo",
                        "name": "praveenbingo",
                        "key": "praveenbingo",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Praveen Kumar",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "body": "Issue resolved by pull request 8231\n[https://github.com/apache/arrow/pull/8231]",
                    "updateAuthor": {
                        "self": "https://issues.apache.org/jira/rest/api/2/user?username=praveenbingo",
                        "name": "praveenbingo",
                        "key": "praveenbingo",
                        "avatarUrls": {
                            "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
                        },
                        "displayName": "Praveen Kumar",
                        "active": true,
                        "timeZone": "Etc/UTC"
                    },
                    "created": "2020-10-08T11:55:03.316+0000",
                    "updated": "2020-10-08T11:55:03.316+0000"
                }
            ],
            "maxResults": 5,
            "total": 5,
            "startAt": 0
        },
        "customfield_12311820": "0|z0in68:",
        "customfield_12314139": null
    }
}